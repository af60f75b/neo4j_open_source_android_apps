id,short_id,title,message,additions,deletions,total,author_name,author_email,committer_name,committer_email,authored_date,committed_date,parent_ids
f623641ee4ae1ebdb975eae3dbdd2d2bebe11a9e,f623641e,"Merge ""Black theme.""","Merge ""Black theme.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1512162508,1512162508,"ec53df4c78e0c6c1c876af980a01226a366ac996,4ba92b0d98c61daaa15f2833016bd50ff0ec9004"
ec53df4c78e0c6c1c876af980a01226a366ac996,ec53df4c,"Merge ""Make ""Continue Reading"" card load pages from existing tabs.""","Merge ""Make ""Continue Reading"" card load pages from existing tabs.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1512161243,1512161243,"0acffc78830682752cc9e80bb21281e5a22cdfaa,0210a0324ec797593e00864b8241a6606911793c"
0210a0324ec797593e00864b8241a6606911793c,0210a032,"Make ""Continue Reading"" card load pages from existing tabs.","Make ""Continue Reading"" card load pages from existing tabs.

Bug: T180528
Change-Id: I555a7d75a6bf1fb390c36439993649ff295ad960
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1512144162,1512159453,ca7886f7cf9275ebbc5a615700c1cc71e521472a
4ba92b0d98c61daaa15f2833016bd50ff0ec9004,4ba92b0d,Black theme.,"Black theme.

This adds a new Black theme to the app (mostly inherited from the Dark
theme), and also adds a new Activity for the user to ""try on"" any of the
themes that we offer.

This also provides image dimming for larger native images shown in the app
(i.e. images shown with FaceAndColorDetectImageView)

Bug: T173319
Change-Id: Ie885e6b8ea6014a93d9cc2b9874fc3622831f8d5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511835366,1512157602,a156ee246475a4ce59f108c1f961419f4a721395
0acffc78830682752cc9e80bb21281e5a22cdfaa,0acffc78,Fix OnThisDayPagesViewHolder crash,"Fix OnThisDayPagesViewHolder crash

- App crash on null pages response fixed by adding a null check and removing any null pages.

Bug: T181668
Change-Id: I1a6061a625e73d485c66332e5558ae25c9ca629e
",,,,sharvani,sharan@wikimedia.org,sharvani,sharan@wikimedia.org,1512154148,1512156071,d014a5ba4d6cbd1e695c4c1e8a34db69ac8a9c35
d014a5ba4d6cbd1e695c4c1e8a34db69ac8a9c35,d014a5ba,"Merge ""Event logging for On This Day.""","Merge ""Event logging for On This Day.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1512151380,1512151380,"ca7886f7cf9275ebbc5a615700c1cc71e521472a,a156ee246475a4ce59f108c1f961419f4a721395"
ca7886f7cf9275ebbc5a615700c1cc71e521472a,ca7886f7,Update text colors in About activity.,"Update text colors in About activity.

Bug: T181640
Change-Id: Ib9ce17b368aa6bfca0632940cd8b81a259ce6114
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1512081493,1512081493,c06b33502a928f4e67efbfcdded83042caa9e09c
c06b33502a928f4e67efbfcdded83042caa9e09c,c06b3350,Make news text highlightable.,"Make news text highlightable.

Change-Id: I75ef8ba4cbb5eddce73bb3ecee580c301e304c5e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1512080757,1512080757,acdc3f790e49fc9f58a7b80ff00650f09d863963
a156ee246475a4ce59f108c1f961419f4a721395,a156ee24,Event logging for On This Day.,"Event logging for On This Day.

This implements the new schema developed at:
https://meta.wikimedia.org/wiki/Schema:MobileWikiAppOnThisDay

Change-Id: Ia558f18e3b34b0a43f116c3dd1ce2d0a83f84675
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1512067498,1512076344,acdc3f790e49fc9f58a7b80ff00650f09d863963
acdc3f790e49fc9f58a7b80ff00650f09d863963,acdc3f79,Update style of Trending card footer.,"Update style of Trending card footer.

Bug: T170884
Change-Id: Ice432e063a11cbfe370f65438a28ae999f1e2d39
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1512074752,1512074752,1d5bbe1a6c7758594d0c5fdfee38443a235530c5
1d5bbe1a6c7758594d0c5fdfee38443a235530c5,1d5bbe1a,Event logging for Feed Configuration.,"Event logging for Feed Configuration.

This implements the new schema developed at:
https://meta.wikimedia.org/wiki/Schema:MobileWikiAppFeedConfigure

Change-Id: I81b17597fc05a544b44176c8b1708b1bc79da8c3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1512064885,1512064885,da8a0c535761694010b0ec02b2b361511782c91d
da8a0c535761694010b0ec02b2b361511782c91d,da8a0c53,Event logging for Randomizer.,"Event logging for Randomizer.

This implements the new schema developed at:
https://meta.wikimedia.org/wiki/Schema:MobileWikiAppRandomizer

Change-Id: I61e1588ad0183389787e30955f62848db85e05b5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1512062914,1512063121,b4d611d81afab903b71fd461f468ba350a3dafef
b4d611d81afab903b71fd461f468ba350a3dafef,b4d611d8,Update default ordering of feed cards.,"Update default ordering of feed cards.

This changes the default order of feed cards, based on design discussions.
If you've made any customizations or reordering of cards in your dev
build, you may need to reset to defaults and try again.

Change-Id: Ie76df30d2f08600978ee30ce1c3b3929eaae1d54
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1512060345,1512060345,a9f18fc67d2cbdbf452c055f2d26aa4639a219cc
a9f18fc67d2cbdbf452c055f2d26aa4639a219cc,a9f18fc6,Fix entering Randomizer activity from app shortcut.,"Fix entering Randomizer activity from app shortcut.

Change-Id: Ie1b5fb60b2e20ac86e19270ea90a6d92a8c62f17
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1512060005,1512060005,7f53b71fc1abb22e6a30b1edf17b1978bd31e7cb
7f53b71fc1abb22e6a30b1edf17b1978bd31e7cb,7f53b71f,"Merge ""Update wikimedia-page-library to 4.7.7.""","Merge ""Update wikimedia-page-library to 4.7.7.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1512052154,1512052154,"f19abe3a9b1de095ecf3ed0d1886b059dacf6bd7,c227cdef4c00d6324a7c181dfdc5ecf7dc3f336d"
f19abe3a9b1de095ecf3ed0d1886b059dacf6bd7,f19abe3a,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1512051478,1512051478,"a7fc937371547a799a7d1a5408f00dcc422a295e,a83ddc5ec8fc610edbb276cc8af45874e2a7242e"
a7fc937371547a799a7d1a5408f00dcc422a295e,a7fc9373,"Merge ""Create app-wide onboarding screens introducing new users to the app and…","Merge ""Create app-wide onboarding screens introducing new users to the app and its features  - Update images and texts""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1512050934,1512050934,"e553ed22536111bccf96990c162a4da77184e092,558b4b30303ad73b32c0f0dc22a0c123d499cfbd"
a83ddc5ec8fc610edbb276cc8af45874e2a7242e,a83ddc5e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia18198483813f63930bc0852a3b55dd99d38fc09
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1512028626,1512028626,e553ed22536111bccf96990c162a4da77184e092
c227cdef4c00d6324a7c181dfdc5ecf7dc3f336d,c227cdef,Update wikimedia-page-library to 4.7.7.,"Update wikimedia-page-library to 4.7.7.

Contains provisions for Black mode.

Change-Id: I1d4ce0a5f512236b6a4a41fcec17be88b1b500f7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511994077,1511994077,e553ed22536111bccf96990c162a4da77184e092
e553ed22536111bccf96990c162a4da77184e092,e553ed22,Don't show Offline Library setting in Beta or Prod.,"Don't show Offline Library setting in Beta or Prod.

Change-Id: Ic76a03c4eb4856aad25c63e98acf22f9305ace64
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511993975,1511993975,6a184d9ba380b3679caccd0c221a94dace759a65
558b4b30303ad73b32c0f0dc22a0c123d499cfbd,558b4b30,Create app-wide onboarding screens introducing new users to the app and its features,"Create app-wide onboarding screens introducing new users to the app and its features
 - Update images and texts

Bug: T181149
Change-Id: Iea91e977ddefb020e6d1dc679e54f1e6c5dad7de
",,,,cooltey,cfeng@wikimedia.org,cooltey,cfeng@wikimedia.org,1511832774,1511983091,f039ff9b09c943cad961285bc6f789e4f549d275
6a184d9ba380b3679caccd0c221a94dace759a65,6a184d9b,Tweak design of static cards in Feed.,"Tweak design of static cards in Feed.

Bug: T158788
Change-Id: I78aad557e051dc0f2f5427ca6331592ab7e9e1a5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511972964,1511972964,ffdd34481b171c5d893f82cfa195fcd4265e3938
ffdd34481b171c5d893f82cfa195fcd4265e3938,ffdd3448,"Merge ""On this day card""","Merge ""On this day card""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511967285,1511967285,"858b3160217aff26d720eeed61d4520b983ced20,3b3c6a101a6780a60b16db9873c140b4d825e3b1"
858b3160217aff26d720eeed61d4520b983ced20,858b3160,"Merge ""Replace usage of deprecated MenuItemCompat.getActionView() method""","Merge ""Replace usage of deprecated MenuItemCompat.getActionView() method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511965170,1511965170,"0aeecc60eab7c33227a4b21857fd2050a8a3abdc,bd7cbdd6a74596d62a61f2902e93404a702035c9"
0aeecc60eab7c33227a4b21857fd2050a8a3abdc,0aeecc60,"Merge ""Replace usage of deprecated MetricsManager.register method""","Merge ""Replace usage of deprecated MetricsManager.register method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511964997,1511964997,"35765fa0ad6b9cc74b65353fecb44f1d10fdb5d6,25e9b523fdb056da036b9b9b0c5c12127e361a9a"
35765fa0ad6b9cc74b65353fecb44f1d10fdb5d6,35765fa0,"Merge ""Replace use of deprecated supportInvalidateOptionsMenu()""","Merge ""Replace use of deprecated supportInvalidateOptionsMenu()""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511964996,1511964996,"eadfc0b720d0048cebf2b7466c2396c0149b3937,7cc3e97fdef3d1b042f65b172bff5baaf7a1504c"
eadfc0b720d0048cebf2b7466c2396c0149b3937,eadfc0b7,"Merge ""Update to Mapbox 5.2.0.""","Merge ""Update to Mapbox 5.2.0.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511964789,1511964789,"810813d0fee58a8f53b575c0a821c33b09ba6a9a,ac7ced3cc6549527cb5dac02c7e6b13114ab04d0"
bd7cbdd6a74596d62a61f2902e93404a702035c9,bd7cbdd6,Replace usage of deprecated MenuItemCompat.getActionView() method,"Replace usage of deprecated MenuItemCompat.getActionView() method

This method has been deprecated since API 26 in favour of the direct
MenuItem.getActionView() method.

Change-Id: Iff5150fada998a6a8037d07eb5a0796699319bbb
",,,,Zhao Wei Liew,zhaoweiliew@gmail.com,Zwliew,zhaoweiliew@gmail.com,1511957246,1511957438,25e9b523fdb056da036b9b9b0c5c12127e361a9a
810813d0fee58a8f53b575c0a821c33b09ba6a9a,810813d0,Trim leading/trailing whitespace from search queries,"Trim leading/trailing whitespace from search queries

Bug: T179342
Test: Add ""Android"" page to search database. A query for ""Android""
      and another query for ""Android "" or "" Android"" return
      identical results.

Change-Id: Ife81187ae878868795afd929ccded8f3f74f592b
",,,,Zhao Wei Liew,zhaoweiliew@gmail.com,Zwliew,zhaoweiliew@gmail.com,1511939420,1511943615,47ef383893b64bc82bafac8f54908c91dbb25791
25e9b523fdb056da036b9b9b0c5c12127e361a9a,25e9b523,Replace usage of deprecated MetricsManager.register method,"Replace usage of deprecated MetricsManager.register method

The register(Context, Application) method has been deprecated in
favour of the register(Application) method.

Bug: T179337
Change-Id: Ida99d6ed321e515e029b0916ba477dc5eb412a04
",,,,Zhao Wei Liew,zhaoweiliew@gmail.com,Zhao Wei Liew,zhaoweiliew@gmail.com,1511937177,1511937303,7cc3e97fdef3d1b042f65b172bff5baaf7a1504c
7cc3e97fdef3d1b042f65b172bff5baaf7a1504c,7cc3e97f,Replace use of deprecated supportInvalidateOptionsMenu(),"Replace use of deprecated supportInvalidateOptionsMenu()

The supportInvalidateOptionsMenu() method has been deprecated since
API 26. Replace usage of the deprecated method with the recommended
invalidateOptionsMenu() method.

Bug: T179337
Change-Id: I5165b1f7f10b54eea5d9ef40ff38666d9f9bede8
",,,,Zhao Wei Liew,zhaoweiliew@gmail.com,Zhao Wei Liew,zhaoweiliew@gmail.com,1511937066,1511937285,47ef383893b64bc82bafac8f54908c91dbb25791
3b3c6a101a6780a60b16db9873c140b4d825e3b1,3b3c6a10,On this day card,"On this day card

- Feed card has been changed per design

- Design changes for detail screen.

BUG: T175995
Change-Id: Ibcc2d23eb180b2f4ec3ffa0cea846efe75f2885d
",,,,sharvani,sharan@wikimedia.org,sharvani,sharan@wikimedia.org,1510621128,1511917195,6c5010046f788322d08bfbd1b4dc9eb394b670f4
47ef383893b64bc82bafac8f54908c91dbb25791,47ef3838,"Merge ""Update the position of the date read text on the cards""","Merge ""Update the position of the date read text on the cards""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511905520,1511905520,"4ee64b5129d12543bc1b9993e8f44251f3c450d8,c7aa8e8c86914dabc04efe65951ac3df43c8c56a"
4ee64b5129d12543bc1b9993e8f44251f3c450d8,4ee64b51,Add an overflow menu option in Feed cards to go to the Configure screen,"Add an overflow menu option in Feed cards to go to the Configure screen

Bug: T180843
Change-Id: I5eb18bd0c8567eeb3ca6e550829ce004765432ce
",,,,Cooltey Feng,cfeng@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511213868,1511904105,f039ff9b09c943cad961285bc6f789e4f549d275
ac7ced3cc6549527cb5dac02c7e6b13114ab04d0,ac7ced3c,Update to Mapbox 5.2.0.,"Update to Mapbox 5.2.0.

With much crossing of fingers, this might fix crashes we've seen on
Chromebooks... (while not introducing new ones.)

Bug: T164317
Change-Id: I01cf48849c1b269d189349997b3ab4f889fffe23
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511901210,1511901294,f039ff9b09c943cad961285bc6f789e4f549d275
f039ff9b09c943cad961285bc6f789e4f549d275,f039ff9b,"Merge ""Design updates for Randomizer.""","Merge ""Design updates for Randomizer.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511826882,1511826882,"0aa7404a26c5f40506aef32a7a6dcaa9d3fe5b1b,fe6265cf3858132870105b911d46f81f20e50e1a"
0aa7404a26c5f40506aef32a7a6dcaa9d3fe5b1b,0aa7404a,"Merge ""New: onboarding card for customizing the Feed.""","Merge ""New: onboarding card for customizing the Feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511825173,1511825173,"9d943b6283721e5e43f901077bf09f236bc86aaf,47bd099d0aaeea34c01bbc8e7b499c2ef62d517b"
9d943b6283721e5e43f901077bf09f236bc86aaf,9d943b62,"Merge ""Update design of feed content customization.""","Merge ""Update design of feed content customization.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511824932,1511824933,"10de6c51d7ccf596e45db3f3aef481456c2cb4b3,c48b3dbc37b255f1726d3e765431296a942b98d2"
fe6265cf3858132870105b911d46f81f20e50e1a,fe6265cf,Design updates for Randomizer.,"Design updates for Randomizer.

- The bookmark icon is now correctly filled-in when the page is added to a
  list, and allows the user to remove and/or add to another list.
- Fixed background color.
- Card height is now fixed.

Bug: T158788
Change-Id: I7015f580713346b227b7a3a8d755e11d21bc6621
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511809083,1511809083,2b143dab024909f387f0d2d94ee18e65d182a266
10de6c51d7ccf596e45db3f3aef481456c2cb4b3,10de6c51,Fix navigation to certain links from Reference popups.,"Fix navigation to certain links from Reference popups.

Bug: T180823
Change-Id: I2e05da1099e4495ff4966bd8f4dd6c791f44aec3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511801051,1511801051,2b143dab024909f387f0d2d94ee18e65d182a266
2b143dab024909f387f0d2d94ee18e65d182a266,2b143dab,Fix title formatting in link preview dialog.,"Fix title formatting in link preview dialog.

Bug: T180836
Change-Id: I169b532ec68498bce2c0bf3ec436bb70e7fd20ea
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511798422,1511798422,85bf306f9d5d77971800c0eb861fe5b64189e8be
47bd099d0aaeea34c01bbc8e7b499c2ef62d517b,47bd099d,New: onboarding card for customizing the Feed.,"New: onboarding card for customizing the Feed.

Bug: T181147
Change-Id: I2a72ae93c618452317250c91927313d7b8cf9a9b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511797506,1511797506,c48b3dbc37b255f1726d3e765431296a942b98d2
c48b3dbc37b255f1726d3e765431296a942b98d2,c48b3dbc,Update design of feed content customization.,"Update design of feed content customization.

Bug: T141397
Change-Id: I11b1646ec78750dd9757a9983a16f4ba287c1e27
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511794516,1511794652,9ff52b148ce98b0a93ea652bf3f12a275b06a33c
85bf306f9d5d77971800c0eb861fe5b64189e8be,85bf306f,"Merge ""Update to wikimedia-page-lib 4.7.4.""","Merge ""Update to wikimedia-page-lib 4.7.4.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511792116,1511792116,"a9b814025e72663237cd52c8e47ef6e88adf770c,9ff52b148ce98b0a93ea652bf3f12a275b06a33c"
a9b814025e72663237cd52c8e47ef6e88adf770c,a9b81402,"Merge ""Update to okhttp 3.9.1.""","Merge ""Update to okhttp 3.9.1.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511792116,1511792116,"429051059332428fcdad2f1461133a8402808b99,d5ca14e1ed572b4f8fa169ebff4b5f8c3f3717c3"
429051059332428fcdad2f1461133a8402808b99,42905105,"Merge ""Scroll to correct position when clicking on ""About"" section in ToC.""","Merge ""Scroll to correct position when clicking on ""About"" section in ToC.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511792109,1511792109,"fc3331b0c58ceb7a75311fcddeaa3afbddcd3cc5,e8d8ae30c11f1dda7414e2929967147f46f3580f"
9ff52b148ce98b0a93ea652bf3f12a275b06a33c,9ff52b14,Update to wikimedia-page-lib 4.7.4.,"Update to wikimedia-page-lib 4.7.4.

Change-Id: Id1339e126c85fc7e00fd7ffaf49c20801d5f39f0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511791462,1511791462,d5ca14e1ed572b4f8fa169ebff4b5f8c3f3717c3
d5ca14e1ed572b4f8fa169ebff4b5f8c3f3717c3,d5ca14e1,Update to okhttp 3.9.1.,"Update to okhttp 3.9.1.

This fixes an obscure crash that has been observed in API 26.

Change-Id: I7134e3e57c09bbfeea86ba2989c2a1e251d98658
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511791310,1511791310,e8d8ae30c11f1dda7414e2929967147f46f3580f
e8d8ae30c11f1dda7414e2929967147f46f3580f,e8d8ae30,"Scroll to correct position when clicking on ""About"" section in ToC.","Scroll to correct position when clicking on ""About"" section in ToC.

Bug: T181259
Change-Id: Idbe4513dc42d96da0631d1882f85660a02a48fb2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511790614,1511790614,7e6d25439755ee046c2a8d2c0ae434a2f885fdc8
fc3331b0c58ceb7a75311fcddeaa3afbddcd3cc5,fc3331b0,"Merge ""Scroll feed to top when Explore tab clicked again.""","Merge ""Scroll feed to top when Explore tab clicked again.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511789733,1511789733,"0f8786f903ee473d0dcdd41bafff69bc82b15153,7e6d25439755ee046c2a8d2c0ae434a2f885fdc8"
7e6d25439755ee046c2a8d2c0ae434a2f885fdc8,7e6d2543,Scroll feed to top when Explore tab clicked again.,"Scroll feed to top when Explore tab clicked again.

Bug: T181394
Change-Id: Iaa856e8de921614c4d9962679bbff7e77a34e653
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1511789245,1511789245,9d3f80f2d98a5c85cbf7c1c7e6899e8d88ff21dd
0f8786f903ee473d0dcdd41bafff69bc82b15153,0f8786f9,"Merge ""Include syntax highlighting CSS styles.""","Merge ""Include syntax highlighting CSS styles.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511789043,1511789043,"3375ae2b9fec993e5fdca256ee518dcd0a691f7d,baf532b10342d199f048549724dc85745c4b4044"
3375ae2b9fec993e5fdca256ee518dcd0a691f7d,3375ae2b,"Merge ""Update bundled CSS.""","Merge ""Update bundled CSS.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511789015,1511789015,"37bb6d6c3be5f37cc003bdebf4efe933fd916a69,8b86b9c6ad6623449522d80a3be6e82f02dff70f"
37bb6d6c3be5f37cc003bdebf4efe933fd916a69,37bb6d6c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ibd261858f090e6382193c8be0c519837a8cacb23
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1511767061,1511767061,9d3f80f2d98a5c85cbf7c1c7e6899e8d88ff21dd
c7aa8e8c86914dabc04efe65951ac3df43c8c56a,c7aa8e8c,Update the position of the date read text on the cards,"Update the position of the date read text on the cards

- Update the position of the date read text on the `Continue reading` and `Because you read` cards
- Add a setSubtitle() to CardLargeHeaderView and adjust the view_card_header_large.xml layout
- Update the strings.xml and change the `Yesterday` and `Today` string to lowercase

Bug: T140685
Change-Id: I7e4b38dd5e2124e8c305e7da88c51f29dc76033f
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1511222931,1511222931,9d3f80f2d98a5c85cbf7c1c7e6899e8d88ff21dd
9d3f80f2d98a5c85cbf7c1c7e6899e8d88ff21dd,9d3f80f2,"Merge ""Revert ""Don't widen images on metered connections""""","Merge ""Revert ""Don't widen images on metered connections""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511204495,1511204495,"b9e735af9c8476ccd1c139aa88b3bb7100da50d2,e25b8164a8a635d68ffc64cf7bde1b761767fd0a"
b9e735af9c8476ccd1c139aa88b3bb7100da50d2,b9e735af,"Merge ""wikimedia-page-library -> 4.7.4""","Merge ""wikimedia-page-library -> 4.7.4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1511199515,1511199515,"397e96139e1f3a0ffce1d45c5446fe12fe94cf0d,7d23e3184c240251a768e511d3e609201b15ff66"
e25b8164a8a635d68ffc64cf7bde1b761767fd0a,e25b8164,"Revert ""Don't widen images on metered connections""","Revert ""Don't widen images on metered connections""

This is probably no longer needed, as images are now lazy-loaded, and
data-sensitive users can turn off images completely.

This reverts commit 7ae21ce4dea5d39066d80c9f44e995d4228cf7b5.

Change-Id: Ie9f8a894fd05a44dc95255ebc22eab27543df123
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1510952857,1510954816,7d23e3184c240251a768e511d3e609201b15ff66
7d23e3184c240251a768e511d3e609201b15ff66,7d23e318,wikimedia-page-library -> 4.7.4,"wikimedia-page-library -> 4.7.4

Change-Id: I7e438d889dac343042b2ab374ebcdbc05146b336
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1510954408,1510954607,36442723048cc16691594459c90d06c265062dca
397e96139e1f3a0ffce1d45c5446fe12fe94cf0d,397e9613,"Merge ""Follow-up to reading list sync notification.""","Merge ""Follow-up to reading list sync notification.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510954550,1510954550,"36442723048cc16691594459c90d06c265062dca,cce0e84a0e1a24240e939afc375422a65b81ee54"
cce0e84a0e1a24240e939afc375422a65b81ee54,cce0e84a,Follow-up to reading list sync notification.,"Follow-up to reading list sync notification.

Sorry, it started with a few tweaks, but then got a little more extensive...
This simplifies the logic and the code. Just a little bit.
Please take note of the changes for future tasks.

Change-Id: I2272e629d8248620b03f98404ca7afbc8a7d47b0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510864209,1510941493,fa9cd2cd3af4cf71c4985de963526949447c2a2a
36442723048cc16691594459c90d06c265062dca,36442723,"Merge ""Revise onboarding and user education cards in sideloading Offline Library…","Merge ""Revise onboarding and user education cards in sideloading Offline Library  - Remove OnboardingClient() from FeedCoordinator  - Add sideloading version text  - Set default value of offline tutorial as false""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510940319,1510940319,"2575f968e5cec0b6024fd482f5f2ecc6ad9d43a3,757c67275c26bb090314ccaced3f8f60b2f4ccb3"
2575f968e5cec0b6024fd482f5f2ecc6ad9d43a3,2575f968,"Merge ""Fix: Invisible toolbar icons in <= API21  - Update some icons with themed…","Merge ""Fix: Invisible toolbar icons in <= API21  - Update some icons with themed attribute  - For v19 and v21 styles, srcCompact and android:src cannot be existed in the same time (otherwise will be crashed or does not work)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510940063,1510940063,"1994ff3f9ddd688be05e21332e7296d7bb26ea43,cc960e0097030afb6d1bed336dc050a1766d4a2c"
baf532b10342d199f048549724dc85745c4b4044,baf532b1,Include syntax highlighting CSS styles.,"Include syntax highlighting CSS styles.

This introduces the inclusion of CSS content from the resource module of
ext.pygments, which ensures that syntax-highlighted code in articles will
be styles correctly.

Bug: T180332
Change-Id: I4ef004e96339f767804222308987eadaf2e83d0d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510936764,1510936764,8b86b9c6ad6623449522d80a3be6e82f02dff70f
8b86b9c6ad6623449522d80a3be6e82f02dff70f,8b86b9c6,Update bundled CSS.,"Update bundled CSS.

Change-Id: I42ecbc7aec2cfd79817a38019ecb55a543dfe4b3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510936545,1510936545,f6c7176a031466eee2ba2f7703bcbdaeb28cab71
757c67275c26bb090314ccaced3f8f60b2f4ccb3,757c6727,Revise onboarding and user education cards in sideloading Offline Library,"Revise onboarding and user education cards in sideloading Offline Library
 - Remove OnboardingClient() from FeedCoordinator
 - Add sideloading version text
 - Set default value of offline tutorial as false

Bug: T179203
Change-Id: I6b0367c8fc6aa9fc8c2c9ced9ee0a40306fa168e
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1510619329,1510870120,d4f5c46012d976825d48c69e28ac84da5c348498
1994ff3f9ddd688be05e21332e7296d7bb26ea43,1994ff3f,"Merge ""Allow users to cancel/pause/resume the downloading process when syncing …","Merge ""Allow users to cancel/pause/resume the downloading process when syncing  - Use BroadcastReceiver to receive the actions from notification bar  - For < API19, use regular activity to receive the cancel action from notification bar  - When login / syncing, the notification bar will be displayed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510865839,1510865839,"a49d21d961bbf4b49725673a020ea9838431e52a,fa9cd2cd3af4cf71c4985de963526949447c2a2a"
a49d21d961bbf4b49725673a020ea9838431e52a,a49d21d9,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ifd98286d1a4156f287334ffcdd8abb5364bb57c4
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1510827376,1510827376,d9e33e95fecbffa6950b4d16ea44e911d9ffc3c3
cc960e0097030afb6d1bed336dc050a1766d4a2c,cc960e00,Fix: Invisible toolbar icons in <= API21,"Fix: Invisible toolbar icons in <= API21
 - Update some icons with themed attribute
 - For v19 and v21 styles, srcCompact and android:src cannot be existed in the same time (otherwise will be crashed or does not work)

Bug: T180186
Change-Id: I1bef2aac50e48e728886e7878fb7fdb6caba2422
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1510797807,1510817139,d9e33e95fecbffa6950b4d16ea44e911d9ffc3c3
d9e33e95fecbffa6950b4d16ea44e911d9ffc3c3,d9e33e95,"Merge ""Randomizr (ready to go).""","Merge ""Randomizr (ready to go).""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510772645,1510772645,"f6c7176a031466eee2ba2f7703bcbdaeb28cab71,fdf4f0b07ceaa2faa5f81e50aff437061f1b2491"
f6c7176a031466eee2ba2f7703bcbdaeb28cab71,f6c7176a,Fix alignment of ConstraintLayouts for RTL.,"Fix alignment of ConstraintLayouts for RTL.

When using ConstraintLayout, one shouldn't forget to set the
constraintStart attribute. Even though things might appear correct in a
LTR configuration, they may be broken in RTL.

Bug: T180533
Change-Id: Ib407615e5521f972bfbcbb416baff23a0d686dd8
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510695527,1510695527,d538bf90611ed1de336d4b131b23a0e477667c86
d538bf90611ed1de336d4b131b23a0e477667c86,d538bf90,"Merge ""Fix: Incorrect language counts""","Merge ""Fix: Incorrect language counts""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510689827,1510689827,"9c20fa7b15f81ed04d6775f7963f519b6b8338c8,be314d69a82007041e84739b61ae0bc9da180db1"
9c20fa7b15f81ed04d6775f7963f519b6b8338c8,9c20fa7b,"Merge ""Update designs for Random and Main Page cards in the feed.""","Merge ""Update designs for Random and Main Page cards in the feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510686696,1510686696,"a7c391c942854f169c7d1e3a3b4a2cc01db2c7da,c4bd824bd9dc96155c35eccfbe09fcca41248b74"
a7c391c942854f169c7d1e3a3b4a2cc01db2c7da,a7c391c9,"Merge ""Update build tools to 27.0.1.""","Merge ""Update build tools to 27.0.1.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510682382,1510682382,"0189911f88cda7e674c5e59927db5a75b33324a7,99e35a242d4d36b3877025a2b97ee4848cd79f3e"
0189911f88cda7e674c5e59927db5a75b33324a7,0189911f,"Merge ""Don't throw exception when no content available for certain feed cards.""","Merge ""Don't throw exception when no content available for certain feed cards.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510682381,1510682381,"d4f5c46012d976825d48c69e28ac84da5c348498,13d9a308ffa1207214e096ebedc6114005965dea"
fdf4f0b07ceaa2faa5f81e50aff437061f1b2491,fdf4f0b0,Randomizr (ready to go).,"Randomizr (ready to go).

Bug: T158788
Change-Id: I51d1799ca5b7557c89d5fa92d2ea135b9c44187a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509589807,1510680105,c4bd824bd9dc96155c35eccfbe09fcca41248b74
c4bd824bd9dc96155c35eccfbe09fcca41248b74,c4bd824b,Update designs for Random and Main Page cards in the feed.,"Update designs for Random and Main Page cards in the feed.

Bug: T158788
Change-Id: I5541cf29069f12459d6b464f0a9e9602e3b9718e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510677518,1510677518,d4f5c46012d976825d48c69e28ac84da5c348498
fa9cd2cd3af4cf71c4985de963526949447c2a2a,fa9cd2cd,Allow users to cancel/pause/resume the downloading process when syncing,"Allow users to cancel/pause/resume the downloading process when syncing
 - Use BroadcastReceiver to receive the actions from notification bar
 - For < API19, use regular activity to receive the cancel action from notification bar
 - When login / syncing, the notification bar will be displayed.

Please follow the QA steps on Phabricator

Bug: T177518
Change-Id: If53a948051a30fe76e3a164b03c1167271fa7f1a
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1509574730,1510612849,d8c8cd46b7959e81bb250a09d305b5aeffbbe729
be314d69a82007041e84739b61ae0bc9da180db1,be314d69,Fix: Incorrect language counts,"Fix: Incorrect language counts

 - Update the language counts when the article is in Chinese (should +1 if it's in Traditional or Simplified Chinese)

Bug: T180182
Change-Id: I4c40b7edcf9324404ccff9c7c99540e03fc0b114
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1510612049,1510612755,d4f5c46012d976825d48c69e28ac84da5c348498
99e35a242d4d36b3877025a2b97ee4848cd79f3e,99e35a24,Update build tools to 27.0.1.,"Update build tools to 27.0.1.

This updates our build tools to the very latest version.
In the previous version of build tools (26.x) there was actually an issue
that was causing certain models of devices to hard-crash, and even enter a
reboot loop.

https://issuetracker.google.com/issues/64434571

Change-Id: I686024860c363dee1e079fd1751a36137cbd04c8
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510608216,1510608216,13d9a308ffa1207214e096ebedc6114005965dea
d4f5c46012d976825d48c69e28ac84da5c348498,d4f5c460,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510607894,1510607894,"92eaaa43262c460141ed76c9f454e0bf4ead301a,06dd83c47b101c24b04fc095fb1c17f382b62e2b"
06dd83c47b101c24b04fc095fb1c17f382b62e2b,06dd83c4,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I36b1a6a11d0f74c07b474f243dc1d9af074092de
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1510561955,1510607305,e6ac34f250481dcd5d0ceef3b6889fdd24a547af
13d9a308ffa1207214e096ebedc6114005965dea,13d9a308,Don't throw exception when no content available for certain feed cards.,"Don't throw exception when no content available for certain feed cards.

When no content is available for the ContinueReading or BecauseYouRead
cards, they throw an exception, which can cause issues with the ordering
and visibility of unrelated cards.

Change-Id: Ibf690f5e2d3256be8fc9d70cb98901e101df8a1a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510606352,1510606352,92eaaa43262c460141ed76c9f454e0bf4ead301a
92eaaa43262c460141ed76c9f454e0bf4ead301a,92eaaa43,"Merge ""Remove old deprecated SavedPages database table.""","Merge ""Remove old deprecated SavedPages database table.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510604567,1510604567,"6c5010046f788322d08bfbd1b4dc9eb394b670f4,51bcb33646e60d206656a1eb10ccb6d0f2c03a01"
6c5010046f788322d08bfbd1b4dc9eb394b670f4,6c501004,"Merge ""Use displaytitle from server for link previews""","Merge ""Use displaytitle from server for link previews""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510595926,1510595927,"215b1f72ea8764e1b779435d020c107f2a7d7a94,b4899af48a3adbde57645cb6dda1b61ddb755224"
b4899af48a3adbde57645cb6dda1b61ddb755224,b4899af4,Use displaytitle from server for link previews,"Use displaytitle from server for link previews

Prevents article title display inconsistencies by using the displaytitle
provided by the server response (and deferring adding the title to the
link preview until then). In practice, the delay should be barely user-
noticeable.

If the summary request fails, the app falls back to the old behavior in
the error callback.

This should also have the desirable effect of showing the true article
title in previews, with any redirects resolved.

Bug: T149429
Change-Id: I9030f5871250505e0e0399c94f2b857c30204db5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1510459465,1510460334,e6ac34f250481dcd5d0ceef3b6889fdd24a547af
215b1f72ea8764e1b779435d020c107f2a7d7a94,215b1f72,Respect the full URL in gallery image description links,"Respect the full URL in gallery image description links

Our gallery link handling always constructs a page title based on the
current app language, but gallery image descriptions come from Wikimedia
Commons and may contain links to any wiki.

This updates the link handling code so as not to assume the app language
is the wiki being linked to, when a full URL is provided.

Bug: T114025
Change-Id: I8aa14f7a13d37a5f59edb397aa6dd11718a3c508
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1510357905,1510358478,e6ac34f250481dcd5d0ceef3b6889fdd24a547af
51bcb33646e60d206656a1eb10ccb6d0f2c03a01,51bcb336,Remove old deprecated SavedPages database table.,"Remove old deprecated SavedPages database table.

This is long overdue, and is in preparation for the new implementation of
reading list syncing.

Change-Id: I7f3e97841d0d54a08486b436c1d8413890f11efc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510327847,1510327847,0e58d5aa8d9663ec0fab1cc5eca1caaa439488d3
e6ac34f250481dcd5d0ceef3b6889fdd24a547af,e6ac34f2,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I62e6043533a958f689d2a5cf57b689c5641ac70e
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1510212665,1510212665,0e58d5aa8d9663ec0fab1cc5eca1caaa439488d3
0e58d5aa8d9663ec0fab1cc5eca1caaa439488d3,0e58d5aa,"Merge ""New: Make Feed content completely configurable.""","Merge ""New: Make Feed content completely configurable.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510173866,1510173866,"7d08420fd228f7fe31ac4f4f1b438d6fd0ada5bd,9ea7cc3028cd838836112205f03459f2aa921326"
7d08420fd228f7fe31ac4f4f1b438d6fd0ada5bd,7d08420f,"Merge ""No longer use 'noimages' API parameter.""","Merge ""No longer use 'noimages' API parameter.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510170723,1510170723,"71c1145b85c9f5a16e3c7f1a9ed327474064bb3c,140248cfed36c97906dd597035417be72c111bf6"
71c1145b85c9f5a16e3c7f1a9ed327474064bb3c,71c1145b,Inject a hint message into Main Pages of offline article packs.,"Inject a hint message into Main Pages of offline article packs.

Bug: T179205
Change-Id: I95357651dd3249483754e85c7df523741ec75cb3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510154976,1510154976,3a18cc77596cd6d323eea41f5d61bc73f3203573
140248cfed36c97906dd597035417be72c111bf6,140248cf,No longer use 'noimages' API parameter.,"No longer use 'noimages' API parameter.

This parameter had good intentions behind it, but ultimately it makes the
server do things that should really be done by the client.
...Especially since it can apparently also cause unexpected presentational
issues.
...And especially since the usage rate of 'noimages' is so low, that the
server shouldn't really need to worry about it.

This patch moves the responsibility of deciding whether or not to load
images entirely to the client.  When image loading is disabled, the
WebView will show a checkerboard image placeholder, like we currently do
in the feed.

Note: If the user explicitly clicks an image in the WebView, the Gallery
will be loaded with the correct full-size version of the image.

Bug: T137351
Bug: T103675
Change-Id: I2d19b1dec9e52ce252412c55271d1b6533f1df5d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510100026,1510101065,d8c8cd46b7959e81bb250a09d305b5aeffbbe729
9ea7cc3028cd838836112205f03459f2aa921326,9ea7cc30,New: Make Feed content completely configurable.,"New: Make Feed content completely configurable.

Bug: T141397
Change-Id: Icace97fe0af8490983555bcd0661ec237d051af7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510075084,1510098061,3a18cc77596cd6d323eea41f5d61bc73f3203573
3a18cc77596cd6d323eea41f5d61bc73f3203573,3a18cc77,Split up aggregated Feed client into discrete clients.,"Split up aggregated Feed client into discrete clients.

This is in preparation for making the Feed fully configurable, including
the ability to reorder and disable certain types of cards. For this to
work, every different type of card needs to be handled by its own Client.

Change-Id: I008bd05e72b2a127d201c370286f269baab4080d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510079041,1510079041,d8c8cd46b7959e81bb250a09d305b5aeffbbe729
d8c8cd46b7959e81bb250a09d305b5aeffbbe729,d8c8cd46,"Merge ""Follow-up patch for ConstraintLayout""","Merge ""Follow-up patch for ConstraintLayout""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510070983,1510070983,"1528a83da832c74f50879fe4ad54a2ca4fb2eb4c,724740f5cba936c1b92e3a4900e86ed88eb2d143"
1528a83da832c74f50879fe4ad54a2ca4fb2eb4c,1528a83d,"Merge ""Update wikimedia-page-library to 4.7.3.""","Merge ""Update wikimedia-page-library to 4.7.3.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1510014312,1510014313,"3a62abde35e039d647d910eb9a9601e95c6abbfa,aa94e4d437886b12fa9c4039dd53c141d0aa54d0"
aa94e4d437886b12fa9c4039dd53c141d0aa54d0,aa94e4d4,Update wikimedia-page-library to 4.7.3.,"Update wikimedia-page-library to 4.7.3.

This includes a nice optimization when collapsing tables.

Change-Id: Iee5903231bac995a7ebcae8770b4d87ec97cd197
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1510004503,1510004503,18c10cfc07c4120db2bd5366a091e4b3c68bedf8
724740f5cba936c1b92e3a4900e86ed88eb2d143,724740f5,Follow-up patch for ConstraintLayout,"Follow-up patch for ConstraintLayout

Put heights of header, large header and footer to dimen.xml for easier management.

Change-Id: Ic34282292188873c3b1e888537debcc6fc83cee3
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1509998487,1509998487,3a62abde35e039d647d910eb9a9601e95c6abbfa
3a62abde35e039d647d910eb9a9601e95c6abbfa,3a62abde,"Merge ""Introducing... ConstraintLayout!""","Merge ""Introducing... ConstraintLayout!""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509989899,1509989899,"96d65231a7e136aa9cacdd31acb8e8607a309f40,cfbded812412ea351557e6f6975edf55da9bba02"
96d65231a7e136aa9cacdd31acb8e8607a309f40,96d65231,"Merge ""Slight performance improvement to Feed scrolling.""","Merge ""Slight performance improvement to Feed scrolling.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509989722,1509989722,"18c10cfc07c4120db2bd5366a091e4b3c68bedf8,8baaf35223e8fd7af259e969bff6ac4fa474076e"
18c10cfc07c4120db2bd5366a091e4b3c68bedf8,18c10cfc,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: If784c7a69ec74477170a7f6b886f398f2edcd18b
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1509956580,1509978025,386414aa51d3096d943e2708b9bd41721ab9175b
386414aa51d3096d943e2708b9bd41721ab9175b,386414aa,Remove unnecessary inheritance of FeedPageSummary vs. RbPageSummary.,"Remove unnecessary inheritance of FeedPageSummary vs. RbPageSummary.

This inheritance structure has always seemed strange. Certain page
responses may contain a ""normalizedTitle"", while others may not, so why
not capture both variants in the same class?

Change-Id: I020656eea11fa22daec5b822ed4cd634acdf0372
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509659970,1509660607,eaddd88e9aadbcee1ec5e7245815793cb68d6a8b
cfbded812412ea351557e6f6975edf55da9bba02,cfbded81,Introducing... ConstraintLayout!,"Introducing... ConstraintLayout!

This introduces the use of ConstraintLayout into many of our Feed
components. ConstraintLayout can greatly improve the performance of our
layouts because it makes it easy to flatten layouts that were previously
contained within nested Linear and FrameLayouts.

This will represent a further incremental improvement to the performance
of the Feed fragment as a whole.

In subsequent patches, we should try to apply ConstraintLayout wherever
applicable.

Change-Id: I5e5c2ebafcfdd765b03418fee7b5dc3ce4ab0b3c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509652922,1509656510,8baaf35223e8fd7af259e969bff6ac4fa474076e
8baaf35223e8fd7af259e969bff6ac4fa474076e,8baaf352,Slight performance improvement to Feed scrolling.,"Slight performance improvement to Feed scrolling.

Most of our Feed cards have a ""header"" and a ""footer"", and previously
these components were dynamically inflated when the Feed card was bound to
the RecyclerView, instead of being inflated all at once when the view is
first created. This can actually cause a performance degradation in
certain cases.

This patch makes the header and footer views become part of the actual xml
layout of the card views, and will therefore inflate along with the rest
of the layout.

Change-Id: I4d77eafb4df381814a6c68f89cea1e62594a5abd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1509631576,1509644010,eaddd88e9aadbcee1ec5e7245815793cb68d6a8b
eaddd88e9aadbcee1ec5e7245815793cb68d6a8b,eaddd88e,"Merge ""On-this-day follow-up.""","Merge ""On-this-day follow-up.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509637310,1509637311,"b3e7e2be44b2a00bbe01d222365da7df62d62b11,063e1e4eb55501e25a3417042b516c65b5d10e69"
b3e7e2be44b2a00bbe01d222365da7df62d62b11,b3e7e2be,"Merge ""List all 'on this day' events""","Merge ""List all 'on this day' events""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509636193,1509636193,"b84cc41c831b520c5209c2c8026e3411fc827cc9,2bbb28bb631e5d7e47ceed2f6efdfd0239585633"
063e1e4eb55501e25a3417042b516c65b5d10e69,063e1e4e,On-this-day follow-up.,"On-this-day follow-up.

Please see comments inline.

Change-Id: I1ead8a6e245e464fd28ce33672beb4db5ddf3fd1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509635791,1509635791,2bbb28bb631e5d7e47ceed2f6efdfd0239585633
b84cc41c831b520c5209c2c8026e3411fc827cc9,b84cc41c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia424b5a0b686cb7ccbcc836cf235288ac55edb11
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1509608019,1509608019,5d519aea094f58321a703b97746692f5723c1d59
2bbb28bb631e5d7e47ceed2f6efdfd0239585633,2bbb28bb,List all 'on this day' events,"List all 'on this day' events

- Feed card shows 'selected' event
- List shows all events from 'events', 'holidays', 'births' and 'deaths'

Change-Id: Ib9efc59a018e6dfa05acc52a2d1b6a2469936136
",,,,sharvani,sharan@wikimedia.org,sharvani,sharan@wikimedia.org,1509392820,1509584050,526b8633398793e8f30b3ac70ab0d2fa2496deab
5d519aea094f58321a703b97746692f5723c1d59,5d519aea,"Merge ""Adapt Offline Library screen for sideloading.""","Merge ""Adapt Offline Library screen for sideloading.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509572330,1509572330,"7310088b3eba9e62b54439dbb7b182c72a3b8430,9e3dc066af38a133a53bc9e0b49cd9813b8733b3"
9e3dc066af38a133a53bc9e0b49cd9813b8733b3,9e3dc066,Adapt Offline Library screen for sideloading.,"Adapt Offline Library screen for sideloading.

Bug: T179067
Change-Id: I20f1001fa24e834bc0319fb7194c7782bd6f3070
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509550956,1509571489,526b8633398793e8f30b3ac70ab0d2fa2496deab
7310088b3eba9e62b54439dbb7b182c72a3b8430,7310088b,"Merge ""Correctly ""prefer offline content"" from offline article packs.""","Merge ""Correctly ""prefer offline content"" from offline article packs.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509571222,1509571222,"2088552ddab9588dc18da3ba669510653f87bbfc,1c0c2c91632546bf47fd0fab66b02b41eeed4163"
2088552ddab9588dc18da3ba669510653f87bbfc,2088552d,"Merge ""Make Offline Library enableable via Settings.""","Merge ""Make Offline Library enableable via Settings.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509570370,1509570370,"f5fad08b331bb661d2ffccbd64d6f445d129c24c,255cb797cf8b90fbce8d633bea5b669f9576521e"
f5fad08b331bb661d2ffccbd64d6f445d129c24c,f5fad08b,"Merge ""Improve performance of page footer scrolling.""","Merge ""Improve performance of page footer scrolling.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509552189,1509552190,"261a04afb9fe02c47179ed164544ea7ddf83917d,95dc0abda6a199819c848ecea806aecef328ebda"
1c0c2c91632546bf47fd0fab66b02b41eeed4163,1c0c2c91,"Correctly ""prefer offline content"" from offline article packs.","Correctly ""prefer offline content"" from offline article packs.

The previous implementation of ""prefer offline content"" wasn't taking
offline packs into account, and was only dealing with HTTP-cached content.

Change-Id: I3ab66a357a71186b93e905d6c6a821eb4b340ae8
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509551769,1509551769,526b8633398793e8f30b3ac70ab0d2fa2496deab
255cb797cf8b90fbce8d633bea5b669f9576521e,255cb797,Make Offline Library enableable via Settings.,"Make Offline Library enableable via Settings.

There is now a new Setting called ""Enable Offline Library"" that acts as
the gateway to enabling the entire Offline feature.

When this setting is enabled, it automatically triggers the dynamic
permission request that asks the user for read/write permissions, and goes
on to search the device for ZIM files.

This means that after enabling this new setting, the user doesn't actually
have to navigate to the Offline Library screen to start using their ZIM
files. They'll just start working.

Bug: T179072
Change-Id: Iecf652a9a12399cb8e8bbc3988776af942bc00cf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509465071,1509479893,526b8633398793e8f30b3ac70ab0d2fa2496deab
95dc0abda6a199819c848ecea806aecef328ebda,95dc0abd,Improve performance of page footer scrolling.,"Improve performance of page footer scrolling.

Now using the more efficient setTranslationY() method instead of messing
around with LayoutParams and margins.

Change-Id: Ib417111d5de51387c6065d7f30a4caab96e3ccc1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509475976,1509475976,526b8633398793e8f30b3ac70ab0d2fa2496deab
261a04afb9fe02c47179ed164544ea7ddf83917d,261a04af,"Merge ""Slight optimization when parsing HTML from Strings.""","Merge ""Slight optimization when parsing HTML from Strings.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509473656,1509473656,"a49c92e98d37527c123c3843850029a44b317d02,d0c062822069ed034ccecd120e2e169e214696d3"
d0c062822069ed034ccecd120e2e169e214696d3,d0c06282,Slight optimization when parsing HTML from Strings.,"Slight optimization when parsing HTML from Strings.

There are very many places in our code where we call Html.fromHtml(),
because some of the strings that we receive from the server might contain
some minimal HTML formatting, such as bold, italics, and links.

However, if you dig into the code of the fromHtml() implementation, it's
actually pretty expensive and resource-intensive, and might actually
contribute to performance degradations when used too much.

The other thing is that *most* of the time, the strings we get from the
server don't actually contain any HTML formatting, so we're actually
passing the string into fromHtml() needlessly.

This patch makes it conditional whether or not a string will be parsed by
fromHtml(), based on whether the string contains at least one opening
bracket of an HTML tag (""<""). Otherwise, the string is returned as-is.

Change-Id: Ib57d6ede66e7ca3fec6d8b0b28b01db437007276
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509469289,1509469289,526b8633398793e8f30b3ac70ab0d2fa2496deab
a49c92e98d37527c123c3843850029a44b317d02,a49c92e9,"Fix:  No background image when using ""Share as image""","Fix:  No background image when using ""Share as image""

To solve this issue, we can simply add @SerializedName(""image"") on the PageImage for setting up properly.

Bug: T179341
Change-Id: Ia03f7537bec822d943bb96a2caa6b8d9733018c7
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1509405139,1509405139,526b8633398793e8f30b3ac70ab0d2fa2496deab
526b8633398793e8f30b3ac70ab0d2fa2496deab,526b8633,API 19 follow-up.,"API 19 follow-up.

Change-Id: I609d3fc7b3033033d839e7499b87b821318c55c2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509390106,1509390106,701339833359d91816055c65c6211ad2b179a332
701339833359d91816055c65c6211ad2b179a332,70133983,Remove compatibility code for API 19 and bump minSdkVersion,"Remove compatibility code for API 19 and bump minSdkVersion

In this update:
 - Remove < API 19 code, includes TargetAPI() and RequireAPI()
 - Remove redundent casting
 - Update build.gradle

Bug:T175994
Change-Id: I022373f4f0479b621bddc2113c73ce92db23cc89
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1506697772,1509388032,bcaa5c32af0ed6ecb28ae2682d4918520644089b
bcaa5c32af0ed6ecb28ae2682d4918520644089b,bcaa5c32,"Merge ""Update contributor credits.""","Merge ""Update contributor credits.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509387183,1509387183,"a383876814f9661478b2f7f70f1802b0cc9cad54,3f15c4a1bbd6780da9b55e79e9a2265d98867110"
a383876814f9661478b2f7f70f1802b0cc9cad54,a3838768,"Merge ""Overhaul bottom content.""","Merge ""Overhaul bottom content.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509387143,1509387143,"0376a1849753af404bb88b32c22492c18392a076,f840d3c6f71909991b63202980d97a037821f2ab"
3f15c4a1bbd6780da9b55e79e9a2265d98867110,3f15c4a1,Update contributor credits.,"Update contributor credits.

Change-Id: I856c2b2f1bc63f492808528a5a11b459d24a0d68
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509385903,1509386103,0376a1849753af404bb88b32c22492c18392a076
0376a1849753af404bb88b32c22492c18392a076,0376a184,Bump versionCode,"Bump versionCode

Change-Id: I669bca48c07c1e5694a40ec5ab38bef16e7014e7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509384748,1509384748,ac2d533238ae8bd83950cf3e7cd16a815bd81ab1
ac2d533238ae8bd83950cf3e7cd16a815bd81ab1,ac2d5332,"Merge ""Fix theme-chooser button highlight border in API <=19.""","Merge ""Fix theme-chooser button highlight border in API <=19.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509384118,1509384118,"c7e4756030ca3f6de032756271042593e1269d95,1942fcaecabd3e71a8588d1e20677bc8db7c8f8c"
c7e4756030ca3f6de032756271042593e1269d95,c7e47560,"Merge ""Fix renaming of reading list.""","Merge ""Fix renaming of reading list.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509383190,1509383190,"675bd9908fb0ca889c453ecab6acd644cf1ab20a,913fabfdc338d2b62412e7f5370d5c625d91aeab"
675bd9908fb0ca889c453ecab6acd644cf1ab20a,675bd990,"Merge ""Improve logic of retrieving language variant from Uri.""","Merge ""Improve logic of retrieving language variant from Uri.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509383188,1509383188,"e52672d2c19921d7490614cc7d230718352d3e7a,fbb905b65ec255f18dfab456cee0ba4673820e08"
1942fcaecabd3e71a8588d1e20677bc8db7c8f8c,1942fcae,Fix theme-chooser button highlight border in API <=19.,"Fix theme-chooser button highlight border in API <=19.

Bug: T173407
Change-Id: I996545600cb120cd32b5ddfdf684bcc11fac7028
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509379901,1509379901,913fabfdc338d2b62412e7f5370d5c625d91aeab
f840d3c6f71909991b63202980d97a037821f2ab,f840d3c6,Overhaul bottom content.,"Overhaul bottom content.

This performs an overhaul and modernization of the bottom content that we
display in articles, as well as the way we present it.

I introduce a new component called LinearLayoutOverWebView, which can be
used as a generic container for components that need to scroll along with
WebView contents. This container can now be applied to both the lead image
and the bottom content.

As a side effect, this overhaul knocks out a number of long-standing
issues relating to the presentation of the bottom content and the lead
image view.

Bug: T143400
Bug: T176752
Bug: T157808
Bug: T122364
Bug: T120769
Bug: T102192
Bug: T96359
Bug: T88509
Change-Id: I4938c791df4a4d3db75a0684ec4d1178ef8d072c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509072382,1509378274,5226a61e2c3425805d3dece9107fe23ba6265327
913fabfdc338d2b62412e7f5370d5c625d91aeab,913fabfd,Fix renaming of reading list.,"Fix renaming of reading list.

[Facepalm] There's actually a class-level member that contains the reading
list title, which was not getting updated when the list was renamed. The
logic depends on this title to ""look up"" the reading list when refreshing
its contents, which happens upon renaming the list.

Bug: T179125
Change-Id: Iddab9ada2b2645ed54baf7089e0ae28d08580efd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509375964,1509375964,fbb905b65ec255f18dfab456cee0ba4673820e08
fbb905b65ec255f18dfab456cee0ba4673820e08,fbb905b6,Improve logic of retrieving language variant from Uri.,"Improve logic of retrieving language variant from Uri.

The previous implementation of the method for extracting the language
variant had some potential erroneous behavior, by assuming that the Uri
path must begin with either ""/wiki/"" or ""/lang-variant/"", which might not
always be the case.

This patch makes the method more fault-tolerant by explicitly checking for
more than one path separator, which is a more reliable indicator that the
first part of the path is either ""/wiki/"" or ""/lang-variant/"".

Change-Id: If08a5f9451ef993221c8ee3088a2a43a9ee91339
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509375002,1509375002,fff3952230f436295dbdc721b5d12ab5c851f402
e52672d2c19921d7490614cc7d230718352d3e7a,e52672d2,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ic47100f7b2999d8e8b210ecda1f3ad4b9515b6d9
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1509351889,1509351889,fff3952230f436295dbdc721b5d12ab5c851f402
fff3952230f436295dbdc721b5d12ab5c851f402,fff39522,Bump versionCode,"Bump versionCode

Change-Id: I602ca3323bc06d1dadc90032cf170a8455120b60
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509106535,1509106535,816a9bfa14b410ddb5998c518982f11d1ee5d826
816a9bfa14b410ddb5998c518982f11d1ee5d826,816a9bfa,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509105811,1509105811,"ff27149c269bca1a86f1fa317c610bff34ca2975,8a34b884eb8025e00b93191d21e0db60bd5b4bb2"
ff27149c269bca1a86f1fa317c610bff34ca2975,ff27149c,"Merge ""Fix overflowing mw-gallery images""","Merge ""Fix overflowing mw-gallery images""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509105169,1509105169,"a8aac4b1526c41b8dfa259d27a18eec449a23cab,f6030e500c50bf972a69aa392803feb8f3b20b06"
8a34b884eb8025e00b93191d21e0db60bd5b4bb2,8a34b884,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I9a81c571fa93e18193fa765410920e792056c00d
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1509073978,1509073978,a8aac4b1526c41b8dfa259d27a18eec449a23cab
a8aac4b1526c41b8dfa259d27a18eec449a23cab,a8aac4b1,"Merge ""Improve properness of launching SavedPageSyncService on API 26.""","Merge ""Improve properness of launching SavedPageSyncService on API 26.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509061196,1509061196,"ae9e391fe1a19ed392d79ae8835df6f25d32ac8f,96ca31e1b2f40cb198c8b72fd9e1cf96d6c5ba8c"
f6030e500c50bf972a69aa392803feb8f3b20b06,f6030e50,Fix overflowing mw-gallery images,"Fix overflowing mw-gallery images

Updates pagelib to 4.7.1, which adds a fix for the ""overflowing images""
bug.

Bug: T176753
Change-Id: Ic4d04159ce6457630e1510d4a2b19738bc85f81b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1509049535,1509049535,5226a61e2c3425805d3dece9107fe23ba6265327
ae9e391fe1a19ed392d79ae8835df6f25d32ac8f,ae9e391f,"Merge ""Prevent possible crash when fetching remaining sections.""","Merge ""Prevent possible crash when fetching remaining sections.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509047181,1509047181,"88410adb2dd665626b1ed56c96ec720aaa47e119,466aba26ecd2ffc1d2f94bf20595fa2328f964c4"
88410adb2dd665626b1ed56c96ec720aaa47e119,88410adb,"Merge ""Prevent possible crash in tab view.""","Merge ""Prevent possible crash in tab view.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509046886,1509046886,"867cb85366fbb684ee447ac0c5e1d3498b09f875,d7ceb1d3f394bc9fc5ad0eef0d98e1aacd745862"
466aba26ecd2ffc1d2f94bf20595fa2328f964c4,466aba26,Prevent possible crash when fetching remaining sections.,"Prevent possible crash when fetching remaining sections.

The retrofit Response class requires a nonnull ""message"", otherwise it
crashes.

Change-Id: I614a4a643f95fa5817cf58c439ba6b4faf6083b9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509040927,1509040927,5226a61e2c3425805d3dece9107fe23ba6265327
d7ceb1d3f394bc9fc5ad0eef0d98e1aacd745862,d7ceb1d3,Prevent possible crash in tab view.,"Prevent possible crash in tab view.

https://rink.hockeyapp.net/manage/apps/226650/app_versions/148/crash_reasons/192586334

Change-Id: I183bcfdef31105cf45df6a563c5e71f0625aa592
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509040548,1509040548,5226a61e2c3425805d3dece9107fe23ba6265327
96ca31e1b2f40cb198c8b72fd9e1cf96d6c5ba8c,96ca31e1,Improve properness of launching SavedPageSyncService on API 26.,"Improve properness of launching SavedPageSyncService on API 26.

Android Oreo (API 26) is much more harsh on apps that run in the
background, and requires us to enqueue background services in a more
delicate way.  For example, if an app is in the background, and it tries
to start a Service, it will actually crash.

This patch incorporates the new JobIntentService introduced in the Support
library v26.0, which correctly launches the service for API 26 and lower
APIs.

One of the side-effects of this patch is that we'll need to include the
WAKE_LOCK permission in the app from now on.

Change-Id: I216b1243cd6c74c64788cb5e8d45aa43e081b0b2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509038568,1509038568,5226a61e2c3425805d3dece9107fe23ba6265327
867cb85366fbb684ee447ac0c5e1d3498b09f875,867cb853,"Merge ""Fix: Continue reading card prevalent in the feed""","Merge ""Fix: Continue reading card prevalent in the feed""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1509032034,1509032034,"5226a61e2c3425805d3dece9107fe23ba6265327,72d4a94b608917253e816f5f3dfbf005fb22e318"
5226a61e2c3425805d3dece9107fe23ba6265327,5226a61e,AS/Gradle upgrade follow-up.,"AS/Gradle upgrade follow-up.

Change-Id: I44a370965e03c3e59a7cd3bef0d46e067e6099cf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1509027161,1509027161,fa0c62a2c9cfcfe6bcdd1ad15943c3fdd0f0474c
fa0c62a2c9cfcfe6bcdd1ad15943c3fdd0f0474c,fa0c62a2,JAVA_VERSION -> 1.8,"JAVA_VERSION -> 1.8

Have fun!

https://developer.android.com/studio/write/java8-support.html

Change-Id: Ia5ce2a805190c0af95358ad253381f29b5af8485
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1508987851,1508989061,0bdeefae281e4bf7ecaa7de3c3a3cc176387afa1
0bdeefae281e4bf7ecaa7de3c3a3cc176387afa1,0bdeefae,Android Gradle Plugin -> 3.0.0,"Android Gradle Plugin -> 3.0.0

Bumps the Android Gradle Plugin to 3.0.0 and makes the minimum required
changes to compile.  Primarily this involved adding a ""default"" flavor
dimension so that all product flavors could be assigned to a flavor
dimension as now required.[1]

Downgrades the new AppLinkUrlError lint issue to a warning to prevent
lint failures.  For more on this issue (and Firebase App Indexing, which
appears to help surface the app in Google Search results), see:

https://firebase.google.com/docs/app-indexing/

Additionally, I updated now-deprecated dependency configuration names to
their new counterparts.[2]

Please see the full Android Gradle Plugin 3.0.0 migration guide for
details.

https://developer.android.com/studio/build/gradle-plugin-3-0-0-migration.html

[1] https://developer.android.com/studio/build/gradle-plugin-3-0-0-migration.html#flavor_dimensions
[2] https://developer.android.com/studio/build/gradle-plugin-3-0-0-migration.html#new_configurations

Change-Id: I7df1b28de77a49d7104a260b1d1c2bb2ca72bca6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1508987522,1508988919,217a74665297511fe21c14bacc0ac331b3dcc255
217a74665297511fe21c14bacc0ac331b3dcc255,217a7466,Gradle -> 4.1,"Gradle -> 4.1

https://docs.gradle.org/4.1/release-notes.html

Change-Id: I2466a9a4d273955f5f153eecc895760df7228639
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1508985102,1508986880,8e1f25335a187f28f759e7ef6ddb307f50113110
8e1f25335a187f28f759e7ef6ddb307f50113110,8e1f2533,On-this-day follow up.,"On-this-day follow up.

Change-Id: I3eead314672d88e9b90a702bef38a6b30f8054d1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1508961115,1508961115,696c6f372d31a1ff79fa657887d6c68407fd14b9
696c6f372d31a1ff79fa657887d6c68407fd14b9,696c6f37,"Merge ""On this day card""","Merge ""On this day card""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508958458,1508958458,"e23226047ff8c38575d881c957d4243a2c7ed6ea,c093e638c184b696d382b3474f599070ef491e77"
c093e638c184b696d382b3474f599070ef491e77,c093e638,On this day card,"On this day card

- On This day card appears on the feed below Picture of the Day.
- Card shows a random event on that date and the next event year.
- Card has a gradient top and bottom
- Horizontal Page Scroll for pages related to the event displayed
- Overflow for Hide card works
- On Click of the description text and the 'More Events . . ."" button, an Activity listing all the events is listed.
- Activity shows the day in 'Month dd' format
- Activity shows number of events and the year range
- All years BC are appended with 'BC'
- Todo: Design tweaks: Waiting for Design update
- Feature flag activated : PreBetaRelease

Bug: T175995
Change-Id: Ib5175e6855e83c01eebd6cde0eddf857cd69617f
",,,,sharvani,sharan@wikimedia.org,sharvani,sharan@wikimedia.org,1506693045,1508955942,b501973b3d33df9d01e5ee083e2cd47c11526722
e23226047ff8c38575d881c957d4243a2c7ed6ea,e2322604,Bump versionCode,"Bump versionCode

Change-Id: I2d32cbb3c057e263aa17903e2861672ab515153b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1508953243,1508953243,b501973b3d33df9d01e5ee083e2cd47c11526722
72d4a94b608917253e816f5f3dfbf005fb22e318,72d4a94b,Fix: Continue reading card prevalent in the feed,"Fix: Continue reading card prevalent in the feed

- Setup a ""noEarlierThanTime"" for a time range of the continue reading card

BUG: T173101
Change-Id: Ia08d1e066069de9f72297b2f94212de2c4232f8e
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1508868365,1508952534,520ac9faf85dc3c6c2e52dcb2eac45cae44e463a
b501973b3d33df9d01e5ee083e2cd47c11526722,b501973b,"Merge ""Follow-up to List all trending articles.""","Merge ""Follow-up to List all trending articles.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508951842,1508951842,"fa0cbdf7b6202789b31bdc6fd38b1f5b330e2deb,47fa3a4f8ba2aa89360f3d3e58c974f072fc330a"
fa0cbdf7b6202789b31bdc6fd38b1f5b330e2deb,fa0cbdf7,"Merge ""Alternate fix for incorrect variant from preview links.""","Merge ""Alternate fix for incorrect variant from preview links.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508949889,1508949889,"254b3a5ed5af49cc0988acec5732c3f6830aa2b9,b864050f2e2b8815c7bb12e2056afd091732a977"
b864050f2e2b8815c7bb12e2056afd091732a977,b864050f,Alternate fix for incorrect variant from preview links.,"Alternate fix for incorrect variant from preview links.

Bug: T178852
Change-Id: I2f2bfb4f68e9a9d7656751001332c0a1ea86d282
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1508945408,1508945408,ccb9877e78012624fbf15958a226c8c419acbfbd
47fa3a4f8ba2aa89360f3d3e58c974f072fc330a,47fa3a4f,Follow-up to List all trending articles.,"Follow-up to List all trending articles.

Bug: T170884
Change-Id: Id5be5b8d211a476ba6cf82a851d14cedb6fca7ab
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1508939311,1508939311,254b3a5ed5af49cc0988acec5732c3f6830aa2b9
254b3a5ed5af49cc0988acec5732c3f6830aa2b9,254b3a5e,List all trending posts,"List all trending posts

- Added a view to display an option to view all the posts
- Added an Activity and a Fragment to list all posts
- UI details : Added right chevron for the option
		     Added Date String for the title
		     Items on the full list screen have the standard overflow menu
Screenshot: https://drive.google.com/open?id=0B_maM54cPModUHZPUlh3VzlWaE0

Bug: T170884
Change-Id: Idb1189ab9b2c65528d47c5c75f2f612ba53961e8
",,,,sharvani,sharan@wikimedia.org,sharvani,sharan@wikimedia.org,1508898029,1508898029,ccb9877e78012624fbf15958a226c8c419acbfbd
ccb9877e78012624fbf15958a226c8c419acbfbd,ccb9877e,"Merge ""New: load another random article via floating action button.""","Merge ""New: load another random article via floating action button.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508879044,1508879044,"86d0c51d884aa87f073b36f3d897272401071056,af6e7bbaf66259730cb7aeef09555640b306d70b"
af6e7bbaf66259730cb7aeef09555640b306d70b,af6e7bba,New: load another random article via floating action button.,"New: load another random article via floating action button.

Bug: T158788
Change-Id: I63230aa16581f3f1f2cf6950ab176d126aa6dde5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504276169,1508875521,b7b781aac69f53d43d14a042f0307ddb9d0c9d39
86d0c51d884aa87f073b36f3d897272401071056,86d0c51d,"Merge ""Prevent accumulation of screenshots in the CI host's /tmp directory""","Merge ""Prevent accumulation of screenshots in the CI host's /tmp directory""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508874009,1508874009,"b7b781aac69f53d43d14a042f0307ddb9d0c9d39,3d0bcd146a6a650adb7edc48fc586970dd80f592"
3d0bcd146a6a650adb7edc48fc586970dd80f592,3d0bcd14,Prevent accumulation of screenshots in the CI host's /tmp directory,"Prevent accumulation of screenshots in the CI host's /tmp directory

Recently, for the second time in three months, the Android periodic
test server ran out of disk space due to an accumulation of old
screenshots in the /tmp directory.

This assigns TMPDIR a folder in the project directory so that it will be
cleared on each run.

Bug: T178847
Change-Id: Ic4b8a63934d8b79e45f1605b2f0881f7d7089f59
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1508793975,1508796133,520ac9faf85dc3c6c2e52dcb2eac45cae44e463a
b7b781aac69f53d43d14a042f0307ddb9d0c9d39,b7b781aa,Hygiene: Update test script comments,"Hygiene: Update test script comments

Change-Id: I9cc9bc44b4a6a041975c5724b2599c9cdbfb47fd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1508794899,1508794899,520ac9faf85dc3c6c2e52dcb2eac45cae44e463a
520ac9faf85dc3c6c2e52dcb2eac45cae44e463a,520ac9fa,"Merge ""Design tweaks in theme chooser dialog.""","Merge ""Design tweaks in theme chooser dialog.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508789804,1508789804,"b1ff6182946e545b52e31ddbefa8472bf9deccfb,9d9a4189c1256c8bdf400bc449116f2ce78a063e"
b1ff6182946e545b52e31ddbefa8472bf9deccfb,b1ff6182,"Merge ""Design tweak: disk usage bar color.""","Merge ""Design tweak: disk usage bar color.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508784719,1508784719,"e65fd7ed58ab5fcf160e0b5a22e18ffdaadb5df1,232b47eebd8aff1970b979af7e24df67e27ea764"
e65fd7ed58ab5fcf160e0b5a22e18ffdaadb5df1,e65fd7ed,Follow-up: Hygiene: remove unnecessary View casts.,"Follow-up: Hygiene: remove unnecessary View casts.

Change-Id: Idc00e1adbdfab18b80887e9e31f0a2c36bd89efe
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1508776358,1508776358,55230cea24364b7a734f93061cd8286f17e473ee
55230cea24364b7a734f93061cd8286f17e473ee,55230cea,"Merge ""Hygiene: remove unnecessary View casts.""","Merge ""Hygiene: remove unnecessary View casts.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508776063,1508776063,"cbca926547d7e31d4b67df4820b5192657e622ee,e1820902d55b63e595db5365dd331304c3215d2f"
9d9a4189c1256c8bdf400bc449116f2ce78a063e,9d9a4189,Design tweaks in theme chooser dialog.,"Design tweaks in theme chooser dialog.

Bug: T173407
Change-Id: I402f1c18e20a3d89701082a74de0632c75c57edf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1508772698,1508772698,b5549cfd5dab7392b5ba3830ade0c71ac7c86d65
232b47eebd8aff1970b979af7e24df67e27ea764,232b47ee,Design tweak: disk usage bar color.,"Design tweak: disk usage bar color.

Bug: T173082
Change-Id: I751bdef101962c705593892960c555f88e60ec7f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1508769355,1508769355,b5549cfd5dab7392b5ba3830ade0c71ac7c86d65
cbca926547d7e31d4b67df4820b5192657e622ee,cbca9265,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508769286,1508769287,"b5549cfd5dab7392b5ba3830ade0c71ac7c86d65,d11001fef1012ed6bb5fec2eb090c94d683161d7"
b5549cfd5dab7392b5ba3830ade0c71ac7c86d65,b5549cfd,"Merge ""Fix: Pastes text on search bar correctly""","Merge ""Fix: Pastes text on search bar correctly""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508766200,1508766200,"9479ed4447de996e9292ab92e2b9741ae7d88cb2,968e90965275c0c6b0edb3e94be96dfc7bae9824"
d11001fef1012ed6bb5fec2eb090c94d683161d7,d11001fe,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I21d5e5033af68bed05ea67c31adcb73145c6d5e0
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1508728886,1508765695,0b29f08d954c4573b877931d9ee9e1e5d962d07f
9479ed4447de996e9292ab92e2b9741ae7d88cb2,9479ed44,"Merge ""Compilation Detail screen : should be scrollable only when required""","Merge ""Compilation Detail screen : should be scrollable only when required""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1508765682,1508765682,"0b29f08d954c4573b877931d9ee9e1e5d962d07f,67f760af64e15c245a2e68d098ccf103aa11ba7e"
67f760af64e15c245a2e68d098ccf103aa11ba7e,67f760af,Compilation Detail screen : should be scrollable only when required,"Compilation Detail screen : should be scrollable only when required

Bug: T174446
Change-Id: I61e03095858c8bbab9b6b3ad8a931416d909c38c
",,,,yash,yash.girdhar@gmail.com,yash,yash.girdhar@gmail.com,1508586675,1508586675,8714d213971ef0567eb922836474d6ebb23c7878
0b29f08d954c4573b877931d9ee9e1e5d962d07f,0b29f08d,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I6429e9decc2601227bbed5e2e573c01b49ddbeeb
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1508144207,1508144207,8714d213971ef0567eb922836474d6ebb23c7878
8714d213971ef0567eb922836474d6ebb23c7878,8714d213,"Merge ""Article overflow menu : Adding option to remove from the reading lists""","Merge ""Article overflow menu : Adding option to remove from the reading lists""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507994352,1507994352,"bdf8afb90b51136977a7231c9ed3a17b2105885d,40dab8673fe1e58f0f9d3cbaa0ba09484c3a189c"
968e90965275c0c6b0edb3e94be96dfc7bae9824,968e9096,Fix: Pastes text on search bar correctly,"Fix: Pastes text on search bar correctly

Simply adds !isSearching() on onActionModeStarted to sovle this issue.

Bug: T177904
Change-Id: I8bab94ff404947870b774e7f982af7612030b28e
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1507940414,1507940414,bdf8afb90b51136977a7231c9ed3a17b2105885d
e1820902d55b63e595db5365dd331304c3215d2f,e1820902,Hygiene: remove unnecessary View casts.,"Hygiene: remove unnecessary View casts.

Change-Id: I907965ce6ad7b13b7cc53abcd5bc4dde9bb143fe
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507928335,1507928335,1b5e1491d0e1aaa948e8026760e67cccab1a85e1
bdf8afb90b51136977a7231c9ed3a17b2105885d,bdf8afb9,Design: Normalize/correct status bar color in all activities.,"Design: Normalize/correct status bar color in all activities.

Change-Id: I7333456e6edd2740cd1f54a8482abfc658303d71
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507927357,1507927357,1b5e1491d0e1aaa948e8026760e67cccab1a85e1
1b5e1491d0e1aaa948e8026760e67cccab1a85e1,1b5e1491,"Merge ""Fix collapsing of References.""","Merge ""Fix collapsing of References.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507923442,1507923442,"7110da481fd96855cea606ab2a50c10a89e802a9,308a7242e670311914100d8643b6f9264e6b544b"
7110da481fd96855cea606ab2a50c10a89e802a9,7110da48,"Merge ""Reincorporate autoincremented numbering for links without display text""","Merge ""Reincorporate autoincremented numbering for links without display text""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507922896,1507922896,"9c265569fc559e3576e8951f81f4c0f3026ed659,6fd6a444c329894510aab350b09372b468adffee"
9c265569fc559e3576e8951f81f4c0f3026ed659,9c265569,"Merge ""Fix issues with reading lists.""","Merge ""Fix issues with reading lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507922509,1507922509,"354e26219b6e7f2104376f5e9801ebce0e27336b,5af746b946a69d4cddcac711c9126cd3db1d2b06"
354e26219b6e7f2104376f5e9801ebce0e27336b,354e2621,"Merge ""Stop bundling mediawiki.skinning.content.parsoid""","Merge ""Stop bundling mediawiki.skinning.content.parsoid""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507921665,1507921665,"962f6a17a9a91d5603a0688e6b4a89b3b2d595cc,842b04af81d6aff07947d913b560f0b7afc87696"
308a7242e670311914100d8643b6f9264e6b544b,308a7242,Fix collapsing of References.,"Fix collapsing of References.

The page library collapses tables that are contained in a <table> element.
However, the list of references at the bottom of articles is not actually
a table, so it needs to be manually wrapped in a <table> tag.

The iOS app actually does this in native code (?) before passing the HTML
to the WebView, but we can do it as part of our transforms.

Bug: T177863
Change-Id: I1212b8336635cf6d6742ff659c0794ea6ea93254
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507920136,1507920136,91af65bbd236934c9447ce268e05af95f4104d4b
962f6a17a9a91d5603a0688e6b4a89b3b2d595cc,962f6a17,"Merge ""Tweak: Fix EditSectionActivity appbar color""","Merge ""Tweak: Fix EditSectionActivity appbar color""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507912654,1507912654,"f7475b97a3e3a4f2d7db7ef33a7d313b6f1d49a8,ef28dcbc7edf2f27b39a1b6120d1994dea4bdd47"
ef28dcbc7edf2f27b39a1b6120d1994dea4bdd47,ef28dcbc,Tweak: Fix EditSectionActivity appbar color,"Tweak: Fix EditSectionActivity appbar color

Bug: T170304
Change-Id: I6ea987d3bd25331caea69e0971696d4c7b0879a8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507911740,1507911740,00edd6b2e426ac10595ac1768f64a42681cdabbf
f7475b97a3e3a4f2d7db7ef33a7d313b6f1d49a8,f7475b97,"Merge ""Design tweak: fix color theming when searching offline library.""","Merge ""Design tweak: fix color theming when searching offline library.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507907075,1507907075,"00edd6b2e426ac10595ac1768f64a42681cdabbf,6a1530d57daf2869c3d9e26173b4dd165bd904b5"
6fd6a444c329894510aab350b09372b468adffee,6fd6a444,Reincorporate autoincremented numbering for links without display text,"Reincorporate autoincremented numbering for links without display text

We used to pull in mediawiki.skinning.content.parsoid for this but it
started breaking other stuff (T163738) and also stopped working for our
content service output, regressing T162116.  This pulls in a new snippet,
added to MobileApp extension, that works for us.

Bug: T162116
Change-Id: If1e34ed046c3fd5d9fd502cba6e5ed6ba578555b
Depends-On: I6083bbdcd3c4d36b466981f1ddaacd3536820d54
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507905762,1507905762,842b04af81d6aff07947d913b560f0b7afc87696
6a1530d57daf2869c3d9e26173b4dd165bd904b5,6a1530d5,Design tweak: fix color theming when searching offline library.,"Design tweak: fix color theming when searching offline library.

Bug: T178156
Change-Id: I526f595ca13dd0e678a2ef23f25b25eaaa193cc1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507905632,1507905632,91af65bbd236934c9447ce268e05af95f4104d4b
842b04af81d6aff07947d913b560f0b7afc87696,842b04af,Stop bundling mediawiki.skinning.content.parsoid,"Stop bundling mediawiki.skinning.content.parsoid

It breaks image widening for MCS content. We originally needed it for
T162116, but it no longer fixes that for us, either. We'll re-fix that
separately.

Bug: T163738
Change-Id: I80162d32f8a607c8e28ae33b8e581244b0ddce09
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507905276,1507905276,00edd6b2e426ac10595ac1768f64a42681cdabbf
5af746b946a69d4cddcac711c9126cd3db1d2b06,5af746b9,Fix issues with reading lists.,"Fix issues with reading lists.

- Harden the outer-loop logic of the SavedPageSyncService, where it now
  re-queries the db to get an updated status of the current page after the
  long-running operation of saving the page contents is finished. This way,
  if the page was deleted in the meantime, or added to other lists, we
  won't overwrite its db row with a stale copy.

- No longer update reading list details (over the network) from each
  individual ItemView. This can cause race conditions when an ItemView is
  part of a RecyclerView and gets invalidated based on Window-level
  events. Fetching from the network is now handled at the Fragment level,
  where the lifecycle is more controlled.

- Fix adding an article to a reading list from the long-press menu in
  PageFragment. (It was incorrectly adding the current article, not the
  link.)

Bug: T177292
Bug: T177307
Change-Id: Iabde86c657e44de58c7669ff26e8fd4ce040b91a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507903717,1507903717,91af65bbd236934c9447ce268e05af95f4104d4b
00edd6b2e426ac10595ac1768f64a42681cdabbf,00edd6b2,"Merge ""Hygiene: Ship minified CSS""","Merge ""Hygiene: Ship minified CSS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507851965,1507851965,"59582634d6d8a850c333f88796ad96e69734fde5,d59ed1b72ce0aa68e1a0ec10a2d5f1052e8bbecf"
59582634d6d8a850c333f88796ad96e69734fde5,59582634,"Merge ""Fix: Invisible texts in Popup Dialog in Dark Mode""","Merge ""Fix: Invisible texts in Popup Dialog in Dark Mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507833802,1507833802,"91af65bbd236934c9447ce268e05af95f4104d4b,9f392db86c4e67fb400f8850af48c7e0d85b3251"
9f392db86c4e67fb400f8850af48c7e0d85b3251,9f392db8,Fix: Invisible texts in Popup Dialog in Dark Mode,"Fix: Invisible texts in Popup Dialog in Dark Mode

Looks like the popup dialog after long pressing on the interal link does not apply the ""alertDialogTheme"" correctly.

We can use ""android:alertDialogTheme"" and inherit the ""AlertDialog"" theme with the android:backgroundTint.

Bug: T177129
Change-Id: I87ea82116d9a98a085313e9a5ff2b9bb9f2e902e
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1507768677,1507828601,c4f5fe3cb365c422d9554225657fdfcd3f720c31
d59ed1b72ce0aa68e1a0ec10a2d5f1052e8bbecf,d59ed1b7,Hygiene: Ship minified CSS,"Hygiene: Ship minified CSS

Switches the value of 'debug' to false in our ResourceLoader query in
make-css-assets.bash.  Note: iOS is already doing this.

https://www.mediawiki.org/wiki/ResourceLoader/Developing_with_ResourceLoader#Toggle_debug_mode

Change-Id: Idd280219e08ac89ffb4cfff3083745a6b8975136
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507816277,1507816277,2a78af38b0e16407a4912b313517d5f7542f273f
91af65bbd236934c9447ce268e05af95f4104d4b,91af65bb,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I123acde9c0864dd807298e0e0fafddb8ec63bef3
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1507791494,1507791494,2a78af38b0e16407a4912b313517d5f7542f273f
2a78af38b0e16407a4912b313517d5f7542f273f,2a78af38,"Merge ""Hygiene: Standardize MW API boolean argument format""","Merge ""Hygiene: Standardize MW API boolean argument format""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507764110,1507764110,"dda9fca0897d4633cdf13232184b2eacfa29d973,9bd2f0b412b6974ec5ccd91059c1ecdf1df05fbd"
dda9fca0897d4633cdf13232184b2eacfa29d973,dda9fca0,"Merge ""Update search clients to use converttitles""","Merge ""Update search clients to use converttitles""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507762969,1507762969,"c4f5fe3cb365c422d9554225657fdfcd3f720c31,5153b59dbbc8fb99ddf519035b450da77ebaf1c0"
c4f5fe3cb365c422d9554225657fdfcd3f720c31,c4f5fe3c,"Merge ""Update toolbar color for remaining screens""","Merge ""Update toolbar color for remaining screens""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507746066,1507746066,"dde66cb703e5304d779fe5b4161f34ded10c6b48,aa8640fcc1532a8bbf93e5497ce3fbdbdd618bc8"
dde66cb703e5304d779fe5b4161f34ded10c6b48,dde66cb7,"Merge ""Update bundled CSS""","Merge ""Update bundled CSS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507745783,1507745783,"2a1261d825f77f431182fc4d66cf3c0d9d271ad3,5de732f30e4dd8379782f23349c5a5979c607d5f"
2a1261d825f77f431182fc4d66cf3c0d9d271ad3,2a1261d8,"Merge ""Properly deserialize MwQueryResult, with postprocessing!""","Merge ""Properly deserialize MwQueryResult, with postprocessing!""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507744178,1507744178,"ed188805b85b37a39e96f081ca95fc69a9c2f09d,027469deb50f90bd6a3a3037e0f49fc212e32704"
aa8640fcc1532a8bbf93e5497ce3fbdbdd618bc8,aa8640fc,Update toolbar color for remaining screens,"Update toolbar color for remaining screens

Bug: T170304
Change-Id: I3b5dd93c3819d32418c7b6d4dd27fc3cdb6784c7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507741023,1507741023,ed188805b85b37a39e96f081ca95fc69a9c2f09d
5de732f30e4dd8379782f23349c5a5979c607d5f,5de732f3,Update bundled CSS,"Update bundled CSS

Contains changes from last week's production MediaWiki deployment.

Change-Id: I19e6c6a3edfc8865de2d2de9c6ab17519ebcf355
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507738300,1507738300,fffdb0a233b1765ed845fbe448f1a4dcd67e2311
ed188805b85b37a39e96f081ca95fc69a9c2f09d,ed188805,"Merge ""Update OkHttp to 3.9.0""","Merge ""Update OkHttp to 3.9.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507737539,1507737539,"7f4f787169cabfe10e4c497d3afae3fd2e3e355f,df51769c40806b9d2363de11b9c41094663228df"
7f4f787169cabfe10e4c497d3afae3fd2e3e355f,7f4f7871,"Merge ""Hygiene: Icon color transition follow up (#2)""","Merge ""Hygiene: Icon color transition follow up (#2)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507737538,1507737538,"caf9129099b155f4145d6f0ced6f02a82ebb4f0c,eef0a1bf1d317dd6bc39a2ac22ca8d03ef2c4277"
9bd2f0b412b6974ec5ccd91059c1ecdf1df05fbd,9bd2f0b4,Hygiene: Standardize MW API boolean argument format,"Hygiene: Standardize MW API boolean argument format

Boolean parameters supplied to the MW API are considered to be true if
present in the query string and set to any value.  In other words,

* converttitles=
* converttitles=true
* converttitles=foo

all result in the API considering convertitles to be true.

The recommended format is the first in the list above;[1] so let's
standardize on that.

[1] https://www.mediawiki.org/wiki/API:Data_formats#Boolean_values

Change-Id: I0d406e50edb8585eb95bd9dae7a76341ef23f8ff
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507735460,1507735684,5153b59dbbc8fb99ddf519035b450da77ebaf1c0
5153b59dbbc8fb99ddf519035b450da77ebaf1c0,5153b59d,Update search clients to use converttitles,"Update search clients to use converttitles

Also update FullTextSearchClient's params to begin with 'action' because
it messes with my mind when that doesn't come first. :[

Change-Id: I926c93a2f078db3ba435e68d78649d779f865c6d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507734673,1507734845,fffdb0a233b1765ed845fbe448f1a4dcd67e2311
caf9129099b155f4145d6f0ced6f02a82ebb4f0c,caf91290,"Merge ""Don't emit a BecauseYouRead card when no suggestions are available.""","Merge ""Don't emit a BecauseYouRead card when no suggestions are available.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507734711,1507734711,"fffdb0a233b1765ed845fbe448f1a4dcd67e2311,c3ab588c5a33786659b8ff88e84bc0d24bc9e4a1"
fffdb0a233b1765ed845fbe448f1a4dcd67e2311,fffdb0a2,"Merge ""Toolbar color follow-up.""","Merge ""Toolbar color follow-up.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507731767,1507731767,"b1baef30f9d2c2dfcfadc3ef4362cdf4f4d9162d,0f056acd8d541d07efbee81ba5ca34ae5e592b66"
eef0a1bf1d317dd6bc39a2ac22ca8d03ef2c4277,eef0a1bf,Hygiene: Icon color transition follow up (#2),"Hygiene: Icon color transition follow up (#2)

Removes obsolete comments and directives from the page action menu xml.

Change-Id: Icb3bc2d65cd1d8905fe31e40e2e1f37744aa1544
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507731465,1507731465,b1baef30f9d2c2dfcfadc3ef4362cdf4f4d9162d
b1baef30f9d2c2dfcfadc3ef4362cdf4f4d9162d,b1baef30,"Merge ""Add on-scroll color transition for page toolbar icons""","Merge ""Add on-scroll color transition for page toolbar icons""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507731239,1507731239,"5341aa97cf24e75e2cbf706ee576a5cb29de6fd7,0323d23244f2ac2c280792072e4365061837cfa3"
5341aa97cf24e75e2cbf706ee576a5cb29de6fd7,5341aa97,"Merge ""Make app bar colors consistent, pt. 1""","Merge ""Make app bar colors consistent, pt. 1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507731200,1507731200,"f5998b5d3519b704847f6e72f86542fb148ce057,d2cf3a65f34cae2b3bc7a285a5aca055e30ca461"
0f056acd8d541d07efbee81ba5ca34ae5e592b66,0f056acd,Toolbar color follow-up.,"Toolbar color follow-up.

Change-Id: I23ff478407306ffde4feea000e57fdecb3eb3d41
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507731027,1507731027,0323d23244f2ac2c280792072e4365061837cfa3
df51769c40806b9d2363de11b9c41094663228df,df51769c,Update OkHttp to 3.9.0,"Update OkHttp to 3.9.0

Updates the library and associated local file copies.  This release has
been out since 9/1 and will be necessary for updating to Mapbox 5.2.0
(which contains a needed crash fix[1]) in order to prevent main/test app
dependency conflicts in Android Studio.[2]

https://github.com/square/okhttp/blob/master/CHANGELOG.md

[1] https://phabricator.wikimedia.org/T164317
[2] http://g.co/androidstudio/app-test-app-conflict

Change-Id: I66d6c53ce08227f20e5fa0e2d63009c7d78f56fe
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507727812,1507730837,f377ba35954cb5417b92e527f5951e8a2817e835
f5998b5d3519b704847f6e72f86542fb148ce057,f5998b5d,"Merge ""Fix: Update license text files to use content:// URIs""","Merge ""Fix: Update license text files to use content:// URIs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507726694,1507726694,"f377ba35954cb5417b92e527f5951e8a2817e835,9690f2a426f6b97ae71cb95f55fd392b7a40843e"
f377ba35954cb5417b92e527f5951e8a2817e835,f377ba35,"Merge ""Modify time to update Featured Article widget""","Merge ""Modify time to update Featured Article widget""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507726553,1507726553,"b3535716bdcce2bf195e8164ff790d7712da9dc2,34aa57a60e849756bfa780f86632aa00d7e90079"
b3535716bdcce2bf195e8164ff790d7712da9dc2,b3535716,Bump build-tools to 26.0.2 and update SDK license,"Bump build-tools to 26.0.2 and update SDK license

Change-Id: I58fb285b1295cecdcebc7d3c76a6c856a51b3384
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507725754,1507725754,767b98c7266dbda5165d013e72d00f53a523dfb3
027469deb50f90bd6a3a3037e0f49fc212e32704,027469de,"Properly deserialize MwQueryResult, with postprocessing!","Properly deserialize MwQueryResult, with postprocessing!

There are actually a couple of postprocessing steps that need to be
performed on MwQueryResult:

The juicy meat of the response is the ""pages"" array, which contains
the list of page properties that were requested. However, there is a
separate array called ""redirects"" that contains a list of redirects that
were performed by the server to come up with the list of titles. There may
also be a list called ""converted"" that contains a list of titles that were
converted from one language variant to another.

Previously, the postprocessing of redirects was performed as a manual
one-time function when sorting through search results.  And the
""converted"" array was not handled at all.

This patch creates a special Gson type adapter that supports post-
processing, and allows MwQueryResult to be post-processed automatically,
so that no one can ever forget to resolve the redirects and the converted
titles.

Bug: T177657
Change-Id: Id8da4bfd6f84e8a10319097e59ec2bdb32ea28b5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1507676191,1507676615,c3ab588c5a33786659b8ff88e84bc0d24bc9e4a1
c3ab588c5a33786659b8ff88e84bc0d24bc9e4a1,c3ab588c,Don't emit a BecauseYouRead card when no suggestions are available.,"Don't emit a BecauseYouRead card when no suggestions are available.

Bug: T177657
Change-Id: If99f35977700261d4da84d1a05d585d8c57c8c04
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507663373,1507676570,869664700abd31ea6ad475d0aa3aac1f7efa048e
9690f2a426f6b97ae71cb95f55fd392b7a40843e,9690f2a4,Fix: Update license text files to use content:// URIs,"Fix: Update license text files to use content:// URIs

This should allow them to be displayed on all devices including those
on 7.0 and above.

Bug: T164439
Change-Id: If28915142b881cea35ae1317fde963a4f190b95d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507671593,1507671593,767b98c7266dbda5165d013e72d00f53a523dfb3
34aa57a60e849756bfa780f86632aa00d7e90079,34aa57a6,Modify time to update Featured Article widget,"Modify time to update Featured Article widget

At the moment, the Featured Article widget is hard-coded to update itself every 12 hours. Now, this was updated to update every 4 hours.

Bug: T121410
Change-Id: I2914e1accf5e17a09399ef8eb807ca571b6378af
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1507668197,1507668197,767b98c7266dbda5165d013e72d00f53a523dfb3
767b98c7266dbda5165d013e72d00f53a523dfb3,767b98c7,Fix interlanguage links for be-x-old language.,"Fix interlanguage links for be-x-old language.

Bug: T168496
Change-Id: Ic082fcb833701110b45d61fb067c51077aadb302
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507660563,1507660638,869664700abd31ea6ad475d0aa3aac1f7efa048e
0323d23244f2ac2c280792072e4365061837cfa3,0323d232,Add on-scroll color transition for page toolbar icons,"Add on-scroll color transition for page toolbar icons

In light mode, updates the page toolbar icons to white when a lead image
is present, then transitions them to black over the course of the on-
scroll animation.

To facilitate this, the page toolbar search and tab buttons are moved out
of the options menu and incorporated directly into the toolbar, so that we
have access to their views and drawables consistently and as soon as the
toolbar is inflated, rather than depending on the vagaries of the options
menu state.

Icon color updating is incorporated into the existing flow for condition-
ally adjusting the toolbar's opacity.

Bug: T170304
Change-Id: Ib4e16380f657830ebc5f5ac575eaff46d986f060
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507646223,1507657260,d2cf3a65f34cae2b3bc7a285a5aca055e30ca461
40dab8673fe1e58f0f9d3cbaa0ba09484c3a189c,40dab867,Article overflow menu : Adding option to remove from the reading lists,"Article overflow menu : Adding option to remove from the reading lists

Bug: T172998
Change-Id: I201397c25ce2af9bfce651d47c1503de4e7b1b4f
",,,,yash,yash.girdhar@gmail.com,yash,yash.girdhar@gmail.com,1506975771,1507574618,21a8099597b2b38aa4a9ce5113b5e205544e052f
869664700abd31ea6ad475d0aa3aac1f7efa048e,86966470,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I568044eebc1f2e16e7a67ae12fe2beceb7436037
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1507531635,1507531635,3ef9c5a6d1b5a5370c052a46c6b4af913ac154c1
3ef9c5a6d1b5a5370c052a46c6b4af913ac154c1,3ef9c5a6,"Merge ""Add options to save/remove all reading list articles from offline.""","Merge ""Add options to save/remove all reading list articles from offline.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507320127,1507320127,"8cf5bf1ca00b3c6351ff5cdaa28dc6938d78b446,32a1af375f01de8478bfc1c2eb8e0f13efb644eb"
d2cf3a65f34cae2b3bc7a285a5aca055e30ca461,d2cf3a65,"Make app bar colors consistent, pt. 1","Make app bar colors consistent, pt. 1

Updates the page activity and search activity toolbars to be base90 in
light mode and base18 in dark mode.  Updates text and widget colors
accordingly.

Note: The toolbar icons will need updating to transition from white to
black on scroll down in light mode, in a subsequent patch.

Bug: T170304
Change-Id: If9d74d7ae5a0687e78cc6454c88b8ea0d963348d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1507224590,1507310947,3069c2080847e243549fa55181dffc6846bb5250
8cf5bf1ca00b3c6351ff5cdaa28dc6938d78b446,8cf5bf1c,Use converttitles in all the right places.,"Use converttitles in all the right places.

Because of the excellent improvement to mobileview for supporting variant
titles, we can now take full advantage of variant titles throughout the
API.  This means that we may now:

- Update LinkHandler to build PageTitles based on the 'title' attribute of
  links, instead of just the URL.  This will allow variant titles to be
  saved in History, Reading Lists, etc.
- Use the 'converttitles' flag in the relevant calls to the action=query
  API, so that variant titles can be passed into it interchangeably.
  (mobileview converts titles explicitly, and does not require the flag.)

Now, in the case of editing:

- The action=edit API actually doesn't support converting titles, and if
  we give it a language-variant title that doesn't actually exist as its
  own page, it will create that page!  This patch starts by modifying
  WikitextClient to pass back the normalized title of the requested page,
  and we will use this title for saving the edited text.  This also adds
  a guard to EditClient to prevent it from creating pages automatically.

All of this brings us much closer to full variant support in the app.

Change-Id: I0509fb115dc61fc4def322c6d315afedccaadf61
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1507241232,1507308733,b86b3dbc3ac4df9af0ef330ef91c99a3b486b179
b86b3dbc3ac4df9af0ef330ef91c99a3b486b179,b86b3dbc,"Merge ""Fix: Language switch between Chinese variants""","Merge ""Fix: Language switch between Chinese variants""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507308478,1507308478,"6e5f63c45ba55740d1930631e81b8735cb1bf089,a1cd28c2472b087f66bc05194848e6c1781b3cf5"
32a1af375f01de8478bfc1c2eb8e0f13efb644eb,32a1af37,Add options to save/remove all reading list articles from offline.,"Add options to save/remove all reading list articles from offline.

Change-Id: I1a93ae3eff8473b033e48dba29dedaa602cf5c11
",,,,Dmitry Brant,me@dmitrybrant.com,Dmitry Brant,me@dmitrybrant.com,1507301355,1507301355,6e5f63c45ba55740d1930631e81b8735cb1bf089
a1cd28c2472b087f66bc05194848e6c1781b3cf5,a1cd28c2,Fix: Language switch between Chinese variants,"Fix: Language switch between Chinese variants

In this update:
 - Dynamically adds either Simlified or Traditional Chinese when one is reading a Chinese article.
 - Add ""converttitles=true"" to LangLinksClient.
 - Add a unit test class for LangLinksActivity

Bug:T176161, T177255
Change-Id: Iadc933f418c67220dd0ae10138716aa9093b10c1
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1506727943,1507242208,21a8099597b2b38aa4a9ce5113b5e205544e052f
6e5f63c45ba55740d1930631e81b8735cb1bf089,6e5f63c4,Fix html unescaping of certain language names.,"Fix html unescaping of certain language names.

It looks like the English names of some languages are html-escaped, not
just the autonyms of the language.

Change-Id: Ie5aaba2530d1911c34a9d2e1f2560a3504651a12
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507228130,1507229713,46da38c28996ef9bb3cda889067001ae0a75430b
46da38c28996ef9bb3cda889067001ae0a75430b,46da38c2,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I2ee3455a3af3eaaee1af1ba40e577f09aebb7d17
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1507183751,1507183751,fdcec533a772b9d8c9ace9e66fc17d2e776a69f3
fdcec533a772b9d8c9ace9e66fc17d2e776a69f3,fdcec533,One more thing with language variants in WikiSite.,"One more thing with language variants in WikiSite.

This adds the other known variants of zhwiki, so that the domain name ""zh""
is correctly extracted from the variant language code.  These must be
hardcoded, since there are other variations of Chinese such as ""zh-yue""
which are their own subdomains instead of variants.

Change-Id: I683f0ad85ca05cbcbdb62e6aa17fb2ff2256f523
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507149734,1507153732,57816ebc9953a2abe339e5296e52c3625a663438
57816ebc9953a2abe339e5296e52c3625a663438,57816ebc,Clean up and solidify handling of language variants in WikiSite.,"Clean up and solidify handling of language variants in WikiSite.

Once and for all, WikiSite shall be aware of a languageCode that may be a
language variant, and is now constructable from a URL that contains a
language variant path.

This also removes quite a bit of old or unnecessary cruft, and adds some more
relevant tests.

Change-Id: If093e99a665ed7353067848f5e47515352e235d4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1507125022,1507148714,3069c2080847e243549fa55181dffc6846bb5250
3069c2080847e243549fa55181dffc6846bb5250,3069c208,"Merge ""Fix: Deep link feature for non /wiki/ URL""","Merge ""Fix: Deep link feature for non /wiki/ URL""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1507121111,1507121111,"4cd851d3e573dd18fe4d68f0110f6b215c0f8adc,df4fb8073c0e88875d93d452bb3859b3f396a26d"
4cd851d3e573dd18fe4d68f0110f6b215c0f8adc,4cd851d3,Theme chooser design updates.,"Theme chooser design updates.

Bug: T173407
Change-Id: Ib026159d37c058dae61c8995c9b33ef6946c2cc8
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506614429,1507049194,4b36820301175bc23353aba585dd13b6613c54ea
4b36820301175bc23353aba585dd13b6613c54ea,4b368203,"Merge ""Final design tweaks to disk usage view.""","Merge ""Final design tweaks to disk usage view.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506971428,1506971428,"e73209a17fa33c9ae3e7de06c71ccd011d5c860d,104ae5873a6c7dfd838678351efa0b2f2ce431c8"
104ae5873a6c7dfd838678351efa0b2f2ce431c8,104ae587,Final design tweaks to disk usage view.,"Final design tweaks to disk usage view.

Bug: T173082
Change-Id: I9c3c5efa17f30128a82e94411a376b465b0dcadc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506970734,1506970734,4cd9db8eafab6fa4b323037daf1f02b9008c2062
e73209a17fa33c9ae3e7de06c71ccd011d5c860d,e73209a1,Design tweak: Update empty state of offline library.,"Design tweak: Update empty state of offline library.

Bug: T172553
Change-Id: I338073a08d5a9e59f591d817ce817e1bcb63abf2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506540612,1506954410,4cd9db8eafab6fa4b323037daf1f02b9008c2062
4cd9db8eafab6fa4b323037daf1f02b9008c2062,4cd9db8e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I929521b06e696de8fdbbb59cd23a912e63bce21a
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1506926963,1506926963,21a8099597b2b38aa4a9ce5113b5e205544e052f
21a8099597b2b38aa4a9ce5113b5e205544e052f,21a80995,Whoops: fix background color of LargeHeader cards in feed.,"Whoops: fix background color of LargeHeader cards in feed.

Change-Id: I8837cdc511f569f58effdca9b3ab151b3dc76ee4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506706755,1506706755,b291eb10dbce70aea2b29b59c2e89b78c1d74456
b291eb10dbce70aea2b29b59c2e89b78c1d74456,b291eb10,"Merge ""Update bundled non-pagelib CSS""","Merge ""Update bundled non-pagelib CSS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506690425,1506690425,"8d93b96cac9e40efb524e8268ebe9079edad2d7d,b13d50b5c5104c2596fb03add99c1a38472488c1"
8d93b96cac9e40efb524e8268ebe9079edad2d7d,8d93b96c,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506690424,1506690424,"080c52e867244523bb10e0abe78c8e10b6400ee4,525c18a01e64899a82427d7f162389e38b743fb6"
080c52e867244523bb10e0abe78c8e10b6400ee4,080c52e8,"Merge ""Update pagelib to 4.7.0""","Merge ""Update pagelib to 4.7.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506690422,1506690422,"9ad8349b453db34cbda4b3d7ecdc7de6495014ab,bf83ba1c628a653d8f739f4709db9eede23cf70e"
525c18a01e64899a82427d7f162389e38b743fb6,525c18a0,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I20a3303511f3c4cdc82847df2e294b6eeb714783
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1506671187,1506671187,9ad8349b453db34cbda4b3d7ecdc7de6495014ab
b13d50b5c5104c2596fb03add99c1a38472488c1,b13d50b5,Update bundled non-pagelib CSS,"Update bundled non-pagelib CSS

Includes a good amount of work around MediaWiki galleries. I'm not sure
if this will have any effect for good or ill on T176753 as I've not been
able to reproduce that issue at all.

Change-Id: I3a8d615bb9b8d4423d0005e863310e6d327e0e17
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506633253,1506636278,9ad8349b453db34cbda4b3d7ecdc7de6495014ab
bf83ba1c628a653d8f739f4709db9eede23cf70e,bf83ba1c,Update pagelib to 4.7.0,"Update pagelib to 4.7.0

Change-Id: I6ddf3e406ff69d57e9080cda4ac3008ad9e677c2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506632220,1506632220,3a043422f0ad0b1d85133600dad0e5a24f6ff583
df4fb8073c0e88875d93d452bb3859b3f396a26d,df4fb807,Fix: Deep link feature for non /wiki/ URL,"Fix: Deep link feature for non /wiki/ URL

In this update:
 - Add an intent-filter for non /wiki/ URL.
 - Handle the variant from deep link URL, and setup the Header based on it.

For people who would like to do the test, please check the Phabricator task below.

Bug: T176909, T137039
Change-Id: I13d64873ba615f7c7ab279e2f199c8fa538f4039
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1506627369,1506627369,98bf4ccd8e0b36fa91f39415bef9eee8c7898472
9ad8349b453db34cbda4b3d7ecdc7de6495014ab,9ad8349b,Design tweak: proper colors in NewsActivity.,"Design tweak: proper colors in NewsActivity.

Change-Id: I77948131194f7518e84a0878df56829829529e95
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506624027,1506624067,b174fb011d08d6d7f4eed6877fc6c11c4c91418b
b174fb011d08d6d7f4eed6877fc6c11c4c91418b,b174fb01,"Merge ""Update MapBox to 5.1.4""","Merge ""Update MapBox to 5.1.4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506623808,1506623808,"5d2d9e01c44ee6d4c2b8b227bd4cd0483e9def30,39b03a302d0c4eeef275b99c912bd7d728e9ff15"
5d2d9e01c44ee6d4c2b8b227bd4cd0483e9def30,5d2d9e01,Fix broken logic for reloading page contents upon theme change.,"Fix broken logic for reloading page contents upon theme change.

One of our recent patches ( https://gerrit.wikimedia.org/r/379934 ) seems
to have broken the logic for reloading the page contents when coming back
from savedInstanceState.  This can be because of a theme change, or any
kind of event where the activity is paused and then reloaded.

For a quick example:
- Go to the feed, and load the featured article (or any article from the
  feed).
- Change the theme.
- Observe that the screen becomes blank.

Change-Id: I595bba915d409518c5c215c10894e8a4727dd929
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506621475,1506622377,3a043422f0ad0b1d85133600dad0e5a24f6ff583
3a043422f0ad0b1d85133600dad0e5a24f6ff583,3a043422,"Merge ""No longer use translucent status bar in PageActivity.""","Merge ""No longer use translucent status bar in PageActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506621564,1506621564,"98bf4ccd8e0b36fa91f39415bef9eee8c7898472,65bbd1b3422af9abb393987911a043a443fceec9"
65bbd1b3422af9abb393987911a043a443fceec9,65bbd1b3,No longer use translucent status bar in PageActivity.,"No longer use translucent status bar in PageActivity.

Overall, a huge reduction in complexity and fragility of code.

Bug: T176748
Change-Id: I0cd274281603693b7b2cb134f840a314dbc29e85
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506531819,1506621085,6868c895726b16489c0e7ce56025a03219bd5124
98bf4ccd8e0b36fa91f39415bef9eee8c7898472,98bf4ccd,"Merge ""Immediately fetch, cache page content when opening in background tab""","Merge ""Immediately fetch, cache page content when opening in background tab""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506618289,1506618289,"3c6fcc4b8f8b2755c912b29cc0e805dcb480cdab,d3781fc0172320487c510a94d8193613144ffa81"
39b03a302d0c4eeef275b99c912bd7d728e9ff15,39b03a30,Update MapBox to 5.1.4,"Update MapBox to 5.1.4

This doesn't introduce any regressions as far as I can tell, but also
doesn't fix the Chromebook crash (T164317).  A change was recently merged
that they claim will fix it, but I guess that's going in the next minor
version.

https://github.com/mapbox/mapbox-gl-native/blob/master/platform/android/CHANGELOG.md

Change-Id: I77b3690d9b38af569bda88864b4630cd6f1464d9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506617293,1506617293,6868c895726b16489c0e7ce56025a03219bd5124
3c6fcc4b8f8b2755c912b29cc0e805dcb480cdab,3c6fcc4b,Consolidation: Use styles for commonly-used text instances.,"Consolidation: Use styles for commonly-used text instances.

Change-Id: Idcb0cadd413c02bf57147642ce002948d1c1e98c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1506546662,1506602445,6868c895726b16489c0e7ce56025a03219bd5124
6868c895726b16489c0e7ce56025a03219bd5124,6868c895,Design tweak: proper theming of bottom sheets.,"Design tweak: proper theming of bottom sheets.

This removes the explicit background color from our bottom sheet dialog
layouts, and instead makes it a globally implicit background color for all
bottom sheets.

Change-Id: Ieb1163566b32cdbc3a0eebcda70f682c2c1afad4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1506528823,1506534944,84aca9a77df6b32ed9d6534bf013c80569a2353d
84aca9a77df6b32ed9d6534bf013c80569a2353d,84aca9a7,"Merge ""Hygiene: Quiet locally failing lint error""","Merge ""Hygiene: Quiet locally failing lint error""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506534861,1506534861,"6212d8847e325b6850b47cea4364886bc18802c0,f26bbf1896d840e536d910bf440a42a600ca9b46"
6212d8847e325b6850b47cea4364886bc18802c0,6212d884,Disk space usage UI follow-up.,"Disk space usage UI follow-up.

Change-Id: Ia3c5052e51adb4d3ec0b4039da2599f350ead26d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1506533367,1506534281,9ec425614813a888970b23a0d0466ad7084f34ab
f26bbf1896d840e536d910bf440a42a600ca9b46,f26bbf18,Hygiene: Quiet locally failing lint error,"Hygiene: Quiet locally failing lint error

Add a needed @TargetApi annotation.  I'm not sure why this isn't causing
CI to fail.

Change-Id: I8c8c7ea31fda87a251ab799303b0f96eaaaba244
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506534226,1506534226,ca6cfa53a41e4b069421183864ee133f79136262
9ec425614813a888970b23a0d0466ad7084f34ab,9ec42561,Further updates to disk space usage UI,"Further updates to disk space usage UI

Bug: T173082
Change-Id: I6ddb0cff65dde5053eaf1efcd83e9873ddfb4cd4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506526844,1506533955,ca6cfa53a41e4b069421183864ee133f79136262
ca6cfa53a41e4b069421183864ee133f79136262,ca6cfa53,"Merge ""Add Pig Latin to the list of app languages""","Merge ""Add Pig Latin to the list of app languages""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506533459,1506533459,"6c8661c82b9ba37d655a553429305a08bd32aacb,ab14b7cc363326e77b6dde96449f091128eb3466"
6c8661c82b9ba37d655a553429305a08bd32aacb,6c8661c8,"Merge ""Hygiene: Remove (mostly) unused methods""","Merge ""Hygiene: Remove (mostly) unused methods""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506532442,1506532442,"ac7d33da9dd69dcf5d50911729ac813255a45b9c,50035e4553fbd94f7d39fff9375634c823289866"
ac7d33da9dd69dcf5d50911729ac813255a45b9c,ac7d33da,"Merge ""Tweak: Update Offline Library storage space used text""","Merge ""Tweak: Update Offline Library storage space used text""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506532312,1506532312,"3218b38cfb540a319df15ecc2f28fc0c09ff0c60,aa06c4c7dd7d6622592b8eb3dd9d5f10df6b121d"
d3781fc0172320487c510a94d8193613144ffa81,d3781fc0,"Immediately fetch, cache page content when opening in background tab","Immediately fetch, cache page content when opening in background tab

Adds a new PageCacher class, similar to but distinct from the
SavedPageSyncService (which does more).  Exposes a static loadIntoCache
method that can be used to grab and cache all content for a page.

TODO (in a follow-up): Immediately update the tab list icons.

Bug: T168310
Change-Id: I4682f03d6993244442ba63de402d417c51ba1f70
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506348230,1506528946,3218b38cfb540a319df15ecc2f28fc0c09ff0c60
3218b38cfb540a319df15ecc2f28fc0c09ff0c60,3218b38c,"Merge ""Hygiene: Clean up PageFragment callbacks""","Merge ""Hygiene: Clean up PageFragment callbacks""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506528747,1506528747,"4950444fe17474bdbaa6b41a917dee94b3c4266c,4c350c81846416264c5c9ef4fe1b2140e60aa6dd"
50035e4553fbd94f7d39fff9375634c823289866,50035e45,Hygiene: Remove (mostly) unused methods,"Hygiene: Remove (mostly) unused methods

Remove some apparently redundant setLocale methods.

Change-Id: Id22439cc050724c617956c867f9455a057325f04
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506528172,1506528172,114138221f24d1391b9b8879d01f98a7c0a4c9f7
4950444fe17474bdbaa6b41a917dee94b3c4266c,4950444f,Design tweak: use paperColor for alert dialog background.,"Design tweak: use paperColor for alert dialog background.

Change-Id: If3756778ac19a47d66fd8df814aff99f8f483780
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506527143,1506527143,114138221f24d1391b9b8879d01f98a7c0a4c9f7
aa06c4c7dd7d6622592b8eb3dd9d5f10df6b121d,aa06c4c7,Tweak: Update Offline Library storage space used text,"Tweak: Update Offline Library storage space used text

Bug: T173082
Change-Id: I0012eb140eef12babd821e63489a1134fa204a31
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506524555,1506524555,114138221f24d1391b9b8879d01f98a7c0a4c9f7
114138221f24d1391b9b8879d01f98a7c0a4c9f7,11413822,"Merge ""Design tweaks: download progress widget updates.""","Merge ""Design tweaks: download progress widget updates.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506523230,1506523230,"eeaeb1d5cf320e9a1fafbb0e5276c0e29365a1ca,db7f1d853322f6d848ca99920487fe5f0a29e6d8"
ab14b7cc363326e77b6dde96449f091128eb3466,ab14b7cc,Add Pig Latin to the list of app languages,"Add Pig Latin to the list of app languages

Allows us to take advantage of MediaWiki support for Pig Latin for
language variant testing.

Enable Pig Latin on a local Vagrant by setting $wgUsePigLatinVariant
to 'true' in /vagrant/mediawiki/includes/DefaultSettings.php.

Note that this has no effect against the production Wikipedias (or the
Beta Cluster as far as I know) because Pig Latin isn't enabled there.
However, it correctly requests Pig Latin against a local Vagrant instance
with Pig Latin enabled.

Side notes:

* It seems localized languages now come back HTML-escaped. Updated
  generate-wiki-languages.py to unescape them.

* Updated requirements.txt with current versions of pip packages.

Bug: T167962
Change-Id: I5012f4e8e41498ed881165dd0bab3f5d1c6f31e6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506185829,1506521949,e6973386eb691e95217efad3be9989ea7fb33209
eeaeb1d5cf320e9a1fafbb0e5276c0e29365a1ca,eeaeb1d5,Design tweak: fix default statusBarColor for all activities.,"Design tweak: fix default statusBarColor for all activities.

The statusBarColor should be a darker version of the default toolbar
color.  When we split off the default toolbar color to be different for
light vs. dark mode, we'll also split off the corresponding status bar
colors.

Change-Id: If648d7d18b7c71163f1c8ee19097c29517cb0cb8
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506520724,1506520724,e6973386eb691e95217efad3be9989ea7fb33209
db7f1d853322f6d848ca99920487fe5f0a29e6d8,db7f1d85,Design tweaks: download progress widget updates.,"Design tweaks: download progress widget updates.

- Several tweaks to the Download indicator widget, per design comments.
- This also sets the background of item thumbnail images to a constant
  white, as intended.

Bug: T163590
Bug: T167523
Change-Id: I8beaac799bce78460eb3ef03b025653b10aecabd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506520179,1506520278,e6973386eb691e95217efad3be9989ea7fb33209
4c350c81846416264c5c9ef4fe1b2140e60aa6dd,4c350c81,Hygiene: Clean up PageFragment callbacks,"Hygiene: Clean up PageFragment callbacks

Clears out all of the getters in disguise, and makes them into proper
callbacks.

Change-Id: Ie7a7606767fbbf8e214482506d1abc182fb2642b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506116591,1506519646,e6973386eb691e95217efad3be9989ea7fb33209
e6973386eb691e95217efad3be9989ea7fb33209,e6973386,Fix/simplify RecyclerView item decorations (dividers).,"Fix/simplify RecyclerView item decorations (dividers).

This fixes (and simplifies) the way we draw the thin dividers between the
items in our RecyclerViews.  Some recent changes exposed a flaw in the
previous implementation, where it actually wasn't providing enough space
for the divider to be drawn (and instead drawing it on top of the item
itself.

Change-Id: Ie589ef5262561d90558a8309db0057f2e1e3ff9b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506462921,1506462921,8847b220c7bcb630322caa4b44a8d25a26b41e5c
8847b220c7bcb630322caa4b44a8d25a26b41e5c,8847b220,Design tweak: no longer draw rectangular border around list item images.,"Design tweak: no longer draw rectangular border around list item images.

Per https://phabricator.wikimedia.org/T163590#3561236

Change-Id: I1478afbd11493bb0339b574fad7fda39d91b1ee5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506456507,1506456507,1def3cdbbd1ca8e3063f5e3c40ee70bd229bfbc2
1def3cdbbd1ca8e3063f5e3c40ee70bd229bfbc2,1def3cdb,Consolidation: normalize usage of background / paper color throughout.,"Consolidation: normalize usage of background / paper color throughout.

One of the major design themes that has emerged from the consolidation is
the following:

- All activities shall have a default background color of base80 (light) /
  base10 (dark)
- All components (controls, cards, list items) that appear in an activity
  shall have a background of ""paper_color"", which is base100/base14.

This patch sweeps through all activities/framents and normalizes (and
corrects where necessary) their usages of these two colors.

This also consolidates the unnecessary ""base_color"" style, being
equivalent to windowBackground.

Change-Id: Iaed1ad7016944a4c21c96dfe7ac0a5cbca31d6f2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506453935,1506454008,d58af1dfd9cdda36c9c41172cf043d050488fbdb
d58af1dfd9cdda36c9c41172cf043d050488fbdb,d58af1df,Change Window Background Light mode color,"Change Window Background Light mode color

- Base color light mode is base80 and dark is base10

Change-Id: I4e38b006e52fc7d05e0014250eeb4a78c94cf3e0
",,,,sharvani,sharan@wikimedia.org,sharvani,sharan@wikimedia.org,1506447931,1506450509,2ab2f81a806c595b36bb9820deaeb8cb43a03e31
2ab2f81a806c595b36bb9820deaeb8cb43a03e31,2ab2f81a,"Merge ""Consolidation: fix SearchView hint color.""","Merge ""Consolidation: fix SearchView hint color.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506449109,1506449109,"1fb46ec5f11dd0fd5321f31cf0811d1b9a5ea2e1,13b19fe4ff4ae6187bd2d532a8ed4616990fb96f"
1fb46ec5f11dd0fd5321f31cf0811d1b9a5ea2e1,1fb46ec5,"Merge ""Consolidation: a couple of more consistent uses of colorAccent.""","Merge ""Consolidation: a couple of more consistent uses of colorAccent.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506449109,1506449109,"2f94e1edf17ed1d370f14702b4a2b1fccb2625a7,9a7360046ab36bf1c27a8f063af11363b1c0d8a5"
2f94e1edf17ed1d370f14702b4a2b1fccb2625a7,2f94e1ed,"Merge ""Design tweak: Implement green ActionMode color in remote comp. activity.""","Merge ""Design tweak: Implement green ActionMode color in remote comp. activity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506448707,1506448707,"17187854e82b9b9a3de79ed717123c88d4c5f800,da79561925f1057f923058cc3fab1b5d94ff0a7e"
da79561925f1057f923058cc3fab1b5d94ff0a7e,da795619,Design tweak: Implement green ActionMode color in remote comp. activity.,"Design tweak: Implement green ActionMode color in remote comp. activity.

Change-Id: I561b77e81034210c35ad98bb42bc37e83dede373
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506441720,1506441720,b47ea937893a747cab3d333988331bebd9e7aadb
13b19fe4ff4ae6187bd2d532a8ed4616990fb96f,13b19fe4,Consolidation: fix SearchView hint color.,"Consolidation: fix SearchView hint color.

Change-Id: I57c95e7280bd8bf6b600284a352c3df93b25f9de
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506438359,1506438359,9a7360046ab36bf1c27a8f063af11363b1c0d8a5
9a7360046ab36bf1c27a8f063af11363b1c0d8a5,9a736004,Consolidation: a couple of more consistent uses of colorAccent.,"Consolidation: a couple of more consistent uses of colorAccent.

Change-Id: I69864c2186775ba48fa653eed7af0b3d9ed93060
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506436937,1506436937,bc482bd68a06389c8347d59e5a92a3ccd4c58bb6
17187854e82b9b9a3de79ed717123c88d4c5f800,17187854,Consolidation: abolish link_color attribute.,"Consolidation: abolish link_color attribute.

The textColorLink attribute automatically defaults to the current theme's
Accent color, so there's no need to set it explicitly.

This patch also adds some comments that document the effect of some of the
global Android color definitions.

Change-Id: I8bcf16657c39cc1311c5b08d2cee6d2c8944219a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505408288,1506436341,bc482bd68a06389c8347d59e5a92a3ccd4c58bb6
bc482bd68a06389c8347d59e5a92a3ccd4c58bb6,bc482bd6,Consolidate unnecessary color attribute.,"Consolidate unnecessary color attribute.

Change-Id: I9dbcc00d4c2adffe257d4c136efa75f0fc26f66e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506433693,1506433693,b47ea937893a747cab3d333988331bebd9e7aadb
b47ea937893a747cab3d333988331bebd9e7aadb,b47ea937,"Merge ""Consolidation: Abolish window_background_color attribute.""","Merge ""Consolidation: Abolish window_background_color attribute.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506369685,1506369685,"dd3ba37dcef20cbf9911f5473e3ad3ea3c20ea76,cc5e15e215287a433ce1737341b5cae6e7745999"
dd3ba37dcef20cbf9911f5473e3ad3ea3c20ea76,dd3ba37d,"Merge ""Hygiene: Remove PageLoadCallbacks and related references""","Merge ""Hygiene: Remove PageLoadCallbacks and related references""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506369579,1506369579,"8281404f8deeaf3cf95799fa1e0619f2a045e3d1,51634a9d0d874baf55ff46bf6b455583ccc01762"
8281404f8deeaf3cf95799fa1e0619f2a045e3d1,8281404f,"Merge ""Make onboarding gradient background global by default.""","Merge ""Make onboarding gradient background global by default.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506369324,1506369324,"6cfb4984dca2dad12f2be0a1074544f4265e5402,1534da9f58340fd811bf8d306402f67fdee75dff"
6cfb4984dca2dad12f2be0a1074544f4265e5402,6cfb4984,"Merge ""Properly tint ImageViews with colors that have alpha.""","Merge ""Properly tint ImageViews with colors that have alpha.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506369323,1506369323,"78a73f505cdb55506043005edb994792e3a7eb9e,51d8892544104448534fc2e81388f3e5cb27e30a"
78a73f505cdb55506043005edb994792e3a7eb9e,78a73f50,"Merge ""Hygiene: clean up a couple of attributes.""","Merge ""Hygiene: clean up a couple of attributes.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506368459,1506368459,"86e00b975f266dae426db3d299916b0f5798e2ee,74e63fd7f197d53cb4269625e45623c3762aa6dd"
86e00b975f266dae426db3d299916b0f5798e2ee,86e00b97,"Merge ""Fix scrolling and padding of Reference dialog text.""","Merge ""Fix scrolling and padding of Reference dialog text.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506367788,1506367788,"c0ad237b50113101ab7f5f4df1b8f029cc5e1d2d,14680b4c4859b6be752aae09339261b1bd5184be"
c0ad237b50113101ab7f5f4df1b8f029cc5e1d2d,c0ad237b,"Merge ""Fix bookmark fill-in logic when adding/removing from reading lists.""","Merge ""Fix bookmark fill-in logic when adding/removing from reading lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506367648,1506367648,"9f1635fb4cdaadc3f84b1f770dfb53356eb34e0a,19e6e135e76933337dd08b6b2e8ba3ac234cb197"
51634a9d0d874baf55ff46bf6b455583ccc01762,51634a9d,Hygiene: Remove PageLoadCallbacks and related references,"Hygiene: Remove PageLoadCallbacks and related references

(unused)

Change-Id: I1175e3e8a1b60422ba082e24c3e95322578dcccc
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506366164,1506366164,9f1635fb4cdaadc3f84b1f770dfb53356eb34e0a
14680b4c4859b6be752aae09339261b1bd5184be,14680b4c,Fix scrolling and padding of Reference dialog text.,"Fix scrolling and padding of Reference dialog text.

Since there was no default top/bottom padding (just a minHeight), some
longer reference items were looking weird.

e.g. [[Pittsburgh]], reference [5] in the first paragraph.

Change-Id: Ic97ddae4987d53d858531c05c721636263cca634
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506355216,1506362260,19e6e135e76933337dd08b6b2e8ba3ac234cb197
cc5e15e215287a433ce1737341b5cae6e7745999,cc5e15e2,Consolidation: Abolish window_background_color attribute.,"Consolidation: Abolish window_background_color attribute.

Also clean up a couple of things along the way.

Change-Id: I6d721569e1b22bf6c2053f872b558c61b03da7d4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506355105,1506355105,19e6e135e76933337dd08b6b2e8ba3ac234cb197
19e6e135e76933337dd08b6b2e8ba3ac234cb197,19e6e135,Fix bookmark fill-in logic when adding/removing from reading lists.,"Fix bookmark fill-in logic when adding/removing from reading lists.

Our recent changes to pending-deletion of reading list pages has caused a
slight dent in the logic for filling in the bookmark icon in PageFragment
and the Featured Article card (which also controls the menu options that
appear for adding/deleting the page).  This fixes the behavior to be as it
should.

To reproduce the issue:
- Open an article, add it to a reading list via the bottom toolbar button,
  then tap the button again to remove it. Notice that the button is still
  filled in, and nothing happens when it's tapped.

Change-Id: I9f023a8e50e9a04f421e319ff373f71e3e3bed89
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506352014,1506352014,0e5b965124c3b964942c83ab3bb636c4f88a734f
1534da9f58340fd811bf8d306402f67fdee75dff,1534da9f,Make onboarding gradient background global by default.,"Make onboarding gradient background global by default.

I noticed that the ""initial"" onboarding screens have a background that
scrolls along with the pager, which isn't quite right.  This patch enables
the background to be for the whole layout (istead of per-page), while
allowing certain onboarding screens like the Offline tutorial to have per-
page backgrounds.

Change-Id: Ia1aad5792086911986ff0a931f86f7cfccaf32ad
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506349521,1506349521,51d8892544104448534fc2e81388f3e5cb27e30a
51d8892544104448534fc2e81388f3e5cb27e30a,51d88925,Properly tint ImageViews with colors that have alpha.,"Properly tint ImageViews with colors that have alpha.

I've discovered the magic combination of attributes that allows us to
override (tint + src_in) the color of an ImageView:

- Specify ""app:tint"" instead of ""android:tint"", and then specify
  ""app:tintMode"".
- Unfortunately, use the fully-qualified AppCompatImageView instead of
  ImageView, since this is the only way it passes Lint.

Change-Id: Iad39dcdbf32e4024f30a71a6e430bcf9bfa664e4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506129662,1506348666,74e63fd7f197d53cb4269625e45623c3762aa6dd
74e63fd7f197d53cb4269625e45623c3762aa6dd,74e63fd7,Hygiene: clean up a couple of attributes.,"Hygiene: clean up a couple of attributes.

Change-Id: I6aa015da5fa04c57f18a5c72a0baa127674322dc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1506116233,1506346640,9f1635fb4cdaadc3f84b1f770dfb53356eb34e0a
9f1635fb4cdaadc3f84b1f770dfb53356eb34e0a,9f1635fb,"Merge ""Never suppress the language selection UI""","Merge ""Never suppress the language selection UI""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506346554,1506346554,"931fad1cade54bf12dfe58eaaabc3194468aa451,4476b53b9cb4414eea0292635e80659ce9098f28"
931fad1cade54bf12dfe58eaaabc3194468aa451,931fad1c,"Merge ""Update Butterknife to 8.8.1 and add option 'debuggable = false'""","Merge ""Update Butterknife to 8.8.1 and add option 'debuggable = false'""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506346553,1506346553,"3e6ca693fc47977be9dab6f8361b4464f657b7f6,70a03098822631a1a9d19f7af194316ad0373d28"
3e6ca693fc47977be9dab6f8361b4464f657b7f6,3e6ca693,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia53c4545fec8e77e0a07519f7fcafcccdeb4dc72
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1506317651,1506317651,0e5b965124c3b964942c83ab3bb636c4f88a734f
4476b53b9cb4414eea0292635e80659ce9098f28,4476b53b,Never suppress the language selection UI,"Never suppress the language selection UI

Our dev settings contain a setting to indicate whether the MediaWiki
installation the app is hitting supports a language code subdomain
component; for instance, a standard MW-Vagrant installation doesn't.

We shouldn't hide the language selection UI when this is set to false,
because the app language also affects the Accept-Language header sent,
which we may want to test even against a single-language wiki (for
testing language variants, for example.

Change-Id: Iada4a5863c532317df566ebca081c45fea2ada92
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506185739,1506186276,0e5b965124c3b964942c83ab3bb636c4f88a734f
70a03098822631a1a9d19f7af194316ad0373d28,70a03098,Update Butterknife to 8.8.1 and add option 'debuggable = false',"Update Butterknife to 8.8.1 and add option 'debuggable = false'

From the release notes:

Processor option butterknife.debuggable controls whether debug information
is generated. When specified as false, checks for required views being non-
null are elided and casts are no longer guarded with user-friendly error
messages. This reduces the amount of generated code for release builds at
the expense of less friendly exceptions when something breaks.

https://github.com/JakeWharton/butterknife/blob/master/CHANGELOG.md

Change-Id: If7f585d2d796d506dbd8d429993142178ff129be
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506137166,1506137166,0e5b965124c3b964942c83ab3bb636c4f88a734f
0e5b965124c3b964942c83ab3bb636c4f88a734f,0e5b9651,"Merge ""Add ""data saving"" mode""","Merge ""Add ""data saving"" mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506122261,1506122261,"758c179b89b0d31772fceac2734e128e4927b71c,e0eef82f8d08053fc7f2c875114ba1e7f2e80f7e"
758c179b89b0d31772fceac2734e128e4927b71c,758c179b,"Merge ""Design consolidation""","Merge ""Design consolidation""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506111789,1506111790,"99cf6360ef6318248fd517c67c93d2f33c5c91d5,bb47711c82fccb5fd2287436940d161446bc300e"
bb47711c82fccb5fd2287436940d161446bc300e,bb47711c,Design consolidation,"Design consolidation

- Repetition of style attributes has been removed.
- Standard background colors have been used.

Bug: T172984
Change-Id: Ia5d9772cb9570456d732f2d7433445bea0c413b2
",,,,sharvani,sharan@wikimedia.org,sharvani,sharan@wikimedia.org,1506093305,1506101464,510211d0d35bfecb98e26783e53b897f0b3886ae
99cf6360ef6318248fd517c67c93d2f33c5c91d5,99cf6360,"Merge ""Hygiene: Remove unnecessary gimlimit param from GalleryCollection query""","Merge ""Hygiene: Remove unnecessary gimlimit param from GalleryCollection query""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506088455,1506088455,"89666ebe93a613aa3dcca78a8461cd76c16cb5a2,a9617f3073c7ae1ad0f535d1a9d97a2b72bba9b5"
89666ebe93a613aa3dcca78a8461cd76c16cb5a2,89666ebe,"Merge ""Update bundled CSS""","Merge ""Update bundled CSS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506087924,1506087924,"894f76c75f651b56f8f60c14d566ac2b32131826,ed88c7c7f9baa11764afe52bf4521a8449986dbb"
a9617f3073c7ae1ad0f535d1a9d97a2b72bba9b5,a9617f30,Hygiene: Remove unnecessary gimlimit param from GalleryCollection query,"Hygiene: Remove unnecessary gimlimit param from GalleryCollection query

Removing it seems to do no harm.

Change-Id: I886393c80f5d32db055b09f0a827cf3d68f36ff9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506087275,1506087275,6015f18d039229df0c595ed59cd91bc6a79a7961
ed88c7c7f9baa11764afe52bf4521a8449986dbb,ed88c7c7,Update bundled CSS,"Update bundled CSS

Change-Id: I128d27d4bf2972a8e6923677d31babb502765614
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506030801,1506030801,6015f18d039229df0c595ed59cd91bc6a79a7961
894f76c75f651b56f8f60c14d566ac2b32131826,894f76c7,Fix: Prevent duplicate images in the gallery,"Fix: Prevent duplicate images in the gallery

Due to a mismatched comparison between normalized and non-normalized
filenames, images clicked to launch the gallery which contained spaces
in their filenames were appearing in the gallery twice (i.e., injected
a second time after not being found).

With this patch we inject underscores for spaces on both sides to ensure
we're comparing like with like.

Test cases (both en):
* Hester Thrale
* Gennady Golovkin

Change-Id: Iad727e9f06aa100208541ab35c8df12ede4b1e50
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1506029852,1506030407,6015f18d039229df0c595ed59cd91bc6a79a7961
6015f18d039229df0c595ed59cd91bc6a79a7961,6015f18d,"Merge ""Open inter-language links and Gallery links in the same tab.""","Merge ""Open inter-language links and Gallery links in the same tab.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506028168,1506028168,"510211d0d35bfecb98e26783e53b897f0b3886ae,4ee1c40fd3d9edbda46a9d730bbd1be18a1dd463"
510211d0d35bfecb98e26783e53b897f0b3886ae,510211d0,"Merge ""Hygiene: remove unused attribute.""","Merge ""Hygiene: remove unused attribute.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506021823,1506021824,"c560c3f5f824c0e86776c37bb1b6bb8884f87fc6,0cadf78374a984a7ca416b9325c4b84d430825a3"
0cadf78374a984a7ca416b9325c4b84d430825a3,0cadf783,Hygiene: remove unused attribute.,"Hygiene: remove unused attribute.

Also spelling.

Change-Id: Iea2eeef1ed37f60f4ac59e811c602d371ac00c81
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1506019458,1506019458,0e1df969581684d8ceacf75f19217705e20b4aa0
4ee1c40fd3d9edbda46a9d730bbd1be18a1dd463,4ee1c40f,Open inter-language links and Gallery links in the same tab.,"Open inter-language links and Gallery links in the same tab.

This patch makes PageActivity provide two separate newIntent..() builders,
for loading a requested page in a new tab or the current tab.

This now allows LangLinksActivity and GalleryActivity to load their pages
in the current tab.

And in other places in the code, this makes it more explicit whether the
requested page will be loaded in a new or current tab.

Bug: T176163
Bug: T156148
Change-Id: I64da49a9b49fb19fe62f3aa146e10dbfbb2ec74e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1506018087,1506018746,c560c3f5f824c0e86776c37bb1b6bb8884f87fc6
c560c3f5f824c0e86776c37bb1b6bb8884f87fc6,c560c3f5,Fix: add Accept-Language header to requests coming from the WebView.,"Fix: add Accept-Language header to requests coming from the WebView.

We have a class called OkHttpWebViewClient which catches all network
requests coming from the WebView, and routes them through clients created
by OkHttpConnectionFactory.  This is good, because OkHttpConnectionFactory
automatically appends all the necessary header onto the request...

...*except* the ""Accept-Language"" header.  This header is only set in the
RetrofitFactory class, because it's dependent on the current Wiki to which
the request applies.

This patch updates OkHttpWebViewClient so that it *also* sets the
Accept-Language header. This way, any request made from within the WebView,
which may include an XHR to retrieve additional page content, will also
get the proper language header.

TODO: Find a way to set this header in one place.

Bug: T176374
Change-Id: I08a5ef2fc8b74106d9041195c788b8514f8e76bc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1506007877,1506018741,0e1df969581684d8ceacf75f19217705e20b4aa0
0e1df969581684d8ceacf75f19217705e20b4aa0,0e1df969,"Merge ""Suppress redundant Fresco image caching""","Merge ""Suppress redundant Fresco image caching""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506004551,1506004551,"1d16a30633d7c681b0342ee9bd5e3eb303826ed7,932d059e906a954cd651ffcc8a04df35aa763b83"
1d16a30633d7c681b0342ee9bd5e3eb303826ed7,1d16a306,"Merge ""Consolidate Light and Dark mode colors""","Merge ""Consolidate Light and Dark mode colors""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506003506,1506003506,"ea6e2689b781c74dd2e398c3fd71cd12ab220c05,3cae0ee9b952d278c998c597c20efdbaa71c0e07"
ea6e2689b781c74dd2e398c3fd71cd12ab220c05,ea6e2689,"Merge ""Bump mobile-sections version requested to 0.12.4""","Merge ""Bump mobile-sections version requested to 0.12.4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506002188,1506002188,"c364b28c7ff248c2765a80ef11fa3f1e9e4bcc4d,5ec0446bd31a428c97db5b960c0adb3a4b9cee30"
c364b28c7ff248c2765a80ef11fa3f1e9e4bcc4d,c364b28c,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1506001880,1506001880,"b4c43d5c466597529349f63fd1eb5154e237dfae,5239eb467aff841b0f0800cdfa5273c8872e61d6"
b4c43d5c466597529349f63fd1eb5154e237dfae,b4c43d5c,"Merge ""Bump summary spec version requested to 1.2.0""","Merge ""Bump summary spec version requested to 1.2.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505999487,1505999487,"6bbaec381b614c28b7a1db4331940024316639a1,bd6e095b5f142c3f777b9e65510bf12d7f12c7b7"
5239eb467aff841b0f0800cdfa5273c8872e61d6,5239eb46,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I78df954eaa3626ad1b5297214abc1a664883eba7
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1505979563,1505979563,6bbaec381b614c28b7a1db4331940024316639a1
6bbaec381b614c28b7a1db4331940024316639a1,6bbaec38,Hygiene: Session logging cleanup,"Hygiene: Session logging cleanup

* Remove unnecessary usages of 'this'
* Clean up legacy Saved Pages logging stuff
* Clean up other references to HistoryEntry.SOURCE_SAVED_PAGE
* Add call to app.getSessionFunnel.restSectionsFetchEnd back in
* Other minor cleanup in the pageLoadComplete listener callback in
  PageFragmentLoadState

Change-Id: I9e2a029230cc7436b5aaf0785497c0c5612f0980
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505766060,1505945717,93f40467a20216e1e5a284318b04fdd3e9f71c8f
932d059e906a954cd651ffcc8a04df35aa763b83,932d059e,Suppress redundant Fresco image caching,"Suppress redundant Fresco image caching

Currently, there are two subfolders in our net cache: okhttp_cache
(maintained by OkHttp) and image_cache (maintained by Fresco).

image_cache contains all of the images requested by Fresco, i.e., all
images requested for use in native Android components.

okhttp_cache also contains images, namely the images requested by the
WebView, which do not go through Fresco.

In a default setup, Fresco forbids outside caching of the images it
requests, since it maintains its own cache.  However, we use a customized
network fetcher (CacheableOkHttpNetworkFetcher) that allows OkHttp to
cache Fresco-requested images as well, so that they are available for use
in saved pages (this allows us to persist lead images, for example).
As a result, in our setup, okhttp_cache also contains copies of all images
in image_cache, in addition to the WebView requested images.

This makes Fresco's image_cache completely redundant, so we should disable
it, and save the user a substantial amount of disk space.

To give an example of the savings involved, loading all of the day's feed
content for yesterday resulted in 1.42 MB of data in cache before, and
1.01 MB in cache afterward.

Change-Id: I1d26802f00f5d4cfe389b87f460b0cf7c9bd5a25
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505851623,1505945562,5ec0446bd31a428c97db5b960c0adb3a4b9cee30
5ec0446bd31a428c97db5b960c0adb3a4b9cee30,5ec0446b,Bump mobile-sections version requested to 0.12.4,"Bump mobile-sections version requested to 0.12.4

Change-Id: Id455d10c9ecf4c948bd3087a23d87792939c11b6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505921780,1505945562,93f40467a20216e1e5a284318b04fdd3e9f71c8f
3cae0ee9b952d278c998c597c20efdbaa71c0e07,3cae0ee9,Consolidate Light and Dark mode colors,"Consolidate Light and Dark mode colors

- 40 colors that were not in the palette have been changed.
- Reference worksheet for colors: https://docs.google.com/a/wikimedia.org/spreadsheets/d/1OTQ7i0XFRaJRKJSaYVFpGMPheOQufzdY8DgkWK-k8DQ/edit?usp=sharing

Bug: T172984
Change-Id: Ibe0b49e9fea25b83ab064ff1405861850a8e1b51
",,,,sharvani,sharan@wikimedia.org,sharvani,sharan@wikimedia.org,1505757074,1505939662,2a6b51478af93d8e24f1e54793157ab794ae6c67
93f40467a20216e1e5a284318b04fdd3e9f71c8f,93f40467,"Merge ""Add App Shortcuts icons for the homescreen""","Merge ""Add App Shortcuts icons for the homescreen""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505923822,1505923822,"c220217c76ff2988bf0a47e8390c1b5f2017a731,e0392a8c47d514f360f4fd6dc814e006b689de2b"
bd6e095b5f142c3f777b9e65510bf12d7f12c7b7,bd6e095b,Bump summary spec version requested to 1.2.0,"Bump summary spec version requested to 1.2.0

This version introduces the extract_html field which (as the name
suggests) provides an HTML extract.  We don't need this, but it's used
by the mobile web, and if we request the same version that they do, it
should improve our cache hit rate thanks to their heavy traffic load.

Change-Id: Ib0c7554af5c3d636db74b1a14cee9e4442e239fd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505922625,1505922625,c220217c76ff2988bf0a47e8390c1b5f2017a731
e0392a8c47d514f360f4fd6dc814e006b689de2b,e0392a8c,Add App Shortcuts icons for the homescreen,"Add App Shortcuts icons for the homescreen

In this update:
 1. Adds an intent filter on PageActivity for shortcut icons
 2. Adjusts icon image width and height
 3. Adds offline compilation for ""Random"" shortcut
 4. Setup default opens ""Main Page"" for handling exceptions from ""Radnom"" and ""Continue Reading""
 5. Create a handler class for getting random articles on shortcut icon and feed page.

Bug: T174308
Change-Id: I92da049871a7dd7036ea6d8f3edc3f96df81d950
",,,,Cooltey Feng,cfeng@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505432363,1505920888,4e114558e86fc4114eece5374cd39c6a404fec8c
c220217c76ff2988bf0a47e8390c1b5f2017a731,c220217c,Fix: Remove onlyrequestedsections flag from mobileview lead request,"Fix: Remove onlyrequestedsections flag from mobileview lead request

Makes needed info for the remaining sections available for the TOC
and page editing.

Bug: T176166
Change-Id: Id09189032db43019542314bb70d9ed5f4e92a123
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505913573,1505913820,2a6b51478af93d8e24f1e54793157ab794ae6c67
2a6b51478af93d8e24f1e54793157ab794ae6c67,2a6b5147,"Merge ""Design tweak: Update size and padding of reference dialog components""","Merge ""Design tweak: Update size and padding of reference dialog components""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505762361,1505762361,"503909ce8f62b7f74efaefe1543eafcdccb37510,ed2860bf17bfe277bb6eb4b409b09a931caa6633"
503909ce8f62b7f74efaefe1543eafcdccb37510,503909ce,"Merge ""Fix lazy-loading of images for Zim articles.""","Merge ""Fix lazy-loading of images for Zim articles.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505761042,1505761042,"d20170e05881c3f29be61bfd20dd8406d294c83b,db2fb2956c780825e9d4241d8e3746b5f5bc51ea"
e0eef82f8d08053fc7f2c875114ba1e7f2e80f7e,e0eef82f,"Add ""data saving"" mode","Add ""data saving"" mode

Adds a ""prefer offline content"" preference that allows users to prefer
loading cached page content.  In data saving mode, users can refresh page
content via the pull-down action, which will force a net request; other-
wise, page content will be loaded from cache, if available in cache.

With data saving mode off (the default), page content requests will mostly
if not always involve a conditional network request.

Bug: T166596
Change-Id: I61c5560596a3ece3dbdc94c4cd89ddff626e4b74
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505155531,1505760574,d20170e05881c3f29be61bfd20dd8406d294c83b
db2fb2956c780825e9d4241d8e3746b5f5bc51ea,db2fb295,Fix lazy-loading of images for Zim articles.,"Fix lazy-loading of images for Zim articles.

(They changed the name of the CSS class that we're keying on.)

Change-Id: I3f0ba109c4313a96f882cdec2bec4a70cc415421
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505758200,1505758223,ece6a7b249497ddf6b1d14e6413c1a117d6bc8e1
ed2860bf17bfe277bb6eb4b409b09a931caa6633,ed2860bf,Design tweak: Update size and padding of reference dialog components,"Design tweak: Update size and padding of reference dialog components

Bug: T171469
Change-Id: Ibb3ad547599a73b78cf69f46178752fe83f46ba6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505411460,1505757609,ece6a7b249497ddf6b1d14e6413c1a117d6bc8e1
d20170e05881c3f29be61bfd20dd8406d294c83b,d20170e0,Description edit tutorial landscape follow-up,"Description edit tutorial landscape follow-up

Change-Id: I8999c5475f23ffe1d97687e4eccee5d24d31689a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505756216,1505756372,ece6a7b249497ddf6b1d14e6413c1a117d6bc8e1
ece6a7b249497ddf6b1d14e6413c1a117d6bc8e1,ece6a7b2,"Merge ""Onboarding: improve layout in landscape mode""","Merge ""Onboarding: improve layout in landscape mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505756133,1505756133,"cfcfafd365b1fa4dc30901ddcef7c5665a05d363,b2ab4604cba9365467a1b38a92903fb38b649397"
cfcfafd365b1fa4dc30901ddcef7c5665a05d363,cfcfafd3,"Merge ""Fix header edit button tint (once more, with feeling)""","Merge ""Fix header edit button tint (once more, with feeling)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505754067,1505754067,"8d586bfc6e1274f828a64b95984c96d93b220c15,65bcd55a7a3728244f9c3ceffb5bb948b2349377"
8d586bfc6e1274f828a64b95984c96d93b220c15,8d586bfc,"Merge ""Fix: make sure page contents are deleted from disk when deleting from list.""","Merge ""Fix: make sure page contents are deleted from disk when deleting from list.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505748927,1505748927,"0d8af7d07cd968881d951ccfc83c1da7e57b56e7,d009dd759670e5bce4fd4a61a0ffb2c6bcb53cd3"
65bcd55a7a3728244f9c3ceffb5bb948b2349377,65bcd55a,"Fix header edit button tint (once more, with feeling)","Fix header edit button tint (once more, with feeling)

Confirmed the fix on API levels 16 and 25.

Bug: T172157
Change-Id: I2d8fa75b78a2764e543857e608a6e22734f541f1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505423361,1505747800,0d8af7d07cd968881d951ccfc83c1da7e57b56e7
0d8af7d07cd968881d951ccfc83c1da7e57b56e7,0d8af7d0,"Merge ""Design tweak: update reference dialog colors""","Merge ""Design tweak: update reference dialog colors""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505747543,1505747543,"a2192ff2b4c890640bc5f0236a44b6092e87cd2d,30e6351848d047172d1c8d17a483311caffe076d"
d009dd759670e5bce4fd4a61a0ffb2c6bcb53cd3,d009dd75,Fix: make sure page contents are deleted from disk when deleting from list.,"Fix: make sure page contents are deleted from disk when deleting from list.

Bug: T164585
Change-Id: Iba700494e2870d07aafb74a503aaeaffb0363a6f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505745081,1505745081,4e114558e86fc4114eece5374cd39c6a404fec8c
a2192ff2b4c890640bc5f0236a44b6092e87cd2d,a2192ff2,"Merge ""Hygiene: remove unused translations""","Merge ""Hygiene: remove unused translations""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505744881,1505744881,"f0ebc39ce5fca9dcd52b52e3ca0ff45c22a2d0de,bab661a9126b9b1f01eaae3b06e98569ff48c156"
f0ebc39ce5fca9dcd52b52e3ca0ff45c22a2d0de,f0ebc39c,"Merge ""Update bundled style resources""","Merge ""Update bundled style resources""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505741677,1505741677,"e231b879409fc140634e4921b79b2bd455edf475,befdb9e7623eace57699f48b00ef5398824162fb"
e231b879409fc140634e4921b79b2bd455edf475,e231b879,"Merge ""Update pagelib to 4.5.11""","Merge ""Update pagelib to 4.5.11""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505741676,1505741676,"5aef5c5467559f91d63f8484244f2c8fd268714d,3825b32a58582d72cd58eac54e8da2efc8ea58c2"
5aef5c5467559f91d63f8484244f2c8fd268714d,5aef5c54,"Merge ""Lint fix: fix abuse filter container layout height""","Merge ""Lint fix: fix abuse filter container layout height""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505741100,1505741100,"8fff96cf5420cb64fcd2291d54c1aa961295e2cb,5ecc26bc2bce3ac6496cce1933ea6a362219e710"
8fff96cf5420cb64fcd2291d54c1aa961295e2cb,8fff96cf,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I97b7c2fa5443e01ac050ae269b5ca3e5127a5d98
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1505734657,1505734657,4e114558e86fc4114eece5374cd39c6a404fec8c
befdb9e7623eace57699f48b00ef5398824162fb,befdb9e7,Update bundled style resources,"Update bundled style resources

Change-Id: I4fd6c5036d3c308258402b1eca890f4caf99351b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505515001,1505515018,4e114558e86fc4114eece5374cd39c6a404fec8c
3825b32a58582d72cd58eac54e8da2efc8ea58c2,3825b32a,Update pagelib to 4.5.11,"Update pagelib to 4.5.11

Change-Id: Ia4445887585b6ccb64ebc58a64cb3901131e24ad
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505514838,1505514838,4e114558e86fc4114eece5374cd39c6a404fec8c
5ecc26bc2bce3ac6496cce1933ea6a362219e710,5ecc26bc,Lint fix: fix abuse filter container layout height,"Lint fix: fix abuse filter container layout height

Change-Id: I55fa7f34c70ce21ef1c488e7ed2dbcfe76bc6060
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505514206,1505514206,4e114558e86fc4114eece5374cd39c6a404fec8c
bab661a9126b9b1f01eaae3b06e98569ff48c156,bab661a9,Hygiene: remove unused translations,"Hygiene: remove unused translations

Some of these look awfully familiar.  It's time to figure out what sync
step isn't happening with TWN...

Change-Id: I32cd073604dcce26938ed836faeb1ef13b60ebed
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505510876,1505510876,4e114558e86fc4114eece5374cd39c6a404fec8c
4e114558e86fc4114eece5374cd39c6a404fec8c,4e114558,[COUNTERPOINT] Fix screenshot tests.,"[COUNTERPOINT] Fix screenshot tests.

Will this work?

Change-Id: If4fffd3956ee02a21d30a331e0a96b4bda700b52
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505499624,1505499624,55a0118d29ae78c4b5da34dfc15839871e7fe8ec
55a0118d29ae78c4b5da34dfc15839871e7fe8ec,55a0118d,Update: fix article subtitle drawable tint on non-current versions,"Update: fix article subtitle drawable tint on non-current versions

Bug: T172157
Change-Id: I41c8c9246bc614d9ad7f253573e998e97b8973bd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505418154,1505419613,3a4a27530d66d088527022ca70db359d2f3e093d
3a4a27530d66d088527022ca70db359d2f3e093d,3a4a2753,"Merge ""Theme reckoning: abolish ThemedActionBarActivity, and further cleanup.""","Merge ""Theme reckoning: abolish ThemedActionBarActivity, and further cleanup.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505415992,1505415992,"2d90e165c6734c2e1449b8ddf6966e373080d8c5,323339d364c5faf5bb602cbee0eb1fa7a3978a19"
30e6351848d047172d1c8d17a483311caffe076d,30e63518,Design tweak: update reference dialog colors,"Design tweak: update reference dialog colors

Bug: T171469
Change-Id: I6d74eb1aa2d321d7f859cadf4f9931aec18f49bc
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505323809,1505415907,2d90e165c6734c2e1449b8ddf6966e373080d8c5
2d90e165c6734c2e1449b8ddf6966e373080d8c5,2d90e165,"Merge ""Light vs. Dark -- the reckoning.""","Merge ""Light vs. Dark -- the reckoning.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505415159,1505415159,"9d990f33b6cefb6b030935f345ca85c252c6e96c,db4fb6fece83a7ccba37076b87f8458f25255560"
9d990f33b6cefb6b030935f345ca85c252c6e96c,9d990f33,"Merge ""Hygiene: Minor share-a-fact refactoring""","Merge ""Hygiene: Minor share-a-fact refactoring""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505414836,1505414836,"ba0e6b7f7240b542684713e1823db81585ec49cc,1c6392dc55ee17712a88b08c64ff553f830db814"
ba0e6b7f7240b542684713e1823db81585ec49cc,ba0e6b7f,"Merge ""Fix page loading issue on API 19.""","Merge ""Fix page loading issue on API 19.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505414430,1505414430,"824f4b4dc6ff3c2b22b1aa9eab96987a1c8c82f5,3a4b190f2068aa9afaa6deb1a643e2d3d393a7bf"
3a4b190f2068aa9afaa6deb1a643e2d3d393a7bf,3a4b190f,Fix page loading issue on API 19.,"Fix page loading issue on API 19.

Issue 2: When deserializing the remaining-sections response in JavaScript,
it looks like API 19 doesn't support responseType=""json"", along with
earlier APIs.  I could have sworn that this was supported on API 19 and
higher, but apparently it's only API 20 and higher.

In addition, I added a try-catch block around the json deserialization and
section rendering, so that exceptions thrown during this process don't
stop the whole JavaScript sequence from working, and instead proceed to
tell the Java layer that the page has finished loading.

Bug: T175928
Change-Id: If7759956fda6ec97b968b66cf1a55207a6ccd21a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505410170,1505413694,a833af60708bd93d5619b9101774a182415b9778
1c6392dc55ee17712a88b08c64ff553f830db814,1c6392dc,Hygiene: Minor share-a-fact refactoring,"Hygiene: Minor share-a-fact refactoring

* Make PreviewDialog a proper static inner class of ShareHandler
* Rename the 'snippet' package to 'shareafact'

Change-Id: I2f0d578109ca9fef7cfcb1db7a69f49d864790d4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505413237,1505413237,824f4b4dc6ff3c2b22b1aa9eab96987a1c8c82f5
323339d364c5faf5bb602cbee0eb1fa7a3978a19,323339d3,"Theme reckoning: abolish ThemedActionBarActivity, and further cleanup.","Theme reckoning: abolish ThemedActionBarActivity, and further cleanup.

Change-Id: I63d9d6da7109062129780b843e795068e9d0642e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1505407303,1505407504,db4fb6fece83a7ccba37076b87f8458f25255560
db4fb6fece83a7ccba37076b87f8458f25255560,db4fb6fe,Light vs. Dark -- the reckoning.,"Light vs. Dark -- the reckoning.

Note: Certain colors in the app, particularly in the Dark theme, may still
be incorrect after this patch. However, that can be left to be handled in
subsequent patches and further consolidation.

Change-Id: Ide40d4ca1b902fd899847ae64cd1ddbf60f986a3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505230728,1505407392,a833af60708bd93d5619b9101774a182415b9778
824f4b4dc6ff3c2b22b1aa9eab96987a1c8c82f5,824f4b4d,Ensure link preview overlay button text is fully opaque,"Ensure link preview overlay button text is fully opaque

Trickier than you'd think!  The alpha applied to the buttons' parent
layout was also applied to the child views, including their text; there's
no way to override this behavior.

I've worked around it here by decoupling the translucent background into
its own layout, which appears beneath the button in a FrameLayout.

Bug: T95080
Change-Id: Ia1f9ba73eeae35d70034028d654ddf4bc60e5824
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505339030,1505402826,a833af60708bd93d5619b9101774a182415b9778
a833af60708bd93d5619b9101774a182415b9778,a833af60,Hygiene: WikipediaApp cleanup,"Hygiene: WikipediaApp cleanup

* Remove methods that simply wrap other static methods; this class is long
  enough without them

* Move getters to the top

* Reorder methods by access protection level

No functional changes intended.

Change-Id: Ibc66102a1c3e6d54a6fbfb265fb308c50124d560
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505346825,1505399690,f3a45012b594129bee0cfd66c147a10f43b09db5
f3a45012b594129bee0cfd66c147a10f43b09db5,f3a45012,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505398490,1505398490,"9480646ecc220cf3b0332939e8bbe56e3a80d343,d844b49cef00ecc4840ba2b0904813cd47da587a"
9480646ecc220cf3b0332939e8bbe56e3a80d343,9480646e,"Merge ""Hygiene: Remove another unneeded API level check""","Merge ""Hygiene: Remove another unneeded API level check""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505398001,1505398002,"b56f245ded58692028d937b208abc1c76423230d,6bdbece1951421fcca2a232e297a3659dc8cd339"
b56f245ded58692028d937b208abc1c76423230d,b56f245d,"Merge ""Hygiene: remove unneeded API level check""","Merge ""Hygiene: remove unneeded API level check""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505398001,1505398001,"d5ce02f0af4f2dca0aaf0606c069279afa375c10,6f69f426a5185d6fb3e778c5a889b2f3cbce1f1d"
d5ce02f0af4f2dca0aaf0606c069279afa375c10,d5ce02f0,"Merge ""Hygiene: Remove unused method""","Merge ""Hygiene: Remove unused method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505397816,1505397816,"4c4e7a7a77d35692f466eeb1f10240271b944317,1f73bccabf301604239d0df405a68a4d90531780"
4c4e7a7a77d35692f466eeb1f10240271b944317,4c4e7a7a,"Merge ""New: Rework and freshen up onboarding tooltips.""","Merge ""New: Rework and freshen up onboarding tooltips.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505396736,1505396736,"dc6249e25f175bb75dd958f80d5c23bec1b7923e,60b67c95fb7fb553743334e18f82535441129a46"
dc6249e25f175bb75dd958f80d5c23bec1b7923e,dc6249e2,"Merge ""Design tweak: Change 'Next' button color for Light and Dark modes""","Merge ""Design tweak: Change 'Next' button color for Light and Dark modes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505395198,1505395198,"4184158997e3f8305b89e035389530278ce5e2fd,f5927e96170dddf6f3d636a72b11d76b4826e40e"
d844b49cef00ecc4840ba2b0904813cd47da587a,d844b49c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Icf30f9ae90f0b22e0e6bed2446bf6504f05b68b3
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1505367398,1505367398,4184158997e3f8305b89e035389530278ce5e2fd
6bdbece1951421fcca2a232e297a3659dc8cd339,6bdbece1,Hygiene: Remove another unneeded API level check,"Hygiene: Remove another unneeded API level check

No need to fall back in the case of API levels we no longer support.

Change-Id: I4a4200c3b9642717b1ff358da3618d9874a4443c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505349546,1505349735,6f69f426a5185d6fb3e778c5a889b2f3cbce1f1d
6f69f426a5185d6fb3e778c5a889b2f3cbce1f1d,6f69f426,Hygiene: remove unneeded API level check,"Hygiene: remove unneeded API level check

No need to check for API 16 since it's the lowest version we currently
support. Removes the whole utility method and replaces it with direct
platform method calls.

Change-Id: I8b32e317fba6599dd680b8a067b270fae09675f1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505349138,1505349368,6a1eecb842cbcac8230e81ef29c14b3170c72131
1f73bccabf301604239d0df405a68a4d90531780,1f73bcca,Hygiene: Remove unused method,"Hygiene: Remove unused method

Change-Id: Id6631e4aeb7d1857d93c0486d475719ffd7c00ac
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505347504,1505347504,6a1eecb842cbcac8230e81ef29c14b3170c72131
4184158997e3f8305b89e035389530278ce5e2fd,41841589,Revert dev build language randomization,"Revert dev build language randomization

A worthy experiment, but one whose time has passed.

Reverts Id86349d230b521ddc56e9f1c21d0a57b25bc210a.

Change-Id: I368df6c751a57da7860c53759b934d9e3a8ee842
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505345351,1505345351,6a1eecb842cbcac8230e81ef29c14b3170c72131
f5927e96170dddf6f3d636a72b11d76b4826e40e,f5927e96,Design tweak: Change 'Next' button color for Light and Dark modes,"Design tweak: Change 'Next' button color for Light and Dark modes

Change Next button color from the outdated teal color to Accent50 (Light mode) and Accent75 (Dark mode).

Bug: T175674
Change-Id: I8302758ffa38bb764ab9417032912aca2632adf6
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1505332589,1505338351,6a1eecb842cbcac8230e81ef29c14b3170c72131
6a1eecb842cbcac8230e81ef29c14b3170c72131,6a1eecb8,"Merge ""Add App Shortcuts feature In this update:  1. Add app shortcuts feature…","Merge ""Add App Shortcuts feature In this update:  1. Add app shortcuts feature for Android 7.1 or higher  2. Created three icons with circled background  3. Setup pinned shortcuts feature when open the app, and pinned shortcuts will be created dynamically""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505326184,1505326184,"140b002aec114f1e66b55036e2c5574e0281094c,33ccf6c53f66d515ff9b20b373bd7edb9ad2b72e"
33ccf6c53f66d515ff9b20b373bd7edb9ad2b72e,33ccf6c5,Add App Shortcuts feature,"Add App Shortcuts feature
In this update:
 1. Add app shortcuts feature for Android 7.1 or higher
 2. Created three icons with circled background
 3. Setup pinned shortcuts feature when open the app, and pinned shortcuts will be created dynamically

Some places might need to be updated in future patches:
 1. App icon image width and height?
 2. Should ""Random"" get a article from the offline compilation?
 3. Should we show a message when click on ""Continue reading"" if no article has been read?

Bug: T174308
Change-Id: I812843aa1d5796aae6e85e38ca75cf1bbb778b61
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1504914213,1505324600,25a7c2abb8fd6f8dc590835d4cadbfcf7c41654b
60b67c95fb7fb553743334e18f82535441129a46,60b67c95,New: Rework and freshen up onboarding tooltips.,"New: Rework and freshen up onboarding tooltips.

Here's what happened:
I noticed a crash that happens when long-pressing any of the buttons in
our toolbars, and started investigating the cause.

The newest Support library was updated internally where it now contains a
layout called ""layout/tooltip"", which it uses to render popup tooltips
when long-pressing buttons (to show the hint for the button).

However, we actually have a layout called ""layout/tooltip"" ourselves! This
means that the Support library will actually get our version of the layout
for rendering its tooltip, and of course our layout doesn't contain the
elements that the library expects.

Now, the reason we have this layout is actually to override the tooltip
layout used by the Tooltip library that we depend on. Yes, this library
also expects to find a layout called ""layout/tooltip"", and we ""override""
it so that we can tweak the shape of the tooltip.  So, even if we remove
our overridden tooltip layout, the layout in the Tooltip library will
still conflict with the Support library's version.

Well, guess what: the Support library wins, which means that we need to
find a new library for showing tooltips.

Fortunately, there is now a mature-enough library that implements the
Material-style onboarding reveal, which is a circular overlay that
highlights the desired tap target.

This patch rips out the old library and plugs in the new one.

Change-Id: Iac12d31df1e0f9dbae70bd2f8f0c6cf61900489b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505272132,1505318729,140b002aec114f1e66b55036e2c5574e0281094c
140b002aec114f1e66b55036e2c5574e0281094c,140b002a,"Merge ""Fix: Always ask for Write permission, not Read. (crash on Oreo)""","Merge ""Fix: Always ask for Write permission, not Read. (crash on Oreo)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505316143,1505316143,"f36febcbf654d36abb79e151f833571eecf6cd05,568c38181604e9dc946ca8f6453e10a3dc35a49c"
568c38181604e9dc946ca8f6453e10a3dc35a49c,568c3818,"Fix: Always ask for Write permission, not Read. (crash on Oreo)","Fix: Always ask for Write permission, not Read. (crash on Oreo)

When navigating to our LocalCompilations screen, we ask for permission to
READ external storage, so that it can scan the device for existing packs.

But the thing is, when the user wants to download a new pack, we actually
need the WRITE permission, so that the pack can be written to storage.
Older versions of Android don't really make the distinction between the
READ and WRITE permissions, but Oreo is actually starting to enforce this
distinction, and crashes if you try to write to the storage without the
explicit WRITE permission.

So, rather than asking for the WRITE permission separately (after having
already asked for the READ permission), let's just ask for the WRITE
permission in the first place, which will implicitly grant the READ
permission anyway, so that the user only has to deal with one permission
popup dialog.

Bug: T175580
Change-Id: Idc22de0c6c6208c70c05e9b26f1c62522c4aa436
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505314045,1505314045,aa670e46187045754064f6f99c460158aed555b9
f36febcbf654d36abb79e151f833571eecf6cd05,f36febcb,"Merge ""Hygiene: Remove unused resources""","Merge ""Hygiene: Remove unused resources""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505313902,1505313902,"9fa430ebdc9ef02c9358c12cce8210d5115ed58b,62ec7177e36d914545fb5f36d4acff86e5d7ec80"
9fa430ebdc9ef02c9358c12cce8210d5115ed58b,9fa430eb,"Merge ""Explicitly make offline pack available immediately upon finishing download.""","Merge ""Explicitly make offline pack available immediately upon finishing download.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505313901,1505313901,"db6830edf9388c78035050f04f3350ffbb692716,916433efe1a2b5a4c45a3220594fef65f9a1e533"
db6830edf9388c78035050f04f3350ffbb692716,db6830ed,"Merge ""Correctly handle links with non-http schemes.""","Merge ""Correctly handle links with non-http schemes.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505313450,1505313450,"e859941fad8ddce437eed6c95ae8fb54060031c2,5bd8790917504711b10dd23e12b5d149cf7b6e9b"
e859941fad8ddce437eed6c95ae8fb54060031c2,e859941f,"Merge ""Fix lazy-loading of images upon first render.""","Merge ""Fix lazy-loading of images upon first render.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505313170,1505313170,"2447bedae566c31f251fccbc4e80e5b9ac99ab61,ed2fc8528e88f1e55aa7082932b326a95bd50238"
916433efe1a2b5a4c45a3220594fef65f9a1e533,916433ef,Explicitly make offline pack available immediately upon finishing download.,"Explicitly make offline pack available immediately upon finishing download.

The problem was that if the user goes to the Detail screen of a pack, then
starts downloading it, and *remains* on the detail screen until the pack
finishes downloading it, then the OfflineManager still doesn't actually
""know"" about the new pack. (The OfflineManager only refreshes its
knowledge of existing packs when the user navigates back to the
LocalCompilations screen.)

This prevents the user from being able to click the ""Main Page"" button to
go to the main page of the compilation.

This patch explicitly pokes the newly-downloaded compilation into the
OfflineManager when we detect that the download has finished.

Bug: T175581
Change-Id: Ia4eab16e5ed6c19b65460e0bf291ac5e079b0ee5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505312342,1505312342,aa670e46187045754064f6f99c460158aed555b9
62ec7177e36d914545fb5f36d4acff86e5d7ec80,62ec7177,Hygiene: Remove unused resources,"Hygiene: Remove unused resources

Change-Id: Id05b186966b6c8582631fc78c5b8d60963b58623
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505312024,1505312024,25a7c2abb8fd6f8dc590835d4cadbfcf7c41654b
5bd8790917504711b10dd23e12b5d149cf7b6e9b,5bd87909,Correctly handle links with non-http schemes.,"Correctly handle links with non-http schemes.

This fixes a couple of issues:
- URLs with a scheme that wasn't ""http"" or ""https"" were being incorrectly
  rewritten with a prefix of ""http://wp...""
- When querying intents for the activity chooser that handles external
  links, we were incorrectly querying intents for the ""http"" scheme. This
  fixes the querying to use the scheme specified in the original Uri.

Bug: T175586
Change-Id: I299d9093639ef61ea0401b2d1e475cd5af1df3cf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505310427,1505310427,aa670e46187045754064f6f99c460158aed555b9
ed2fc8528e88f1e55aa7082932b326a95bd50238,ed2fc852,Fix lazy-loading of images upon first render.,"Fix lazy-loading of images upon first render.

An explicit call to loadPlaceholders() got lost during the upgrade to use
XHR for loading the remaining sections.

Bug: T175579
Change-Id: I9cfbbeda8339e25f3020f3752040c83869fd3ee0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505309116,1505309116,aa670e46187045754064f6f99c460158aed555b9
2447bedae566c31f251fccbc4e80e5b9ac99ab61,2447beda,"Merge ""Design tweak: Update ToC header text color""","Merge ""Design tweak: Update ToC header text color""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505303882,1505303882,"b8550987957da2ecf3e516d68a583638f38aa2fb,19547d44b36936c9de08385952c6f5c660e8f129"
b8550987957da2ecf3e516d68a583638f38aa2fb,b8550987,"Merge ""Design tweak: update header edit button tint""","Merge ""Design tweak: update header edit button tint""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505303860,1505303860,"3ff8143a81727783b5df5033c4fa7545f80b6515,f4430227bb87444d97ebfc9e023a0f8c92692d22"
3ff8143a81727783b5df5033c4fa7545f80b6515,3ff8143a,Remove unnecessary layered drawable from page toolbar.,"Remove unnecessary layered drawable from page toolbar.

Change-Id: I9bc71b15eab485da3f59c1b892929e9a6b294bee
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1505138088,1505231724,aa670e46187045754064f6f99c460158aed555b9
aa670e46187045754064f6f99c460158aed555b9,aa670e46,"Merge ""UX: Consolidate Light and Dark modes""","Merge ""UX: Consolidate Light and Dark modes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505231274,1505231274,"295076278ef0692bd4467ba66d1bd914141ebd24,bfc47e63061b311442bd727e3e768368e5e78a63"
bfc47e63061b311442bd727e3e768368e5e78a63,bfc47e63,UX: Consolidate Light and Dark modes,"UX: Consolidate Light and Dark modes

-Consolidating expected Light and Dark mode colors will be done in multiple commits.
-This is the first of many commits, and removes usage of duplicate color variables in colors.xml

Bug: T172984
Change-Id: I59049aa64a56a6e41e30b76fa3051dd43d4f1a84
",,,,sharvani,sharan@wikimedia.org,sharvani,sharan@wikimedia.org,1504901537,1505230290,5c8c681452a63599131ec1535d6bf27bba892170
295076278ef0692bd4467ba66d1bd914141ebd24,29507627,"Merge ""Fix Chinese summary tags show in English""","Merge ""Fix Chinese summary tags show in English""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505228830,1505228830,"e252133caddf3abca62c25de4387cb5bc0e1afb9,83bac3861e82c6c8eedf01c21d787149c5577ee0"
e252133caddf3abca62c25de4387cb5bc0e1afb9,e252133c,"Merge ""Remove reading list sync call from MainFragment.onCreateView""","Merge ""Remove reading list sync call from MainFragment.onCreateView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505225001,1505225001,"ef5e2fe85a7db8b4f0e17c8abfcca57030cfc87a,5c99047b44b80550c8f023b9adb19b246cb5eff1"
83bac3861e82c6c8eedf01c21d787149c5577ee0,83bac386,Fix Chinese summary tags show in English,"Fix Chinese summary tags show in English

In this update:
 - Replace with L10nUtil.setDesiredLocale() to get correct Chinese tags.
 - Change L10nUtil.setDesiredLocale to public

Bug: T174709
Change-Id: I6eeafa835f40a75e22aeeab1ecbd2411f210639e
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1505168444,1505168444,ef5e2fe85a7db8b4f0e17c8abfcca57030cfc87a
ef5e2fe85a7db8b4f0e17c8abfcca57030cfc87a,ef5e2fe8,Hygiene: Remove unused method,"Hygiene: Remove unused method

Change-Id: If55086ad753585d4ce3f189678d812456319e9de
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505166387,1505166387,25a7c2abb8fd6f8dc590835d4cadbfcf7c41654b
f4430227bb87444d97ebfc9e023a0f8c92692d22,f4430227,Design tweak: update header edit button tint,"Design tweak: update header edit button tint

Bug: T172157
Change-Id: Id27761669b9aad340b0e83e94d7600cd85dd7d69
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505166004,1505166004,8c74e855801629a944a3973905cad49a36e7d8df
19547d44b36936c9de08385952c6f5c660e8f129,19547d44,Design tweak: Update ToC header text color,"Design tweak: Update ToC header text color

Bonus: various ToC cleanup

Bug: T172157
Change-Id: I7e5aee755451af2727f4f21e7cda148402c8e4fd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1505161799,1505161799,8c74e855801629a944a3973905cad49a36e7d8df
5c99047b44b80550c8f023b9adb19b246cb5eff1,5c99047b,Remove reading list sync call from MainFragment.onCreateView,"Remove reading list sync call from MainFragment.onCreateView

This results in syncing reading lists on every page view, which is
unnecessary and overly aggressive.  Move it to FeedFragment.onCreateView
instead.

Change-Id: Ie789436cd0f784af09794c051b077e1678a48dd1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504906295,1505157243,8c74e855801629a944a3973905cad49a36e7d8df
25a7c2abb8fd6f8dc590835d4cadbfcf7c41654b,25a7c2ab,Dev: Add setting to suppress notification polling,"Dev: Add setting to suppress notification polling

Useful for reducing noise when debugging network requests

Change-Id: If590383ec543dd869fe5cb692aaf077205dfc163
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504904406,1505155604,8c74e855801629a944a3973905cad49a36e7d8df
8c74e855801629a944a3973905cad49a36e7d8df,8c74e855,"Merge ""Use more appropriate butterknife annotation for image dimming switch.""","Merge ""Use more appropriate butterknife annotation for image dimming switch.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505146619,1505146619,"e1553e89fa713ba903c981678eff30008fc46a2b,3fc4316ee29508b3f4afb9a8d079421321564c2d"
3fc4316ee29508b3f4afb9a8d079421321564c2d,3fc4316e,Use more appropriate butterknife annotation for image dimming switch.,"Use more appropriate butterknife annotation for image dimming switch.

Change-Id: I8dd1c4ca97cb1417947d46f9ef4ed5bbfc69edec
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505138340,1505138340,42f5003727a402ee62f3596ef60126204c77f3c0
e1553e89fa713ba903c981678eff30008fc46a2b,e1553e89,"Merge ""Also show offline snackbar when downloading via overflow menu.""","Merge ""Also show offline snackbar when downloading via overflow menu.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505138271,1505138271,"d882a36bd5233e7f1a1c97d77d7eb6d09b2cf5c6,999d1679ed5ff407c14fb4883f3545c4405bf9b6"
d882a36bd5233e7f1a1c97d77d7eb6d09b2cf5c6,d882a36b,"Merge ""Show message when user attempts to download an article pack while offline""","Merge ""Show message when user attempts to download an article pack while offline""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1505137789,1505137789,"42f5003727a402ee62f3596ef60126204c77f3c0,6e3920554e58e8809f5cc24c30042c8a3458ef51"
999d1679ed5ff407c14fb4883f3545c4405bf9b6,999d1679,Also show offline snackbar when downloading via overflow menu.,"Also show offline snackbar when downloading via overflow menu.

Change-Id: Iaf721df25d3c579d733103517eedbbb179851d33
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1505137472,1505137472,6e3920554e58e8809f5cc24c30042c8a3458ef51
42f5003727a402ee62f3596ef60126204c77f3c0,42f50037,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Iac11af6c444de7214522df75d5be576518b4f11b
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1505108052,1505108052,5c8c681452a63599131ec1535d6bf27bba892170
6e3920554e58e8809f5cc24c30042c8a3458ef51,6e392055,Show message when user attempts to download an article pack while offline,"Show message when user attempts to download an article pack while offline

Bug: T172881
Change-Id: I3fd34c9fe8b286a72ef6d9f4e4405889c794aa36
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504891999,1504891999,5c8c681452a63599131ec1535d6bf27bba892170
5c8c681452a63599131ec1535d6bf27bba892170,5c8c6814,"Merge ""Don't fetch wiki-specific user id unnecessarily.""","Merge ""Don't fetch wiki-specific user id unnecessarily.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504888374,1504888374,"bbb794e54b3f815dd719e9a4290c0ffa7f9d70eb,f97c9f3153b59fc1ea38c20f8542831af35fde65"
f97c9f3153b59fc1ea38c20f8542831af35fde65,f97c9f31,Don't fetch wiki-specific user id unnecessarily.,"Don't fetch wiki-specific user id unnecessarily.

We were trying to fetch the id unconditionally, even when there's no user
logged in.

Change-Id: Ic00e00b197f090edb3762267c446cff4c6968add
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504887023,1504887215,8d823c8c7b3acad8728ea7797825035185b89c6e
bbb794e54b3f815dd719e9a4290c0ffa7f9d70eb,bbb794e5,Stop syncing theme and font size preferences across devices,"Stop syncing theme and font size preferences across devices

Syncing these options was a way of proving the concept of syncing
preferences with userjs.  It works!  However, these options are pretty
device-specific and don't make a lot of sense to sync.

This patch removes syncing for these preferences, but leaves the
underlying user option syncing infrastructure in place.

Change-Id: I622cc26d26571924f1ff207f7dfcf83c19918a95
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504881731,1504882041,8d823c8c7b3acad8728ea7797825035185b89c6e
8d823c8c7b3acad8728ea7797825035185b89c6e,8d823c8c,"Merge ""Fix fetching mobileview sections via XHR (viz. Chinese)""","Merge ""Fix fetching mobileview sections via XHR (viz. Chinese)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504879633,1504879633,"4de514f441cf2c64b09c9e490bab40e2efff999b,31274fcf6d8bdd962385a2dd5b91d5866c8653f6"
31274fcf6d8bdd962385a2dd5b91d5866c8653f6,31274fcf,Fix fetching mobileview sections via XHR (viz. Chinese),"Fix fetching mobileview sections via XHR (viz. Chinese)

Shockingly, when making the XHR patch, I forgot to take into account that
the incoming response might be a `mobileview` response, versus a restbase
response. The two are slightly different, with a restbase response having
the ""sections"" object at the top level, while a mobileview response has
""sections"" wrapped in a top level ""mobileview"" object.

Change-Id: I923646de6dbf247159a5ee79d1678d99f61dc6e4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504876268,1504876268,2841f14230fe7847fef6aae1d230d87b9bf5bd0e
4de514f441cf2c64b09c9e490bab40e2efff999b,4de514f4,Clean up new setDesiredLocale,"Clean up new setDesiredLocale

I was a bit quick on the draw merging If50de9da: Dmitry is right that
we should avoid recursing in setDesiredLocale.  With our current language
variant handling this shouldn't result in an infinite recursion, but it
could leave us open if things change, and in any case there's no real
benefit I can see to recursing here.

Change-Id: I313294085a489b560a4a585460247af9ecd07651
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504831148,1504831577,2841f14230fe7847fef6aae1d230d87b9bf5bd0e
2841f14230fe7847fef6aae1d230d87b9bf5bd0e,2841f142,"Merge ""Fix texts in article page show English instead of Chinese""","Merge ""Fix texts in article page show English instead of Chinese""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504830436,1504830436,"4680a3a6338b59c71b7d8d261beb467c27a97dcf,fcb2b762af2ee56f75dced17f89eba5e39906bda"
4680a3a6338b59c71b7d8d261beb467c27a97dcf,4680a3a6,"Merge ""Tweak design of theme chooser image dimming switch""","Merge ""Tweak design of theme chooser image dimming switch""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504807368,1504807368,"2e6639f49a37af9bce10a5bb860e75af7fd34f1e,889eb9ebfde15378492a50a629664a070856c1a4"
2e6639f49a37af9bce10a5bb860e75af7fd34f1e,2e6639f4,API 26 follow-up,"API 26 follow-up

The password repeat is always shown, so no need to check.

Change-Id: I544407e6083dce217517e9e1ab87d71942aa750b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504805218,1504805254,66b6178a613c0dee7d7e526efcc495105aa047b5
66b6178a613c0dee7d7e526efcc495105aa047b5,66b6178a,"Merge ""Upgrade to API 26.""","Merge ""Upgrade to API 26.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504804993,1504804993,"659fde91a3c84c5aafa4934eb1b6c8e3a013629a,e03b67ebc5797f0af01edc96e18931be45337198"
e03b67ebc5797f0af01edc96e18931be45337198,e03b67eb,Upgrade to API 26.,"Upgrade to API 26.

This updates the build tools, compile SDK, target SDK, and Support library
version to 26.  Here is a list of breaking changes, in order of least to
greatest annoyance:

- We now need to specify ""jumboMode=true"" in our dexOptions. Although our
  method count is still below 65536, our number of strings now exceeds
  this number, which is the reason for this flag. Fortunately this seems
  to play well with older APIs, with no further changes needed.
- The support:percent package has been deprecated, in favor of using
  ConstraintLayout. We were using PercentLayout in only one place, and
  rather frivolously. Rather than a full switch to ConstraintLayout right
  now, I just removed PercentLayout and replaced it with a good-enough
  FrameLayout equivalent.
- The TextInputLayout class no longer exposes an event that lets us
  determine when the password-visibility button is toggled. There seems to
  be literally no other way to get this event. Therefore, for now, I've
  simply removed our custom PasswordTextInput view altogether. This
  is actually consistent with the Google account creation workflow, where
  the ""password"" and ""repeat password"" fields are independent from each
  other, and are both flippable to show/hide the password.

Bug: T171598
Change-Id: I700f197faa935a5459dc0fc73481baefb7afb7e2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504015766,1504803795,b6b529d1e26bf658faf0a2c8fa0e7879a449b4c6
659fde91a3c84c5aafa4934eb1b6c8e3a013629a,659fde91,"Merge ""Blast remaining page content directly into WebView by using XHR.""","Merge ""Blast remaining page content directly into WebView by using XHR.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504801472,1504801472,"6174567516610f604c320190845421ee05a16d29,fd51735868be4cfbe92e02176f650925caedbfff"
889eb9ebfde15378492a50a629664a070856c1a4,889eb9eb,Tweak design of theme chooser image dimming switch,"Tweak design of theme chooser image dimming switch

Per T172897#3583546

Bug: T172897
Change-Id: I2d1d4a971f7333a2cd45c4f51f449ceba5f21cc6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504794439,1504796428,dae94a68c9893a04d35c40fbf2cf32dd57757554
6174567516610f604c320190845421ee05a16d29,61745675,"Merge ""Fix a grave omission in list of contributors.""","Merge ""Fix a grave omission in list of contributors.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504791112,1504791112,"5fe7535576514fcec7c4892736ef4cf2a078db1b,f6439e0f96eb56fbfe5c0751518eab39082ac073"
b2ab4604cba9365467a1b38a92903fb38b649397,b2ab4604,Onboarding: improve layout in landscape mode,"Onboarding: improve layout in landscape mode

This centers the description text in landscape mode and tries
to avoid the image from overlapping the bottom control.

Bug: T174561
Change-Id: If4024285f180d2c07c8b0be91676653beade1410
",,,,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,1504722907,1504790721,bf9d15dbfd917e4105dc4df3a4a08b02706c3177
f6439e0f96eb56fbfe5c0751518eab39082ac073,f6439e0f,Fix a grave omission in list of contributors.,"Fix a grave omission in list of contributors.

Change-Id: Ie38b4fe3f1ae77c8afe9c4fe52abed69072c046f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504790585,1504790585,dae94a68c9893a04d35c40fbf2cf32dd57757554
5fe7535576514fcec7c4892736ef4cf2a078db1b,5fe75355,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ifb29039d22c1a80054063c12d2061d554c102540
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1504763512,1504763512,dae94a68c9893a04d35c40fbf2cf32dd57757554
dae94a68c9893a04d35c40fbf2cf32dd57757554,dae94a68,Kill upside-down rotation,"Kill upside-down rotation

Departs from the norm, has no obvious benefit, causes bugs and complaints.

Bug: T171322
Change-Id: I13efdb42e1d3bd1ff4161b76b9f70c6f30c84ab4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504732535,1504732535,304d6c73770a52516ded54694bd949d0e40927eb
304d6c73770a52516ded54694bd949d0e40927eb,304d6c73,Hygiene: Blacklist description editing for both Chinese language variants,"Hygiene: Blacklist description editing for both Chinese language variants

Only currently blacklisted for traditional Chinese; presumably an
oversight.

Change-Id: I5bf650a8da262bfbe84d5b7caa1b7e570d6f9d0a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504723549,1504723549,b0708190bdbb4d83481243a55c1d3cee70f8b090
b0708190bdbb4d83481243a55c1d3cee70f8b090,b0708190,Add intent-filter for Zim files.,"Add intent-filter for Zim files.

This allows the app to be launched (and land on the Offline Library screen)
when the user taps the DownloadManager notification after it has completed
downloading. It also allows the app to be launched if a Zim file is
clicked from an external application, e.g. a file manager app.

Bug: T172860
Change-Id: Ibafe8fa0c3a5c396b2361c312637949e2a4733ff
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504718231,1504718231,bf9d15dbfd917e4105dc4df3a4a08b02706c3177
fd51735868be4cfbe92e02176f650925caedbfff,fd517358,Blast remaining page content directly into WebView by using XHR.,"Blast remaining page content directly into WebView by using XHR.

This changes the way we load the ""remaining"" sections of an article in a
major way.  Previously, here's how the page would be loaded:

- Fetch the lead section of the article from the network.
- Send the lead section to the WebView over the Bridge (so that the user
  can start reading it right away).
- Fetch the remaining sections from the network, and deserialize them into
  POJO Page and Section objects.
- For each remaining section, reserialize it into a JSONObject and send it
  to the WebView over the Bridge (and await a handshake from the WebView
  before sending the next section)

And here's the new way of loading a page:

- Fetch the lead section and send it to the WebView, like before.
- Tell the WebView the URL from which it will retrieve the remaining
  sections.
- The WebView proceeds to send an XmlHTTPRequest, and receives the
  remaining sections directly as a big JSON object.

The benefits of this are as follows:

- It requires a lot less memory on the Java side than before, since we no
  longer have to deserialize the remaining response and store it in memory
  for the lifetime of the page.  Instead, we can now store only a
  ""skeleton"" version of the Page object (as built from the Lead response)
  for the purpose of building the table of contents.
- It uses fewer CPU cycles than before, since we no longer have to
  deserialize the remaining response, then re-serialize it to a JSONObject
  for sending over the Bridge.
- It reduces huge allocation spikes when serializing and sending data
  across the Bridge, thereby reducing the chance of OutOfMemory errors.
- Loading a page is several times faster than before.

Bug: T89831
Change-Id: I63c19cb015da9d8d199d08656acaf97ff4974d3f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1494021335,1504712695,bf9d15dbfd917e4105dc4df3a4a08b02706c3177
bf9d15dbfd917e4105dc4df3a4a08b02706c3177,bf9d15db,Update ZIM library to latest version.,"Update ZIM library to latest version.

This update to the zimdroid library features improvements in searching the
ZIM file's index by using the requested title or URL, plus the expected
namespace of the data item. (""namespace"" in the sense of ZIM namespaces,
not Wikipedia namespaces.)

This fixes some edge cases that have been recently observed when trying to
fetch certain article titles, and also when trying to search in certain
character sets.

Bug: T175035
Bug: T175039
Change-Id: I3b0b9aced253f8e7452322fab16224845651492a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504640825,1504641778,6e272fee476d7f016c0bc8c620f5d307bf61f1c4
fcb2b762af2ee56f75dced17f89eba5e39906bda,fcb2b762,Fix texts in article page show English instead of Chinese,"Fix texts in article page show English instead of Chinese

In this update
  - Add a method to detect the language code from API, and setLocale directly if it is in ""zh"" variant

Bug: T162398
Change-Id: If50de9da3a933f5546f314e4c2558cc92f2f26a1
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1504302129,1504641636,6e272fee476d7f016c0bc8c620f5d307bf61f1c4
6e272fee476d7f016c0bc8c620f5d307bf61f1c4,6e272fee,"Merge ""Improve fetching of Main Page title from packs.""","Merge ""Improve fetching of Main Page title from packs.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504632299,1504632299,"d8e86f29d07994a759dad370f8afc6f2540d5c28,f6aca6160a477ad621131e67696efcf35d710317"
d8e86f29d07994a759dad370f8afc6f2540d5c28,d8e86f29,"Merge ""Tweak verbiage of dark ""mode"" vs. ""theme"".""","Merge ""Tweak verbiage of dark ""mode"" vs. ""theme"".""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504630004,1504630004,"71dc14bbe5aecc41515b65754309b7266bc98f86,8f4b1bd6989e297ab42a8f3eb0e4ac71328de3f6"
f6aca6160a477ad621131e67696efcf35d710317,f6aca616,Improve fetching of Main Page title from packs.,"Improve fetching of Main Page title from packs.

Bug: T175032
Change-Id: I321346f642adb903caec43c65a11678f9d260800
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504629878,1504629878,ef20a50c3a978a7c91eabdf036951c652f15bcfc
71dc14bbe5aecc41515b65754309b7266bc98f86,71dc14bb,"Merge ""Hygiene: Update theme chooser related names""","Merge ""Hygiene: Update theme chooser related names""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504629228,1504629228,"7f72aa1e26a2b8e75a6148125b3d26109f698875,0c9f32172beffb21df99771ec1a40831a3b4bc70"
7f72aa1e26a2b8e75a6148125b3d26109f698875,7f72aa1e,"Merge ""Make image dimming optional, pt. 2""","Merge ""Make image dimming optional, pt. 2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504628962,1504628963,"df4474215c9f9e3255a213552d85ac1dda3d2ad1,ca6e10a64123a822489c5eb3e1f283b3524418ee"
df4474215c9f9e3255a213552d85ac1dda3d2ad1,df447421,"Merge ""Make image dimming optional, pt. 1""","Merge ""Make image dimming optional, pt. 1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504628445,1504628445,"d2a5594c8d6264d4863cb66d4b13a5755e91c917,849195da7655ea4e8e9d02460ed3db903921d186"
8f4b1bd6989e297ab42a8f3eb0e4ac71328de3f6,8f4b1bd6,"Tweak verbiage of dark ""mode"" vs. ""theme"".","Tweak verbiage of dark ""mode"" vs. ""theme"".

When looking at the app settings, it's a bit inconsistent to see a
preference called ""Dark *theme*"", followed immediately by a preference
called ""Dim images in dark *mode*"". Let's make both of these say ""theme"".

Change-Id: I7323ecf201c9f08f5e879f5ade89d26c89e24f76
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504628099,1504628261,0c9f32172beffb21df99771ec1a40831a3b4bc70
d2a5594c8d6264d4863cb66d4b13a5755e91c917,d2a5594c,"Merge ""[Facepalm] Update AddToReadingListDialog to remove hardcoded strings""","Merge ""[Facepalm] Update AddToReadingListDialog to remove hardcoded strings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504627729,1504627729,"b674ee15aabfd12c46c40fee786825dc1f82e7a2,cd3ea9f01b1d248f5ef72f86f9c409d82fdadf80"
b674ee15aabfd12c46c40fee786825dc1f82e7a2,b674ee15,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504627444,1504627444,"b3d022584a9cc7f5c11daf21b87dde96d82b8f39,6cc8b20cf5855696b3f3ecc9420e536571319894"
b3d022584a9cc7f5c11daf21b87dde96d82b8f39,b3d02258,"Merge ""Hygiene: Clear DefaultLocale lint warnings""","Merge ""Hygiene: Clear DefaultLocale lint warnings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504625662,1504625662,"ece5de498501f82897ae33b3927ea4905d41e7d0,c1b48fcd848406b646b894217d5561a323eae3ca"
6cc8b20cf5855696b3f3ecc9420e536571319894,6cc8b20c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: If0f9a1291f348098d6bee1734f8da35b50f70762
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1504509715,1504625060,ef20a50c3a978a7c91eabdf036951c652f15bcfc
ece5de498501f82897ae33b3927ea4905d41e7d0,ece5de49,Add ctrl-F and F3 functionality for physical keyboard users,"Add ctrl-F and F3 functionality for physical keyboard users

ctrl-F is a fairly ubiquitous keyboard shortcut. F3 is used
in Chrome as well, and would be useful for those with
limited mobility in their hands, or children with small
hands.

Change-Id: I74cb6c8ba551c10b86f567f79b9aa28ea3cd0957
",,,,austin,austin.m.oneil@gmail.com,Dmitry Brant,dbrant@wikimedia.org,1500946181,1504623040,ef20a50c3a978a7c91eabdf036951c652f15bcfc
c1b48fcd848406b646b894217d5561a323eae3ca,c1b48fcd,Hygiene: Clear DefaultLocale lint warnings,"Hygiene: Clear DefaultLocale lint warnings

Change-Id: Ib38f7dd389181523d1bd08051d68d6992ea57f05
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504304985,1504304985,ef20a50c3a978a7c91eabdf036951c652f15bcfc
cd3ea9f01b1d248f5ef72f86f9c409d82fdadf80,cd3ea9f0,[Facepalm] Update AddToReadingListDialog to remove hardcoded strings,"[Facepalm] Update AddToReadingListDialog to remove hardcoded strings

Somehow these made it onto master...

Also, remove a class of test that one of the new string resources breaks
from master.  The tests are nonsensical because they assume that ordinals
in format string parameters mean the parameters are all for the same data
type; it doesn't.

Change-Id: I1529b25df25c68b52526b45d2331b9a7a0bc96bd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504303411,1504303411,ef20a50c3a978a7c91eabdf036951c652f15bcfc
ef20a50c3a978a7c91eabdf036951c652f15bcfc,ef20a50c,"Merge ""Hygiene: Remove unused resources""","Merge ""Hygiene: Remove unused resources""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504301161,1504301161,"3c7c2878102c6162487c6c5a403319516114a8a3,d4e263a5137cd184cf1d68424f7f3107d1386dea"
d4e263a5137cd184cf1d68424f7f3107d1386dea,d4e263a5,Hygiene: Remove unused resources,"Hygiene: Remove unused resources

Found with ./gradlew lintDevDebug

Change-Id: I9f055c64257315f19e5ff0bf29c6f62e8c1f45aa
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504300476,1504300489,b6b529d1e26bf658faf0a2c8fa0e7879a449b4c6
3c7c2878102c6162487c6c5a403319516114a8a3,3c7c2878,Fix fling scrolling in Compilations and Reading List fragments.,"Fix fling scrolling in Compilations and Reading List fragments.

This seems to be an issue with using a NestedScrollView alongside the
CollapsingToolbarLayout. Going forward, let's discourage the usage of
NestedScrollView in these contexts, and instead favor usage of a
non-nested RecyclerView with a height of wrap_content.

Bug: T173108
Change-Id: I05b54018204aac677839bf4932506532897714e4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504295485,1504295485,b6b529d1e26bf658faf0a2c8fa0e7879a449b4c6
0c9f32172beffb21df99771ec1a40831a3b4bc70,0c9f3217,Hygiene: Update theme chooser related names,"Hygiene: Update theme chooser related names

Renamed DarkModeMarshaller to DarkModeSwitch because it primarily concerns
theming controls and only incidentally marshals JSON.

Moved it from org.wikipedia.bridge to org.wikipedia.theme because it only
needs the JS bridge as an implementation detail.

Updated the name of R.layout.dialog_theme_chooser.

Change-Id: If7f2f4b3dc1e520cd4c0c303e81ff35a342220b4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504278083,1504279084,ca6e10a64123a822489c5eb3e1f283b3524418ee
ca6e10a64123a822489c5eb3e1f283b3524418ee,ca6e10a6,"Make image dimming optional, pt. 2","Make image dimming optional, pt. 2

Adds an image dimming switch to the theme chooser dialog.

Hygiene: buttered up and cleaned up ThemeChooserDialog.java and its XML
layout.

Bug: T172897
Change-Id: I8e7d5bf12a2ef0b8acd34d0d1be32d5153ff88af
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504275944,1504277153,849195da7655ea4e8e9d02460ed3db903921d186
849195da7655ea4e8e9d02460ed3db903921d186,849195da,"Make image dimming optional, pt. 1","Make image dimming optional, pt. 1

Introduces a preference for dark mode image dimming and adds it to the
app setting screen.

Next up: update the page theme change widget for it.

Bug: T172897
Change-Id: I35b668845dd6777ef19cd6538b0a020dfddaaf96
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504192241,1504275182,b6b529d1e26bf658faf0a2c8fa0e7879a449b4c6
b6b529d1e26bf658faf0a2c8fa0e7879a449b4c6,b6b529d1,"Merge ""Update compilation metadata in Local activity, as well as Remote.""","Merge ""Update compilation metadata in Local activity, as well as Remote.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504274587,1504274587,"c769d3bbfe8469a79265aab83293b3775358a549,e2511c9c5df81d60554e9521b57df51f0e79f058"
e2511c9c5df81d60554e9521b57df51f0e79f058,e2511c9c,"Update compilation metadata in Local activity, as well as Remote.","Update compilation metadata in Local activity, as well as Remote.

A couple of things:
- This updates LocalCompilationsFragment to request compilation metadata,
  so that any new packs that are discovered will immediately be updated
  with correct information.
- Guard against fragment destruction in Local and Remote callbacks.
- In the Compilation class, let's make the Date be @NonNull, because this
  class needs to be serialized by Gson for saving to Prefs (when
  persisting cached compilations), and a null Date does not serialize
  well; in fact it crashes.

Bug: T174716
Change-Id: Ie0c5e1abe5e1d921ff5bf1b62587095fa5244c08
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504213974,1504273283,cdc00d9edec3a701c2bad453c68f6b54b71a96c8
c769d3bbfe8469a79265aab83293b3775358a549,c769d3bb,"Merge ""Chore: Update bundled CSS""","Merge ""Chore: Update bundled CSS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504272195,1504272195,"7751d9203a1b7de8e4288b8391b665f8928bdaab,775b34ea3a265e21bd369d2773bb84c5850a3a65"
7751d9203a1b7de8e4288b8391b665f8928bdaab,7751d920,"Merge ""Update node modules and pull in pagelib changes (4.5.0 -> 4.5.10)""","Merge ""Update node modules and pull in pagelib changes (4.5.0 -> 4.5.10)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504271988,1504271988,"cdc00d9edec3a701c2bad453c68f6b54b71a96c8,45d778ee2348fd4624dd447e7f799d5ebe8949b7"
775b34ea3a265e21bd369d2773bb84c5850a3a65,775b34ea,Chore: Update bundled CSS,"Chore: Update bundled CSS

Change-Id: Ie3a7fdd62c00567ffed2f1548988640e3c1574e5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504212739,1504212739,b5dd9f044efa95506b1a4bfd184f81bd09f43858
cdc00d9edec3a701c2bad453c68f6b54b71a96c8,cdc00d9e,Fix possible crash when clicking DownloadManager notification.,"Fix possible crash when clicking DownloadManager notification.

The LocalCompilationsActivity must be launched with the NEW_TASK flag,
since we're calling startActivity() from outside an Activity context.

Bug: T172860
Change-Id: I54a3c8a7a9ea282d94298de4e998e35d0adbabb0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504212010,1504212010,b5dd9f044efa95506b1a4bfd184f81bd09f43858
45d778ee2348fd4624dd447e7f799d5ebe8949b7,45d778ee,Update node modules and pull in pagelib changes (4.5.0 -> 4.5.10),"Update node modules and pull in pagelib changes (4.5.0 -> 4.5.10)

Change-Id: I2f4795f9328d24bb84c7dff59ec2cd1a9e573c59
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504208791,1504208791,b5dd9f044efa95506b1a4bfd184f81bd09f43858
b5dd9f044efa95506b1a4bfd184f81bd09f43858,b5dd9f04,Design tweak: make background of edit summary buttons transparent.,"Design tweak: make background of edit summary buttons transparent.

Change-Id: I0e9e45fff2c00a8887a52bf340734267a561bfe9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504206375,1504206416,b53dc9d69a048d7a40836712b6cc4ab606d03138
b53dc9d69a048d7a40836712b6cc4ab606d03138,b53dc9d6,"Merge ""When edit test wiki, the quick summary buttons don't show text.""","Merge ""When edit test wiki, the quick summary buttons don't show text.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504206275,1504206275,"22bc243bebdd8c89ef639c470fe32c9d764d3de8,0cf2422338ec672cf23896e496acdbb62682a705"
0cf2422338ec672cf23896e496acdbb62682a705,0cf24223,"When edit test wiki, the quick summary buttons don't show text.","When edit test wiki, the quick summary buttons don't show text.

In this update
  - Add an if statement to skip the setLocale process when the wikipedia language is in ""test""

Bug: T154034
Change-Id: I67342c9f58413d46bf19870ac4186b0cb4b60ce1
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1504205226,1504205226,7cce023ebb5f8fda28c024fca174d137f8526f99
22bc243bebdd8c89ef639c470fe32c9d764d3de8,22bc243b,Use dates in the ZIM metadata format (ISO 8601),"Use dates in the ZIM metadata format (ISO 8601)

ZIM files contain as metadata the creation date string in ISO 8601 format
(YYYY-MM-dd).  This updates the Compilation object to parse a Date object
from this String and hold it rather than a long timestamp.

The hardcoded metadata is updated with accurate date strings in this
format.

Change-Id: I74e764ba94c5ce0b5d5d08d151049d17fdeec719
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504129405,1504203968,7cce023ebb5f8fda28c024fca174d137f8526f99
7cce023ebb5f8fda28c024fca174d137f8526f99,7cce023e,"Merge ""Make Offline Library onboarding background transformable""","Merge ""Make Offline Library onboarding background transformable""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504201943,1504201943,"7e8a7bd6fda355db6495679e33bd444f42bf2c2a,caed41d289564d19c1a7fd740b14162bc4e1b870"
7e8a7bd6fda355db6495679e33bd444f42bf2c2a,7e8a7bd6,"Merge ""Dark Mode : Change card colors for dark mode""","Merge ""Dark Mode : Change card colors for dark mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504200383,1504200383,"2534aa4a9208afdf0ab2aa29f86aca5f64945131,7ba0cc79cb33d9be35821a67e59810a95cc066f6"
7ba0cc79cb33d9be35821a67e59810a95cc066f6,7ba0cc79,Dark Mode : Change card colors for dark mode,"Dark Mode : Change card colors for dark mode

- Changed Search bar style to a custom search background of base12 [ Exosphere Gray] instead of the android defined 'selectable items gray'
- Changed CardView backgrounds to base14 [Thermosphere Gray] instead of default material standard of #424242 for dark mode. Light mode is still material default.
- Found background to be base10 [Darkest Gray] as required. No changes to that.

Screenshots for change : https://drive.google.com/open?id=0B_maM54cPModWkNGY1E5dmZXdms

Bug : T173302

Change-Id: If8c21e6b3375163a7bf06057aac3254345e10135
",,,,sharvani,sharan@wikimedia.org,sharvani,sharan@wikimedia.org,1503703326,1504197202,215bbe5c76c1f574b83787348268303c07f8e97d
2534aa4a9208afdf0ab2aa29f86aca5f64945131,2534aa4a,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504186951,1504186951,"d0c15ad8f01cb05caec17a33aacff1567716f8cf,431c23493bc33105da32b9d074e038d84105479c"
431c23493bc33105da32b9d074e038d84105479c,431c2349,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ib2290fd3e4f7bee727409b0981494d44b320a3a0
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1504160261,1504186270,89ea766ddf9a81aa4cf4b0f62a5cfb413e665563
d0c15ad8f01cb05caec17a33aacff1567716f8cf,d0c15ad8,"Merge ""Fix footer date string for articles loaded from offline article packs""","Merge ""Fix footer date string for articles loaded from offline article packs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504185748,1504185748,"b01c2198ef02628dd4921b9ba49c9041a979cb8b,15794cd054877560e0f41c30977a2add6d05863c"
b01c2198ef02628dd4921b9ba49c9041a979cb8b,b01c2198,"Merge ""Trigger a feed refresh when connectivity is regained""","Merge ""Trigger a feed refresh when connectivity is regained""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504185734,1504185734,"89ea766ddf9a81aa4cf4b0f62a5cfb413e665563,69a0b371535b278617753905dcdebf4ad2fd7841"
89ea766ddf9a81aa4cf4b0f62a5cfb413e665563,89ea766d,"Merge ""Include the request URL in an HttpStatusException message""","Merge ""Include the request URL in an HttpStatusException message""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504129216,1504129216,"c5da87fbe64a23b414e7a733e35d4ebe7744ac40,4f1328b5488a0cd870d6c7a7b08556668de77949"
15794cd054877560e0f41c30977a2add6d05863c,15794cd0,Fix footer date string for articles loaded from offline article packs,"Fix footer date string for articles loaded from offline article packs

Bug: T166652
Change-Id: Iec58c8ef48fea6b23ea2b2a3b279b80291d9ee36
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504108312,1504108312,215bbe5c76c1f574b83787348268303c07f8e97d
69a0b371535b278617753905dcdebf4ad2fd7841,69a0b371,Trigger a feed refresh when connectivity is regained,"Trigger a feed refresh when connectivity is regained

Bug: T173002
Change-Id: I6ea99b38ad38d16b9a6ed407dd5212008f322157
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504106065,1504106065,215bbe5c76c1f574b83787348268303c07f8e97d
c5da87fbe64a23b414e7a733e35d4ebe7744ac40,c5da87fb,Make hardcoded zim timestamp units consistent with system timestamps,"Make hardcoded zim timestamp units consistent with system timestamps

Our hardcoded zim timestamps were formatted in seconds but Android system
timestamps are in milliseconds.  This can become a problem because we
default to the system last modified date when no timestamp is available
(timestamp == 0).

Change-Id: Ibdba9e491988e61dff880a6dc812b15bc98cac2c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504104342,1504104342,215bbe5c76c1f574b83787348268303c07f8e97d
4f1328b5488a0cd870d6c7a7b08556668de77949,4f1328b5,Include the request URL in an HttpStatusException message,"Include the request URL in an HttpStatusException message

A fair number of users are encountering 404s when attempting to save
pages, which shouldn't happen.  This adds the request URL to the
HttpStatusException message for remote logging in order to help surface
any hidden problems.

Change-Id: I8a64f6ace03e1cf5f1325abb5828ee8e40bbb908
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504100929,1504100929,215bbe5c76c1f574b83787348268303c07f8e97d
caed41d289564d19c1a7fd740b14162bc4e1b870,caed41d2,Make Offline Library onboarding background transformable,"Make Offline Library onboarding background transformable

Bug: T172185
Change-Id: Ib9d5c9e34a93a0301653a69f01f1557dc56fcabf
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504043267,1504043643,215bbe5c76c1f574b83787348268303c07f8e97d
215bbe5c76c1f574b83787348268303c07f8e97d,215bbe5c,Update ZIM library version.,"Update ZIM library version.

The latest update to the zimdroid library makes it much more resilient
against corrupted, malformed, or empty ZIM files.

Change-Id: I5d4def881e9905fc5ddde819a533638a92e615e9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504037063,1504037063,fc634f3035e88a913d7683faf65698fb172de5ec
fc634f3035e88a913d7683faf65698fb172de5ec,fc634f30,Remove the page title left behind when a page load fails,"Remove the page title left behind when a page load fails

The page title that was set on the action when a page load fails
was cleared only when the 'Retry' button was clicked. Thus it was
left behind in lots of other cases like when the user switches to
other tabs etc., This isn't nice.

So, clear the page title whenever a page is loaded to ensure that
nothing like that happens. This also removes a callback method for
the 'Retry' button that just cleared the page title.

Bug: T163115
Bug: T173756
Change-Id: Id8a4c6f917c1c0a31a61151019388da1f80fae51
",,,,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,Dmitry Brant,dbrant@wikimedia.org,1503665971,1504019428,20ec195ac1497a8a3c6479148f50655b6fe57169
20ec195ac1497a8a3c6479148f50655b6fe57169,20ec195a,Fix support for vector drawables in onboarding screens.,"Fix support for vector drawables in onboarding screens.

(This fixes the crash seen in the Offline onboarding screens on older APIs)

Change-Id: I0a8dc1b740a9ca76c29dd5fc748be843549860b4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1504016635,1504019410,535b67ae6fd93a53557fe395d5d03af13e7f0fae
535b67ae6fd93a53557fe395d5d03af13e7f0fae,535b67ae,"Merge ""Fix sharing of article snippets when offline.""","Merge ""Fix sharing of article snippets when offline.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1504018561,1504018561,"7e3b350dc4ae4f0f08539ebe32d7d8e44e9d44cc,0138b980dda3d4774eaa1a356617bc49fb6ca6f0"
7e3b350dc4ae4f0f08539ebe32d7d8e44e9d44cc,7e3b350d,Fall back to in-repo SDK if no external SDK location is provided,"Fall back to in-repo SDK if no external SDK location is provided

Change-Id: I9f7784ec096e1d984223b559e27cdc5195d4321f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1504017437,1504017437,03bce0064b809c58782d91d29508965b1a05f2d6
03bce0064b809c58782d91d29508965b1a05f2d6,03bce006,"Merge ""Bump versionCode""","Merge ""Bump versionCode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503964379,1503964379,"15fce67cd19a729c85b7099821fd3c4b593a132f,889c9a1f0258d4e12923cd619d07410c670b83b5"
889c9a1f0258d4e12923cd619d07410c670b83b5,889c9a1f,Bump versionCode,"Bump versionCode

Change-Id: Id8179ebf60b3a0f7c4862f3c1389a72289200498
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503963545,1503963545,070bc59627c7cee15f5d0139009c4da09c58ae26
15fce67cd19a729c85b7099821fd3c4b593a132f,15fce67c,"Merge ""Don't destroy WebView explicitly.""","Merge ""Don't destroy WebView explicitly.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503962725,1503962725,"070bc59627c7cee15f5d0139009c4da09c58ae26,2061c8259bf677910e6fdedc67a7a3034a1991e2"
2061c8259bf677910e6fdedc67a7a3034a1991e2,2061c825,Don't destroy WebView explicitly.,"Don't destroy WebView explicitly.

Explicitly calling destroy() on the WebView seems to be having adverse
effects on the most recent version of the System WebView, whereby all
subsequent instances of the WebView can enter a bad state.

We started calling destroy() to resolve memory leaks that were found
previously, but basic functionality of the WebView obviously takes
priority. We'll need to re-audit memory leaks and fix any ones related to
the WebView in a different way (if they still exist).

Bug: T174401
Change-Id: I13e9967ceb6b76af978542c9482732b0b9bb351b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503959260,1503959260,1b0be645c0242ae92b187596b0ad3ba13dcc98b7
070bc59627c7cee15f5d0139009c4da09c58ae26,070bc596,Bump versionCode,"Bump versionCode

Change-Id: Id7c9e555c267a770c8c1bb2f7394da174c70d472
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503951432,1503951432,1b0be645c0242ae92b187596b0ad3ba13dcc98b7
1b0be645c0242ae92b187596b0ad3ba13dcc98b7,1b0be645,"Merge ""Grand renaming: the sequel""","Merge ""Grand renaming: the sequel""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503950715,1503950715,"ffe1270dacc5a772e67253d6b8efcd12ed3557a7,cdae8e37497bdccfcd5ed687bb97a3f94a31d17a"
ffe1270dacc5a772e67253d6b8efcd12ed3557a7,ffe1270d,"Merge ""No longer allow searching in local packs.""","Merge ""No longer allow searching in local packs.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503950025,1503950025,"524ee0d91cd1e5f9a1d43c402d5961b14d246c6b,4e7e602a406068d6214de7fbc17ab00d8edd7067"
cdae8e37497bdccfcd5ed687bb97a3f94a31d17a,cdae8e37,Grand renaming: the sequel,"Grand renaming: the sequel

Update to align with current mocks.

Also updates both code and presentation so as not to refer to the comp
date as a download date.

Bug: T172546
Change-Id: Ib59e20475530112fd5f60610bc75fb8549ccec6f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503948468,1503949231,151db58827210267737eb8b46a820ea05015007d
524ee0d91cd1e5f9a1d43c402d5961b14d246c6b,524ee0d9,"Merge ""Add separate preference for offline onboarding""","Merge ""Add separate preference for offline onboarding""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503948309,1503948309,"f213191a6d4d4331e702d25d4c045ec3e2cf3f85,6fefd6734ae1666cd4ceb1512e8bb211391513e1"
4e7e602a406068d6214de7fbc17ab00d8edd7067,4e7e602a,No longer allow searching in local packs.,"No longer allow searching in local packs.

Bug: T163591
Change-Id: I2ae740577556efa88291ae5aa5dc44989c3c76bd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503947161,1503947161,151db58827210267737eb8b46a820ea05015007d
f213191a6d4d4331e702d25d4c045ec3e2cf3f85,f213191a,Populate metadata for downloadable ZIM files from Kiwix,"Populate metadata for downloadable ZIM files from Kiwix

Notes:
* Dates are currently approximate based on mm-yyyy combinations from the
  Kiwix download site, but it looks like we have the true timestamps on
  dumps.  These can be updated later.

Bug: T164760
Change-Id: I657e9eb37c5ccd2b3ca8ea994e57f838a4441edf
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503703039,1503942852,151db58827210267737eb8b46a820ea05015007d
0138b980dda3d4774eaa1a356617bc49fb6ca6f0,0138b980,Fix sharing of article snippets when offline.,"Fix sharing of article snippets when offline.

The sharing of article text is dependent on successfully fetching the
license information for the lead image of the article. If the fetching
task fails, nothing happens.

Change-Id: Id2cf5d6b79902b26784be3dc9d33316d2b9c90a1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503934932,1503934932,d23309e631de713de1880156a8466dc0bae8a597
6fefd6734ae1666cd4ceb1512e8bb211391513e1,6fefd673,Add separate preference for offline onboarding,"Add separate preference for offline onboarding

It's not correct for this to be dependent on the preference for the
card; there are other circumstances in which the onboarding should be
shown, such as direct navigation to the offline compilations activity.

Change-Id: I452391e243fcfa09acc3182a6dcd7948b57c597b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503934513,1503934513,0f1508b2ee844cfc15bc2a5057d4a0cedbc38c99
151db58827210267737eb8b46a820ea05015007d,151db588,"Merge ""Update and generalize design of onboarding cards for the Feed.""","Merge ""Update and generalize design of onboarding cards for the Feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503933666,1503933666,"0f1508b2ee844cfc15bc2a5057d4a0cedbc38c99,ab3530f86d727c1256287a31a2ffa23a76fb8c4b"
0f1508b2ee844cfc15bc2a5057d4a0cedbc38c99,0f1508b2,Update testing reference screenshots,"Update testing reference screenshots

Change-Id: Ieb55a3cac196d613cf59372e4c232eaace7b62b4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503932709,1503932709,d23309e631de713de1880156a8466dc0bae8a597
ab3530f86d727c1256287a31a2ffa23a76fb8c4b,ab3530f8,Update and generalize design of onboarding cards for the Feed.,"Update and generalize design of onboarding cards for the Feed.

(and specifically update the offline onboarding card.)

This removes the recently-added OnboardingCardView from the feed (which
was used for delivering the offline onboarding card), and instead
generalizes it to use the existing AnnouncementCardView, since the designs
are now identical.

An ""Announcement"" can now be constructed locally within the app (instead
of only from a content service response), and fed directly into an
announcement card in the feed.

This also introduces the idea of ""local"" app URLs, which are fake URLs
that can be plugged into the ""action"" of an announcement, and will cause
the affirmative button to take the user to the desired activity in the
app.

So, in addition to having static in-app onboarding cards, we'll now be
able to craft remote announcements that take the user to other specific
activities in the app, rather than only external links.

Bug: T172187
Bug: T140011
Change-Id: I2cb4d3e2caa19a42e236145fe0e01ec3d8532b5d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503600943,1503928802,722fd32d7d4665825a84727655571297360c723b
d23309e631de713de1880156a8466dc0bae8a597,d23309e6,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia7cf16b6ce9e4d1c415666a11a010c932ebf523f
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1503900005,1503900005,a3ff0b1c9a408080aa4c83792da3ffc9001f0107
a3ff0b1c9a408080aa4c83792da3ffc9001f0107,a3ff0b1c,"Merge ""Fix error text color in dark mode""","Merge ""Fix error text color in dark mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503692288,1503692288,"722fd32d7d4665825a84727655571297360c723b,a93f8d63b03b4c363ee897c280f1d164834a6529"
722fd32d7d4665825a84727655571297360c723b,722fd32d,Allow user to navigate to Main Page of article pack from Detail screen.,"Allow user to navigate to Main Page of article pack from Detail screen.

..., she said.

Change-Id: I03ac0dda83f52812431ec0d05686ea86397c249f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503684944,1503687399,e7d241d1271a41a1a0dc29ea72d4c263ba8ddd76
e7d241d1271a41a1a0dc29ea72d4c263ba8ddd76,e7d241d1,"Merge ""Add status indication when searching offline library.""","Merge ""Add status indication when searching offline library.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503685429,1503685429,"73020fe4ba16b56140fdbae3a58714eb8439737c,ccf00db3b352b2413a43a21ffdd2cdbe1e5ddb28"
73020fe4ba16b56140fdbae3a58714eb8439737c,73020fe4,"Merge ""Allow sharing article packs to more arbitrary apps.""","Merge ""Allow sharing article packs to more arbitrary apps.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503683880,1503683880,"fa834e21bae58e39e06ae7d151dc189be5875459,ced40573ab3eabe58afcca3568d41b93a4fc1535"
ccf00db3b352b2413a43a21ffdd2cdbe1e5ddb28,ccf00db3,Add status indication when searching offline library.,"Add status indication when searching offline library.

Bug: T166649
Change-Id: Iea2e85d31fca9383874c46c4759ee8d7d531e57f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503681387,1503681387,83a08af4109a026f7854bbfe16a6d6673ae997d5
a93f8d63b03b4c363ee897c280f1d164834a6529,a93f8d63,Fix error text color in dark mode,"Fix error text color in dark mode

In this update
 - Add Red75-Sunset Red to colors.xml
 - Add two ""textColorError"" items for light mode and dark mode theme

Bug: T173091
Change-Id: I3d5030f4fe173e0e50904a5ec771e876082a5e57
",,,,Cooltey Feng,cfeng@wikimedia.org,Cooltey Feng,cfeng@wikimedia.org,1503616285,1503681235,fa834e21bae58e39e06ae7d151dc189be5875459
fa834e21bae58e39e06ae7d151dc189be5875459,fa834e21,"Merge ""The offline Grand Renaming""","Merge ""The offline Grand Renaming""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503676717,1503676717,"83a08af4109a026f7854bbfe16a6d6673ae997d5,6269f3358387962fc9c4f30a5ef856c77dfd0d6a"
ced40573ab3eabe58afcca3568d41b93a4fc1535,ced40573,Allow sharing article packs to more arbitrary apps.,"Allow sharing article packs to more arbitrary apps.

Change-Id: I40f895cdee56923ae79aea0f4b9c5e3b07b4c45c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503669290,1503669290,83a08af4109a026f7854bbfe16a6d6673ae997d5
83a08af4109a026f7854bbfe16a6d6673ae997d5,83a08af4,Onboarding per-screen backgrounds follow-up.,"Onboarding per-screen backgrounds follow-up.

Change-Id: I1c33b18f94bb3aecbef41d4fc1549cf503e3b554
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503615365,1503615365,fbd3796891ea06d811b9f1db440b40c9f64a419b
fbd3796891ea06d811b9f1db440b40c9f64a419b,fbd37968,"Merge ""Update Offline Library tutorial to have per-screen backgrounds""","Merge ""Update Offline Library tutorial to have per-screen backgrounds""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503612189,1503612189,"8b4b71ef7a8588fd3d38f1c52ed8dbe0a74d78ae,66e1fbc2a6b77a833a7f2061c7d9bb5a0deb0833"
66e1fbc2a6b77a833a7f2061c7d9bb5a0deb0833,66e1fbc2,Update Offline Library tutorial to have per-screen backgrounds,"Update Offline Library tutorial to have per-screen backgrounds

Updates the generic onboarding activity components as needed to
implement the current design.  Adds an optional styleable declaration for
an onboarding screen background drawable.  Adds per-screen background
gradients as specified on the ticket.

Bug: T172185
Change-Id: I5aa8e76b0884f0e7a9a25376ac93e1283b580116
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503608876,1503610934,505c6c34a34d54023260e247776a93a8f2ccbfda
8b4b71ef7a8588fd3d38f1c52ed8dbe0a74d78ae,8b4b71ef,Offline Library onboarding follow-up.,"Offline Library onboarding follow-up.

Change-Id: Ifa177a994d9ace313c75109e1695d80df30f3c6d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503610627,1503610627,505c6c34a34d54023260e247776a93a8f2ccbfda
505c6c34a34d54023260e247776a93a8f2ccbfda,505c6c34,Add Offline Library onboarding tutorial screens,"Add Offline Library onboarding tutorial screens

TODO (separately): add per-screen background gradients

Bug: T172185
Change-Id: Id12acd876b640cd28e85589ea61a3bae54931607
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503601955,1503604321,affa8514749d8a224970450302f758d8ec87557c
6269f3358387962fc9c4f30a5ef856c77dfd0d6a,6269f335,The offline Grand Renaming,"The offline Grand Renaming

Standardize ""Offline Library"" as the name of the feature, and ""article
packs"" as the collections of articles that it contains.

Bug: T172546
Change-Id: I56b9258bd14108bbe2f9a299e73b04e7997907f2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503598695,1503598695,affa8514749d8a224970450302f758d8ec87557c
affa8514749d8a224970450302f758d8ec87557c,affa8514,"Merge ""Remove hard-coded footer from ZIM articles.""","Merge ""Remove hard-coded footer from ZIM articles.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503596651,1503596651,"338e52c35cf9797517a67d54f7a95a0f49f41a6e,ca67c93a17c10c13f235f5d49e3d1c5c5b11ea3c"
338e52c35cf9797517a67d54f7a95a0f49f41a6e,338e52c3,"Merge ""Update secondary text shown under compilation titles.""","Merge ""Update secondary text shown under compilation titles.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503593977,1503593977,"6cae903acf04c7e30be4db5083693c580b207c35,8e5820c0440149c500f2149c2f8fb85d3fa4fbf7"
6cae903acf04c7e30be4db5083693c580b207c35,6cae903a,"Merge ""No longer hide hatnotes in lead section.""","Merge ""No longer hide hatnotes in lead section.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503592855,1503592855,"284a213d38d4fa562939d6022e3c893cd33b5817,fbef5283fba85775ca143fa0ee78ae3a147b0a3e"
8e5820c0440149c500f2149c2f8fb85d3fa4fbf7,8e5820c0,Update secondary text shown under compilation titles.,"Update secondary text shown under compilation titles.

This shows the proper ""date + GB"" subtitle instead of the compilation
description underneath the title.

This also updates the bullet-point character in our strings to be the more
proper Unicode 0x2022 ""Bullet"" instead of Unicode 0xB7 ""Middle dot"".

Bug: T163589
Change-Id: Ib9238b2f2cd5c3868274e61f87aedd028aec7ada
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503586910,1503586910,82770dd516c42c3f728183d22154e95b4b983764
ca67c93a17c10c13f235f5d49e3d1c5c5b11ea3c,ca67c93a,Remove hard-coded footer from ZIM articles.,"Remove hard-coded footer from ZIM articles.

Bug: T166652
Change-Id: I646369b37a562db774bcb83eea4f97d36180ae22
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503584490,1503585151,82770dd516c42c3f728183d22154e95b4b983764
fbef5283fba85775ca143fa0ee78ae3a147b0a3e,fbef5283,No longer hide hatnotes in lead section.,"No longer hide hatnotes in lead section.

Bug: T172686
Change-Id: I019c9adb67fd886063f6cd0e9b8aff4036ef9b1f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503583576,1503583576,82770dd516c42c3f728183d22154e95b4b983764
284a213d38d4fa562939d6022e3c893cd33b5817,284a213d,"Merge ""Remove incorrect RESTBase error handling""","Merge ""Remove incorrect RESTBase error handling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503583081,1503583081,"0cfec74f67e9ac0676ad748c680ad35d67b48b64,f592204d8e17dd943f49efefa290a44e3181ad9a"
0cfec74f67e9ac0676ad748c680ad35d67b48b64,0cfec74f,"Merge ""Fix inconsistent image loading on older APIs.""","Merge ""Fix inconsistent image loading on older APIs.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503582356,1503582356,"3ff35bbd301f6d080234fcc0a25efadc169509f1,abb1ca894a3fd3ddba5b5743b6d07c1f984d20d0"
3ff35bbd301f6d080234fcc0a25efadc169509f1,3ff35bbd,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ie2885b4b82d234c55d4872fe7fc6799bbbdf6aa3
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1503560864,1503560864,82770dd516c42c3f728183d22154e95b4b983764
abb1ca894a3fd3ddba5b5743b6d07c1f984d20d0,abb1ca89,Fix inconsistent image loading on older APIs.,"Fix inconsistent image loading on older APIs.

Aha, here's the real culprit:
We were setting progressiveRendering to true (without any clear reason),
and because we set it to true inside our face-detecting custom view, which
uses a postprocessor, it's possible that the postprocessing gets invoked
before the actual bitmap is fully loaded, causing it to fall into a funky
state.

Let's hope this fixes it definitively. I definitely can no longer
reproduce the issue on my devices.

Bug: T173896
Change-Id: I9a2c42d2f2f68a0c62c9790204c705b8710ac198
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503535107,1503535107,82770dd516c42c3f728183d22154e95b4b983764
82770dd516c42c3f728183d22154e95b4b983764,82770dd5,"Merge ""Update Fresco to 1.5.0.""","Merge ""Update Fresco to 1.5.0.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503524276,1503524276,"bd14a6af51433e0f87ae366c18313383d802ef6e,18a5c27e588e27d3070d10fc2cf2f3a3d4843c71"
bd14a6af51433e0f87ae366c18313383d802ef6e,bd14a6af,"Merge ""Radically simplify ActionMode logic in PageActivity.""","Merge ""Radically simplify ActionMode logic in PageActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503522665,1503522665,"1cf07e412e47439d74b952722b7b372a391b2ef8,e1b156838a98f58a134475525fd3f09e1492bd44"
1cf07e412e47439d74b952722b7b372a391b2ef8,1cf07e41,"Merge ""Implement sharing and deleting of compilations.""","Merge ""Implement sharing and deleting of compilations.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503521964,1503521964,"e4a8f131af80d946830b930f4be25a18c2ccf538,51f8ed9e070123d1453b2820b1a7bcadade463c8"
18a5c27e588e27d3070d10fc2cf2f3a3d4843c71,18a5c27e,Update Fresco to 1.5.0.,"Update Fresco to 1.5.0.

With cautious optimism, I'm hoping that this update might fix the
inconsistent image loading behavior that some of us have seen on lower-end
devices.  At the very least, I can no longer reproduce the inconsistent
behavior on my old device with this update.

(No breaking changes for us, and no changes to the ""samples"" code.)

Bug: T173896
Change-Id: I0d938eb473f2aeb1cf1d10d786bf4ad9c30c9e61
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503521662,1503521662,2fa80b69285218613ecd70b3bf4f2e3c24184c54
e4a8f131af80d946830b930f4be25a18c2ccf538,e4a8f131,Hygiene: Update testing reference screenshots,"Hygiene: Update testing reference screenshots

Change-Id: I095d159f75f8e2fe00df3d7482c891f8bab98b02
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503520918,1503520918,1a8bf8300bcced70abecd71b75c1e4e1a9d053b6
51f8ed9e070123d1453b2820b1a7bcadade463c8,51f8ed9e,Implement sharing and deleting of compilations.,"Implement sharing and deleting of compilations.

Bug: T173117
Bug: T165745
Change-Id: I16e72024bffdb19e0290a335f50b02e5559a9c49
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503504035,1503517532,2fa80b69285218613ecd70b3bf4f2e3c24184c54
e1b156838a98f58a134475525fd3f09e1492bd44,e1b15683,Radically simplify ActionMode logic in PageActivity.,"Radically simplify ActionMode logic in PageActivity.

It turns out that there's no longer any need to differentiate between
ActionMode and SupportActionMode. (the Support library handles this
automatically under the hood)

- There's no further need for a custom ""CompatActionMode"" class.
- No further need to override both onActionModeStarted() and
  onSupportActionModeStarted().

This also fixes some possible crashes in older APIs, apparently because
we were sending a Bridge message to the WebView during initialization of
an ActionMode, which older WebViews don't seem to handle well. We were
doing this to get the currently-highlighted text as soon as the user
long-presses the WebView, and send it to eventlogging. However, we really
don't need the highlighted text at that point, since the event funnel will
continue with a ""share"" event (which will contain the highlighted text) or
an ""abandon"" event, both of which will have the install ID of the user for
tracking of the interaction.

Therefore, I'm simply removing the call to get the initial highlighted
text.

Bug: T173827
Change-Id: Ic0e88ddeb1a79b4e5fa65ada35151a5226356b4e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503511131,1503512474,2fa80b69285218613ecd70b3bf4f2e3c24184c54
1a8bf8300bcced70abecd71b75c1e4e1a9d053b6,1a8bf830,"Merge ""Make DownloadManager notification clickable.""","Merge ""Make DownloadManager notification clickable.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503511207,1503511207,"154d902330ed9b9b690c47e4b9698226e78e8b71,5a8743736571d6c72bd91de911087f5a8601de8e"
f592204d8e17dd943f49efefa290a44e3181ad9a,f592204d,Remove incorrect RESTBase error handling,"Remove incorrect RESTBase error handling

Several RESTBase response model classes currently expect an error response
object to be contained in an ""error"" field similar to the MediaWiki API's
error response structure, but RESTBase doesn't return errors this way; it
simply sends the error object.  Hence it will never be picked up in the
way it's currently expected.

This removes the incorrect code described above.  In the error case, an
HttpStatusException will be thrown, which will help us diagnose the error.
The response body can be examined through interactive debugging if needed.

Bug: T150859
Change-Id: I154fa0df9f7cc4b9dca307b6bf5497993babc50c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1502319190,1503498039,154d902330ed9b9b690c47e4b9698226e78e8b71
5a8743736571d6c72bd91de911087f5a8601de8e,5a874373,Make DownloadManager notification clickable.,"Make DownloadManager notification clickable.

This creates an app-wide receiver for DownloadManager events, and watches
for clicks of the DownloadManager notification. If one of the files being
downloaded is a compilation, we launch the LocalCompilations activity.

This also makes the LocalCompilationsActivity into a ""singleTask""
activity, since it doesn't really make sense to have multiple instances of
this activity in the app's stack.

Bug: T172860
Change-Id: Ic7a932f411d2b09ee535719a54b859ab6832d6bf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503497364,1503497496,2fa80b69285218613ecd70b3bf4f2e3c24184c54
154d902330ed9b9b690c47e4b9698226e78e8b71,154d9023,Log HTTP error status codes for page save failures,"Log HTTP error status codes for page save failures

We are attempting to log errors when saving pages in HockeyApp in attempt
to debug remaining page save issues, but the logged errors currently
contain no useful information; the most we can deduce is that the server
returned an error response code.  This updates the HttpStatusException to
provide the response code via getMessage for remote logging.

Change-Id: I9f45f887c01245a7fa26b128268c7623339682f1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503436374,1503495134,2fa80b69285218613ecd70b3bf4f2e3c24184c54
2fa80b69285218613ecd70b3bf4f2e3c24184c54,2fa80b69,"Merge ""Further simplify gradient on lead images.""","Merge ""Further simplify gradient on lead images.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503415697,1503415697,"cb1569416d0968655515e0cdc967dfd938e656dd,20b373a2fef8efec5e263cd69a08ab2152c2c062"
cb1569416d0968655515e0cdc967dfd938e656dd,cb156941,"Merge ""Refactor/standardize status bar appearance in CollapsingToolbarLayouts.""","Merge ""Refactor/standardize status bar appearance in CollapsingToolbarLayouts.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503415422,1503415422,"f2631916f91b9348fb40cca1677b26104fb755f0,3b5336eec6b44b6251689fe43ab188804be115a3"
f2631916f91b9348fb40cca1677b26104fb755f0,f2631916,Fix toolbar behavior when reading Main Page.,"Fix toolbar behavior when reading Main Page.

Bug: T173656
Change-Id: I647f2a21c3bef191cc6404ee050144607000cf08
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503408115,1503408115,ddd76bfe0e8bc0c3bf55b350259209122047950c
20b373a2fef8efec5e263cd69a08ab2152c2c062,20b373a2,Further simplify gradient on lead images.,"Further simplify gradient on lead images.

See inline comment(s).

Change-Id: Id35860cc3fd12366d19bece361961a081e538e4d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503350346,1503351444,3b5336eec6b44b6251689fe43ab188804be115a3
3b5336eec6b44b6251689fe43ab188804be115a3,3b5336ee,Refactor/standardize status bar appearance in CollapsingToolbarLayouts.,"Refactor/standardize status bar appearance in CollapsingToolbarLayouts.

This updates the appearance of the system status bar in activities that
use a full-screen CollapsingToolbarLayout, to make it fully transparent
(instead of partially translucent). Also:

- Refactor the layout of the News fragment to use a CollapsingToolbarLayout,
  instead of a custom-ish toolbar plus image combo.
- Simplify and refactor some bits in our gradient generator.

Bug: T163594
Change-Id: I87087dcca52b46acaab0a90654a32c0679832e51
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503325618,1503351075,7b4c5c746c0467b4cefe137b41a7ddab7f6c7de5
ddd76bfe0e8bc0c3bf55b350259209122047950c,ddd76bfe,Prevent possible memory leak in OfflineManager.,"Prevent possible memory leak in OfflineManager.

When searchForCompilations() is invoked, the Callback that is passed into
it can be an anonymous class belonging to an Activity.  When the
searchTask completes, it can technically hold on to a reference of
Callback indefinitely.

This patch explicitly sets searchTask to null as soon as the task itself
finishes, so that any references to the Callback (and thus references to
an Activity) are not held for longer than necessary.

Change-Id: I197dbabadae59bd93d1ac6e3adf49a2e4fd76acc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503331553,1503331553,66e3f832b6583ab457a2a59bdfc1dcc4b89f02b1
66e3f832b6583ab457a2a59bdfc1dcc4b89f02b1,66e3f832,"Merge ""Fix shifting-up of lead paragraph when not using RestBase.""","Merge ""Fix shifting-up of lead paragraph when not using RestBase.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503328667,1503328667,"61bcc2d78f3688314b54a99fb1fba57096e29d98,c6832d62ace05b8182460111ac6f5b9bcb20bfc0"
c6832d62ace05b8182460111ac6f5b9bcb20bfc0,c6832d62,Fix shifting-up of lead paragraph when not using RestBase.,"Fix shifting-up of lead paragraph when not using RestBase.

When RestBase is disabled, I noticed that the lead paragraph was no longer
being shifted to the top (i.e. the infobox appears at the top instead).
This is because the recent lazy-loading functionality creates a virtual
DOM, whereas the shifting transform relies on the lead section to be
inside a real DOM for measuring the physical height of the lead paragraph.

This patch moves the transform logic for the lead section to a point after
the section is appended to the real DOM.

Change-Id: I100dea60b46cc20f71da0c2d8e296319a90a7616
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1503327206,1503327206,7b4c5c746c0467b4cefe137b41a7ddab7f6c7de5
61bcc2d78f3688314b54a99fb1fba57096e29d98,61bcc2d7,Update mobile-sections version requested to 0.12.2,"Update mobile-sections version requested to 0.12.2

Updates the Accept header to match the current deployed version.[1]

[1] Iff17f73f1

Change-Id: Ib4bddeeab76322ba0ffa49af136427b46ee7ede8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503323889,1503324106,7b4c5c746c0467b4cefe137b41a7ddab7f6c7de5
7b4c5c746c0467b4cefe137b41a7ddab7f6c7de5,7b4c5c74,"Merge ""Make Featured article card translatable""","Merge ""Make Featured article card translatable""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503320839,1503320839,"4fcff6fa50bcf2d7371f4b256a4510008e7c1891,9c82d2498332597e0eb1e532a8b61b60b5c8188b"
4fcff6fa50bcf2d7371f4b256a4510008e7c1891,4fcff6fa,"Merge ""Hygiene: Update bundled CSS""","Merge ""Hygiene: Update bundled CSS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503320619,1503320619,"46d1c7c082beb58056f6a04bdd55e426d02c89f8,c6f2126e9db58d3627058d8b9c8b7be41e9fbe01"
46d1c7c082beb58056f6a04bdd55e426d02c89f8,46d1c7c0,"Merge ""Design tweaks for compilation detail view""","Merge ""Design tweaks for compilation detail view""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503320579,1503320579,"1a65e616c1d1c93926aa9f1ac33d427cdf419cdd,3a2239bbb702eddcf1cf9eea20014f1a180d367f"
9c82d2498332597e0eb1e532a8b61b60b5c8188b,9c82d249,Make Featured article card translatable,"Make Featured article card translatable

The ""Featured article"" card's title and save button was untranslatable
as an ""experimental English-only feature"". As it's stable and widely
used, it should be translatable.

Change-Id: I325102d6485b49625f60fd9bf06b23df62a90283
",,,,tacsipacsi,tacsipacsi@jnet.hu,Dmitry Brant,dbrant@wikimedia.org,1503279067,1503320359,b6c53a10b620272b6e4f837b427eb984726237cc
1a65e616c1d1c93926aa9f1ac33d427cdf419cdd,1a65e616,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id1e1183cb80ab564ebfab37a851e5b0c86ca31fe
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1503294900,1503320046,94304a82e54a4064af73fa63b1a9d093174d58aa
94304a82e54a4064af73fa63b1a9d093174d58aa,94304a82,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: If90ad2805bd283f6faa19312006f198a3cd85089
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1502977794,1503319277,d1473445fbe3d9e3800e4316b60b55bf19566040
d1473445fbe3d9e3800e4316b60b55bf19566040,d1473445,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1503318927,1503318927,"b6c53a10b620272b6e4f837b427eb984726237cc,9640ca0941e7e0da629d6f7fb7e818f5a2856cc8"
c6f2126e9db58d3627058d8b9c8b7be41e9fbe01,c6f2126e,Hygiene: Update bundled CSS,"Hygiene: Update bundled CSS

Change-Id: Icbd97eda9edb38082a33f24aba9e78e958f5e9a8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503006537,1503006537,b6c53a10b620272b6e4f837b427eb984726237cc
3a2239bbb702eddcf1cf9eea20014f1a180d367f,3a2239bb,Design tweaks for compilation detail view,"Design tweaks for compilation detail view

Bug: T163594
Change-Id: Ifb5d79a7b5982336e50e9e3e94b3209381d97fb6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1503002686,1503003848,b6c53a10b620272b6e4f837b427eb984726237cc
b6c53a10b620272b6e4f837b427eb984726237cc,b6c53a10,"Merge ""Show error message in a scrollable view in landscape mode""","Merge ""Show error message in a scrollable view in landscape mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502922217,1502922217,"ac8f890ce8056f82a1ab805b74c35d11a766372a,36f2c99326b19ff1f4f0e5e60c871d20858dd5a5"
ac8f890ce8056f82a1ab805b74c35d11a766372a,ac8f890c,Show full reading list description in detail view,"Show full reading list description in detail view

Bug: T164926
Change-Id: Iab785071cc4a5b12ea5b2b503ae823e40564635c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1502919214,1502919214,bda828873d40adaea29ae8c0cf5ac6605d8e84fb
bda828873d40adaea29ae8c0cf5ac6605d8e84fb,bda82887,Fix: ellipsize reading list descriptions,"Fix: ellipsize reading list descriptions

Reading list descriptions were not being ellipsized despite our specifying
maxLines=""2"" and ellipsize=""end"" in the layout xml.  Apparently because of
a platform bug, tt turns out that the ellipsize directive doesn't work for
TextViews with a TextWatcher set on them, and therefore won't work with a
GoneIfEmptyTextView.  We don't need to use that class anyway, so this
swaps in a plain TextView.

Added some cautionary comments to GoneIfEmptyTextView to reflect this.

Bug: T164926
Change-Id: Ie97a9407e83c10719dbcbc6c0554631a7e30b034
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1502916695,1502916695,1762c693a029b81f567905cf497e6165a4460c74
1762c693a029b81f567905cf497e6165a4460c74,1762c693,Hygiene: Update reference screenshots,"Hygiene: Update reference screenshots

Change-Id: Iceb8a0cd4b7ddd6d86acaa7959bcb7956e632ab4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1502892569,1502892569,6fbd88e8413e203f8b662a6504c35bf350c39a95
36f2c99326b19ff1f4f0e5e60c871d20858dd5a5,36f2c993,Show error message in a scrollable view in landscape mode,"Show error message in a scrollable view in landscape mode

To solve the problem of the error view that can not be seen completely when the device is offline is added a NestedScrollView.

Bug: T172701
Change-Id: I0f2e53de4179a8d33dfd52abe66290bbe706ddae
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1502740665,1502740665,05b321f926d9e7f8d905672362f43f9981af0ad4
9640ca0941e7e0da629d6f7fb7e818f5a2856cc8,9640ca09,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id7bf9b6975828709a053cb029f2f0cc953f9ee2f
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1502692708,1502692708,05b321f926d9e7f8d905672362f43f9981af0ad4
6fbd88e8413e203f8b662a6504c35bf350c39a95,6fbd88e8,Hygiene: Remove unused class,"Hygiene: Remove unused class

Change-Id: I68d9c2d1f75b25d3981a0a8b1d3de701f0364cca
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1502642318,1502642318,05b321f926d9e7f8d905672362f43f9981af0ad4
05b321f926d9e7f8d905672362f43f9981af0ad4,05b321f9,Design tweak: Fix offline library screen dark mode bg color,"Design tweak: Fix offline library screen dark mode bg color

Bug: T163587
Change-Id: If0a7dcbb2e5cf3832b378f89a1ac5d2891a0e072
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1502552143,1502552143,ae462029d41082953d668de77721af3eab80eadb
ae462029d41082953d668de77721af3eab80eadb,ae462029,"Merge ""Separate different parts of the message with a new line""","Merge ""Separate different parts of the message with a new line""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502542790,1502542790,"855f9d1e9306f448970aaa0aec2e10d91b471d1c,f3a4de35d276ecebc87df8a580e4b6c3fb781e37"
855f9d1e9306f448970aaa0aec2e10d91b471d1c,855f9d1e,"Merge ""Design tweak: update color states for blue color""","Merge ""Design tweak: update color states for blue color""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502478290,1502478290,"c50d1c1471f11fd1190075a2c21c8990ab803604,a0c6ade76d7b2abd4cc50488817383cdd838eb5b"
c50d1c1471f11fd1190075a2c21c8990ab803604,c50d1c14,"Merge ""Shorten the rationale""","Merge ""Shorten the rationale""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502477394,1502477394,"3a8404fccfd60e55d455ae72f9893c15ad2a3308,d6ac43ff64cd7b0d9262e5c8d97a4bd8dba8dae2"
3a8404fccfd60e55d455ae72f9893c15ad2a3308,3a8404fc,Design tweak: Update offline library screen background color,"Design tweak: Update offline library screen background color

Bug: T163587
Change-Id: I39117afb02653f5d31e3a56c22c42097fb300603
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1502470351,1502470351,1492a866a13c3591be21a43244e5737d02fad703
a0c6ade76d7b2abd4cc50488817383cdd838eb5b,a0c6ade7,Design tweak: update color states for blue color,"Design tweak: update color states for blue color

This task update color states of blue color from ""colorAccent"" to ""accent50"" because with colorAccent the button in onboarding tutorial  was showing the old teal color.

Bug: T173092
Change-Id: I8c09afec526946dea91a868fab0ecc08074215a2
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1502463254,1502464195,1492a866a13c3591be21a43244e5737d02fad703
1492a866a13c3591be21a43244e5737d02fad703,1492a866,Bump versionCode,"Bump versionCode

Change-Id: Id8a4e32c7cde3424676d58d72016561de64f2c81
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502396188,1502396188,78392c2aabba4c362ab7d46ff69f1f96000459ae
78392c2aabba4c362ab7d46ff69f1f96000459ae,78392c2a,Fix saving pages for offline use (convincingly).,"Fix saving pages for offline use (convincingly).

An enormous thanks to Rita for continuing to test offline reading lists,
and managing to hit upon a reproducible failure mode.

The failure mode: Disable RestBase in settings!
That's right. This means that the offline feature hasn't been working for
any users in China, or for any other user for whom the fallback mechanism
was triggered from Rb to Mw, for whatever reason.

The bug is that the SavedPageSyncService has a line of code where it
baseically expects the response to be a RestBase reply, instead of a
MobileView reply.  This has now been fixed.

So... when can we officially deprecate support for MobileView, again? ;)

Bug: T171939
Bug: T172900
Bug: T169819
Change-Id: I4b888923de48affa837d6c33fb1eae1a74738ff9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502390197,1502391677,d24f2c33270d116795fc0a3644cc4f1f3e84816c
d24f2c33270d116795fc0a3644cc4f1f3e84816c,d24f2c33,"Merge ""Correctly update page model state after querying reading list DAO.""","Merge ""Correctly update page model state after querying reading list DAO.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502385642,1502385642,"3e11b6476f210dc7a1c4de9d5767b4cc182c21fc,0b247e5145df0fd202ca8c1ec79a3c1c095d8e55"
3e11b6476f210dc7a1c4de9d5767b4cc182c21fc,3e11b647,"Merge ""No longer use color states for edit toolbar buttons.""","Merge ""No longer use color states for edit toolbar buttons.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502380591,1502380591,"5bf3f20967c6dbacdb8e77516861b7806f95f0d9,ae54e08d65b38e9d1e7abbfee4a0e801cf834702"
5bf3f20967c6dbacdb8e77516861b7806f95f0d9,5bf3f209,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502376241,1502376241,"62a575773a52d9c823d24c75926ba15ad9c1f3a7,d4cf2c3fb18eb366fbf14872697ffb225b077b4e"
0b247e5145df0fd202ca8c1ec79a3c1c095d8e55,0b247e51,Correctly update page model state after querying reading list DAO.,"Correctly update page model state after querying reading list DAO.

Bug: T172999
Change-Id: I3c1f99de3934bcf0869926aec2b370414eb10f15
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502376237,1502376237,ae54e08d65b38e9d1e7abbfee4a0e801cf834702
ae54e08d65b38e9d1e7abbfee4a0e801cf834702,ae54e08d,No longer use color states for edit toolbar buttons.,"No longer use color states for edit toolbar buttons.

This makes it more compatible with lower API versions.

Bug: T172903
Change-Id: Idbf6b7a602f4f0b3d475e9ddb30f10338ce027f2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502373840,1502373840,62a575773a52d9c823d24c75926ba15ad9c1f3a7
62a575773a52d9c823d24c75926ba15ad9c1f3a7,62a57577,Properly show progress bar when searching.,"Properly show progress bar when searching.

For some reason, the progress bar was no longer getting enabled when
performing a prefix search from our main Search interface.

Change-Id: Idcaf4b22aa4580753637ea68b99c44b93653138f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502371105,1502371105,d439e318a96d135f0c614bb03a4e19e8e604f13a
d4cf2c3fb18eb366fbf14872697ffb225b077b4e,d4cf2c3f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I779b412747ad794bc36d29e86d4600c009ed043b
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1502344913,1502344913,d439e318a96d135f0c614bb03a4e19e8e604f13a
f3a4de35d276ecebc87df8a580e4b6c3fb781e37,f3a4de35,Separate different parts of the message with a new line,"Separate different parts of the message with a new line

It's better to separate the different parts of the message
with a new line than a space as it could improve improve it's
readability.

Change-Id: I0d8735d0555c89844ae7c012b3b4494304b183ac
",,,,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,1502287150,1502287150,010c336c6214a29c16b9ce3a7093730845788435
d439e318a96d135f0c614bb03a4e19e8e604f13a,d439e318,"Merge ""Add onboarding feed card for Offline Library.""","Merge ""Add onboarding feed card for Offline Library.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502287146,1502287146,"bec0f8fb28bfd760d91043e0a42722d80f48fa57,4b474808fb5e8e557dc05bee733301f7f2402f67"
bec0f8fb28bfd760d91043e0a42722d80f48fa57,bec0f8fb,"Merge ""Framework for onboarding cards in the Explore feed.""","Merge ""Framework for onboarding cards in the Explore feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502287114,1502287114,"010c336c6214a29c16b9ce3a7093730845788435,e9f3a4410940ff9085267f71264c67489ec32866"
4b474808fb5e8e557dc05bee733301f7f2402f67,4b474808,Add onboarding feed card for Offline Library.,"Add onboarding feed card for Offline Library.

Also refine the logic of showing/hiding the offline onboarding card vs.
the offline notification card.

Bug: T172187
Bug: T172132
Change-Id: I1ea46e2867516aebcabfa15c1bfad2615545438b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502220553,1502281445,e9f3a4410940ff9085267f71264c67489ec32866
e9f3a4410940ff9085267f71264c67489ec32866,e9f3a441,Framework for onboarding cards in the Explore feed.,"Framework for onboarding cards in the Explore feed.

Bug: T172187
Change-Id: Ic04249a6f655381574dcf2902b36bbd1067f10e1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502219560,1502281083,efdbc56a7127f6fd6479fd65fe0fb34b7a89c14e
010c336c6214a29c16b9ce3a7093730845788435,010c336c,"Merge ""Add better empty state to Offline Library screen.""","Merge ""Add better empty state to Offline Library screen.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502227744,1502227744,"48470a2eeca49de32bbdc52d69bda02ac13a832d,efdbc56a7127f6fd6479fd65fe0fb34b7a89c14e"
48470a2eeca49de32bbdc52d69bda02ac13a832d,48470a2e,"Merge ""Support loading Main Page from offline compilation.""","Merge ""Support loading Main Page from offline compilation.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502227219,1502227219,"b1549361cda369fbcdcbf7fd302d5556ea78d89c,bb31431ebf7d89018a5518a0388c0a0de13de7cc"
efdbc56a7127f6fd6479fd65fe0fb34b7a89c14e,efdbc56a,Add better empty state to Offline Library screen.,"Add better empty state to Offline Library screen.

(This is the first introduction of the new ""library"" and ""packs"" verbiage,
and can be independent of the Grand Renaming that will follow soon.)

Bug: T172553
Change-Id: I9bd2a83bd940bd713f5c91476643f98938937c21
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502213426,1502213426,b1549361cda369fbcdcbf7fd302d5556ea78d89c
b1549361cda369fbcdcbf7fd302d5556ea78d89c,b1549361,"Merge ""Split yes-no strings used in dialog box questions into separate strings tags""","Merge ""Split yes-no strings used in dialog box questions into separate strings tags""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502211423,1502211423,"a4e74b3f94cff68be1427dbd46612aa9f087e5f7,1ec36917ac62b687e3dc33b670ab2b573a24fd97"
bb31431ebf7d89018a5518a0388c0a0de13de7cc,bb31431e,Support loading Main Page from offline compilation.,"Support loading Main Page from offline compilation.

Applies to loading the main page from the Feed card, as well as loading
the main page as the ""default"" page when opening a blank tab in
PageActivity.

Bug: T166312
Change-Id: Id18a1138b672e1d817e985f1592ab489123efec2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502209738,1502210447,a4e74b3f94cff68be1427dbd46612aa9f087e5f7
a4e74b3f94cff68be1427dbd46612aa9f087e5f7,a4e74b3f,Bump versionCode,"Bump versionCode

Change-Id: If441166ee58222f2ce554529c575e0b9d4899300
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502204112,1502204112,2094d60821ff6ecdbf83a0f74970a41972295c5a
2094d60821ff6ecdbf83a0f74970a41972295c5a,2094d608,Show offline feed card only for pre-beta releases,"Show offline feed card only for pre-beta releases

Bug: T172791
Change-Id: I57bebf1fb4b0e8819e730539411b8aac35380740
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1502202754,1502202798,26700830d5aff6eb92691a7840f065882f25208f
d6ac43ff64cd7b0d9262e5c8d97a4bd8dba8dae2,d6ac43ff,Shorten the rationale,"Shorten the rationale

The rationale shown when storage permission is revoked seems a bit
too long and makes the assumption that the user would see the dialog
to grant permission each time he does the concerned action. It's not
always the fact as the user has the choice of ""Don't show again"" and
may have used it to avoid the dialog from popping up.

Shorten the message thus making no assumptions about the dialog being
shown.

Change-Id: Icd554217c9cf3cf955e4ddfe7c3ce2ba24d9a1a8
",,,,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,1502200857,1502201179,37cf88bc4917c25fbd678ddd88de5df6f89d23d8
26700830d5aff6eb92691a7840f065882f25208f,26700830,"Merge ""Make frwiki main page take up the full screen""","Merge ""Make frwiki main page take up the full screen""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502135347,1502135347,"09b6bdba11db6fcb5c5eb6839dd27f7da6094c9d,3371da4af419eebde6c1eb81c38eb99d850b5d58"
09b6bdba11db6fcb5c5eb6839dd27f7da6094c9d,09b6bdba,Remove unneeded Parsoid styles,"Remove unneeded Parsoid styles

These appear no longer necessary due to upstream changes.

Depends-On: I25e22594c12b6ac4001cd6ef4731155cbaa03ab9
Change-Id: I5d6425e9e42fbfde1fc28c129d6a5a98ed527d62
",,,,Michael Holloway,mholloway@wikimedia.org,Dbrant,dbrant@wikimedia.org,1501800978,1502133961,ee61a7a58558b2c50494678526fb265c9f360224
1ec36917ac62b687e3dc33b670ab2b573a24fd97,1ec36917,Split yes-no strings used in dialog box questions into separate strings tags,"Split yes-no strings used in dialog box questions into separate strings tags

Currently, the yes-no strings in the Android app are used to confirm the following dialog box questions:

- ""This saved page may be out of date, and must be refreshed for editing to be enabled. Would you like to refresh the page?""
- ""The page has been modified. Are you sure you want to exit without saving your changes?""
- ""This will delete all of your browsing history, and close any currently open tabs. Are you sure?""
- ""Are you sure you want to cancel downloading this compilation?""
- ""Are you sure you want to close all tabs?""
- ""Are you sure you want to clear your search history?""
- ""This will delete any previously synced reading lists from remote storage. Proceed?""

These are the places where new tags were created for the yes-no string.

Bug: T69628
Change-Id: I620d5646a03a0744feab552a8bf3ae04c73de1b3
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1502133317,1502133317,ee61a7a58558b2c50494678526fb265c9f360224
ee61a7a58558b2c50494678526fb265c9f360224,ee61a7a5,Bump versionCode,"Bump versionCode

Change-Id: I343a44da649b946440badf8c475f767dd69afef8
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502125100,1502125100,909dce3c406e399d1c731b483ad1c53a949c9b0d
909dce3c406e399d1c731b483ad1c53a949c9b0d,909dce3c,"Merge ""Fix possible crash in Gallery.""","Merge ""Fix possible crash in Gallery.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502125025,1502125025,"7476a0757b03ed077e3ed3c0529caf4962793433,183bab67bbe9e94cc9cd808b6520c8ebd9d4245f"
7476a0757b03ed077e3ed3c0529caf4962793433,7476a075,"Merge ""Refactor wbgetentities response object""","Merge ""Refactor wbgetentities response object""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502124099,1502124099,"cec1500110870b3e49c6db08e291d04b2600bf24,95ba0a0025d95cc961acf4fdfccf5596bfed87de"
cec1500110870b3e49c6db08e291d04b2600bf24,cec15001,"Merge ""Fix navigating to file page from gallery images.""","Merge ""Fix navigating to file page from gallery images.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502121825,1502121825,"67e78377aedc0514bd802efe5d9a29a8319964e2,1db04a08720516976ffa8ec1e5626c98c78f36e5"
67e78377aedc0514bd802efe5d9a29a8319964e2,67e78377,"Merge ""Handle other domain links correctly""","Merge ""Handle other domain links correctly""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1502121809,1502121809,"b6613cc031e10d97a879451b1b6d2b5a8be00b7f,7788e6f1aa30883f714b9d8d6886b1df47b7ff97"
1db04a08720516976ffa8ec1e5626c98c78f36e5,1db04a08,Fix navigating to file page from gallery images.,"Fix navigating to file page from gallery images.

The call to startActivityForResult() must be made from the context of the
activity that will be receiving the onActivityResult() event.

Bug: T170755
Change-Id: I8fce78c094ef67d6ee471664e81873a114407a08
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1502119744,1502121237,7788e6f1aa30883f714b9d8d6886b1df47b7ff97
7788e6f1aa30883f714b9d8d6886b1df47b7ff97,7788e6f1,Handle other domain links correctly,"Handle other domain links correctly

Links originating from file pages might be links to other domains such as
commons.wikimedia.org, upload.wikimedia.org etc. They were incorrectly
prefixed with the Wikisite prefix (https://en.wikipedia.org) which resulted
in incorrect links being sent to the Url handler. This regression was
introduced as a consequence of,

  db160f6 Consolidate/solidify LinkHandler

Check if they are other domain links and handle them correctly. While at it,
reformat a piece of code to be more readable.

Change-Id: I6c2091af9fc4a0d4ba5c6230fbe38f0c928a4fe8
",,,,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,Dmitry Brant,dbrant@wikimedia.org,1501912621,1502121003,37cf88bc4917c25fbd678ddd88de5df6f89d23d8
95ba0a0025d95cc961acf4fdfccf5596bfed87de,95ba0a00,Refactor wbgetentities response object,"Refactor wbgetentities response object

* Restructure the class to better reflect the response object hierarchy

* Tighten up access modifiers per the project coding conventions

* Remove inappropriate @Required annotations

Bug: T156383
Change-Id: I8e4be1afa6dbb136f3035d125e4372dc10840400
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1502117798,1502119288,b6613cc031e10d97a879451b1b6d2b5a8be00b7f
b6613cc031e10d97a879451b1b6d2b5a8be00b7f,b6613cc0,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I33f8014a34c2df6b53373ca3d22acf3fd094d056
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1502084504,1502112011,37cf88bc4917c25fbd678ddd88de5df6f89d23d8
183bab67bbe9e94cc9cd808b6520c8ebd9d4245f,183bab67,Fix possible crash in Gallery.,"Fix possible crash in Gallery.

This fixes a long-standing TODO in the metadata of gallery items,
that no longer retrieves metadata by reflection, and forces consumers
to use the explicit fields provided by ExtMetadata.

I've actually observed a crash that was caused by the old behavior,
and this patch resolves it.

java.lang.ClassCastException: java.lang.Long cannot be cast to org.wikipedia.gallery.ExtMetadata$Values
at org.wikipedia.gallery.ExtMetadata.toMap(ExtMetadata.java:64)
at org.wikipedia.gallery.GalleryItem.<init>(GalleryItem.java:37)

Change-Id: I8e1a44d8ec76edc9be43addf43237dc69633f155
",,,,Dmitry Brant,me@dmitrybrant.com,Dmitry Brant,me@dmitrybrant.com,1501875805,1501875805,37cf88bc4917c25fbd678ddd88de5df6f89d23d8
37cf88bc4917c25fbd678ddd88de5df6f89d23d8,37cf88bc,Update CSS styles,"Update CSS styles

Change-Id: Ifa76bc229abc71b736e7a3f377a6a1b81ca739ae
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501793597,1501793597,375cbc8c9b4d80f43d09339ed5a62de534ec2b01
375cbc8c9b4d80f43d09339ed5a62de534ec2b01,375cbc8c,"Merge ""Update hard-coded list of compilations for testing.""","Merge ""Update hard-coded list of compilations for testing.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501789925,1501789925,"9a56c02499e8c78c168678378c9b1b68adfd314a,3e449aa218e1990793777021a8bd79053ffa36fa"
9a56c02499e8c78c168678378c9b1b68adfd314a,9a56c024,Update reference screenshots,"Update reference screenshots

Change-Id: I354ef8a9fd63c2499ad3a7f4a08af74cb2463539
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501786179,1501786218,7e1e2119a887360eba5ea40e307b5c83f3565a0b
7e1e2119a887360eba5ea40e307b5c83f3565a0b,7e1e2119,Fix: Check for 2FA response type before displaying a 2FA prompt,"Fix: Check for 2FA response type before displaying a 2FA prompt

Bug: T170791
Change-Id: I432a0e21092f3fde4f428d24559e04296f01582c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501781428,1501781662,622b324d11bba61becf6dfd22ffd8e93cea8ee12
3e449aa218e1990793777021a8bd79053ffa36fa,3e449aa2,Update hard-coded list of compilations for testing.,"Update hard-coded list of compilations for testing.

Change-Id: I2e5ef44fe3287f15e34ea4592b9a727f562b166e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501779631,1501779631,622b324d11bba61becf6dfd22ffd8e93cea8ee12
622b324d11bba61becf6dfd22ffd8e93cea8ee12,622b324d,"Merge ""Refresh reading list fragment contents upon Resume.""","Merge ""Refresh reading list fragment contents upon Resume.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501775497,1501775497,"bcb2bfa42b41b0996ecff8416d358d9063a54ed6,39b82996c83faa378e7212486fe9d9f55cae08f3"
39b82996c83faa378e7212486fe9d9f55cae08f3,39b82996,Refresh reading list fragment contents upon Resume.,"Refresh reading list fragment contents upon Resume.

Bug: T172401
Change-Id: Ib868194447162b5159266e5977c3f0f01a04517c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501774055,1501774055,242ae405d59dcc75b2898c259d5c33c116d1407c
bcb2bfa42b41b0996ecff8416d358d9063a54ed6,bcb2bfa4,"Merge ""Correctly state number of reading list articles offline.""","Merge ""Correctly state number of reading list articles offline.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501773978,1501773978,"c6dce7b789e9ea88f9f81709ead1138e2fec0656,242ae405d59dcc75b2898c259d5c33c116d1407c"
c6dce7b789e9ea88f9f81709ead1138e2fec0656,c6dce7b7,"Merge ""Use megabytes instead of mebibytes for reading list data usage.""","Merge ""Use megabytes instead of mebibytes for reading list data usage.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501773733,1501773733,"3bfeab8f9005e811940706392b3a3bc7f417b17d,c0839f55e17c7175232d62c89c5fbeea8ad674f5"
242ae405d59dcc75b2898c259d5c33c116d1407c,242ae405,Correctly state number of reading list articles offline.,"Correctly state number of reading list articles offline.

...by only counting articles that are already fully offline, instead of
articles that may still be in the process of saving.

Bug: T172390
Change-Id: Ifa4d5ea07f8a5141b2d66d3ef6bed56b37dc9bbf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501773004,1501773004,c0839f55e17c7175232d62c89c5fbeea8ad674f5
c0839f55e17c7175232d62c89c5fbeea8ad674f5,c0839f55,Use megabytes instead of mebibytes for reading list data usage.,"Use megabytes instead of mebibytes for reading list data usage.

Bug: T172386
Change-Id: I3500e0da6ad7d2d066b0c8b3d3cd6b92a1da1677
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501772613,1501772613,7b73d4aaa3b2959a60cccd51af5c318a83e53707
3bfeab8f9005e811940706392b3a3bc7f417b17d,3bfeab8f,"Merge ""Hygiene: Update mediaWikiBaseUri dev setting text""","Merge ""Hygiene: Update mediaWikiBaseUri dev setting text""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501772283,1501772283,"d5245ebafc234efd0a01adba5b3717862601a46a,64ef149be362a7f21160a923b3e12574a6a67859"
64ef149be362a7f21160a923b3e12574a6a67859,64ef149b,Hygiene: Update mediaWikiBaseUri dev setting text,"Hygiene: Update mediaWikiBaseUri dev setting text

* Remove authmanager cloud vps info (it no longer exists)

* Remove directive to use Simple English (misleading because all languages
  seem to work)

* Update beta cluster URL to use https

Change-Id: I93f80805cde0a5d53831a8a82d2e0a0f7e81a817
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501767202,1501771577,8d7e11d2ad91f98cbcaccbf7584dc370327771bf
d5245ebafc234efd0a01adba5b3717862601a46a,d5245eba,"Merge ""Update design of compilation layouts for better scrollability.""","Merge ""Update design of compilation layouts for better scrollability.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501769336,1501769336,"7b73d4aaa3b2959a60cccd51af5c318a83e53707,d8929db637ba76c76bd7fa5eda77b5a2c7f9c788"
7b73d4aaa3b2959a60cccd51af5c318a83e53707,7b73d4aa,Hygiene: remove decimal format string from translation.,"Hygiene: remove decimal format string from translation.

Bug: T171952
Change-Id: I5289313cd41b8b71e7884be44f04571c803fc822
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501765965,1501765965,8d7e11d2ad91f98cbcaccbf7584dc370327771bf
d8929db637ba76c76bd7fa5eda77b5a2c7f9c788,d8929db6,Update design of compilation layouts for better scrollability.,"Update design of compilation layouts for better scrollability.

Change-Id: Ice2c21355957a7822df68698b6b433ee1c405e63
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1501690603,1501765152,8d7e11d2ad91f98cbcaccbf7584dc370327771bf
8d7e11d2ad91f98cbcaccbf7584dc370327771bf,8d7e11d2,Compilations: close the loop.,"Compilations: close the loop.

This implements downloading of compilations.

Some architecture notes:
This introduces an abstract Fragment that becomes an observer of the
system DownloadManager, by polling it at a predefined interval.

So then, the other fragments that show lists of compilations (or a single
compilation) will automatically become subscribers to the polling of the
DownloadManager.  Upon every poll event, we'll update each compilation
item with the appropriate state that the DownloadManager reports.

If a compilation item is in the middle of being downloaded, we show the
DownloadControlView component inline with the item.

TODO:
- Implement deleting a downloaded compilation from disk.
- Implement more robust behavior upon successful download completion.

Bug: T167523
Bug: T164764
Bug: T167527
Change-Id: I2741c14894d990c59c30bd685546c2dd61c5cab3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501071951,1501704048,4b32e48664a2f86b36d2bf25bd52ef2cbbf34c7a
4b32e48664a2f86b36d2bf25bd52ef2cbbf34c7a,4b32e486,"Merge ""Feed design tweak #2: Update search bar width limiting""","Merge ""Feed design tweak #2: Update search bar width limiting""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501613850,1501613850,"43e2871c067d6c72ec625c69b510ace38f5b8969,fef7198175b6b0f28f306516fc1a48e4c4d01426"
fef7198175b6b0f28f306516fc1a48e4c4d01426,fef71981,Feed design tweak #2: Update search bar width limiting,"Feed design tweak #2: Update search bar width limiting

Limit it to 2/3 the screen width when in a multi-column configuration,
regardless of actual screen width.

Per T171328#3481077.

Bug: T171328
Change-Id: Ia8b0faf9b2e885566daee4a095e3628ac47ba29e
",,,,Michael Holloway,mholloway@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501608588,1501613522,f4310f90205b75c6e102e707bd948c1caba005c7
43e2871c067d6c72ec625c69b510ace38f5b8969,43e2871c,Design tweak: fix background of list item thumbnails.,"Design tweak: fix background of list item thumbnails.

The background (with thin outline) was not being rendered properly for
thumbnails that are placeholders or transparent images.

Change-Id: I5068e815854bf33074233c2efb1874f48bd619cd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501608360,1501608641,f4310f90205b75c6e102e707bd948c1caba005c7
f4310f90205b75c6e102e707bd948c1caba005c7,f4310f90,"Merge ""Update build tools to 26.0.0 (again)""","Merge ""Update build tools to 26.0.0 (again)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501606758,1501606758,"903e4f9f02263c3b81541f314a6d4ab4cf9ceb70,e0568dd6c6fc49f5e581837420d162692c3233e1"
903e4f9f02263c3b81541f314a6d4ab4cf9ceb70,903e4f9f,"Merge ""Feed design tweaks, pt. 1: adjust card margins""","Merge ""Feed design tweaks, pt. 1: adjust card margins""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501603206,1501603206,"cd38b1d21d1d69cc08ec65412dbbe4b30c15cab0,be4a9137154b7382ad298ebc573c5fa76c952f13"
e0568dd6c6fc49f5e581837420d162692c3233e1,e0568dd6,Update build tools to 26.0.0 (again),"Update build tools to 26.0.0 (again)

Bug: T171562
Change-Id: I52b8115b0aa3d7e91b86d41060547b6bad5dae76
",,,,Michael Holloway,mholloway@wikimedia.org,Dbrant,dbrant@wikimedia.org,1501091811,1501602937,cd38b1d21d1d69cc08ec65412dbbe4b30c15cab0
cd38b1d21d1d69cc08ec65412dbbe4b30c15cab0,cd38b1d2,"Merge ""Update testing scripts to accept Android SDK location argument""","Merge ""Update testing scripts to accept Android SDK location argument""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501602732,1501602732,"e2419c51f1a913a0ba2bc6801cef2c6e53aec9ca,92b97eb1f9ace2b495b39e5572f47641a0c3f220"
e2419c51f1a913a0ba2bc6801cef2c6e53aec9ca,e2419c51,"Merge ""Hygiene: remove unused Gradle bits""","Merge ""Hygiene: remove unused Gradle bits""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501601536,1501601536,"2fc9812768265ee86628986cec3217d3a0d69bc1,9fdebc1641fffa93daafbde10f0b1242389d4ea3"
2fc9812768265ee86628986cec3217d3a0d69bc1,2fc98127,"Merge ""Update FileUtil read* methods""","Merge ""Update FileUtil read* methods""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501600870,1501600870,"f586baea582f1f3cbc0f9a32b93c1b9d405d6664,953a7d1ef96db70b70be9dc84ca571e02ef86ee4"
be4a9137154b7382ad298ebc573c5fa76c952f13,be4a9137,"Feed design tweaks, pt. 1: adjust card margins","Feed design tweaks, pt. 1: adjust card margins

Bug: T171328
Change-Id: I005289dfd3ae57e06e10deed4ff84a7633795801
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501540104,1501599085,f586baea582f1f3cbc0f9a32b93c1b9d405d6664
f586baea582f1f3cbc0f9a32b93c1b9d405d6664,f586baea,"Merge ""Design tweak: update styling of page title and description.""","Merge ""Design tweak: update styling of page title and description.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501595694,1501595694,"45a99a5d4a202a60b23b7b918b3d4d9c3c4821f3,c837d60bc98d3c3da8370785e97d6a6ae4ecf321"
953a7d1ef96db70b70be9dc84ca571e02ef86ee4,953a7d1e,Update FileUtil read* methods,"Update FileUtil read* methods

The current Scanner-based implementation of readFile fails
persistently but for unknown reasons in Docker, throwing a
NoSuchElementException for some files.

This replaces both Scanner-based read* implementations with calls to
Commons I/O library functions, which should be more robust (and indeed
cause no trouble in Docker).

Commons I/O is added as a testing dependency only in order to avoid
increasing the APK size.

Change-Id: I6d034957c7a598d68de362394d21d5153b98d52f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501565906,1501594487,6a6c0d2230ceb5b7545dac8f02f42ed09f8e20e2
45a99a5d4a202a60b23b7b918b3d4d9c3c4821f3,45a99a5d,Clean up SDK licenses,"Clean up SDK licenses

Only android-sdk-license is needed for our CI setup; the other two are
unnecessary.

Change-Id: I9e6e9af976ea3b7c10605c218ca554493ff92b0a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501556404,1501556404,6a6c0d2230ceb5b7545dac8f02f42ed09f8e20e2
9fdebc1641fffa93daafbde10f0b1242389d4ea3,9fdebc16,Hygiene: remove unused Gradle bits,"Hygiene: remove unused Gradle bits

Change-Id: I7f8e455ac8216f29750ec6bcd8554f67d6fddd62
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501554997,1501554997,6a6c0d2230ceb5b7545dac8f02f42ed09f8e20e2
6a6c0d2230ceb5b7545dac8f02f42ed09f8e20e2,6a6c0d22,Hygiene: update ref screenshots,"Hygiene: update ref screenshots

Change-Id: Ia945e7571eaa7610a2f5b7f5a4d3a2f7295a0fe7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501537669,1501537669,f1b556d3997140b4231dbe6a228106369f48b12c
f1b556d3997140b4231dbe6a228106369f48b12c,f1b556d3,"Merge ""Hygiene: Removed unused resources""","Merge ""Hygiene: Removed unused resources""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501532145,1501532145,"b0f2171f49e72117d6fa22b735dd6bc228c827cc,c676be64cf6a719a4ee3c497882f07e5a7894bc2"
c837d60bc98d3c3da8370785e97d6a6ae4ecf321,c837d60b,Design tweak: update styling of page title and description.,"Design tweak: update styling of page title and description.

...and consolidate a few things in the process.

Bug: T165415
Change-Id: I979107d96363d3f10bf280fa2d38f41871bb38dc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501530172,1501531891,2916d30b42d87994715dc757951b8acafdd51b53
b0f2171f49e72117d6fa22b735dd6bc228c827cc,b0f2171f,"Merge ""Update styling of ToC for light and dark mode.""","Merge ""Update styling of ToC for light and dark mode.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501530498,1501530498,"6800d1b3559ac6abdcfa3b8c38b02319e0ffca17,2916d30b42d87994715dc757951b8acafdd51b53"
c676be64cf6a719a4ee3c497882f07e5a7894bc2,c676be64,Hygiene: Removed unused resources,"Hygiene: Removed unused resources

Also removes some unit tests that exercise the otherwise unused resources.

This resolves the build warnings regarding string resources with missing
default translations; apparently these aren't resolved automatically
during TWN sync after all.

Change-Id: I09ac6ad4cd81e178ac029a0a5a562a85c3911340
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501529723,1501529723,bdde443efb11b46de45ecb8300939de1c03b6f9d
2916d30b42d87994715dc757951b8acafdd51b53,2916d30b,Update styling of ToC for light and dark mode.,"Update styling of ToC for light and dark mode.

...including a few simplifications.

Bug: T165415
Change-Id: I74d46e2e141eeace4d6fc0efe69713c77cf83ba4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501529345,1501529403,c7850c3e568de915159653c506ab4650eac1c0b5
6800d1b3559ac6abdcfa3b8c38b02319e0ffca17,6800d1b3,"Merge ""Design tweak: fix rounded corners of compound reading list thumbnails.""","Merge ""Design tweak: fix rounded corners of compound reading list thumbnails.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501528908,1501528908,"bdde443efb11b46de45ecb8300939de1c03b6f9d,ac89de56ed8b4bf496a9d0a51cf003376a216c84"
ac89de56ed8b4bf496a9d0a51cf003376a216c84,ac89de56,Design tweak: fix rounded corners of compound reading list thumbnails.,"Design tweak: fix rounded corners of compound reading list thumbnails.

Bug: T165415
Change-Id: I346d7469c81ce076ebb353e45c8bc2a234370d70
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501527312,1501527312,c7850c3e568de915159653c506ab4650eac1c0b5
bdde443efb11b46de45ecb8300939de1c03b6f9d,bdde443e,Correctly render explicit background color in ZoomableDraweeView.,"Correctly render explicit background color in ZoomableDraweeView.

Bug: T106077
Change-Id: I25fe0384678b7a7013785a4541fb36d6797dc0ef
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501526880,1501527092,c7850c3e568de915159653c506ab4650eac1c0b5
c7850c3e568de915159653c506ab4650eac1c0b5,c7850c3e,"Merge ""Improve (fix?) loading updating of pages for offline use.""","Merge ""Improve (fix?) loading updating of pages for offline use.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501514837,1501514837,"fb776cb85795a5133d4c78e46ff1528e4ae4ef42,3f635556639365135a26328f042c29ac3a9d674e"
fb776cb85795a5133d4c78e46ff1528e4ae4ef42,fb776cb8,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I489dd3dfb757733de8c68bc19af0a7f38351c0d8
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1501506810,1501506810,1b2da2d3fcbb74b61aa6df4b3c6ea7fe6e8cb410
3f635556639365135a26328f042c29ac3a9d674e,3f635556,Improve (fix?) loading updating of pages for offline use.,"Improve (fix?) loading updating of pages for offline use.

This takes care of a few weak spots in our logic for saving and updating
articles in reading lists.
Here's an overview of our *current* behavior:

- Navigate to a page (load the page content from the network)
- Save it to a reading list (put the page in the sync queue, which will
  download it to the SAVE cache).
- Do other stuff.
- Go offline.
- Navigate to the original page.
- The page is loaded from the offline cache, BUT!! We're forgetting
  something else:
- Whenever we load a page, we fire off a task that checks whether this
  page belongs to a reading list (to fill in the bookmark icon). When this
  task returns, and the page is part of a reading list, we *invalidate* the
  page, putting it back in the queue of pages to be downloaded by the sync
  service. This invalidation happens regardless of whether we're currently
  online or offline. Something doesn't sound right about this.

Here's the updated logic in this patch:

- Checking whether the page belongs to a reading list is now a first-class
  prerequisite to loading the page contents.
- Once we know whether the page is part of a reading list, we can fill in
  the bookmark icon without querying the db again.
- But most crucially, this knowledge allows us to specify which cache the
  Lead and Remaining sections will be written to!  This completely
  eliminates the need to invalidate the page, because any updated content
  from the network will be automatically written to the correct cache.

I've renamed some of the page loading methods in PageFragmentLoadState to
start with the words ""pageLoad"", to give a slightly better sense that
these methods are related and/or chained together. Ideally, they should be
refactored into a promise-style chain of calls, e.g.:

loadLeadSection().then( ... ).then( ... )...

One other thing: Since BaseActivity now knows when the user goes online, I
added a call to sync the SavedPageService, for good measure.

Bug: T169819
Bug: T171939
Change-Id: I1c96a1ce28c4d2cd2c47a3b13f2fd8a9ea8d446b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501268234,1501279394,1b2da2d3fcbb74b61aa6df4b3c6ea7fe6e8cb410
1b2da2d3fcbb74b61aa6df4b3c6ea7fe6e8cb410,1b2da2d3,Expect image info with dimensions,"Expect image info with dimensions

The people have spoken.

Bug: T163714
Change-Id: I219768c2f14b6a68e5fd4f3b0db3d35dde9b343d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501250191,1501250191,e8d95a40f245fdcdd31a3c322061455cdfe39715
92b97eb1f9ace2b495b39e5572f47641a0c3f220,92b97eb1,Update testing scripts to accept Android SDK location argument,"Update testing scripts to accept Android SDK location argument

Updates our non-periodic testing job scripts to accept an optional
command line argument containing the location of an Android SDK
installation.  This can be configured at the job level in Jenkins.
(The jobs have been updated accordingly in Jenkins via the web UI but
this change should be memorialized in the integration/config repo.)

Bug: T171811
Change-Id: If5801d0556e6d084e236136e9b2957a7cef32538
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501115888,1501195213,e8d95a40f245fdcdd31a3c322061455cdfe39715
e8d95a40f245fdcdd31a3c322061455cdfe39715,e8d95a40,"Merge ""Hygiene: Remove redundant ANDROID_HOME setting""","Merge ""Hygiene: Remove redundant ANDROID_HOME setting""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501190128,1501190128,"d030ff587ebc6a105cdb03e26d60820b8c9fefce,08f612a5451ef4a1a1a0d75451d2dde39a38b888"
d030ff587ebc6a105cdb03e26d60820b8c9fefce,d030ff58,update reference screenshots,"update reference screenshots

Change-Id: I4304545249a1fd5a606190b7be3e29a839d33fbf
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501188071,1501188071,fc6c1e17f14abeadf631fe2222addf95c1d32bfd
fc6c1e17f14abeadf631fe2222addf95c1d32bfd,fc6c1e17,"Merge ""Compilation detail view: add download control widget""","Merge ""Compilation detail view: add download control widget""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501184774,1501184774,"530e8ed00f1c8dd2a99332934ba688414979a985,071c13fa0dd2a27201db616c392c2e268966b2a1"
530e8ed00f1c8dd2a99332934ba688414979a985,530e8ed0,"Merge ""Update styling of Reference bottom sheet.""","Merge ""Update styling of Reference bottom sheet.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501183663,1501183663,"c2977f272ab21cdc25f26bbd1a6aecc70bb2931a,2ab50cb90c1934dc7e6655f3b31663865ab8613e"
c2977f272ab21cdc25f26bbd1a6aecc70bb2931a,c2977f27,"Merge ""Update styling of theme chooser dialog.""","Merge ""Update styling of theme chooser dialog.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501183206,1501183206,"cd3b12de3360b9ac780818ab34c85b929c6a4a9a,0dde00016099176cb9273ceabad14bb27e9799fc"
cd3b12de3360b9ac780818ab34c85b929c6a4a9a,cd3b12de,"Merge ""Compilation detail view follow-up.""","Merge ""Compilation detail view follow-up.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501182935,1501182935,"fcaafd3c40f9392077bd39087f9cf82d84d9aa3f,476d397c056cfdbb2453327b490b577638cff104"
08f612a5451ef4a1a1a0d75451d2dde39a38b888,08f612a5,Hygiene: Remove redundant ANDROID_HOME setting,"Hygiene: Remove redundant ANDROID_HOME setting

SDK installation is managed by the Jenkins emulator plugin for our
periodic job, which uses it; no need to set it here.

Change-Id: I134dd00a76c09b559c6f333bddfde66482166abb
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501182095,1501182095,fcaafd3c40f9392077bd39087f9cf82d84d9aa3f
fcaafd3c40f9392077bd39087f9cf82d84d9aa3f,fcaafd3c,"Merge ""Fake out Explore toolbar overlap as one single bar.""","Merge ""Fake out Explore toolbar overlap as one single bar.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501179077,1501179077,"931f41747eaab132e4e68874da4481bd7f96fc5d,687c7d11e92d76cfd94efded57264ff63c4bbf38"
931f41747eaab132e4e68874da4481bd7f96fc5d,931f4174,"Merge ""Add offline compilation detail view""","Merge ""Add offline compilation detail view""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501178767,1501178767,"3dbec47981efa74285700f725084321d8d34adf8,959718e1ddbda1d1b3daf6d54995916727bf9da3"
476d397c056cfdbb2453327b490b577638cff104,476d397c,Compilation detail view follow-up.,"Compilation detail view follow-up.

Change-Id: I976302dc9fbc5e497eda8d45f9d26a875879cd57
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501178454,1501178454,959718e1ddbda1d1b3daf6d54995916727bf9da3
0dde00016099176cb9273ceabad14bb27e9799fc,0dde0001,Update styling of theme chooser dialog.,"Update styling of theme chooser dialog.

Change-Id: I75d324b31747f215cf35785330c4514f17ed2fca
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501176207,1501176207,3dbec47981efa74285700f725084321d8d34adf8
2ab50cb90c1934dc7e6655f3b31663865ab8613e,2ab50cb9,Update styling of Reference bottom sheet.,"Update styling of Reference bottom sheet.

Bug: T171469
Change-Id: I212c028447c6cc808ce626a1fce3062525872534
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501175457,1501175457,3dbec47981efa74285700f725084321d8d34adf8
687c7d11e92d76cfd94efded57264ff63c4bbf38,687c7d11,Fake out Explore toolbar overlap as one single bar.,"Fake out Explore toolbar overlap as one single bar.

This will dynamically set or remove the elevation on the Toolbar in the
Feed, based on the scroll state of the feed contents (the scroll state is
borrowed from whether the Search icon is currently shown), thereby making
it look like one continuous app bar when scrolled to the top.

The alternative (using a CollapsingToolbarLayout with AppBarLayout with
SwipeRefreshLayout with custom Toolbar with custom overlapping scroll
behavior) is significantly more complex.

Bug: T170831
Change-Id: I73390ba0dd41690c1289ae76388a2717ebc5d30a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501090769,1501169810,3dbec47981efa74285700f725084321d8d34adf8
3dbec47981efa74285700f725084321d8d34adf8,3dbec479,"Merge ""Feature-flag compilations overflow menu item for pre-beta only.""","Merge ""Feature-flag compilations overflow menu item for pre-beta only.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501169142,1501169142,"d054bcdd248c42757c0455eae9756cb8f8a167cf,0b4755fdfbdb4e2c8a85ee694881201f5423d162"
d054bcdd248c42757c0455eae9756cb8f8a167cf,d054bcdd,"Merge ""Design tweak: background color of bottom nav bar in dark mode.""","Merge ""Design tweak: background color of bottom nav bar in dark mode.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501168558,1501168558,"98078734cc6c26208397e52446d1d43d7d1a13be,69fbe9c9e4b459e0f3229f009aca7fc9af799dfe"
0b4755fdfbdb4e2c8a85ee694881201f5423d162,0b4755fd,Feature-flag compilations overflow menu item for pre-beta only.,"Feature-flag compilations overflow menu item for pre-beta only.

Change-Id: Icfbc89f35e1bfb61382d74f0c43f415b0a59dcb2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501168449,1501168449,69fbe9c9e4b459e0f3229f009aca7fc9af799dfe
69fbe9c9e4b459e0f3229f009aca7fc9af799dfe,69fbe9c9,Design tweak: background color of bottom nav bar in dark mode.,"Design tweak: background color of bottom nav bar in dark mode.

Bug: T169106
Change-Id: I13db883d633851de11d542ffb32a692bb5cc160d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501167927,1501168061,fce00d68f53700896b56e246723eaf67511f0a55
98078734cc6c26208397e52446d1d43d7d1a13be,98078734,"Merge ""Design tweak: update margins and gradient in onboarding screens.""","Merge ""Design tweak: update margins and gradient in onboarding screens.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501167894,1501167894,"9fabd0a07f6b8e1320963a909739622728561c89,fce00d68f53700896b56e246723eaf67511f0a55"
fce00d68f53700896b56e246723eaf67511f0a55,fce00d68,Design tweak: update margins and gradient in onboarding screens.,"Design tweak: update margins and gradient in onboarding screens.

Bug: T169106
Change-Id: Ifa79251406ab7c06c336b710c918dbe0b69b68c0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501166112,1501167517,342dd1b3d68c5b4271bc5d3f35c4f33323dfbbae
9fabd0a07f6b8e1320963a909739622728561c89,9fabd0a0,Design tweak: show reading list sync reminders more smartly.,"Design tweak: show reading list sync reminders more smartly.

- Don't hide the reminders upon Positive action, so that when the user
  comes back from the Settings or Login activity, we can still show the
  reminder with the same conditions as before.

Bug: T166394
Change-Id: I0372f00617331e454e524309f4bef18fa65fc936
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501164476,1501164628,342dd1b3d68c5b4271bc5d3f35c4f33323dfbbae
342dd1b3d68c5b4271bc5d3f35c4f33323dfbbae,342dd1b3,"Merge ""Improve memory management for loading content from compilations.""","Merge ""Improve memory management for loading content from compilations.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501162086,1501162086,"ccc5883634cd8ffae1d1d0f582e192fd3496ea61,d12ad859ac15145e20851a75536b61db8544634d"
ccc5883634cd8ffae1d1d0f582e192fd3496ea61,ccc58836,"Merge ""Limit width of search box in the feed.""","Merge ""Limit width of search box in the feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501161766,1501161766,"4ca523a3d0aebf58bfee5b5813ee3371050eae0e,0e7473144e22ec48d190fa5495dec2558768a238"
4ca523a3d0aebf58bfee5b5813ee3371050eae0e,4ca523a3,"Merge ""Set full span layout parameter on SearchCardView""","Merge ""Set full span layout parameter on SearchCardView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501160485,1501160485,"e58c588d1586a78f04f8945ad356ffc3334825e8,e32515c98116bdc21e9e59a6aff5fff940da5f23"
e58c588d1586a78f04f8945ad356ffc3334825e8,e58c588d,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I0a7e73d4b0a8d2864629a38cbf37217145dd6b50
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1501144151,1501144151,916e7df1004d164a694016c2a46c771561cab330
0e7473144e22ec48d190fa5495dec2558768a238,0e747314,Limit width of search box in the feed.,"Limit width of search box in the feed.

Bug: T171328
Change-Id: Ia69b02dbb5137c96298d193ca684691d9df073cb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501122765,1501122765,e32515c98116bdc21e9e59a6aff5fff940da5f23
d12ad859ac15145e20851a75536b61db8544634d,d12ad859,Improve memory management for loading content from compilations.,"Improve memory management for loading content from compilations.

I've made some optimizations in the LZMA decoding logic that was being
imported in the ZimDroid library, which should now allow it to run
comfortably on older devices with a very small VM size.

Also, this fixes a bug specifically for API 16 where the WebView did not
properly support the DOMParser.parseFromString() function, so we have to
fall back to a different method of creating a temporary DOM.

Change-Id: I2bafc5e748a362e101fa9a893b6e760da7f1a02b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1501117895,1501117895,91b5d2a55a195c9aa96cbb50864206bc1aa5de32
e32515c98116bdc21e9e59a6aff5fff940da5f23,e32515c9,Set full span layout parameter on SearchCardView,"Set full span layout parameter on SearchCardView

Bug: T171328
Change-Id: I55250b2be2c4d87f0384db44bf95e48e834d75b4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501105947,1501106281,916e7df1004d164a694016c2a46c771561cab330
071c13fa0dd2a27201db616c392c2e268966b2a1,071c13fa,Compilation detail view: add download control widget,"Compilation detail view: add download control widget

Bug: T163594
Change-Id: I112d34e07aa83c979a9d89c4bbfa8b505d1c01f8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501019926,1501098912,959718e1ddbda1d1b3daf6d54995916727bf9da3
959718e1ddbda1d1b3daf6d54995916727bf9da3,959718e1,Add offline compilation detail view,"Add offline compilation detail view

Next: add the download management component.

Bug: T163594
Change-Id: I0f31bcb3eaa9625c26c60998004ef64e958d9809
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500659854,1501098906,916e7df1004d164a694016c2a46c771561cab330
916e7df1004d164a694016c2a46c771561cab330,916e7df1,"Merge ""Populate remote compilations with response from CompilationClient.""","Merge ""Populate remote compilations with response from CompilationClient.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501097514,1501097514,"c9b9b86c372d8c1af7e0d8c1dae18ba961801df0,70446886303cff7393039242cadbdf9cc1e18a0c"
c9b9b86c372d8c1af7e0d8c1dae18ba961801df0,c9b9b86c,"Merge ""Adjust button dimensions on login and create account screen""","Merge ""Adjust button dimensions on login and create account screen""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501096207,1501096207,"91b5d2a55a195c9aa96cbb50864206bc1aa5de32,9188dddb5553da887a0b8fb8f8eb5a5a97a8eedc"
70446886303cff7393039242cadbdf9cc1e18a0c,70446886,Populate remote compilations with response from CompilationClient.,"Populate remote compilations with response from CompilationClient.

Upon receiving the payload from CompilationClient, this also updates the
user's local compilations with any updated metadata from the remote
compilations (matched on the file name of each compilation).

Bug: T163588
Bug: T163590
Change-Id: I77bc69be5e80b39939b34c41d8dc184ab07f8e39
",,,,Dmitry Brant,dbrant@wikimedia.org,Mholloway,mholloway@wikimedia.org,1501004009,1501092752,91b5d2a55a195c9aa96cbb50864206bc1aa5de32
91b5d2a55a195c9aa96cbb50864206bc1aa5de32,91b5d2a5,Hygiene: Fix Compilation test constructor,"Hygiene: Fix Compilation test constructor

Change-Id: I3766a2efbfe65d6618b19206f662113e6951a9ce
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501091983,1501091983,b7e8833cf8991eb02ea819ff8d76be7b9c552b2d
9188dddb5553da887a0b8fb8f8eb5a5a97a8eedc,9188dddb,Adjust button dimensions on login and create account screen,"Adjust button dimensions on login and create account screen

This task fixes buttons dimensions on login/create account, to have the same width as the form fields.

Bug: T170757
Change-Id: Ie725017030bba5058068b20fa8013f9224f8fa6a
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1501087914,1501089459,b7e8833cf8991eb02ea819ff8d76be7b9c552b2d
b7e8833cf8991eb02ea819ff8d76be7b9c552b2d,b7e8833c,"Merge ""Cache compilations when finished detecting them.""","Merge ""Cache compilations when finished detecting them.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501088242,1501088243,"710daf1e66f01377e340ac9eadccd7f986b4fb0f,5c54fd3ae70e3a49683d311c361ecf994b0a683c"
710daf1e66f01377e340ac9eadccd7f986b4fb0f,710daf1e,Update reference screenshots,"Update reference screenshots

Change-Id: Ie847c4c70a082d035d0f06b171f4bbd48957735d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1501082244,1501084074,19a9d53d7d6562e97b589cb205b05850a9fcfea0
5c54fd3ae70e3a49683d311c361ecf994b0a683c,5c54fd3a,Cache compilations when finished detecting them.,"Cache compilations when finished detecting them.

This saves a cache of the compilations that were found while searching the
filesystem, so that subsequent launches of the app will be immediately
aware of which compilations are available.

Change-Id: Id54afe67b2da816a148c63fa9a73f46cd72d56e2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500933751,1501079613,d62b72b279a784f72efdb6742c53f5957fc28c44
19a9d53d7d6562e97b589cb205b05850a9fcfea0,19a9d53d,"Merge ""Update permissions logic for compilations.""","Merge ""Update permissions logic for compilations.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501078628,1501078629,"1a7709952eadc15a0678007686d1d94ba9b4ed2b,d62b72b279a784f72efdb6742c53f5957fc28c44"
1a7709952eadc15a0678007686d1d94ba9b4ed2b,1a770995,"Merge ""Update: dim images in dark mode""","Merge ""Update: dim images in dark mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501072362,1501072362,"f88a0d4ffe39ebcbe8b171ec6035441d66c6aa9a,b39ca15928a1c867c77f739ddefed6608a2b7e71"
f88a0d4ffe39ebcbe8b171ec6035441d66c6aa9a,f88a0d4f,"Merge ""Hygiene: consolidate edit link styling in page-library""","Merge ""Hygiene: consolidate edit link styling in page-library""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1501027981,1501027981,"1aa70b5f94e8658faf3c68b305ff36aa015341c6,31aedabe284978809d50124e9f11c07e1ecec14f"
d62b72b279a784f72efdb6742c53f5957fc28c44,d62b72b2,Update permissions logic for compilations.,"Update permissions logic for compilations.

This restricts the request for Read permissions to the CompilationActivity,
and removes the request from the Feed and from PageActivity.

Note: this leaves the framework for asking for the Read permission in
BaseActivity, in case we need to bring back the automatic permission logic
when launching other activities.

This also detects whether the user selected ""Never ask again"" in the
permission dialog, by making use of the
shouldShowRequestPermissionRationale() method, which returns false if the
user selects ""Never ask again.""  Unfortunately this method also returns
false if we've never asked for the permission before.  Therefore we need
to persist an additional variable ourselves that tracks whether we've
asked for the permission at least once.

Change-Id: I57012d752df0c4f55106487a37d4516a10252091
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500903256,1501013829,1aa70b5f94e8658faf3c68b305ff36aa015341c6
1aa70b5f94e8658faf3c68b305ff36aa015341c6,1aa70b5f,"Hygiene: Hold compilation thumb/image urls as Uris, not Strings","Hygiene: Hold compilation thumb/image urls as Uris, not Strings

Thanks to our UriTypeAdapter class we get url strings marshalled to/from
Uris transparently and essentially for free.  Let's hold these as Uris.

Change-Id: I6cda198b3ed986c72a50832e043d9677db5eae4e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500999302,1500999302,d05d947b277e8957f8a09dbf9938a416cc981516
d05d947b277e8957f8a09dbf9938a416cc981516,d05d947b,"Merge ""Fix: Use groups, not implicitgroups, to determine user rights.""","Merge ""Fix: Use groups, not implicitgroups, to determine user rights.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500995160,1500995160,"d6d9701df17e4ea583c41deaf28bf0a4ffa44db8,e8d1cbc76511dd203e38e9dc4057ecbe3dd084d8"
d6d9701df17e4ea583c41deaf28bf0a4ffa44db8,d6d9701d,"Merge ""Merge Compilation and CompilationInfo.""","Merge ""Merge Compilation and CompilationInfo.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500994865,1500994865,"05a12e1509bb9dc71a6d0683a2163d6e255f8c91,bf2544939b187751d065fce6dc3ad8d71b817060"
05a12e1509bb9dc71a6d0683a2163d6e255f8c91,05a12e15,"Merge ""Bump mobile-sections content format version to 0.12.0""","Merge ""Bump mobile-sections content format version to 0.12.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500994771,1500994771,"2a795b6f9f4d6cc86e73b8e8d7ac62e07d9ae8b3,8f95474109ca05aa033f1154e10a68f51840cec4"
e8d1cbc76511dd203e38e9dc4057ecbe3dd084d8,e8d1cbc7,"Fix: Use groups, not implicitgroups, to determine user rights.","Fix: Use groups, not implicitgroups, to determine user rights.

The groups associated with a user account determine the user's rights to
perform actions such as editing a semi-protected or protected article.
These can be obtained from the 'groups' property for a user via the MW
API.  'Implicitgroups' is a subset of 'groups' consisting of only those
groups that a user is added to automatically, such as 'autoconfirmed.'
For many users 'groups' will be identical to 'implicitgroups' but this is
not always the case.  For instance, for my staff account, which has sysop
rights on testwiki:

https://phabricator.wikimedia.org/P5792

We should look to 'groups' and not 'implicitgroups' to determine the
correct set of groups assigned to the user account.

Change-Id: Ib815d4b8de7c34ea4c27045d9297aba6981936a7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500949018,1500993390,5f59b47b21aef5bb03efe2ce15f45671254c060a
2a795b6f9f4d6cc86e73b8e8d7ac62e07d9ae8b3,2a795b6f,Prefix the help text to improve readability,"Prefix the help text to improve readability

The help text shown while trying to load a page while
offline isn't user friendly. Prefix it with ""Hint: "" to
make it more readable and thus giving it a touch of user
friendliness.

Change-Id: I4fb35426d71e0f5739d9e5f331bfe95c31cdce3c
",,,,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,Mholloway,mholloway@wikimedia.org,1500138793,1500993328,5f59b47b21aef5bb03efe2ce15f45671254c060a
bf2544939b187751d065fce6dc3ad8d71b817060,bf254493,Merge Compilation and CompilationInfo.,"Merge Compilation and CompilationInfo.

Change-Id: I0079b6d73b4a21bb6dc4742139adf4006760c596
",,,,Dmitry Brant,dbrant@wikimedia.org,Mholloway,mholloway@wikimedia.org,1500928061,1500993307,5f59b47b21aef5bb03efe2ce15f45671254c060a
5f59b47b21aef5bb03efe2ce15f45671254c060a,5f59b47b,Test: Revert build-tools to 25.0.3,"Test: Revert build-tools to 25.0.3

Bug: T171562
Change-Id: Ia6f6cd2bd676b6b3ef2880c49dcf25f492d2ec82
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500992431,1500992431,4f6be9df5e0052b73d78b4a8ed05be2d7dd87019
8f95474109ca05aa033f1154e10a68f51840cec4,8f954741,Bump mobile-sections content format version to 0.12.0,"Bump mobile-sections content format version to 0.12.0

This will get us a boolean ""disambiguation"" flag in the RB page lead.

This has always been in the RbPageLead model object on our side but was
apparently never provided and was always defaulting to false...

Change-Id: I2baf4aa8b7cec6ca03fd637a4a5b9f764cfcb16d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500928244,1500928244,4f6be9df5e0052b73d78b4a8ed05be2d7dd87019
4f6be9df5e0052b73d78b4a8ed05be2d7dd87019,4f6be9df,"Merge ""Fix: update screenshots""","Merge ""Fix: update screenshots""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500918488,1500918488,"1f275e38ea9804adf4ac7460b2df7c53f844026d,2f074d6c78f5ce9933015206261ff8b3ac0c47a4"
1f275e38ea9804adf4ac7460b2df7c53f844026d,1f275e38,"Merge ""Consolidate/solidify LinkHandler.""","Merge ""Consolidate/solidify LinkHandler.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500916748,1500916748,"d57f3680d0df05eb3ca253c0e77bfeb446b145d5,db160f69a65333e652910458fccaffa17a650c34"
d57f3680d0df05eb3ca253c0e77bfeb446b145d5,d57f3680,"Merge ""Add offline compilation info client""","Merge ""Add offline compilation info client""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500912143,1500912143,"f3f38d9750742b2c1176640f313ff3f71cb09f00,e66d3f770116c4d24278379c58e8c056b6510f1e"
db160f69a65333e652910458fccaffa17a650c34,db160f69,Consolidate/solidify LinkHandler.,"Consolidate/solidify LinkHandler.

This reduces the number of cases that need to be handled by LinkHandler,
whether it's an internal link, external link, offline link, link with
fragment, inter-wiki link, etc.

Change-Id: I61fbac9ff1fadc4f8cbe6982a4156b4b83cfa253
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1500661384,1500907710,f3f38d9750742b2c1176640f313ff3f71cb09f00
f3f38d9750742b2c1176640f313ff3f71cb09f00,f3f38d97,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I90b2dc7425996fc16f00224796cd465c5e9f1b34
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1500872190,1500904636,5251d2e6e8ecb99f700bedcae1367ceff992c1c2
5251d2e6e8ecb99f700bedcae1367ceff992c1c2,5251d2e6,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I6868bcaf02e5e132b8e356753e0f4c9681cc7e8c
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1500722645,1500903498,cd8daee51989e0ff7ef261d76e82ba69699dce60
b39ca15928a1c867c77f739ddefed6608a2b7e71,b39ca159,Update: dim images in dark mode,"Update: dim images in dark mode

Change-Id: Ic78c5b9a56bc6088e067cf2296b383a8c701f2cb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1500696996,1500696996,31aedabe284978809d50124e9f11c07e1ecec14f
31aedabe284978809d50124e9f11c07e1ecec14f,31aedabe,Hygiene: consolidate edit link styling in page-library,"Hygiene: consolidate edit link styling in page-library

Additional edit link styling is necessary for dark mode. Consolidate the
existing styles in wikimedia-page-library and update them there. See
demo/EditTransform.html for examples of each supported configuration.

Also, fix styling of math formulas and translucent images in page
preview.

https://github.com/wikimedia/wikimedia-page-library/pull/61

Bug: T165415
Change-Id: I8c42ff5b740adddb99412792297e501c23b2db75
Depends-on: I1b1dc5ff808d1868b49823b098c808c7d8c60727
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1500609908,1500696726,cd8daee51989e0ff7ef261d76e82ba69699dce60
2f074d6c78f5ce9933015206261ff8b3ac0c47a4,2f074d6c,Fix: update screenshots,"Fix: update screenshots

- Update screenshots on API 25 (AOSP Nexus S emulator with default
  options).
- PageHeaderViewTest has a different colored divider. This was an
  intentional change but the screenshots were not updated.
- ListCardItemViewTest no longer has a nice little placeholder image.
  This is intentional?
- AnnouncementCardViewTest and BecauseYouReadCardViewTest no longer have
  checkerboard images. This is intentional?
- Almost all images have antialiasing fuzz differences on the text from
  the previous version.

Change-Id: Id74e9f99a59dd746b6f5926fa878804697087f20
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1500683916,1500683916,850049bb6a08f8a2ffa9e86a44b17dc3bc284913
cd8daee51989e0ff7ef261d76e82ba69699dce60,cd8daee5,"Merge ""Hygiene: integrate page-library red links transform""","Merge ""Hygiene: integrate page-library red links transform""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500678525,1500678525,"850049bb6a08f8a2ffa9e86a44b17dc3bc284913,24dc2a5052164fd1a1ac8427913e7d24193fc01b"
850049bb6a08f8a2ffa9e86a44b17dc3bc284913,850049bb,"Merge ""Add Explore overflow option to access compilations.""","Merge ""Add Explore overflow option to access compilations.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500669885,1500669885,"7f21cc336c3dddb97aa813effcbb7ce7121bf42e,538844a59c6de21b189728ed776e094bfa959d22"
7f21cc336c3dddb97aa813effcbb7ce7121bf42e,7f21cc33,"Merge ""Fix infinite theme change loop in PageActivity.""","Merge ""Fix infinite theme change loop in PageActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500669553,1500669553,"a6179fa4958cf19415b1ae50bb80ddfa8f4984dd,debdcadb079951408b305801eb446f94d9c89ff9"
e66d3f770116c4d24278379c58e8c056b6510f1e,e66d3f77,Add offline compilation info client,"Add offline compilation info client

Bug: T163714
Change-Id: I2b11abad2e62293a8a59b7b50b90c836a6ca961e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500083231,1500664025,a6179fa4958cf19415b1ae50bb80ddfa8f4984dd
a6179fa4958cf19415b1ae50bb80ddfa8f4984dd,a6179fa4,"Merge ""Add blank(ish) activity for viewing downloadable compilations.""","Merge ""Add blank(ish) activity for viewing downloadable compilations.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500660192,1500660192,"d4a75e30cb305952e953fed6cfe135dab6d15dde,56ef77a3bb4e2b5d2dc21e0957fbb78b47dfa493"
538844a59c6de21b189728ed776e094bfa959d22,538844a5,Add Explore overflow option to access compilations.,"Add Explore overflow option to access compilations.

This adds an option to the overflow menu in the feed for accessing the
local compilations list. This makes compilations accessible regardless of
whether the user is offline or online.

Change-Id: I7f4632c942244f2028a232524bcdb00173def819
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500652178,1500652178,56ef77a3bb4e2b5d2dc21e0957fbb78b47dfa493
56ef77a3bb4e2b5d2dc21e0957fbb78b47dfa493,56ef77a3,Add blank(ish) activity for viewing downloadable compilations.,"Add blank(ish) activity for viewing downloadable compilations.

This is a blank activity, except for a nice collapsible Toolbar, in
accordance with the design mock.

Bug: T163588
Change-Id: I513915ba846eba36d7d6808995e5ec1573aa9991
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500584493,1500648662,db35648a4d8e4a9b6ecc2709b78b48a97bf0edca
debdcadb079951408b305801eb446f94d9c89ff9,debdcadb,Fix infinite theme change loop in PageActivity.,"Fix infinite theme change loop in PageActivity.

When changing the theme in PageActivity (while online) it enters an
infinite loop of light/dark theme changes.  This is because of a race
condition between the UserOption uploader uploading the new value and the
UserOption *downloader* downloading the previous value and triggering a
theme change to the old value.

This patch requests a sync of UserOptions only when the activity is
launched freshly (i.e. not restarted via theme change).

Bug: T170756
Change-Id: I830aef92c1c57dc64e42c49550a0b2fcb402534b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500646911,1500648310,db35648a4d8e4a9b6ecc2709b78b48a97bf0edca
24dc2a5052164fd1a1ac8427913e7d24193fc01b,24dc2a50,Hygiene: integrate page-library red links transform,"Hygiene: integrate page-library red links transform

Bug: T165419
Change-Id: Ia1165e6b3800289bac5948d476f1db498b339d3d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1500581489,1500648017,d4a75e30cb305952e953fed6cfe135dab6d15dde
d4a75e30cb305952e953fed6cfe135dab6d15dde,d4a75e30,Update: dark mode page background and divider colors,"Update: dark mode page background and divider colors

Bug: T165415
Change-Id: I986f8f6794ed43e34ed1de3cf06de4b7a6406b7e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1500581034,1500648009,db35648a4d8e4a9b6ecc2709b78b48a97bf0edca
db35648a4d8e4a9b6ecc2709b78b48a97bf0edca,db35648a,"Merge ""Update Zim postprocessing to account for lazy loading of images.""","Merge ""Update Zim postprocessing to account for lazy loading of images.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500646552,1500646552,"290fa056afa171b016f0d321a0d9f978bd0f03f7,cedaffed5ab928cb36feafbf575e79d6e1d9b29d"
cedaffed5ab928cb36feafbf575e79d6e1d9b29d,cedaffed,Update Zim postprocessing to account for lazy loading of images.,"Update Zim postprocessing to account for lazy loading of images.

Change-Id: I36f7c2b8b39decbb8befc58a3b2df95d9981a94e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1500490772,1500645820,898b4aa564afdd884823c6e401904415f97bf8b8
290fa056afa171b016f0d321a0d9f978bd0f03f7,290fa056,Fix: remove color attributes from Drawables,"Fix: remove color attributes from Drawables

Color attributes in Drawables are not supported on API 19 and lower and
crash the app when referenced with a valid attribute name (color as
opposed to drawable). Make theme dependent Drawables instead.

Change-Id: I490d3a6dacb31ee783bf12da6ab57f2666a7be30
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1500580445,1500613724,898b4aa564afdd884823c6e401904415f97bf8b8
898b4aa564afdd884823c6e401904415f97bf8b8,898b4aa5,Hygiene: add @ColorInt annotation to ColorSpanEx,"Hygiene: add @ColorInt annotation to ColorSpanEx

Change-Id: Ic4583b80d60a779c6ccfb14530969012b730587a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1500580413,1500613724,318864aa15867a64fc49d77e6887d520fee0a0cc
318864aa15867a64fc49d77e6887d520fee0a0cc,318864aa,Hygiene: add themed color helper to ResourceUtil,"Hygiene: add themed color helper to ResourceUtil

- Add themed color attribute helper, ResourceUtil.getThemedColor().
- Replace all calls to
  ContextCompat.getColor(ResourceUtil.getThemedAttributeId(...)) with
  new helper.

Change-Id: I03e4e6e440273cd29e1d1b42177222981d69bddb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1500580138,1500613724,620538d961221942e340ca7ac7f429393d1309d6
620538d961221942e340ca7ac7f429393d1309d6,620538d9,New: lazily load images,"New: lazily load images

Replace WebView images with placeholders and don't download images until
they're needed.

Notes:

- Small images, especially icons, are quickly downloaded and may appear
  in many places. Lazily loading these images degraded the experience
  with little gain so these continue to be eagerly loaded. The
  definition of small was taken from MobileFrontend: either defined
  dimension less than 50px. e.g., flags in the medal count for the ""1896
  Summer Olympics medal table.""

  https://phabricator.wikimedia.org/diffusion/EMFR/browse/master/includes/MobileFormatter.php;c89f371ea9e789d7e1a827ddfec7c8028a549c12$22
  https://en.m.wikipedia.org/wiki/1896_Summer_Olympics_medal_table?oldid=773498394#Medal_count

- Placeholders are evaluated for loading on page load, table collapse
  and expand toggling, and resizing / orientation change and scrolling
  (each throttled to 100 ms). Eligibility is conditional on placeholders
  within the current screen or up to one screen ahead and affecting the
  layout; placeholders within collapsed tables will not be loaded. This
  differs from MobileFrontend which only loads up to a half screen
  ahead. The deviation was made to avoid considering the native
  component offsets on both Android and iOS apps.

- Only images are transformed. Videos with poster attributes and
  elements with downloaded resources in their styles among others are not
  considered.

- Lazy loading strives to avoid unnecessary layout changes, particularly
  when transitioning from placeholder to image, but they do occur when
  an image's width or height styles or attributes mismatch the actual
  dimensions of the image. e.g., see the image captioned ""Obama and his
  wife Michelle at the Civil Rights Summit..."" on the ""Barack Obama""
  article. MobileFrontend has this same limitation. Image widening
  transforms must occur prior to the lazy load transform. srcset was not
  easily maintainable with lazy loading, and is expected to be removed
  soon, so this patch removes just removes it.

  https://en.m.wikipedia.org/wiki/Barack_Obama?oldid=789232530

- The lead section, including any infoboxes or collapsed tables, is
  transformed which differs from the MobileFrontend implementation. Some
  pages such as ""List of photographs of Abraham Lincoln,"" ""List of works
  by Vincent van Gogh,"" and ""Picasso's Blue Period"" have the bulk of
  their images in the lead section and benefit greatly from lazy
  loading. Additionally, although the transform is designed to reduce
  bandwidth consumption, it may have the added benefit of reducing the
  memory profile and OutOfMemoryErrors and load and process time on
  older devices. A particularly dramatic example is the ""List of works
  by Vincent van Gogh"" article on the API 16 AOSP Nexus S emulator.
  Lastly, this difference makes the implementation more uniform and less
  surprising.

  https://en.m.wikipedia.org/wiki/List_of_photographs_of_Abraham_Lincoln?oldid=779172663
  https://en.m.wikipedia.org/wiki/List_of_works_by_Vincent_van_Gogh?oldid=781965885
  https://en.m.wikipedia.org/wiki/Picasso's_Blue_Period?oldid=787521325

- An example of the transformation lifecycle is:

  - Original:
    <img class=foo style='width: 100px; height: 200px' width=3 height=4 src=/ srcset=/ alt=bar>

  - Pending:
    <span class='foo pagelib-lazy-load-placeholder pagelib-lazy-load-placeholder-pending'
      style='width: 100px' data-class=foo data-style='width: 100px; height: 200px' data-width=3
      data-height=4 data-src=/ data-srcset=/ data-alt=bar>
      <span style='padding-top: 200%'></span>
    </span>

  - Loading:
    <span class='foo pagelib-lazy-load-placeholder pagelib-lazy-load-placeholder-loading'
      style='width: 100px' data-class=foo data-style='width: 100px; height: 200px' data-width=3
      data-height=4 data-src=/ data-srcset=/ data-alt=bar>
      <span style='padding-top: 200%'></span>
    </span>

    <!-- Detached. -->
    <img class='foo pagelib-lazy-load-image-loading' style='width: 100px; height: 200px' width=3
      height=4 src=/ srcset=/ alt=bar>

  - Error:
    <span class='foo pagelib-lazy-load-placeholder pagelib-lazy-load-placeholder-error'
      style='width: 100px' data-class=foo data-style='width: 100px; height: 200px' data-width=3
      data-height=4 data-src=/ data-srcset=/ data-alt=bar>
      <span style='padding-top: 200%'></span>
    </span>

  - Loaded:
    <img class='foo pagelib-lazy-load-image-loaded' style='width: 100px; height: 200px' width=3
      height=4 src=/ srcset=/ alt=bar>

  The presentation of each state (except original) is styleable with CSS.

  The original blobs of HTML are delivered a section at a time as text
  and then inflated into a DOM just as they were before. However, since
  images will begin downloading as soon as their source attribute is
  set, a new Document is now used to prevent images from downloading
  before the lazy load transform can run. When the new Document is
  attached to the Window, image resources are able to start downloading.

- Placeholder colors were taken from the Wikimedia User Interface Style
  Guide. Light mode matches the current MobileFrontend / Minerva
  implementation.

  https://phabricator.wikimedia.org/source/wikimedia-ui-base/browse/master/wikimedia-ui-base.css;d19168ec6d4995561c0a1d2dd59eb8b3f1577a5a

- Resource loading functionality may be verified using the Chrome
  DevTools network tab for modern devices or OkHttp logcat. All small
  images and large images within the first two screens forwards or
  backwards should load but those in the remaining sections should not.

  If you're confident that OkHttp offline caching is working properly,
  the easiest way to test is:

    1. Clear your app cache.
    2. Visit the ""List of works by Vincent van Gogh"" article.
    3. Wait for the article to finish loading.
    4. Enable airplane mode.
    5. Expand the first collapsed table.
    6. Verify that no large images are shown in the first 50 or so
       images. Note: these images have now been attempted to load and
       will not be retried. They will always appear as placeholders
       until the page is refreshed.
    7. Disable airplane mode.
    8. Wait until a data connection is established.
    9. Start scrolling and verify that placeholders more than a screen
       away start loading images (lazy loading works).
   10. Enable airplane mode.
   11. Refresh the page.
   12. Verify that images previously loaded appear (offline caching
       works).

  https://en.m.wikipedia.org/wiki/List_of_works_by_Vincent_van_Gogh?oldid=781965885

- This change has a surprising number of interactions. Some
  configurations for testing include: show / hide images, light / dark
  mode, expanding / collapsing infoboxes and tables, orientation
  changes, pressing back to show a previously visited page, page
  refresh, scrolling with find-in-page, MediaWiki / RESTBase page API,
  saved pages, cellular / Wi-Fi data connection, devices and API levels,
  namespaces, wikis, languages, and pages.

  Some image heavy examples are: ""Paris,"" ""Pablo Picasso,"" ""Barack
  Obama"" (except the videos), and ""Salvador Dalí"" (Hebrew).

  Shrink lazyLoadViewportDistanceMultiplier and increase the CSS
  animation times to more easily sneak up on images.

  https://en.m.wikipedia.org/wiki/Paris?oldid=789426782
  https://en.m.wikipedia.org/wiki/Pablo_Picasso?oldid=788122694
  https://en.m.wikipedia.org/wiki/Barack_Obama?oldid=789232530
  https://he.m.wikipedia.org/wiki/סלבדור_דאלי?oldid=21045644

- A demo for desktop is available in demo/LazyLoadTransform.html in the
  wikimedia-page-library repo. It's focused and free of some of the
  complexity concerns of the app.

References:
- MobileFrontend
- https://github.com/tuupola/jquery_lazyload/blob/master/jquery.lazyload.js

Depends on: https://github.com/wikimedia/wikimedia-page-library/pull/33
Depends on: https://github.com/wikimedia/wikimedia-page-library/pull/56
Bug: T164429
Change-Id: Icf623c6f1e77f52db39a11e1c5de4748850a7100
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1500232652,1500613724,3718d876dc0eee7711680cdf6924dbdd90e5c9cb
3718d876dc0eee7711680cdf6924dbdd90e5c9cb,3718d876,Hygiene: consolidate dark mode theming in wikimedia-page-library,"Hygiene: consolidate dark mode theming in wikimedia-page-library

https://github.com/wikimedia/wikimedia-page-library/pull/54
Ib60bc304215b85f20d19b070536e8806f8d7804d

Change-Id: Ic3c8cb4585a23d9c2e012b6f8c37bfd0885814c2
Bug: T165415
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1499984357,1500613701,a8518257bab07767e5b7087a61d6e02c3d589ddf
a8518257bab07767e5b7087a61d6e02c3d589ddf,a8518257,Fix: Crash when opening settings,"Fix: Crash when opening settings

A recent change introduced a crash when opening the app settings. This
was because of a newly added v21 AppTheme style which was intended to
supplement the main AppTheme style but instead was overriding it. The
v21 AppTheme lacked a preferenceTheme attribute, which would cause the
app to crash with an IllegalStateException when opening the settings.

Change-Id: I29680bee09021d9d4de6277dfcd72751ba56f67f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500587792,1500587792,1c9ee6b87da0589a04b5d23405d821e3f0955a13
1c9ee6b87da0589a04b5d23405d821e3f0955a13,1c9ee6b8,"Merge ""Update build-tools to 26.0.0""","Merge ""Update build-tools to 26.0.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500560609,1500560609,"73cfb7194d58fc3a3f1b8d4bd42d7c19db88cc4d,9aff8612f2b491ccbf60a4f78b7e72619612a2a3"
73cfb7194d58fc3a3f1b8d4bd42d7c19db88cc4d,73cfb719,"Merge ""Empty Activity for showing a compilation's details""","Merge ""Empty Activity for showing a compilation's details""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500505301,1500505301,"14dc0785cf1cd122ecb8b5d56fad87fd104b47c9,2825b783c203943f625ee90fca4d646d0a668a35"
14dc0785cf1cd122ecb8b5d56fad87fd104b47c9,14dc0785,Hygiene: Add TargetApi(17) to BaseActivity's isDestroyed override,"Hygiene: Add TargetApi(17) to BaseActivity's isDestroyed override

Change-Id: I486541707a0fafa567ef9bdb9105b82be19a79f4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500503114,1500503834,03e4bd78f4757dbfc9e66cdf897e73f41e2ebef6
9aff8612f2b491ccbf60a4f78b7e72619612a2a3,9aff8612,Update build-tools to 26.0.0,"Update build-tools to 26.0.0

Adds support for building with API level 26 and contains general bug fixes

https://developer.android.com/studio/releases/build-tools.html

Change-Id: I778edfdefde5111b7af721923d94a7b39e202ecd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500499814,1500499814,03e4bd78f4757dbfc9e66cdf897e73f41e2ebef6
2825b783c203943f625ee90fca4d646d0a668a35,2825b783,Empty Activity for showing a compilation's details,"Empty Activity for showing a compilation's details

Bug: T164385
Change-Id: Ic9848bbcd162b9c3a09a8d7552aa07974117eefb
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500489271,1500489271,03e4bd78f4757dbfc9e66cdf897e73f41e2ebef6
03e4bd78f4757dbfc9e66cdf897e73f41e2ebef6,03e4bd78,"Merge ""New: sample inter-activity transitions.""","Merge ""New: sample inter-activity transitions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500485459,1500485459,"3e262447b6c26ba87e95cd36a018cebaa38b32a6,ffff0cd28210024bb503c8a38c78f6d7946fb60e"
3e262447b6c26ba87e95cd36a018cebaa38b32a6,3e262447,"Merge ""Update Zim library version.""","Merge ""Update Zim library version.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500484030,1500484030,"ab0e56a3f9ce5b36c4693ea54ee0cd0d5b2429e7,43c69e6b5a6bdb6cbfccb748244e96a12e1877e8"
ab0e56a3f9ce5b36c4693ea54ee0cd0d5b2429e7,ab0e56a3,"Merge ""Introduce a disk usage component, and use it for Compilations.""","Merge ""Introduce a disk usage component, and use it for Compilations.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500483713,1500483713,"96041d559646f185b557a80b2fad724af0f57098,fa31a44eda2df0152520c888f7281067868b1439"
43c69e6b5a6bdb6cbfccb748244e96a12e1877e8,43c69e6b,Update Zim library version.,"Update Zim library version.

This fixes a couple of possible NPEs when getting the Title or Description
of a Zim file (i.e. if the Zim file doesn't contain a title).

https://github.com/dbrant/zimdroid/releases/tag/0.0.10

Change-Id: Id59a5db1390cb188f1a9141f336158308bf661d5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500481096,1500481096,fa31a44eda2df0152520c888f7281067868b1439
fa31a44eda2df0152520c888f7281067868b1439,fa31a44e,"Introduce a disk usage component, and use it for Compilations.","Introduce a disk usage component, and use it for Compilations.

The only difficulty encountered in the making of this component is that it
doesn't seem to be possible for us to determine how much space our app
uses. The system doesn't provide this information easily.

Instead this component currently only states the amount of space used by
compilations, whose magnitude will likely overshadow the storage footprint
of the app itself.

Bug: T164387
Change-Id: Ia97c84cf6c43d9fdf4e4b47513fbc972ea32382b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500049276,1500480726,de72e312434b3b4baa97b1087fc4e18a516ad3e6
ffff0cd28210024bb503c8a38c78f6d7946fb60e,ffff0cd2,New: sample inter-activity transitions.,"New: sample inter-activity transitions.

This is a sample of what's possible with shared element transitions
between activities. This defines a shared element between the News card
items in the Feed, and the full News activity.

Change-Id: I794686e1d9559ade8be0acbc596089fb644a791a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500305911,1500473211,8d44ae8e536f20f22bb2be2f4dce7a99c9ac3722
96041d559646f185b557a80b2fad724af0f57098,96041d55,Chore: update styles,"Chore: update styles

Updates bundled CSS with the latest from MobileFrontend, MinervaNeue,
and extensions from scripts/make-css-assets.bash. MinervaNeue was
configured with MinervaApplyKnownTemplateHacks set to true.

A manual resolution to keep margin rules was made and an email
requesting guiding for a future fix was sent:

  The Android app periodically pulls styles from Minerva/Neue to be
  statically bundled with the app. Something like:

    https://en.wikipedia.org/w/load.php?modules=skins.minerva.base.reset|skins.minerva.content.styles&only=styles&version=&*&debug=true

  A recent change moved a few of the rules from main.less to ui.less,
  which is not included the content.styles module:

    .pre-content,
    .content,
    .post-content {
    	margin: 0 @contentMargin;
    }

  If I understand the commit message correctly, the intent was just to
  DRY up the margin rules. However, as rules around these classes are
  present in other imports within the content.styles module, I think
  it's a mistake to omit these margin rules. Michael noticed that this
  omission causes a regression in the edit preview margins of the
  Wikipedia Android app when I tried to update the styles which sparked
  this email.

  What should I do? Here are some ideas:
  1 Move all these margin rules to another file and add it to
    styles.less?
  2 Undo the margin change?
  3 Query additional modules? This is kind of dicey on Android but I'd
    be curious to know if that's the best long term fix.
  4 Something else?

  There's not a time crunch because I can just ignore this change
  manually but it's not something I'd want to leave to manual resolution
  in the long term.

Change-Id: Ia6d76492e025ec8ee2643f85ce51c724f1b7b7d6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1499958464,1500410896,7127bfa398414b91888937e399cffb6054977a29
7127bfa398414b91888937e399cffb6054977a29,7127bfa3,Tweak processing of compilations for newer Zim files.,"Tweak processing of compilations for newer Zim files.

Zim files provided by Kiwix that have been created more recently than ~May
2017 are in a slightly different format than older Zim files, since they
are now fetching the HTML from the Content Service endpoint rather than
plain Parsoid.  This includes the recently-updated Medical compilations
available from Kiwix.

Amazingly, the format of the HTML is still similar enough that our current
post-processing of it doesn't require a whole lot of changes, except for
an <H1> element that appears at the top of the article.

This patch tweaks our post-processing to simply skip over the H1 element.

Note that we shouldn't plan on doing a whole lot more custom transforms on
Zim compilations, since we'll eventually build our own compilations
composed from Content Service responses.  However, this change is simple
enough that it warrants inclusion, if only to ensure near-term
compatibility with existing Zim files that come from Kiwix.

Change-Id: I674bde0500d2395f45e050ec4cec01eeaca046c6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500405977,1500405977,c42559ce52712748174d32bcc2ab1a18b05a92e6
c42559ce52712748174d32bcc2ab1a18b05a92e6,c42559ce,"Merge ""Introduce activity for managing offline compilations.""","Merge ""Introduce activity for managing offline compilations.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500395024,1500395024,"86d9c3b455a2859ea404163d8b8a2bd2e581b504,de72e312434b3b4baa97b1087fc4e18a516ad3e6"
de72e312434b3b4baa97b1087fc4e18a516ad3e6,de72e312,Introduce activity for managing offline compilations.,"Introduce activity for managing offline compilations.

This activity is accessible by tapping the ""My compilations"" button in the
Feed card when the user is offline. (More ways to access this activity may
be added later.)

TODO: Create custom view that shows disk usage, per design mock.

Bug: T163587
Bug: T163589
Bug: T163591
Change-Id: If497045640646f7333163a2674344179d5140837
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500043526,1500392844,a710f89fbf92faa26b38e528d124d73203a85d03
86d9c3b455a2859ea404163d8b8a2bd2e581b504,86d9c3b4,"Merge ""Update Fresco to 1.4.0""","Merge ""Update Fresco to 1.4.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500313619,1500313619,"efc6e4886719e71b66bd77acae2544f548b46523,8d44ae8e536f20f22bb2be2f4dce7a99c9ac3722"
8d44ae8e536f20f22bb2be2f4dce7a99c9ac3722,8d44ae8e,Update Fresco to 1.4.0,"Update Fresco to 1.4.0

Release notes:
https://github.com/facebook/fresco/releases/tag/v1.4.0

A few breaking changes are listed, but none that seem to apply to us.
They're also claiming improved performance with animated images. And most
importantly (although it's not listed in the release notes) it contains a
fix for inter-activity transitions, which weren't working ideally on API
25. Stay tuned.

Also updated ProGuard based on their guidelines.

Change-Id: Ia074579f986501320218cbfe9e68de960f383f8e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1500305225,1500308814,7191512a1d9485f4c92786d202024659d9131ab8
efc6e4886719e71b66bd77acae2544f548b46523,efc6e488,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I215028cd20676fc2c556a2c145fd1469d120772a
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1500131391,1500131391,7191512a1d9485f4c92786d202024659d9131ab8
7191512a1d9485f4c92786d202024659d9131ab8,7191512a,"Merge ""Compilations: integrate with Search.""","Merge ""Compilations: integrate with Search.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500074189,1500074189,"3ed3f0f4911ed14f057ec44d883908c156b06752,a710f89fbf92faa26b38e528d124d73203a85d03"
3ed3f0f4911ed14f057ec44d883908c156b06752,3ed3f0f4,"Merge ""Compilations: integrate with Random feed card.""","Merge ""Compilations: integrate with Random feed card.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500074188,1500074188,"97a3cc5d31f48bb0a9a2097f12ce4a4af8c6b7e1,8e7cd3c7f4259f5fa0ab26189a9f6234d3dbc71d"
97a3cc5d31f48bb0a9a2097f12ce4a4af8c6b7e1,97a3cc5d,"Merge ""Compilations: Feed card to indicate offline state.""","Merge ""Compilations: Feed card to indicate offline state.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500073872,1500073872,"e77372ec433d1c578279dba6627eb3bb0d0d85aa,2bbcc01a0955b72775f8dedeae17963f619d6330"
a710f89fbf92faa26b38e528d124d73203a85d03,a710f89f,Compilations: integrate with Search.,"Compilations: integrate with Search.

This enables the Search bar to fetch results (transparently) from a
compilation when offline.

Change-Id: Ieb0aa92cb85f08c32cf032096fcfb95de60ebd04
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1499807261,1500065175,8e7cd3c7f4259f5fa0ab26189a9f6234d3dbc71d
8e7cd3c7f4259f5fa0ab26189a9f6234d3dbc71d,8e7cd3c7,Compilations: integrate with Random feed card.,"Compilations: integrate with Random feed card.

This will transparently load a random page from a compilation (if the user
is offline), and then fall back to loading a random page from a reading
list, as before.

Sadly, this does not use an interceptor... it simply wouldn't be a savings
of complexity.

Bug: T163706
Change-Id: I942f8b54b7da4a225f54568d7cf9b87bf525bae6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499806804,1500065120,2bbcc01a0955b72775f8dedeae17963f619d6330
2bbcc01a0955b72775f8dedeae17963f619d6330,2bbcc01a,Compilations: Feed card to indicate offline state.,"Compilations: Feed card to indicate offline state.

The card will be shown automatically if the device goes offline while in
the Explore feed.

The ""My Compilations"" button is not yet hooked up to anything.

Bug: T163595
Change-Id: I6186f544cf53f16bddfd280571da501c28f53c09
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499806110,1500064905,322736125e2ef511e25ae9dc78c704fdb9013be0
e77372ec433d1c578279dba6627eb3bb0d0d85aa,e77372ec,"Merge ""Update reference screenshots""","Merge ""Update reference screenshots""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1500063640,1500063640,"322736125e2ef511e25ae9dc78c704fdb9013be0,aa8166df1611afaf5da1e8a8d3b3609bd1db9ab8"
322736125e2ef511e25ae9dc78c704fdb9013be0,32273612,Advise users when they are reading an article from an offline compilation,"Advise users when they are reading an article from an offline compilation

* Shows a toast with the date downloaded upon loading the article
* Substitutes the footer ""last modified"" HTML with a download date string

Bug: T166652
Change-Id: I7b95f8302240234222293c860b8099f1563daf53
",,,,Michael Holloway,mholloway@wikimedia.org,Dbrant,dbrant@wikimedia.org,1499967654,1500046611,d1f08bf461d8ab1195b8e46a7d80f45513406481
aa8166df1611afaf5da1e8a8d3b3609bd1db9ab8,aa8166df,Update reference screenshots,"Update reference screenshots

Need updating in light of a few recent UI update (color consolidation)
patches.

Change-Id: I432dc86b9c05669350652a0c809ce40ec3453bf2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1500046248,1500046248,488b6b9fe1f38144d3f8f517d47d6a68325aff44
d1f08bf461d8ab1195b8e46a7d80f45513406481,d1f08bf4,ZIM Compilations: load html content from ZIM files!,"ZIM Compilations: load html content from ZIM files!

This handles the actual work of loading the html content from a ZIM
compilation into our WebView.  This necessarily requires us to do some
postprocessing on the html before it can be rendered in the WebView, which
is done in sections.js.

- The logic is: if a page fails to load over the network or cache, then
  check if the page title exists in an offline compilation. And if it does
  exist, then load it.  This logic can be tweaked or expanded-upon when we
  introduce configurable settings (i.e. offline-first vs network-first).
- Link previews are not shown for offline titles. This is a necessary
  limitation because a ZIM file contains only the full html text of the
  article, and it would be too expensive to load all of it for the purpose
  of showing a link preview.

Bug: T163584
Change-Id: I9d82b7d46aca7a33285a47c672a3bab100b5b1bf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499803210,1500045485,488b6b9fe1f38144d3f8f517d47d6a68325aff44
488b6b9fe1f38144d3f8f517d47d6a68325aff44,488b6b9f,Fix login / create account onboarding colors for dark mode.,"Fix login / create account onboarding colors for dark mode.

* Also consolidate a few other colors.

Bug: T169117
Change-Id: I1d351e473b8c8122095999e805b9e62e083cc7e7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499968215,1499968589,ad9e5a2ab2f733f48b8ee96f672373ce62ef4680
ad9e5a2ab2f733f48b8ee96f672373ce62ef4680,ad9e5a2a,"Merge ""Update MapBox to 5.1.0""","Merge ""Update MapBox to 5.1.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499962099,1499962099,"805d348dd3319ab23a925efbea5925937ef8be0c,36d136f8665a01a8d7bf93b760b9de261b1a2ea0"
805d348dd3319ab23a925efbea5925937ef8be0c,805d348d,"Update accent, background, and toolbar colors for dark and light mode.","Update accent, background, and toolbar colors for dark and light mode.

This brings the color styles almost entirely in line with the design
mocks, by doing the following:

- Take the `colorAccent` color, and standardize it to be used everywhere.
  Since this is a standard Android attribute, it will also ensure that all
  view components that use the accent color will automatically inherit it.
- Remove the `link_color` attribute, since this is equivalent to
  colorAccent.
- Introduce attributes for toolbar color and status bar color, to be used
  in activities that need a blue toolbar.

Note: this does not yet update the search bar color to be white instead of
dark.

Bug: T95080
Change-Id: I88436f81435a4d14a97175fc73194a1e3b4737c2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499907555,1499956334,56a1ed4aa249e8a609d46979742a775f33e3c254
56a1ed4aa249e8a609d46979742a775f33e3c254,56a1ed4a,Update color of main toolbar and page bottom actions bar.,"Update color of main toolbar and page bottom actions bar.

This lightens the color that is used for the main toolbar (in the page
activity), the bottom actions bar (also in page activity), and the search
bar (used in Main and Page activity).

Change-Id: I3b5b7ae03588593ade65fffc0d100a795481ef90
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499890080,1499890080,80adf8200d8e5fb17bfa0add9fbf68a182739481
80adf8200d8e5fb17bfa0add9fbf68a182739481,80adf820,"Merge ""ZIM Compilations: activity underpinnings.""","Merge ""ZIM Compilations: activity underpinnings.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499882988,1499882988,"c16ac2497550d3e9af7a044c9d4527b9eabbd266,5e8ad102e65a70ca686d9d6bfe2b547d03d40581"
c16ac2497550d3e9af7a044c9d4527b9eabbd266,c16ac249,"Merge ""ZIM Compilations: the beginning.""","Merge ""ZIM Compilations: the beginning.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499882742,1499882742,"aedb8c3dae13c88014974c98a1f469e007e0e872,028a9dac2fbc6336dae408c4490e1c92c5d91f66"
aedb8c3dae13c88014974c98a1f469e007e0e872,aedb8c3d,"Merge ""Update bottom nav tabs for dark mode.""","Merge ""Update bottom nav tabs for dark mode.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499882720,1499882720,"45591524a2e2141d62eb96d5a5058d9541dce793,56fa8bf0b42c284391b05d518b3841ea93157bee"
45591524a2e2141d62eb96d5a5058d9541dce793,45591524,"Merge ""Update bottom sheet background color for dark mode.""","Merge ""Update bottom sheet background color for dark mode.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499882701,1499882701,"68635558d0ae4fb0aed345c9f884a819103454ad,55f4c6fab26d644152f03631d3b0f5ec663e0cd4"
56fa8bf0b42c284391b05d518b3841ea93157bee,56fa8bf0,Update bottom nav tabs for dark mode.,"Update bottom nav tabs for dark mode.

This introduces color-state resources to make the bottom nav bar appear
nicely in light and dark mode.

Bug: T146385
Change-Id: I61be1940d4b711fb4a12fc59840ca88f0a343d2a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499878342,1499878342,55f4c6fab26d644152f03631d3b0f5ec663e0cd4
55f4c6fab26d644152f03631d3b0f5ec663e0cd4,55f4c6fa,Update bottom sheet background color for dark mode.,"Update bottom sheet background color for dark mode.

* Also remove some unnecessary styling.

Change-Id: I7cce0e51acc9c9607389500bb1556cc1330c991f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499869950,1499869950,2dd782a6b25f857fd193a8d02a369888e4ed9087
5e8ad102e65a70ca686d9d6bfe2b547d03d40581,5e8ad102,ZIM Compilations: activity underpinnings.,"ZIM Compilations: activity underpinnings.

This patch provides the following affordances:
- Our BaseActivity shall now have a NetworkStateReceiver, which will
  listen for changes of when the device goes online or offline. The
  listener will then call the corresponding functions that can be
  overridden by descendant Activities.
- The BaseActivity also introduces some built-in logic for automatically
  searching for offline compilations when the device goes offline. It will
  automatically ask for the EXTERNAL_STORAGE permission, listen for the
  response, and even show a Retry snackbar, totally independent of the
  descendant implementation of the Activity.
- When the task of searching for compilations is complete, it calls
  another function that can be overridden: onOfflineCompilationsFound().
  When this function is overridden, a descendant Activity can take
  additional actions to adapt to the fact that it can now access
  compilation(s) through the OfflineManager.

Bug: T163584
Change-Id: Ib8c93f90fb54fc064636394ca26fbc5cc0ff9566
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499796894,1499868703,028a9dac2fbc6336dae408c4490e1c92c5d91f66
028a9dac2fbc6336dae408c4490e1c92c5d91f66,028a9dac,ZIM Compilations: the beginning.,"ZIM Compilations: the beginning.

This patch forms the kernel of how the rest of the app will interface with
ZIM compilations. We introduce the OfflineManager class, which is a
singleton that will provide content from a compilation. Whether it's using
one or more compilations simultaneously is completely transparent.

This does not yet introduce any actual usage of compilations in the app,
but simply brings the foundation for upcoming patches.

Also, tests.

Bug: T163584
Bug: T166562
Change-Id: If3eac3ce42412d605d51ea26c6232d8225d6a8c7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499780117,1499818527,2dd782a6b25f857fd193a8d02a369888e4ed9087
36d136f8665a01a8d7bf93b760b9de261b1a2ea0,36d136f8,Update MapBox to 5.1.0,"Update MapBox to 5.1.0

Unfortunately, this doesn't fix T164317.

Change-Id: I3eb8b0c9cfb4b611f26d23f982d5716c4ff380b8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1499786619,1499792702,68635558d0ae4fb0aed345c9f884a819103454ad
68635558d0ae4fb0aed345c9f884a819103454ad,68635558,"Use dark background color in dark theme for ""no recent searches""","Use dark background color in dark theme for ""no recent searches""

Instead of hardcoding the light theme color, use the attribute for the
background color of the search window without recent searches.

Bug: T169891
Change-Id: Ic7828189bcb57a04848830b47daa10bafd86b194
",,,,Florian,florian.schmidt.stargatewissen@gmail.com,Florian,florian.schmidt.stargatewissen@gmail.com,1499783838,1499783838,2dd782a6b25f857fd193a8d02a369888e4ed9087
2dd782a6b25f857fd193a8d02a369888e4ed9087,2dd782a6,"Merge ""Hygiene: a bit more post-mwapi cleanup.""","Merge ""Hygiene: a bit more post-mwapi cleanup.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499781438,1499781438,"88c3dba6025f8c591b60121a7e376436ccbf113a,0fb9a56d51c2dd7a9b6b1d2df84933891655dd93"
88c3dba6025f8c591b60121a7e376436ccbf113a,88c3dba6,"Merge ""Fix: increase screenshot test fuzz factor""","Merge ""Fix: increase screenshot test fuzz factor""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499781275,1499781275,"8bf267eeb131c899d54b127fd4d19ab9d595083d,73ca32c9e9c32e4b3f91d50ddb633981458c6f11"
0fb9a56d51c2dd7a9b6b1d2df84933891655dd93,0fb9a56d,Hygiene: a bit more post-mwapi cleanup.,"Hygiene: a bit more post-mwapi cleanup.

Change-Id: I50f2be449d0200e48c7ad48fabd76f197d792bd3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499780317,1499780317,8bf267eeb131c899d54b127fd4d19ab9d595083d
8bf267eeb131c899d54b127fd4d19ab9d595083d,8bf267ee,Post-java-mwapi-removal cleanup,"Post-java-mwapi-removal cleanup

Change-Id: I8e881f99f208e2e47f05de4585017f1890461d8c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1499779885,1499779911,8db5c8c6a16757d39b7f353e18d1410e09dfc1a0
8db5c8c6a16757d39b7f353e18d1410e09dfc1a0,8db5c8c6,"Merge ""Remove dependency on apps-android-java-mwapi library""","Merge ""Remove dependency on apps-android-java-mwapi library""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499779569,1499779569,"bcc1f8cf45f5053cdb4fc1f4fa37d09bef16f3b7,6ff7498d133111fed8ac912d503984fe67112da2"
6ff7498d133111fed8ac912d503984fe67112da2,6ff7498d,Remove dependency on apps-android-java-mwapi library,"Remove dependency on apps-android-java-mwapi library

Bug: T141127
Change-Id: Id8dde4eb22aa408e643a9b622dba654ffc5319f1
",,,,yash,yash.girdhar@gmail.com,Michael Holloway,mholloway@wikimedia.org,1498387008,1499777994,d547cc2eda6ab7547f95da67776603c2d3d9b481
bcc1f8cf45f5053cdb4fc1f4fa37d09bef16f3b7,bcc1f8cf,Hygiene: remove div overflow JavaScript transform,"Hygiene: remove div overflow JavaScript transform

On closer inspection and review with Monte, this transform no longer
seems necessary.

Bug: T164322
Change-Id: I90e0fa0efdb02852d07d7fb51c1d22cca19a7aa6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dmitry Brant,dbrant@wikimedia.org,1496693776,1499777741,d547cc2eda6ab7547f95da67776603c2d3d9b481
d547cc2eda6ab7547f95da67776603c2d3d9b481,d547cc2e,"Merge ""Update: add / remove dark mode class from root element""","Merge ""Update: add / remove dark mode class from root element""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499777622,1499777622,"f60a4e385ebd97565395374232125a73a4cea4cb,039a9eba400622851e56b9f4d959f6878ef0ecd5"
f60a4e385ebd97565395374232125a73a4cea4cb,f60a4e38,"Merge ""Hygiene: upgrade wikimedia-page-library to v4.0.1""","Merge ""Hygiene: upgrade wikimedia-page-library to v4.0.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499777245,1499777245,"3e36336365cbd8064500ff56350065f163f5266d,5e57471782022f7f282d2d40cd6d56c79e96b990"
3e36336365cbd8064500ff56350065f163f5266d,3e363363,"Merge ""Simplify error message upon failure to fetch random article.""","Merge ""Simplify error message upon failure to fetch random article.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499777153,1499777153,"9f9e549fa9365a06e39c78241b8dcf2f4f0cb1da,574ff9ed0a81b6a2d7d698ac6fb52171ceee5776"
9f9e549fa9365a06e39c78241b8dcf2f4f0cb1da,9f9e549f,"Merge ""Hygiene: remove redundant method.""","Merge ""Hygiene: remove redundant method.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499776863,1499776863,"a78b7f3f5ba9de4a6fbeeb19aaa247580d68ac87,f66a3528622881cef7c2c4c1f589f6c53c2c3a91"
f66a3528622881cef7c2c4c1f589f6c53c2c3a91,f66a3528,Hygiene: remove redundant method.,"Hygiene: remove redundant method.

Change-Id: Iad051dc8b2bfd8c38e65d5569c5c003ae77916a0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498766538,1499775998,d82ce5a1fbab478e05bb0232c155a8d59818cd99
73ca32c9e9c32e4b3f91d50ddb633981458c6f11,73ca32c9,Fix: increase screenshot test fuzz factor,"Fix: increase screenshot test fuzz factor

Different results have been observed on different platforms. Try
increasing the fuzz factor to allow a few pixels to be off.

http://www.imagemagick.org/Usage/compare/#compare
http://www.imagemagick.org/Usage/color_basics/#fuzz
http://www.imagemagick.org/script/command-line-options.php?#fuzz
https://www.imagemagick.org/discourse-server/viewtopic.php?t=20761&start=15

Bug: T170149
Change-Id: Ida4bb04f6ec885061f4a68d8607e0c03f0e29711
",,,,Stephen Niedzielski,stephen@niedzielski.com,Michael Holloway,mholloway@wikimedia.org,1499733759,1499744969,d82ce5a1fbab478e05bb0232c155a8d59818cd99
a78b7f3f5ba9de4a6fbeeb19aaa247580d68ac87,a78b7f3f,Hygiene: Remove some redundant instrumentation tests,"Hygiene: Remove some redundant instrumentation tests

These are rather brittle, and made redundant by their JUnit counterparts.

Change-Id: I29dfff2cc3335cf7ef3a4a57c039922caf2a3661
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1499729361,1499730825,d82ce5a1fbab478e05bb0232c155a8d59818cd99
d82ce5a1fbab478e05bb0232c155a8d59818cd99,d82ce5a1,"Merge ""Fix background color of reading lists fragment.""","Merge ""Fix background color of reading lists fragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499721843,1499721843,"c13c50f909ee168d6bcc85ae6228464d78e342cf,e0daa76b2aea7c43cc90268dbf407cc33a440064"
c13c50f909ee168d6bcc85ae6228464d78e342cf,c13c50f9,Hygiene: bulk actions follow-up.,"Hygiene: bulk actions follow-up.

Change-Id: I880216d82f64d99f451707b8d3fb5abf6ce62883
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499719664,1499719701,c27ed444064189194bb20586d02db5c85c999da1
c27ed444064189194bb20586d02db5c85c999da1,c27ed444,"Bulk reading list actions, pt. 2: bulk add to list","Bulk reading list actions, pt. 2: bulk add to list

Bug: T160637
Change-Id: I6e4892a71dce5743937caca9771e48cc75e61be8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498687173,1499716567,9c346c0543e015fb1e3d70a1a5575a29956f2a64
9c346c0543e015fb1e3d70a1a5575a29956f2a64,9c346c05,"Add bulk reading list actions, p. 1","Add bulk reading list actions, p. 1

Puts the basic infrastructure for bulk actions in place and enables
bulk saving for/unsaving from offline.

Bulk adding to another list is a little more involved and is WIP. I'll
submit that later. But since I'm out soon, and in the interest of keeping
patches manageable in size, I thought I'd submit this now.

Bug: T160637
Change-Id: I94db41928afbf86adcb47e7af8133905ac4813eb
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498687173,1499716564,176da90436ae386bf91892a3dcae69f934d614b0
176da90436ae386bf91892a3dcae69f934d614b0,176da904,"Merge ""Fix full-text search.""","Merge ""Fix full-text search.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499698096,1499698096,"37066bcb94e3e1a23d0d765e70ce36276ce92106,084cd61ed0fc234f2d9f2de22e93b1aa0804291e"
574ff9ed0a81b6a2d7d698ac6fb52171ceee5776,574ff9ed,Simplify error message upon failure to fetch random article.,"Simplify error message upon failure to fetch random article.

Bug: T157377
Change-Id: I7820ea9babdc06955e734027497587b31644002b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499697668,1499697668,37066bcb94e3e1a23d0d765e70ce36276ce92106
37066bcb94e3e1a23d0d765e70ce36276ce92106,37066bcb,"Merge ""Fix : ShareAFact schema : populating text field in case of highlight type events""","Merge ""Fix : ShareAFact schema : populating text field in case of highlight type events""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499696875,1499696875,"e38516e6408b889e6a0ac8fc18bfe4e6e7cc77ae,3955fa19168b53cdcbc7a73f5410bfec4e2a4dff"
e0daa76b2aea7c43cc90268dbf407cc33a440064,e0daa76b,Fix background color of reading lists fragment.,"Fix background color of reading lists fragment.

Bug: T170000
Change-Id: Ib698c742d9b0e523d4648f5b1f7b0d3478322aef
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499695523,1499695523,eee552144195a50c07444a5d42f7d5ffa7a986e2
e38516e6408b889e6a0ac8fc18bfe4e6e7cc77ae,e38516e6,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499693306,1499693306,"4c227943181fcc9953df1261ba7abcb6fb78b038,8779cdc1f151e27a726453804b40f2965827b315"
4c227943181fcc9953df1261ba7abcb6fb78b038,4c227943,"Merge ""Lint: Downgrade ExtraTranslation from error to warning""","Merge ""Lint: Downgrade ExtraTranslation from error to warning""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499693241,1499693241,"eee552144195a50c07444a5d42f7d5ffa7a986e2,b1497574b99afaa646635081673f77ff9dcda645"
8779cdc1f151e27a726453804b40f2965827b315,8779cdc1,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ibf70a3fa4cf03cc0ea94552f631ef19640bbec82
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1499669072,1499669072,eee552144195a50c07444a5d42f7d5ffa7a986e2
039a9eba400622851e56b9f4d959f6878ef0ecd5,039a9eba,Update: add / remove dark mode class from root element,"Update: add / remove dark mode class from root element

Toggling dark mode now adds a `dark` class to the root HTML node which
allows for pure CSS presentation changes. The code is modeled after the
RTL and page protection implementations and required by the lazily
loaded images implementation.

Bug: T164429
Change-Id: I222027248a6c399b516a198323d30294f6ab36ec
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1499294784,1499655101,5e57471782022f7f282d2d40cd6d56c79e96b990
5e57471782022f7f282d2d40cd6d56c79e96b990,5e574717,Hygiene: upgrade wikimedia-page-library to v4.0.1,"Hygiene: upgrade wikimedia-page-library to v4.0.1

- Update for API breaking change to CollapseTable transform.
- Collapsing / expanding now emits an event. This change is required by
  the lazily loaded images implementation to detect when an infobox or
  other table with images is exposed.
- New red link transform will be used by T165419.
- New package format adds a tiny bit of code to the bundle but supports
  usage via `<script>` for other clients.

https://github.com/wikimedia/wikimedia-page-library/blob/4be74ca/changelog.md#v401

Bug: T164429
Change-Id: Ic9acd85e00499cdb9cbc0961c14663e10b597c08
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1499292407,1499655101,eee552144195a50c07444a5d42f7d5ffa7a986e2
3955fa19168b53cdcbc7a73f5410bfec4e2a4dff,3955fa19,Fix : ShareAFact schema : populating text field in case of highlight type events,"Fix : ShareAFact schema : populating text field in case of highlight type events

Bug: T167372
Change-Id: I1c98a355bdce51db9f72b15c137ee380d921f10a
",,,,yash,yash.girdhar@gmail.com,yash,yash.girdhar@gmail.com,1499593095,1499593151,682c96953bf2d9d886f4c1cda680294a14dfec5e
eee552144195a50c07444a5d42f7d5ffa7a986e2,eee55214,"Fix screenshot tests, for real?","Fix screenshot tests, for real?

Change-Id: I4fdcaa9681112dee2019c1d4449efc7348382474
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1499581873,1499581873,682c96953bf2d9d886f4c1cda680294a14dfec5e
084cd61ed0fc234f2d9f2de22e93b1aa0804291e,084cd61e,Fix full-text search.,"Fix full-text search.

The newly-Retrofitted full text search client seemed to be unconditionally
using the ""morelike:"" prefix when performing searches.  Whereas, we should
only use morelike when searching for related articles.

Bug: T170017
Change-Id: Ib5aa0ef1674b915875b8a5648f894459274d53d0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499465028,1499465028,a9dd9269e96ea20ea921d2ab5a366506c23a8697
b1497574b99afaa646635081673f77ff9dcda645,b1497574,Lint: Downgrade ExtraTranslation from error to warning,"Lint: Downgrade ExtraTranslation from error to warning

The ExtraTranslation rule checks for strings for which there are
translations but no default.  This is expected when removing strings
(according to Siebrand, the translations will be removed from TWN with no
further intervention needed from us) but the Android linter throws an
error by default for these.  Let's downgrade it to a warning.

Change-Id: Iff1df045ece3669bf177ff1d8424d9fc53036750
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1499451625,1499451625,a9dd9269e96ea20ea921d2ab5a366506c23a8697
682c96953bf2d9d886f4c1cda680294a14dfec5e,682c9695,"Final, final design tweaks to reading lists screen.","Final, final design tweaks to reading lists screen.

- Made the background of the ""log in"" onboarding card the same as the
  background of the ""turned off"" onboarding card.
- Increased the top margin of the ""no results"" icon when searching within
  a reading list.

Bug: T162619
Change-Id: Ie22c50c77cbf45e848644e6f3c14a791692ccc7a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1499450823,1499450823,a9dd9269e96ea20ea921d2ab5a366506c23a8697
a9dd9269e96ea20ea921d2ab5a366506c23a8697,a9dd9269,"Merge ""Update reference screenshots""","Merge ""Update reference screenshots""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499438208,1499438208,"ac78ad06a21502b7483530ea841be323e00d663c,8b18e49ebaf211bd4d63301337b559bea63ce4ee"
ac78ad06a21502b7483530ea841be323e00d663c,ac78ad06,"Merge ""Hygiene: Remove unused method""","Merge ""Hygiene: Remove unused method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499437089,1499437089,"a3d7440245af5d9bee30211d52b1f36c45eb9d76,f3098c83c07def432223a6b654af3b2b3f9feb08"
a3d7440245af5d9bee30211d52b1f36c45eb9d76,a3d74402,"Merge ""Move TranslationTests to plain JUnit, pt. 2""","Merge ""Move TranslationTests to plain JUnit, pt. 2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499436820,1499436820,"569845858048b93992e310990df5f898ff8296da,ea2a766f40561cd60c5edebacab034042a40b75e"
569845858048b93992e310990df5f898ff8296da,56984585,"Merge ""Move TranslationTests to plain JUnit, pt. 1""","Merge ""Move TranslationTests to plain JUnit, pt. 1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499436778,1499436778,"c7b33f40d2ab7e497e37c209cb59fde04421d726,6eb69c7b40139a5381151185137a9ef4aadde51f"
8b18e49ebaf211bd4d63301337b559bea63ce4ee,8b18e49e,Update reference screenshots,"Update reference screenshots

Change-Id: I9ae016a494acaba855bf0040ff9a44a610b7c556
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1499436724,1499436724,c7b33f40d2ab7e497e37c209cb59fde04421d726
c7b33f40d2ab7e497e37c209cb59fde04421d726,c7b33f40,"Merge ""Final design rework of onboarding screens.""","Merge ""Final design rework of onboarding screens.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499435617,1499435617,"7d3f12c6932b100dcb91ab2457fafe9c6d862864,14ee3c8946cb5ead485447a1f86d89adc41761b0"
7d3f12c6932b100dcb91ab2457fafe9c6d862864,7d3f12c6,"Merge ""Fix possible crash(es) when saving images from Gallery or Feed.""","Merge ""Fix possible crash(es) when saving images from Gallery or Feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499434810,1499434810,"2c3344d76ce184fc1390b2a7bb1b84ef4339eed8,0596b4bde51ba90f898b586ba28e2cb6e6728aa9"
2c3344d76ce184fc1390b2a7bb1b84ef4339eed8,2c3344d7,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499434443,1499434443,"abb69e71474704cab4935447670c288c75ffcd02,ef931f353c5dd5e6d914eb7ffef793d51a231595"
abb69e71474704cab4935447670c288c75ffcd02,abb69e71,"Merge ""Reconcile synced reading lists when a different user logs in.""","Merge ""Reconcile synced reading lists when a different user logs in.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1499434254,1499434254,"fa3bdb8b48e20d78cc2191d7324d3d76bcb20221,381378f8baca03cc3391afbb93208e618be4fbc4"
ef931f353c5dd5e6d914eb7ffef793d51a231595,ef931f35,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I3dafbdf5db614422a9c8f03776b726597e3a737a
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1499333248,1499433601,fa3bdb8b48e20d78cc2191d7324d3d76bcb20221
f3098c83c07def432223a6b654af3b2b3f9feb08,f3098c83,Hygiene: Remove unused method,"Hygiene: Remove unused method

Change-Id: Iab2d49c8df9f9cd6aa8ee748b206b728d213fb5d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1499431773,1499432079,ea2a766f40561cd60c5edebacab034042a40b75e
ea2a766f40561cd60c5edebacab034042a40b75e,ea2a766f,"Move TranslationTests to plain JUnit, pt. 2","Move TranslationTests to plain JUnit, pt. 2

Updates and re-enables plurals checking

Bug: T139546
Bug: T169917
Change-Id: I25cff0910cba552b2ecfe4ac5c26b02b917b674f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1499431554,1499432079,6eb69c7b40139a5381151185137a9ef4aadde51f
6eb69c7b40139a5381151185137a9ef4aadde51f,6eb69c7b,"Move TranslationTests to plain JUnit, pt. 1","Move TranslationTests to plain JUnit, pt. 1

Stops depending on an Android system context for Resource handling and
instead iterates over the various strings.xml files, leveraging jsoup to
parse the strings directly from the XML and test them.

To follow: restore plurals testing.  (I'm sure jsoup can handle this
similarly, just trying to break things up a bit for ease of reviewing.)

Bug: T139546
Bug: T169917
Change-Id: Ie743651ac5a87f5956471759ec614c7a834a0fef
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1499381917,1499432079,fa3bdb8b48e20d78cc2191d7324d3d76bcb20221
fa3bdb8b48e20d78cc2191d7324d3d76bcb20221,fa3bdb8b,Fix format string translations,"Fix format string translations

...which are currently broken again.

N.B. I can't actually view these in action on any of my devices as they
are currently configured, but this gets at least gets the translation
tests passing again.

Change-Id: I6227bc66478e84b470a103a73fd2fc39b0d162eb
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1499357564,1499357564,31e0e9909991b915d04d63d835e5b88c6dce52f5
31e0e9909991b915d04d63d835e5b88c6dce52f5,31e0e990,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4053d0bc7fe3af287e33c27098d17ce037a7c0b4
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1499156250,1499286109,818ce06eac9d96ce5d6bb7484123f0140ca0b27f
818ce06eac9d96ce5d6bb7484123f0140ca0b27f,818ce06e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4a7b6ed9f61dec0c4bce934f14b037dbe31d3236
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1499061894,1499285061,598103eeb7e43e98d6eaea8365fc095b092c1ef0
598103eeb7e43e98d6eaea8365fc095b092c1ef0,598103ee,"Merge ""Update MCS content format versions for mobile-sections and definitions""","Merge ""Update MCS content format versions for mobile-sections and definitions""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498837906,1498837906,"f09294f252dca2f093645e1131500697d879543b,ed75cf8fb1ad16705cbf765bf818d77416374aef"
f09294f252dca2f093645e1131500697d879543b,f09294f2,"Fix ""No results"" message overlapping other error messages in search results view","Fix ""No results"" message overlapping other error messages in search results view

This task fixes the way messages are shown from within error messages container, hiding first ""No results"" message then showing that there is ""No Internet Connectivity"".

Bug: T166432
Change-Id: I059a025f661b5f043a65b323c8f03231197294cf
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1498831353,1498832085,3336bbbbbd65c3d845c58583f06c58b60e29d24f
0596b4bde51ba90f898b586ba28e2cb6e6728aa9,0596b4bd,Fix possible crash(es) when saving images from Gallery or Feed.,"Fix possible crash(es) when saving images from Gallery or Feed.

Half-hygiene, half crash fix:
This patch brings our entire logic of saving images more up-to-date with
our current patterns and practices. It removes the necessity to pass and
persist Activity and Context instances in several places, and introduces
proper Callback behavior that we know and love.

It should also fix the following crash, if not a few others:
https://rink.hockeyapp.net/manage/apps/226649/app_versions/204/crash_reasons/173113217

Change-Id: Ifc04526b8ce6107ee190c41644fb8a24c91d282c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498507268,1498830602,3336bbbbbd65c3d845c58583f06c58b60e29d24f
3336bbbbbd65c3d845c58583f06c58b60e29d24f,3336bbbb,"Merge ""Change the download location of files""","Merge ""Change the download location of files""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498829409,1498829409,"57e6fb5cd0d49068a76161f6301db2d5a13fdbb9,e63fb45704f28878c216eacc9c9955756e18415a"
e63fb45704f28878c216eacc9c9955756e18415a,e63fb457,Change the download location of files,"Change the download location of files

Previously the location of the download
was inside app directory. It was changed
to a public directory to,

 - Allow users to easily access the
   downloaded files

 - Allow other media applications to discover
   the files

Things that this commit introduces,

 - Corrected variable names

 - Download files into a subdirectory that identifies
   the app because,

   - It helps the users who download multiple photos

   - It prevents the common ""Pictures"" folder
     from being cluttered up

Bug: T166434
Change-Id: I6b97b47b9b7dac6e4d3b23a25dda2096b6f55fa3
",,,,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,1496469975,1498823529,03fc8984d1cbaa76637f5260728df79cb90d254e
57e6fb5cd0d49068a76161f6301db2d5a13fdbb9,57e6fb5c,"Merge ""Performance: update ReadingListData.listContainsTitle""","Merge ""Performance: update ReadingListData.listContainsTitle""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498766815,1498766815,"adc5eb02c8fcce5d01805b3c04b0eff9e29f96dc,db140ecc7377256c902dccee514d91daa491b473"
381378f8baca03cc3391afbb93208e618be4fbc4,381378f8,Reconcile synced reading lists when a different user logs in.,"Reconcile synced reading lists when a different user logs in.

Bug: T162763
Change-Id: I50f6815a745de942bfb4f368d7bbd2c790e76435
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1498237881,1498766709,adc5eb02c8fcce5d01805b3c04b0eff9e29f96dc
adc5eb02c8fcce5d01805b3c04b0eff9e29f96dc,adc5eb02,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498766207,1498766207,"34dd550fd1e55c890aadbb567c2701c016873f9f,d9b4f645838d54f965f494e052da5c27be9e4ece"
d9b4f645838d54f965f494e052da5c27be9e4ece,d9b4f645,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ibb293e503fc7bf7c3aa458beb8fe0de63a2b0169
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1498716864,1498765469,a59bcf1211cb67f0a52c682b516f5af7d0ce388c
14ee3c8946cb5ead485447a1f86d89adc41761b0,14ee3c89,Final design rework of onboarding screens.,"Final design rework of onboarding screens.

- Made an even more generalized OnboardingFragment that hosts a ViewPager
  which pages between different onboarding views, while maintaining
  certain fixed elements in place (the pager dot indicator, the skip
  button, the background gradient, etc).
- The Initial and DescriptionEditing onboarding workflows are now
  derivatives of the base OnboardingFragment, with just a few simple
  overrides.

Bug: T166393
Bug: T169106
Change-Id: Ib44245c81470581481d1624c29397361fa705a5c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498763858,1498764748,cfe29e593e403a5b18fc71a4a8814f23b6d6f16c
db140ecc7377256c902dccee514d91daa491b473,db140ecc,Performance: update ReadingListData.listContainsTitle,"Performance: update ReadingListData.listContainsTitle

Rather than getting all page rows containing the list and re-iterating
over them, just get the page row for the page we're insterested in and
check the list keys.

Change-Id: I8e25404430b9e493ddf2f2f92888d30304930094
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498752009,1498752009,cfe29e593e403a5b18fc71a4a8814f23b6d6f16c
34dd550fd1e55c890aadbb567c2701c016873f9f,34dd550f,"Merge ""Rephrase ""reading list article save in progress""""","Merge ""Rephrase ""reading list article save in progress""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498747935,1498747935,"cfe29e593e403a5b18fc71a4a8814f23b6d6f16c,01207b77c5eaa840412b9618ac3da2793aee326f"
cfe29e593e403a5b18fc71a4a8814f23b6d6f16c,cfe29e59,Hygiene: rename UserOptionDataClient.,"Hygiene: rename UserOptionDataClient.

The ""Default"" nomenclature is no longer necessary.

Change-Id: I1a21cdb3c5274c92ed0ca14176a96bc2abafc843
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498745149,1498745149,a59bcf1211cb67f0a52c682b516f5af7d0ce388c
01207b77c5eaa840412b9618ac3da2793aee326f,01207b77,"Rephrase ""reading list article save in progress""","Rephrase ""reading list article save in progress""

Change-Id: I3d9b582c56773f26cb0c3fc862115b844356a6fa
",,,,Amire80,amir.aharoni@mail.huji.ac.il,Amire80,amir.aharoni@mail.huji.ac.il,1498737229,1498737229,a59bcf1211cb67f0a52c682b516f5af7d0ce388c
a59bcf1211cb67f0a52c682b516f5af7d0ce388c,a59bcf12,Further improve/fix handling of remote user options.,"Further improve/fix handling of remote user options.

Change-Id: I087bf04c19d984e63ad634a1b52d7e7a3882c079
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498684105,1498684698,1e02b4a4de2449ad46f1d4ac510d087003595f51
1e02b4a4de2449ad46f1d4ac510d087003595f51,1e02b4a4,Hygiene: Consolidate GalleryItem constructors,"Hygiene: Consolidate GalleryItem constructors

Change-Id: Iefb7d3960658b41b2ea0705abc8372cca38e598a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498674825,1498674825,e5fac7d6f9f37789e863894d75b200d4e8b181df
e5fac7d6f9f37789e863894d75b200d4e8b181df,e5fac7d6,Show improved status indication when page download is in progress.,"Show improved status indication when page download is in progress.

Bug: T166386
Change-Id: Ib6bfea6c2dd9626f75544f47e7400b64ea7c4450
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498588482,1498670896,33b167e552cdeda0fa311d88262ad24259247bb2
33b167e552cdeda0fa311d88262ad24259247bb2,33b167e5,"Merge ""Fix dark mode presentation of reading list item overflow dialog.""","Merge ""Fix dark mode presentation of reading list item overflow dialog.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498667722,1498667722,"ef2d55806ab8438e5d1d5c5354b9228a835ef513,c5626b324b290f395ef7f0ab5bdad7942d3de851"
ef2d55806ab8438e5d1d5c5354b9228a835ef513,ef2d5580,"Merge ""Hygiene: Remove unused field and accessor methods""","Merge ""Hygiene: Remove unused field and accessor methods""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498666256,1498666256,"a4d3dfc07f7b0591d4935f0b7bd6e439ba1089d3,14625ddd60d79a237104b35e069f4e334c19bb6f"
a4d3dfc07f7b0591d4935f0b7bd6e439ba1089d3,a4d3dfc0,"Merge ""Hygiene: Remove unnecessary method overrides from Page""","Merge ""Hygiene: Remove unnecessary method overrides from Page""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498666025,1498666025,"f9a6042c9040d88efeb76090d72ccc71114e88ce,3abec7ed07196de57a2da5c51e8ef58379745224"
f9a6042c9040d88efeb76090d72ccc71114e88ce,f9a6042c,"Merge ""Hygiene: Remove unused legacy JSON constructors""","Merge ""Hygiene: Remove unused legacy JSON constructors""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498665769,1498665769,"3bce7ad80255b8f846b54e9b35338e6f0f75ceef,e4d77292e32712fce4efa72aa6572947487b3e61"
3bce7ad80255b8f846b54e9b35338e6f0f75ceef,3bce7ad8,"Merge ""Final design touches to reading list and page item views.""","Merge ""Final design touches to reading list and page item views.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498664950,1498664950,"fcac057de916ca2e0905161b38e8d6b434f71c99,f01036376e337b09e0f6ae0d0b9dc995c9136a6e"
fcac057de916ca2e0905161b38e8d6b434f71c99,fcac057d,"Merge ""Fix playback of audio files.""","Merge ""Fix playback of audio files.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498662826,1498662826,"20626cfd41b1ffc0ef6dac9a1950e6c615e40e85,6585ed08996997937f8661c56acf7d015cd68dda"
20626cfd41b1ffc0ef6dac9a1950e6c615e40e85,20626cfd,"Merge ""Fix proper retrieval of User Options.""","Merge ""Fix proper retrieval of User Options.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498662037,1498662037,"42d889748c296229ae188d9c069dca44216cd74b,41d039a0b9a589b978786861238d518fa3ccd806"
42d889748c296229ae188d9c069dca44216cd74b,42d88974,"Merge ""Final design tweaks to reading list header view.""","Merge ""Final design tweaks to reading list header view.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498660849,1498660849,"058f38f87f913208e093386c5256f1347347bd1b,2da9301ec3b464e089b68a7ef1121693eac1aaf1"
14625ddd60d79a237104b35e069f4e334c19bb6f,14625ddd,Hygiene: Remove unused field and accessor methods,"Hygiene: Remove unused field and accessor methods

Change-Id: Iecd9ec96bef3162d6155bac4a0699fa336dfe4c0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498660176,1498660176,3abec7ed07196de57a2da5c51e8ef58379745224
3abec7ed07196de57a2da5c51e8ef58379745224,3abec7ed,Hygiene: Remove unnecessary method overrides from Page,"Hygiene: Remove unnecessary method overrides from Page

Removes the overrides of equals(), hashCode(), and toString(), which seem
to be left over from a Parcelable implementation we no longer use.

Change-Id: I61691589f3e24f5ba3e282f88071268d166a19a7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498660049,1498660049,e4d77292e32712fce4efa72aa6572947487b3e61
e4d77292e32712fce4efa72aa6572947487b3e61,e4d77292,Hygiene: Remove unused legacy JSON constructors,"Hygiene: Remove unused legacy JSON constructors

Change-Id: I3f486e7c3ce3616085b94c13064de0140f9f699c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498659759,1498659784,058f38f87f913208e093386c5256f1347347bd1b
058f38f87f913208e093386c5256f1347347bd1b,058f38f8,"Merge ""Tests for Retrofit GalleryItemClient""","Merge ""Tests for Retrofit GalleryItemClient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498659554,1498659554,"6ed1c7992c8964571d7ee99bcfd63793b5f04ff6,949d38184bbe8715331192c7d1dd61a125cd84ee"
6ed1c7992c8964571d7ee99bcfd63793b5f04ff6,6ed1c799,"Merge ""Retrofit GalleryItemFetchTask""","Merge ""Retrofit GalleryItemFetchTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498659417,1498659417,"b40ae99d5446b769a741d0f6dd15fb04d1dd69fd,61dadcc0794b2189258feb7888490d999dbed2ef"
949d38184bbe8715331192c7d1dd61a125cd84ee,949d3818,Tests for Retrofit GalleryItemClient,"Tests for Retrofit GalleryItemClient

Bug: T152404
Change-Id: I8a177aa34aeaa0b83f42a6818c8029923ad8cd34
",,,,yash,yash.girdhar@gmail.com,Michael Holloway,mholloway@wikimedia.org,1498319445,1498658532,61dadcc0794b2189258feb7888490d999dbed2ef
61dadcc0794b2189258feb7888490d999dbed2ef,61dadcc0,Retrofit GalleryItemFetchTask,"Retrofit GalleryItemFetchTask

Bug: T152404
Change-Id: I0d2477fba2406a439eac773f2865f14ec36226d9
",,,,yash,yash.girdhar@gmail.com,Michael Holloway,mholloway@wikimedia.org,1497199583,1498658528,880016e87c786c7998615b532d4f0d5deaf0982e
41d039a0b9a589b978786861238d518fa3ccd806,41d039a0,Fix proper retrieval of User Options.,"Fix proper retrieval of User Options.

Here's the thing:
When we make the API call to get the ""options"" for the current user, the
API actually always returns success, regardless of whether the user is
logged in or not:

- If the user is logged in, the API returns the options for that user.
- If the user is not logged in, the API returns the options for the
  *anonymous* user implicitly assigned to that IP address!

This is a problem for us because there are some cases where the app
""believes"" the user is logged in, but the API disagrees. This can happen
for several reasons, including if the OAuth cookie is expired, or if the
app data is cleared, but the user's account is still present in the
AccountManager.

Anyway, the place where this presents an actual problem is when we
retrieve the user options. In other parts of the code where we rely on the
user being logged in, we depend on CsrfTokenClient to implicitly log in
the user before proceeding.  So, this patch modifies the get() method that
retrieves user options, so that it goes through the CsrfTokenClient cycle
before getting the options.  It won't actually use the token, but this
will ensure that the user is properly logged in.

Change-Id: I5820ea94549fdcc2e88a3d6804d2689c2cb9943e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498593198,1498595313,b40ae99d5446b769a741d0f6dd15fb04d1dd69fd
2da9301ec3b464e089b68a7ef1121693eac1aaf1,2da9301e,Final design tweaks to reading list header view.,"Final design tweaks to reading list header view.

- Darken the gradient at the top.
- Use a ""bookmark"" icon to indicate an empty thumbnail slot.

Bug: T159719
Change-Id: Id3367df36c54047e5a18e65975eb62a9c12fb1ea
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498585292,1498585292,b40ae99d5446b769a741d0f6dd15fb04d1dd69fd
f01036376e337b09e0f6ae0d0b9dc995c9136a6e,f0103637,Final design touches to reading list and page item views.,"Final design touches to reading list and page item views.

Updates to margins, alignments, and colors of the elements in our reusable
page item view, as well as the reading list item view.

Bug: T156073
Change-Id: I9837605bca45bd3dceebe0f6a66d8feb74e20532
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498578573,1498583649,b40ae99d5446b769a741d0f6dd15fb04d1dd69fd
c5626b324b290f395ef7f0ab5bdad7942d3de851,c5626b32,Fix dark mode presentation of reading list item overflow dialog.,"Fix dark mode presentation of reading list item overflow dialog.

The background color of this item was never being set correctly, so it was
appearing as the default white, even in dark mode.

Change-Id: I74eeb6190812196f6589d8f0adeb073825583630
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498579098,1498579098,b40ae99d5446b769a741d0f6dd15fb04d1dd69fd
b40ae99d5446b769a741d0f6dd15fb04d1dd69fd,b40ae99d,"Merge ""Hide reading list title when searching with no results.""","Merge ""Hide reading list title when searching with no results.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498576141,1498576141,"b34dafafc37fb04ec5df211ddc743130cc223310,acbfae375e6988b218ad4d6dc72b59064668e9da"
b34dafafc37fb04ec5df211ddc743130cc223310,b34dafaf,"Fix: Compare Strings, not SpannableStringBuilders, when checking pw repeat","Fix: Compare Strings, not SpannableStringBuilders, when checking pw repeat

Password repeat checking is always failing.  The objects being compared
with equals() are actually SpannableStringBuilders, not Strings, which
evidently don't implement equals() the same as Strings do (i.e., they are
not equal despite having identical string content).

This compares the String values so the check doesn't always fail.

Bug: T165357
Change-Id: I547f78dbbb5c38a2759746e85cca81cf344f2ba3
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498574631,1498574631,18faa6da6b2ab302c6370c518021189e07a301ab
acbfae375e6988b218ad4d6dc72b59064668e9da,acbfae37,Hide reading list title when searching with no results.,"Hide reading list title when searching with no results.

This is a tiny design tweak, to comply with the design recommendation in
the task.  The only thing that can't be accomplished at the moment is
vertical centering of the no-results view. This doesn't seem to be very
easy to do with a CoordinatorLayout + NestedScrollView, and we can
investigate it at a later time.

Bug: T156086
Change-Id: Idfc821a628ae4100b86893e3d9993300146a67bf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498573124,1498573224,18faa6da6b2ab302c6370c518021189e07a301ab
18faa6da6b2ab302c6370c518021189e07a301ab,18faa6da,Update reading list onboarding UI,"Update reading list onboarding UI

This task update the visual design of the current bottom sheet that is
based on an older outdated styles of the app.

Bug: T162839
Change-Id: I096e1f54a091da013f60abce96417314da0966e8
",,,,Jorge Casariego,jorgekasa@gmail.com,Michael Holloway,mholloway@wikimedia.org,1497704903,1498521401,1ffa33dec3ee23f7f2b4df23b6a295f4617b03e9
ed75cf8fb1ad16705cbf765bf818d77416374aef,ed75cf8f,Update MCS content format versions for mobile-sections and definitions,"Update MCS content format versions for mobile-sections and definitions

This will ensure we get the latest version of MCS content, which now
includes redlink hiding!

Bug: T119266
Change-Id: I3c281362f847d5bccafa54f5b0da1ea5fd155b02
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498505380,1498505380,1ffa33dec3ee23f7f2b4df23b6a295f4617b03e9
1ffa33dec3ee23f7f2b4df23b6a295f4617b03e9,1ffa33de,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498490846,1498490846,"96f91e4c8602c49089e3b0e92d9e001f87a0d43e,2af6f0d5a37cea33559063d8600c537bbc454248"
2af6f0d5a37cea33559063d8600c537bbc454248,2af6f0d5,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: If0c7ba7b7e1f72ebc3e1ad8c603c9b316ed5187b
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1498462796,1498489887,0eb271b259f8b24548993b88205d963ba6ea72d3
6585ed08996997937f8661c56acf7d015cd68dda,6585ed08,Fix playback of audio files.,"Fix playback of audio files.

Here's where my research on this has led:
(see previous patch set for earlier notes)

To debug this more definitively, I subclassed InputStream and overrode all
of its methods, and added log messages to see which methods were being
called after the InputStream gets passed back to the WebView for
processing.  What I found is very interesting:

The first thing that gets called is the available() method.  But wait...
the byteStream given by OkHttp returns zero when calling available()! (or
rather, available() returns 0 when it's called before any read() methods.)

This seems to be in violation of the platform's InputStream documentation,
which says that the available() return value is ""an estimate of the number
of bytes that can be read (or skipped over) from this input stream without
blocking, or 0 when it reaches the end of the input stream.""

The above logic implies that any consumer of OkHttp's byteStream that
relies on available() is bound to fail.  And it's looking like the
consumer that plays back audio files does indeed rely on available() to
give it the total number of bytes left in the stream to read.

The solution proposed here is to subclass InputStream, initialize it with
the total byte count that the stream will contain, and explicitly keep
track of the byte count with every read() and skip() call, so that any
call to the available() method will produce a meaningful value.

Of course, we will restrict usage of this subclass to the specific mime
type of ""application/ogg"" for now.

Bug: T164520
Change-Id: I1aa424d43ac4dcfbb18787da41f53e0a55ac9b0a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498244340,1498489516,b434d47c65f82bb8ff2b5a98f5142b824edea916
96f91e4c8602c49089e3b0e92d9e001f87a0d43e,96f91e4c,"Merge ""Use AccountManager for storing user credentials.""","Merge ""Use AccountManager for storing user credentials.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498483327,1498483327,"0eb271b259f8b24548993b88205d963ba6ea72d3,0b579e0754913fb17cbf2ca68384d45e7e40fd5d"
0eb271b259f8b24548993b88205d963ba6ea72d3,0eb271b2,"Merge ""Hygiene: remove unused resources""","Merge ""Hygiene: remove unused resources""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498254117,1498254117,"7d382c437f8caec258decf785a23e6c8fff7f947,d6ae8654e384d03979d6faeb5c80ead5a89453dd"
7d382c437f8caec258decf785a23e6c8fff7f947,7d382c43,Update design and onboarding in Login and CreateAccount screens.,"Update design and onboarding in Login and CreateAccount screens.

- Butter up LoginActivity and CreateAccountActivity.
- Add onboarding bullet points.
- Add ""forgot password"" link when logging in (goes to mobile web).

Bug: T162720
Bug: T159450
Change-Id: I547d9abce5c75b1226de613736373295da3bc14d
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1498048679,1498252593,a3f989670b08ca8f49330714cabfd0de07cbe7bc
a3f989670b08ca8f49330714cabfd0de07cbe7bc,a3f98967,Introduce app-wide onboarding screens.,"Introduce app-wide onboarding screens.

This builds on the previous patches that generalized our onboarding
capabilities, and brings a new app-wide initial onboarding workflow:

- Three screens through which the user can flip, that talk about the Feed,
  syncing of reading lists, and anonymous event logging.
- The generic onboarding view has been expanded to support clickable links
  inside the secondary text view.
- In the ""reading list"" onboarding screen, the user can click a link to
  log in to their account, and if successful, it will come back to the
  onboarding and advance the page automatically.
- The large images used in the onboarding screens are PNG files, since
  it's still nearly impossible to import SVG files of nontrivial
  complexity.  However, I'm using a medium-res version of the PNG files,
  and I didn't place them in a specific dpi folder. This will allow
  devices to scale the image themselves, with a tiny performance cost, but
  a big space gain.

Bug: T166393
Change-Id: Idd3b646d6a4be454935f95a7ea0eeae56264822c
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1497620419,1498252523,71370ad9211f37ac2b026ff23e7f772a42a0cfd6
71370ad9211f37ac2b026ff23e7f772a42a0cfd6,71370ad9,Generalize onboarding activity and views.,"Generalize onboarding activity and views.

This generalizes the DescriptionEditTutorial activity that was being used
for the specific purpose of description edit onboarding, so that we can
reuse it for the upcoming ""main"" app onboarding, and possibly for future
onboarding workflows. This does all of the following:

- Add a landscape version of the onboarding layout, and never force the
  screen orientation into Portrait.
- Add a ""Skip"" button at the top, for the user to skip the entire
  workflow, which should always be an option.
- Rejigger the view hierarchy a bit, to accommodate longer onboarding
  text and additional components.
- Add an optional ""Switch"" component, to be used as a general selector for
  an onboarding step, e.g. ""Send usage data"".

Change-Id: I8c60c0067d13f3769c5070eaf5c4bb6e5b6b23de
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497584164,1498248610,b434d47c65f82bb8ff2b5a98f5142b824edea916
b434d47c65f82bb8ff2b5a98f5142b824edea916,b434d47c,"Merge ""Hygiene: Update SettingsPreferenceLoader listeners""","Merge ""Hygiene: Update SettingsPreferenceLoader listeners""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498236101,1498236101,"60d758dd8ef9c9ab6fa67dac5d53a83a7e30cb6b,ed1cd840c32c4280fafd54e0d67e7dbf27cd5145"
60d758dd8ef9c9ab6fa67dac5d53a83a7e30cb6b,60d758dd,"Merge ""Add a setting for app color theme""","Merge ""Add a setting for app color theme""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498236100,1498236100,"0f8ea73ea4044ddd7d54d5da92a4734b5d46ffce,1d6e1e19ad19b256133c6848691b07eada89a504"
d6ae8654e384d03979d6faeb5c80ead5a89453dd,d6ae8654,Hygiene: remove unused resources,"Hygiene: remove unused resources

Change-Id: Ic5566d47ef3c98c1e87e1da263edd026b5c8c882
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1498232571,1498232807,0f8ea73ea4044ddd7d54d5da92a4734b5d46ffce
ed1cd840c32c4280fafd54e0d67e7dbf27cd5145,ed1cd840,Hygiene: Update SettingsPreferenceLoader listeners,"Hygiene: Update SettingsPreferenceLoader listeners

* Make all private classes rather than one-time-use variables
* Make all static classes

Change-Id: I43a85502fe8d9f2d34658312f0576f23bc0798af
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498144009,1498229803,1d6e1e19ad19b256133c6848691b07eada89a504
1d6e1e19ad19b256133c6848691b07eada89a504,1d6e1e19,Add a setting for app color theme,"Add a setting for app color theme

This adds a setting in the main preferences menu to toggle the color theme
between light and dark.

There's a wrinkle!  A SwitchPreferenceCompat is meant to deal with boolean
preference values, and the app theme is stored as an integer (0 for light
and 1 for dark).

So, I've created an abstract IntSwitchPreferenceCompat class that
translates between checked/unchecked states and a pair of integer
values, and a ThemeSwitchPreferenceCompat concrete subclass that wires
it for the dark mode value when checked and light when unchecked.

Bug: T160411
Change-Id: I38e38d9e8b99d28dc4cdb3bd7cee71764dd1e55d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497999640,1498229799,82fce7367f2f97ab3aeb068f8afcbf72bbc43a6d
0f8ea73ea4044ddd7d54d5da92a4734b5d46ffce,0f8ea73e,"Merge ""Utterly standardize button styles throughout the app.""","Merge ""Utterly standardize button styles throughout the app.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498229580,1498229580,"ba3bbb5762970413a22e11948c49aee36ae24784,ed9a6f7e8ac54e8a648b5e9c871b6a9a84ee89e5"
ba3bbb5762970413a22e11948c49aee36ae24784,ba3bbb57,"Merge ""Hygiene: remove Vector skin from CSS update script""","Merge ""Hygiene: remove Vector skin from CSS update script""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498228350,1498228350,"2a65daf0804a77f7ee8723c3d64294d76c16a86b,0da7db07df23124ac16c20cb5649fb2a04b2e97c"
2a65daf0804a77f7ee8723c3d64294d76c16a86b,2a65daf0,"Merge ""Hygiene: update CSS styles from upstream""","Merge ""Hygiene: update CSS styles from upstream""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498228250,1498228250,"d8859e101af38639b0d9523411de95b235c943cf,c48258313df31398b7ee168a71510a65ca3dbf87"
0da7db07df23124ac16c20cb5649fb2a04b2e97c,0da7db07,Hygiene: remove Vector skin from CSS update script,"Hygiene: remove Vector skin from CSS update script

Setting the skin to Vector appears to have no effect.

Change-Id: I549bd768998124305adcd8af98a0dd93a4e5984b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1498172869,1498172869,c48258313df31398b7ee168a71510a65ca3dbf87
c48258313df31398b7ee168a71510a65ca3dbf87,c4825831,Hygiene: update CSS styles from upstream,"Hygiene: update CSS styles from upstream

Change-Id: I7a92744d4a7a80ee8ce87c324f9face37663e084
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1498172613,1498172756,3b57b93da16a47e2d0b829460b4899d7d9d112d1
d8859e101af38639b0d9523411de95b235c943cf,d8859e10,Hygiene: Fix format string translation error breaking TranslationTests,"Hygiene: Fix format string translation error breaking TranslationTests

Change-Id: Id1ad600f9b08970ba7c4bf907ae7cdab67613926
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1498162109,1498162109,3b57b93da16a47e2d0b829460b4899d7d9d112d1
ed9a6f7e8ac54e8a648b5e9c871b6a9a84ee89e5,ed9a6f7e,Utterly standardize button styles throughout the app.,"Utterly standardize button styles throughout the app.

Sorry, this had to be done sooner than later. We have a whole lot of
inconsistency in all the different buttons in our layouts. Furthermore we
also use an outdated and convoluted system of selectors and shapes to
represent the backgrounds of some of the buttons.  This patch does all of
the following:

- Create a canonical App.Button style that is the base for all buttons in
  the app, which inherits from the baseline Material button.
- Create a couple more children of that style, with different colors.
- The colors of the buttons are now represented by simple color state
  resources. All of the old selectors and shapes are now gone.
- All TextViews that are used as buttons are now AppCompatTextViews, which
  is more correct for utilizing properties like app:backgroundTint.

From this time forward, if we need to put a button in a layout, it shall
be an AppCompatTextView, with a style of ""App.Button"" or one of the color
derivatives.

This will have some slight visual changes for the buttons in the Login and
CreateAccount activities, since those buttons weren't really standard, but
I believe these changes are for the better.

Change-Id: I4389dbed154fdb649f94be2ccd93ef901d77c8d4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497578392,1498141533,edb0a841475606613ea4f6c3a4cda2d34c62b4e0
3b57b93da16a47e2d0b829460b4899d7d9d112d1,3b57b93d,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Iaffe7a0efb7f706195a54dad63824f25c8d52bb6
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1498112139,1498138866,0e2d586861675561355d2fee4aac8d2ba60f8309
0b579e0754913fb17cbf2ca68384d45e7e40fd5d,0b579e07,Use AccountManager for storing user credentials.,"Use AccountManager for storing user credentials.

This transitions our code to fully utilize AccountManager to store our
user credentials. We were actually already halfway-using AccountManager;
this just takes it all the way there.
Some additional highlights:

- All account management functions are in the static AccountUtil class,
  which implicitly expects there to be at most one account for our app in
  the system. It's possible that we might want to support multiple
  simultaneous logged-in accounts in the future, but certainly not yet.
- Remove the User and UserInfoStorage classes.
- Provide a one-time migration function that makes sure to create an
  AccountManager account based on the old Prefs, and then delete the prefs
  permanently.

Note on the new behavior of this logic: The user's account will now
survive the clearing of the app data in Settings!

Bug: T165357
Change-Id: I1956657a27c7cab4c33938b42954861f5087ae5b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1497319862,1498138222,0e2d586861675561355d2fee4aac8d2ba60f8309
0e2d586861675561355d2fee4aac8d2ba60f8309,0e2d5868,"Merge ""Fix possible crash when highlighting text on API 23.""","Merge ""Fix possible crash when highlighting text on API 23.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498075981,1498075981,"82fce7367f2f97ab3aeb068f8afcbf72bbc43a6d,dff97bbbba7dccecf18ce270ee22e3c301a4a1a2"
82fce7367f2f97ab3aeb068f8afcbf72bbc43a6d,82fce736,"Merge ""Add Retry action when fetching random article fails.""","Merge ""Add Retry action when fetching random article fails.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498073013,1498073013,"fabf1b06465cc9ab0f2f77fd9c8f9307e838b963,8838e4a076378aade476e7f3acedf4ed31ac169b"
fabf1b06465cc9ab0f2f77fd9c8f9307e838b963,fabf1b06,"Merge ""Show onboarding upon fragment visibility change, instead of on creation.""","Merge ""Show onboarding upon fragment visibility change, instead of on creation.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498065164,1498065164,"dfdff1636941b40c1ef0ef59a9565f08b6cbf36f,2e4a41c1e877427a019e774fd6d4ea7fc5467fd0"
dfdff1636941b40c1ef0ef59a9565f08b6cbf36f,dfdff163,"Merge ""When saving a page, persist its thumbnail in reading list db row.""","Merge ""When saving a page, persist its thumbnail in reading list db row.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498064818,1498064818,"f991889c7daa480985eb739d62405c1b8e4042e5,176c9716722bb4fccfefe03d9e1796c66edb714b"
f991889c7daa480985eb739d62405c1b8e4042e5,f991889c,"Merge ""Update tests for new thumb url methods""","Merge ""Update tests for new thumb url methods""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498061329,1498061329,"c580e029625c195e1b164d313cadec4e288d9c2b,3230d6b664c2f3d87f83d99c2e803a2522f3c591"
c580e029625c195e1b164d313cadec4e288d9c2b,c580e029,"Merge ""Update PageLead thumb url methods and save a thumb in the sync service""","Merge ""Update PageLead thumb url methods and save a thumb in the sync service""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498061024,1498061024,"d64e76039d541aba6205b630833021e4d030b1d4,a505acc1154bed62ff1877bb69914d4e1d4dceb1"
176c9716722bb4fccfefe03d9e1796c66edb714b,176c9716,"When saving a page, persist its thumbnail in reading list db row.","When saving a page, persist its thumbnail in reading list db row.

The predecing patches correctly saved the thumbnail to local storage, but
didn't actually persist the thumbnail URL in the metadata of the reading
list row in the database.  This patch adds in the thumbnail URL and
description to the db row of the page that is being saved, so that they're
shown correctly when viewing reading lists offline.

Bug: T166409
Change-Id: I92f882c42449a7ef17188aa9e0ade16f296ef344
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498055300,1498060503,a505acc1154bed62ff1877bb69914d4e1d4dceb1
2e4a41c1e877427a019e774fd6d4ea7fc5467fd0,2e4a41c1,"Show onboarding upon fragment visibility change, instead of on creation.","Show onboarding upon fragment visibility change, instead of on creation.

Bug: T168531
Change-Id: Iab1167d4ab2b774077c8420db6aa3a4ae469b5da
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498055498,1498055498,edb0a841475606613ea4f6c3a4cda2d34c62b4e0
d64e76039d541aba6205b630833021e4d030b1d4,d64e7603,"Merge ""Clean up EventLoggingService as a singleton.""","Merge ""Clean up EventLoggingService as a singleton.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498055132,1498055132,"765de501153d6cb3ed8c38fdd815744e522121bb,5d4c70377a1b9e7668d8adbe6df8afa475740470"
765de501153d6cb3ed8c38fdd815744e522121bb,765de501,"Merge ""Centralizing  eventLogging http requests into EventLoggingService""","Merge ""Centralizing  eventLogging http requests into EventLoggingService""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498053395,1498053395,"73c7e95ad01fed13fcc2f650027f3f08aec8eee0,861244d965c669dc192354aed657ea550bf75331"
5d4c70377a1b9e7668d8adbe6df8afa475740470,5d4c7037,Clean up EventLoggingService as a singleton.,"Clean up EventLoggingService as a singleton.

Change-Id: I41fa2499b60bf3bc45e3f0acb29f12b44291ff44
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498053202,1498053373,861244d965c669dc192354aed657ea550bf75331
8838e4a076378aade476e7f3acedf4ed31ac169b,8838e4a0,Add Retry action when fetching random article fails.,"Add Retry action when fetching random article fails.

Bug: T157377
Change-Id: I798db43355d0d46e892f1777119e6ad5458898b4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1498051866,1498051866,edb0a841475606613ea4f6c3a4cda2d34c62b4e0
73c7e95ad01fed13fcc2f650027f3f08aec8eee0,73c7e95a,"Merge ""Update DescriptionEditTutorialPageView reference screenshots""","Merge ""Update DescriptionEditTutorialPageView reference screenshots""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1498048643,1498048643,"880016e87c786c7998615b532d4f0d5deaf0982e,4ed30afbdd1d11a2c95970c2b77edbcd20b5b489"
4ed30afbdd1d11a2c95970c2b77edbcd20b5b489,4ed30afb,Update DescriptionEditTutorialPageView reference screenshots,"Update DescriptionEditTutorialPageView reference screenshots

Needed after Ic2f4e45

Change-Id: Iac73926386315b25ccfa370239c31bfb84704e6e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497985813,1497985813,acb6f6f308a7944fc5c095dba3b7652f20e1616f
880016e87c786c7998615b532d4f0d5deaf0982e,880016e8,"Merge ""Update WikiErrorView colors when in the gallery""","Merge ""Update WikiErrorView colors when in the gallery""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497984447,1497984447,"acb6f6f308a7944fc5c095dba3b7652f20e1616f,c435732680d9df21d77d45b6aa7fff96366686e5"
acb6f6f308a7944fc5c095dba3b7652f20e1616f,acb6f6f3,"Merge ""Update okhttp to 3.8.1""","Merge ""Update okhttp to 3.8.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497975922,1497975922,"abae7fcdde8e2c956cce415d803c1eaccfc24206,b7a2c9e7e28a7cb673280c55ce25ac96f427e3d3"
b7a2c9e7e28a7cb673280c55ce25ac96f427e3d3,b7a2c9e7,Update okhttp to 3.8.1,"Update okhttp to 3.8.1

This reportedly contains a fix for the HTTP2 connection coalescing issue
that was causing crashes.

No change to Cache(Delegate)Interceptor.

https://github.com/square/okhttp/blob/master/CHANGELOG.md#version-381

Bug: T167891
Change-Id: I1fa95aa57a735ffb2655e95fbf66855fcca74ec1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497971732,1497971839,edb0a841475606613ea4f6c3a4cda2d34c62b4e0
dff97bbbba7dccecf18ce270ee22e3c301a4a1a2,dff97bbb,Fix possible crash when highlighting text on API 23.,"Fix possible crash when highlighting text on API 23.

https://rink.hockeyapp.net/manage/apps/226649/app_versions/204/crash_reasons/173095781

This occurs only on Android 6.0 (API 23):
To reproduce:
Find any TextView that has text selection enabled, and that has a
LinkMovementMethod associated with it. Then long-press to select some text
inside it, and then click away from the selection (on another part of the
same TextView). It crashes with an IllegalArgumentException.

This workaround patches the internals of the TextView itself. We already
have a ""custom"" patched TextView component, which is AppTextView, so we
can apply the fix there, and just switch all instances of TextViews that
have selection enabled to become AppTextViews.

Change-Id: If2f24c4cd3a799c5ecd2e32d29372ba9b2c1fd83
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497969850,1497969850,edb0a841475606613ea4f6c3a4cda2d34c62b4e0
c435732680d9df21d77d45b6aa7fff96366686e5,c4357326,Update WikiErrorView colors when in the gallery,"Update WikiErrorView colors when in the gallery

Gave it a black background to match the gallery context and brightened
up the icon and text.

Bug: T167460
Change-Id: I88f91ee78eff4cee0d590118cfadfee69f8a6e67
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497969011,1497969011,edb0a841475606613ea4f6c3a4cda2d34c62b4e0
abae7fcdde8e2c956cce415d803c1eaccfc24206,abae7fcd,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I3a7c583d570f29557523e2bce98af220d4321e33
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1497875520,1497875520,edb0a841475606613ea4f6c3a4cda2d34c62b4e0
3230d6b664c2f3d87f83d99c2e803a2522f3c591,3230d6b6,Update tests for new thumb url methods,"Update tests for new thumb url methods

Hygiene: moved some tests from the obsolete org.wikipedia.server package
to org.wikipedia.dataclient.  Moved page-specific stuff to dataclient's
page sub-package.

Added testing for the new stuff.

Bug: T166409
Change-Id: I217e233386549cc11cd776ba3d48ef0735f0cf32
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497656106,1497665241,a505acc1154bed62ff1877bb69914d4e1d4dceb1
a505acc1154bed62ff1877bb69914d4e1d4dceb1,a505acc1,Update PageLead thumb url methods and save a thumb in the sync service,"Update PageLead thumb url methods and save a thumb in the sync service

Bug: T166409
Change-Id: Id58d37760cb2ccfe5b24e0feba11b6fb547d8417
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497655984,1497665042,46dd74fdc3bf42bcbdb28282a02f579f078535c1
edb0a841475606613ea4f6c3a4cda2d34c62b4e0,edb0a841,"Merge ""Update session logging to include pages viewed with no WD description""","Merge ""Update session logging to include pages viewed with no WD description""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497637082,1497637082,"a2642e706b8e25e9b5e8b16f473c223f1fecef18,89518da571b75002efa84fd9fd280799c4e26403"
a2642e706b8e25e9b5e8b16f473c223f1fecef18,a2642e70,"Merge ""Delete remote reading list data when user disables syncing""","Merge ""Delete remote reading list data when user disables syncing""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497634856,1497634856,"9972250dafa76a552b563566126a3be5df9b1978,144333633bcfb74c8cb2a6c3e5924d8b63e0cbdb"
9972250dafa76a552b563566126a3be5df9b1978,9972250d,"Merge ""Don't occlude the gallery toolbar with the error view""","Merge ""Don't occlude the gallery toolbar with the error view""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497633869,1497633869,"7ed02dccd33d2d4f945b5273257d93e106adcee1,6b04158ee9a1eabc62f98e9b7b8913d8239e835f"
6b04158ee9a1eabc62f98e9b7b8913d8239e835f,6b04158e,Don't occlude the gallery toolbar with the error view,"Don't occlude the gallery toolbar with the error view

Bug: T167460
Change-Id: I4da36da4ddae252ba8315c7cad74cbeccc5a5384
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497630844,1497630844,46dd74fdc3bf42bcbdb28282a02f579f078535c1
7ed02dccd33d2d4f945b5273257d93e106adcee1,7ed02dcc,Reduce the size of description edit tutorial drawables.,"Reduce the size of description edit tutorial drawables.

This is a savings of nearly 500 KB.
It takes the xhdpi variants of the images and places them in the
nonspecific ""drawable"" directory. On the highest-resolution displays, the
loss in resolution is barely noticeable. The PNGs are also crush'd.

Change-Id: Ic2f4e4588b9651a370565adbbcf2594954d74561
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497627952,1497629231,46dd74fdc3bf42bcbdb28282a02f579f078535c1
89518da571b75002efa84fd9fd280799c4e26403,89518da5,Update session logging to include pages viewed with no WD description,"Update session logging to include pages viewed with no WD description

Bug: T157758
Change-Id: I1f7fc6e8ee29873d3ea09a66a9d4b4f2ae40f6fa
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497620631,1497620631,46dd74fdc3bf42bcbdb28282a02f579f078535c1
144333633bcfb74c8cb2a6c3e5924d8b63e0cbdb,14433363,Delete remote reading list data when user disables syncing,"Delete remote reading list data when user disables syncing

Bug: T167311
Change-Id: Ia57c829669512d0324533226c3fae56888292ac5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497304850,1497562013,46dd74fdc3bf42bcbdb28282a02f579f078535c1
46dd74fdc3bf42bcbdb28282a02f579f078535c1,46dd74fd,"Merge ""Show an onboarding card to encourage logging in for syncing reading lists.""","Merge ""Show an onboarding card to encourage logging in for syncing reading lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497561367,1497561367,"69194fd03af37af39482d917e38901be3c279e12,8ab5176c586b3a06d4a3ddb16b4cf608d94b7320"
69194fd03af37af39482d917e38901be3c279e12,69194fd0,Update bundled CSS,"Update bundled CSS

Change-Id: I02fa1b73bdc927eb955240d9a02719765bf410d0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497560093,1497560108,75b0def4aa620d49200454c69e8e5512fda103b0
861244d965c669dc192354aed657ea550bf75331,861244d9,Centralizing  eventLogging http requests into EventLoggingService,"Centralizing  eventLogging http requests into EventLoggingService

Related to
Bug: T164801

Change-Id: I50fff35a8dd51ee4beadd205dab6c71ca88e28d1
",,,,Andy Mroczkowski,amroczkowski@wikimedia.org,Andy Mroczkowski,amroczkowski@wikimedia.org,1497458349,1497558400,84714e044c79e77f3cb2f883622bc5e07dc70171
8ab5176c586b3a06d4a3ddb16b4cf608d94b7320,8ab5176c,Show an onboarding card to encourage logging in for syncing reading lists.,"Show an onboarding card to encourage logging in for syncing reading lists.

Bug: T162619
Change-Id: Iab9ab44f03da27c608401210be6fffa2499f6792
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1497385761,1497551371,75b0def4aa620d49200454c69e8e5512fda103b0
75b0def4aa620d49200454c69e8e5512fda103b0,75b0def4,"Merge ""Show an onboarding reminder for synchronizing reading lists.""","Merge ""Show an onboarding reminder for synchronizing reading lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497547817,1497547817,"7bb3af4627d2aa7600173d3983a8da7996d65d6d,c2ad207c56102364094614aeb0bd08e1ad35f3b4"
7bb3af4627d2aa7600173d3983a8da7996d65d6d,7bb3af46,"Merge ""Introduce a general-purpose onboarding view.""","Merge ""Introduce a general-purpose onboarding view.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497546926,1497546926,"a7167603a05f3e72c932666f7ed5e7334b99f218,496d43bcea03f36e27fb1af00800ed3ba41b222f"
a7167603a05f3e72c932666f7ed5e7334b99f218,a7167603,"Merge ""Re-add mw-vagrant prefix to make-css-assets.bash""","Merge ""Re-add mw-vagrant prefix to make-css-assets.bash""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497540394,1497540394,"f2af4c4b2df84982829523f7d4284f3ea257169e,dd7586745286515f664b1f693e6c5e1319866fda"
f2af4c4b2df84982829523f7d4284f3ea257169e,f2af4c4b,"Merge ""Add title prefix search tests""","Merge ""Add title prefix search tests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497539676,1497539676,"44ec40a9075d220bda5e7791a9032b8c5cf5eeee,9be70854c2958875cbfe63d4e8ae9b5349f4db90"
44ec40a9075d220bda5e7791a9032b8c5cf5eeee,44ec40a9,"Merge ""Retrofit TitleSearchTask""","Merge ""Retrofit TitleSearchTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497539415,1497539415,"b86bff51d65eb1657160d7cd247c8c3d26f78e1e,2e2964d0f9199eb5db5cb596e015cbca76e80ddd"
b86bff51d65eb1657160d7cd247c8c3d26f78e1e,b86bff51,"Merge ""Consolidate possible MW API query result components in MwQueryResult""","Merge ""Consolidate possible MW API query result components in MwQueryResult""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497539143,1497539143,"d0d14828a9b781a10edbdd8331bcc7aa2d022d9b,9674dfb3ea35eceec7fe43385c0b553e8e372e4c"
dd7586745286515f664b1f693e6c5e1319866fda,dd758674,Re-add mw-vagrant prefix to make-css-assets.bash,"Re-add mw-vagrant prefix to make-css-assets.bash

This is handy to have for development but was removed at some point.

Change-Id: I389c1403e5fde32d11fa1d75be51efb301107695
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497535980,1497535980,d6973bc504d92d93df1d8914fb46061fa1c6c024
d0d14828a9b781a10edbdd8331bcc7aa2d022d9b,d0d14828,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: If63731d5c82e27df86e69b085a3f787b3ffb7ab2
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1497507151,1497507151,d6973bc504d92d93df1d8914fb46061fa1c6c024
d6973bc504d92d93df1d8914fb46061fa1c6c024,d6973bc5,Fix jittery BottomSheet behavior with new Support library.,"Fix jittery BottomSheet behavior with new Support library.

In our customized BottomSheet, we attempt to give it a maximum width,
which is fine, but for the height parameter we were specifying
wrap_content, which apparently causes a jittery behavior in the newest
Support library. Setting it to match_parent solves this issue.

Additionally, the ""overlay"" button used in the link preview dialog should
no longer latch on to the R.id.content view, but rather R.id.container,
which seems to be another new thing introduced in the latest library.

Change-Id: I4bd0603487a48b304c00200552d3300124a369c7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497469890,1497469890,9ef53af500a0873d9e81e346d3d124b360de5082
9ef53af500a0873d9e81e346d3d124b360de5082,9ef53af5,Hygiene: Add some NonNull annotations where necessary.,"Hygiene: Add some NonNull annotations where necessary.

This may help us chase down NPEs in the future.

Change-Id: I7eed25f07be707ba698aaafd08ea304f017ba66d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497451952,1497452471,84714e044c79e77f3cb2f883622bc5e07dc70171
c2ad207c56102364094614aeb0bd08e1ad35f3b4,c2ad207c,Show an onboarding reminder for synchronizing reading lists.,"Show an onboarding reminder for synchronizing reading lists.

This is shown when the user is logged in, but has reading list syncing
turned off. The user can either dismiss the reminder, or click the ""Turn
on"" action that goes to the Settings activity.

Bug: T166394
Change-Id: If4398ac46183ac0379ca90e7b13f88a6ad1cf38a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497383905,1497390008,496d43bcea03f36e27fb1af00800ed3ba41b222f
496d43bcea03f36e27fb1af00800ed3ba41b222f,496d43bc,Introduce a general-purpose onboarding view.,"Introduce a general-purpose onboarding view.

This introduces a view that can be slipped into various portions of our UX
where any kind of onboarding or one-time acknowledgment is desired.

It allows for a Title, Text, and a Positive and Negative action button,
with some customizability of each of these elements.

Change-Id: I9ff6ede76fe2b8fd0baf192dc9d04aae098f76b9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497379669,1497389914,84714e044c79e77f3cb2f883622bc5e07dc70171
84714e044c79e77f3cb2f883622bc5e07dc70171,84714e04,"Merge ""Show reading list sync preference only in pre-beta builds.""","Merge ""Show reading list sync preference only in pre-beta builds.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497369988,1497369988,"f6f4dff13c94031289fbe1abd4ef4a7b8e923c67,1cee488bfecb489f95f01dc1fd5fe95a60eaf307"
f6f4dff13c94031289fbe1abd4ef4a7b8e923c67,f6f4dff1,"Merge ""Update Retrofit to 2.3.0""","Merge ""Update Retrofit to 2.3.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497369464,1497369464,"bc2e4c4f278e550fe160619d5bc989b0938df84b,0256ad275e91bfc29ad7ec1b53307e4889aad648"
bc2e4c4f278e550fe160619d5bc989b0938df84b,bc2e4c4f,"Merge ""Drop dependency on saripaar, and improve verification logic.""","Merge ""Drop dependency on saripaar, and improve verification logic.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497368960,1497368960,"c5579efdd00fa0967252286f42c11d57bad8356a,1c22e983622b11e4a7c9d8261b5a70cc90cc1669"
1cee488bfecb489f95f01dc1fd5fe95a60eaf307,1cee488b,Show reading list sync preference only in pre-beta builds.,"Show reading list sync preference only in pre-beta builds.

Let's not forget to feature-flag everything having to do with reading list
syncing until we're ready to take it to beta/production.

Change-Id: I85b2e2dcd50c186898d5d4fcb62bc54efa1603c6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497368456,1497368456,2a773ecaa1533a837ed644a5c487ea71ac87cc92
0256ad275e91bfc29ad7ec1b53307e4889aad648,0256ad27,Update Retrofit to 2.3.0,"Update Retrofit to 2.3.0

Possibly of note:

* New: String converters that return null for an @Query or @Field parameter
  are now skipped.

Also includes a bunch of improvements around RxJava support, which might
become interesting to us at some point.

https://github.com/square/retrofit/blob/master/CHANGELOG.md

Change-Id: I07b9af6f451de8b4b3c2008c39f5bf8a2e198eab
",,,,Michael Holloway,mholloway@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1497046474,1497367948,2a773ecaa1533a837ed644a5c487ea71ac87cc92
c5579efdd00fa0967252286f42c11d57bad8356a,c5579efd,Update Android Gradle plugin to 2.3.3,"Update Android Gradle plugin to 2.3.3

No release notes (yet?)

https://developer.android.com/studio/releases/gradle-plugin.html

Change-Id: I9954b02c47e7845cb73608ce9e5c120c91161b03
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497367358,1497367358,2a773ecaa1533a837ed644a5c487ea71ac87cc92
1c22e983622b11e4a7c9d8261b5a70cc90cc1669,1c22e983,"Drop dependency on saripaar, and improve verification logic.","Drop dependency on saripaar, and improve verification logic.

This takes care of a few issues:

- Removes the saripaar library. The annotations were a nice touch, but
  it's a bit too much overhead for our purposes.
- Errors are now shown as Material-compliant messages in the actual
  TextInputLayout, instead of using the old EditText.setError().
- Changes the email verification to use the built-in Android pattern,
  which is a pretty big simplification.
- The string ""Invalid password"" was never localized, since it was
  hardcoded into the Saripaar library. It is now broken out as a string
  resource.

Bug: T121281

Change-Id: I170584d507221a97af69d777bd3895bad7eb3398
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496951412,1497366249,c225c003dbab3b89428436a8e7f9307823000f6e
2a773ecaa1533a837ed644a5c487ea71ac87cc92,2a773eca,Update Android Support Library to 25.4.0,"Update Android Support Library to 25.4.0

Notable changes:

* executePendingTransactions(), commitNow(), popBackStackImmediate(), and
  similar transaction calls are not allowed during FragmentManager state
  changes. Reentrant execution of transactions are unsafe and Fragment-
  Manager now enforces this during its state changes.

* Concurrent with this support library release, we are also releasing
  multidex version 1.0.2.

https://developer.android.com/topic/libraries/support-library/revisions.html#25-4-0

Note: added pointer to Google's new maven repo in the project bulid.gradle
in order to complete the download.

https://developer.android.com/topic/libraries/support-library/setup.html#add-library

Change-Id: Ic0143f47c663bee180919d245dc5484fb033c806
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497363961,1497363961,0d5dd826d0584c863ea430f25c2f62b5d77306ba
0d5dd826d0584c863ea430f25c2f62b5d77306ba,0d5dd826,"Merge ""Update okhttp to 3.8.0""","Merge ""Update okhttp to 3.8.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497308248,1497308248,"a4e2e1042ef888f9c9a9020bb7c152b48a787e49,eb0a3c1818d173da98c92b9a6ccabf7f719e2b3b"
eb0a3c1818d173da98c92b9a6ccabf7f719e2b3b,eb0a3c18,Update okhttp to 3.8.0,"Update okhttp to 3.8.0

N.B. Involves a change to a modified bit of CacheDelegateInterceptor!
Please review carefully and test well!  Here's the relevant okhttp commit:

Invalidate the cache even if the response has no body.
https://github.com/square/okhttp/commit/c9496d350c0c3bb4b9d9571c3ab97181726561e2

Also of note:

Version 3.8.0

New: The response message is now non-null. This is the ""Not Found"" in the
status line ""HTTP 404 Not Found"". If you are building responses programma-
tically (with new Response.Builder()) you must now always supply a
message. An empty string """" is permitted. This value was never null on
responses returned by OkHttp itself, and it was an old mistake to permit
application code to omit a message.

Version 3.7.0

New: Connection coalescing. OkHttp may reuse HTTP/2 connections across
calls that share an IP address and HTTPS certificate, even if their domain
names are different.

New: MockWebServer's RecordedRequest exposes the requested HttpUrl with
getRequestUrl().

https://github.com/square/okhttp/blob/master/CHANGELOG.md

Change-Id: Ie2cc3bf806b7a6c45bc31a068fa4c64cecad51de
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497042124,1497307371,5ed559f1e05e6e3379a427c49d52578a06b454d7
a4e2e1042ef888f9c9a9020bb7c152b48a787e49,a4e2e104,Add settings option to allow syncing reading lists,"Add settings option to allow syncing reading lists

Bug: T167182
Change-Id: I4e43cf0b7a32707e2e7e04a532be26dc4a35d705
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497282785,1497296283,4efc7ae8ca528b0f7852f94029c1be2e85a8d271
4efc7ae8ca528b0f7852f94029c1be2e85a8d271,4efc7ae8,Bump COPYING copyright period end year to 2017 :),"Bump COPYING copyright period end year to 2017 :)

Change-Id: Ifc3fcb0b7f0018d628fd64d7b8e19817bce971bf
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497284267,1497284267,58fe40b7a714fc99c2eeb04a093043d2b14f6d7f
58fe40b7a714fc99c2eeb04a093043d2b14f6d7f,58fe40b7,"Merge ""Add CODE_OF_CONDUCT.md""","Merge ""Add CODE_OF_CONDUCT.md""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497279609,1497279609,"2b68b087f6d83143cdafaf04005d1bbe5745cce0,dcb75ffe39e35a7113deacd58b674457e75a8868"
2b68b087f6d83143cdafaf04005d1bbe5745cce0,2b68b087,Update Fresco to 1.3.0,"Update Fresco to 1.3.0

v1.2.0 and v1.3.0 are described as ""mainly bugfix release[s].""  No
updates to copied samples.

https://github.com/facebook/fresco/releases

Change-Id: I1eec747a10fe7d52358c72c8f62f7289c61e7dfa
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497043965,1497047185,c225c003dbab3b89428436a8e7f9307823000f6e
dcb75ffe39e35a7113deacd58b674457e75a8868,dcb75ffe,Add CODE_OF_CONDUCT.md,"Add CODE_OF_CONDUCT.md

Change-Id: I350c6a0ffa74879f23b397ff949627b6705b4d1a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1497044003,1497044003,c225c003dbab3b89428436a8e7f9307823000f6e
c225c003dbab3b89428436a8e7f9307823000f6e,c225c003,"Merge ""Update gson to 2.8.1""","Merge ""Update gson to 2.8.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497037928,1497037928,"27db387da7341eb0eb06ae4b4fab37dca621b278,6fd3a711601ac8b83eb7543595e5681687e47abd"
27db387da7341eb0eb06ae4b4fab37dca621b278,27db387d,"Merge ""Update Android SDK Build Tools to 25.0.3""","Merge ""Update Android SDK Build Tools to 25.0.3""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497037900,1497037900,"5ed559f1e05e6e3379a427c49d52578a06b454d7,fc315ff41a94aa954421ca0e085e488dc99c6017"
5ed559f1e05e6e3379a427c49d52578a06b454d7,5ed559f1,Bump versionCode,"Bump versionCode

Change-Id: Ie96db076ec511bad83a6bbeb1d053f7436e2cf7b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497025724,1497025724,11e461b3afc32e2123b1533240a376fcf26ef36f
11e461b3afc32e2123b1533240a376fcf26ef36f,11e461b3,"Merge ""Fix: Further improve logic in SavedPageSyncService.""","Merge ""Fix: Further improve logic in SavedPageSyncService.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497025692,1497025692,"040a114b612baf8ba122c1d87314e4ac5308306f,7d8858cf0896743280cdd17f643b450d7eaa042a"
7d8858cf0896743280cdd17f643b450d7eaa042a,7d8858cf,Fix: Further improve logic in SavedPageSyncService.,"Fix: Further improve logic in SavedPageSyncService.

This introduces an inner exception handler for downloading all the images
in an article. If an error occurs when downloading a single image, we can
now decide whether to proceed further (in the case of ""unrecoverable""
errors such as 404), or give up on downloading the whole page.

Change-Id: I012bcb0b69275a95463483b3deb90b05cc615e3c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497020405,1497024753,36a68f9ce806b14ce52bbc445449a285f82754ad
040a114b612baf8ba122c1d87314e4ac5308306f,040a114b,"Merge ""Add scroolbar to RecyclerView in History and ReadingLists.""","Merge ""Add scroolbar to RecyclerView in History and ReadingLists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497023743,1497023743,"fa1cd664edb881b2e7e02830a43a8edbfb603c79,e9b036bd76b2d5921712aa66632fe5bde2d39d52"
fa1cd664edb881b2e7e02830a43a8edbfb603c79,fa1cd664,"Merge ""Fix possible crash when displaying nearby pages.""","Merge ""Fix possible crash when displaying nearby pages.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497023139,1497023139,"b2b86084c523416e09520c2b77f95b8dd251772a,0f7f9b45a24c53509d4e3fba715baa9f2154c643"
0f7f9b45a24c53509d4e3fba715baa9f2154c643,0f7f9b45,Fix possible crash when displaying nearby pages.,"Fix possible crash when displaying nearby pages.

https://rink.hockeyapp.net/manage/apps/226650/app_versions/103/crash_reasons/172535415

Change-Id: I0258f8b27d060ec408c7a38f5d2fee2f4f4f5e9d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1497022331,1497022331,36a68f9ce806b14ce52bbc445449a285f82754ad
9be70854c2958875cbfe63d4e8ae9b5349f4db90,9be70854,Add title prefix search tests,"Add title prefix search tests

Bug: T152401
Change-Id: I0457fd87ff12291d560e4b3af472b5a663940cbe
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496942568,1497017752,2e2964d0f9199eb5db5cb596e015cbca76e80ddd
2e2964d0f9199eb5db5cb596e015cbca76e80ddd,2e2964d0,Retrofit TitleSearchTask,"Retrofit TitleSearchTask

Tests to follow shortly.

Bug: T152401
Change-Id: I98438c20384b81fe3eee83005f5459597f3e2603
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496942530,1497017752,9674dfb3ea35eceec7fe43385c0b553e8e372e4c
9674dfb3ea35eceec7fe43385c0b553e8e372e4c,9674dfb3,Consolidate possible MW API query result components in MwQueryResult,"Consolidate possible MW API query result components in MwQueryResult

Removes the type variable from MwQueryResponse and creates a new MwQuery-
Result class where all of the possible components that we use reside.

This removes the need to specify unwieldy type parameters in every data
client and consumer.

More importantly, it provides for query responses containing multiple
result types, such as are used in TitleSearchTask.

Change-Id: I8845f8e6342b3af0fc59ed5c83c0619da48641e0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496870097,1497017683,b2b86084c523416e09520c2b77f95b8dd251772a
b2b86084c523416e09520c2b77f95b8dd251772a,b2b86084,"Merge ""Update API calls for new default pilimit""","Merge ""Update API calls for new default pilimit""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1497017226,1497017226,"36a68f9ce806b14ce52bbc445449a285f82754ad,6ebd42da3980c3cea26e361972a15cc87a50dbf1"
e9b036bd76b2d5921712aa66632fe5bde2d39d52,e9b036bd,Add scroolbar to RecyclerView in History and ReadingLists.,"Add scroolbar to RecyclerView in History and ReadingLists.

Change-Id: I55bd2c3f94b7ede336e6651aa9e6cef44bd23f65
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496968263,1496968263,36a68f9ce806b14ce52bbc445449a285f82754ad
6ebd42da3980c3cea26e361972a15cc87a50dbf1,6ebd42da,Update API calls for new default pilimit,"Update API calls for new default pilimit

pilimit will no longer be necessary as a result of T153709. PageImages will default to returning an image for up to PARAM_MAX (=50, or 500 for bots) results rather than 1.

Bug: T166080
Change-Id: I6c6fd0ae89c2dfb48b18931811e73beec25460ff
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1496894520,1496958545,023fba40f38e11c7e2d2e9af5955ba91430bf590
36a68f9ce806b14ce52bbc445449a285f82754ad,36a68f9c,"Merge ""Hygiene: Rename GetDescriptionsClient -> DescriptionClient""","Merge ""Hygiene: Rename GetDescriptionsClient -> DescriptionClient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496953928,1496953928,"e6a4b3ff2bd9d565367cc666e638bf4bbc23bcd9,51c3d305aadcc7d3c080a22ae66cf6496446559a"
e6a4b3ff2bd9d565367cc666e638bf4bbc23bcd9,e6a4b3ff,"Merge ""fixing Alpha update notification icon for api >= 21""","Merge ""fixing Alpha update notification icon for api >= 21""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496953318,1496953318,"1f4f026740b9ac0357d5089666f6bf63ae874b9e,117b61490cce04f0f3027e8d7d2469572cbadd6b"
6fd3a711601ac8b83eb7543595e5681687e47abd,6fd3a711,Update gson to 2.8.1,"Update gson to 2.8.1

Changes:

* New: JsonObject.keySet()

* @JsonAdapter annotation can now use JsonSerializer and JsonDeserializer
  as well.

https://github.com/google/gson/blob/master/CHANGELOG.md

Change-Id: I97cacee482fd2fa8ed6b2730c53cf9ed7c652e2f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496952814,1496952814,1f4f026740b9ac0357d5089666f6bf63ae874b9e
fc315ff41a94aa954421ca0e085e488dc99c6017,fc315ff4,Update Android SDK Build Tools to 25.0.3,"Update Android SDK Build Tools to 25.0.3

Release notes:

Updates to apksigner:

* Added --in parameter for symmetry with existing --out parameter.

* If you do not specify the key password using --key-pass, apksigner uses
  the keystore password as key password. However, if the key requires a
  different password, you are now prompted to enter the key password from
  the command line. (Issue #37134986)

* Added compatibility with jarsigner for non-ASCII passwords.
  (Issue #37135737)

https://developer.android.com/studio/releases/build-tools.html

Change-Id: Iaf459724492c85b2b8146cde5680e7a178f6212c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496952340,1496952340,1f4f026740b9ac0357d5089666f6bf63ae874b9e
51c3d305aadcc7d3c080a22ae66cf6496446559a,51c3d305,Hygiene: Rename GetDescriptionsClient -> DescriptionClient,"Hygiene: Rename GetDescriptionsClient -> DescriptionClient

no functional changes intended

Change-Id: I4f1f218e5b695c1ee7ce046682f63ca42738bb01
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496862945,1496935702,d8dec5f00d763131a874df0fe88b10e0fad12f12
1f4f026740b9ac0357d5089666f6bf63ae874b9e,1f4f0267,Bump versionCode,"Bump versionCode

Change-Id: I9cce76e3fae3cb2862f1d9900498c38b9bf63068
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496935353,1496935353,d8dec5f00d763131a874df0fe88b10e0fad12f12
d8dec5f00d763131a874df0fe88b10e0fad12f12,d8dec5f0,"Merge ""Fix: Update search results cache with full text search results""","Merge ""Fix: Update search results cache with full text search results""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496935225,1496935225,"c72770d988c04b8e3aa803589925417086625b89,8c78c93832468701571cd0c3c016b17c3eaa20ef"
c72770d988c04b8e3aa803589925417086625b89,c72770d9,"Merge ""Fix possible crash when saving page with malformed image URL(s).""","Merge ""Fix possible crash when saving page with malformed image URL(s).""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496934320,1496934320,"9b51c31478f34407d741d8bbc51950fc6631ad3c,905fc71d92ab4827288c37a0315c90fbad86c5c1"
9b51c31478f34407d741d8bbc51950fc6631ad3c,9b51c314,"Merge ""Fix possible crash when viewing reading lists.""","Merge ""Fix possible crash when viewing reading lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496934266,1496934267,"64892c99ea31bc0b325009b4e94f2dfc0fd61a04,27e6997a32145b96a425a259989269c3dfaae44a"
64892c99ea31bc0b325009b4e94f2dfc0fd61a04,64892c99,"Merge ""Fix possible crash when initializing reading list synchronizer.""","Merge ""Fix possible crash when initializing reading list synchronizer.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496933977,1496933977,"667b86d7445b342685bc7fbcdfa97baf65f42116,88af33f351a4f485546b4710b75c98729d0b372c"
667b86d7445b342685bc7fbcdfa97baf65f42116,667b86d7,"Merge ""Fix saving of pages with images from Graph extension.""","Merge ""Fix saving of pages with images from Graph extension.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496933940,1496933940,"d7a584ff3d152d0dde9d1abf97f506bbc108da5a,d50053aa6e7dd1bfa912298f865f755ae9ad6146"
27e6997a32145b96a425a259989269c3dfaae44a,27e6997a,Fix possible crash when viewing reading lists.,"Fix possible crash when viewing reading lists.

When setting the Toolbar title in the reading list screen, a window was
open for a NPE to slip through.

Change-Id: I4719b6b425dc597b1e5f37044c481da7eaa4297d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496932693,1496932693,88af33f351a4f485546b4710b75c98729d0b372c
88af33f351a4f485546b4710b75c98729d0b372c,88af33f3,Fix possible crash when initializing reading list synchronizer.,"Fix possible crash when initializing reading list synchronizer.

The synchronizer contains an instance of Handler, which should be
initialized with the Looper of the main UI thread.  If it happens to be
initialized from a background thread (with an uninitialized Looper), it
will crash.

Change-Id: Ifbd07803f845bc0b5467caa808d25fc50b8e2386
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496932211,1496932211,0b532ae877326faa34033b6a394582944c8ef808
d50053aa6e7dd1bfa912298f865f755ae9ad6146,d50053aa,Fix saving of pages with images from Graph extension.,"Fix saving of pages with images from Graph extension.

These images have a relative URL that points directly to the REST Api, and
we weren't resolving the URL properly.

Change-Id: Idc7842131941b708cb34494f3be488df6b247665
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496931588,1496931588,0b532ae877326faa34033b6a394582944c8ef808
8c78c93832468701571cd0c3c016b17c3eaa20ef,8c78c938,Fix: Update search results cache with full text search results,"Fix: Update search results cache with full text search results

The code for processing full text search results has long contained a
code snippet that was intended to update the cached search results from
the preceding title prefix search with the new full text search results.
What was actually happening is that a List<SearchResult> object was created
and the new results were appended to it, and then nothing was done with
it.

This adds a line to re-cache the updated results.

Change-Id: I86b71b707204ad60efc7f931ae74c64b69b9396f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496930216,1496930485,023fba40f38e11c7e2d2e9af5955ba91430bf590
d7a584ff3d152d0dde9d1abf97f506bbc108da5a,d7a584ff,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I0961461a0aa07277715f70cc15f32840e12b975e
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1496901868,1496901868,023fba40f38e11c7e2d2e9af5955ba91430bf590
117b61490cce04f0f3027e8d7d2469572cbadd6b,117b6149,fixing Alpha update notification icon for api >= 21,"fixing Alpha update notification icon for api >= 21

Bug: T159722

Change-Id: I3a9adec63a0f2c5b47f14107b252ee244308d51c
",,,,yash,yash.girdhar@gmail.com,yash,yash.girdhar@gmail.com,1496765450,1496893475,03fc8984d1cbaa76637f5260728df79cb90d254e
023fba40f38e11c7e2d2e9af5955ba91430bf590,023fba40,Fix possible crash when downloading image from gallery.,"Fix possible crash when downloading image from gallery.

It's possible that the Gallery loads a media item with an invalid URL, in
which case we should disable the menu options for downloading or sharing
it.

https://rink.hockeyapp.net/manage/apps/226650/app_versions/102/crash_reasons/172380347

Change-Id: I8d5123c3b6137316939db55ed2f9aab77ff0560f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496879288,1496879288,0b532ae877326faa34033b6a394582944c8ef808
905fc71d92ab4827288c37a0315c90fbad86c5c1,905fc71d,Fix possible crash when saving page with malformed image URL(s).,"Fix possible crash when saving page with malformed image URL(s).

The outer exception handler for saving a page was only expecting
IOException, when in fact the network call may throw additional exceptions
like IllegalArgumentException if the URL is malformed.

https://rink.hockeyapp.net/manage/apps/226650/app_versions/102/crash_reasons/172373534

This also tweaks the logic of the page saving loop, whereby an exception
caused by a single page *continues* the loop instead of breaking out of
it, preventing conditions such as malformed URLs from blocking the
download of the remaining queue of pages.

Change-Id: I10c46411ea0e26b67d2f78aed0b96eb95961c748
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496872140,1496878875,0b532ae877326faa34033b6a394582944c8ef808
0b532ae877326faa34033b6a394582944c8ef808,0b532ae8,Bump versionCode and minor version number.,"Bump versionCode and minor version number.

Change-Id: I1d57826206b959a02710267ed08a134d700985e3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496853998,1496854610,8fe4fcb76146fb15187453eb2e2791808fa78ec2
3371da4af419eebde6c1eb81c38eb99d850b5d58,3371da4a,Make frwiki main page take up the full screen,"Make frwiki main page take up the full screen

Adds a @media query from frwiki's Common.css that prevents content from
being split into right and left panes when the screen width is <= 981px.

Change-Id: I6839c14c9ceb9ea24b40887b404b2dfa41463ad8
Depends-On: I94589150c9ca3b77cc6ed62a8b825aa82ecd4c7e
Bug: T167307
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496850611,1496850910,8fe4fcb76146fb15187453eb2e2791808fa78ec2
8fe4fcb76146fb15187453eb2e2791808fa78ec2,8fe4fcb7,Fix top padding when viewing Main Page.,"Fix top padding when viewing Main Page.

Bug: T165307
Change-Id: I48a09b31c29dfb2cae2adfc722299f27e9b19a1b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496841113,1496841113,8857c36d6a4ed4c106086d3436c2e3a4afd08f8c
8857c36d6a4ed4c106086d3436c2e3a4afd08f8c,8857c36d,Include CSS styles from Timeline extension.,"Include CSS styles from Timeline extension.

This seems to be something we've missed when rounding up styles to include
in our bundle. This fixes improper horizontal scrolling in articles that
have long horizontal timeline elements.

Bug: T124961
Change-Id: Id8ace9ec1e579ad6a33e0ed4b33d2f577adc5d9a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496759483,1496759483,4d238cec39f5bfbf602d044027ad59d48e92fcef
4d238cec39f5bfbf602d044027ad59d48e92fcef,4d238cec,"Merge ""Revert ""Only request Feed content if RESTBase is enabled""""","Merge ""Revert ""Only request Feed content if RESTBase is enabled""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496755994,1496755994,"1497f046611e2ac2267e0c55538903f00d566d18,e021f4457b98ea55718fac03e6b0863dc063885c"
1497f046611e2ac2267e0c55538903f00d566d18,1497f046,Default useRestbase to true,"Default useRestbase to true

RESTBase is now a de facto requirement for the app and has been for some
time.  Change the default setting accordingly.

Bug: T166789
Bug: T166921
Bug: T166922
Change-Id: I98d68899e6e2efe849d7713c5dc5037d4e4f2b46
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496696728,1496696988,2fff9549e3b0ae2f334ea19838c24d02cb19ddbc
e021f4457b98ea55718fac03e6b0863dc063885c,e021f445,"Revert ""Only request Feed content if RESTBase is enabled""","Revert ""Only request Feed content if RESTBase is enabled""

I79e20a8a exposed a race condition in which, on a fresh install, the
feed content is likely to be requested and layout begun before the remote
config is fetched.  I79e20a8a added a check that RESTBase loading was
enabled in order for RB-based feed content to be loaded, so it is likely
that, on first launch on a fresh install, only the main page and random
cards (the only two fully local cards) will appear in the feed, since the
remote config variable permitting RESTBase loading will not yet have been
fetched.  When the device is online, the remote config will likely be
fetched by the time the user attempts a refresh, useRestbase will then be
true, and the expected feed content will appear.

When we're offline, however, the remote config fetch call will fail, and
will not be attempted for another 24 hours.  In the meantime, the user
will get no feed content because useRestbase will be false.  This
shouldn't happen.

Really, the race condition should be fixed.  I'll file that as a follow-
up task.  But, the useRestbase restriction on loading feed content seems
unnecessary in any case, so this reverts it.

This reverts commit 204810b1a3519f8c89f77e90886d8efb6669b5eb.

Bug: T166789
Bug: T166922
Change-Id: I19e1032545485b31820ca64f46e4d304f755721e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496446871,1496688327,2fff9549e3b0ae2f334ea19838c24d02cb19ddbc
2fff9549e3b0ae2f334ea19838c24d02cb19ddbc,2fff9549,"Merge ""Fix: update reading list UI on change""","Merge ""Fix: update reading list UI on change""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496681321,1496681321,"8d18fc470157edb460aedc468d066e7bbf6a3ae2,2263d308770c28568c8d78c581e011b71d208b1c"
8d18fc470157edb460aedc468d066e7bbf6a3ae2,8d18fc47,"Merge ""Fix: only tally page sizes of offline pages""","Merge ""Fix: only tally page sizes of offline pages""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496680734,1496680734,"f76e165d4a2645b099004ec84eefcb26832840ad,deb586473049e56e6fd4d6ce48c87e9c62949cda"
f76e165d4a2645b099004ec84eefcb26832840ad,f76e165d,"Merge ""Hygiene: refactor event bus thread concerns to separate class""","Merge ""Hygiene: refactor event bus thread concerns to separate class""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496679948,1496679948,"928ee404e69362888e19c5ea41aad5b8c2826dcb,23f90e63cf429734558992e2a8bd2dc4585882a9"
928ee404e69362888e19c5ea41aad5b8c2826dcb,928ee404,"Merge ""Fix request date/""age"" handling when coming from OfflineCard""","Merge ""Fix request date/""age"" handling when coming from OfflineCard""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496676299,1496676299,"75fd9b510b94508bd134146ba31edafb5158409c,397070e9430cace0a0d85c2d08b17ef6a0322515"
75fd9b510b94508bd134146ba31edafb5158409c,75fd9b51,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I1fe10fbf923170cb36eec4958145ed90bb78d42d
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1496642334,1496642334,03fc8984d1cbaa76637f5260728df79cb90d254e
397070e9430cace0a0d85c2d08b17ef6a0322515,397070e9,"Fix request date/""age"" handling when coming from OfflineCard","Fix request date/""age"" handling when coming from OfflineCard

The biggest change introduced here is that the pendingClients list is a
bit more stateful.  The current FeedClient remains at pos 0 in the
pendingClients list until it is removed when requestNextCard() is called,
so that a request can be retried when coming from offline.

This removes the need for brittle and probably fundamentally incorrect
things like resetting the age back a day when offline state is detected.

Bug: T166789
Change-Id: I83147fe5a49a77802ab8f887233ce15cd6b98d90
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496415564,1496448736,96979dcf8b79022161c8d4e22effe95bbcafec0a
2263d308770c28568c8d78c581e011b71d208b1c,2263d308,Fix: update reading list UI on change,"Fix: update reading list UI on change

- Move ReadingListSyncEvent postage from a callback in
  ReadingListSynchronizer to the end of a sync in SavedPageSyncService.
  This will cause the event to be posted whenever a page is added,
  removed, or updated at the source which appears to be in line with the
  original intent of the event.

- Register for sync events in ReadingListFragment. ReadingListsFragment
  (plural) already subscribes to these events and the choice to use bus
  events over a CursorLoader was discussed here:

    https://gerrit.wikimedia.org/r/#/c/341620/
    https://gerrit.wikimedia.org/r/#/c/338107/

Bug: T164966
Change-Id: Icd19c8ccd0219e9c688fed8b1100b0472af540d2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1496438110,1496439467,deb586473049e56e6fd4d6ce48c87e9c62949cda
deb586473049e56e6fd4d6ce48c87e9c62949cda,deb58647,Fix: only tally page sizes of offline pages,"Fix: only tally page sizes of offline pages

If a page was marked for offline and then marked online, it may have
offline disk statistics. It's a bug to show file sizes for a page that
is no longer on disk so filter out pages not marked for offline.

Bug: T164966
Change-Id: I7ab6afc89a539a60411da6ad7fa710df6f193f1a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1496437110,1496439443,23f90e63cf429734558992e2a8bd2dc4585882a9
23f90e63cf429734558992e2a8bd2dc4585882a9,23f90e63,Hygiene: refactor event bus thread concerns to separate class,"Hygiene: refactor event bus thread concerns to separate class

Change-Id: I88f2a27706ed242e1fb04251cd0096b52a3f17c3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1496436384,1496439440,03fc8984d1cbaa76637f5260728df79cb90d254e
03fc8984d1cbaa76637f5260728df79cb90d254e,03fc8984,"Merge ""[Upgrade fixes] Re-download saved pages upon most recent db upgrade.""","Merge ""[Upgrade fixes] Re-download saved pages upon most recent db upgrade.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496428917,1496428917,"635e59b8e2844ada534fc4aaea60f77414b99600,1f1e51e4a01ad2f56d1a167932633074b82a7d09"
1f1e51e4a01ad2f56d1a167932633074b82a7d09,1f1e51e4,[Upgrade fixes] Re-download saved pages upon most recent db upgrade.,"[Upgrade fixes] Re-download saved pages upon most recent db upgrade.

This is somewhat of a nuclear option, but it has the following benefits:

- It completely obliterates the old ""savedpages"" directory, which was
  wasting space for no reason, since it's no longer used by us. (The new
  cached data is stored in the ""okhttp-cache"" directory.)

- If the app is being upgraded from a previous version prior to our
  reworking of the cache, the user's reading list pages will be migrated
  correctly, but the *contents* of those pages will not. The user will
  therefore not be able to browse those pages if they go offline
  immediately after upgrading the app.  This patch will ensure that the
  reading list pages will be unconditionally requeued for downloading, so
  that they will be available.

- If the app is being upgraded from the immediately-previous version,
  which wasn't yet recording the size information of saved pages, the user
  will incorrectly see that their saved pages are taking up 0 MB.  This
  patch, by unconditionally re-downloading the pages, will ensure that
  their size gets recorded correctly.

- If there was any other kind of funk in which the user's saved pages
  ended up in a previous version, this patch will flush it all out, and
  ensure that the pages are freshly downloaded in our new format, and with
  all the newest metadata.

Change-Id: I980e65669b77f991e0495cea7b8c5eeb9aafa3a0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496344200,1496419260,96979dcf8b79022161c8d4e22effe95bbcafec0a
635e59b8e2844ada534fc4aaea60f77414b99600,635e59b8,"Merge ""Trigger saved page sync after regaining network connection""","Merge ""Trigger saved page sync after regaining network connection""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496417506,1496417506,"14e5070beff27096182effbce7998f554755b690,07f52f2aa808d24b81f4f8143f58f7c628507eb3"
14e5070beff27096182effbce7998f554755b690,14e5070b,Fix format string placeholder in strings-bn,"Fix format string placeholder in strings-bn

These are incorrect in the translated strings and are causing a failure
in the translation tests.

Change-Id: I6d6474f76a897c1349e17339def5feeb245c7234
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496349785,1496349785,96979dcf8b79022161c8d4e22effe95bbcafec0a
07f52f2aa808d24b81f4f8143f58f7c628507eb3,07f52f2a,Trigger saved page sync after regaining network connection,"Trigger saved page sync after regaining network connection

* Listen for connectivity for connectivity action broadcasts
* On connectivity change to CONNECTED state, post a NetworkConnectEvent
  to the event bus
* Subscribe to NetworkConnectEvents in BaseActivity and trigger a saved
  page sync on receive

Bug: T166383
Change-Id: I8da3a6e42fe66a2f98727601c781a7a17e960ef1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496343826,1496344095,c88f37f07575dcff0b792b8ca70017bb43e591b2
96979dcf8b79022161c8d4e22effe95bbcafec0a,96979dcf,"Merge ""Hygiene: Remove unneeded default constructor""","Merge ""Hygiene: Remove unneeded default constructor""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496332451,1496332451,"6f670ae6f41469aaca57874cb305ee793370bd65,cd8302a7b545f86d269eb2be47b20fa92afab64f"
cd8302a7b545f86d269eb2be47b20fa92afab64f,cd8302a7,Hygiene: Remove unneeded default constructor,"Hygiene: Remove unneeded default constructor

Change-Id: I7a9f05e5b1cc3c94a6851d52d72b91688b4bda90
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496331615,1496331615,c88f37f07575dcff0b792b8ca70017bb43e591b2
6f670ae6f41469aaca57874cb305ee793370bd65,6f670ae6,[Upgrade fixes] Prevent crash when upgrading from 2 versions ago.,"[Upgrade fixes] Prevent crash when upgrading from 2 versions ago.

If the app is upgraded directly to the current version from a previous
version prior to the introduction of the saved-page cache delegate, it
crashes because the SavedPageSyncService wants to immediately call Stat on
the cache directory, when the directory doesn't exist yet (before any new
network calls are made).

This patch makes sure the cache directory gets created upon instantiating
the cache delegate, so that we can call Stat on it even before any network
requests are called.

Change-Id: I1e79fa7350fcaebc58120786417648cf703ee8ba
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1496327199,1496327840,c88f37f07575dcff0b792b8ca70017bb43e591b2
c88f37f07575dcff0b792b8ca70017bb43e591b2,c88f37f0,Improve feed coordinator logic when offline.,"Improve feed coordinator logic when offline.

Bug: T166566
Bug: T166382
Change-Id: I650fc64478141649129c9d8b93f727c6b0363fda
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1496262162,1496322187,476fd62d9b41678f0ba1c0cb886a3de8a88ac0fe
476fd62d9b41678f0ba1c0cb886a3de8a88ac0fe,476fd62d,"Merge ""[Whoops] Restore search results filtering tests""","Merge ""[Whoops] Restore search results filtering tests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496322050,1496322050,"569ec1b0dbe9a89c80ec88ea4899971f5c473d35,08117d2df073778e00d8508fcadf3f4fb06909bd"
569ec1b0dbe9a89c80ec88ea4899971f5c473d35,569ec1b0,"Merge ""Update: Sort search results in the SearchResults constructor""","Merge ""Update: Sort search results in the SearchResults constructor""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496322016,1496322016,"f09e28f18c5a1d2aa856d79ded6225248cf9ec30,06923da56c036450577f412c04f9bcf4344b5870"
f09e28f18c5a1d2aa856d79ded6225248cf9ec30,f09e28f1,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I1e632e6a1997aa9ad20b50f3c5f56db66bea7f07
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1496295293,1496319985,25bdb07d7e654a53cde759244c3dbb68f795b447
08117d2df073778e00d8508fcadf3f4fb06909bd,08117d2d,[Whoops] Restore search results filtering tests,"[Whoops] Restore search results filtering tests

There were some nice unit tests for filtering behavior in SuggestionsTask-
Test that were lumped in with an AsyncTask call test and got deleted in
I4bde23e.  This restores them in a new test class.

Change-Id: I6a39211ec84b963ab43c664149f6a6a4bee5821d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496268491,1496268491,06923da56c036450577f412c04f9bcf4344b5870
06923da56c036450577f412c04f9bcf4344b5870,06923da5,Update: Sort search results in the SearchResults constructor,"Update: Sort search results in the SearchResults constructor

Search results sorting was omitted, by me (facepalm), from the recent
patch moving full text search queries to Retrofit.  It was partially
restored by Jcasariego in a downstream consumer.  This centralizes sorting
in the new SearchResults constructor, so that it doesn't have to be
duplicated either in both search clients or in all n consumers.

Also takes out the recent addition of an 'index' property to PageTitle
and restores it to being solely a concern of MwQueryPage.

Change-Id: I154e6730573782a98ba0bc2bcf6cf8291fc61eab
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496267072,1496267990,25bdb07d7e654a53cde759244c3dbb68f795b447
25bdb07d7e654a53cde759244c3dbb68f795b447,25bdb07d,Hygiene: FullSearchArticlesTask retrofit follow-up,"Hygiene: FullSearchArticlesTask retrofit follow-up

* Delete FullSearchArticlesTask[Test]
* Update a comment

Change-Id: I87e10c71278c4a16e7b6262ca7b2e75e5cbd495d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1496177325,1496262037,d0786f1c662f65c1a0cf8f288a84cda48a15b1db
d0786f1c662f65c1a0cf8f288a84cda48a15b1db,d0786f1c,"Merge ""Retrofit SuggestionsTask""","Merge ""Retrofit SuggestionsTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1496261759,1496261759,"1351f7d1ac031804313e73cb807c02040fac78d8,93170c2f735b51696b6f76dcd196cf8387094c00"
93170c2f735b51696b6f76dcd196cf8387094c00,93170c2f,Retrofit SuggestionsTask,"Retrofit SuggestionsTask

Port SuggestionsTask to Retrofit and try to stay as consistent as possible with the existing code.

Bug: T152413
Change-Id: I4bde23e10666ceec5eee105529e5646c14c299bc
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1494532452,1496260075,9f8aa22ef0b4be73ae68e4ea10b7bccfb57cc584
1351f7d1ac031804313e73cb807c02040fac78d8,1351f7d1,Update accept header for summary endpoint,"Update accept header for summary endpoint

Accept headers are case-sensitive. Summary should be upper-case.
See https://phabricator.wikimedia.org/T165017#3271909 and
http://buzzword.org.uk/2009/draft-inkster-profile-parameter-00.html.
There are others that say the profile portion should be
case-insensitive but it's better to match the client with the expected
case.

Bug: T165017
Change-Id: I0f1b5619f996e02ba682c2b9d5f005cc3ef07ca7
",,,,BearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1496254628,1496254628,d3e94d32ff1227bf13be95e95c15abc2232503f7
d3e94d32ff1227bf13be95e95c15abc2232503f7,d3e94d32,Trigger saving/unsaving of page upon toggle.,"Trigger saving/unsaving of page upon toggle.

The user interaction of toggling the saved state of a page wasn't actually
kicking off the sync service to update the page's state in the database
and on disk.

Technically the service will still be kicked off the next time the
activity is launched, but this patch makes it immediate.

Bug: T164585
Change-Id: I0bbb61e3d3ff04e8b9501c01cbeae2dfbc7d2124
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1494345122,1496237564,978a541f0e585f91828b0ece13417230b1be14d5
978a541f0e585f91828b0ece13417230b1be14d5,978a541f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id61e51279575adeaffa3dbcf8aeb5e6dbfc1a95e
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1496038200,1496236526,d59db34812ebd1b8b7df3b70e702d70cb6bec52f
d59db34812ebd1b8b7df3b70e702d70cb6bec52f,d59db348,"Merge ""Update bundled CSS""","Merge ""Update bundled CSS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495827292,1495827292,"6859f56a8bd3d40f31eb777952b0c4b999281f87,d37cc989915fe812a02d1cf9fc6b7053d19c2d70"
d37cc989915fe812a02d1cf9fc6b7053d19c2d70,d37cc989,Update bundled CSS,"Update bundled CSS

Change-Id: Ibfc26d97721aff3f4850512d5b4cbebcd6852cc2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495826387,1495826387,bdc40403e0ba1652bf5a3b5feff57f29c81f852c
6859f56a8bd3d40f31eb777952b0c4b999281f87,6859f56a,Fix screenshot tests,"Fix screenshot tests

A recent commit widened the line-height of the announcement card text
view.  This updates the reference screenshots accordingly.

Change-Id: Idd4e6195ff1c0646f82aa39362cc53eff7855b90
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495825200,1495825200,bdc40403e0ba1652bf5a3b5feff57f29c81f852c
bdc40403e0ba1652bf5a3b5feff57f29c81f852c,bdc40403,"Merge ""Show message when viewing an offline version of an article.""","Merge ""Show message when viewing an offline version of an article.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495822910,1495822910,"2c6b4d5924e9c690e1d0d6f8b31f26de5ebd2f5e,7e9b74c91ef4b94e7a9ba65948fa27462ee087a2"
2c6b4d5924e9c690e1d0d6f8b31f26de5ebd2f5e,2c6b4d59,Search empty view design tweaks,"Search empty view design tweaks

* Make background @base80
* Increase text line-height

Bug: T137116
Change-Id: I92ff9343f202a08da2ddab56a5187658d599bbb8
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1495755703,1495755703,9f8aa22ef0b4be73ae68e4ea10b7bccfb57cc584
7e9b74c91ef4b94e7a9ba65948fa27462ee087a2,7e9b74c9,Show message when viewing an offline version of an article.,"Show message when viewing an offline version of an article.

Bug: T156082
Change-Id: Ie7def613e1258e633e92a95b2a0bdcbef2853049
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1494362612,1495748197,9f8aa22ef0b4be73ae68e4ea10b7bccfb57cc584
9f8aa22ef0b4be73ae68e4ea10b7bccfb57cc584,9f8aa22e,"Merge ""Hygiene: Resolve inconsistent test""","Merge ""Hygiene: Resolve inconsistent test""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495727727,1495727727,"6b48f11ca96992cdf32470186242fdb1201cb1c2,d8a17fe69c8950639a010e11f605062012bcfe74"
6b48f11ca96992cdf32470186242fdb1201cb1c2,6b48f11c,Fix: Unbreak empty search results set handling,"Fix: Unbreak empty search results set handling

Bug: T137116
Bug: T152402
Change-Id: Ib7d2266ad1bf858f05b5e83f915ba8e11fd529e8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495666243,1495666572,2bd24bab2e2143f1802718077860edf9553a4ce9
2bd24bab2e2143f1802718077860edf9553a4ce9,2bd24bab,"Merge ""Show correct error msg when searching with no connection in PageActivity""","Merge ""Show correct error msg when searching with no connection in PageActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495662811,1495662811,"88136bfcf57154d9103c7607c5dd712894d1c3a1,0332c2b51af65a672a2eb2c1cb3c654522799366"
0332c2b51af65a672a2eb2c1cb3c654522799366,0332c2b5,Show correct error msg when searching with no connection in PageActivity,"Show correct error msg when searching with no connection in PageActivity

Breaks out Page-specific behavior in a new WikiPageErrorView subclass
to avoid showing Page-specific messages in an inappropriate context.

Bug: T166155
Change-Id: I1a2c69583122e264d65d7a73b66707b39891dabc
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495651387,1495662020,00729fde819e1515b3f5352cc7494cbc5b3488f5
88136bfcf57154d9103c7607c5dd712894d1c3a1,88136bfc,Tweak announcement card lineSpacingMultiplier,"Tweak announcement card lineSpacingMultiplier

The line height on the announcement card is too small.  (See the latest
Zeplin mock for reference.[1])  This gives it an explicit lineSpacing-
Multiplier so the text has a little breathing room.

[1] https://app.zeplin.io/project/57a120b91998d8977642a238/screen/591b68c3e0c0af7b4b87bab8

Change-Id: I3778c965692b2d1b6b88958a6654a065fa5e75f4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495660766,1495660766,00729fde819e1515b3f5352cc7494cbc5b3488f5
00729fde819e1515b3f5352cc7494cbc5b3488f5,00729fde,"Merge ""Update: reading list UI with saved page disk stats""","Merge ""Update: reading list UI with saved page disk stats""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495648984,1495648984,"0e41d837e8ac21775a25050aa2194e67b2c90036,798b6265f72e933847c639743f4462df5f51fba5"
d8a17fe69c8950639a010e11f605062012bcfe74,d8a17fe6,Hygiene: Resolve inconsistent test,"Hygiene: Resolve inconsistent test

For some reason, FullSearchArticlesTaskTest tests for a null suggestion
value even though in practice the suggestion value is almost always
defaulted to an empty string.  This updates it for consistency.

Change-Id: Iaaae4d7dc17dda803e7f798d35facbaa4b18feb2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495576578,1495576903,0e41d837e8ac21775a25050aa2194e67b2c90036
0e41d837e8ac21775a25050aa2194e67b2c90036,0e41d837,"Merge ""Update design of empty Search screen""","Merge ""Update design of empty Search screen""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495567978,1495567978,"6a15e4303e8ee3e5d5f0276d4efeb5b8f2dde6e5,1adab2fe1401bca9827cbd4f9038e0013bcd1f61"
6a15e4303e8ee3e5d5f0276d4efeb5b8f2dde6e5,6a15e430,"Merge ""Add FullTextSearchClientTest""","Merge ""Add FullTextSearchClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495566492,1495566492,"97f1cfcc3021f8c5da21c14e76913ad9d25df583,98e384ed5a37b19c7c98fbb3f6648b5473351efa"
97f1cfcc3021f8c5da21c14e76913ad9d25df583,97f1cfcc,"Merge ""Replace FullSearchArticlesTask with FullTextSearchClient""","Merge ""Replace FullSearchArticlesTask with FullTextSearchClient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495566297,1495566297,"c5f1a5e66bb4421d516d149f07c21598aee08c87,cf86909f6e540b3348aae3e4938cdc4439730890"
1adab2fe1401bca9827cbd4f9038e0013bcd1f61,1adab2fe,Update design of empty Search screen,"Update design of empty Search screen

This task make the first time search / cleared search history case more visually appealing and provide some prompt for user to search.

Bug: T137116
Change-Id: If19f9fade02895c1a745ecc0ab0feb1199f57d2f
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1494968363,1495563108,c5f1a5e66bb4421d516d149f07c21598aee08c87
798b6265f72e933847c639743f4462df5f51fba5,798b6265,Update: reading list UI with saved page disk stats,"Update: reading list UI with saved page disk stats

- Update reading list models to aggregate file size and offline status
  information. This could also be done in a SQLite query but would
  require refactoring the existing models.

- Update reading list UI to show saved page disk statistical
  information. Note: updates made by the saved page synchronization
  service are not seen until the UI is remade (see T164966).

- Replace the preexisting reading_list_item_count_singular and plural
  strings with slightly redundant summary and detail, singular and
  verbose strings. Although there's slightly more to translate, fewer
  parameters provides better context and reduces risk.

- In ReadingListItemView, Use Resources.getString() instead of
  String.format() for variadic  format arguments.

- Update translation tests to support three-parameter floating-point
  arguments. A new generic method for testing any parameter,
  testTranslation(), was added but this entire class needs heavy
  refactoring to shine (see T139546, T110243). In particular, the tests
  are monolithic and failures require scrutinization.

Bug: T162267
Change-Id: I3f9467618724cc3a4bd090056d773f3f5fce31aa
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1494437896,1495489452,c5f1a5e66bb4421d516d149f07c21598aee08c87
98e384ed5a37b19c7c98fbb3f6648b5473351efa,98e384ed,Add FullTextSearchClientTest,"Add FullTextSearchClientTest

Bug: T152402
Change-Id: I5a23115f9ab652a43e9882762f74d3a0dbdf8a6a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495486129,1495488309,cf86909f6e540b3348aae3e4938cdc4439730890
cf86909f6e540b3348aae3e4938cdc4439730890,cf86909f,Replace FullSearchArticlesTask with FullTextSearchClient,"Replace FullSearchArticlesTask with FullTextSearchClient

Tests to follow.

Bug: T152402
Change-Id: Ia1db88bfbed488eb31f86e7057eede48c0809b96
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495131210,1495488299,9218faacb046de3d2a77cd37c0d3dfef76ebe87a
c5f1a5e66bb4421d516d149f07c21598aee08c87,c5f1a5e6,"Merge ""Add GalleryCollectionClientTest""","Merge ""Add GalleryCollectionClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495487532,1495487533,"387c06de3ff4e250439b5e1ac38ad04974f7a051,3fca2fa53bd5854cc86cc815235f8141d9f49399"
387c06de3ff4e250439b5e1ac38ad04974f7a051,387c06de,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495473115,1495473115,"9218faacb046de3d2a77cd37c0d3dfef76ebe87a,484d0c898b18d44e14d967e75e7884f7bf282666"
484d0c898b18d44e14d967e75e7884f7bf282666,484d0c89,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I2b2eeaafbe69dd59e99e3400b51b6f45f5855e59
",,,,Translation updater bot,l10n-bot@translatewiki.net,Stephen Niedzielski,stephen@niedzielski.com,1495353492,1495472483,a27ce958c5be1cb249817a1a3f97fc26ec329fee
9218faacb046de3d2a77cd37c0d3dfef76ebe87a,9218faac,DevSettings: Make MediaWiki settings dynamic,"DevSettings: Make MediaWiki settings dynamic

Make changes to MediaWiki Base URI and Supports Multiple Languages in
Developer Settings languages dynamic, so that the app does not have to
be restarted after the setting is changed.

Bug: T165923
Change-Id: I74a17cf2f0718451651acd263702ad7b5e088fab
",,,,BearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1495309703,1495362704,204810b1a3519f8c89f77e90886d8efb6669b5eb
204810b1a3519f8c89f77e90886d8efb6669b5eb,204810b1,Only request Feed content if RESTBase is enabled,"Only request Feed content if RESTBase is enabled

Bug: T165889
Change-Id: I79e20a8a796cde0de9b6051bec422db5554164b0
",,,,BearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1495290365,1495298112,a27ce958c5be1cb249817a1a3f97fc26ec329fee
a27ce958c5be1cb249817a1a3f97fc26ec329fee,a27ce958,Make base url of preview.html dynamic,"Make base url of preview.html dynamic

Like the changed for index.html, the preview.html base url is not
hardcoded to wikipedia.org anymore, but set via JS from the WikiSite which
is in use for the edit preview.

Bug: T165789
Change-Id: I95510a6aa7121362d5e3f860ed161b23452204ae
",,,,Florian,florian.schmidt.stargatewissen@gmail.com,Florian,florian.schmidt.stargatewissen@gmail.com,1495213662,1495279725,09622b475cdfc39c6d291512f4883c2b2ffab15d
3fca2fa53bd5854cc86cc815235f8141d9f49399,3fca2fa5,Add GalleryCollectionClientTest,"Add GalleryCollectionClientTest

Bug: T152403
Change-Id: I8bd9129d83c3e42cd9465b80c622ecb6212b7c51
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495214024,1495221906,09622b475cdfc39c6d291512f4883c2b2ffab15d
09622b475cdfc39c6d291512f4883c2b2ffab15d,09622b47,Retrofit GalleryCollectionFetchTask,"Retrofit GalleryCollectionFetchTask

Adds a Retrofit client that supports query continuation in order to
retrive complete information for a gallery collection.

Bug: T152403
Change-Id: If8b2d0d96069f98949dd05120cba6c9eeb687095
",,,,Michael Holloway,mholloway@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1494884148,1495218142,84dd8a8af04c7bc3ffe0d92d46669e6aeeb1dfdd
84dd8a8af04c7bc3ffe0d92d46669e6aeeb1dfdd,84dd8a8a,"Merge ""Do not assume that all lead image thumb URLs are without scheme""","Merge ""Do not assume that all lead image thumb URLs are without scheme""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495217220,1495217220,"a31931f1fe23852c137a31bdc4ee2da34612c061,77713a0c2ae9f8334ddf1692a01a3dd013a08f99"
77713a0c2ae9f8334ddf1692a01a3dd013a08f99,77713a0c,Do not assume that all lead image thumb URLs are without scheme,"Do not assume that all lead image thumb URLs are without scheme

Until now, the app expects to get a thumb image URL returned from the API,
which does not contain a scheme. This isn't true, at least not for all
third-parties, where probably a https URL is returned through the API. The
app now handles these URLs by parsing the returned URL to an URI object
and sets the scheme from the WikiSite only, if there's no scheme in the
URL already.

Until now, the current implemented handling would result in stupid things
like:

  httpshttps://uploads.wikipedia.org...

Bug: T165495
Change-Id: I96d624a3bdfe0c76890a1993dc31eb3af600a1bc
",,,,Florian,florian.schmidt.stargatewissen@gmail.com,Stephen Niedzielski,stephen@niedzielski.com,1495201253,1495216516,4ef3237dece276e319a30cd7b8e724198f39692c
a31931f1fe23852c137a31bdc4ee2da34612c061,a31931f1,"Hygiene: Move ImageLicense, -FetchClient[Test] to org.wikipedia.gallery","Hygiene: Move ImageLicense, -FetchClient[Test] to org.wikipedia.gallery

Change-Id: I8b4e829438fa4464324378be335a0ebdd0d8a1d0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495214462,1495214462,881eee0ce90843a5d2c44c44f398a1d060e67739
881eee0ce90843a5d2c44c44f398a1d060e67739,881eee0c,"Merge ""Do not show language selection options for non-multi-language wikis""","Merge ""Do not show language selection options for non-multi-language wikis""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495210349,1495210349,"8fb8ee766eb094ea26bc055dc486c917a021c70f,f2430b0e766a5d2354b89ad17395da9834ab28df"
f2430b0e766a5d2354b89ad17395da9834ab28df,f2430b0e,Do not show language selection options for non-multi-language wikis,"Do not show language selection options for non-multi-language wikis

If the developer setting ""mediaWikiBaseUriSupportsLangCode"" is false,
there's no reason to show the language selection buttons and settings in
the preferences and search view. If the option is false, the app now will
simply hide these options.

Bug: T165495
Change-Id: Ibd01b1279198d773c841f164c438d494f25d8340
",,,,Florian,florian.schmidt.stargatewissen@gmail.com,Florian,florian.schmidt.stargatewissen@gmail.com,1495197697,1495197697,159b5e2d70dafaaa890c87cfe24e6adf9404abe4
8fb8ee766eb094ea26bc055dc486c917a021c70f,8fb8ee76,Hygiene: DRY up MwQueryResponse page results handling,"Hygiene: DRY up MwQueryResponse page results handling

Change-Id: I0403292601cce4ad50469692042c7244daed8579
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495143221,1495144775,3e649d380c52ba746337cf66abcc4970af936272
3e649d380c52ba746337cf66abcc4970af936272,3e649d38,Hygiene: Consolidate MwQueryImageLicensePage into MwQueryPage,"Hygiene: Consolidate MwQueryImageLicensePage into MwQueryPage

Change-Id: Ia70629d59bb5b5c76963d873afda8122bb277ac9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495143993,1495143993,4ef3237dece276e319a30cd7b8e724198f39692c
4ef3237dece276e319a30cd7b8e724198f39692c,4ef3237d,Add failure branch to CallbackTask,"Add failure branch to CallbackTask

Bug: T152403
Change-Id: I9f374938d821c73e79cd6e36442ab8da29237454
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494362878,1495131954,159b5e2d70dafaaa890c87cfe24e6adf9404abe4
159b5e2d70dafaaa890c87cfe24e6adf9404abe4,159b5e2d,"Merge ""Hygiene: Decompose page fragment layout""","Merge ""Hygiene: Decompose page fragment layout""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495060637,1495060637,"b0f85a17a14e05bc697ab95babb9d8e8278e596f,98f84f241defef4135443f569e83acd88be6a446"
b0f85a17a14e05bc697ab95babb9d8e8278e596f,b0f85a17,"Merge ""Set an accept: header on RESTBase summary endpoint requests""","Merge ""Set an accept: header on RESTBase summary endpoint requests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495057571,1495057571,"b781c21bbd8fa6248b26cfc24db23c8ae0aa6caf,3a71403004106f2d79f5506f5710f7a486664b9c"
b781c21bbd8fa6248b26cfc24db23c8ae0aa6caf,b781c21b,"Merge ""Don't show the soft keyboard upon launching the lang pref dialog""","Merge ""Don't show the soft keyboard upon launching the lang pref dialog""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1495056551,1495056551,"7f1968598c253f8938f1c14765c59aeefb5840ec,571ab58495aeccd7944c01875fb6d2268b18ac4c"
571ab58495aeccd7944c01875fb6d2268b18ac4c,571ab584,Don't show the soft keyboard upon launching the lang pref dialog,"Don't show the soft keyboard upon launching the lang pref dialog

Change-Id: I52fc7d493007cc3adcb3e0b1ce65a3db685d123a
",,,,krimo,hamadikrimo@hotmail.com,Michael Holloway,mholloway@wikimedia.org,1494523065,1495055691,79446a1daf01c778f7adb012613e791af7fbfa53
3a71403004106f2d79f5506f5710f7a486664b9c,3a714030,Set an accept: header on RESTBase summary endpoint requests,"Set an accept: header on RESTBase summary endpoint requests

For whatever reason (most likely an oversight) we haven't been specifying
a content format for page summary requests.  This adds one.  It's needed
so that we continue receiving plain text extracts when the summary
endpoint is updated to serve HTML to better support the mobile web.

Factors out a common accept header prefix placed in Constants, and updates
existing client classes.

N.B. Older clients that don't specify a content format version will
receive HTML extracts, and display them incorrectly.

Bug: T165017
Change-Id: I2492d319038982ac98b7019f9c926a1ff4d5e92c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1495045884,1495046334,7f1968598c253f8938f1c14765c59aeefb5840ec
98f84f241defef4135443f569e83acd88be6a446,98f84f24,Hygiene: Decompose page fragment layout,"Hygiene: Decompose page fragment layout

fragment_page is a large file and easy to get lost in.  This breaks it up
so it's easier to digest.

Change-Id: I15af5859e7d12c855d6133d50a572c6657fa851b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494974695,1494974695,7f1968598c253f8938f1c14765c59aeefb5840ec
7f1968598c253f8938f1c14765c59aeefb5840ec,7f196859,"Merge ""New: record physical and logical file size of saved pages""","Merge ""New: record physical and logical file size of saved pages""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494966955,1494966955,"b94c9e58b3bf8fd3b764249b9c5c6471bc262f20,57241f27d4776af3da7dab479a7587ff50b6720e"
b94c9e58b3bf8fd3b764249b9c5c6471bc262f20,b94c9e58,"Merge ""Design tweaks for article-level reading list actions.""","Merge ""Design tweaks for article-level reading list actions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494961478,1494961478,"f02f6bfd3aee5d7308cdbd735b02b94f913db197,b97d65574c25640da146a2664ad77d7edbd696cd"
b97d65574c25640da146a2664ad77d7edbd696cd,b97d6557,Design tweaks for article-level reading list actions.,"Design tweaks for article-level reading list actions.

Bug: T159720
Change-Id: If52fb088f3ed670b91100dea358ae9da838dc7c1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1494955126,1494955126,61c7b0e0f95aad266f19f85ff2908351be89d330
f02f6bfd3aee5d7308cdbd735b02b94f913db197,f02f6bfd,Suppress reading list onboarding if reading lists exist via syncing,"Suppress reading list onboarding if reading lists exist via syncing

Bug: T162942
Change-Id: I85df39a113d783df67af4dbe3a4808f03d803640
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494886099,1494886351,22055a192751bc20ccc90747891e9dc0fc076690
22055a192751bc20ccc90747891e9dc0fc076690,22055a19,Update Android Gradle plugin to 2.3.2,"Update Android Gradle plugin to 2.3.2

Minor update for AS 2.3.2 compatibility.

https://developer.android.com/studio/releases/gradle-plugin.html#revisions

Change-Id: I75dcd59725160b21da75161cd653bfbdf009ede2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494882664,1494882664,61c7b0e0f95aad266f19f85ff2908351be89d330
61c7b0e0f95aad266f19f85ff2908351be89d330,61c7b0e0,"Merge ""Consolidate collapse table CSS and JavaScript""","Merge ""Consolidate collapse table CSS and JavaScript""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494876621,1494876621,"c8ee2df99d19f8d5769982e5a3063621c273218b,9b443f15d9d56c3adb485eb1e88c509ac1e0cfd8"
c8ee2df99d19f8d5769982e5a3063621c273218b,c8ee2df9,Warn user before setting a page appearing in multiple lists to online-only,"Warn user before setting a page appearing in multiple lists to online-only

Bug: T162268
Change-Id: Ief466c6c0acac951036866b79d531daac596a38c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494528054,1494629619,8a7e55e2b5836ff1ac8e0fd0aeff53d49c5f5b82
9b443f15d9d56c3adb485eb1e88c509ac1e0cfd8,9b443f15,Consolidate collapse table CSS and JavaScript,"Consolidate collapse table CSS and JavaScript

Move collapse table to wikimedia-page-library.

https://github.com/wikimedia/wikimedia-page-library/pull/3
https://gerrit.wikimedia.org/r/#/c/349371/

Change-Id: I0e104eb74661daddbaf101bd4164ccce55ab9b5f
Depends-On: Ie1848e5543e7ae51431671ad0db189c1e9a42874
Bug: T158309
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1492742430,1494604636,8a7e55e2b5836ff1ac8e0fd0aeff53d49c5f5b82
8a7e55e2b5836ff1ac8e0fd0aeff53d49c5f5b82,8a7e55e2,"Merge ""Bump mobile-sections content version requested to 0.10.2""","Merge ""Bump mobile-sections content version requested to 0.10.2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494529519,1494529519,"6bd368125729a7d638e04eaff5c2de62736ec81b,fcdabf773d1b7cf6f59f6b242cf23ee1388e674d"
6bd368125729a7d638e04eaff5c2de62736ec81b,6bd36812,"Merge ""Remove 'state' variable from PageFragmentLoadState.""","Merge ""Remove 'state' variable from PageFragmentLoadState.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494529350,1494529350,"38a9091a91f4dc4d7f5e487b9eae8adced8a3235,e803162821f01f20bfcb029d8372f0dd04b92b25"
38a9091a91f4dc4d7f5e487b9eae8adced8a3235,38a9091a,"Merge ""Add new Gson POJOs for gallery collections""","Merge ""Add new Gson POJOs for gallery collections""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494525788,1494525788,"d02c06c9866e425dd26237ead2d158d3eaa87236,3ee1c6bcdad676dce5946c380d08dcfc8397299a"
d02c06c9866e425dd26237ead2d158d3eaa87236,d02c06c9,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494525050,1494525050,"22bbb90b41190d4347a57484fbdb20ac363f64cb,39258186bb72e6932f3cae11aa50b80b096b5685"
39258186bb72e6932f3cae11aa50b80b096b5685,39258186,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ie5d24fb7dd3395719f520dcea28a68d3b65f65ea
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1494485889,1494524332,506a3e23be9674b069a4e86071d8273ea81ce96f
22bbb90b41190d4347a57484fbdb20ac363f64cb,22bbb90b,"Merge ""Hygiene: Flesh out base MW API response POJO""","Merge ""Hygiene: Flesh out base MW API response POJO""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494523979,1494523979,"79446a1daf01c778f7adb012613e791af7fbfa53,0f98aed9ac4eef650c7f36eba20be1fbe2d04ff4"
79446a1daf01c778f7adb012613e791af7fbfa53,79446a1d,"Merge ""Allow backup of app database.""","Merge ""Allow backup of app database.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494511822,1494511822,"506a3e23be9674b069a4e86071d8273ea81ce96f,87868c9dc690c3e4c11fc8c7b47022ec163cd220"
e803162821f01f20bfcb029d8372f0dd04b92b25,e8031628,Remove 'state' variable from PageFragmentLoadState.,"Remove 'state' variable from PageFragmentLoadState.

This removes the 'state' member, as well as the confusing setState() and
performActionForState() methods, and replaces it with simple boolean.

Change-Id: I8dd6dbae11431ce5c85d9b02b42d1722841f61e5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1494452368,1494454648,506a3e23be9674b069a4e86071d8273ea81ce96f
fcdabf773d1b7cf6f59f6b242cf23ee1388e674d,fcdabf77,Bump mobile-sections content version requested to 0.10.2,"Bump mobile-sections content version requested to 0.10.2

Request content associated with the video anchor update.[1]

[1] https://phabricator.wikimedia.org/rGMOAc0aa75966f70c90964959665b6c01d935142f84f

Change-Id: Ic89ee60cd3d1f39cb91eb1f415eda6aeb67de17f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494453099,1494453099,506a3e23be9674b069a4e86071d8273ea81ce96f
506a3e23be9674b069a4e86071d8273ea81ce96f,506a3e23,"Merge ""Update description edit abuse filter results for formatversion=2""","Merge ""Update description edit abuse filter results for formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494450015,1494450015,"5c30d81596fdf57efcad94b83e952d16a96e981b,b9039b71b7a05d3cdff512b9f15ac1794841dba2"
5c30d81596fdf57efcad94b83e952d16a96e981b,5c30d815,"Merge ""Hygiene: replace assertEquals test with assertThat""","Merge ""Hygiene: replace assertEquals test with assertThat""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494449255,1494449255,"eaf93c3c69de6491efd1cd7e44fb80b80ce210cd,beec68af31fd2617cddd0605a4161aaa2d87e2ba"
eaf93c3c69de6491efd1cd7e44fb80b80ce210cd,eaf93c3c,"Merge ""Remove imageOverflow transform.""","Merge ""Remove imageOverflow transform.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494448863,1494448863,"1f821e615c072246a807dd2e24dcc4a65e817832,677406681a0af83e5f9a0c6f1767403f15c4827c"
beec68af31fd2617cddd0605a4161aaa2d87e2ba,beec68af,Hygiene: replace assertEquals test with assertThat,"Hygiene: replace assertEquals test with assertThat

Comment follow-up.  Prefer assertThat to assertEquals.

Change-Id: Ie9f92995497249ba88ebd099a8c348798b771334
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494447520,1494447520,1f821e615c072246a807dd2e24dcc4a65e817832
1f821e615c072246a807dd2e24dcc4a65e817832,1f821e61,"Merge ""Update WikitextClient to use formatversion=2""","Merge ""Update WikitextClient to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494445851,1494445851,"9623d20cd5d323fefa29a1b13b418db287362eb0,a7d74367c5add6a714ef8705ac9d74860a0c9981"
b9039b71b7a05d3cdff512b9f15ac1794841dba2,b9039b71,Update description edit abuse filter results for formatversion=2,"Update description edit abuse filter results for formatversion=2

No further updates needed for section edits.

Bug: T150382
Change-Id: I0937babecb0cd011b2406d5e464792f19c5d5f1a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494445365,1494445365,1e6dbf7e327819e9c0f27cfb8027bc828011c4f0
677406681a0af83e5f9a0c6f1767403f15c4827c,67740668,Remove imageOverflow transform.,"Remove imageOverflow transform.

We actually no longer need this transform, since the work of wrapping
images in divs that specify overflow-x:auto is now done upstream!

If we continue to find instances of articles that scroll incorrectly due
to extra-wide images, we should now file issues upstream, as well.

Change-Id: I7c356cb1db2557334e980f592c0fa0b0d4e8aa68
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1494444112,1494444260,3a820a6c912c28342c490e92ccdf00b568843226
9623d20cd5d323fefa29a1b13b418db287362eb0,9623d20c,"Merge ""Hygiene: Update ZeroConfigClient to use formatversion=2""","Merge ""Hygiene: Update ZeroConfigClient to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494444119,1494444119,"1e6dbf7e327819e9c0f27cfb8027bc828011c4f0,71851ba1c157313907e7b3e897a7b8dacddafe11"
3ee1c6bcdad676dce5946c380d08dcfc8397299a,3ee1c6bc,Add new Gson POJOs for gallery collections,"Add new Gson POJOs for gallery collections

Bug: T152403
Change-Id: Ib2e72662a0a5b12a9539d225652cc6197e045af1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494362576,1494443405,1e6dbf7e327819e9c0f27cfb8027bc828011c4f0
1e6dbf7e327819e9c0f27cfb8027bc828011c4f0,1e6dbf7e,"Merge ""Hygiene: Update login calls to use formatversion=2""","Merge ""Hygiene: Update login calls to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494442918,1494442918,"3a820a6c912c28342c490e92ccdf00b568843226,190c3df64fef9c06fb10b6041aa25075aa67a5bd"
71851ba1c157313907e7b3e897a7b8dacddafe11,71851ba1,Hygiene: Update ZeroConfigClient to use formatversion=2,"Hygiene: Update ZeroConfigClient to use formatversion=2

Also did some general refactoring and updating.  Tried to make the
success/failure modes a little more straightforward, but no functional
changes are intended.

Bug: T150382
Change-Id: Ibeab3182aa7bff5bcf049cc480a623cfe49678be
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494438596,1494440304,3a820a6c912c28342c490e92ccdf00b568843226
3a820a6c912c28342c490e92ccdf00b568843226,3a820a6c,"Merge ""Hygiene: Update NearbyClient to use formatversion=2""","Merge ""Hygiene: Update NearbyClient to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494439310,1494439310,"730f1190d1d244235bec9c7f18db22cfd8f7f103,289cd689b90a67e44f01b7e26ed2e73120abcaa0"
730f1190d1d244235bec9c7f18db22cfd8f7f103,730f1190,"Merge ""Hygiene: Update EntityClient to use formatversion=2""","Merge ""Hygiene: Update EntityClient to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494438347,1494438347,"4765f29dc1f69828c3b0a308657d7c239499860a,1c25a26a1328b35abd099dbb6b55af38ddf668f9"
4765f29dc1f69828c3b0a308657d7c239499860a,4765f29d,"Merge ""Hygiene: Update langlinks to use formatversion=2""","Merge ""Hygiene: Update langlinks to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494437194,1494437194,"833ff9369d6a6bb93843520f39389a51e66e11f9,34306cd7631b28c457884edda4685f3452e80c43"
1c25a26a1328b35abd099dbb6b55af38ddf668f9,1c25a26a,Hygiene: Update EntityClient to use formatversion=2,"Hygiene: Update EntityClient to use formatversion=2

Includes some very light refactoring; no functional changes intended.

Bug: T150382
Change-Id: I6e0e7c1f51e9a8321865a12016ce8847429735c8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494435989,1494435989,833ff9369d6a6bb93843520f39389a51e66e11f9
57241f27d4776af3da7dab479a7587ff50b6720e,57241f27,New: record physical and logical file size of saved pages,"New: record physical and logical file size of saved pages

Bug: T160469
Change-Id: I4b021e7a9b43f2891e5b5d520928bafca536a68d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1493679973,1494435981,833ff9369d6a6bb93843520f39389a51e66e11f9
34306cd7631b28c457884edda4685f3452e80c43,34306cd7,Hygiene: Update langlinks to use formatversion=2,"Hygiene: Update langlinks to use formatversion=2

Change-Id: I6bb97c74a17f38036d81998ade704108a550d8f6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494426402,1494435297,3714a240ababfb036a0bc502053646bc600a32c6
289cd689b90a67e44f01b7e26ed2e73120abcaa0,289cd689,Hygiene: Update NearbyClient to use formatversion=2,"Hygiene: Update NearbyClient to use formatversion=2

Add'l refactoring: removed an unnecessary MwQueryPage subclass and
consolidated into MwQueryPage.

Bug: T150382
Change-Id: I8ebff57df06ad65b6a94615e0eac2f5e4e61b658
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494428391,1494428391,aa5d8988baf5aad339878f84bfd2a9dcff61d98f
833ff9369d6a6bb93843520f39389a51e66e11f9,833ff936,"Merge ""Update CreateAccountInfoClient to use formatversion=2""","Merge ""Update CreateAccountInfoClient to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494427995,1494427995,"aa5d8988baf5aad339878f84bfd2a9dcff61d98f,d69462876020bf820052ae9c97761f8f3e5f580b"
aa5d8988baf5aad339878f84bfd2a9dcff61d98f,aa5d8988,"Merge ""Hygiene: Update error JSON fixtures to use ""docref"" (formatversion=2)""","Merge ""Hygiene: Update error JSON fixtures to use ""docref"" (formatversion=2)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494427122,1494427122,"7fac99630497b58d11dc344d7abc62e2d3b8b083,1fbdb964f021e015feec86bbe16a4358745b6e8c"
190c3df64fef9c06fb10b6041aa25075aa67a5bd,190c3df6,Hygiene: Update login calls to use formatversion=2,"Hygiene: Update login calls to use formatversion=2

No further changes needed

Bug: T150382
Change-Id: I74535f832e8020a13b0c2cb02da39d3e83cde949
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494427077,1494427077,3714a240ababfb036a0bc502053646bc600a32c6
7fac99630497b58d11dc344d7abc62e2d3b8b083,7fac9963,"Merge ""Update EditPreviewClient to use formatversion=2""","Merge ""Update EditPreviewClient to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494426887,1494426887,"3714a240ababfb036a0bc502053646bc600a32c6,e7d45d82782fa7b6f6af3bc19ed073a7790bb3a0"
0f98aed9ac4eef650c7f36eba20be1fbe2d04ff4,0f98aed9,Hygiene: Flesh out base MW API response POJO,"Hygiene: Flesh out base MW API response POJO

Add warnings, servedby.

See, e.g., https://en.wikipedia.org/w/api.php?action=edit&format=json&formatversion=2&title=Talk:Main_Page&section=new&summary=Hello%20World&text=Hello%20everyone!&watch&basetimestamp=2008-03-20T17:26:39Z&token=cecded1f35005d22904a35cc7b736e18%2B%5C. [1]

[1] Example taken from MediaWiki API docs, with formatversion=2 added.

Change-Id: Ib814f7cb7a36858a739cce411738d43ed5149d21
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494424441,1494424561,57b710fceda5401cd8c1bf6c816167fa505f6c1a
3714a240ababfb036a0bc502053646bc600a32c6,3714a240,"Merge ""Hygiene: Update MW pageRemaining to use formatversion=2""","Merge ""Hygiene: Update MW pageRemaining to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494424375,1494424375,"ed6e5c943faeaee9824409f30b3d645d01df63f5,d638a791387f70a83b0104ce283321aabc44f4b6"
ed6e5c943faeaee9824409f30b3d645d01df63f5,ed6e5c94,"Merge ""Update DescriptionEditClient to use formatversion=2""","Merge ""Update DescriptionEditClient to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494424351,1494424351,"57b710fceda5401cd8c1bf6c816167fa505f6c1a,c2771ca9f4bc565ea160190a1ed60567bb33ce31"
57b710fceda5401cd8c1bf6c816167fa505f6c1a,57b710fc,"Merge ""Update EditClient to use formatversion=2""","Merge ""Update EditClient to use formatversion=2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494423222,1494423222,"86b5c0adbf640dd2cfb0f8191dd70edf008925c6,c0f024e91a9dbd560f7a3b801917a97b67d9d3f2"
a7d74367c5add6a714ef8705ac9d74860a0c9981,a7d74367,Update WikitextClient to use formatversion=2,"Update WikitextClient to use formatversion=2

Bug: T150382
Change-Id: I7669b25d0130db9a5daaeaad9e612f16903c4596
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494371975,1494371975,f6ea084c1a5ea44a542a0c50e0925e5718549339
1fbdb964f021e015feec86bbe16a4358745b6e8c,1fbdb964,"Hygiene: Update error JSON fixtures to use ""docref"" (formatversion=2)","Hygiene: Update error JSON fixtures to use ""docref"" (formatversion=2)

Bug: T150382
Change-Id: Iaafa7f4825056038d9f72be6874288242a34b72a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494370341,1494370341,f6ea084c1a5ea44a542a0c50e0925e5718549339
e7d45d82782fa7b6f6af3bc19ed073a7790bb3a0,e7d45d82,Update EditPreviewClient to use formatversion=2,"Update EditPreviewClient to use formatversion=2

Bug: T150382
Change-Id: I53dae8216f8c01a8c1c8c618f8a731b96ea72bdb
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494370000,1494370000,f6ea084c1a5ea44a542a0c50e0925e5718549339
c0f024e91a9dbd560f7a3b801917a97b67d9d3f2,c0f024e9,Update EditClient to use formatversion=2,"Update EditClient to use formatversion=2

No other changes needed.

Bug: T150382
Change-Id: Iac0148961adf3449fc4dd862f2c8261c492ad2f9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494369412,1494369412,f6ea084c1a5ea44a542a0c50e0925e5718549339
c2771ca9f4bc565ea160190a1ed60567bb33ce31,c2771ca9,Update DescriptionEditClient to use formatversion=2,"Update DescriptionEditClient to use formatversion=2

No other changes needed.

Bug: T150382
Change-Id: Ifca35f7f28165ff2c53194742b73444a7d489d51
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494369128,1494369128,f6ea084c1a5ea44a542a0c50e0925e5718549339
d638a791387f70a83b0104ce283321aabc44f4b6,d638a791,Hygiene: Update MW pageRemaining to use formatversion=2,"Hygiene: Update MW pageRemaining to use formatversion=2

Essentially a no-op.

Bug: T150382
Change-Id: I019a9bf8ddd98b850a35649f3fee094d4225a507
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494367819,1494367819,f6ea084c1a5ea44a542a0c50e0925e5718549339
86b5c0adbf640dd2cfb0f8191dd70edf008925c6,86b5c0ad,Update CsrfTokenClient to use formatversion=2,"Update CsrfTokenClient to use formatversion=2

+ minor hygienic changes

Bug: T150382
Change-Id: I203492eb81c8476a29ce7c134f39dbbfaeb48b4a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494367149,1494367149,f6ea084c1a5ea44a542a0c50e0925e5718549339
d69462876020bf820052ae9c97761f8f3e5f580b,d6946287,Update CreateAccountInfoClient to use formatversion=2,"Update CreateAccountInfoClient to use formatversion=2

No substantive updates needed, but I also beefed up the CreateAccountInfo
POJO a bit to reflect the actual response.  Also updated the test JSON.

Bug: T150382
Change-Id: I1ed04e1beb46a5013c8b1b5ce830569387179692
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494366755,1494366755,f6ea084c1a5ea44a542a0c50e0925e5718549339
f6ea084c1a5ea44a542a0c50e0925e5718549339,f6ea084c,"Merge ""Fix possible memory leaks when destroying WebViews.""","Merge ""Fix possible memory leaks when destroying WebViews.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494344291,1494344291,"56ef86bab192318f1ab04b68e223383bf8ca7fe9,5a94e869425f6ce98744f3b524abcef7ce4cf811"
56ef86bab192318f1ab04b68e223383bf8ca7fe9,56ef86ba,"Merge ""Center <video> elements in Parsoid HTML""","Merge ""Center <video> elements in Parsoid HTML""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494344014,1494344014,"a3f89ec82d7e7aadc109aae30a4d6d49be39dc8e,aca1d3d4c202e6ab1a3be0a4c47b5ee8d12b2d5f"
a3f89ec82d7e7aadc109aae30a4d6d49be39dc8e,a3f89ec8,"Merge ""Render math formulas correctly on API <19.""","Merge ""Render math formulas correctly on API <19.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494343732,1494343732,"11cf43b6c00f7a18474a71ece660a0cc00b2d5f9,32c93f683340d7d2d07e6eb1c343581027708d96"
32c93f683340d7d2d07e6eb1c343581027708d96,32c93f68,Render math formulas correctly on API <19.,"Render math formulas correctly on API <19.

On API 18 and below, our math formulas were being rendered very weirdly,
and would usually appear as very tiny images.

After much investigating, it turns out this is because of the old
WebView's incomplete support for SVG graphics.  Specifically, the SVG
files that are used for our math formulas make use of ""ex"" units when
specifying their nominal width and height. The WebView does not seem to
handle these units correctly.

This patch makes use of our logic that intercepts requests made by the
WebView, and checks if the content-type of the response is SVG.  And if
it's SVG, we rewrite any usages of ""ex"" units with ""em"".  This fixes the
display of formulas on older APIs, and doesn't seem to have any negative
effects on other non-mathematical SVGs.

Bug: T107775
Change-Id: Icee31fcc16b4addee9c4a328c01cc88f7b0caccf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1493918146,1494333435,2c9dd7df868a75ee3ed1b1f8a727b337025cd837
aca1d3d4c202e6ab1a3be0a4c47b5ee8d12b2d5f,aca1d3d4,Center <video> elements in Parsoid HTML,"Center <video> elements in Parsoid HTML

Bug: T164522
Change-Id: I46a4770ecdc45c7aabbbf3833497a62ba2ca44a9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1494286512,1494286512,8fba21963d97c74b9c0c113d01770d941a00d8b1
11cf43b6c00f7a18474a71ece660a0cc00b2d5f9,11cf43b6,"Merge ""Fix: no longer use custom CSS for handling math formulae.""","Merge ""Fix: no longer use custom CSS for handling math formulae.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494281983,1494281983,"8fba21963d97c74b9c0c113d01770d941a00d8b1,53450d2af65622c4c5bf19897f13a3f165fb54b5"
5a94e869425f6ce98744f3b524abcef7ce4cf811,5a94e869,Fix possible memory leaks when destroying WebViews.,"Fix possible memory leaks when destroying WebViews.

Observed (and fixed) in at least APIs 18 and 22:
There seem to be specific circumstances when the WebView holds on to
certain View references, which in turn hold on to an Activity reference
indefinitely, causing a leak.

For example, if we navigate to the [[Obama]] article and then exit the
activity, the WebView holds on to an instance of `HTML5VideoView`, which
is presumably a container for a video object that's shown in the article.

There's a lot of conflicting information and workarounds for this on the
web, but a common thread seems to be that the WebView doesn't always
destroy its own view hierarchy correctly, and needs to be triggered
explicitly.

This patch adds a method to our ObservableWebView that does its best to
destroy itself, which includes:
- Clearing all listeners
- Removing itself from the Activity's view hierarchy
- Calling destroy() on itself, which does the actual work of
  uninitializing the WebView's internals, and relies on the WebView no
  longer being attached to a window.

Change-Id: I6dc550eec706c7a2041cdad61d55c00e4558c52d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1494021335,1494250317,8fba21963d97c74b9c0c113d01770d941a00d8b1
8fba21963d97c74b9c0c113d01770d941a00d8b1,8fba2196,"Merge ""Retrofit ImageLicenseFetchTask""","Merge ""Retrofit ImageLicenseFetchTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1494010086,1494010086,"cf8e91b6dff22cdc6371448155896b59ae6c5b1d,5ae959ea401953f927aa56dd39490b914509d3b0"
cf8e91b6dff22cdc6371448155896b59ae6c5b1d,cf8e91b6,"Merge ""Stop updating the feed UI based on ReadingListPageObserver reports""","Merge ""Stop updating the feed UI based on ReadingListPageObserver reports""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493991247,1493991247,"b38623229998ed073ec31829e1f477fecc43000f,d7b9741359a97b4db4b8b9e5af352b06d3e12a68"
b38623229998ed073ec31829e1f477fecc43000f,b3862322,"Merge ""Hygiene: remove some dead JavaScript""","Merge ""Hygiene: remove some dead JavaScript""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493942590,1493942590,"a558e305c77dcf34987f72df60dff4d7cceec0b5,238d1be2af14f6fd801789a0e75d515f8f134c15"
238d1be2af14f6fd801789a0e75d515f8f134c15,238d1be2,Hygiene: remove some dead JavaScript,"Hygiene: remove some dead JavaScript

These bridge messages aren't sent or received anywhere:

- requestImagesList
- imagesListResponse
- replaceImageSrc
- replaceImageSources

Remove the dead code.

Change-Id: I48ed9cbc3c4bd953867d2e9f279f4219fc9a0191
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1493938610,1493938610,1447fbdf95666f9c723682d5e10c4c24abbba9c2
a558e305c77dcf34987f72df60dff4d7cceec0b5,a558e305,"Merge ""Hygiene: Rename PageTitleListCardItemViewTest -> ListCardItemViewTest""","Merge ""Hygiene: Rename PageTitleListCardItemViewTest -> ListCardItemViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493935773,1493935773,"9055f78b4f4b88d0242c131174b8ad99f196979d,120c9d9d99ddeb4f93e098997aff58ab0e23d6f8"
9055f78b4f4b88d0242c131174b8ad99f196979d,9055f78b,"Merge ""Update reference screenshots for testing""","Merge ""Update reference screenshots for testing""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493934946,1493934946,"7669a2f150f5ebd5f6f7928721bbb109e45abd03,1e7f185a623f438a940b0ae3386fd287b01ae9a4"
7669a2f150f5ebd5f6f7928721bbb109e45abd03,7669a2f1,"Merge ""Upgrade to wikimedia-page-library to 2.0.1.""","Merge ""Upgrade to wikimedia-page-library to 2.0.1.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493934553,1493934553,"983829650f1773ad8e520bd791a20e09a91df651,1447fbdf95666f9c723682d5e10c4c24abbba9c2"
1447fbdf95666f9c723682d5e10c4c24abbba9c2,1447fbdf,Upgrade to wikimedia-page-library to 2.0.1.,"Upgrade to wikimedia-page-library to 2.0.1.

This renames our usages of the old ""applib"" to the new
""wikimedia-page-library"", and refreshes all the newest changes to the JS
and CSS that it brings.

Change-Id: Ib6c33488b51ac6adcd482a8f85f2efd8a38090dd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1493933225,1493933591,2c9dd7df868a75ee3ed1b1f8a727b337025cd837
5ae959ea401953f927aa56dd39490b914509d3b0,5ae959ea,Retrofit ImageLicenseFetchTask,"Retrofit ImageLicenseFetchTask

Port ImageLicenseFetchTask to Retrofit and try to stay as consistent as possible with the existing code.

Bug: T152406
Change-Id: Ib6ad70b969507aaad7356fce2e2e9bf27aaaeddc
",,,,Jorge Casariego,jorgekasa@gmail.com,Jorge Casariego,jorgekasa@gmail.com,1493837623,1493933482,51e78084beed295410745e84d79492b160b8f616
120c9d9d99ddeb4f93e098997aff58ab0e23d6f8,120c9d9d,Hygiene: Rename PageTitleListCardItemViewTest -> ListCardItemViewTest,"Hygiene: Rename PageTitleListCardItemViewTest -> ListCardItemViewTest

The view name was changed and the test should be updated to reflect this.

Change-Id: Ifd194d3e893474ff513dc3dbbc1144a9c333d8af
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1493930526,1493930526,1e7f185a623f438a940b0ae3386fd287b01ae9a4
1e7f185a623f438a940b0ae3386fd287b01ae9a4,1e7f185a,Update reference screenshots for testing,"Update reference screenshots for testing

Looks ilke a very minor change around the edges of the default list card
item view icon was causing a diff.

Change-Id: I78497720dfbb1eb035da5c7b44a8cdc8c8463f7a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1493929857,1493929948,983829650f1773ad8e520bd791a20e09a91df651
983829650f1773ad8e520bd791a20e09a91df651,98382965,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I789ccad73b90277b6eac22a7e810838cff601fa1
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1493877823,1493909925,2c9dd7df868a75ee3ed1b1f8a727b337025cd837
53450d2af65622c4c5bf19897f13a3f165fb54b5,53450d2a,Fix: no longer use custom CSS for handling math formulae.,"Fix: no longer use custom CSS for handling math formulae.

Once upon a time, we had to manually override certain CSS classes so that
we correctly display the fallback SVG version of a math formula (since we
can't display MathML).

Today, however, the server-side rendering of the formulas has improved via
the Mathoid extension, and our app can now pull the necessary CSS from the
module ""ext.math.styles"", which takes care of quite a few minor rendering
issues related to formulas, especially those emitted by templates.

This patch pulls the new math CSS into our styles, along with the most
current update of the other styles.

Bug: T103675
Bug: T107775
Bug: T164370
Change-Id: Ifd8451c9605c345acbccb10dac7b86aa8b6a4355
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1493904588,1493905627,2c9dd7df868a75ee3ed1b1f8a727b337025cd837
d7b9741359a97b4db4b8b9e5af352b06d3e12a68,d7b97413,Stop updating the feed UI based on ReadingListPageObserver reports,"Stop updating the feed UI based on ReadingListPageObserver reports

Reverts the logic added to observe changes on the reading list page disk
table and report them back to the feed to update UI.  It resulted in
little gain and caused lots of problems, including a flickering feed UI
and jumping context menus.  Featured article card footers will still be
updated immediately when changed from the feed itself.

This makes ReadingListPageObserver obsolete, so it's removed.

Bug: T164374
Change-Id: I383a8f7d40016659bff43895ea06c941957d004c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1493848391,1493850125,e72cd02e82382a2d8440d1e7d9f82e38b9fae4a8
2c9dd7df868a75ee3ed1b1f8a727b337025cd837,2c9dd7df,"Merge ""Improve preserving of backstack when saving instance state.""","Merge ""Improve preserving of backstack when saving instance state.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493849222,1493849222,"e72cd02e82382a2d8440d1e7d9f82e38b9fae4a8,d49f3702c2c20a305dd1aac75626a81fe02ac292"
e72cd02e82382a2d8440d1e7d9f82e38b9fae4a8,e72cd02e,Hygiene: Remove unused methods and resources,"Hygiene: Remove unused methods and resources

Removes several methods and resources relating to edit token storage.  We
no longer store them.

Change-Id: Id3202f7b2b6683c3b12838f109ebd22ee6b20cbe
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1493845860,1493845860,51e78084beed295410745e84d79492b160b8f616
51e78084beed295410745e84d79492b160b8f616,51e78084,"Merge ""Fix: use proper margins in description editing view for API 16.""","Merge ""Fix: use proper margins in description editing view for API 16.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493822784,1493822784,"bbab388488d36c814dbf56c41dacde62a72bcb43,965746369fbf8c9008a6f6538c346211f1f998a4"
d49f3702c2c20a305dd1aac75626a81fe02ac292,d49f3702,Improve preserving of backstack when saving instance state.,"Improve preserving of backstack when saving instance state.

When saving PageActivity's instance state, and indeed when pausing this
activity for any reason, we persist the current backstack of PageTitles,
so that when the activity reloads, we load the last item from the
backstack.

However, we were not persisting the description or thumbUrl of the
PageTitles in the backstack, since these are always loaded dynamically
when we load the page content into the WebView.  The problem is when
another component starts depending on a title from the backstack *before*
the page content is loaded.  An example is the description editing
activity. This activity could be launched before PageActivity has a chance
to load the page content, and can therefore receive a PageTitle with an
empty description, which can lead to the behavior seen in the phab task.

This patch simply updates the additional metadata of the description and
thumbUrl onto the current backstack entry when pausing the activity.

Bug: T157824
Change-Id: I9700c60185d9ca9147f15bb2fedcf853a3b48d27
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1493750107,1493822001,d38f00f73252c14c7c409e9e8febe2aaf61fa274
bbab388488d36c814dbf56c41dacde62a72bcb43,bbab3884,"Merge ""Add article-level actions to articles in a reading list.""","Merge ""Add article-level actions to articles in a reading list.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493821842,1493821842,"bcf8bae5a108769b69015778b635c35348372687,8c415b0cf014da1e166fed5cd6b0991127315044"
bcf8bae5a108769b69015778b635c35348372687,bcf8bae5,"Merge ""Conditionally set ANDROID_HOME only if not set elsewhere""","Merge ""Conditionally set ANDROID_HOME only if not set elsewhere""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493768807,1493768807,"9f43a1131b9e27ecfa892435515d133b3ba6f3c5,f3e76ffead996492ef1e27b8754405f9b70fdea4"
965746369fbf8c9008a6f6538c346211f1f998a4,96574636,Fix: use proper margins in description editing view for API 16.,"Fix: use proper margins in description editing view for API 16.

API 16 doesn't actually support marginStart/marginEnd, although the IDE
doesn't show a warning about this when they're specified together.

This changes our usage of margins in the description edit view to the more
compatible marginLeft+marginRight. This seems to be the only place where
this is the case. In other places where we use a single Start or End
margin, it's accompanied by an equivalent Left or Right margin.

This also removes an unnecessary margin from the About view (looks like a
holdover from when the W icon was inline with the Wikipedia wordmark).

Change-Id: If7e859cfcaac54980f9e5a2051e661d4ae546617
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1493756437,1493756437,d38f00f73252c14c7c409e9e8febe2aaf61fa274
f3e76ffead996492ef1e27b8754405f9b70fdea4,f3e76ffe,Conditionally set ANDROID_HOME only if not set elsewhere,"Conditionally set ANDROID_HOME only if not set elsewhere

I think we can use the plugin's SDK copy after all.  Let's set
ANDROID_HOME conditionally so that we don't override an existing value set
elsewhere.

Change-Id: Id02a47f12be577d349c0e99896261c3255f2dc24
",,,,Mholloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1493754097,1493755810,333715670d1afafd28efd0430ca3306f8cda752e
8c415b0cf014da1e166fed5cd6b0991127315044,8c415b0c,Add article-level actions to articles in a reading list.,"Add article-level actions to articles in a reading list.

This adds a bottom sheet filled with actions for each of the items in the
user's reading list screen.

Bug: T159720
Change-Id: Icae7f384e2ca61290dfb478029546abf3aa6ca98
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1493159190,1493752818,ee637780e231003a8e6dbb4aa6e37d4703dc1283
9f43a1131b9e27ecfa892435515d133b3ba6f3c5,9f43a113,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I6b44b40abd52e65bc0c77a726c7dcd7c46ecf33c
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1493705644,1493705644,849318826cf935cc47bfb85d4b3596e97b251047
849318826cf935cc47bfb85d4b3596e97b251047,84931882,Fix: Update MCS content format versions accepted,"Fix: Update MCS content format versions accepted

It's important to keep the MCS content versions requested by the current
development version of the app in sync with the latest MCS output version.

In this case, our failing to update our accept header with the latest
mobile-sections version meant that the app was not benefiting from a fix
deployed nearly a month ago, on April 10.

Problems around this probably haven't shown up until now because lately
Bernd is being more proactive with version bumps.

I watch the MCS repo reasonably closely so I'll make sure to keep this up-
to-date going forward.

Bug: T162116
Change-Id: I8806001caeadd2b6bd28207fbcf5c329e0dd3dd7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1493668065,1493668065,9d4ebc0ee47bf505966440beae5d7c2ae0bfaf4d
9d4ebc0ee47bf505966440beae5d7c2ae0bfaf4d,9d4ebc0e,"Merge ""Insert OfflineCard when offline""","Merge ""Insert OfflineCard when offline""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493651641,1493651641,"527e6d114d983d180bfaf3b9daae07958dfc309c,bbf662dee797755432a7f9159bc9b78a79b9d7bb"
527e6d114d983d180bfaf3b9daae07958dfc309c,527e6d11,"Merge ""Add OfflineCard/View""","Merge ""Add OfflineCard/View""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493401505,1493401505,"7119c186057114dea0818eaf2ce8f322ebdd4bec,fae22ea39fd1c9645d8c90fe97da107d481123b3"
7119c186057114dea0818eaf2ce8f322ebdd4bec,7119c186,"Merge ""Fix: Centralize retrieval of DB name from WikiSite.""","Merge ""Fix: Centralize retrieval of DB name from WikiSite.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493400907,1493400907,"fd997acc23ba61f02de0c50ea98bbedad0ac2cfc,0edd76b2f5f340c9c177c0f403b4ba76e0b0265e"
fd997acc23ba61f02de0c50ea98bbedad0ac2cfc,fd997acc,"Merge ""Stop setting the app language to null when it matches the system language""","Merge ""Stop setting the app language to null when it matches the system language""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493400371,1493400371,"ba599a6510e84ef015cfffd43cdf684ee3da5b7e,d8dbe499e89f4d7452dedd954b4853f7e99c046e"
ba599a6510e84ef015cfffd43cdf684ee3da5b7e,ba599a65,"Merge ""Retrofit GetDescriptionsTask""","Merge ""Retrofit GetDescriptionsTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493388998,1493388998,"d38f00f73252c14c7c409e9e8febe2aaf61fa274,aae23f7b9c3a9a0f900d6f9cb2628ebe322c29fe"
aae23f7b9c3a9a0f900d6f9cb2628ebe322c29fe,aae23f7b,Retrofit GetDescriptionsTask,"Retrofit GetDescriptionsTask

Port GetDescriptionTask to Retrofit and try to stay as consistent as possible with the existing code.

Bug: T152405
Change-Id: I857c8f07a8df09590676629fb5f01bc0e4fcb8c7
",,,,Jorge Casariego,jorgekasa@gmail.com,Michael Holloway,mholloway@wikimedia.org,1493309238,1493387938,d6fd5d3a65c940ad993517d399a3c1b4a471181b
d38f00f73252c14c7c409e9e8febe2aaf61fa274,d38f00f7,"Merge ""Add link to OSM License""","Merge ""Add link to OSM License""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493385355,1493385355,"a020eaeea67fd25b62d4180fde317c97048cd959,7ec46cde64334743c3e2dde37f2649a847597762"
7ec46cde64334743c3e2dde37f2649a847597762,7ec46cde,Add link to OSM License,"Add link to OSM License

App needs to show a link to OSM copyright on the map.

Bug: T161340
Change-Id: Icf642abadcd7eb9fb627e62806b702cb1d9be614
",,,,Jorge Casariego,jorgekasa@gmail.com,Dmitry Brant,dbrant@wikimedia.org,1492029749,1493384695,96b362183bedfe8a9003c13cfaf0f41c4f80af48
d8dbe499e89f4d7452dedd954b4853f7e99c046e,d8dbe499,Stop setting the app language to null when it matches the system language,"Stop setting the app language to null when it matches the system language

With this, the app will remember when been explicitly set to the system
language (rather than merely defaulting to it).

This also has the effect of making dev build language randomization work as
intended (i.e., only on install and until a new language has been set
explicitly.)

Change-Id: I4e441856e5a05fcffd520229e9bb9b5b981927fd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1493325470,1493325942,d6fd5d3a65c940ad993517d399a3c1b4a471181b
bbf662dee797755432a7f9159bc9b78a79b9d7bb,bbf662de,Insert OfflineCard when offline,"Insert OfflineCard when offline

Appends the OfflineCard to the end of the feed when an offline exception
is thrown and halts further loading.

Bug: T157381
Change-Id: Ia0f6a996c23b17f4a27d25cf8e8068609d3eefdd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1493319026,1493323445,fae22ea39fd1c9645d8c90fe97da107d481123b3
0edd76b2f5f340c9c177c0f403b4ba76e0b0265e,0edd76b2,Fix: Centralize retrieval of DB name from WikiSite.,"Fix: Centralize retrieval of DB name from WikiSite.

The ""dbname"" is yet another alias for a wiki site that is used for certain
API calls.  Usually this is represented by the language code plus the word
""wiki"", such as ""enwiki"", ""dewiki"", etc.

However, this is not true for *all* language codes. For instance, the
dbname for Norwegian Bokmal Wikipedia is ""nowiki"", even though the
language code is ""nb"".  There may be several more of these cases, but they
can be added later.

This patch creates a centralized method where the dbname can be retrieved
directly from a given WikiSite, and adds some tests.

Bug: T163920
Change-Id: If4d33bb8038c00fbae914e5ff00148ccb9cceeeb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1493305290,1493307935,ee637780e231003a8e6dbb4aa6e37d4703dc1283
fae22ea39fd1c9645d8c90fe97da107d481123b3,fae22ea3,Add OfflineCard/View,"Add OfflineCard/View

Layout, Java class, and callback interface for an offline ""card"" to be
injected into the feed when a network request fails.

TODO: Add to the feed when offline.
TODO: Add unit tests.

Bug: T157381
Change-Id: I3c5375d075fc4ae8f311a67f730835bc0cff3d8b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1493155669,1493304059,d6fd5d3a65c940ad993517d399a3c1b4a471181b
a020eaeea67fd25b62d4180fde317c97048cd959,a020eaee,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I9d7080f3ec3f24f4da9a44e648989cdc15614de3
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1493274663,1493274663,d6fd5d3a65c940ad993517d399a3c1b4a471181b
d6fd5d3a65c940ad993517d399a3c1b4a471181b,d6fd5d3a,"Merge ""Fix: prevent race condition when synchronizing user options.""","Merge ""Fix: prevent race condition when synchronizing user options.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493241131,1493241131,"d795b4bb1100618fd741c59851cceae11c25c09e,17fb038d8421e3dd42f445dd6a6b6836786928b3"
d795b4bb1100618fd741c59851cceae11c25c09e,d795b4bb,"Merge ""Update HockeySDK to 4.1.3""","Merge ""Update HockeySDK to 4.1.3""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493240965,1493240965,"ee637780e231003a8e6dbb4aa6e37d4703dc1283,949311ace0e1b8a151f43ca646263658ae481364"
ee637780e231003a8e6dbb4aa6e37d4703dc1283,ee637780,"Merge ""Don't prevent SavedPageSyncService from running when offline""","Merge ""Don't prevent SavedPageSyncService from running when offline""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493138224,1493138224,"6568af4ed8fcb69742fd39dedc1bce43a24a1d43,0d6cb906481ca7b4fa318566e2ac1929f71447cb"
6568af4ed8fcb69742fd39dedc1bce43a24a1d43,6568af4e,"Merge ""Stop thrashing on page save failure and save on subsequent runs""","Merge ""Stop thrashing on page save failure and save on subsequent runs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493137924,1493137924,"20758c1ed3e65a1da1f948f44cbb44f972c373f8,861fd4019c4904e24b685284aa80447dbffcfa27"
20758c1ed3e65a1da1f948f44cbb44f972c373f8,20758c1e,"Merge ""Prevent possible crash when checking location perms in NearbyFragment""","Merge ""Prevent possible crash when checking location perms in NearbyFragment""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493136809,1493136809,"736a2828add89ab6a9c4361e5d230247b155b985,b094b707fea1a2f6b47755782c98b54bde6bcd49"
736a2828add89ab6a9c4361e5d230247b155b985,736a2828,"Merge ""Enable swipe-to-delete in History fragment.""","Merge ""Enable swipe-to-delete in History fragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493136524,1493136524,"9c88cb766b68f4279909e34eaf081022bf5f29ac,4ccdd28bbb401d234fd757c4538febfb9a01fcbf"
9c88cb766b68f4279909e34eaf081022bf5f29ac,9c88cb76,"Merge ""Enable multi-selection in History fragment.""","Merge ""Enable multi-selection in History fragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493136010,1493136010,"49ec5dfd947fad9f65c94042981b8895a6b42e06,4eb058e8275f9faad64b24d3ba3e2c5cd1e1a292"
49ec5dfd947fad9f65c94042981b8895a6b42e06,49ec5dfd,"Merge ""Make HistoryFragment use a RecyclerView instead of ListView.""","Merge ""Make HistoryFragment use a RecyclerView instead of ListView.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493134809,1493134809,"64dd9ca2198a720c2b64c629a2c5d24af13e771f,7463cbdf32c7b70a54661cff7ed80e904e09cd06"
87868c9dc690c3e4c11fc8c7b47022ec163cd220,87868c9d,Allow backup of app database.,"Allow backup of app database.

This allows the system to back up our app's database to the user's Google
account.[1] This means that if the user performs a backup of their device,
and then uninstalls/reinstalls our app (or resets their device), the
database should be restored automatically. The user will then regain
access to their previously-saved reading lists and browsing history, which
at least partially addresses our users' needs for reading lists to be
persisted across app installs.

Note that this instructs the system to ONLY back up the database, and not
any of the app's other files, such as the contents of saved pages, which
can be quite large, and exceed Google's 25MB limit for app backups.

This also does NOT back up the app's SharedPreferences, which can contain
the user's login credentials, and could present a security issue if backed up.

For testing the backup functionality, see [2].

[1] https://developer.android.com/guide/topics/data/autobackup.html
[2] https://developer.android.com/guide/topics/data/testingbackup.html

Bug: T130331
Change-Id: Ie659913abd51e6312571e281842707a5fcc0eec6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1493133177,1493133177,bc1cceb6780b901231da4c202c9712448d089c82
4ccdd28bbb401d234fd757c4538febfb9a01fcbf,4ccdd28b,Enable swipe-to-delete in History fragment.,"Enable swipe-to-delete in History fragment.

Bug: T146650
Change-Id: Id2af65cbbc0bf4aa95de153156dacb210ec69e1a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1493130411,1493130935,4eb058e8275f9faad64b24d3ba3e2c5cd1e1a292
4eb058e8275f9faad64b24d3ba3e2c5cd1e1a292,4eb058e8,Enable multi-selection in History fragment.,"Enable multi-selection in History fragment.

TODO in next patch: swipe to delete.

Bug: T162280
Change-Id: Ifc97f253538281a7d1903e255f2b916db52fc45c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1493044587,1493130927,7463cbdf32c7b70a54661cff7ed80e904e09cd06
7463cbdf32c7b70a54661cff7ed80e904e09cd06,7463cbdf,Make HistoryFragment use a RecyclerView instead of ListView.,"Make HistoryFragment use a RecyclerView instead of ListView.

Bug: T162280
Change-Id: I118d97671672c0a670ba785c1686d3bdddadd9d9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1492804871,1493130896,c868ee962d72da712e5c6ceb960b59809d25e452
17fb038d8421e3dd42f445dd6a6b6836786928b3,17fb038d,Fix: prevent race condition when synchronizing user options.,"Fix: prevent race condition when synchronizing user options.

Some of our recent changes (probably the refactor of CSRF token fetching)
seems to have introduced a race condition in the synchronizing logic of
user options.  This is likely because the method to post() a user option
became asynchronous, whereas it was previously synchronous.

This creates a condition where we request to post() an updated user
option, then immediately call get() to retrieve the latest options from
the server, when in fact the previous post() call hasn't yet finished.

This patch updates the post() and delete() methods to be 'artificially'
synchronous by using wait() / notify() logic.

TODO: update synchronizing of user options to use a 'revision' code,
similar to how reading lists are synchronized.

Bug: T163214
Change-Id: Ia8c7ac33d9cb52fad0d1676445f419a573292de1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1492547506,1493130791,64dd9ca2198a720c2b64c629a2c5d24af13e771f
64dd9ca2198a720c2b64c629a2c5d24af13e771f,64dd9ca2,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493130225,1493130225,"9a0a73f33c474be562b7e6a1cf670d4dcb44b542,84f91eaf2964f26ed204665d601a4d5fa18ca433"
b094b707fea1a2f6b47755782c98b54bde6bcd49,b094b707,Prevent possible crash when checking location perms in NearbyFragment,"Prevent possible crash when checking location perms in NearbyFragment

Prevents a possible crash when the Activity is destroyed before the
permission check is performed.  Instead, we'll pass in the Application
instance, which makes sense because permissions are application-level.

https://rink.hockeyapp.net/manage/apps/226650/app_versions/94/crash_reasons/166569298

Change-Id: I128934731a9488ccf0ae5d2299a1098b4bfb8e47
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1493129044,1493129198,bc1cceb6780b901231da4c202c9712448d089c82
84f91eaf2964f26ed204665d601a4d5fa18ca433,84f91eaf,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Note: manually fixed strings-as/R.string.multi_select_items_selected

Change-Id: I14b0cd4604246f871c6717cca476c3f9210911b0
",,,,Translation updater bot,l10n-bot@translatewiki.net,Dmitry Brant,dbrant@wikimedia.org,1493057086,1493128970,3f9526128ac78458b83938baee541ed9f72e921f
9a0a73f33c474be562b7e6a1cf670d4dcb44b542,9a0a73f3,Fix: prevent possible crash when invoking search.,"Fix: prevent possible crash when invoking search.

Bug: T163755
Change-Id: If0be1cb6f12ff142333ba907cbaf285afe9cca31
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1493128791,1493128791,bc1cceb6780b901231da4c202c9712448d089c82
0d6cb906481ca7b4fa318566e2ac1929f71447cb,0d6cb906,Don't prevent SavedPageSyncService from running when offline,"Don't prevent SavedPageSyncService from running when offline

Currently we stop the SavedPageSyncService from running when the device
is offline.  With the new caching setup, this is no longer always what we
want; it may well be the case that the content the user wants to save is
in the net cache and available for persisting in the save cache.  So, this
removes the check for online status.

This also allows the service to perform deletes while offline, which were
also prevented while offline before as a side effect of the check.

Hygiene: Removes the now-unused DeviceUtil.isOnline() method.

Bug: T162270
Change-Id: If98f58fe08324c195aec890d5f3cb976d08870a3
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1492048477,1493128125,861fd4019c4904e24b685284aa80447dbffcfa27
861fd4019c4904e24b685284aa80447dbffcfa27,861fd401,Stop thrashing on page save failure and save on subsequent runs,"Stop thrashing on page save failure and save on subsequent runs

Stops relying on a ContentObserver to trigger the saved page sync service.
This isn't viable because of the way the ContentObserver works and the way
the DAO works.

Instead, we'll manually kick off saved page syncing after a reading list
sync event (such as happens when the app is launched or after a page is
added to a reading list).

No more thrashing!

Also added logging for successful page saves for dev convenience.

Bug: T162894
Change-Id: I1d0bfd2e2071942f3c7ad977ae271cf78db82235
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492641905,1493071636,bc1cceb6780b901231da4c202c9712448d089c82
bc1cceb6780b901231da4c202c9712448d089c82,bc1cceb6,"Merge ""Hygiene: consolidate image widening CSS and JS in applib""","Merge ""Hygiene: consolidate image widening CSS and JS in applib""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493061134,1493061134,"3f9526128ac78458b83938baee541ed9f72e921f,7245c6ff58d6f77633fa21ca20f0b88d913d792b"
949311ace0e1b8a151f43ca646263658ae481364,949311ac,Update HockeySDK to 4.1.3,"Update HockeySDK to 4.1.3

https://github.com/bitstadium/HockeySDK-Android/releases

Bug: T145884
Change-Id: Ifea3830c15e9b9dd7399786596c10d4f636f308b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492788663,1493046096,46aad5cd2fc5fdba7b97fc28789c6dfec9298637
3f9526128ac78458b83938baee541ed9f72e921f,3f952612,"Merge ""Hygiene: remove dead saved page database code""","Merge ""Hygiene: remove dead saved page database code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1493044122,1493044122,"3fd112f730e548629c27236d21ad57330463b53b,e7a3282b94b554fddefab3add02ca2358646bbeb"
e7a3282b94b554fddefab3add02ca2358646bbeb,e7a3282b,Hygiene: remove dead saved page database code,"Hygiene: remove dead saved page database code

Remove some unused saved page database code.

Change-Id: Ia75090b3879634b3fb6eaf9f2d27b9c8c14e6d48
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1492810892,1492813307,a88d37cf8bdf5ef775e84038237e97a62ce7b010
3fd112f730e548629c27236d21ad57330463b53b,3fd112f7,Set butterknife.minSdk to minSdkVersion,"Set butterknife.minSdk to minSdkVersion

This lets butterknife know our project's minSdkVersion so it can take
advantage of newer APIs where available.

https://github.com/JakeWharton/butterknife/blob/master/
CHANGELOG.md#version-850-2017-01-23

Change-Id: I99cf91a14f3068986e7d1140cf3b433f97860769
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492811367,1492811367,efbc8f7401f5bed093bddef417f6996fbe0463bb
efbc8f7401f5bed093bddef417f6996fbe0463bb,efbc8f74,Update ButterKnife to 8.5.1,"Update ButterKnife to 8.5.1

Version 8.5.1 (2017-01-24)
* Fix: Tweak bundled ProGuard rules to only retain the two-argument
  constructor accessed via reflection.

Version 8.5.0 (2017-01-23)
* Emit @SuppressLint when using @OnTouch to avoid a lint warning.
* Migrate lint checks from Lombok AST to JetBrains PSI.
* Annotations are no longer claimed by the processor.
* Based on the minimum SDK version (as specified by butterknife.minSdk
  until http://b.android.com/187527 is released) the generated code now
  changes to use newer APIs when available.
* Generated classes now include single-argument overloads for View,
  Activity, and Dialog subclasses.
* Generated classes are no longer generic.
* Minimum supported SDK is now 9.

https://github.com/JakeWharton/butterknife/blob/master/CHANGELOG.md

Change-Id: I3f030d6fe35c3fb1e1014e8d21477ef48b93a584
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492784874,1492811141,a88d37cf8bdf5ef775e84038237e97a62ce7b010
7245c6ff58d6f77633fa21ca20f0b88d913d792b,7245c6ff,Hygiene: consolidate image widening CSS and JS in applib,"Hygiene: consolidate image widening CSS and JS in applib

- Move the common CSS and JavaScript between Android and iOS from
  MobileApp and Android into wikimedia-page-library:

  https://github.com/wikimedia/wikimedia-page-library/pull/8
  https://github.com/wikimedia/wikimedia-page-library/pull/17
  https://github.com/wikimedia/wikipedia-ios/pull/1313
  https://github.com/wikimedia/wikipedia-ios/pull/1305

- Update for CollapseTable wikimedia-page-library API change.

- Use NPM default dependency order.

Change-Id: I04a8621ca1eca700351fa81a4096b889fd0bf9ca
Depends-On: Id0a0e04907129b3eb40c468468748eb787e838f2
Bug: T159194
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1492809743,1492809825,a88d37cf8bdf5ef775e84038237e97a62ce7b010
a88d37cf8bdf5ef775e84038237e97a62ce7b010,a88d37cf,"Merge ""Bundle styles from mediawiki.skinning.content.parsoid""","Merge ""Bundle styles from mediawiki.skinning.content.parsoid""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492808993,1492808993,"15761defada8fca6cad88e7f164eb2d968c81a0f,ffd41ffe796ad20dcad383eaadd567409887f524"
15761defada8fca6cad88e7f164eb2d968c81a0f,15761def,"Merge ""Hygiene/oops: Make activities using WikiErrorView use it consistently""","Merge ""Hygiene/oops: Make activities using WikiErrorView use it consistently""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492806032,1492806032,"ce327e31cbc1b69152440e7e8776faa3894fff11,0aa1eb670ec3493f7f9914bc6b90bab909da0d35"
ce327e31cbc1b69152440e7e8776faa3894fff11,ce327e31,"Merge ""Update gson to 2.8""","Merge ""Update gson to 2.8""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492801651,1492801651,"0730d25139fc04b23f77bfbe6c998fd54e1d440b,21579dcb2b95cf248f7c9a6aa100442c2f86ec26"
0730d25139fc04b23f77bfbe6c998fd54e1d440b,0730d251,"Merge ""Set ANDROID_HOME to ""$PWD/.sdk"" for periodic tests""","Merge ""Set ANDROID_HOME to ""$PWD/.sdk"" for periodic tests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492801150,1492801150,"d1f8c18d6bc414442be7c9fc47113e0a87b86900,333715670d1afafd28efd0430ca3306f8cda752e"
21579dcb2b95cf248f7c9a6aa100442c2f86ec26,21579dcb,Update gson to 2.8,"Update gson to 2.8

Change Log:

Version 2.8.1
* New: JsonObject.keySet()

Version 2.8
* New: TypeToken.getParameterized() and TypeToken.getArray() make it easier to register or look up a TypeAdapter.
* New: @JsonAdapter(nullSafe=true) to specify that a custom type adapter handles null.

https://github.com/google/gson/blob/master/CHANGELOG.md

Change-Id: I6e4af7180842bcccc6e10a28082adebbf157df12
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492786532,1492801037,d1f8c18d6bc414442be7c9fc47113e0a87b86900
d1f8c18d6bc414442be7c9fc47113e0a87b86900,d1f8c18d,"Merge ""Update robolectric to 3.3.2""","Merge ""Update robolectric to 3.3.2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492800787,1492800787,"462dcea59727838f9ced329ede89774b682e3a67,da45b85a0ebdd2923233d1021bde0b3d3f57b275"
462dcea59727838f9ced329ede89774b682e3a67,462dcea5,"Merge ""Update PageIndicatorView to 0.1.2""","Merge ""Update PageIndicatorView to 0.1.2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492800536,1492800537,"46aad5cd2fc5fdba7b97fc28789c6dfec9298637,90cea9e850d276c399dcadd530ec7d8f263c2772"
ffd41ffe796ad20dcad383eaadd567409887f524,ffd41ffe,Bundle styles from mediawiki.skinning.content.parsoid,"Bundle styles from mediawiki.skinning.content.parsoid

Adds styles from another ResourceLoader module, mediawiki.skinning.
content.parsoid, to our bundled CSS for better output parity with pure
MediaWiki HTML.  Relevant here, this injects the expected incremented
counter when displaying external links with otherwise empty inner content.

Also adds another class, mw-body-content, to the content div in order for
the desired CSS rule to take effect.

Testing note: Please test with a local MCS or appservice.wmflabs.org as
this requires a change recently merged to mobileapps master but not yet
deployed to production.

Bug: T162116
Change-Id: I8cd87c97181b385c21b466e275f0a5785cea96db
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1491414565,1492798948,46aad5cd2fc5fdba7b97fc28789c6dfec9298637
da45b85a0ebdd2923233d1021bde0b3d3f57b275,da45b85a,Update robolectric to 3.3.2,"Update robolectric to 3.3.2

Features:
* Initial support for Android O runtime [issue #2988].

Bug Fixes:
* Fix issues with PackageManager simulation: addPackage() should not create
  sessions [issues #2984 and #2950].
* Fix deadlock caused by synchronicity of Scheduler [issues #2115, #1043,
  and #2982].
* Fix NoClassDefFoundError: javax/microedition/khronos/opengles/GL [issues
  #2960 and #1932].
* Fixed: instrumentation fails for abstract subclasses of framework classes
  [issue #2951 and #2983].

Misc:
* Switch from VTD to StAX for parsing resource xml; resolves licensing
  issue and reduces resource parsing time by about 60% [issues #2964,
  #2865, and #1414].
* Clean up temp dirs left behind after test runs.

https://github.com/robolectric/robolectric/releases

Change-Id: I0f49c3bb96ab3bec2114c9f7bab22707aea06be8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492796895,1492796895,46aad5cd2fc5fdba7b97fc28789c6dfec9298637
46aad5cd2fc5fdba7b97fc28789c6dfec9298637,46aad5cd,Bump versionCode,"Bump versionCode

Change-Id: I368af357936d6ef26d1b994f4fff555f3735f318
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1492788109,1492788122,522666147167d5503e2fff2e15e1965eb8bfcba2
90cea9e850d276c399dcadd530ec7d8f263c2772,90cea9e8,Update PageIndicatorView to 0.1.2,"Update PageIndicatorView to 0.1.2

Release notes report some stability improvements since 0.8.

https://github.com/romandanylyk/PageIndicatorView/releases

Change-Id: I81131ceced5b822f076e70e1592cfafdb71cfa3c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492786297,1492788122,c868ee962d72da712e5c6ceb960b59809d25e452
333715670d1afafd28efd0430ca3306f8cda752e,33371567,"Set ANDROID_HOME to ""$PWD/.sdk"" for periodic tests","Set ANDROID_HOME to ""$PWD/.sdk"" for periodic tests

This is happening for our ordinary CI tests but not for the periodic
suite.

Needs to happen so that the required licenses can be found in order to
install the SDK.

Change-Id: I9ff169cae2bdcc9e23fbfa5d4fb696bbea3da5e4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492785453,1492785453,c868ee962d72da712e5c6ceb960b59809d25e452
0aa1eb670ec3493f7f9914bc6b90bab909da0d35,0aa1eb67,Hygiene/oops: Make activities using WikiErrorView use it consistently,"Hygiene/oops: Make activities using WikiErrorView use it consistently

Removes stray old-style error displays from activities now using
WikiErrorView.

Change-Id: Ie6e9805de811aa35bdf78312d3e3fb0bb711605b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492720500,1492720960,c868ee962d72da712e5c6ceb960b59809d25e452
522666147167d5503e2fff2e15e1965eb8bfcba2,52266614,Crash fix: Remove reliance on a Context to detect a 404,"Crash fix: Remove reliance on a Context to detect a 404

This should fix the top crash from the 4/19 beta:

https://rink.hockeyapp.net/manage/apps/226650/app_versions/93/crash_reasons/165970817

Updates ThrowableUtil.is404 to drop its alternate branch which draws upon
ThrowableUtil.getAppError.  404s are only expected in the context of
missing pages or summaries for them, both of which we get with Retrofit,
not java-mwapi.  Retrofit throws HttpStatusExceptions, which we don't
need a Context to check.  If we get 404s from the MediaWiki API (as
opposed to the expected 200s with error messages), we've got bigger
problems, and in any case, java-mwapi will be gone Real Soon Now (TM).

Perhaps more controversially, deprecates getAppError and its supporting
methods as well as the AppError class itself.  Our philsophy around user
error messages has shifted since this code was written in favor of
standard, predefined error views. Using these legacy methods requires
passing in a Context, which can be hazardous.  Further, they're already
nearly unused.

Change-Id: I53c944b2b96ac2ca9e36191b582fb13d5f5c2455
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492718306,1492719067,c868ee962d72da712e5c6ceb960b59809d25e452
c868ee962d72da712e5c6ceb960b59809d25e452,c868ee96,"Merge ""Chore: update styles""","Merge ""Chore: update styles""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492706275,1492706275,"90b06c8081d340e503059fff5356dbfa70df2387,6b5aa23e5eb8cd5654b05d44538679880affd24f"
90b06c8081d340e503059fff5356dbfa70df2387,90b06c80,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492705988,1492705988,"80e11e931e1e77e4c3eeacf6b6b983d5958ffbee,f2d8336660470463a61087f272baaaa4ea24a6d2"
80e11e931e1e77e4c3eeacf6b6b983d5958ffbee,80e11e93,"Merge ""Recognize SocketTimeoutException as an offline error""","Merge ""Recognize SocketTimeoutException as an offline error""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492704592,1492704592,"4ef942c9e514351d0dfebf08776599c2e4875d05,46f28b88354c554841c67ce8bc1d9a377892e037"
4ef942c9e514351d0dfebf08776599c2e4875d05,4ef942c9,"Merge ""Fix: Update error handling to handle new cache responses""","Merge ""Fix: Update error handling to handle new cache responses""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492704341,1492704341,"02995e711af467dd0c4330c9aeedda0290470b63,561a8e40a5994b63856e0a5f422d655b3f0069ae"
02995e711af467dd0c4330c9aeedda0290470b63,02995e71,"Merge ""Upload user options only when they're modified.""","Merge ""Upload user options only when they're modified.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492704056,1492704056,"6df585b7e8d599e06278d0a962988aa9c73c793b,cc07e3ffff18a0b16cbe7aa57f399927ddcd06ad"
6df585b7e8d599e06278d0a962988aa9c73c793b,6df585b7,"Merge ""Fix WikiErrorView display in the gallery""","Merge ""Fix WikiErrorView display in the gallery""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492703794,1492703794,"1d0031ae231a7772437978ad6e4afb271615155a,f25641fde83d02c134027f7831aea8eb1918c8c8"
1d0031ae231a7772437978ad6e4afb271615155a,1d0031ae,"Merge ""Fix WikiErrorView display in CreateAccountActivity""","Merge ""Fix WikiErrorView display in CreateAccountActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492703522,1492703522,"0dda97793361d5b733bbec51540d966d23091e63,364f4f5c6c947db2a44395e1168df3ca12c15c6b"
0dda97793361d5b733bbec51540d966d23091e63,0dda9779,"Merge ""Fix WikiErrorView display in EditSectionActivity""","Merge ""Fix WikiErrorView display in EditSectionActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492703246,1492703246,"e5f08134b33c7ce92e49f87727d7b5e46f60a4fb,827b021b0958704e2113aa9d1ac1cccbe8b55f44"
f2d8336660470463a61087f272baaaa4ea24a6d2,f2d83366,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I0049336499581a2710145efd40f8b31b839030bd
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1492667213,1492667213,e5f08134b33c7ce92e49f87727d7b5e46f60a4fb
6b5aa23e5eb8cd5654b05d44538679880affd24f,6b5aa23e,Chore: update styles,"Chore: update styles

Update styles for I04d210c01328ec77a44c9a4617b69a1d34715b20.

Change-Id: Iea5731ace9d81a1ed9c3f64d96d126f434b7308d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1492644194,1492644215,e5f08134b33c7ce92e49f87727d7b5e46f60a4fb
827b021b0958704e2113aa9d1ac1cccbe8b55f44,827b021b,Fix WikiErrorView display in EditSectionActivity,"Fix WikiErrorView display in EditSectionActivity

This was broken by layout updates to accommodate the needs of PageActivity.

Bug: T157361
Change-Id: I97ac9cdb061d0617b9ab925714803f4dc6549665
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492621025,1492621025,7dfd5c0214e71e0d0a1f6cb42926d20956a25e8e
e5f08134b33c7ce92e49f87727d7b5e46f60a4fb,e5f08134,"Merge ""Fix WikiErrorView display in LoginActivity""","Merge ""Fix WikiErrorView display in LoginActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492620647,1492620647,"18e565e3569590ac86f64172326180b7e8a93818,636691667842855fe56057b329af7dbb8c1def1f"
18e565e3569590ac86f64172326180b7e8a93818,18e565e3,"Merge ""Hygiene: Change README back to markdown""","Merge ""Hygiene: Change README back to markdown""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492620389,1492620389,"7dfd5c0214e71e0d0a1f6cb42926d20956a25e8e,238090c02770cea9029fae173c927dec20c6f5cf"
7dfd5c0214e71e0d0a1f6cb42926d20956a25e8e,7dfd5c02,"Merge ""Explicitly declare which user options are synchronized.""","Merge ""Explicitly declare which user options are synchronized.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492620077,1492620077,"8595a080d0ed896eabcfc8c1e9491d6a26cdc67a,93bb8e07d270dfd3eaa2a992745c193a5f4f0d45"
364f4f5c6c947db2a44395e1168df3ca12c15c6b,364f4f5c,Fix WikiErrorView display in CreateAccountActivity,"Fix WikiErrorView display in CreateAccountActivity

This was broken by layout updates to accommodate the needs of PageActivity.

Bug: T157361
Change-Id: Ibabdc2c936670f43a7d48247aef807a1cff66d28
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492619933,1492619933,8595a080d0ed896eabcfc8c1e9491d6a26cdc67a
636691667842855fe56057b329af7dbb8c1def1f,63669166,Fix WikiErrorView display in LoginActivity,"Fix WikiErrorView display in LoginActivity

This was broken by layout updates to accommodate the needs of PageActivity.

Bug: T157361
Change-Id: I13163ab0906a058b4ed993f0301f5df97677573f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492619712,1492619712,8595a080d0ed896eabcfc8c1e9491d6a26cdc67a
f25641fde83d02c134027f7831aea8eb1918c8c8,f25641fd,Fix WikiErrorView display in the gallery,"Fix WikiErrorView display in the gallery

This was broken by layout updates to accommodate the needs of PageActivity.

Bug: T157361
Change-Id: I21eaf3a8223e0f90dc3e5ec36a271092e84a0291
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492619363,1492619363,8595a080d0ed896eabcfc8c1e9491d6a26cdc67a
8595a080d0ed896eabcfc8c1e9491d6a26cdc67a,8595a080,Bump versionCode,"Bump versionCode

Change-Id: I987c74c46f97a86e1bb3dbeed4f53d5b8bcf919c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1492616050,1492616070,26b685d761a0e892152e59b6ea6d30dfe0eff3c8
26b685d761a0e892152e59b6ea6d30dfe0eff3c8,26b685d7,"Merge ""Fix: remove hardware feature requirements""","Merge ""Fix: remove hardware feature requirements""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492610932,1492610932,"c252e1d4ac589f88c17b5a4c520dc1e45800da9b,d98646e2194e4ca7fe9d19378187ce57d1d1cadf"
c252e1d4ac589f88c17b5a4c520dc1e45800da9b,c252e1d4,"Merge ""Revert: add alternate casing for device feature requirements""","Merge ""Revert: add alternate casing for device feature requirements""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492609717,1492609717,"96b362183bedfe8a9003c13cfaf0f41c4f80af48,3ecf309faf8b583924499f886441e9874713e316"
46f28b88354c554841c67ce8bc1d9a377892e037,46f28b88,Recognize SocketTimeoutException as an offline error,"Recognize SocketTimeoutException as an offline error

Some devices attempt to connect and throw a SocketTimeoutException rather
than immediately returning an UnknownHostException.  Add this to the list
to check in ThrowableUtil.isOffline.

Change-Id: I4f4568e8579e271418ec40de1b48ec2ddb589221
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492555447,1492555447,561a8e40a5994b63856e0a5f422d655b3f0069ae
561a8e40a5994b63856e0a5f422d655b3f0069ae,561a8e40,Fix: Update error handling to handle new cache responses,"Fix: Update error handling to handle new cache responses

Minor fix so that missing pages (404s) are once again detected correctly.

Bug: T161008
Change-Id: I502dbd46489621ffde904a3fc487c8be5a37351e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492553798,1492554479,96b362183bedfe8a9003c13cfaf0f41c4f80af48
d98646e2194e4ca7fe9d19378187ce57d1d1cadf,d98646e2,Fix: remove hardware feature requirements,"Fix: remove hardware feature requirements

Forcefully remove unnecessary hardware requirements. Previously, the log
file, app/build/outputs/logs/manifest-merger-dev-debug-report.txt, would
show*:

  ADDED from /home/stephen/Desktop/wikipedia/app/src/main/AndroidManifest.xml:35:5-87
  MERGED from [com.mapzen.android:lost:2.1.2] /home/stephen/.android/build-cache/9ceaebdefe79b93c3000b583d40901838bcdedd4/output/AndroidManifest.xml:12:5-62
	  android:required
		  ADDED from /home/stephen/Desktop/wikipedia/app/src/main/AndroidManifest.xml:35:60-84
  		MERGED from /home/stephen/Desktop/wikipedia/app/src/custom/AndroidManifest.xml
	  android:name
		  ADDED from /home/stephen/Desktop/wikipedia/app/src/main/

Then with tools:node=""remove"":

  uses-feature#android.hardware.location
  ADDED from /home/stephen/dev/wmf/wikipedia-android/app/src/main/AndroidManifest.xml:35:5-107
  REJECTED from [com.mapzen.android:lost:2.1.2] /home/stephen/.android/build-cache/9ceaebdefe79b93c3000b583d40901838bcdedd4/output/AndroidManifest.xml:12:5-62
    tools:node
      ADDED from /home/stephen/dev/wmf/wikipedia-android/app/src/main/AndroidManifest.xml:35:60-79
    android:required
      ADDED from /home/stephen/dev/wmf/wikipedia-android/app/src/main/AndroidManifest.xml:35:80-104
    android:name
      ADDED from /home/stephen/dev/wmf/wikipedia-android/app/src/main/AndroidManifest.xml:35:19-59

But that didn't seem to actually work even though the report appeared
correct. After this patch (with tools:node=""replace""):

  uses-feature#android.hardware.location
  ADDED from /home/stephen/dev/wmf/wikipedia-android/app/src/main/AndroidManifest.xml:36:5-108
  REJECTED from [com.mapzen.android:lost:2.1.2] /home/stephen/.android/build-cache/9ceaebdefe79b93c3000b583d40901838bcdedd4/output/AndroidManifest.xml:12:5-62
    tools:node
      ADDED from /home/stephen/dev/wmf/wikipedia-android/app/src/main/AndroidManifest.xml:36:60-80
    android:required
      ADDED from /home/stephen/dev/wmf/wikipedia-android/app/src/main/AndroidManifest.xml:36:81-105
    android:name
      ADDED from /home/stephen/dev/wmf/wikipedia-android/app/src/main/AndroidManifest.xml:36:19-59

*Paths differ some due to different build locations.

This patch also enables strict mode to require manual resolution of
conflicts in the future.

More on manifest merger: https://developer.android.com/studio/build/manifest-merge.html
Upstream change: https://github.com/mapzen/lost/commit/b59880df7bd91d193206c268253e704d313aae63

Change-Id: I186d9ed9dbee3c38008e7ecd5b0763a19719b4b2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1492547571,1492553357,3ecf309faf8b583924499f886441e9874713e316
3ecf309faf8b583924499f886441e9874713e316,3ecf309f,Revert: add alternate casing for device feature requirements,"Revert: add alternate casing for device feature requirements

This reverts commit b395f6bb2f9e31633fb2e946ad1ba58d87538c07 which
didn't work.

Change-Id: I4dc67e3c771abed1156ac2479350955a1946cffd
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1492547282,1492553349,b395f6bb2f9e31633fb2e946ad1ba58d87538c07
cc07e3ffff18a0b16cbe7aa57f399927ddcd06ad,cc07e3ff,Upload user options only when they're modified.,"Upload user options only when they're modified.

Looking closely at logcat, I noticed that we were always uploading user
options unconditionally every time they were synced. This would send
an unnecessary POST request for every option, whenever a sync is
requested.

This patch updates the logic so that each option is POSTed only if it's
not yet marked as synchronized in the db.

Change-Id: Ia317dafb1c04df741f0087b9d465c8b1601d8c34
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1492547226,1492547226,9a8bc889e5d2692743db64977824413ab42d06c3
96b362183bedfe8a9003c13cfaf0f41c4f80af48,96b36218,Bump versionCode,"Bump versionCode

Change-Id: I673c654ed0b329887d412f3056192d3e9e43ebce
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1492545209,1492545224,b395f6bb2f9e31633fb2e946ad1ba58d87538c07
b395f6bb2f9e31633fb2e946ad1ba58d87538c07,b395f6bb,Fix: add alternate casing for device feature requirements,"Fix: add alternate casing for device feature requirements

The app and Mapbox SDK's[0] AndroidManifests correctly mark the
following features optional:

- android.hardware.location
- android.hardware.location.gps
- android.hardware.wifi

The casing matches the documentation[1] but the Google Play Developer
Console is reporting that the following new features have been added:

- android.hardware.LOCATION
- android.hardware.location.GPS
- android.hardware.WIFI

It's not clear if these features are respecting the optional flag but
the number of devices supported is now far fewer. This patch adds
additional redundant uses-feature nodes that match the casing used in
the Console. This patch should be reverted if it does not fix the
complaint. However, other users appear to be experiencing similar
issues.[2]

[0] https://github.com/mapbox/mapbox-gl-native/blob/62ea1f21858c69f6921c775ba7a3de201f0514d8/platform/android/MapboxGLAndroidSDK/src/main/AndroidManifest.xml#L5
[1] https://developer.android.com/guide/topics/manifest/uses-feature-element.html
[2] http://stackoverflow.com/questions/14299956/i-set-uses-feature-androidrequired-false-but-google-play-keeps-insisting-on-t

Change-Id: Ib9f21dab6ac2e84a39e502f47732739ea2563af2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1492541855,1492542267,9a8bc889e5d2692743db64977824413ab42d06c3
9a8bc889e5d2692743db64977824413ab42d06c3,9a8bc889,"Merge ""Fix: prevent possible internal exception when fetching user options.""","Merge ""Fix: prevent possible internal exception when fetching user options.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492529207,1492529207,"8c8d081b5c85b214a43ee2145f71c49ae7a8f25d,c0ae320b2f38880bcb70c42a897af428578ed729"
93bb8e07d270dfd3eaa2a992745c193a5f4f0d45,93bb8e07,Explicitly declare which user options are synchronized.,"Explicitly declare which user options are synchronized.

This patch adds an explicit list that declares which userjs options are
synchronized to the user's account.

We've recently introduced a reading list synchronizer which uses a userjs
option for its own synchronization. But the thing is, our general
UserOption sync adapter reads *all* options that start with ""userjs"" and
upserts them into our database. This means that we'll have a duplicate
serialized reading list userjs option living in the database unnecessarily.

This patch simply limits which options are stored in the db (to the ones
we actually care about). This will prevent reading lists, as well as other
userjs cruft from unrelated MediaWiki gadgets and extensions, from being
stored in our local db.

Note: for good measure, I recommend clearing app preferences when
testing/merging this.

Change-Id: Id3fd417eed49b13fab0faf84eda1fe350eafc4d7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1492525760,1492528655,b1497f509861475ec3f3f6fe8736fbca1c5c4f4f
c0ae320b2f38880bcb70c42a897af428578ed729,c0ae320b,Fix: prevent possible internal exception when fetching user options.,"Fix: prevent possible internal exception when fetching user options.

Lately, in logcat, I've been noticing some exceptions of the following
form:

java.lang.NumberFormatException: For input string: ""0.0""
at java.lang.Integer.parseInt(Integer.java:521)
at java.lang.Integer.valueOf(Integer.java:611)
at org.wikipedia.useroption.database.UserOptionDao$2.onFinish(UserOptionDao.java:60)

(This is when we're fetching the fontSize preference)
So then, this is implying that even though we upload the preference as an
integer, the server can send it back as a float (?)
Therefore we need to account for this condition when parsing the option
string.

Change-Id: Ifdfff62ccd566b619f12e925795b5b5ea650fd4e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1492522880,1492523495,b1497f509861475ec3f3f6fe8736fbca1c5c4f4f
8c8d081b5c85b214a43ee2145f71c49ae7a8f25d,8c8d081b,Fix: Prevent possible crash in LinkPreviewDialog.,"Fix: Prevent possible crash in LinkPreviewDialog.

Bug: T162986
Change-Id: I9d3244e99553154b6a26623af7205ce570bf0f9e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1492521269,1492521269,b1497f509861475ec3f3f6fe8736fbca1c5c4f4f
238090c02770cea9029fae173c927dec20c6f5cf,238090c0,Hygiene: Change README back to markdown,"Hygiene: Change README back to markdown

Phabricator is our canonical project home, and its native README
viewer understands markdown but not wikitext.  This changes the
README back to markdown.

Change-Id: I8b0aeefcc27cfdc1d32d7d6dd3cb3234cd7fbe85
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492520499,1492520499,b1497f509861475ec3f3f6fe8736fbca1c5c4f4f
b1497f509861475ec3f3f6fe8736fbca1c5c4f4f,b1497f50,"Merge ""Fix: update feedAdapter and reading lists from main thread only.""","Merge ""Fix: update feedAdapter and reading lists from main thread only.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492468299,1492468299,"8cafceee1407ece8c47430d8e61f583e0acc6ae3,dab07917b165a7448db1a3d36c09145459680bbd"
dab07917b165a7448db1a3d36c09145459680bbd,dab07917,Fix: update feedAdapter and reading lists from main thread only.,"Fix: update feedAdapter and reading lists from main thread only.

This patch makes sure that we instantiate ReadingListPageObserver within
onCreate(), and give it a Handler that is tied to the UI thread of the
app, so that any onChange() callbacks that come from the observer happen
on the main thread.

Change-Id: I70be3de457995edef0e4db548a4a7b532dcd711f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1492092443,1492457830,9ded4c062e20f1753a1372506893b53a9e6b46d5
8cafceee1407ece8c47430d8e61f583e0acc6ae3,8cafceee,Put syncing of reading lists behind feature flag for now.,"Put syncing of reading lists behind feature flag for now.

This will make it available only for pre-beta builds, since there are
several concerns to be addressed prior to releasing it to beta and
production, e.g.:

- Whether it properly adheres to privacy/legal guidelines.
- We'll likely need an onboarding screen and possibly an opt-in/out
  screen.
- Still need to finish fleshing out its behavior when multiple users log
  into the app.

Change-Id: Ice4cdb7d7636c1ee03fb9c8d17baa962a98ed622
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1492447777,1492447777,9ded4c062e20f1753a1372506893b53a9e6b46d5
9ded4c062e20f1753a1372506893b53a9e6b46d5,9ded4c06,"Merge ""Synchronize reading lists to user's account.""","Merge ""Synchronize reading lists to user's account.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492446732,1492446732,"0ede6ae1efac60fae6907c6faf2904e524494366,b4c2682ccbae47c3d551e7b005d4210f0b0fb18a"
0ede6ae1efac60fae6907c6faf2904e524494366,0ede6ae1,"Merge ""[Oops] Update link preview offline icon""","Merge ""[Oops] Update link preview offline icon""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492443638,1492443638,"71df5a4a323348e6036718a6dfdf84d97c0067e8,bdba2257bc890dae295b3f6d9dea01042a45ad50"
bdba2257bc890dae295b3f6d9dea01042a45ad50,bdba2257,[Oops] Update link preview offline icon,"[Oops] Update link preview offline icon

Link previews and error views in page fragments get a special ""no
article"" icon when offline (and the article is not found in cache).

The link preview got reverted to using the standard ""no connection""
icon at some point; this puts it back.

Bug: T156084
Change-Id: Iaef3797deef21869dbc22b60acb43c632b50bb10
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1492442193,1492442193,8f5d5d87542b7ab51e9a1a5b9e68cc609a97032a
71df5a4a323348e6036718a6dfdf84d97c0067e8,71df5a4a,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I67406c32b4571af1c0e3f046bb974067d11528a5
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1492415181,1492415181,8f5d5d87542b7ab51e9a1a5b9e68cc609a97032a
b4c2682ccbae47c3d551e7b005d4210f0b0fb18a,b4c2682c,Synchronize reading lists to user's account.,"Synchronize reading lists to user's account.

This synchronizes the logged-in user's reading lists to their
account using userjs options. This can effectively serve as a stopgap
measure until we have access to an authenticated API that is better than
userjs options, in the sense that they don't get passed with every
pageview when browsing in mobile web/desktop.

This patch aims to make it simple to switch out the backend storage API
for sending/receiving the remote set of lists, while keeping the same
structure for serializing the lists for storage.

The serialized structure itself is basically a minimization of what it
takes to construct a list. Crucially, the structure contains a `rev`
parameter that the client uses to determine whether its local state is out
of sync with the server.

This patch includes a hard-coded limit on the number of lists/pages that
can be synchronized, so that the user's userjs options don't grow out of
control.

TODO: Onboard the user that it's necessary to log in to their account for
their reading lists to be synced.

TODO: Hint to the user that only the first X pages/list will be synced.

Bug: T120107
Bug: T127702
Bug: T162763
Change-Id: I707d8855742edf2b27fca26020e59c6a58dd81f3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1491879542,1492091190,eee06fd2ddc3725d86778dec843499c7b863b4fa
8f5d5d87542b7ab51e9a1a5b9e68cc609a97032a,8f5d5d87,Retrofit PageImagesTask,"Retrofit PageImagesTask

Port PageImagesTask to retrofit & try to stay as consistent as possible with the existing code.

Bug: T152407
Change-Id: I3d9cb3c111f92e5dcb395814c4962dbf60a45caf
",,,,drommk,eric.palle.tech@gmail.com,Michael Holloway,mholloway@wikimedia.org,1491746908,1492023787,eee06fd2ddc3725d86778dec843499c7b863b4fa
eee06fd2ddc3725d86778dec843499c7b863b4fa,eee06fd2,"Merge ""Set page to be available offline when adding to another reading list""","Merge ""Set page to be available offline when adding to another reading list""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492015726,1492015726,"3583e850c566d6da4530dc134bdb9b4d5c070c24,160ed2634eed633a2c4f77d87fe088b54876d69d"
3583e850c566d6da4530dc134bdb9b4d5c070c24,3583e850,"Merge ""Fix: Properly maintain selection state of bottom nav.""","Merge ""Fix: Properly maintain selection state of bottom nav.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492013535,1492013535,"1920adc764b330092a3eb289a4b3a204e357a472,9eeeaf556a315cee274978e4bed527add1483d8d"
9eeeaf556a315cee274978e4bed527add1483d8d,9eeeaf55,Fix: Properly maintain selection state of bottom nav.,"Fix: Properly maintain selection state of bottom nav.

When we populate the bottom navigation bar with our tab items, we weren't
properly setting the IDs of each item. This was having the effect of the
bottom navigation bar ""forgetting"" its state across savedInstanceStates.

This patch correctly sets the item IDs, and simplifies some additional
code.

Bug: T162011
Change-Id: I1519d90ba5c93da007ab634108ca8542d3ac6738
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1492005335,1492005335,bef0f9ab302dcb29ba1c67fbced2de651881afef
1920adc764b330092a3eb289a4b3a204e357a472,1920adc7,"Merge ""Hygiene: Move ReadingListPageObserver to org.wikipedia.readinglist.page""","Merge ""Hygiene: Move ReadingListPageObserver to org.wikipedia.readinglist.page""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1492002638,1492002638,"a9c2506ba1d198d8cdcac1a66ebb86e7e7af0211,ad804a3c8bb6a9a02f057040f024eafecc81c0c0"
160ed2634eed633a2c4f77d87fe088b54876d69d,160ed263,Set page to be available offline when adding to another reading list,"Set page to be available offline when adding to another reading list

Also, ensure that if a ReadingListFragment exists but is not active, the
offline availability icons are correctly updated.

Bug: T162270
Change-Id: I9bc3b71b9d275fba37b1227427e58703cbac3842
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1491933079,1491953415,ad804a3c8bb6a9a02f057040f024eafecc81c0c0
a9c2506ba1d198d8cdcac1a66ebb86e7e7af0211,a9c2506b,"Merge ""Refactor and generalize fetching of CSRF tokens.""","Merge ""Refactor and generalize fetching of CSRF tokens.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491942354,1491942354,"456e15ab3d6e52a5d7a8b38dcc0589a8e61cae6f,adcb4ad412cbdedbac3a4d37411da0d703db4bd6"
adcb4ad412cbdedbac3a4d37411da0d703db4bd6,adcb4ad4,Refactor and generalize fetching of CSRF tokens.,"Refactor and generalize fetching of CSRF tokens.

It's about time that all of our POST requests received their CSRF token
from a common client.

- This updates CsrfTokenClient to be a totally general and self-contained
  client for providing a CSRF token for anyone who needs it. The client
  will automatically re-login the user if it detects that the server
  doesn't believe we're logged in.
- Hook up CsrfTokenClient everywhere it should be used, including:
  - Editing.
  - Description editing.
  - Storing user-js options.
  - Marking notifications as read.
- Abolish CsrfTokenStorage. Since we're always fetching a new token every
  time we perform any kind of POST action, we don't need to persist these
  tokens anymore.
- Introduce a few instrumented tests of CsrfTokenClient, communicating
  with testwiki.

Change-Id: I79010fd23901db7f329d9516e8cc278409e3f643
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1491858345,1491941542,bef0f9ab302dcb29ba1c67fbced2de651881afef
456e15ab3d6e52a5d7a8b38dcc0589a8e61cae6f,456e15ab,"Merge ""Improve logic to remove articles from reading lists.""","Merge ""Improve logic to remove articles from reading lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491938577,1491938577,"bef0f9ab302dcb29ba1c67fbced2de651881afef,94144ba8134378d5f404dde635e7065f88dea61e"
ad804a3c8bb6a9a02f057040f024eafecc81c0c0,ad804a3c,Hygiene: Move ReadingListPageObserver to org.wikipedia.readinglist.page,"Hygiene: Move ReadingListPageObserver to org.wikipedia.readinglist.page

Change-Id: Ia3ae3fd0d152bdf8eeafcd91dd4beb9cfd587f20
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1491935968,1491935968,bef0f9ab302dcb29ba1c67fbced2de651881afef
94144ba8134378d5f404dde635e7065f88dea61e,94144ba8,Improve logic to remove articles from reading lists.,"Improve logic to remove articles from reading lists.

This enhances the ""bookmark"" button when browsing an article to have a
dual function:
- When the article is not part of a reading list, we invoke the AddToList
  dialog as before.
- When the article is part of one or more reading lists, we now show a
  popup menu which allows the user to add the article to another reading
  list, or remove the article from one or more lists that contain it.
- If the article is a member of just one list, it is removed
  automatically.
- If the article is a member of two or more lists, a popup dialog is
  shown, allowing the user to select the lists from which it will be
  removed.
- This also applies the new functionality to the bookmark button under the
  Featured Article card.

TODO in a future patch: generalize this functionality to other feed cards,
and long-press menus of links appearing on pages.

Bug: T142027
Change-Id: Ifadf3a226993fdef2342261b970bbad6d6a4f05b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489161056,1491932574,3dd74068884c52b0f516b05b08374f310ecdb17c
bef0f9ab302dcb29ba1c67fbced2de651881afef,bef0f9ab,Hyginee: remove dead code in PageImageDatabaseTable,"Hyginee: remove dead code in PageImageDatabaseTable

Change-Id: Id1d4101c93442708207f61dc0a6f44630b47048c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1491861684,1491861684,1e659483346e5204032131e49fb1481b0ad62cdf
1e659483346e5204032131e49fb1481b0ad62cdf,1e659483,Design tweaks to individual reading list screen.,"Design tweaks to individual reading list screen.

- Use roboto-medium for list title font.
- Decrease text size for article count (also applies to reading list items
  when listed in the main screen).
- Remove 0.5dp border between thumbnail items in the header.
- Darken gradient scrim at the top.

Bug: T156073
Bug: T159719
Change-Id: Iae9f27bbe615e3a60c5d367f389390e3551062a4
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1491572568,1491857174,b5b409d8cc16e96ef97a00bdccbbda36bd401aa7
b5b409d8cc16e96ef97a00bdccbbda36bd401aa7,b5b409d8,Design tweaks to reading lists screen.,"Design tweaks to reading lists screen.

- This tweaks our image-placeholder drawable to be able to be scalable to
  fit the multiple purposes that it serves, whether it's a placeholder for
  a page list item that doesn't have a thumbnail, or a reading list matrix
  component (that doesn't have a thumbnail).
- Fix showing placeholder image for items in full-screen reading list
  header.
- Tweak margins of text fields.

Bug: T156007
Change-Id: I18f903dd0ee725d7fb4139c15da5621008228cd7
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1491571169,1491857159,4101ddcc7970b5fd0c9ae6836040e300e9449cb7
4101ddcc7970b5fd0c9ae6836040e300e9449cb7,4101ddcc,Hide reading list thumbnail header when initiating search.,"Hide reading list thumbnail header when initiating search.

Bug: T156086
Change-Id: If47493750ab0b88d3701a79aa17eb715e8101a6f
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1491568169,1491857142,47eff05a8c392f01f9099d16e9504e23e6bc7068
47eff05a8c392f01f9099d16e9504e23e6bc7068,47eff05a,Improve message shown by Random card when offline.,"Improve message shown by Random card when offline.

When the device is offline, and the user doesn't have any articles in
reading lists, the Random card currently shows ""Unknown error occurred"".
This patch makes it show ""Cannot connect to the internet.""

Bug: T157377
Change-Id: Ic14fe4e899889c8e82f76cc8035113ce4fd28384
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1491567213,1491856714,9ef35c1d7dbad1a9e4faa15a8318a531c390b503
9ef35c1d7dbad1a9e4faa15a8318a531c390b503,9ef35c1d,"Merge ""Design tweaks to add-to-reading-list dialog.""","Merge ""Design tweaks to add-to-reading-list dialog.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491856628,1491856628,"843f02365af6c155e9b1093c998bce751dc9aea8,f8e67d0d7a67479796a54e13031d0544bb89b94e"
843f02365af6c155e9b1093c998bce751dc9aea8,843f0236,"Merge ""Cleanup / design tweak: lighten bottom sheet background color.""","Merge ""Cleanup / design tweak: lighten bottom sheet background color.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491856612,1491856612,"841738bf280c9c98d5f7c929b6a6b8e4939b4938,7fd4a7c122906f168c9fb1acc5835699a0250966"
841738bf280c9c98d5f7c929b6a6b8e4939b4938,841738bf,"Merge ""Hygiene: remove unused string resources""","Merge ""Hygiene: remove unused string resources""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491849555,1491849555,"e38c648f573188c3d99a490d551b28bc200cb5e6,3d0b1f3551a28fbae4536e3256b452cdc0d67a81"
e38c648f573188c3d99a490d551b28bc200cb5e6,e38c648f,"Merge ""Link preview error view design updates""","Merge ""Link preview error view design updates""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491838414,1491838414,"8886c06379432a0de2405e68d74e461f0984a0d7,89c913bf50524ed5cf35d92dd3d529ee365a007c"
3d0b1f3551a28fbae4536e3256b452cdc0d67a81,3d0b1f35,Hygiene: remove unused string resources,"Hygiene: remove unused string resources

Change-Id: Ibc534fa03fc096140a559413873fb50c31fe7266
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1491837860,1491837860,8886c06379432a0de2405e68d74e461f0984a0d7
89c913bf50524ed5cf35d92dd3d529ee365a007c,89c913bf,Link preview error view design updates,"Link preview error view design updates

Bug: T156084
Change-Id: I7e14ab1b5696c7bc516861ef12f0d8f72c764eb0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1491597208,1491833015,ccae1e30eb45e0827bf6212d03e5b5f1e7132b26
8886c06379432a0de2405e68d74e461f0984a0d7,8886c063,"Merge ""Hygiene: remove unused style old NavTabView""","Merge ""Hygiene: remove unused style old NavTabView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491832691,1491832691,"ccae1e30eb45e0827bf6212d03e5b5f1e7132b26,4081d1153593f90073db7cb7485b014cc6f2691d"
ccae1e30eb45e0827bf6212d03e5b5f1e7132b26,ccae1e30,"Merge ""Hygiene: Add TODO to BatchUtil.makeBatches""","Merge ""Hygiene: Add TODO to BatchUtil.makeBatches""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491831806,1491831806,"ed730dec0cc26d2c1f6c7f02bf1b1cbd936accde,a4685d2dedf3583eae7b624c1fe078d0ef608e86"
ed730dec0cc26d2c1f6c7f02bf1b1cbd936accde,ed730dec,"Merge ""Fix: network cache request order""","Merge ""Fix: network cache request order""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491830881,1491830881,"1bba6750cbf21d6d8ae2032b62d6a7b323c22bfd,b4f4c8ca535e9e34049b8e675336248ed6303be0"
1bba6750cbf21d6d8ae2032b62d6a7b323c22bfd,1bba6750,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ice6129fdbde857b6b6094a5ff09516e4922b822c
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1491802343,1491802343,3dd74068884c52b0f516b05b08374f310ecdb17c
a4685d2dedf3583eae7b624c1fe078d0ef608e86,a4685d2d,Hygiene: Add TODO to BatchUtil.makeBatches,"Hygiene: Add TODO to BatchUtil.makeBatches

Add a note about handling query continuation and batchcomplete correctly.

Our current usage of BatchUtil should be fine if I correctly understand
the API docs, but it's an issue we should be taking into account
particularly when working with queries using a generator.

Bug: T162497
Change-Id: I09218f1e4222433a158ced7f99fd6de424a13d0e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1491599914,1491599914,3dd74068884c52b0f516b05b08374f310ecdb17c
4081d1153593f90073db7cb7485b014cc6f2691d,4081d115,Hygiene: remove unused style old NavTabView,"Hygiene: remove unused style old NavTabView

Change-Id: I7454e0cba7c94a8047e9a1f0ba5d9b9243e2631c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1491599842,1491599842,3dd74068884c52b0f516b05b08374f310ecdb17c
b4f4c8ca535e9e34049b8e675336248ed6303be0,b4f4c8ca,Fix: network cache request order,"Fix: network cache request order

In CacheIfErrorInterceptor, only request a cached copy when the network
request fails. Update the tests to remove cached responses on failure.

Change-Id: I3396955a4fc6b276a4df25dd7756a1c2ddaae807
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1491597342,1491597342,3dd74068884c52b0f516b05b08374f310ecdb17c
f8e67d0d7a67479796a54e13031d0544bb89b94e,f8e67d0d,Design tweaks to add-to-reading-list dialog.,"Design tweaks to add-to-reading-list dialog.

- Remove ""x"" button.
- Reduce font size of header text.
- Change text style of ""Create new"" to regular.
- Increase the peek height just a bit, so that the expanded sheet lands in
  the middle of a list item, giving the user an indication that the sheet
  is scrollable.
- Make the unfilled thumbnail color be base70 (looks fine in light and
  dark mode).

Bug: T159333
Change-Id: I90df7766546e49891e7e05974ed6d5161425e4e3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1491528610,1491589526,7fd4a7c122906f168c9fb1acc5835699a0250966
3dd74068884c52b0f516b05b08374f310ecdb17c,3dd74068,Update icon for reading list page online state.,"Update icon for reading list page online state.

Bug: T160431
Change-Id: I5da878223c189a53f7f88462119523faa55634c7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1491588331,1491588331,8aa9f61c71df48466c6d4d790d7abfbc073aadcb
7fd4a7c122906f168c9fb1acc5835699a0250966,7fd4a7c1,Cleanup / design tweak: lighten bottom sheet background color.,"Cleanup / design tweak: lighten bottom sheet background color.

This patch cleans up quite a bit of unnecessary code and cruft related to
the link preview dialog and our bottom sheets in general:

- Slightly lighten the background of bottom sheets (base90 / base20 dark).
- Remove special-purpose shape drawables that are only used for the link
  preview overlay buttons, and replace them with the default selectable
  item background.
- Rename the link preview background color to a more general-purpose
  bottom_sheet_background_color.
- Remove unnecessary v21-specific colors.
- Remove some unused styles.

Bug: T159333
Change-Id: Id50dd928dcadc3db998741578aff5b9765cb8feb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1491528046,1491528046,1ae326609ea67154af06513f4cb99061d269df94
8aa9f61c71df48466c6d4d790d7abfbc073aadcb,8aa9f61c,Fix: update screenshots for tests,"Fix: update screenshots for tests

 • Update for layout changes:
   • org.wikipedia.descriptions.DescriptionEditSuccessViewTest

 • Update for test strings:
   • org.wikipedia.descriptions.DescriptionEditViewTest
   • org.wikipedia.feed.becauseyouread.BecauseYouReadCardViewTest
   • org.wikipedia.page.leadimages.PageHeaderViewTest

 • These were slightly fuzzy and should pass the diff but I updated them
   just the same:
   • org.wikipedia.feed.view.CardHeaderViewTest
   • org.wikipedia.feed.view.CardLargeHeaderViewTest
   • org.wikipedia.feed.view.PageTitleListCardItemViewTest
   • org.wikipedia.richtext.LeadingSpanTest
   • org.wikipedia.views.AppTextViewTest

I recommend comparing the changes with a git-diff-img like solution

Change-Id: I774d3f8e9b75599b399380a5b053adc1aaa0a31b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1491511345,1491511345,a962db9d4218bc4341df2db9d66bb5ea63411526
a962db9d4218bc4341df2db9d66bb5ea63411526,a962db9d,Hygiene: remove Spoon page content integration tests,"Hygiene: remove Spoon page content integration tests

These integration tests used Spoon to capture screenshots of the entire
app window after loading each of a variety of pages. They're too large,
fragile, and slow and we hope that more focused tests can be a
responsibility of applib in the future.

Change-Id: Id16979a444a81198afde4d11733eb0267606821c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1491510383,1491510383,1ae326609ea67154af06513f4cb99061d269df94
1ae326609ea67154af06513f4cb99061d269df94,1ae32660,Fix: Allow SavedPageSyncService to run,"Fix: Allow SavedPageSyncService to run

Change-Id: I666a2d90f261a23ba0d45a2b1b37b16ff7b5b9f7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1491506631,1491506834,5e1f4f0db6e183a3fa00df17c098c7728d5e3b61
5e1f4f0db6e183a3fa00df17c098c7728d5e3b61,5e1f4f0d,"Merge ""Update GalleryActivity to use WikiErrorView""","Merge ""Update GalleryActivity to use WikiErrorView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491501677,1491501677,"2e7c938c053d9068dc7345cba021e103e0c7358a,af7db01f91786170df378f5c0fc319b7498f2967"
2e7c938c053d9068dc7345cba021e103e0c7358a,2e7c938c,"Merge ""Update CreateAccountActivity to use WikiErrorView""","Merge ""Update CreateAccountActivity to use WikiErrorView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491501350,1491501350,"d49869e58c74b797f43cfd0d7d4b5b8da6629d6c,5072cf9894098d3327f8cab40cf21af49b787384"
d49869e58c74b797f43cfd0d7d4b5b8da6629d6c,d49869e5,"Merge ""Hygiene: upgrade Android Plugin for Gradle to v2.3.1""","Merge ""Hygiene: upgrade Android Plugin for Gradle to v2.3.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491500299,1491500299,"aa4c04c3958c6a065a4726fa13521ff35a017b49,ab359a33abf1eafbcca96cb4889b031a1e1c8eb5"
5072cf9894098d3327f8cab40cf21af49b787384,5072cf98,Update CreateAccountActivity to use WikiErrorView,"Update CreateAccountActivity to use WikiErrorView

Bug: T157361
Change-Id: Id5ecb7838097d4c6386eddab6c6e4f27a3c681d9
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1490124006,1491500091,aa4c04c3958c6a065a4726fa13521ff35a017b49
af7db01f91786170df378f5c0fc319b7498f2967,af7db01f,Update GalleryActivity to use WikiErrorView,"Update GalleryActivity to use WikiErrorView

Bug: T157361
Change-Id: I23d07064411e4651e266b6da0b14421109befbe8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490124048,1491499941,aa4c04c3958c6a065a4726fa13521ff35a017b49
aa4c04c3958c6a065a4726fa13521ff35a017b49,aa4c04c3,"Merge ""Hygiene: remove ResponseLoggingInterceptor""","Merge ""Hygiene: remove ResponseLoggingInterceptor""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491499511,1491499511,"4bc171a50cc09edf2cdb677aea59c8522c027962,0746dbc7a9d35c527d9354b567c179b50b4faa89"
4bc171a50cc09edf2cdb677aea59c8522c027962,4bc171a5,"Merge ""Hygiene: remove outdated SharedPreference""","Merge ""Hygiene: remove outdated SharedPreference""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491499331,1491499331,"fc1491369f16394fa09c340d6842609270132d37,de036d5d107b56d9a80f317ea47bfcfcce289a35"
fc1491369f16394fa09c340d6842609270132d37,fc149136,"Merge ""Hygiene: limit dev test timeout to 5 seconds""","Merge ""Hygiene: limit dev test timeout to 5 seconds""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491499063,1491499063,"bc7f2569356b089899c3d09114413cfc9df4d803,1b78f09cf293e04a15676f2764a2870b65efa4d1"
bc7f2569356b089899c3d09114413cfc9df4d803,bc7f2569,"Merge ""Hygiene: remove unused ReadingListDaoProxy.pageTitles() method""","Merge ""Hygiene: remove unused ReadingListDaoProxy.pageTitles() method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491499062,1491499062,"d6d81eceec1524acd5894af2fecf2addc17ffbf8,82c8b2ad35808dc0fa08d8904b43f22f22222df3"
ab359a33abf1eafbcca96cb4889b031a1e1c8eb5,ab359a33,Hygiene: upgrade Android Plugin for Gradle to v2.3.1,"Hygiene: upgrade Android Plugin for Gradle to v2.3.1

> This is a minor update to Android plugin 2.3.0 that fixes an issue
  where some physical Android devices did not work properly with Instant
  Run (see Issue #235879).

https://developer.android.com/studio/releases/gradle-plugin.html#revisions

Change-Id: Id4b1a3338c86d8430bc741e64dfc6e23616dbbf3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1491498891,1491498891,d6d81eceec1524acd5894af2fecf2addc17ffbf8
d6d81eceec1524acd5894af2fecf2addc17ffbf8,d6d81ece,"Merge ""Update: use the new save page download api""","Merge ""Update: use the new save page download api""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491498501,1491498501,"f71e916356e80e90a849bb14a1c8a38ce1dae6e6,17229edc9688749ce8f55d49975a37d79b70b2fb"
f71e916356e80e90a849bb14a1c8a38ce1dae6e6,f71e9163,"Merge ""Prevent navigating to page from link previews w/ errors (except offline)""","Merge ""Prevent navigating to page from link previews w/ errors (except offline)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491497765,1491497765,"2af1903b0cc488aef7a303e4366c219ddf665f5a,8e80b554907654cc0b39009b6a7bac08b56b7643"
2af1903b0cc488aef7a303e4366c219ddf665f5a,2af1903b,"Merge ""Update EditSectionActivity to use the standard WikiErrorView""","Merge ""Update EditSectionActivity to use the standard WikiErrorView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491497504,1491497504,"5a4ccc734ffc3e529e7ce33150ee7bf60200ca3f,fe626a21d5f6e90329d01c5fc25f989bc774710d"
5a4ccc734ffc3e529e7ce33150ee7bf60200ca3f,5a4ccc73,"Merge ""Update LoginActivity to use WikiErrorView""","Merge ""Update LoginActivity to use WikiErrorView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491496138,1491496138,"57520b1a0c259d638550241fd8993d312127ca3f,9ce0af0f327387f86cc361d716d92ac71e0eb6bb"
8e80b554907654cc0b39009b6a7bac08b56b7643,8e80b554,Prevent navigating to page from link previews w/ errors (except offline),"Prevent navigating to page from link previews w/ errors (except offline)

Bug: T157361
Bug: T161008
Change-Id: I77e543e8d4ee9e3aba46d64609205f902b42d4e7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1491495932,1491495932,57520b1a0c259d638550241fd8993d312127ca3f
57520b1a0c259d638550241fd8993d312127ca3f,57520b1a,"Merge ""Update: Handle missing pages correctly in the full page view""","Merge ""Update: Handle missing pages correctly in the full page view""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491494725,1491494725,"d7527acbb3bbf633ca48a9b111181424791aca20,9a716f07398b2e1685852377c4cbce12bda98742"
d7527acbb3bbf633ca48a9b111181424791aca20,d7527acb,"Merge ""Update: add cache option to PageClient""","Merge ""Update: add cache option to PageClient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491493996,1491493996,"d2543cf41923d24fa803d77a8201ac606036d125,358816320959951d7d966e382e7b6935452cf34b"
fe626a21d5f6e90329d01c5fc25f989bc774710d,fe626a21,Update EditSectionActivity to use the standard WikiErrorView,"Update EditSectionActivity to use the standard WikiErrorView

Removes the old, custom error view in EditSectionActivity and replaces
it with the WikiErrorView used elsewhere in the app.

Besides improving consistency, this also makes the error view less
misleading, since the old, custom error view was hard-coded to say that
the app could not connect to the internet.

Bug: T154805
Bug: T157361
Change-Id: I76ef6c5ae1cd641b64b0f808a072d89a4ca04bb0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490123860,1491489712,9a716f07398b2e1685852377c4cbce12bda98742
9ce0af0f327387f86cc361d716d92ac71e0eb6bb,9ce0af0f,Update LoginActivity to use WikiErrorView,"Update LoginActivity to use WikiErrorView

Bug: T157361
Change-Id: I02f35182f36e755de29c75ad5cb8cb6554c81756
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490123933,1491489507,9a716f07398b2e1685852377c4cbce12bda98742
9a716f07398b2e1685852377c4cbce12bda98742,9a716f07,Update: Handle missing pages correctly in the full page view,"Update: Handle missing pages correctly in the full page view

Bug: T157361
Change-Id: I811b3f53597dbe96d61b77d3b1d544862d14c052
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490394911,1491489324,d2543cf41923d24fa803d77a8201ac606036d125
d2543cf41923d24fa803d77a8201ac606036d125,d2543cf4,Disable page action tabs (except add to reading list) when offline,"Disable page action tabs (except add to reading list) when offline

Allow the user to add the page to a reading list for later but disable
the rest of the tabs, which are inapplicable when offline.

Bug: T157361
Change-Id: Ie3238def39f03d1b8f4c37dc84f41d7ebf55565a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490282918,1491489323,ae384d66dd14018eb67b03c25759577d4c513613
ae384d66dd14018eb67b03c25759577d4c513613,ae384d66,Update WikiErrorView for PageActivity,"Update WikiErrorView for PageActivity

Adds a new error view with special messages inviting the user to save
the reqeusted page to a reading list to be downloaded later.

Still to do (in the next patch): disable all action tab buttons except
for 'save to reading list.'

Bug: T157361
Change-Id: I569cf187f1a1bfd7c56b0222a52e586c076ca338
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490224685,1491489323,95b1f3f8597987541f2fff9c41d4aea558c9dc8a
95b1f3f8597987541f2fff9c41d4aea558c9dc8a,95b1f3f8,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id47461dc34ba083c5dcead0d2e7692e92a2d3807
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1491456663,1491456663,8887591120a4737ad01a0cfe205e285fd657fe24
0746dbc7a9d35c527d9354b567c179b50b4faa89,0746dbc7,Hygiene: remove ResponseLoggingInterceptor,"Hygiene: remove ResponseLoggingInterceptor

In combination with HttpLoggingInterceptor, ResponseLoggingInterceptor
is too noisy. The ideal solution would be to extend
HttpLoggingInterceptor but the class is not very extensible.

Change-Id: I137c397af0f8634642b7ccf809018c32f154b2e0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490219586,1491413504,de036d5d107b56d9a80f317ea47bfcfcce289a35
de036d5d107b56d9a80f317ea47bfcfcce289a35,de036d5d,Hygiene: remove outdated SharedPreference,"Hygiene: remove outdated SharedPreference

A reading list page delete tutorial no longer exists so delete the
corresponding SharedPreference.

Change-Id: I9fddfb13e410b2ee578e76923f5331c60d089522
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490219004,1491413503,1b78f09cf293e04a15676f2764a2870b65efa4d1
1b78f09cf293e04a15676f2764a2870b65efa4d1,1b78f09c,Hygiene: limit dev test timeout to 5 seconds,"Hygiene: limit dev test timeout to 5 seconds

CI is slow but local dev builds probably aren't. Limit test timeout to 5
seconds instead of 5 minutes for quick feedback.

Change-Id: I1816ce345ee43b2e818df5fdac98fdf7af6aac92
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490161121,1491413502,82c8b2ad35808dc0fa08d8904b43f22f22222df3
82c8b2ad35808dc0fa08d8904b43f22f22222df3,82c8b2ad,Hygiene: remove unused ReadingListDaoProxy.pageTitles() method,"Hygiene: remove unused ReadingListDaoProxy.pageTitles() method

Change-Id: I82c6bd8ca3ac9b186a2c9fe21c89c0a5ff5af5d5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490136107,1491413501,17229edc9688749ce8f55d49975a37d79b70b2fb
17229edc9688749ce8f55d49975a37d79b70b2fb,17229edc,Update: use the new save page download api,"Update: use the new save page download api

Bug: T156917
Change-Id: I777589546a5576073d0f9a8581dfe2c1943a1fe6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490135896,1491413497,358816320959951d7d966e382e7b6935452cf34b
358816320959951d7d966e382e7b6935452cf34b,35881632,Update: add cache option to PageClient,"Update: add cache option to PageClient

Bug: T156917
Change-Id: I1ab55a6d08f6d79693ce62f709a81f0cf17e1312
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488921109,1491413414,8887591120a4737ad01a0cfe205e285fd657fe24
8887591120a4737ad01a0cfe205e285fd657fe24,88875911,Chore: remove pageCombo endpoint,"Chore: remove pageCombo endpoint

Bug: T156917
Change-Id: Ibec49dab4873023faa8efac8abee62149ad26152
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490128002,1491413408,6b8637fbb7d821fef8c7d3ef80e9db847b83385e
6b8637fbb7d821fef8c7d3ef80e9db847b83385e,6b8637fb,Update: remove file-based saved pages,"Update: remove file-based saved pages

Bug: T156917
Change-Id: I51c1bd5cc6c90be5aa58ab230fdd1633eb03ddda
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488499422,1491413397,e11a0e8ce9c5905c489943d9b8404254fe484f9b
e11a0e8ce9c5905c489943d9b8404254fe484f9b,e11a0e8c,Update: add second OkHttp cache for saved content,"Update: add second OkHttp cache for saved content

Bug: T156917
Change-Id: I45825777d18cbbc686d757a715002464cf94ae3f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487889169,1491413381,b5230f671f5b7d85b2bd3cd2271b879a77fcf35d
b5230f671f5b7d85b2bd3cd2271b879a77fcf35d,b5230f67,"Merge ""Overhaul WikiErrorView and use only predefined error messages""","Merge ""Overhaul WikiErrorView and use only predefined error messages""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491411059,1491411059,"3bfb538bec80b95751bef1172da257597d0c0194,7c4dfd71883aa1271f32b8549968cf1c4f9a1dea"
3bfb538bec80b95751bef1172da257597d0c0194,3bfb538b,Hygiene: Fix translation test,"Hygiene: Fix translation test

Add an exception for ckb:wp_stylized to expectContains(res, ""<"", ""&lt;"").
Sorani (ckb), or Central Kurdish, uses a character set for which the use
of <big></big> tags apparently doesn't make sense.

Change-Id: Ib8af31d64456089913fc22ac0606396583d7da7f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1491399077,1491399077,8a7736debd839938afb0bdf60000b3b2737abdbb
8a7736debd839938afb0bdf60000b3b2737abdbb,8a7736de,"Merge ""Hygiene: upgrade Support Libraries to v25.3.1""","Merge ""Hygiene: upgrade Support Libraries to v25.3.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491340070,1491340070,"cf39d20bfd5ab3c404754fa320d2790efe07f52a,72a78b32ae84da71daa7f7d8eebac23df7218be7"
cf39d20bfd5ab3c404754fa320d2790efe07f52a,cf39d20b,Bump versionCode,"Bump versionCode

Change-Id: Id891a9f5e1dceeb04892650bb995dda30fa41a87
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1491335881,1491335969,d265208a63dffc7b7a301f9da59e750586c7365a
d265208a63dffc7b7a301f9da59e750586c7365a,d265208a,"Merge ""i18n: Update ""Save"" to ""Publish"" for page edits""","Merge ""i18n: Update ""Save"" to ""Publish"" for page edits""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491332577,1491332577,"347add3965f12be24d3bf8a60189b7905800cfc9,0276556b728c7afc15fbc00248708b7112215622"
7c4dfd71883aa1271f32b8549968cf1c4f9a1dea,7c4dfd71,Overhaul WikiErrorView and use only predefined error messages,"Overhaul WikiErrorView and use only predefined error messages

Updates the design of WikiErrorView.  Stop directly displaying server
error messages and use predefined error strings instead.  Provide an
extensible interface for adding error views easily in the future.

The special-case offline error view for PageFragment will be added in a
patch to follow.

Bug: T157361
Change-Id: Id2062bb564fdb5a1c2c5f877a300f5a912a62b4a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490111347,1491328767,347add3965f12be24d3bf8a60189b7905800cfc9
347add3965f12be24d3bf8a60189b7905800cfc9,347add39,"Merge ""Introduce language blacklist for editing descriptions.""","Merge ""Introduce language blacklist for editing descriptions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491326323,1491326323,"017e7ec46a29f3396653acbf68b87c7db8e75ce4,f4ae8de2fd0365e8361e7f6307e353866e758089"
017e7ec46a29f3396653acbf68b87c7db8e75ce4,017e7ec4,"Merge ""Show an accurate message in the link preview when a page doesn't exist""","Merge ""Show an accurate message in the link preview when a page doesn't exist""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491322340,1491322340,"8a06a4014afc01e2d2e21c35e4086c5c19000593,0ab05855d5b0452a9be5b086e4a13a1c3cd04eaf"
f4ae8de2fd0365e8361e7f6307e353866e758089,f4ae8de2,Introduce language blacklist for editing descriptions.,"Introduce language blacklist for editing descriptions.

Instead of having a hard-coded whitelist of languages for which we enable
editing descriptions, we now have a blacklist which draws from a remote
config parameter, so that we'll be able to modify it without needing to
re-release the app.

In the current phase of our rollout, we're blacklisting the top ten wikis,
based on pageviews from within the app.

Change-Id: I84c0972bbf132150c3f4fa55910ee56625ddf316
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1491255335,1491319800,8a06a4014afc01e2d2e21c35e4086c5c19000593
0ab05855d5b0452a9be5b086e4a13a1c3cd04eaf,0ab05855,Show an accurate message in the link preview when a page doesn't exist,"Show an accurate message in the link preview when a page doesn't exist

Updates the link preview to show a ""page does not exist"" message when
appropriate.

Bug: T161008
Change-Id: I3b95431abb9305b191250ff527272d1869208c54
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490388388,1491317772,74fa7b766b531ff130e1c4d2f24da06ef51ab21f
8a06a4014afc01e2d2e21c35e4086c5c19000593,8a06a401,"Merge ""Fix: Auto display keyboard when launched from widget""","Merge ""Fix: Auto display keyboard when launched from widget""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1491256649,1491256649,"647b8bd5e761541ae2a2832981575ce40f54f0d5,9789115eb1ddb25380cc910bb1d56648fbed1b6a"
647b8bd5e761541ae2a2832981575ce40f54f0d5,647b8bd5,Update TFA footer saved indicators based on user actions,"Update TFA footer saved indicators based on user actions

Updates the visual indication of saved state immediately upon returning
from AddToReadingListDialog.

Leverages the ReadingListPageObserver to update all TFA card saved
indicators if needed upon returning to the Explore feed from another
context.

Bug: T139377
Change-Id: I510863003de30096108a3e20beb0917f522bb59a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1489080950,1491241926,74fa7b766b531ff130e1c4d2f24da06ef51ab21f
9789115eb1ddb25380cc910bb1d56648fbed1b6a,9789115e,Fix: Auto display keyboard when launched from widget,"Fix: Auto display keyboard when launched from widget

When launching Wikipedia from widget Keyboard now
shows properly. The issue was also present when
searching text from another app. That is fixed as well.

Bug: T161106
Change-Id: I66dfa63f0bf62a2247897ccc4de0d479cb5638e1
",,,,hlakhara,himanshulakhara1947@gmail.com,Hlakhara,himanshulakhara1947@gmail.com,1491229512,1491239611,5e413b15b3a56487409ee85301cf16239ea9d8cf
72a78b32ae84da71daa7f7d8eebac23df7218be7,72a78b32,Hygiene: upgrade Support Libraries to v25.3.1,"Hygiene: upgrade Support Libraries to v25.3.1

Just a couple bug fixes.

https://developer.android.com/topic/libraries/support-library/revisions.html#25-3-1

Change-Id: I900489982af0607cd67824a5c71d31b8f9d96fbc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1491238135,1491238135,74fa7b766b531ff130e1c4d2f24da06ef51ab21f
74fa7b766b531ff130e1c4d2f24da06ef51ab21f,74fa7b76,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I01a0fdafb74905f18057c505a3440fafbd19a187
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1491198225,1491198225,5e413b15b3a56487409ee85301cf16239ea9d8cf
5e413b15b3a56487409ee85301cf16239ea9d8cf,5e413b15,Bump versionCode,"Bump versionCode

Change-Id: Ice0a689c96e3b9acc91bc813599a89810b4e26f2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1490979744,1490979744,4cf3cf7083df28f036ec7d88e046a77cb492937c
4cf3cf7083df28f036ec7d88e046a77cb492937c,4cf3cf70,Fix: add workaround for numeric userjs options,"Fix: add workaround for numeric userjs options

The userjs options API appears to now return both strings and numbers.
Update the client to handle numbers.

Bug: T161866
Change-Id: Icdbfad3a6ecc6d93b9bf8df7ffb1a0d8a2970a0b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490975987,1490975987,b26832761e632518ffacfb3564190a4bbf09d0d8
b26832761e632518ffacfb3564190a4bbf09d0d8,b2683276,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ifd0fbdbe0204b29afadf5738f12cdcf56a0495d8
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1490853904,1490853904,27f2882e31fb1b3b71d28ff1931e5b50c0854dc1
0276556b728c7afc15fbc00248708b7112215622,0276556b,"i18n: Update ""Save"" to ""Publish"" for page edits","i18n: Update ""Save"" to ""Publish"" for page edits

Bug: T142609
Change-Id: Ie2d663b018b65a551d2e1d1c23ad1a837449aa29
",,,,Jforrester,jforrester@wikimedia.org,Jforrester,jforrester@wikimedia.org,1490811873,1490811989,27f2882e31fb1b3b71d28ff1931e5b50c0854dc1
27f2882e31fb1b3b71d28ff1931e5b50c0854dc1,27f2882e,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490805440,1490805440,"42d73a76087c45b6a8e85f0c4c6c63e31976eb80,4d9476c21b1fa621203d2bf0d5e24f2754ffeffd"
42d73a76087c45b6a8e85f0c4c6c63e31976eb80,42d73a76,"Merge ""Hygiene: Incidental error view changes""","Merge ""Hygiene: Incidental error view changes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490805149,1490805149,"e8e94f8b1ec55f581a8a9232ee4a0a3c8f109f16,a889d0cbdc6a8f3dd7f59354f5f8095b745fb8e7"
e8e94f8b1ec55f581a8a9232ee4a0a3c8f109f16,e8e94f8b,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490805043,1490805043,"561b5ef21146a44af1420fd1ed8988aca84d2fd5,a2c4c7e49c424a2060c77209f2344a8fd71ce473"
561b5ef21146a44af1420fd1ed8988aca84d2fd5,561b5ef2,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490804609,1490804609,"a048cb308286812231c49a1460b71fec9387e89e,4b3a8a10682c80085d6e7170088a1dde0d70d49b"
a048cb308286812231c49a1460b71fec9387e89e,a048cb30,Remove lint and add lintAlphaRelease to test,"Remove lint and add lintAlphaRelease to test

Run the lintAlphaRelease task along with the rest of the tests. Use the
release flavor instead of debug since that's already compiled.

Bug: T161305
Change-Id: I49b4165a25e2ffbcce74fcf5fcb0e1786f01fa15
",,,,Antoine Musso,hashar@free.fr,Hashar,hashar@free.fr,1490698593,1490797782,85475d619a5f44a658ee5d5018f14b502652e24c
85475d619a5f44a658ee5d5018f14b502652e24c,85475d61,"Merge ""Correct ""nearby you"" to ""near you""""","Merge ""Correct ""nearby you"" to ""near you""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490726897,1490726897,"86a19aef795022fdcbd4cf8025d44542c6783c3d,87b7bd8ca9db4c8959c0279b2017fe617bcbc1f0"
4d9476c21b1fa621203d2bf0d5e24f2754ffeffd,4d9476c2,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I01c931a411f58da1a71f6af5a735f244b804a508
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1490596382,1490596382,86a19aef795022fdcbd4cf8025d44542c6783c3d
a889d0cbdc6a8f3dd7f59354f5f8095b745fb8e7,a889d0cb,Hygiene: Incidental error view changes,"Hygiene: Incidental error view changes

* Rename custom_error_view to view_wiki_error for consistency

* Rename ThrowableUtil.isRetryable to is404 to eliminate any need to guess
  what is considered retryable

Change-Id: Idb40b03c88537b8b39e86608206f3211a0c40408
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490037735,1490389100,8116ac7a00a2d3587b505aa8f5ecd7e3a3356562
87b7bd8ca9db4c8959c0279b2017fe617bcbc1f0,87b7bd8c,"Correct ""nearby you"" to ""near you""","Correct ""nearby you"" to ""near you""

""Nearby"" is an adjective or an adverb, and before ""you""
a preposition is needed, so it should be ""near you"".

Change-Id: I39c75b601c75a98be96c12f29f6932642a58df6f
",,,,Amire80,amir.aharoni@mail.huji.ac.il,Amire80,amir.aharoni@mail.huji.ac.il,1490341487,1490341487,8116ac7a00a2d3587b505aa8f5ecd7e3a3356562
86a19aef795022fdcbd4cf8025d44542c6783c3d,86a19aef,Update bundled CSS,"Update bundled CSS

Pulls in changes from this week's MW deployment.  No substantive changes.

Change-Id: Ia1ac016c9dd7855a1212f3a5f7eb72599c33c4ab
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490307737,1490307737,8116ac7a00a2d3587b505aa8f5ecd7e3a3356562
8116ac7a00a2d3587b505aa8f5ecd7e3a3356562,8116ac7a,"Merge ""Allow toggling reading list articles for on/offline.""","Merge ""Allow toggling reading list articles for on/offline.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490286814,1490286814,"626fba96737fd2b8f6188397d284e9ff52b22d61,82229f69c88de90d0881848c2b97b8de858a1e47"
626fba96737fd2b8f6188397d284e9ff52b22d61,626fba96,"Merge ""Show snackbar when switching to Nearby fragment to prompt for permissions.""","Merge ""Show snackbar when switching to Nearby fragment to prompt for permissions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490286257,1490286257,"268ab4b9ac34dc5a842199452c26f1b2dc5e3af7,db6d553683f7a4330a04cf30a9770fbb8029b1c1"
268ab4b9ac34dc5a842199452c26f1b2dc5e3af7,268ab4b9,"Merge ""Update Mapbox to 5.0.0.""","Merge ""Update Mapbox to 5.0.0.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490285864,1490285864,"08ea868f3bca073da8796407b7730cc086b0836a,2641ad5443874085dc3691d4e3a386ac62c69dd5"
08ea868f3bca073da8796407b7730cc086b0836a,08ea868f,"Merge ""Chore: add PageClient tests""","Merge ""Chore: add PageClient tests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490277704,1490277704,"79e9f034feae9c0636e71f67db5149e6200a98a0,b8929170525270159564d688c03c9a90b899fd4f"
79e9f034feae9c0636e71f67db5149e6200a98a0,79e9f034,"Merge ""Fix getting mobile authority for WikiSite when authority is already mobile""","Merge ""Fix getting mobile authority for WikiSite when authority is already mobile""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490277523,1490277523,"5789aab570a300220d32e05daf2655811c27b5c5,3a9c662b6b72800c4dcce8b47ec801feb1736629"
a2c4c7e49c424a2060c77209f2344a8fd71ce473,a2c4c7e4,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I96ca4b1b49b83fedbad0cd553061572be2940660
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1490256325,1490256325,5789aab570a300220d32e05daf2655811c27b5c5
4b3a8a10682c80085d6e7170088a1dde0d70d49b,4b3a8a10,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I0c8d93633695f6e833fa1dd99de6362d633cb592
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1490255427,1490255427,5789aab570a300220d32e05daf2655811c27b5c5
b8929170525270159564d688c03c9a90b899fd4f,b8929170,Chore: add PageClient tests,"Chore: add PageClient tests

Bug: T156917
Change-Id: I26eb87b10cfb4c7a2a539dcbca3325f6acbaf333
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490135208,1490223842,5789aab570a300220d32e05daf2655811c27b5c5
5789aab570a300220d32e05daf2655811c27b5c5,5789aab5,"Merge ""Update: replace underlying image URL parser""","Merge ""Update: replace underlying image URL parser""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490201444,1490201444,"d3e4f8b56ebe08d070853edc8ccbe700fd1e95ba,67ab960ee5a3166abfa8bf921695f4927ddca5dc"
3a9c662b6b72800c4dcce8b47ec801feb1736629,3a9c662b,Fix getting mobile authority for WikiSite when authority is already mobile,"Fix getting mobile authority for WikiSite when authority is already mobile

When instantiating WikiSite with a mobile domain, e.g. en.m.wikipedia.org,
and then requesting mobileAuthority() from the WikiSite, we were
incorrectly appending another ""m."" onto the domain that already has a ""m.""
in it.

This adds a check for whether the WikiSite's domain is already mobile
before appending the ""m."", and adds some tests.

Bug: T161113
Change-Id: I0c907617df21a9d9ee8cc28ee971c8c36950b6c2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1490192457,1490192457,6408e7d9af0ea63e007724778a10381b3420f9d7
d3e4f8b56ebe08d070853edc8ccbe700fd1e95ba,d3e4f8b5,Nearby: Show geosearch error responses in a Toast rather than a Snackbar,"Nearby: Show geosearch error responses in a Toast rather than a Snackbar

This will most often be ""cannot connect to the internet,"" which is the
message we're concerned with here.

Bug: T157361
Change-Id: Ifa7ac1d11460bf3ece419bcb08b6e09042d9357d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1490190747,1490190747,6408e7d9af0ea63e007724778a10381b3420f9d7
6408e7d9af0ea63e007724778a10381b3420f9d7,6408e7d9,"Merge ""Hygiene: add jsoup v1.10.2""","Merge ""Hygiene: add jsoup v1.10.2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490130568,1490130568,"3ae96c2f9d567042a3ef8e31acc2a68e55c1abe9,f513ac1cafdadba052ba20297f6504826e038470"
3ae96c2f9d567042a3ef8e31acc2a68e55c1abe9,3ae96c2f,"Merge ""Hygiene: rename ImageUrlMap to ImageUrlHtmlParser""","Merge ""Hygiene: rename ImageUrlMap to ImageUrlHtmlParser""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490130412,1490130412,"886ab58896cb5ae45504f1c8d5e4a6e7024a7884,8c9019952decfb792e8477672006b8f28c102863"
886ab58896cb5ae45504f1c8d5e4a6e7024a7884,886ab588,"Merge ""Update: use OkHttp for WebView requests""","Merge ""Update: use OkHttp for WebView requests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490130100,1490130100,"7b292a08c6e6f479e81f959146640e13141ef087,3f5b38f09505516eb723e9b88a8e8c3b6e0daab0"
7b292a08c6e6f479e81f959146640e13141ef087,7b292a08,"Merge ""Update: do not forbid Fresco image request caching""","Merge ""Update: do not forbid Fresco image request caching""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490129946,1490129946,"b9f242647a957446111e113ef0f068d8bcb186b9,3996e2d9b36a7d9cf66046b24a1a349a31935fe9"
b9f242647a957446111e113ef0f068d8bcb186b9,b9f24264,"Merge ""Hygiene: upgrade to Retrofit v2.2.0""","Merge ""Hygiene: upgrade to Retrofit v2.2.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490129679,1490129679,"7fe820a38b1e03fb8645ddb562707ce590ba2f72,04dca1e1875d99bd40d80a0a5fc52ad99fd993ce"
7fe820a38b1e03fb8645ddb562707ce590ba2f72,7fe820a3,"Merge ""Hygiene: remove unused FileUtil method""","Merge ""Hygiene: remove unused FileUtil method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490129433,1490129433,"6321eddaaff8eb3bb15c1e70b3e190c1aecc0ca3,18abd52ae3cc9360fee96d57bede15f29f424e5a"
6321eddaaff8eb3bb15c1e70b3e190c1aecc0ca3,6321edda,"Merge ""Hygiene: remove unused resources""","Merge ""Hygiene: remove unused resources""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490129243,1490129243,"9c0685190c2303f249eb166dabe4afc03c25ed72,131906b0a915ddeaa8abece27fd7a69e3f89bf72"
9c0685190c2303f249eb166dabe4afc03c25ed72,9c068519,"Merge ""Hygiene: remove unused legacy colors""","Merge ""Hygiene: remove unused legacy colors""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490129173,1490129173,"299e93724d13b9b7efe8d489d9cc7e001044a447,769b73925aea6ad1a5d3fb1f19ea83b83a4b80fb"
299e93724d13b9b7efe8d489d9cc7e001044a447,299e9372,"Merge ""Hygiene: remove outdated @VisibleForTest annotations""","Merge ""Hygiene: remove outdated @VisibleForTest annotations""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490129172,1490129172,"db10d8aea9385888f5129f801c7339064fb0b9ce,40027a5d32ae2cb917542eb470cbe328e5563a6c"
db10d8aea9385888f5129f801c7339064fb0b9ce,db10d8ae,"Merge ""Hygiene: replace runtime resource use with static uses""","Merge ""Hygiene: replace runtime resource use with static uses""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490129171,1490129171,"3c32392cf826b76d431782843711fb80138d1752,0b8e7f4ae5775ad0197d3e9568cb50d26621e1ed"
67ab960ee5a3166abfa8bf921695f4927ddca5dc,67ab960e,Update: replace underlying image URL parser,"Update: replace underlying image URL parser

Support extracting src and srcset URLs so images referenced by the
WebView can be cached. A later patchset will remove ImageUrlHtmlParser
entirely. Lead images do not load but this does not appear to be a
regression.

Bug: T156917
Change-Id: I609fc57a7787585e4226cf67091ae84565e3861d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490121133,1490121878,f513ac1cafdadba052ba20297f6504826e038470
f513ac1cafdadba052ba20297f6504826e038470,f513ac1c,Hygiene: add jsoup v1.10.2,"Hygiene: add jsoup v1.10.2

Add Java HTML Parser for parsing image src and srcset links.

Bug: T156917
Change-Id: Iad0ea2fbb9b8fbcf0867f6c212c585f86472d8cf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1489702637,1490121694,8c9019952decfb792e8477672006b8f28c102863
8c9019952decfb792e8477672006b8f28c102863,8c901995,Hygiene: rename ImageUrlMap to ImageUrlHtmlParser,"Hygiene: rename ImageUrlMap to ImageUrlHtmlParser

Also remove unnecessary throw declarations.

Bug: T156917
Change-Id: Ibed46a18f721242d53d72a9ca87247b9d49ca056
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488922524,1490121694,3f5b38f09505516eb723e9b88a8e8c3b6e0daab0
3f5b38f09505516eb723e9b88a8e8c3b6e0daab0,3f5b38f0,Update: use OkHttp for WebView requests,"Update: use OkHttp for WebView requests

The WebView must must the same cache all other requests use to benefit
precached images in forthcoming patches.

Bug: T156917
Change-Id: I237be04b201a500a66a88618b1bdd2b086fc25fb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1489706819,1490121691,3996e2d9b36a7d9cf66046b24a1a349a31935fe9
3996e2d9b36a7d9cf66046b24a1a349a31935fe9,3996e2d9,Update: do not forbid Fresco image request caching,"Update: do not forbid Fresco image request caching

Bug: T156917
Change-Id: Ib757237185db6b66f130c5d19637ecd5cd689cdb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1489707119,1490114618,04dca1e1875d99bd40d80a0a5fc52ad99fd993ce
04dca1e1875d99bd40d80a0a5fc52ad99fd993ce,04dca1e1,Hygiene: upgrade to Retrofit v2.2.0,"Hygiene: upgrade to Retrofit v2.2.0

https://github.com/square/retrofit/blob/master/CHANGELOG.md#version-220-2017-02-21

Change-Id: Iaebd3b23f92b84939121c91d66b6ad3e187fbe1f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490114154,1490114154,18abd52ae3cc9360fee96d57bede15f29f424e5a
18abd52ae3cc9360fee96d57bede15f29f424e5a,18abd52a,Hygiene: remove unused FileUtil method,"Hygiene: remove unused FileUtil method

Remove FileUtil.writeToStream().

Change-Id: I689f897769afee330a909a64b6226f7a421ea3b0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490113707,1490113707,131906b0a915ddeaa8abece27fd7a69e3f89bf72
131906b0a915ddeaa8abece27fd7a69e3f89bf72,131906b0,Hygiene: remove unused resources,"Hygiene: remove unused resources

Change-Id: I412c0e1f597ec52a2e863a194b79cb00dc807d03
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490113277,1490113277,769b73925aea6ad1a5d3fb1f19ea83b83a4b80fb
769b73925aea6ad1a5d3fb1f19ea83b83a4b80fb,769b7392,Hygiene: remove unused legacy colors,"Hygiene: remove unused legacy colors

Change-Id: I0fef6aeae48751893e5bf6e1c4527fa8d727c36e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490112496,1490112776,40027a5d32ae2cb917542eb470cbe328e5563a6c
40027a5d32ae2cb917542eb470cbe328e5563a6c,40027a5d,Hygiene: remove outdated @VisibleForTest annotations,"Hygiene: remove outdated @VisibleForTest annotations

Remove a couple annotations indicating that code used in prod was for
testing only.

Change-Id: I2967012ef25c844a844a35f7037593d06f8cade3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490112291,1490112776,0b8e7f4ae5775ad0197d3e9568cb50d26621e1ed
0b8e7f4ae5775ad0197d3e9568cb50d26621e1ed,0b8e7f4a,Hygiene: replace runtime resource use with static uses,"Hygiene: replace runtime resource use with static uses

Update ResourceUtil.getTabListIcon() to use a switch statement instead
of reflection. The resultant code is a little less elegant but prevents
Lint from identifying un/used resources.

Change-Id: I4b086ff458ccb1c78370636e7a81c6577beb35ca
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1490111459,1490112767,04aeadaecf6bd0c057fb6a33e51a96f846dc63fa
3c32392cf826b76d431782843711fb80138d1752,3c32392c,Use correct IME flag in PageActivity.,"Use correct IME flag in PageActivity.

We were using the flag stateHidden, which would leave open the possibility
of the keyboard being shown even when the user isn't focused on an
editable field.

This changes the flag to stateAlwaysHidden, meaning that the keyboard will
always be hidden unless the user is explicitly focused on an editable
component.

Bug: T160694
Change-Id: I08baa08cb63c7369231669ec85a8e1e1c87b135d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1490109476,1490109476,04aeadaecf6bd0c057fb6a33e51a96f846dc63fa
82229f69c88de90d0881848c2b97b8de858a1e47,82229f69,Allow toggling reading list articles for on/offline.,"Allow toggling reading list articles for on/offline.

- Remove any remaining logic pertaining to list-wide offline state.
- Hook up the ""action"" button in each reading list page item that toggles
  the page's offline state.
- Add long-press hints and snackbar messages for offline and online state.

TODO: Although this basically implements variant A of the design mocks, we
eventually want to work towards building variant C. This patch is simply
an intermediate step towards that final implementation (and is acceptable
for a maintenance release).

Bug: T160431
Bug: T160705
Change-Id: I361391bde576dcd0d34222d1c0116818a8addafe
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1490043659,1490044322,fdf7c66619e129ce85d6f3285a59eb0bf5465614
db6d553683f7a4330a04cf30a9770fbb8029b1c1,db6d5536,Show snackbar when switching to Nearby fragment to prompt for permissions.,"Show snackbar when switching to Nearby fragment to prompt for permissions.

Change-Id: Ic99214f1f9180259bafa7e3835370dec6dcc9eb9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1490036739,1490037878,2641ad5443874085dc3691d4e3a386ac62c69dd5
2641ad5443874085dc3691d4e3a386ac62c69dd5,2641ad54,Update Mapbox to 5.0.0.,"Update Mapbox to 5.0.0.

This updates Mapbox to their stable 5.0.0 release, and also updates the
following bits of logic:

- When saving instanceState, we now save the CameraPosition object,
  instead of just the Location object, since CameraPosition contains the
  location, zoom, and bearing of the camera. This allows the state of the
  map to be resumed more precisely.
- The last CameraPosition is now saved in onPause(), which automatically
  records the last position whenever the user navigates away from the
  Nearby fragment for any reason.
- Now persisting the firstLocationLock flag in savedInstanceState, so that
  the camera won't jump to the user's location after coming back from
  a saved instance.
- The location change listener is now passed to LocationEngine instead of
  MapboxMap.

Bug: T146776
Change-Id: I22e84d9a144a1bc0704c273384a2ec32751e9000
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1490032736,1490037183,1467fa39be14319f99e7e8bcc4ab521cad5009b8
04aeadaecf6bd0c057fb6a33e51a96f846dc63fa,04aeadae,Trim whitespace from reading list title names.,"Trim whitespace from reading list title names.

Bug: T160925
Change-Id: I05d8eecdaf32606e7cee8d6f1cc2f6dcc81f1029
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1490034049,1490034049,fdf7c66619e129ce85d6f3285a59eb0bf5465614
fdf7c66619e129ce85d6f3285a59eb0bf5465614,fdf7c666,Hide bottom navigation when ActionMode active.,"Hide bottom navigation when ActionMode active.

This does a bit of rearranging of the view hierarchy in MainFragment which
allows us to finally get rid of the custom Behavior that we were using to
properly align SnackBars, as well as allow us to conditionally hide the
bottom tabs.

The tabs will now be hidden whenever an ActionMode is active (e.g. when
searching History or Lists).

Bug: T160636
Change-Id: I15418c8e2fc3c739cd976aead70ed7284f357d44
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1489677779,1490026534,516ac3b69962fdfa7e28ea40265c3ce4bf71856a
516ac3b69962fdfa7e28ea40265c3ce4bf71856a,516ac3b6,"Merge ""Update link preview to support offline state""","Merge ""Update link preview to support offline state""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490026072,1490026072,"e6fb399739d9b68f629628cbf4e2a20f0e2bf854,fa297903c67fa602177e5a2900351bed71dd78a3"
e6fb399739d9b68f629628cbf4e2a20f0e2bf854,e6fb3997,"Merge ""Hygiene: Remove logError from PageSummary interface and DRY it up""","Merge ""Hygiene: Remove logError from PageSummary interface and DRY it up""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490025254,1490025254,"5ec307905feac2a137029a52418ebed2d98664fd,435d8528ad46c4b4f4bfa2aa79363f0a9513d7a5"
5ec307905feac2a137029a52418ebed2d98664fd,5ec30790,"Merge ""Hygiene: Add missing type parameter""","Merge ""Hygiene: Add missing type parameter""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490024644,1490024644,"cefde30301b372b8653e23219f5180463f038692,ca1ec756314cd994f4671caf2dc8243f170c5d57"
cefde30301b372b8653e23219f5180463f038692,cefde303,"Merge ""Hygiene: Remove some unneeded state from LinkPreviewDialog""","Merge ""Hygiene: Remove some unneeded state from LinkPreviewDialog""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1490024642,1490024642,"7560aadd1d51a2ad63de0286e5087323afed50c7,39226e615188792f5a696c7af8a6f04e90db94e3"
7560aadd1d51a2ad63de0286e5087323afed50c7,7560aadd,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I0be8d55599432b63c0f59ff8cf1413d421ffe4e8
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1489992184,1489992184,1467fa39be14319f99e7e8bcc4ab521cad5009b8
fa297903c67fa602177e5a2900351bed71dd78a3,fa297903,Update link preview to support offline state,"Update link preview to support offline state

Bug: T156084
Change-Id: I171f4e77e500f92b466e2eea9ada00405c5fa7d5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1489790290,1489790290,435d8528ad46c4b4f4bfa2aa79363f0a9513d7a5
435d8528ad46c4b4f4bfa2aa79363f0a9513d7a5,435d8528,Hygiene: Remove logError from PageSummary interface and DRY it up,"Hygiene: Remove logError from PageSummary interface and DRY it up

* Removes logError from the PageSummary interface
* Removes the identical implementations from RbPageSummary and MwQuery-
  PageSummary and puts it into LinkPreviewDialog, where it's called

Change-Id: If9b0d1c7e1683d073843276770130fdc662c9eeb
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1489779918,1489779918,ca1ec756314cd994f4671caf2dc8243f170c5d57
ca1ec756314cd994f4671caf2dc8243f170c5d57,ca1ec756,Hygiene: Add missing type parameter,"Hygiene: Add missing type parameter

Change-Id: I3124294f462f5b5e7abfbf4c5d8eb66434bc31fe
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1489778644,1489778644,39226e615188792f5a696c7af8a6f04e90db94e3
39226e615188792f5a696c7af8a6f04e90db94e3,39226e61,Hygiene: Remove some unneeded state from LinkPreviewDialog,"Hygiene: Remove some unneeded state from LinkPreviewDialog

Pass LinkPreviewContents as needed rather than preserving as a member
variable.

Set a new OverlayViewCallback on resume rather than holding an instance
in a member variable.

Change-Id: If9522a7b7a8585d998de83f479ec174f96222303
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1489778427,1489778427,1467fa39be14319f99e7e8bcc4ab521cad5009b8
1467fa39be14319f99e7e8bcc4ab521cad5009b8,1467fa39,"Merge ""Don't tint Share action item when highlighting text.""","Merge ""Don't tint Share action item when highlighting text.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489769994,1489769994,"28671882022ca58b2fdd6c0a9e1b8e685e81fcfb,d72938040f1f22ebb58fb837fca859c397b4ccf8"
28671882022ca58b2fdd6c0a9e1b8e685e81fcfb,28671882,"Merge ""Add contentDescription to overflow menu buttons.""","Merge ""Add contentDescription to overflow menu buttons.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489764076,1489764076,"66deabaddaf146c2def8b6983732ed5b673d8286,55ad1a62733a60aebd0c56391cbf7718099a5936"
66deabaddaf146c2def8b6983732ed5b673d8286,66deabad,"Merge ""Update icon of ""My lists"" tab.""","Merge ""Update icon of ""My lists"" tab.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489763862,1489763862,"4aa24c271fb7bbcc6fa8c6d54fc9c1ca27bb4e95,6ebe71c011c41d123f07b7464e4ee053bc1c1124"
4aa24c271fb7bbcc6fa8c6d54fc9c1ca27bb4e95,4aa24c27,Fix android-builds.wmflabs.org build time display,"Fix android-builds.wmflabs.org build time display

Fixes the issue reported by Rita at https://phabricator.wikimedia.org/
T160587#3108127.

I'm not sure why moving this script to the app repo would have broken
the display date/time on the alpha build server, but this change fixes it.

It's currently working correctly because I made the same change by hand
on android-builder for the most recent meta.json artifact.

Bug: T160587
Change-Id: I72a2f950999ae50a4cf9d6a8b721f367b606fd38
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1489757916,1489757916,524df471ade490f51fca742d9dbd06af1ab3f6ff
524df471ade490f51fca742d9dbd06af1ab3f6ff,524df471,"Merge ""Prevent native Mapbox crash in release builds.""","Merge ""Prevent native Mapbox crash in release builds.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489691505,1489691505,"eaaa10a6e544f7b472341ffbcf60f1bd11ae86c4,95c077ca0391c281a9413935fd02bc7e2bb6f6ef"
d72938040f1f22ebb58fb837fca859c397b4ccf8,d7293804,Don't tint Share action item when highlighting text.,"Don't tint Share action item when highlighting text.

This now conflicts with the background color of the toolbar, and is no
longer necessary.

Also remove unnecessary API version check.

Bug: T160658
Change-Id: Ie3f6985efcdf07ceee4c2ce11866b6ad17d433d0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489688103,1489688103,eaaa10a6e544f7b472341ffbcf60f1bd11ae86c4
6ebe71c011c41d123f07b7464e4ee053bc1c1124,6ebe71c0,"Update icon of ""My lists"" tab.","Update icon of ""My lists"" tab.

Per design request, this will now be a solid ""bookmark"" icon for improved
clarity.

Change-Id: Icecefb81c353b916c8a97681d2b7535959c99ad5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489675982,1489675982,eaaa10a6e544f7b472341ffbcf60f1bd11ae86c4
55ad1a62733a60aebd0c56391cbf7718099a5936,55ad1a62,Add contentDescription to overflow menu buttons.,"Add contentDescription to overflow menu buttons.

There were a few places where we show an ""overflow"" icon, but don't give
it a contentDescription, which means that it will be treated as an
""unlabeled button"" by TalkBack.

Bug: T156000
Change-Id: I96dd3476f55accd4707ac1a127a2005a6c9b3b84
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489669690,1489669690,eaaa10a6e544f7b472341ffbcf60f1bd11ae86c4
95c077ca0391c281a9413935fd02bc7e2bb6f6ef,95c077ca,Prevent native Mapbox crash in release builds.,"Prevent native Mapbox crash in release builds.

This adds a workaround to our ProGuard rules to prevent a SIGABRT crash
from the Mapbox library.
https://github.com/mapbox/mapbox-gl-native/issues/8432

Please remove when Mapbox updates its own ProGuard configuration.

This also removes an unused ProGuard rule, since we're no longer using the
PhotoView component.

Bug: T160587
Change-Id: I63f297fcc60394df68e53335946c735c3a4fc19c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489664987,1489665224,87035c2ea918077ade659dde6aa4491273b6a164
eaaa10a6e544f7b472341ffbcf60f1bd11ae86c4,eaaa10a6,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4b3c5a912a275aa0f73191bac69ebc63ffc2bc8b
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1489648996,1489648996,87035c2ea918077ade659dde6aa4491273b6a164
87035c2ea918077ade659dde6aa4491273b6a164,87035c2e,Fix: set executable bit on CI script,"Fix: set executable bit on CI script

A follow-up to 9c2d1c4, set the executable bit on the script so it can
be run directly

Change-Id: If3d857bef0f438714f510b8d57222d95220a4475
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1489606249,1489606249,59c7f90351df643308ea3016cf6feb7ef1bc12f9
59c7f90351df643308ea3016cf6feb7ef1bc12f9,59c7f903,"Merge ""Hygiene: move CI publish script from Jenkins Job Builder config to repo""","Merge ""Hygiene: move CI publish script from Jenkins Job Builder config to repo""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489606109,1489606109,"8c4a5d004fd6a5139a49146ce86b9db1ca668cce,9c2d1c47092abbd4fed0786e861d3155051d9b4b"
8c4a5d004fd6a5139a49146ce86b9db1ca668cce,8c4a5d00,"Merge ""Whoops: fix clicking of items in News activity.""","Merge ""Whoops: fix clicking of items in News activity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489603352,1489603352,"3c1011cd3e7fa5e0f7e4193efa3df3d39c158785,29d52f8eecd854a9a1af714d838396f766ed2d27"
3c1011cd3e7fa5e0f7e4193efa3df3d39c158785,3c1011cd,"Merge ""Retrofit ReadingListPageInfoTask and update caller to query in batches""","Merge ""Retrofit ReadingListPageInfoTask and update caller to query in batches""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489599014,1489599014,"1faef0eeefae73284f97d16a027b1e66bfc4c443,d3fcf2941caddcd7c1109b32caf3878d3ea5559f"
29d52f8eecd854a9a1af714d838396f766ed2d27,29d52f8e,Whoops: fix clicking of items in News activity.,"Whoops: fix clicking of items in News activity.

Due to a recent update to ListCardItemView, the items in NewsActivity
stopped being clickable (forgot to setCard() on the item views).

This fixes the click behavior, and also butterifies the eigen-
click-handler of the view.

Change-Id: I1ccd00147c7900953e36291255a4e86c18983cc3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489598609,1489598834,1faef0eeefae73284f97d16a027b1e66bfc4c443
1faef0eeefae73284f97d16a027b1e66bfc4c443,1faef0ee,"Merge ""Supercharge eventlogging for the feed.""","Merge ""Supercharge eventlogging for the feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489597063,1489597063,"099e28ec59eafc279ea651e602208903c767b933,65273ccb4c36ac3f5345e9d738d9844c21653a63"
9c2d1c47092abbd4fed0786e861d3155051d9b4b,9c2d1c47,Hygiene: move CI publish script from Jenkins Job Builder config to repo,"Hygiene: move CI publish script from Jenkins Job Builder config to repo

Also fix the SDK export.

Related: I9b25b57d26d06396bc8dd11a197bf2ca270a0c0b
Change-Id: I087e0e85f167ef389016e7d5f9a36577569ffd03
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1489593010,1489593110,099e28ec59eafc279ea651e602208903c767b933
65273ccb4c36ac3f5345e9d738d9844c21653a63,65273ccb,Supercharge eventlogging for the feed.,"Supercharge eventlogging for the feed.

This updates our FeedFunnel to make use of the new additions to the feed
schema:

- This is now a TimedFunnel, meaning that each event will include how long
  the feed has been in view at the time of the event.
- This introduces a ""cardShown"" event, which is fired when any feed card
  is attached to the current window (an ""impression"" of sorts).
- This also introduces a ""cardClicked"" event, which is fired when the user
  interacts with any of the cards.
- We also introduce ""enter"" and ""exit"" events for when the feed itself is
  shown and hidden, respectively. This is done through a combination of
  listening to onPause() and onResume(), as well as setUserVisibleHint().

Bug: T149125
Change-Id: I1c0c23fa469824ff942ac1b13e5c8ce5aefdc055
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489531612,1489592002,6959dd0a56af0233b979b84d6b3e2943e8d1ad16
099e28ec59eafc279ea651e602208903c767b933,099e28ec,"Merge ""Prepare feed coordinator for improved event logging.""","Merge ""Prepare feed coordinator for improved event logging.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489590886,1489590886,"131a328c44d424b7e71cc7863f0f063e3170b28a,6959dd0a56af0233b979b84d6b3e2943e8d1ad16"
131a328c44d424b7e71cc7863f0f063e3170b28a,131a328c,"Merge ""Bring back link preview overlay buttons.""","Merge ""Bring back link preview overlay buttons.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489589043,1489589043,"eb1217cc48bd56a74ec5c20803ce0e8e452a36de,d9af83011bbcc510a6eae74f42ecc3f372555af2"
eb1217cc48bd56a74ec5c20803ce0e8e452a36de,eb1217cc,"Merge ""Update Mapbox to 5.0.0.beta3""","Merge ""Update Mapbox to 5.0.0.beta3""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489588873,1489588873,"bf52b902b15190b1a97e5575509f4ea651081f24,a3a28aaae56f551aaf3c8a9d7bf47598f9c59d91"
d9af83011bbcc510a6eae74f42ecc3f372555af2,d9af8301,Bring back link preview overlay buttons.,"Bring back link preview overlay buttons.

This reenables the ""Read article"" button (and the ""Get directinos"" button
when in Nearby) to float translucently on top of the link preview dialog.

This is now accomplished by making the overlay into a custom view, and
injecting it into the view hierarchy at runtime when the dialog is shown.
The injection is done in onResume(), since it can't be done in
onCreateView() because the view hierarchy isn't constructed yet. We
search for a parent view called ""id/content"" (common to all dialogs)
which, conveniently, is a FrameLayout, and lets us float the overlay at
the bottom.

Bug: T159571
Change-Id: I781e259abb6fd08a4396b259da6111557f8dc250
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489583146,1489584553,bf52b902b15190b1a97e5575509f4ea651081f24
a3a28aaae56f551aaf3c8a9d7bf47598f9c59d91,a3a28aaa,Update Mapbox to 5.0.0.beta3,"Update Mapbox to 5.0.0.beta3

- User location is now working!
- No longer need to declare telemetry service in our own manifest.

Bug: T146776
Change-Id: I5d6463baf885b2313749fb053afc90a831f9605f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489520246,1489532977,4eed50f3c877858ebbec4d14aee71a4292aacc80
6959dd0a56af0233b979b84d6b3e2943e8d1ad16,6959dd0a,Prepare feed coordinator for improved event logging.,"Prepare feed coordinator for improved event logging.

This improves the way that FeedCoordinator communicates back with
FeedFragment. Most importantly, we remove the update() callback, and use
only the insert() and remove() callbacks. This means that we will no
longer need to call notifyDataSetChanged(), which is great because it
messes with the view hierarchy of the RecyclerView, and could interfere
with our usage of onAttachedToWindow() for eventlogging purposes.

(i.e. when we call notifyDataSetChanged(), all the views get detached()
and re-attached(), which would cause a spurious event.)

Bug: T149125
Change-Id: Icc54fea1ed997151d34a2ad98efad0ebd3f4cee2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489528972,1489530116,bf52b902b15190b1a97e5575509f4ea651081f24
bf52b902b15190b1a97e5575509f4ea651081f24,bf52b902,"Merge ""Hygiene: Don't attempt to set ANDROID_HOME in periodic test script""","Merge ""Hygiene: Don't attempt to set ANDROID_HOME in periodic test script""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489525889,1489525889,"039e425959e39cb53587603902b2dd12ad712d51,c134af3ae61597ec671fc37723298d61798969cc"
039e425959e39cb53587603902b2dd12ad712d51,039e4259,"Merge ""Update Support library to 25.3.0""","Merge ""Update Support library to 25.3.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489522938,1489522938,"785b32393c15d88671e3c87481f67deef7c261fd,4eed50f3c877858ebbec4d14aee71a4292aacc80"
785b32393c15d88671e3c87481f67deef7c261fd,785b3239,"Merge ""Prevent possible crash when rendering feed card.""","Merge ""Prevent possible crash when rendering feed card.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489522931,1489522931,"e12e7283155d91a9abe424c29df13c0dcdb03820,863b8a553e2a28b4f722a2d31936913f2311708f"
4eed50f3c877858ebbec4d14aee71a4292aacc80,4eed50f3,Update Support library to 25.3.0,"Update Support library to 25.3.0

https://developer.android.com/topic/libraries/support-library/revisions.html#25-3-0
https://developer.android.com/topic/libraries/support-library/revisions.html#25-2-0

Don't seem to be any changes that impact our usage of it.

Bug: T159745
Change-Id: I13fa16ad41ae0539259c7da710b2cd7253511821
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489519549,1489520076,e12e7283155d91a9abe424c29df13c0dcdb03820
863b8a553e2a28b4f722a2d31936913f2311708f,863b8a55,Prevent possible crash when rendering feed card.,"Prevent possible crash when rendering feed card.

In CardLargeHeaderView, we animate the background color of the view to
match the dominant color of the image.
The patch of d67f70027a63 seems to have incorrectly modified the attribute
on which this animation is keyed.

This patch fixes the animator, and gives it an arguably more compatible
attribute on which to key the animation.

This patch also adds a check for whether the view is attached to a window
before starting the animation.

Bug: T160299
Change-Id: Ic1a40209189c905dea0f8c4d61cfe6412a674692
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489172446,1489497093,47af3d316e17c97a52c6fef85f0244e1e6540490
e12e7283155d91a9abe424c29df13c0dcdb03820,e12e7283,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Iaba1f5f44aff9df994199846dbd7690f4ac19b8c
",,,,Translation updater bot,l10n-bot@translatewiki.net,Stephen Niedzielski,stephen@niedzielski.com,1489389927,1489464421,47af3d316e17c97a52c6fef85f0244e1e6540490
d3fcf2941caddcd7c1109b32caf3878d3ea5559f,d3fcf294,Retrofit ReadingListPageInfoTask and update caller to query in batches,"Retrofit ReadingListPageInfoTask and update caller to query in batches

Bug: T152408
Bug: T155502
Change-Id: Icb66a97590323351992b18aa713ec30a8f03578f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485874777,1489189115,47af3d316e17c97a52c6fef85f0244e1e6540490
c134af3ae61597ec671fc37723298d61798969cc,c134af3a,Hygiene: Don't attempt to set ANDROID_HOME in periodic test script,"Hygiene: Don't attempt to set ANDROID_HOME in periodic test script

By the point this script is run, the Jenkins Android Emulator plugin will
already by using an SDK it's located previously, so setting it here is
ineffective.

In order to point the Jenkins plugin at the SDK we want, we'll have to set
the env variable globally (I0571c6de766ad523ce9c4c77af48db69a3b92c9a).

Change-Id: I4dcad776123293a1c5629b15cf14a3f0d7ee7bc4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1489177533,1489177533,47af3d316e17c97a52c6fef85f0244e1e6540490
47af3d316e17c97a52c6fef85f0244e1e6540490,47af3d31,"Merge ""Enable deleting of reading list from reading list activity.""","Merge ""Enable deleting of reading list from reading list activity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489170353,1489170353,"06ce0006e2b0d6e0b91d4e7f62368a3050e4f55d,40f5c5d9d2ab50d26f3ac46d4e5f157f987b83b5"
06ce0006e2b0d6e0b91d4e7f62368a3050e4f55d,06ce0006,"Merge ""[Dev] Upgrade Gradle Plugin to 2.3.0""","Merge ""[Dev] Upgrade Gradle Plugin to 2.3.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489169997,1489169997,"e27f6a7d732e888951a1b58952e653d5ff79ab13,d67f70027a63d989879ab476d2d625ffa8266399"
e27f6a7d732e888951a1b58952e653d5ff79ab13,e27f6a7d,"Merge ""Remove SearchView close button when no text is present""","Merge ""Remove SearchView close button when no text is present""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489169386,1489169386,"b48a856dbb9a38575529db37770897bbbaa2b42d,04afd28ed1d0fbc8e6e94fee666f6e9de0cc64ac"
b48a856dbb9a38575529db37770897bbbaa2b42d,b48a856d,"Merge ""Show correct ActionMode title when selecting multiple items.""","Merge ""Show correct ActionMode title when selecting multiple items.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489169221,1489169221,"e8eaf591323b738c16927cc5c1d139b9b4c0669f,ceee00ea039c5007afc39b27ac04720046629040"
40f5c5d9d2ab50d26f3ac46d4e5f157f987b83b5,40f5c5d9,Enable deleting of reading list from reading list activity.,"Enable deleting of reading list from reading list activity.

This fills in the TODO of deleting the whole reading list from the
individual reading list activity.

This is now done by invoking MainActivity and passing it an intent that
contains the title of the reading list to delete.  This title gets picked
up by ReadingListsFragment, and gets deleted via the normal lifecycle of
this fragment.

Change-Id: I00f6906b3cbb298a36e801e617f228487aed8896
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489166430,1489168451,e8eaf591323b738c16927cc5c1d139b9b4c0669f
e8eaf591323b738c16927cc5c1d139b9b4c0669f,e8eaf591,"Merge ""Enable multi-selection of articles in reading list.""","Merge ""Enable multi-selection of articles in reading list.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489168272,1489168272,"8b98b886bbf57374034e9e8af49593ad7ed9f34e,3441244b827bf9aaa832806b1d7d3a23ff05b8ad"
8b98b886bbf57374034e9e8af49593ad7ed9f34e,8b98b886,"Merge ""Introduce multi-selection ActionMode for reading list.""","Merge ""Introduce multi-selection ActionMode for reading list.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489167971,1489167971,"fabd4225cf7495c4d5701ab0475a5f26e817868a,034773f40af0581a29225114659946917d36ede0"
fabd4225cf7495c4d5701ab0475a5f26e817868a,fabd4225,"Merge ""Hygiene: Remove SDK Manager plugin""","Merge ""Hygiene: Remove SDK Manager plugin""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489167743,1489167743,"46213b81e8d9cbb28a156e3e933de5de429a3e0d,8759f1e21c0837fbfc6d9b7836890b3e8925ad11"
ceee00ea039c5007afc39b27ac04720046629040,ceee00ea,Show correct ActionMode title when selecting multiple items.,"Show correct ActionMode title when selecting multiple items.

Bug: T156044
Change-Id: Iac5b7260d1e4eb41f088859259553e78864f6a15
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1489081630,1489167054,3441244b827bf9aaa832806b1d7d3a23ff05b8ad
3441244b827bf9aaa832806b1d7d3a23ff05b8ad,3441244b,Enable multi-selection of articles in reading list.,"Enable multi-selection of articles in reading list.

Bug: T156044
Change-Id: I9c9e0e0e5826556b212e0ba207585827ddc13420
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489080995,1489166945,034773f40af0581a29225114659946917d36ede0
034773f40af0581a29225114659946917d36ede0,034773f4,Introduce multi-selection ActionMode for reading list.,"Introduce multi-selection ActionMode for reading list.

This introduces an ActionMode to be used for multiple selection of items,
generalizable to any place where we have a list of pages.

Bug: T156044
Change-Id: Ib903f9a5fffac02355f671fd77c06ba0ffcd3183
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489080399,1489166855,375ac1ac946b3cf7fa74915e77b553180eefe5db
d67f70027a63d989879ab476d2d625ffa8266399,d67f7002,[Dev] Upgrade Gradle Plugin to 2.3.0,"[Dev] Upgrade Gradle Plugin to 2.3.0

N.B. This requires dropping the android-apt plugin.  It also required some
minor code changes to fix new lint errors (in most cases, where a new
annotation intends to prevent using a method with public accessibility but
not intended for app dev use).

All tests pass with this update.

Release notes are available at
https://developer.android.com/studio/releases/gradle-plugin.html

Bug: T147099
Change-Id: Ie45aff43badbb448bf35651d26dfeffa22cb0b44
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1488817881,1489166697,8759f1e21c0837fbfc6d9b7836890b3e8925ad11
8759f1e21c0837fbfc6d9b7836890b3e8925ad11,8759f1e2,Hygiene: Remove SDK Manager plugin,"Hygiene: Remove SDK Manager plugin

Since version 2.2.0, the Android Gradle plugin should automatically
download packages that a project depends on.  In CI, the Jenkins Android
Emulator plugin maintains the SDK.  This being the case, there's no longer
any reason to keep the SDK Manager plugin.

Bug: T147099
Change-Id: I9c865b7e3db4146068306c909e5d1d5b047ac698
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1488998956,1489166437,e12fcffeb5ccb69180321d26e61ccbe62e7c9702
46213b81e8d9cbb28a156e3e933de5de429a3e0d,46213b81,"Merge ""Prepare PageItemView for multi-selection support.""","Merge ""Prepare PageItemView for multi-selection support.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489164427,1489164427,"a4a763276f961cdbc49ce40085258439930a77ac,375ac1ac946b3cf7fa74915e77b553180eefe5db"
a4a763276f961cdbc49ce40085258439930a77ac,a4a76327,"Merge ""Centralize/simplify add-to-reading-list snackbar.""","Merge ""Centralize/simplify add-to-reading-list snackbar.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489161226,1489161226,"a53762b8c9d175fa51d904fc4b6c26a98d8a3dbc,5cc2c6d5c57eedcd34791e9978bd849b666f0f41"
a53762b8c9d175fa51d904fc4b6c26a98d8a3dbc,a53762b8,"Merge ""Improve scrolling behavior of AddToReadingListDialog.""","Merge ""Improve scrolling behavior of AddToReadingListDialog.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489155240,1489155240,"5626b46d205a4836d0870449bafc7d9c3e7b309f,0b21cb24105fa1567523718641b1a19636f44db4"
5cc2c6d5c57eedcd34791e9978bd849b666f0f41,5cc2c6d5,Centralize/simplify add-to-reading-list snackbar.,"Centralize/simplify add-to-reading-list snackbar.

This snackbar can actually be owned by the AddToList dialog itself, and
doesn't need to be callback'd to the originating activity.

This has the added benefit of automatically providing the snackbar for any
activity that adds items to a reading list, for example News (which
wasn't actually showing a snackbar at all until now).

Change-Id: If1b29f52362f4440448fc85fd5c031390e151d51
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489113031,1489154956,e12fcffeb5ccb69180321d26e61ccbe62e7c9702
5626b46d205a4836d0870449bafc7d9c3e7b309f,5626b46d,"Merge ""Update styling of AddToReadingListDialog.""","Merge ""Update styling of AddToReadingListDialog.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489154892,1489154892,"a7784fb363adbbbfd521e7d19527e393d7bdbff0,85a5551a9d94e017b72063fadbd6336b4085904f"
a7784fb363adbbbfd521e7d19527e393d7bdbff0,a7784fb3,"Merge ""Update: remove featured article card border""","Merge ""Update: remove featured article card border""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489154076,1489154076,"a8788c7afd22396c0d24d1d44f3ad200bcaf5c64,3bb102761e2b77f23b91d2022b9b53251dce9f47"
a8788c7afd22396c0d24d1d44f3ad200bcaf5c64,a8788c7a,Update CSS assets (updates edit pencil styles),"Update CSS assets (updates edit pencil styles)

This week's changes include only those resulting from
Ic561a0f52dbc0cca2ff41d21cff54da597427662.

Bug: T158665
Change-Id: Ief9ae53953f2e5846f0e91b9afbf30e795fdf51d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1489107332,1489107436,e12fcffeb5ccb69180321d26e61ccbe62e7c9702
04afd28ed1d0fbc8e6e94fee666f6e9de0cc64ac,04afd28e,Remove SearchView close button when no text is present,"Remove SearchView close button when no text is present

Bug: T156071
Change-Id: Ibe65477680e3d2129146618db0363ebf07d8a140
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1489011981,1489100192,e12fcffeb5ccb69180321d26e61ccbe62e7c9702
0b21cb24105fa1567523718641b1a19636f44db4,0b21cb24,Improve scrolling behavior of AddToReadingListDialog.,"Improve scrolling behavior of AddToReadingListDialog.

This rearranges some elements in the dialog into a NestedScrollView, so
that the top header (the ""Save to reading list"" message) remains fixed,
but everything else scrolls.

The diff makes it look more intimidating than it is. It really just
introduces a NestedScrollView and puts stuff into it.

Bug: T159339
Change-Id: I0833a758a7c3a2ee8656e8d0acff2c7d0d0751ba
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489095131,1489095756,85a5551a9d94e017b72063fadbd6336b4085904f
3bb102761e2b77f23b91d2022b9b53251dce9f47,3bb10276,Update: remove featured article card border,"Update: remove featured article card border

None of the other cards have an extra border. Make the featured article
card look like the other cards.

Change-Id: I3c1ea81fdedfd9005f37f80c29edd2f9813a3107
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1489084106,1489084106,e12fcffeb5ccb69180321d26e61ccbe62e7c9702
375ac1ac946b3cf7fa74915e77b553180eefe5db,375ac1ac,Prepare PageItemView for multi-selection support.,"Prepare PageItemView for multi-selection support.

This adds provisions to our common PageItemView that will allow it to
enter a ""selected"" state, to be used in RecyclerViews that support
multiple selection.

Bug: T156044
Change-Id: Ia31a196cf32b4ebe18721fcb184ac9502058a3c2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489079367,1489082324,e12fcffeb5ccb69180321d26e61ccbe62e7c9702
e12fcffeb5ccb69180321d26e61ccbe62e7c9702,e12fcffe,"Remove unused code, and resolve the duality of ReadingListsFragment.","Remove unused code, and resolve the duality of ReadingListsFragment.

This tears out the old ReadingListDetailView, and restores
ReadingListsFragment to a singular nature, instead of a dual one.

Change-Id: Ib07df2e5a121d19f82bd0c4593bcb7e68bb0c145
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1489000630,1489078378,35348685c616d32d2ad7ac6bc5598bc7a856fe17
35348685c616d32d2ad7ac6bc5598bc7a856fe17,35348685,"Merge ""Update design of search empty state in reading list fragment.""","Merge ""Update design of search empty state in reading list fragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489078134,1489078134,"da01fccc06d3faa4a749ffb806e5a2c8ca18d2bc,6f5ea6df4a697654842f64885501893d26b0f645"
da01fccc06d3faa4a749ffb806e5a2c8ca18d2bc,da01fccc,"Merge ""Update design of empty state when searching Wikipedia.""","Merge ""Update design of empty state when searching Wikipedia.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489078023,1489078023,"a83286f5e67dac7dc7074474482b6745801a400e,dae02ff82d24e8a58b95af13cabec92170a73f9e"
a83286f5e67dac7dc7074474482b6745801a400e,a83286f5,"Merge ""Make ""View list"" snackbar action go to the specific list.""","Merge ""Make ""View list"" snackbar action go to the specific list.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489078021,1489078022,"ed0d38d85dafa91bc5f147420ed3588d85cce597,8a90571ad6af604cca3a6aca4a2a3db6af6b5ea8"
ed0d38d85dafa91bc5f147420ed3588d85cce597,ed0d38d8,"Merge ""Correctly show feed card dismissal snackbar.""","Merge ""Correctly show feed card dismissal snackbar.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489078021,1489078021,"da005be5afa5dac3f7c0572521c5fe544a870ebd,c5fb60ad527c357b1d7e576df280dd5320847608"
85a5551a9d94e017b72063fadbd6336b4085904f,85a5551a,Update styling of AddToReadingListDialog.,"Update styling of AddToReadingListDialog.

Tweak some of the design of this dialog, including:
- Don't have a decorator between each item.
- Update the icon and the style of the ""add"" thumbnail image.

Bug: T159333
Change-Id: Ib686a1869a55c063a76ef22a241ed289b61d4064
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488924359,1489071920,da005be5afa5dac3f7c0572521c5fe544a870ebd
da005be5afa5dac3f7c0572521c5fe544a870ebd,da005be5,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489071300,1489071300,"be3957e1a2d4ef2caadc0f644566a7dd475692a6,4d90b038c19ebe1813afa28d2b26976574a1f40d"
6f5ea6df4a697654842f64885501893d26b0f645,6f5ea6df,Update design of search empty state in reading list fragment.,"Update design of search empty state in reading list fragment.

Bug: T156086
Change-Id: Iba64eef2fbd83a3d4f754799d12dd9720647826e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489065395,1489068257,0eb20a9baa8179488d7befc1f4e922d7c3785606
dae02ff82d24e8a58b95af13cabec92170a73f9e,dae02ff8,Update design of empty state when searching Wikipedia.,"Update design of empty state when searching Wikipedia.

...and butter up SearchResultsFragment, while we're at it.

Bug: T156086
Change-Id: Ic570db7bef4db6e06d9139c7109de299448bd110
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489067374,1489068182,0eb20a9baa8179488d7befc1f4e922d7c3785606
8a90571ad6af604cca3a6aca4a2a3db6af6b5ea8,8a90571a,"Make ""View list"" snackbar action go to the specific list.","Make ""View list"" snackbar action go to the specific list.

...instead of the ""my lists"" screen.
Also add the ""View list"" action to the snackbar in PageActivity.

Bug: T160064
Bug: T156085
Change-Id: Ibe70c25579037b0879e1d0171b8e267c5b08f871
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489068018,1489068018,0eb20a9baa8179488d7befc1f4e922d7c3785606
4d90b038c19ebe1813afa28d2b26976574a1f40d,4d90b038,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id788a52b2c5c28399069331ef71c05bb5ec76a3b
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1489043231,1489043231,0eb20a9baa8179488d7befc1f4e922d7c3785606
be3957e1a2d4ef2caadc0f644566a7dd475692a6,be3957e1,Hygiene: move ImageUrlMapTest to Robolectric,"Hygiene: move ImageUrlMapTest to Robolectric

Change-Id: If29a9e4fbd496220665533ca7c9f0e4cfc3d198d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1489025412,1489025412,c20a6fd79cd9a5f7e2397dbbbd35409ffa1caba5
c20a6fd79cd9a5f7e2397dbbbd35409ffa1caba5,c20a6fd7,Upgrade: Robolectric to v3.3.1,"Upgrade: Robolectric to v3.3.1

https://github.com/robolectric/robolectric/releases/tag/robolectric-3.3.1

Change-Id: I31ae9cc131121540cf39b24a60ea192776968720
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1489025357,1489025357,0eb20a9baa8179488d7befc1f4e922d7c3785606
c5fb60ad527c357b1d7e576df280dd5320847608,c5fb60ad,Correctly show feed card dismissal snackbar.,"Correctly show feed card dismissal snackbar.

This snackbar was being attached to the incorrect View, and was
incorrectly being shown on top of the bottom navigation bar.

Also, no longer allow public access to make a snackbar by View.

Change-Id: I2faaea94ebb259bac8198bd06d3e33f647437d89
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489018265,1489018360,0eb20a9baa8179488d7befc1f4e922d7c3785606
0eb20a9baa8179488d7befc1f4e922d7c3785606,0eb20a9b,Make a 3x2 thumbnail composite at the top of reading list screen.,"Make a 3x2 thumbnail composite at the top of reading list screen.

Bug: T159719
Change-Id: I57e3319f89eb4a332db04283e34f1fd438211dc5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1488898999,1489010321,0815bc483dea88c30d95234b6928191ba01c98d4
0815bc483dea88c30d95234b6928191ba01c98d4,0815bc48,"Add ""empty"" indicator to reading list fragment.","Add ""empty"" indicator to reading list fragment.

Bug: T156073
Change-Id: Ibb8f170a019885c9dd35ea835f3694a6e7eccc40
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1488920950,1489010311,040ef5c7d75b5abdd973ff6690ede0e5e6107037
040ef5c7d75b5abdd973ff6690ede0e5e6107037,040ef5c7,"Merge ""Maintain per-wiki IDs for the logged-in user""","Merge ""Maintain per-wiki IDs for the logged-in user""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489010204,1489010204,"57668e8f6401c68f6d6253b125f0406bb9bc5d5b,eedfcb8c6a78342091d0f2169d626728adb68eea"
57668e8f6401c68f6d6253b125f0406bb9bc5d5b,57668e8f,"Merge ""Add info header to reading list fragment.""","Merge ""Add info header to reading list fragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489009915,1489009915,"36e9ca9f83f10b1e54d3d21f4bbe6f07199a87d0,ab5a048cc322144ba6c5bd6da394eb65b4aaf0df"
36e9ca9f83f10b1e54d3d21f4bbe6f07199a87d0,36e9ca9f,"Merge ""Use adjustResize, not adjustPan.""","Merge ""Use adjustResize, not adjustPan.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489009349,1489009349,"ebb4a0eb5d059c4093900482ba9002eaa33ca598,3d45f047742f22e644767253886c4dc8a61f3e85"
ab5a048cc322144ba6c5bd6da394eb65b4aaf0df,ab5a048c,Add info header to reading list fragment.,"Add info header to reading list fragment.

This is the header that shows the reading list title, description, and
article count at the top of the actual list of articles.

This is done by reusing the custom ReadingListItemView which is used for
showing the list of lists. We extend this view to accommodate a bit of
customization required for this purpose.

This header view is actually shown as another item in the RecyclerView,
but with a different ""type"", which distinguishes it from the page item
views.

Bug: T156073
Change-Id: I70be15f0be88a609a6426ce8b7fb222bd0bce26d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488920280,1489006923,c9b5ddca9285df5a0706fd75d2ee841d990327b8
3d45f047742f22e644767253886c4dc8a61f3e85,3d45f047,"Use adjustResize, not adjustPan.","Use adjustResize, not adjustPan.

In MainActivity, invoking the soft keyboard doesn't actually resize the
screen contents to fit within the new viewport with the keyboard shown.
This means that cretain portions of the screen are inaccessible when the
keyboard is shown. (For example, go to History and click the Search icon
to show the keyboard, then try to scroll to the bottom. The last few items
in the list will be obscured by the keyboard.)

This fixes the issue by giving the activity a flag of ""adjustResize""
instead of ""adjustPan"". We also set this flag programmatically for the
LanguagePreferenceDialog.

This does NOT address the issue in PageActivity, because the adjustResize
flag actually has no effect for full-screen activities with a WebView.
This is a known issue that is ""working as intended"":
https://code.google.com/p/android/issues/detail?id=5497

Bug: T130407
Change-Id: I0a26b28660d7ff44f9b4abdf0157f13348e3545b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1489005770,1489005770,09c48950a4978f3af677fefe0fd2f632d3e53ab8
ebb4a0eb5d059c4093900482ba9002eaa33ca598,ebb4a0eb,"Merge ""Make reading list items clickable and swipeable (with undo).""","Merge ""Make reading list items clickable and swipeable (with undo).""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489005430,1489005430,"f201b39bfe2b0ec1ec504c7bf3d597c0114b089e,c9b5ddca9285df5a0706fd75d2ee841d990327b8"
f201b39bfe2b0ec1ec504c7bf3d597c0114b089e,f201b39b,"Merge ""Enable sorting in reading list fragment.""","Merge ""Enable sorting in reading list fragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489005207,1489005207,"950956ad3de185cdd4bf3379a33ea15388bf8211,8b7179f943a2b70607151300ff43d4df8b327b41"
950956ad3de185cdd4bf3379a33ea15388bf8211,950956ad,"Merge ""Make reading list searchable via ActionMode.""","Merge ""Make reading list searchable via ActionMode.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489005103,1489005103,"9cc52d232459082c43ada3426ce09c6fb2ec0eea,e0bcc94bdae98e4b8412f71de025753087fd5e25"
9cc52d232459082c43ada3426ce09c6fb2ec0eea,9cc52d23,"Merge ""Conditionally show reading list overflow menu on scroll.""","Merge ""Conditionally show reading list overflow menu on scroll.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1489004864,1489004864,"09c48950a4978f3af677fefe0fd2f632d3e53ab8,8a0d8ae8fc8dd862d00ee0a29e02f088636a093c"
09c48950a4978f3af677fefe0fd2f632d3e53ab8,09c48950,No longer auto-hide bottom navigation.,"No longer auto-hide bottom navigation.

A collective design decition that also simplifies things a bit.
This still requires us to keep the custom Behavior for the bottom
navigation component, to make sure SnackBars appear above it.

Change-Id: I3b539d632798ec8612285d72befdea1503893a9c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488996341,1489002678,84abed3bf78d83b0b807cc70c4bd45e239162a8b
84abed3bf78d83b0b807cc70c4bd45e239162a8b,84abed3b,"Butter up HistoryFragment, and update design of empty search state.","Butter up HistoryFragment, and update design of empty search state.

Bug: T156086
Change-Id: I98ca3ba08da5165df4856647916dafed50527749
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1488988682,1488998142,bfa7deefde8b83223b3c6d8a3cd529499ed24735
bfa7deefde8b83223b3c6d8a3cd529499ed24735,bfa7deef,"Merge ""Update design of empty search results in reading lists.""","Merge ""Update design of empty search results in reading lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488997852,1488997852,"c2e5e96bc9377b762f1021a2cd5905afa441e5c6,e8f3abee6ed687eb05bc68a10a804317a972a532"
c2e5e96bc9377b762f1021a2cd5905afa441e5c6,c2e5e96b,"Merge ""Hygiene: use HTTP POST for EventLogging""","Merge ""Hygiene: use HTTP POST for EventLogging""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488996932,1488996932,"c90d068b739e53337f0e8219319723ebf6cfe142,94bfb5a721cf97eb8b9fb5172bb67eca1af155a2"
e8f3abee6ed687eb05bc68a10a804317a972a532,e8f3abee,Update design of empty search results in reading lists.,"Update design of empty search results in reading lists.

This introduces a custom View that encapsulates a ""no results found""
message and a loupe icon, and can be reused wherever we'll need to display
a no-results indication.

Bug: T156086
Change-Id: I95817b5d782dd27c990fbe94c9d83383167c14ba
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488986770,1488996930,7514a0e2e4cd77e8c8ce57e9124da8e4808e28ed
c90d068b739e53337f0e8219319723ebf6cfe142,c90d068b,"Merge ""Update design of empty history screen.""","Merge ""Update design of empty history screen.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488995536,1488995536,"f3733e45ced11164f3488adbe13f23300b4335b2,7514a0e2e4cd77e8c8ce57e9124da8e4808e28ed"
f3733e45ced11164f3488adbe13f23300b4335b2,f3733e45,"Merge ""Update design of empty state of reading lists.""","Merge ""Update design of empty state of reading lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488994281,1488994281,"6c2535d2fe58486da6e38f33a86470cf996eeb60,ae5abb16c7be240c18a7a6e876b23ce9dc4abdff"
eedfcb8c6a78342091d0f2169d626728adb68eea,eedfcb8c,Maintain per-wiki IDs for the logged-in user,"Maintain per-wiki IDs for the logged-in user

A user may edit a page for a wiki other than the app's current language
state.  We should log the appropriate ID for the wiki.  Currently we
use the id for the app language state.

This updates user ID handling to maintain a map of the languages with
which the user interacts, so that the appropriate one may be logged when
the user makes an edit.

Change-Id: Ia86803be5c861f7e2dbded43f691dbc13b0c7fbb
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1486086980,1488994105,6c2535d2fe58486da6e38f33a86470cf996eeb60
94bfb5a721cf97eb8b9fb5172bb67eca1af155a2,94bfb5a7,Hygiene: use HTTP POST for EventLogging,"Hygiene: use HTTP POST for EventLogging

Since recording a funnel event changes server state, a POST seems more
appropriate than a GET. I can't find any documentation on what's
actually expected. Also update dev endpoint to HTTPS since the server
requires it for POSTs and forbid messages that are too lengthy in
non-prod.

Change-Id: I3291c32193d51e2ff9f197e471129fda12444813
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487108762,1488993572,4696e3af6a3edce2b82beb5c5bc3e67c19a6faf4
7514a0e2e4cd77e8c8ce57e9124da8e4808e28ed,7514a0e2,Update design of empty history screen.,"Update design of empty history screen.

Bug: T146651
Change-Id: I53b5875ea401f5b8a185ce6e62406d7b98d23119
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488982221,1488983140,ae5abb16c7be240c18a7a6e876b23ce9dc4abdff
ae5abb16c7be240c18a7a6e876b23ce9dc4abdff,ae5abb16,Update design of empty state of reading lists.,"Update design of empty state of reading lists.

Bug: T146652
Change-Id: Ifefe0f8477de9b3118db49db60c4f21b4bf1efb5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488981155,1488983047,72648447c72147f2fd9183a2cf7b92aa548b2eb7
c9b5ddca9285df5a0706fd75d2ee841d990327b8,c9b5ddca,Make reading list items clickable and swipeable (with undo).,"Make reading list items clickable and swipeable (with undo).

Bug: T156073
Change-Id: Id4f306d59084a3a23eda67c887194ea76777b44b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488919593,1488932072,8b7179f943a2b70607151300ff43d4df8b327b41
8b7179f943a2b70607151300ff43d4df8b327b41,8b7179f9,Enable sorting in reading list fragment.,"Enable sorting in reading list fragment.

Bug: T156073
Change-Id: Ia456b85b94ecf76ce1545c3b36fe566e412cdbff
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1488918785,1488931938,e0bcc94bdae98e4b8412f71de025753087fd5e25
e0bcc94bdae98e4b8412f71de025753087fd5e25,e0bcc94b,Make reading list searchable via ActionMode.,"Make reading list searchable via ActionMode.

Bug: T156073
Change-Id: I4b48280ae9251e2ebcdffb52c36684348252b808
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488917762,1488931631,8a0d8ae8fc8dd862d00ee0a29e02f088636a093c
8a0d8ae8fc8dd862d00ee0a29e02f088636a093c,8a0d8ae8,Conditionally show reading list overflow menu on scroll.,"Conditionally show reading list overflow menu on scroll.

Also on scroll, conditionally show the reading list title in the toolbar.

Bug: T156073
Change-Id: I1d4386aa549ce89f68a2a8b8b34fd28fa369fb7a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488917039,1488931152,6c2535d2fe58486da6e38f33a86470cf996eeb60
6c2535d2fe58486da6e38f33a86470cf996eeb60,6c2535d2,Add options menu to reading list fragment.,"Add options menu to reading list fragment.

Bug: T156073
Change-Id: Iff8979287c9825ac5dce20aba2da1d83b312572a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1488916775,1488930980,8df0ab0005bb87914189ef5879891298251fc409
8df0ab0005bb87914189ef5879891298251fc409,8df0ab00,Populate reading list screen with reading list items.,"Populate reading list screen with reading list items.

Bug: T156073
Change-Id: Ib3a52cb08067f1b30d24d2add36b3ea37014c93b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488916419,1488930590,f700ba31225e15695d41e661b7638add7bdb95c1
f700ba31225e15695d41e661b7638add7bdb95c1,f700ba31,Ascertain reading list from title passed through intent.,"Ascertain reading list from title passed through intent.

Bug: T156073
Change-Id: I0f25ab7659eb5411f19e7988a865a0e19d0320bd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488915693,1488928623,72648447c72147f2fd9183a2cf7b92aa548b2eb7
72648447c72147f2fd9183a2cf7b92aa548b2eb7,72648447,"Merge ""Create custom view for page list items for use in RecyclerViews.""","Merge ""Create custom view for page list items for use in RecyclerViews.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488928039,1488928039,"c9ab1893fc49d57f805d4af5055b3497eb87c768,fb1761e36c80a0d742cb060130ee84f1805a3600"
fb1761e36c80a0d742cb060130ee84f1805a3600,fb1761e3,Create custom view for page list items for use in RecyclerViews.,"Create custom view for page list items for use in RecyclerViews.

This introduces a custom view that represents a general-use page list item
that can be reused in any list of page titles, e.g. reading lists,
history, search results, etc.

This also adds an ""action button"" to each list item, which is hidden by
default, but can be enabled for any consumer that needs it.

Bug: T156073
Change-Id: Ia499b8cfd4902ea15af316c8250b7aa1d2c7e21c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488914962,1488926770,54572e2937fe05dd8279c1cb34674ac5ae5c23ec
c9ab1893fc49d57f805d4af5055b3497eb87c768,c9ab1893,"Merge ""Revert ""Update: use app language for UI""""","Merge ""Revert ""Update: use app language for UI""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488925291,1488925291,"54572e2937fe05dd8279c1cb34674ac5ae5c23ec,bb40d3546ce3c215d18bc68c09ed0e39717ed2e4"
54572e2937fe05dd8279c1cb34674ac5ae5c23ec,54572e29,Add new Activity for individual reading list.,"Add new Activity for individual reading list.

This adds a blank activity that holds a fragment that holds the basic
layout for interacting with an individual reading list.

This includes logic to pass the title of the reading list through the
activity's intent, so that the fragment will pick it up when it's
instantiated.

Bug: T156073
Change-Id: I953a569a6ab238efc19c7e0f0ac0640cbb7a60b6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488914668,1488914668,4696e3af6a3edce2b82beb5c5bc3e67c19a6faf4
bb40d3546ce3c215d18bc68c09ed0e39717ed2e4,bb40d354,"Revert ""Update: use app language for UI""","Revert ""Update: use app language for UI""

This reverts commit 749938a59c379a8c9195fb1a0d212bc26ada6d78 except for
the null check

Bug: T142019
Bug: T159000
Change-Id: I21319eab7d35aa07a4d92edea8222fb3706f5e6a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488903214,1488903290,4696e3af6a3edce2b82beb5c5bc3e67c19a6faf4
4696e3af6a3edce2b82beb5c5bc3e67c19a6faf4,4696e3af,"Merge ""Hygiene: upgrade Robolectric to v3.3""","Merge ""Hygiene: upgrade Robolectric to v3.3""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488901379,1488901379,"392233e423f1504188266c51e619c48b4a425476,81f6ae4b933ae14ea43c5909ef83630848288e69"
81f6ae4b933ae14ea43c5909ef83630848288e69,81f6ae4b,Hygiene: upgrade Robolectric to v3.3,"Hygiene: upgrade Robolectric to v3.3

Also upgrade API tested to v24

https://github.com/robolectric/robolectric/releases/tag/robolectric-3.1.3
https://github.com/robolectric/robolectric/releases/tag/robolectric-3.1.4
https://github.com/robolectric/robolectric/releases/tag/robolectric-3.2
https://github.com/robolectric/robolectric/releases/tag/robolectric-3.2.1
https://github.com/robolectric/robolectric/releases/tag/robolectric-3.2.2
https://github.com/robolectric/robolectric/releases/tag/robolectric-3.3

Change-Id: I58606a06c4a392e4772ddd70ae8545ad4f6db399
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488837801,1488838091,3d78d3918f09b23e9a4b449c0aee70e754f1ab74
392233e423f1504188266c51e619c48b4a425476,392233e4,Hygiene: allow PageClients requestors to specify a/synchronicity,"Hygiene: allow PageClients requestors to specify a/synchronicity

Bug: T156917
Change-Id: I470c3ecc2c18434d89c3f6c28b3db002201452a5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488498834,1488823381,3d78d3918f09b23e9a4b449c0aee70e754f1ab74
3d78d3918f09b23e9a4b449c0aee70e754f1ab74,3d78d391,"Merge ""Make SnackBars appear above BottomNavigationView.""","Merge ""Make SnackBars appear above BottomNavigationView.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488821500,1488821500,"3c270ad81b1a3ef716b9db5e9a01993be0dd41dd,e4c2fa94d45a7d303857f6d2f45efe6b67732d9b"
e4c2fa94d45a7d303857f6d2f45efe6b67732d9b,e4c2fa94,Make SnackBars appear above BottomNavigationView.,"Make SnackBars appear above BottomNavigationView.

This is done by adding code to our custom Behavior that we use for the
BottomNavigationView. It now intercepts event when a Snackbar is added to
the CoordinatorLayout, and gives the Snackbar a bottom margin equal to
the height of the BottomNavigationView.  This means that we will now
explicitly show the bottom bar when a Snackbar is added, and prevent
hiding of the bottom bar for the duration of a Snackbar being shown.

(The Support library doesn't seem to have provisions to handle this
automatically.)

Bug: T159566
Change-Id: Ic56fc3a46bf1e9a3e309f85e86dbfc8bb889025d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488814749,1488820291,3f7fa54b47566b5d0c3174c9fa3c7c56bc29661d
3c270ad81b1a3ef716b9db5e9a01993be0dd41dd,3c270ad8,"Merge ""Hygiene: replace all Response.isSuccessful() calls with interceptor""","Merge ""Hygiene: replace all Response.isSuccessful() calls with interceptor""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488811851,1488811851,"2941708d507f9b61032dee1ae67ebf426146a90f,cc2a33e1dc2689f219c960f81ff1d8b246270100"
2941708d507f9b61032dee1ae67ebf426146a90f,2941708d,"Merge ""Hygiene: hold WikiCachedService in clients, not implementation""","Merge ""Hygiene: hold WikiCachedService in clients, not implementation""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488810882,1488810882,"74d63ca93927befc6ef3f264bc0398bae58e25af,77a3c9cf41fdaa41e946ed7b21c1e3ec1a7f4ea8"
74d63ca93927befc6ef3f264bc0398bae58e25af,74d63ca9,"Merge ""Hygiene: consolidate service caches into WikiCachedService""","Merge ""Hygiene: consolidate service caches into WikiCachedService""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488810281,1488810281,"3f7fa54b47566b5d0c3174c9fa3c7c56bc29661d,67724b6ba1eb8d719732298e0ea5f4d8fb3c5296"
3f7fa54b47566b5d0c3174c9fa3c7c56bc29661d,3f7fa54b,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I88aa50b9c2f49c0c857835e4723c800eaa4983c7
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1488787749,1488787749,3cd29d2c5bed5d58a5f353a320ba67d250b65d70
cc2a33e1dc2689f219c960f81ff1d8b246270100,cc2a33e1,Hygiene: replace all Response.isSuccessful() calls with interceptor,"Hygiene: replace all Response.isSuccessful() calls with interceptor

Bug: T156917
Change-Id: I845fa6bc1c1e0ad5a8f38f0ca132285b8930809f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488491448,1488564065,77a3c9cf41fdaa41e946ed7b21c1e3ec1a7f4ea8
77a3c9cf41fdaa41e946ed7b21c1e3ec1a7f4ea8,77a3c9cf,"Hygiene: hold WikiCachedService in clients, not implementation","Hygiene: hold WikiCachedService in clients, not implementation

Bug: T156917
Change-Id: If65ac650f9c392807329093eac03c434f37c4098
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488476055,1488564065,67724b6ba1eb8d719732298e0ea5f4d8fb3c5296
67724b6ba1eb8d719732298e0ea5f4d8fb3c5296,67724b6b,Hygiene: consolidate service caches into WikiCachedService,"Hygiene: consolidate service caches into WikiCachedService

Bug: T156917
Change-Id: I3e24dea70b84478c7bd067e056a3d740b2ddff05
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488475968,1488564065,3cd29d2c5bed5d58a5f353a320ba67d250b65d70
3cd29d2c5bed5d58a5f353a320ba67d250b65d70,3cd29d2c,Hygiene: isolate the Retrofit *PageClient services,"Hygiene: isolate the Retrofit *PageClient services

Bug: T156917
Change-Id: I5d0b60163e0a33e3140f7527710645228f898d7e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488436588,1488564065,93e6bd576e3c11e44b100d574b030d7240858ccf
93e6bd576e3c11e44b100d574b030d7240858ccf,93e6bd57,Hygiene: move Wikipedia Zero header checks from clients to response interceptor,"Hygiene: move Wikipedia Zero header checks from clients to response interceptor

Additionally, consider all responses except cached.

In development flavors, disable event logging under settings to avoid
rapid on / off notifications.

Bug: T156917
Change-Id: I7341957e90b286044b34fb61095e7e329a1cd656
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488431146,1488564065,800bfc940bb685684096f31d3975449a69ed0f74
800bfc940bb685684096f31d3975449a69ed0f74,800bfc94,"Merge ""Upgrade to Mapbox 5.0.0""","Merge ""Upgrade to Mapbox 5.0.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488562658,1488562658,"d7111949a0d639714b0ba58f0b1bc38622570b1f,72ff78a841401ac2e574998a86777079a319cbee"
d7111949a0d639714b0ba58f0b1bc38622570b1f,d7111949,"Merge ""Update section edit pencil styles""","Merge ""Update section edit pencil styles""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488562500,1488562500,"d4216b58b3bad1365a79fcc9f45ff5b249359534,3513a00637065c13ebd467fc70a1ad6feb9e4b98"
d4216b58b3bad1365a79fcc9f45ff5b249359534,d4216b58,"Merge ""Update styling of Reading Lists screen.""","Merge ""Update styling of Reading Lists screen.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488562272,1488562272,"bbed9cb0e3295de5c80f66f91f2ccd4e6169c907,4eb070f75e2bb95a0b9802fd5f1453f97d138624"
bbed9cb0e3295de5c80f66f91f2ccd4e6169c907,bbed9cb0,"Merge ""Hygiene: clean up empty string checks""","Merge ""Hygiene: clean up empty string checks""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488560942,1488560942,"9707dcf6b2c319fedb95e30ff27cdc4e4f1ae75d,bf454cbe9c4f22b730dc309887227c52c4d8b371"
9707dcf6b2c319fedb95e30ff27cdc4e4f1ae75d,9707dcf6,"Merge ""Hygiene: move MediaWiki fallback checks from clients to response interceptor""","Merge ""Hygiene: move MediaWiki fallback checks from clients to response interceptor""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488560931,1488560931,"330173cc886307247804b202c3b550b5c6bae8b8,7f3c6f5eeb4c2712580c19f8cd12e6e94c7ed815"
72ff78a841401ac2e574998a86777079a319cbee,72ff78a8,Upgrade to Mapbox 5.0.0,"Upgrade to Mapbox 5.0.0

This pulls in the very latest version of the Mapbox SDK, and updates our
usage of it to conform with any refactors:

- The public token must now be fed into the Mapbox class via
  getInstance().
- A marker icon can no longer be created fromDrawable(), and now must be
  created fromBitmap(). (that is, when creating from a vector drawable.)
- Added onStart() and onStop() methods that need to be fed into the
  MapView.
- The style URL is now passed via XML attribute
- Renaming of telemetry service.
- No longer necessary to tweak Mapbox's SharedPreferences to turn off
  telemetry.
- Rearranged XML layout of Nearby fragment to better accommodate FAB and
  the bearing compass within the MapView.

Bug: T146776
Change-Id: I0d939f7ae5e2550f25f3f10b60ec532165f690cc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487367207,1488560405,a9002996f0f4da33c39bada210f15a5e4f7134fb
3513a00637065c13ebd467fc70a1ad6feb9e4b98,3513a006,Update section edit pencil styles,"Update section edit pencil styles

Pulls in the recent changes to MobileApp from
Ie19c48720ddd4e99ad6bf98ab7ecf819898aa911.

Bug: T151468
Change-Id: Ic1ed5a4937a5e7c529295782f177bf734b9cc5c2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1488559059,1488559167,330173cc886307247804b202c3b550b5c6bae8b8
4eb070f75e2bb95a0b9802fd5f1453f97d138624,4eb070f7,Update styling of Reading Lists screen.,"Update styling of Reading Lists screen.

This updates the UX of the ""all reading lists"" screen to match the new
designs.

- Removed the ""edit pencil"" button from the reading list detail screen.
- Created a general-purpose TextInputDialog that facilitates entry of a
  single line of text via a dialog (with all the affordances of the
  standard TextInputLayout).
- Made use of the above dialog to allow the user to name (and rename)
  reading lists, and change their descriptions.
- Added overflow menu to each reading list item, with options to edit the
  name and description of the list, or delete it.
- Updated the style and behavior of the 2x2 thumbnail of the reading list.

Apologies for the size of this patch, but it was kind of all-or-nothing.

Bug: T156007
Change-Id: I3c179b66fde409d2a4c05dd0df787e9535fc3347
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487985714,1488554629,a9002996f0f4da33c39bada210f15a5e4f7134fb
330173cc886307247804b202c3b550b5c6bae8b8,330173cc,"Merge ""Language filter should not permit multiline input""","Merge ""Language filter should not permit multiline input""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488554456,1488554456,"42ee5efe6273a129d0a8b0ffc44d462a0a0f02b0,6873a9cb5433ad5f72938de4b1234a5d6d3b30c5"
42ee5efe6273a129d0a8b0ffc44d462a0a0f02b0,42ee5efe,"Merge ""Hygiene: consolidate RESTBase and MobileView URL comparisons""","Merge ""Hygiene: consolidate RESTBase and MobileView URL comparisons""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488553941,1488553941,"f5f6c5bec6345a4f01697fea085a349dd3e8ccc9,e35e717af9f85826bd5a09448d66676269e46d44"
f5f6c5bec6345a4f01697fea085a349dd3e8ccc9,f5f6c5be,Update bundled CSS,"Update bundled CSS

Pulls in the latest updates deployed to Wikimedia wikis this week.

This appears to contain only linting fixes and no functional changes.

Change-Id: Ib0dcc8410c46ecefbd0ad6a8e32fec29d39edaf1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1488552879,1488552879,72b3836cd472cb79d011acc6f0d7dc2783c2982e
72b3836cd472cb79d011acc6f0d7dc2783c2982e,72b3836c,"Merge ""Hygiene: rename PageDataClient to PageFragmentLoadState""","Merge ""Hygiene: rename PageDataClient to PageFragmentLoadState""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488552578,1488552578,"9ea99fa0e5c05b817a10aea05a7e33ac0a5c3238,187a7dc002d79823cd854ca538557c20bfd98be3"
9ea99fa0e5c05b817a10aea05a7e33ac0a5c3238,9ea99fa0,"Merge ""Hygiene: delete PageLoadStrategy""","Merge ""Hygiene: delete PageLoadStrategy""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488551642,1488551642,"9cb86f8ea9c275d748130f8f338c444dca75c648,efbfc0b74ba7e21c0aab0d8ac8b0008e94fea466"
9cb86f8ea9c275d748130f8f338c444dca75c648,9cb86f8e,"Merge ""Hygiene: rename PageService classes to PageClients""","Merge ""Hygiene: rename PageService classes to PageClients""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488551099,1488551099,"42b00c8dea6a0b4df0d8cebd0cf86308daaae1af,ed0306814883d11a125abff045438375a788dc3e"
6873a9cb5433ad5f72938de4b1234a5d6d3b30c5,6873a9cb,Language filter should not permit multiline input,"Language filter should not permit multiline input

Bug: T158940
Change-Id: Ibfacd823daede1c5b84757e4058eff93ec40365d
Signed-off-by: Codrut Grosu <codrut.cristian.grosu@gmail.com>
",,,,Codrut Grosu,codrut.cristian.grosu@gmail.com,Codrut Grosu,codrut.cristian.grosu@gmail.com,1488029627,1488549387,257a568057e692a2c87fa792da2bf62a47ffe9ff
42b00c8dea6a0b4df0d8cebd0cf86308daaae1af,42b00c8d,"Merge ""Update page header view edit pencil/popup menu styling""","Merge ""Update page header view edit pencil/popup menu styling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488547970,1488547970,"e1396eee0dc60e01da6b9fe48503346f5eb2725b,1025dffddb0d998746d9aebbcfe3890ff3cd837f"
bf454cbe9c4f22b730dc309887227c52c4d8b371,bf454cbe,Hygiene: clean up empty string checks,"Hygiene: clean up empty string checks

Replace calls to StringUtils.defaultString(String).equals("""") with
isEmpty(), fix nullity concern in WikipediaZeroHandler.onHeaderCheck(),
and replace call to defaultString(String, """") with defaultString(String)

Bug: T156917
Change-Id: I432222fd286f80dc702e2fe04d22a7f9e46e17ad
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488427589,1488499034,7f3c6f5eeb4c2712580c19f8cd12e6e94c7ed815
7f3c6f5eeb4c2712580c19f8cd12e6e94c7ed815,7f3c6f5e,Hygiene: move MediaWiki fallback checks from clients to response interceptor,"Hygiene: move MediaWiki fallback checks from clients to response interceptor

For testing, change the RESTBaseUriFormat dev setting to
http://host:6927/%2$s/v1/ on a fresh install, start a local Content
Service instance, and observe that the requestSucesses dev setting
remains unset after making several successful page requests. Then stop
the Content Service instance, make an endpoint throw an unexpected
error[0], and exercise the endpoint. requestSuccesses should drop to -1
for errors, then back to 0 once successful endpoints are interacted with

This patch is intended to refactor the existing functionality to use
interceptors but no other functional change is intended except:

 • All requests are now considered

 • RESTBase development endpoints are now considered by the app to be
   RESTBase endpoints

[0] For example, add `throw new Error` to the start of
    parseDefinition.hasUsageExamples() and then try to define a word in
    the app

Bug: T156917
Change-Id: Ie0526793f2577eaade2ffc365c2d0a9cf54e2ead
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488411790,1488499034,e35e717af9f85826bd5a09448d66676269e46d44
e35e717af9f85826bd5a09448d66676269e46d44,e35e717a,Hygiene: consolidate RESTBase and MobileView URL comparisons,"Hygiene: consolidate RESTBase and MobileView URL comparisons

Bug: T156917

Change-Id: I2877a67fd2a3955e270fe2590d2bd23d7376e245
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488411475,1488499034,187a7dc002d79823cd854ca538557c20bfd98be3
187a7dc002d79823cd854ca538557c20bfd98be3,187a7dc0,Hygiene: rename PageDataClient to PageFragmentLoadState,"Hygiene: rename PageDataClient to PageFragmentLoadState

Page data client responsibilities are held by PageClient. PageDataClient
largely keeps PageFragment's state around tabs and WebView interactions.
This body of code obviously needs more work but I think this name is
truer to its current functionality.

Bug: T156917
Change-Id: I3d81158b47841bd199623a679f1cf3c6b7652148
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488392962,1488499034,efbfc0b74ba7e21c0aab0d8ac8b0008e94fea466
efbfc0b74ba7e21c0aab0d8ac8b0008e94fea466,efbfc0b7,Hygiene: delete PageLoadStrategy,"Hygiene: delete PageLoadStrategy

The PageLoadStrategy interface is so tightly coupled to the UI, it's not
practical to substitute new strategies and makes it more difficult to
change the single implementation.

Bug: T156917
Change-Id: I16058fb9469850a95c1bebfd1d3dc4ffb8c28c61
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488392697,1488499034,ed0306814883d11a125abff045438375a788dc3e
ed0306814883d11a125abff045438375a788dc3e,ed030681,Hygiene: rename PageService classes to PageClients,"Hygiene: rename PageService classes to PageClients

Bug: T156917
Change-Id: Ib239c7c2edb47b0d93dfb93a0d1a3148637291d3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488392508,1488499034,e1396eee0dc60e01da6b9fe48503346f5eb2725b
e1396eee0dc60e01da6b9fe48503346f5eb2725b,e1396eee,"Merge ""Add current license hashes to repo to ensure auto-downloading in CI""","Merge ""Add current license hashes to repo to ensure auto-downloading in CI""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488494031,1488494031,"a7f7c7aa7b057928a9c3caec5bc55f910771cebe,4c0cdc03878ea17fca4f46db9ed23821c76e97d4"
4c0cdc03878ea17fca4f46db9ed23821c76e97d4,4c0cdc03,Add current license hashes to repo to ensure auto-downloading in CI,"Add current license hashes to repo to ensure auto-downloading in CI

Gradle will automatically download missing SDK packages when a build is
run, but only provided the relevant licenses are accepted.  We can avoid
the need for manual intervention for license acceptance by keeping an up-
to-date copy of a /licenses directory that can be symlinked from the SDK
/licenses directory on integration-slave-jessie-android.[1]

Example update command:
rm -rf licenses/ && cp -a $ANDROID_HOME/licenses .

[1] https://code.google.com/p/android/issues/detail?id=212128#c21

Bug: T147099
Change-Id: I1cad5f62404096d59ad3b37672c2405730b97226
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487375582,1488490161,6b224a6ea97f34a3e284f432b82cbf3e53496e7c
1025dffddb0d998746d9aebbcfe3890ff3cd837f,1025dffd,Update page header view edit pencil/popup menu styling,"Update page header view edit pencil/popup menu styling

Bug: T151468
Change-Id: Ia2369d2fb7b032719c2b7046361e5c97d7293fc8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1488482845,1488482845,6b224a6ea97f34a3e284f432b82cbf3e53496e7c
a7f7c7aa7b057928a9c3caec5bc55f910771cebe,a7f7c7aa,Hygiene: remove duplicate method in WidgetProviderFeaturedPage,"Hygiene: remove duplicate method in WidgetProviderFeaturedPage

Bug: T156917
Change-Id: Ifd56396118d2103635a58ed81bee622cc3e6c9ef
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1488323006,1488399874,6b224a6ea97f34a3e284f432b82cbf3e53496e7c
6b224a6ea97f34a3e284f432b82cbf3e53496e7c,6b224a6e,"Merge ""Hygiene: move collapseTables.getTableHeader to applib""","Merge ""Hygiene: move collapseTables.getTableHeader to applib""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488317685,1488317685,"c343d41f35e3e90f623a9f469d4905b41963350d,947daba1b309cb6682818e628dc8f50ccd5e3efa"
c343d41f35e3e90f623a9f469d4905b41963350d,c343d41f,"Merge ""Make translation tests check plurals for completeness.""","Merge ""Make translation tests check plurals for completeness.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488312287,1488312287,"af6565fdbe2b99271a2dee1e267d320ff0bd96b3,44bffe80a3bc833ff685eeffaa03fdd247de37cf"
af6565fdbe2b99271a2dee1e267d320ff0bd96b3,af6565fd,"Merge ""Make Random card pull from reading lists when offline.""","Merge ""Make Random card pull from reading lists when offline.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488311835,1488311835,"aaa7a6f74ea7a4690fd811606bb83154a9b5a69d,011e53d19a74445cd6c0387f6bbe8bc2512ddeea"
aaa7a6f74ea7a4690fd811606bb83154a9b5a69d,aaa7a6f7,"Merge ""Hygiene: Update MWAPI model classes and tests to ensure API error handling""","Merge ""Hygiene: Update MWAPI model classes and tests to ensure API error handling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488311833,1488311833,"a9002996f0f4da33c39bada210f15a5e4f7134fb,52ff2c3e1393a6e4153a0deb8679c79e71fd0c6f"
44bffe80a3bc833ff685eeffaa03fdd247de37cf,44bffe80,Make translation tests check plurals for completeness.,"Make translation tests check plurals for completeness.

Bug: T140701
Change-Id: Iab0574a61ac23e1ebe7921ee5595b7c3e006acbb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488302097,1488302295,a9002996f0f4da33c39bada210f15a5e4f7134fb
a9002996f0f4da33c39bada210f15a5e4f7134fb,a9002996,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488290333,1488290333,"1ca08f5669a717f38783f0df597f29fa97218de9,ef7799582e0067f8924e3ca773bf19137b6dba85"
1ca08f5669a717f38783f0df597f29fa97218de9,1ca08f56,Update Gradle Wrapper to 3.4,"Update Gradle Wrapper to 3.4

https://docs.gradle.org/3.4/release-notes.html
https://docs.gradle.org/3.3/release-notes.html
https://docs.gradle.org/3.2/release-notes.html
https://docs.gradle.org/3.1/release-notes.html

All periodic tests pass as expected, but a few new warnings are thrown,
all relating to known issues with third-party resources:

The Task.leftShift(Closure) method has been deprecated and is scheduled to
be removed in Gradle 5.0. Please use Task.doLast(Action) instead.[1]

The JavaCompile.setDependencyCacheDir() method has been deprecated and is
scheduled to be removed in Gradle 4.0.[2]

The TaskInputs.source(Object) method has been deprecated and is scheduled
to be removed in Gradle 4.0. Please use TaskInputs.file(Object).skipWhenEmpty() instead.[3]

[1] https://github.com/facebook/screenshot-tests-for-android/issues/53
[2] https://code.google.com/p/android/issues/detail?id=232584
[3] https://code.google.com/p/android/issues/detail?id=229157

Bug: T144252
Change-Id: I5f9d3bcf16ac13c8e5e46d0c476744948a651621
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487877480,1488230695,5e22f57d9c4db12eeb0a39dc79a995bc740995dd
5e22f57d9c4db12eeb0a39dc79a995bc740995dd,5e22f57d,"Merge ""Update Fresco to 1.1.0""","Merge ""Update Fresco to 1.1.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1488227973,1488227973,"3c1db6cb6fcef90c9c94bf1079eb806ff82e0107,8c3680d1b2ae9091da41912c125914f64d482f57"
011e53d19a74445cd6c0387f6bbe8bc2512ddeea,011e53d1,Make Random card pull from reading lists when offline.,"Make Random card pull from reading lists when offline.

The Random card in the Feed will still try to request a random page from
the network; but if the network request is unsuccessful, it will
automatically fall back and try to load a random page from the user's
reading lists. (And if that fails, show an error.)

As a bonus, this adds a spinning progress bar to the random card while
loading is in progress.

Bug: T157377
Change-Id: Ib885283e1e41269f318311b8560d14753f2dba93
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487944738,1488224938,2919ffb71666c1f835e29285a57009753f735d16
8c3680d1b2ae9091da41912c125914f64d482f57,8c3680d1,Update Fresco to 1.1.0,"Update Fresco to 1.1.0

Release notes:
https://github.com/facebook/fresco/releases/tag/v1.1.0
https://github.com/facebook/fresco/releases/tag/v1.0.0
https://github.com/facebook/fresco/releases/tag/v0.14.0

NB:
- Updated the `samples` components from their 1.1.0 tag.
- Plugged in the new DoubleTapGestureHandler instead of the simple
  GestureHandler, so that we get double-tap zooming for free.

No breaking changes for us.
Note the shoutout to Wikipedia in the 1.0.0 notes :)

Change-Id: I9f2507832c0d3ef18f473f234beae2d65c5b2a52
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487967041,1488224091,257a568057e692a2c87fa792da2bf62a47ffe9ff
3c1db6cb6fcef90c9c94bf1079eb806ff82e0107,3c1db6cb,Don't crash when system WebView is being updated.,"Don't crash when system WebView is being updated.

This patch makes PageActivity catch exception(s) related to inflation of
the WebView, meaning that we will now handle the condition when the app is
launched at the precise moment when the system WebView is being updated.

The behavior will be to show the user a brief message and immediately
close PageActivity. (but it's better than crashing.)

Change-Id: I6b2e2821f1df1117b90a5661901063a4b488895e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1488145121,1488203071,257a568057e692a2c87fa792da2bf62a47ffe9ff
ef7799582e0067f8924e3ca773bf19137b6dba85,ef779958,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ie29d7b1b984429692c302a86c1201281b8beda70
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1488179231,1488179231,257a568057e692a2c87fa792da2bf62a47ffe9ff
947daba1b309cb6682818e628dc8f50ccd5e3efa,947daba1,Hygiene: move collapseTables.getTableHeader to applib,"Hygiene: move collapseTables.getTableHeader to applib

Bug: T158309
Change-Id: I86bdbc30e435316cee170f36ac5a69c8b126f547
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487995703,1487995703,61bc39e732ed2c85c0d8cc946db2c99670f73be0
257a568057e692a2c87fa792da2bf62a47ffe9ff,257a5680,Bump versionCode,"Bump versionCode

Change-Id: I91dd6ea25d2c136f222462e522ff3a8ff7810e7e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487960925,1487960925,b184b150d7ac6b953b999b84ddfc656a83afb17b
b184b150d7ac6b953b999b84ddfc656a83afb17b,b184b150,Fix possible memory leak in feed.,"Fix possible memory leak in feed.

I've observed a memory leak (on API 17) apparently stemming from the new
functionality to fill in the bookmark icon when the featured article is
detected to be part of a reading list.

This seems to be caused by us passing an anonymous instance of a
CallbackTask.Callback object from FeaturedArticleView, which contains
references to $this, which contains a reference to the activity context.

This patch solves the leak by modifying the CallbackTask to no longer hold
on to a reference of Callback, and instead null it out immediately after
it's called.

Change-Id: I768e24dab7f39652ec741a5d6f9821db7de4f2bd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487949979,1487949979,61bc39e732ed2c85c0d8cc946db2c99670f73be0
61bc39e732ed2c85c0d8cc946db2c99670f73be0,61bc39e7,Fix: persist settings screen toolbar on Activity recreation,"Fix: persist settings screen toolbar on Activity recreation

Move SettingsFragment toolbar configuration later in the lifecycle. No
lifecycle constraints for setHasOptionsMenu() appears to be documented
but the toolbar no longer disappears.

Bug: T157823
Change-Id: I5ed1516089ef6b0f57f3feff3c5f1b597a7fa848
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487905291,1487905291,749938a59c379a8c9195fb1a0d212bc26ada6d78
749938a59c379a8c9195fb1a0d212bc26ada6d78,749938a5,Update: use app language for UI,"Update: use app language for UI

Bug: T142019
Change-Id: I68757c3b17e35f8694380c06bcdda77c2f1ddb41
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487227036,1487905275,2919ffb71666c1f835e29285a57009753f735d16
2919ffb71666c1f835e29285a57009753f735d16,2919ffb7,Update NavTabLayout to use BottomNavigationView,"Update NavTabLayout to use BottomNavigationView

The bottom bar on the main screen is now a BottomNavigationView.
This is inline with the Material Design guidelines. As there are 4
tabs they now animate and text is only displayed for the current
tab.

Bug: T148791
Change-Id: I50c2b14f9920c5a38b0a20bc171ffdbf16512877
",,,,Isaac Hutt,mhutti1@gmail.com,Dbrant,dbrant@wikimedia.org,1482776835,1487891790,3299667c1c67bf4a2077a38465c49f3a6698270d
3299667c1c67bf4a2077a38465c49f3a6698270d,3299667c,Improve/simplify bottom tab bar behavior.,"Improve/simplify bottom tab bar behavior.

This moves away from using a fake AppBarLayout to control the animation of
our bottom tab bar.  In doing this, we fix a few weird behaviors that have
been observed since its introduction.

Instead, the new behavior animates the bottom tab bar based on actual
nested scroll events coming from the CoordinatorLayout.

Note: This contains a slight workaround for a known support library issue:
https://code.google.com/p/android/issues/detail?id=222911
This is done by adding `focusableInTouchMode1 to the FrameLayout that
contains our FeedView, to prevent it from automatically jump-scrolling on
certain devices.

Bug: T156012
Bug: T146890
Bug: T148689
Change-Id: I6707637ca228c732e901de4125094f2fd87f8578
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487859515,1487889657,0fc334385583535b190e4baa82e20461f03abad8
0fc334385583535b190e4baa82e20461f03abad8,0fc33438,Use G50 color for snackbar actions.,"Use G50 color for snackbar actions.

Our current action button text in Snackbars is a bit too low-contrasty.
This updates the color to G50.

It doesn't seem to be possible to style snackbars via xml, but
conveniently enough, we already dig into the underlying view hierarchy of
the Snackbar, so it's only a couple more lines of code to change the
action color programmatically.

Bug: T158898
Change-Id: I02fa1a9cab1fd5c4d17e2cd25956eaab31de5990
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487878396,1487878636,1f707d42449e1d1358a248b58e4d789511afc91b
1f707d42449e1d1358a248b58e4d789511afc91b,1f707d42,"Merge ""Make edit-protection messages a bit more friendly.""","Merge ""Make edit-protection messages a bit more friendly.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487874274,1487874274,"80b9b4d9f211f6854eebada01b81c1fc9886b4b9,3e86ee2ecf6897799924063d6dd4934f296fffc3"
80b9b4d9f211f6854eebada01b81c1fc9886b4b9,80b9b4d9,"Merge ""Improve page protection logic wrt. description editing.""","Merge ""Improve page protection logic wrt. description editing.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487873955,1487873955,"12a26f1afff3283cdeb4f3dd26ddbd635d33b153,c37bbff0aba14cf338cf7adf8fd9815064bf63b4"
12a26f1afff3283cdeb4f3dd26ddbd635d33b153,12a26f1a,"Merge ""Drop saved pages database table""","Merge ""Drop saved pages database table""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487866970,1487866970,"a5fdc00a6c34ff2dab2ce74ebe8f379906f17afe,35ff216135bffcae0cf4d803b78c511b401c4003"
a5fdc00a6c34ff2dab2ce74ebe8f379906f17afe,a5fdc00a,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I98aacd8811a4a68464ed13dfebd555eebeaf3b24
",,,,Translation updater bot,l10n-bot@translatewiki.net,Stephen Niedzielski,stephen@niedzielski.com,1487837819,1487863953,d7e1f01e4bb10106229ee09ef9fbac9225b9fca5
3e86ee2ecf6897799924063d6dd4934f296fffc3,3e86ee2e,Make edit-protection messages a bit more friendly.,"Make edit-protection messages a bit more friendly.

Change-Id: I760ec065aaa2e3537d91eecffb890a750f56b8f5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1487348914,1487802184,c37bbff0aba14cf338cf7adf8fd9815064bf63b4
c37bbff0aba14cf338cf7adf8fd9815064bf63b4,c37bbff0,Improve page protection logic wrt. description editing.,"Improve page protection logic wrt. description editing.

A couple touch-ups to our logic:
- The ""Add title description"" message shall be shown, even for a protected
  page, but clicking it will produce the dialog box with ""You do not have
  the rights"" message.
- Similarly, the edit pencil shall always produce both options to ""edit
  description"" and ""edit introduction"", but for a protected page both will
  produce the ""You don't have the rights"" dialog.
- The edit pencil is now correctly set to contain a ""lock"" icon when the
  page is protected.
- For languages that are still flagged-out of description editing, the
  behavior remains the same as before.

Change-Id: I9cc7ac2ce3ee52c8ac624c5c95b4be83aee6dc6f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1487190086,1487802122,d7e1f01e4bb10106229ee09ef9fbac9225b9fca5
d7e1f01e4bb10106229ee09ef9fbac9225b9fca5,d7e1f01e,"Merge ""[Facepalm?] Correctly pass CentralAuth cookies to Wikidata.""","Merge ""[Facepalm?] Correctly pass CentralAuth cookies to Wikidata.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487797762,1487797762,"fa014ef24b075f911f11b504491da7061026d699,4a2a518fb5cff32b010d3d287d276a13c3b5fb0c"
fa014ef24b075f911f11b504491da7061026d699,fa014ef2,Factor out common URLs from string resources.,"Factor out common URLs from string resources.

This makes URLs for Terms of Use and CC licenses into separate string
resources, so that they can be included in other string resources via
format specifiers. Updated strings-qq accordingly.

Bug: T158218
Change-Id: I1b1c378e5ec3d9bc6a25818fa20fa5da283a7d2f
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1487271399,1487796196,d083b7c35d7b9212d22b221988c08d045a4236d3
d083b7c35d7b9212d22b221988c08d045a4236d3,d083b7c3,"Merge ""Improve symmetry of setting/nulling callbacks on feed views.""","Merge ""Improve symmetry of setting/nulling callbacks on feed views.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487795020,1487795020,"7a4ff35d8ea5781e46856c61c9b1e3baf2142576,861410bd680b2c18d7491ed59ff1dd555214f3ae"
7a4ff35d8ea5781e46856c61c9b1e3baf2142576,7a4ff35d,"Merge ""Improve implicit sorting of reading list items.""","Merge ""Improve implicit sorting of reading list items.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487794490,1487794490,"29d01c9627ea00e37666b51a3429eb4d616e898b,268c1e7e30def8375d3021ab24dbf83cba388ac7"
29d01c9627ea00e37666b51a3429eb4d616e898b,29d01c96,"Merge ""Hygiene: Remove unused method from RetrofitException""","Merge ""Hygiene: Remove unused method from RetrofitException""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487792227,1487792227,"abaf19c0ca3da0a469571177e91b636efb621072,8e188b1169c052fb671d03ddea82579c0412d69b"
8e188b1169c052fb671d03ddea82579c0412d69b,8e188b11,Hygiene: Remove unused method from RetrofitException,"Hygiene: Remove unused method from RetrofitException

This removes an unused method from RetrofitException, and in doing so,
allows all of our usages of RetrofitException to be simplified, by not
having to pass an instance of Retrofit into it.

Change-Id: Ie4143aee4e74af6cfcef4929d6ee525faf06acad
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487690589,1487779364,eb320b514cf8e48f6d5549d1270206f022af9039
abaf19c0ca3da0a469571177e91b636efb621072,abaf19c0,Fix: don't require HTML formatting for notification strings,"Fix: don't require HTML formatting for notification strings

When English translations contain HTML tags, the translation tests
assume they're required. Add notification strings to the list of
exceptions as a workaround. The offending translations are already
merged because I must have tested the wrong patch this morning.

Change-Id: I6fde07cdb38d88d2a2aa2f91369e325162f118a3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487744465,1487744465,eb320b514cf8e48f6d5549d1270206f022af9039
4a2a518fb5cff32b010d3d287d276a13c3b5fb0c,4a2a518f,[Facepalm?] Correctly pass CentralAuth cookies to Wikidata.,"[Facepalm?] Correctly pass CentralAuth cookies to Wikidata.

When the user logs in through the app, we receive a CentralAuth cookie
which has a domainSpec of "".wikipedia.org"".

Then, when making requests to edit Wikidata descriptions, we pass that
same cookie to the wikidata.org domain. However, our code that determines
whether to pass the cookie was checking if the domainSpec *equals*
wikipedia.org, rather than *ends with* wikipedia.org, so the cookie wasn't
getting passed, and the edit not going through successfully.

I'm... not sure how/why this worked before. Did something change on the
server side?

Change-Id: I91c73238467d3d54bbf06373fb0534baace9c438
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487711562,1487711562,07534a242c6ae38d106ad882aab390cf426c50ea
eb320b514cf8e48f6d5549d1270206f022af9039,eb320b51,Update revert help dialog styling,"Update revert help dialog styling

Bug: T150477
Change-Id: I832883b56c656cbdfcf484abc45903f2076a6f98
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487697309,1487697936,695e4e5e9bab73508d60d9494c46ab2d54b9e803
695e4e5e9bab73508d60d9494c46ab2d54b9e803,695e4e5e,Update revert notification styling,"Update revert notification styling

Bug: T150477
Change-Id: I853dcd8b27904c4533ad6d084e5c3515c8cc656e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487695312,1487697936,8830092a73296bdefcd1e1ffdca715f7c0777327
8830092a73296bdefcd1e1ffdca715f7c0777327,8830092a,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487695294,1487695294,"07534a242c6ae38d106ad882aab390cf426c50ea,595713a33521f1309a29f6257dda9a6c89fa8750"
07534a242c6ae38d106ad882aab390cf426c50ea,07534a24,"Merge ""Update visual treatment of Search on Reading lists and History screens""","Merge ""Update visual treatment of Search on Reading lists and History screens""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487685635,1487685635,"e93176920febfa664568a80bb41b17d2f01f724a,04396ac55683d30918ccae21be51d73087d504ff"
595713a33521f1309a29f6257dda9a6c89fa8750,595713a3,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I690afda17c62187dbfcce30c7cc582cac586bc49
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1487577029,1487577029,781d149efb2d4eaeae47004ec4c4be01c4d5c450
268c1e7e30def8375d3021ab24dbf83cba388ac7,268c1e7e,Improve implicit sorting of reading list items.,"Improve implicit sorting of reading list items.

There were still some cases where reading list items weren't getting
sorted correctly, for example:
- Add a few items to a reading list
- View the reading list and sort it alphabetically
- Delete an item from the middle of the list
- Click ""undo"" to add the item back
- Observe that the list is no longer sorted properly

This patch ensures that the reading list is implicitly sorted every time
it's updated for any reason. (And also removes unnecessary private fields
from ReadingListsFragment that were maintaining the sort state.)

Change-Id: Id4fb34ac06501b4451f9337efc6d7fc4fa3ff1da
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487345937,1487352283,781d149efb2d4eaeae47004ec4c4be01c4d5c450
e93176920febfa664568a80bb41b17d2f01f724a,e9317692,Update bundled CSS,"Update bundled CSS

Applies the changes deployed to the production wikis up to this week.

Change-Id: I0c28a09db4013409da67b0978fb73e1fd0427c5a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487085867,1487352118,781d149efb2d4eaeae47004ec4c4be01c4d5c450
781d149efb2d4eaeae47004ec4c4be01c4d5c450,781d149e,"Merge ""Prevent user from creating a list with an empty title""","Merge ""Prevent user from creating a list with an empty title""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487352064,1487352064,"44bfba626cf876d9ab6e5ff11d02acd6732cdb57,95122f1c6a4078f6cf3c8e732ddf75638afed937"
44bfba626cf876d9ab6e5ff11d02acd6732cdb57,44bfba62,"Merge ""Prevent user attempting to create a duplicate-titled reading list""","Merge ""Prevent user attempting to create a duplicate-titled reading list""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487351565,1487351565,"dfae7b6d88c6a782d5872764ded0a1c58334365b,56ecd47aad22f3318b89d656740696412c8ce3cd"
dfae7b6d88c6a782d5872764ded0a1c58334365b,dfae7b6d,Hygiene: remove DiskLruCache from dependencies,"Hygiene: remove DiskLruCache from dependencies

Change-Id: Id7d1ba656e0fcdefbd9799e8111f23bf3ea30954
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487346424,1487346424,ffccb4c600890c79e6947c55dae9bbcde98fc200
ffccb4c600890c79e6947c55dae9bbcde98fc200,ffccb4c6,"Merge ""Hygiene: require source files to end with a newline""","Merge ""Hygiene: require source files to end with a newline""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487344865,1487344865,"a26efdfa0e995c1da8df4ea274d67f12fadb06ab,8ffe26b1dacd54024bae856319248d5ccad0a121"
8ffe26b1dacd54024bae856319248d5ccad0a121,8ffe26b1,Hygiene: require source files to end with a newline,"Hygiene: require source files to end with a newline

Change-Id: I22bc83f343624d955f65d737ae8632f6b1e92dbf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dmitry Brant,dbrant@wikimedia.org,1486659534,1487344238,cd5b2d6e9d2bb6844b5428ce31b3c774fd7c3073
861410bd680b2c18d7491ed59ff1dd555214f3ae,861410bd,Improve symmetry of setting/nulling callbacks on feed views.,"Improve symmetry of setting/nulling callbacks on feed views.

So, here's the thing:
When feed views get destroyed, we need to explicitly null out the
""callback"" field that they contain. Otherwise, it's known to cause memory
leak(s) on certain APIs.

So far, we've been using the onViewAttachedToWindow() method to give the
callback to the view, and similarly using onViewDetachedFromWindow() to
set the callback to null, which seems to work well in preventing memory
leaks.

I've noticed, however, that in certain feed views, we have *nested*
RecyclerViews, and in the adapters of those nested RecyclerViews, we don't
actually use the attached/detached-from-window logic for setting and
nulling the callback (instead we just set the callback in onBindViewHolder).

My guess is that the latest version of appcompat has exposed this
inconsistency, in the form of race condition between the parent and nested
RecyclerAdapters in setting the callback.

This patch updates our ""child"" RecyclerAdapters to follow the same pattern
of setting and nulling the callback based on the attached/detached calls.

Bug: T158347
Change-Id: Ieb5461dbee0627df5252c51c54817627eedcf4a5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487342810,1487342810,cd5b2d6e9d2bb6844b5428ce31b3c774fd7c3073
a26efdfa0e995c1da8df4ea274d67f12fadb06ab,a26efdfa,Remove DiskLruCache from credits,"Remove DiskLruCache from credits

DiskLruCache is no longer a (direct) dependency since the removal of
PageCache, so we can remove it from the credits.

Change-Id: I2bb257410b794b52d2ba616badd19b32986a05a2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487341069,1487341883,cd5b2d6e9d2bb6844b5428ce31b3c774fd7c3073
cd5b2d6e9d2bb6844b5428ce31b3c774fd7c3073,cd5b2d6e,"Merge ""Make clicking on library licenses not crash.""","Merge ""Make clicking on library licenses not crash.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487341029,1487341029,"2ba50615cf95d78e130c83199ee47279d2be763b,3cf29040439fd0121271c6a9e2717eb0df7ae107"
2ba50615cf95d78e130c83199ee47279d2be763b,2ba50615,"Merge ""[Facepalm] Load CSS as Unicode, not ASCII.""","Merge ""[Facepalm] Load CSS as Unicode, not ASCII.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487341027,1487341027,"307fb8205ad000a4f07a7298a6a06e993719a6ca,5686c27f8a3212206c278c65f2c607c31f59216e"
5686c27f8a3212206c278c65f2c607c31f59216e,5686c27f,"[Facepalm] Load CSS as Unicode, not ASCII.","[Facepalm] Load CSS as Unicode, not ASCII.

Our CSS contains several ""#content"" directives that inject additional
content into the HTML, some of which contain Unicode characters. We've
been noticing that these characters don't seem to be rendering correctly
in our WebView.

It turns out that the WebView has been loading the CSS content as ASCII,
and we need to explicitly declare our content to be UTF-8 in a ""meta"" tag
in the HTML. It's surprising that UTF-8 is not the default, but there
you go.

Bug: T158067
Change-Id: Ia0cd07d99ba1fb09112a883901c1d5d40a29eba7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487339196,1487339745,49a2b5235d87686ef89ed22794c74bbca2200a9a
307fb8205ad000a4f07a7298a6a06e993719a6ca,307fb820,"Merge ""Hygiene: Rename PageTitleListCardItemView and related RecyclerAdapter""","Merge ""Hygiene: Rename PageTitleListCardItemView and related RecyclerAdapter""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487337061,1487337061,"1ac864a39bf43e82d3c007efaf1ffe0c7ea0caf8,ba37782cf5ae60dcd99769efb1e1fca49e8594c7"
95122f1c6a4078f6cf3c8e732ddf75638afed937,95122f1c,Prevent user from creating a list with an empty title,"Prevent user from creating a list with an empty title

It's currently possible for a user to create a reading list with an empty
string as the title.  When this happens, ""Untitled"" will be displayed as
the list title, but the true title will be an empty string, and pages will
disappear from the reading list almost immediately.

Let's prevent users from creating reading lists with empty titles.

Change-Id: If330328a60b60db96f5ccaa7af2237bcbc65a37d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487288334,1487289000,56ecd47aad22f3318b89d656740696412c8ce3cd
56ecd47aad22f3318b89d656740696412c8ce3cd,56ecd47a,Prevent user attempting to create a duplicate-titled reading list,"Prevent user attempting to create a duplicate-titled reading list

Checks the title in the reading list creation dialog against the list
of existing list titles, disabling the positive button and displaying
error text in the case of a match.

My personal preference and sense of what a user intends favor this
solution over something like creating a new list and  appending a "" (1)""
to the title.

Bug: T156017
Change-Id: I8a46db35724104434053a802408ffc58c4d800b7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1486429844,1487287366,1ac864a39bf43e82d3c007efaf1ffe0c7ea0caf8
ba37782cf5ae60dcd99769efb1e1fca49e8594c7,ba37782c,Hygiene: Rename PageTitleListCardItemView and related RecyclerAdapter,"Hygiene: Rename PageTitleListCardItemView and related RecyclerAdapter

PageTitleListCardItemView is a wordy, unwieldy class name, and the class
does not actually even involve PageTitles.  Rename it to ListCardItemView
which is less of a mouthful and at least as descriptive.

Rename the related RecyclerAdapter as well.

Change-Id: I43c28750460bfc109daaec578afa559354ba5861
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487264764,1487275556,8ba866198ca844b6b12687b5e43498e4ccaca4e8
1ac864a39bf43e82d3c007efaf1ffe0c7ea0caf8,1ac864a3,Hygiene: upgrade to OkHttp 3.6.0,"Hygiene: upgrade to OkHttp 3.6.0

https://github.com/square/okhttp/blob/master/CHANGELOG.md#version-342
https://github.com/square/okhttp/blob/master/CHANGELOG.md#version-350
https://github.com/square/okhttp/blob/master/CHANGELOG.md#version-360

Change-Id: Iaa079c122b6ec998c9680ec0ae80358c0d52ae7c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486160102,1487273243,49a2b5235d87686ef89ed22794c74bbca2200a9a
49a2b5235d87686ef89ed22794c74bbca2200a9a,49a2b523,"Merge ""Hygiene: rename event bus subscribers""","Merge ""Hygiene: rename event bus subscribers""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487272785,1487272785,"87549c84baf539edcd407758f08394ca9213c246,2b97fef796fb0ff41167c22086073278d316ea90"
87549c84baf539edcd407758f08394ca9213c246,87549c84,"Merge ""Hygiene: remove redundant theme change subscriber in MainActivity""","Merge ""Hygiene: remove redundant theme change subscriber in MainActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487272784,1487272784,"8ba866198ca844b6b12687b5e43498e4ccaca4e8,ca81da0390bd10dd4c57b0c6e46a26449845b6bd"
3cf29040439fd0121271c6a9e2717eb0df7ae107,3cf29040,Make clicking on library licenses not crash.,"Make clicking on library licenses not crash.

Bug: T158263
Change-Id: I2b745ac6f75aa1a364d772a8785e527062c9bccd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487272623,1487272623,8ba866198ca844b6b12687b5e43498e4ccaca4e8
8ba866198ca844b6b12687b5e43498e4ccaca4e8,8ba86619,"Merge ""Hygiene: remove dead code in PageActivity""","Merge ""Hygiene: remove dead code in PageActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487264926,1487264926,"5bb1e33c9273db754e3b1632792e1426028e7083,da8ee311b49484ff90e571cd452a550d41657542"
5bb1e33c9273db754e3b1632792e1426028e7083,5bb1e33c,"Merge ""Fix: SearchFragment NPE in async callback UI update""","Merge ""Fix: SearchFragment NPE in async callback UI update""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487264877,1487264877,"bee35d6769578f7885bcb6478df2d8e5d2b852e7,854c6f176f6c7a1b2897ad70d9421abae0e6a7c1"
bee35d6769578f7885bcb6478df2d8e5d2b852e7,bee35d67,"Merge ""Hygiene: move language switching code to ResourceUtil""","Merge ""Hygiene: move language switching code to ResourceUtil""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487264439,1487264439,"bac63e3439f1d6ffbe70301b46cf7cc4c0f2f285,335f88899cf2b589dc99e92d689d85e585840a01"
bac63e3439f1d6ffbe70301b46cf7cc4c0f2f285,bac63e34,"Merge ""Hygiene: remove superfluous @TargetApi annotations""","Merge ""Hygiene: remove superfluous @TargetApi annotations""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487264280,1487264280,"2861473ef0f52deed64089aa9aa67d89bd24b817,f0a00b6549c3ceb35342f83d69a469d373778ab6"
2861473ef0f52deed64089aa9aa67d89bd24b817,2861473e,"Merge ""Hygiene: consolidate more into BaseActivity""","Merge ""Hygiene: consolidate more into BaseActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487263878,1487263878,"6da7bf7a4e90480a93d82871fc88f73b502055e1,10ce2167764f78419b1dd742cd644b987edc7340"
6da7bf7a4e90480a93d82871fc88f73b502055e1,6da7bf7a,"Merge ""Update Featured Article card footer based on its presence in a list""","Merge ""Update Featured Article card footer based on its presence in a list""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487263580,1487263580,"f678dbc87dc8172ef0cf3f359965ecfc0344847a,ccc4088658c7c44db178aa9cada0dad074dff17f"
f678dbc87dc8172ef0cf3f359965ecfc0344847a,f678dbc8,"Merge ""Hygiene: make common base Activity ancestor & DRY up ActivityUtil""","Merge ""Hygiene: make common base Activity ancestor & DRY up ActivityUtil""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487262890,1487262890,"1d171ec3bbdff64b7ff983192a562fd9737fee8d,e9159a9e49bb358ae3f7d3cc62c6c22523982864"
1d171ec3bbdff64b7ff983192a562fd9737fee8d,1d171ec3,"Merge ""Remove back nav button when reading list detail action mode is enabled""","Merge ""Remove back nav button when reading list detail action mode is enabled""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487262889,1487262889,"60a2ae263966a4ba20eaa6f2cfd507c798bd3ab0,6f6361d511e2301aa72e09c32a38e0a6d311c96a"
60a2ae263966a4ba20eaa6f2cfd507c798bd3ab0,60a2ae26,"Merge ""Hygiene: don't assume gradlew is in PATH""","Merge ""Hygiene: don't assume gradlew is in PATH""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487261096,1487261096,"66da666828b427c7de1732841cc7a809b58e1c6c,1c0d5e453fb0b1079db86057c029fc7f1ce7fba1"
66da666828b427c7de1732841cc7a809b58e1c6c,66da6668,"Merge ""Hygiene: rename DefaultUserOptionDataClient service interface""","Merge ""Hygiene: rename DefaultUserOptionDataClient service interface""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487260803,1487260803,"33966f0e7bce55747185eaec5eb1f5111a3d3cb9,8079e1cdf4538dfd0c390c64c92ba98dc278f0c2"
33966f0e7bce55747185eaec5eb1f5111a3d3cb9,33966f0e,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487260504,1487260504,"b17c63ef1d87ced4080a6dbcf6030fe711a88eaf,3e061ce1a02650a345a14f87483c5901781e382a"
b17c63ef1d87ced4080a6dbcf6030fe711a88eaf,b17c63ef,Use same string for downloading image from gallery as from feed card.,"Use same string for downloading image from gallery as from feed card.

Bug: T157365
Change-Id: Ic50352b0ff40535c4909dfec849569ef3d65642d
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1486584810,1487259667,1d11b559057d0604bfd0eea3bd3ced2b7895f9ea
1d11b559057d0604bfd0eea3bd3ced2b7895f9ea,1d11b559,"Merge ""Bug: T141991 Feed News stories are partially obscured""","Merge ""Bug: T141991 Feed News stories are partially obscured""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487256692,1487256692,"00365c43a1d5fe53aee9febc419a0f932893db62,a5e1059116ff8818191cf63fb51200536f999d1c"
ccc4088658c7c44db178aa9cada0dad074dff17f,ccc40886,Update Featured Article card footer based on its presence in a list,"Update Featured Article card footer based on its presence in a list

Bug: T139377
Change-Id: I2875b611242d50874f89a4b635c9f9e097c0011b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487194884,1487253461,00365c43a1d5fe53aee9febc419a0f932893db62
3e061ce1a02650a345a14f87483c5901781e382a,3e061ce1,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ibe9667ade28560a55d2d95e806825e2754eea321
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1487234413,1487234413,00365c43a1d5fe53aee9febc419a0f932893db62
2b97fef796fb0ff41167c22086073278d316ea90,2b97fef7,Hygiene: rename event bus subscribers,"Hygiene: rename event bus subscribers

Remove verbose redundant event bus methods which only differ
polymorphically

Change-Id: Iea8865cc7b57bbf7da55be311a903bd8d7bd8434
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487226774,1487226774,ca81da0390bd10dd4c57b0c6e46a26449845b6bd
ca81da0390bd10dd4c57b0c6e46a26449845b6bd,ca81da03,Hygiene: remove redundant theme change subscriber in MainActivity,"Hygiene: remove redundant theme change subscriber in MainActivity

MainActivity inherits from ThemedActionBarActivity which already
subscribes

Change-Id: I65a9552b47397d6d57a32bc0bf66b63a0fd3de66
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487226474,1487226474,da8ee311b49484ff90e571cd452a550d41657542
da8ee311b49484ff90e571cd452a550d41657542,da8ee311,Hygiene: remove dead code in PageActivity,"Hygiene: remove dead code in PageActivity

Change-Id: Ibd0d8e081a4f4ade0878f785e3d27c46f7c4810f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487226246,1487226246,854c6f176f6c7a1b2897ad70d9421abae0e6a7c1
854c6f176f6c7a1b2897ad70d9421abae0e6a7c1,854c6f17,Fix: SearchFragment NPE in async callback UI update,"Fix: SearchFragment NPE in async callback UI update

Change-Id: I0cfdd0adf0cf52ec71e804e868303d76ba083a53
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487226146,1487226146,335f88899cf2b589dc99e92d689d85e585840a01
335f88899cf2b589dc99e92d689d85e585840a01,335f8889,Hygiene: move language switching code to ResourceUtil,"Hygiene: move language switching code to ResourceUtil

Change-Id: I9f4978cacb11fb4a265883a4972836083650737f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487226087,1487226087,f0a00b6549c3ceb35342f83d69a469d373778ab6
f0a00b6549c3ceb35342f83d69a469d373778ab6,f0a00b65,Hygiene: remove superfluous @TargetApi annotations,"Hygiene: remove superfluous @TargetApi annotations

Lint now checks API conditionals

Change-Id: I8c0782655b9128b64220bfd55ee16b8695cdba97
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487223681,1487223681,10ce2167764f78419b1dd742cd644b987edc7340
10ce2167764f78419b1dd742cd644b987edc7340,10ce2167,Hygiene: consolidate more into BaseActivity,"Hygiene: consolidate more into BaseActivity

Change-Id: I954efc4ed79f20a7f17a7490bcda86a16792e0cd
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487222982,1487222982,e9159a9e49bb358ae3f7d3cc62c6c22523982864
e9159a9e49bb358ae3f7d3cc62c6c22523982864,e9159a9e,Hygiene: make common base Activity ancestor & DRY up ActivityUtil,"Hygiene: make common base Activity ancestor & DRY up ActivityUtil

Change-Id: I32b2e3e153e66a513ec3ecd039bd4a21cc499545
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487212009,1487212009,00365c43a1d5fe53aee9febc419a0f932893db62
00365c43a1d5fe53aee9febc419a0f932893db62,00365c43,"Merge ""Hygiene: Replace usages of HashSet with ArraySet""","Merge ""Hygiene: Replace usages of HashSet with ArraySet""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487202394,1487202394,"cfd1862d5004c1fd245feff721ac9bd47a36d86e,b7a3be4c5dd7688726400506df6a1f2c8e209d18"
cfd1862d5004c1fd245feff721ac9bd47a36d86e,cfd1862d,"Merge ""Update Android Support Libraries to 25.1.1""","Merge ""Update Android Support Libraries to 25.1.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487200193,1487200193,"ea88973bf7190f824fdd9d3b5050d8f7adf69c22,c397b5aacd166f3e7747e92be14b1358ab92e54a"
ea88973bf7190f824fdd9d3b5050d8f7adf69c22,ea88973b,Bump versionCode,"Bump versionCode

Change-Id: Ie2862f859e9cfe1dd651f58a119b57cc7f62f619
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487192560,1487192861,5c30f122ef11e7e4c18a13da7926dbd41c3f1e2f
35ff216135bffcae0cf4d803b78c511b401c4003,35ff2161,Drop saved pages database table,"Drop saved pages database table

This has been superseded by the reading list page table(s) and can be
dropped.

Some code is retained to preserve sequential migrations.

Additional code relating to the old saved pages implementation will be
removed in a separate, provisional patch, which shouldn't be merged until
the updated implementation is in place.

Bug: T135401
Change-Id: I869a88d0833975ae908a1a7470d1715df27bd0c6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487189515,1487189897,5c30f122ef11e7e4c18a13da7926dbd41c3f1e2f
5c30f122ef11e7e4c18a13da7926dbd41c3f1e2f,5c30f122,"Merge ""Fix reading list sorting""","Merge ""Fix reading list sorting""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487183507,1487183507,"5c2a2fd621b4e288b25e7a930faad14d93829cbf,984ffe67a24ea8241971fd76767a1c46ed640f2d"
04396ac55683d30918ccae21be51d73087d504ff,04396ac5,Update visual treatment of Search on Reading lists and History screens,"Update visual treatment of Search on Reading lists and History screens

Bug: T156071
Change-Id: Ifc0140ec1be69641792dacb3f804c5a0d455fd70
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487114753,1487115233,6f6361d511e2301aa72e09c32a38e0a6d311c96a
6f6361d511e2301aa72e09c32a38e0a6d311c96a,6f6361d5,Remove back nav button when reading list detail action mode is enabled,"Remove back nav button when reading list detail action mode is enabled

Prevents the user from navigating away while the action mode remains
enabled, which can leave the list detail in a surprising filtered state
on return to the detail view.

Bug: T156001
Change-Id: I703c3b8b2fa9140496e5a75bb7b8bd2adaa2dfc2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1486666448,1487115194,5c2a2fd621b4e288b25e7a930faad14d93829cbf
8079e1cdf4538dfd0c390c64c92ba98dc278f0c2,8079e1cd,Hygiene: rename DefaultUserOptionDataClient service interface,"Hygiene: rename DefaultUserOptionDataClient service interface

Change-Id: I5f4d03b1eb154a3d966e6bf56709f86d4c739fe6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1487108420,1487108420,5c2a2fd621b4e288b25e7a930faad14d93829cbf
b7a3be4c5dd7688726400506df6a1f2c8e209d18,b7a3be4c,Hygiene: Replace usages of HashSet with ArraySet,"Hygiene: Replace usages of HashSet with ArraySet

Google bills ArraySet, which is included in the Android Support Library as
of 25.1.0, as a generic set data structure that is designed to be more
memory efficient than a traditional HashSet.

Note: the find-and-replace one-liner used to make this patch had the side-
effect of adding a newline to the end of every Java file in the repo that
didn't have one.

Change-Id: I839a8d253823df4b0ceea4396c64fb0fd5f538d1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1486670060,1487102162,c397b5aacd166f3e7747e92be14b1358ab92e54a
c397b5aacd166f3e7747e92be14b1358ab92e54a,c397b5aa,Update Android Support Libraries to 25.1.1,"Update Android Support Libraries to 25.1.1

Also updates PasswordTextInputTest to resolve an exception thrown
beginning in 25.1.0 when passwordVisibilityToggleRequested() is called
outside a Looper thread.

Highlights for future reference:

== 25.1.1 ==

* Fragment transactions can now be optimized within and across
  transactions. Optimizing fragment transaction operations can eliminate
  operations that cancel. A side effect of this optimization is that
  fragments might have state changes out of the expected order. This
  optimization is disabled by default. To enable the optimization, call
  FragmentTransaction.setAllowOptimization(true).

* Fragments can now postpone their transitions and animations until they
  are ready using Fragment.postponeEnterTransition() and Fragment.
  startPostponedEnterTransition().

== 25.1.0 ==

* Snackbar has been refactored to allow apps to display custom content.
  BaseTransientBottomBar is the new base class that exposes the general
  sliding and animations behavior.

* Clients of nested RecyclerView widgets (for example, vertical scrolling
  list of horizontal scrolling lists) can get significant performance
  benefits by calling LinearLayoutManagger.setInitialPrefetchItemCount(n)
  to hint the inner RecyclerView widgets’ layout managers how many items
  to prepare before being scrolled on screen.

* Added ArraySet class to the v4 support library.  ArraySet is a generic
  set data structure that is designed to be more memory efficient than a
  traditional HashSet.

* APIs added for custom LayoutManager objects to enable prefetching
  during scrolls and flings
  - RecyclerView.LayoutManager.LayoutPrefetchRegistry()
  - RecyclerView.LayoutManager.collectAdjacentPrefetchPositions()
  - RecyclerView.LayoutManager.collectInitialPrefetchPositions()

Read more: https://developer.android.com/topic/libraries/support-library/
revisions.html

Bug: T154595
Change-Id: Ife5920898af3f1bb6e42a81db621a6260a6bac1d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1486597438,1487102042,5c2a2fd621b4e288b25e7a930faad14d93829cbf
52ff2c3e1393a6e4153a0deb8679c79e71fd0c6f,52ff2c3e,Hygiene: Update MWAPI model classes and tests to ensure API error handling,"Hygiene: Update MWAPI model classes and tests to ensure API error handling

Change-Id: I8b1685730c14042055d50a61dfbba872d79aadbd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1487032365,1487101997,5c2a2fd621b4e288b25e7a930faad14d93829cbf
5c2a2fd621b4e288b25e7a930faad14d93829cbf,5c2a2fd6,"Merge ""Improve implicit re-login behavior when editing descriptions.""","Merge ""Improve implicit re-login behavior when editing descriptions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487100739,1487100739,"f333f2def5beceb7862da1aa0bf4272d9d1f65bd,be2fdb441321a0c0969283204afc30497eaa8b86"
f333f2def5beceb7862da1aa0bf4272d9d1f65bd,f333f2de,"Merge ""Fix url encoding error""","Merge ""Fix url encoding error""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487100574,1487100574,"e5e271251c451c055af0dc4e10efcbe887313836,d367ab538a15147d4c7171ba54e6e488a79f0fab"
e5e271251c451c055af0dc4e10efcbe887313836,e5e27125,"Merge ""Correctly show success snackbar upon logging in.""","Merge ""Correctly show success snackbar upon logging in.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487098771,1487098771,"95c7377157b9d3d83676ebf6056494a1b153be3d,8ade19c2d3f7e3fca7b33049b335e1eefe647679"
95c7377157b9d3d83676ebf6056494a1b153be3d,95c73771,"Merge ""Don't show feed loading animation forever when offline and can't load""","Merge ""Don't show feed loading animation forever when offline and can't load""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487098398,1487098398,"3078ec1579364952a679bfff69e7c31b1f197a18,2085b16beb10477aaf2933ffe84bd7139cff4300"
3078ec1579364952a679bfff69e7c31b1f197a18,3078ec15,"Merge ""Set focus on 2FA field when it's shown.""","Merge ""Set focus on 2FA field when it's shown.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1487090277,1487090277,"f853829be5c95c9f8cc20ce19e1fab6c2ee3de7f,04a0063f59f73060ec9098018132af0c48c2f357"
d367ab538a15147d4c7171ba54e6e488a79f0fab,d367ab53,Fix url encoding error,"Fix url encoding error

When the url is encoded by Java URLEncoder, it replaces the space character with '+'. To fix this namespace string is modified to add underscore character in the place of a space character using the StringUtil.addUnderscore(namespace) method.

Bug: T130518
Change-Id: I1932d7668ae41af429e8705e5f9359cd05c3b112
",,,,Sandaru,sandarumk@gmail.com,Sandaru,sandarumk@gmail.com,1486744027,1487088729,f853829be5c95c9f8cc20ce19e1fab6c2ee3de7f
8ade19c2d3f7e3fca7b33049b335e1eefe647679,8ade19c2,Correctly show success snackbar upon logging in.,"Correctly show success snackbar upon logging in.

It looks like we have the logic to show a Snackbar when the user logs in
successfully, but it was never being called. This is because the
onActivityResult() method gets called at the same nesting level from which
startActivityForResult() was called. (And we were invoking LoginActivity
from one level deeper than the level where we were catching
onActivityResult).

This moves the call to invoke the Login activity up a level, making the
invocation symmetric with the expectation of receiving onActivityResult().

Change-Id: I54c3730ae4af0cbfb3f42c36dc7acff96b969f34
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487021812,1487022685,c680987c9063b79cdd94a9704ebaec3b03ed424e
be2fdb441321a0c0969283204afc30497eaa8b86,be2fdb44,Improve implicit re-login behavior when editing descriptions.,"Improve implicit re-login behavior when editing descriptions.

This adds some logic to the base class MwPostResponse that lets us know
when the user needs to be re-logged-in automatically, before we retry
fetching the edit token and attempting the edit again. This is in contrast
with our current behavior of explicitly re-logging-in the user upon every
single edit.

This also updates the retry logic when saving a description, by resetting
the retry counter to 0 when the Save button is clicked. (Previously the
retry counter was never reset.)

Note: 2FA users will still need to go to the Login activity to log in
correctly, prior to making additional edits.

Change-Id: I8e2a3f8997ae529798d19124a81728206836693e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487020396,1487021416,c680987c9063b79cdd94a9704ebaec3b03ed424e
04a0063f59f73060ec9098018132af0c48c2f357,04a0063f,Set focus on 2FA field when it's shown.,"Set focus on 2FA field when it's shown.

This automatically gives focus to the 2FA text field when it's displayed,
saving the user an extra tap.

Change-Id: I4aeee411a40eac6133cca552334e1f61d153e3b4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1487021017,1487021017,c680987c9063b79cdd94a9704ebaec3b03ed424e
f853829be5c95c9f8cc20ce19e1fab6c2ee3de7f,f853829b,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ic82dc50e3ce36985d244875e564c962332212f44
",,,,Translation updater bot,l10n-bot@translatewiki.net,Stephen Niedzielski,stephen@niedzielski.com,1486973509,1487018282,c680987c9063b79cdd94a9704ebaec3b03ed424e
a5e1059116ff8818191cf63fb51200536f999d1c,a5e10591,Bug: T141991 Feed News stories are partially obscured,"Bug: T141991 Feed News stories are partially obscured

If the News feed doesn't contain thumbnail image then,
- setting the view height as HeightOfStatusBar + HeightOfActionBar
- Setting the background color to Action bar

Changing the height of the Toolbar

Change-Id: I658943b37d0ac4d1e460cb2535479f4e752737a6
",,,,Venkatvb,venkateshbabu95@gmail.com,Venkatvb,venkateshbabu95@gmail.com,1485983112,1486763502,c680987c9063b79cdd94a9704ebaec3b03ed424e
c680987c9063b79cdd94a9704ebaec3b03ed424e,c680987c,Bump versionCode,"Bump versionCode

Change-Id: Ia2579200aa509b4a6947d976b1a66e529623b37d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486760592,1486760623,8857683d736c99ad202d925819205dfd53ce5ec1
8857683d736c99ad202d925819205dfd53ce5ec1,8857683d,Fix: refresh login token before saving description edit,"Fix: refresh login token before saving description edit

Follow the same flow as section editing

Bug: T157810
Change-Id: I035695e52ac315feba0ea6ca3d64a58f2acb1813
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486748719,1486758183,9b7a2ea4e7868c74d88632b7077d31519b93b6b1
2085b16beb10477aaf2933ffe84bd7139cff4300,2085b16b,Don't show feed loading animation forever when offline and can't load,"Don't show feed loading animation forever when offline and can't load

Removes it when pending clients are empty, so it won't be shown until
a new request is launched.

Also rename ExhaustionClientCallback to ClientRequestCallback, which is
more accurate.  The callback is invoked every time a data client returns,
not only when all outstanding requests are exhausted.

Bug: T157341
Change-Id: I6003bb9205104fcbd7f9613f3ebacf3997f95f89
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1486751466,1486752824,2583eaec5b85d7a59e6ee6c6356822c4504e524b
9b7a2ea4e7868c74d88632b7077d31519b93b6b1,9b7a2ea4,"Merge ""Remove 'edit history' action from revert notification.""","Merge ""Remove 'edit history' action from revert notification.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486744860,1486744860,"2583eaec5b85d7a59e6ee6c6356822c4504e524b,8da33841c7ae37e4a41957c3bfb89a9efc8d4aad"
984ffe67a24ea8241971fd76767a1c46ed640f2d,984ffe67,Fix reading list sorting,"Fix reading list sorting

Moves the list page sorting logic into ReadingListDetailView where it can
interact with the displayedPages list that controls what's actually
displayed to the user since the introduction of search filtering.

This is a better place for the sorting logic to live anyway since it's an
entirely presentational concern.  Some needless sorting in the ReadingList
model is eliminated.

Bug: T151662
Change-Id: I05f0f49a9021dfecc587ca51091593ddba9b9c18
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1486739414,1486739414,2583eaec5b85d7a59e6ee6c6356822c4504e524b
2583eaec5b85d7a59e6ee6c6356822c4504e524b,2583eaec,Fix: add vibration permission on API < 19 for W0,"Fix: add vibration permission on API < 19 for W0

Add vibration permission on Android <= 4 for Wikipedia Zero
notifications

https://rink.hockeyapp.net/manage/apps/226650/app_versions/79/crash_reasons/156693830
http://stackoverflow.com/q/13602190/970346

Change-Id: If939688a4261528a14d989d530b5aa852a58504e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486674072,1486674296,e952333d54f10e7919850e03844409d32874c1fc
8da33841c7ae37e4a41957c3bfb89a9efc8d4aad,8da33841,Remove 'edit history' action from revert notification.,"Remove 'edit history' action from revert notification.

Per Design recommendation:
User testing has revealed some confusion about the 'view edit history'
button that we show in the Revert notification. The mobile web
presentation of the edit history is not yet friendly enough, and can make
some users believe that they broke the internet.

Let's remove this button for now, and just keep the functionality of the
notification taking the user back to the last-edited article, which will
then show our ""We know you tried"" dialog, which still contains a link to
the edit history, should they choose to click it.

Change-Id: I24a66432102aa08d085a95199b3e2207ade57a61
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1486669257,1486669257,e952333d54f10e7919850e03844409d32874c1fc
e952333d54f10e7919850e03844409d32874c1fc,e952333d,Fix: try to avoid out of memory errors when detecting faces,"Fix: try to avoid out of memory errors when detecting faces

If users are bumping against the memory limit, they will probably
experience other issues but it might be worth guarding against frequent
and non-critical OutOfMemoryErrors occurring during face detection

Change-Id: I33c46374243527b6464ea5b56b4d6625d2eaf85c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486662214,1486662214,6b1c58a0fe5e4868a1a955bba313cde95afc0957
6b1c58a0fe5e4868a1a955bba313cde95afc0957,6b1c58a0,Fix: copy ArrayUtils.removeAllOccurrences(),"Fix: copy ArrayUtils.removeAllOccurrences()

Some OEMs appear to have added a pre-v3.5, possibl pre-v3.4, version of
ArrayUtils to the system path which does not contain
removeAllOccurences(). Add a local copy

https://github.com/jamesagnew/hapi-fhir/issues/394
https://rink.hockeyapp.net/manage/apps/226650/app_versions/79/crash_reasons/156658637
https://rink.hockeyapp.net/manage/apps/226650/app_versions/79/crash_reasons/156660777
https://rink.hockeyapp.net/manage/apps/226650/app_versions/79/crash_reasons/156663157

Change-Id: Ie361c193c115a5e551ca3ab175adce743259be89
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486658605,1486658897,25b4f0334e8ef325979b106eaaed40b8daaa663f
25b4f0334e8ef325979b106eaaed40b8daaa663f,25b4f033,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I10761a20184a0363ddd0fa755625b2d7d1ecc896
",,,,Translation updater bot,l10n-bot@translatewiki.net,Stephen Niedzielski,stephen@niedzielski.com,1486624879,1486657810,8373749b2047077a95082c6f60c3a0d1d318edd4
8373749b2047077a95082c6f60c3a0d1d318edd4,8373749b,Bump versionCode,"Bump versionCode

Change-Id: Ia4917bc55671da59ba5dffdafd1dda68b96ac25d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486592592,1486592607,8cdef07786a5f557934c0c1d6d5deb49b6a81bc8
8cdef07786a5f557934c0c1d6d5deb49b6a81bc8,8cdef077,"Merge ""Fix: unit error in polling period for Wikidata notifications""","Merge ""Fix: unit error in polling period for Wikidata notifications""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486592403,1486592403,"cf4cc71c6af296f654466b613a48d90caea4b16f,25f14e1df8a2134f950d4bf8f48379a5f3f6bd1f"
25f14e1df8a2134f950d4bf8f48379a5f3f6bd1f,25f14e1d,Fix: unit error in polling period for Wikidata notifications,"Fix: unit error in polling period for Wikidata notifications

Change-Id: Ie65c080b2ff0e82d2215691847f1210c0ddb3a88
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486590623,1486590623,6ef94372a6dd9670315ec2dc55ae36dc24f0c750
cf4cc71c6af296f654466b613a48d90caea4b16f,cf4cc71c,Fix setting of wiki parameter in eventlogging.,"Fix setting of wiki parameter in eventlogging.

It looks like cf6101256c caused the app to start incorrectly passing the
userAgent into the `wiki` field, instead of the correct db name of the
wiki.

Change-Id: Ibda3ceb21db1049a0a4fba1ca16b605e37d22723
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1486587391,1486587735,6ef94372a6dd9670315ec2dc55ae36dc24f0c750
6ef94372a6dd9670315ec2dc55ae36dc24f0c750,6ef94372,"Merge ""Bump versionCode""","Merge ""Bump versionCode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486584351,1486584351,"a5107f63a8d6685c3f4f49612ff265a265c40f72,99c708bc90c1058a062a061b8a1a51e6335238dd"
99c708bc90c1058a062a061b8a1a51e6335238dd,99c708bc,Bump versionCode,"Bump versionCode

Change-Id: I740a1e75713c89d4398ba9d1232fb4cda48cda04
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486583947,1486583972,21b51d10c0430fb35b6ce1180861df17d6f928c0
a5107f63a8d6685c3f4f49612ff265a265c40f72,a5107f63,"Merge ""Fix: DescriptionEditViewTest""","Merge ""Fix: DescriptionEditViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486583959,1486583959,"21b51d10c0430fb35b6ce1180861df17d6f928c0,b8c6a9f77a864f28f00c57a5968c97db6962db37"
21b51d10c0430fb35b6ce1180861df17d6f928c0,21b51d10,Fix: request network response when cache response is stale,"Fix: request network response when cache response is stale

Bug: T157460
Change-Id: I26a2348bbe81b8f9835918f566af6df58cd6af27
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486541139,1486577400,cb76c678cb3da8dc6fb4fb1aa118f51199168707
b8c6a9f77a864f28f00c57a5968c97db6962db37,b8c6a9f7,Fix: DescriptionEditViewTest,"Fix: DescriptionEditViewTest

Enabling link clicking appears to have caused the View to render
differently by a pixel. Update the screenshots

Change-Id: I56b351a4f96b91f06800a11780e39e68badffa4c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486574180,1486574180,8552aab65fdcf38f53bd9592c732d5387ec47c9b
cb76c678cb3da8dc6fb4fb1aa118f51199168707,cb76c678,Hygiene: add cache / network source OkHttp logging interceptor,"Hygiene: add cache / network source OkHttp logging interceptor

Change-Id: I35abefa0e8169bab9bca4f94a3b243aa0411934a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486512177,1486540800,2d5e0635bdd16367632274b56ad831def21b640e
2d5e0635bdd16367632274b56ad831def21b640e,2d5e0635,Hygiene: separate OkHttpConnectionFactory nested classes into files,"Hygiene: separate OkHttpConnectionFactory nested classes into files

Change-Id: I0ea596e5b7f8288fcdf96e6ce9f8bf387630f47a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486510157,1486540721,200e7b89ae2c13b65b812ff31961f8ec84c0529c
200e7b89ae2c13b65b812ff31961f8ec84c0529c,200e7b89,Hygiene: move OkHttpConnectionFactory to okhttp subpackage,"Hygiene: move OkHttpConnectionFactory to okhttp subpackage

Change-Id: I92190a13a0e44e4df616e7bb3db745471484a632
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486509856,1486509856,8552aab65fdcf38f53bd9592c732d5387ec47c9b
8552aab65fdcf38f53bd9592c732d5387ec47c9b,8552aab6,Increase periodic test JVM heap size and enable Gradle daemon,"Increase periodic test JVM heap size and enable Gradle daemon

Maybe this will get the periodic tests building again.

Bug: T152976
Change-Id: Iaf0f435cc142c022251f0347f455261ab8910983
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1486502332,1486502332,102170346bbeabf63a4907ed5bfd1abe76879bcb
102170346bbeabf63a4907ed5bfd1abe76879bcb,10217034,"Merge ""Fix: use response's cache-control not request""","Merge ""Fix: use response's cache-control not request""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486486961,1486486961,"aaccf976222e4d07fba046214bca29e9930d4dd0,9782bfdd7d493f0c8b0b673dc37447f8317504b3"
aaccf976222e4d07fba046214bca29e9930d4dd0,aaccf976,Correctly make terms-of-use links clickable.,"Correctly make terms-of-use links clickable.

It looks like we need to set a LinkMovementMethod onto the TextView,
despite already having an xml attribute of ""linksClickable"".

Bug: T157462
Change-Id: Iaa76f3840755e23e6051877d07e04545ecf80db3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1486485798,1486485798,1792a70f89c5aa3f982dc968fad6da64d982dc99
9782bfdd7d493f0c8b0b673dc37447f8317504b3,9782bfdd,Fix: use response's cache-control not request,"Fix: use response's cache-control not request

Change-Id: I7301b5d7c15e35205f0cbfff693260cea4fbb4f5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486485772,1486485772,1792a70f89c5aa3f982dc968fad6da64d982dc99
1792a70f89c5aa3f982dc968fad6da64d982dc99,1792a70f,"Merge ""Fix: update cache must-revalidate header logic""","Merge ""Fix: update cache must-revalidate header logic""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486479510,1486479510,"0909704513f4b052854fa7dbf822c72e9d2cf846,c5ef99c57b1cad021c6ce9f530f5f28cac3cd12b"
0909704513f4b052854fa7dbf822c72e9d2cf846,09097045,"Merge ""Update: languages supported & namespace translation for Goan Konkani""","Merge ""Update: languages supported & namespace translation for Goan Konkani""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486446109,1486446109,"84ac60a0dc48931ee9fa8db758b93673a1087aa9,8f987fb9a72953922d70e09610bd4b9e1f1f20d3"
c5ef99c57b1cad021c6ce9f530f5f28cac3cd12b,c5ef99c5,Fix: update cache must-revalidate header logic,"Fix: update cache must-revalidate header logic

When caching HTTP requests, only ignore RESTBase must-revalidate headers
instead of all endpoints. This change fixes an issue where stale
useroptions are used which caused theme changes to be immediately
reverted. Clear your cache or add the following annotation to
DefaultUserOptionDataClient.Client.get() since the cache interceptors
unconditionally respect no-cache:

  @Headers(""cache-control: no-cache"")

Also, only add max-stale header instead of replacing cache-control in
the response

Change-Id: I3ff84c7ea2a0cf5a2dce85fa89429a95d5f97e7b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486427047,1486427047,84ac60a0dc48931ee9fa8db758b93673a1087aa9
84ac60a0dc48931ee9fa8db758b93673a1087aa9,84ac60a0,"Merge ""Fix: update PageHeaderViewTest screenshots for subtitle""","Merge ""Fix: update PageHeaderViewTest screenshots for subtitle""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486413033,1486413033,"5af088879f678cd11fb95a8f517778fe36969fc2,c80fa7a80d35eb9cad488f10e013e6fe7e7ff4a2"
5af088879f678cd11fb95a8f517778fe36969fc2,5af08887,Bump versionCode to 2.5.185,"Bump versionCode to 2.5.185

Change-Id: Idd321762d22584a5eaeb33e391ee7d6505c57b2d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486408492,1486408920,96b5f339deed575babccc88b4223f856d08d6e51
8f987fb9a72953922d70e09610bd4b9e1f1f20d3,8f987fb9,Update: languages supported & namespace translation for Goan Konkani,"Update: languages supported & namespace translation for Goan Konkani

  scripts/generate_wiki_languages.py &&
  scripts/make-templates.py &&
  mv \
    FileAliasData.java \
    MainPageNameData.java \
    SpecialAliasData.java \
    app/src/main/java/org/wikipedia/staticdata/ &&
  mv languages_list.xml app/src/main/res/values/

Bug: T126148
Change-Id: I29a9b115a0c5dd04b03e3f70a8e05dcb31f88499
",,,,The Discoverer,wiki.discoverer@gmail.com,Stephen Niedzielski,stephen@niedzielski.com,1485788723,1486400918,a40b386a1229a62ad570e6a6b771af29809e0363
96b5f339deed575babccc88b4223f856d08d6e51,96b5f339,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: If18ab7d585564a3b585003a7f6250a70d834a062
",,,,Translation updater bot,l10n-bot@translatewiki.net,Stephen Niedzielski,stephen@niedzielski.com,1486364991,1486399305,1e43f9f17e70694b50be306d00e9e9a05bbba8f1
1e43f9f17e70694b50be306d00e9e9a05bbba8f1,1e43f9f1,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: If9194e6f63610d43a09267fa9e8fec4490b3ce5d
",,,,Translation updater bot,l10n-bot@translatewiki.net,Stephen Niedzielski,stephen@niedzielski.com,1486155174,1486398557,ba5df8e7fae4990f0eee518608ed2d55a18f02e2
ba5df8e7fae4990f0eee518608ed2d55a18f02e2,ba5df8e7,Stage description editing for beta/production.,"Stage description editing for beta/production.

This updates the languages on which we're enabling editing of
descriptions, namely Russian, Hebrew, and Catalan.

This also removes the feature-flag for description editing, allowing the
functionality to appear in Beta and Production. It also allows editing
descriptions in all languages in pre-Beta builds.

Change-Id: I64dd93349a3a0cabb4324c0dc012672f909cc9ec
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1486146833,1486146988,054ecc795e30a46fe3a3467a4c5bf019e5af5096
054ecc795e30a46fe3a3467a4c5bf019e5af5096,054ecc79,Make description editing help dialogs translatable.,"Make description editing help dialogs translatable.

Change-Id: I35971332a48e70856e6e8a7d85278ded1be3784f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1486145805,1486145805,692c4dbe8714a95955d3c5ce06e61cba771eec68
c80fa7a80d35eb9cad488f10e013e6fe7e7ff4a2,c80fa7a8,Fix: update PageHeaderViewTest screenshots for subtitle,"Fix: update PageHeaderViewTest screenshots for subtitle

Change-Id: I5513af14d22bae9555538b2a2b5454d9cc76941e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486142790,1486142790,692c4dbe8714a95955d3c5ce06e61cba771eec68
692c4dbe8714a95955d3c5ce06e61cba771eec68,692c4dbe,"Merge ""Update buildToolsVersion.""","Merge ""Update buildToolsVersion.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486135921,1486135921,"844f5bc0f33a55d9e07e5079585aff5bf62a3d7e,cd7413db0a1eaeda74a25307cf1a3d0ddbaec401"
844f5bc0f33a55d9e07e5079585aff5bf62a3d7e,844f5bc0,"Merge ""Don't show arbitrary notifications.""","Merge ""Don't show arbitrary notifications.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486078274,1486078274,"0ab2b3a3bfbbe3c681dfbf2bac7fe0abc8b8c348,f75e6ddea5b26804cf0414cfe203467855c8e977"
0ab2b3a3bfbbe3c681dfbf2bac7fe0abc8b8c348,0ab2b3a3,"Merge ""Update: page header subtitle leading""","Merge ""Update: page header subtitle leading""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486078273,1486078273,"c859d9610f47b627318e2e114bb5ce16a65aeaea,e62ff5df318e4b4695d8830a48dd2bced4dba0cc"
c859d9610f47b627318e2e114bb5ce16a65aeaea,c859d961,"Merge ""Fix: swap yellow90 and yellow30""","Merge ""Fix: swap yellow90 and yellow30""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486078272,1486078272,"53a48d7ad3010d1ec6ade074760d70466185bbcc,dd20adde0769968b18ac023ecc3ae6b539e6abf4"
53a48d7ad3010d1ec6ade074760d70466185bbcc,53a48d7a,Instrument EventLogging for description editing,"Instrument EventLogging for description editing

Bug: T149915
Change-Id: I45c74605d9fa5bf9036d30bd93f84b17365a3f77
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1486010473,1486068033,3bcb0d413fb129412d7925d83a1d631b32245067
e62ff5df318e4b4695d8830a48dd2bced4dba0cc,e62ff5df,Update: page header subtitle leading,"Update: page header subtitle leading

Reduce leading of page header subtitle text very slightly

Bug: T156677
Change-Id: If6fb7ad6ab1da82fa48ba9fe443fc54025d23937
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486060089,1486060089,dd20adde0769968b18ac023ecc3ae6b539e6abf4
dd20adde0769968b18ac023ecc3ae6b539e6abf4,dd20adde,Fix: swap yellow90 and yellow30,"Fix: swap yellow90 and yellow30

Bug: T139187
Change-Id: Ic4729b9d67adf2534a39f78600b774a999b0ec8b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1486056792,1486059238,d9055d5839b84348fc3d7bf322b6c62e5f52debf
cd7413db0a1eaeda74a25307cf1a3d0ddbaec401,cd7413db,Update buildToolsVersion.,"Update buildToolsVersion.

Change-Id: Ia6030151f99f1109f0d18f2787a1902f924ea40c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1486058581,1486058581,3bcb0d413fb129412d7925d83a1d631b32245067
f75e6ddea5b26804cf0414cfe203467855c8e977,f75e6dde,Don't show arbitrary notifications.,"Don't show arbitrary notifications.

(Yet.)
This restricts the notifications that the app shows to the ones that we
explicitly support.

Change-Id: Ic5c77bc1d2862a0dbc98eb8fd189b05f0a70a0a5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1485970190,1486056474,3bcb0d413fb129412d7925d83a1d631b32245067
3bcb0d413fb129412d7925d83a1d631b32245067,3bcb0d41,"Merge ""Add UserExtendedInfoClientTest""","Merge ""Add UserExtendedInfoClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486056372,1486056372,"d9055d5839b84348fc3d7bf322b6c62e5f52debf,7889c2f7cb6ed6bc567748594bd1def4a03c5f7c"
d9055d5839b84348fc3d7bf322b6c62e5f52debf,d9055d58,"Merge ""Get user ID after logging in or creating an account""","Merge ""Get user ID after logging in or creating an account""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486055616,1486055616,"fd89e51b674e85d447ae9126b788d78895259ac8,484c53350b5ffd68a3b1ad0dd789e9ecf891eefb"
fd89e51b674e85d447ae9126b788d78895259ac8,fd89e51b,"Merge ""Update: palette""","Merge ""Update: palette""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486052196,1486052196,"946c4a851e56ad8c05590e908830db7b1a73e678,27c813302821bfa207a94493a276953b5746588b"
946c4a851e56ad8c05590e908830db7b1a73e678,946c4a85,"Merge ""Update: tweak the page header subtitle""","Merge ""Update: tweak the page header subtitle""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486051482,1486051482,"14996453173bafd1f2b73824b678134251b16ad8,dd857a54ae59cb2b02dd42b74c25274be543f58f"
14996453173bafd1f2b73824b678134251b16ad8,14996453,"Merge ""Fix: add WikiSite unmarshaller for legacy JSON""","Merge ""Fix: add WikiSite unmarshaller for legacy JSON""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486050661,1486050661,"8b2e6b11f999ea91fa274589fbb3a32119cf679f,1fb0cf4bf8e60a42bd025d05827c23b4e7f75eda"
8b2e6b11f999ea91fa274589fbb3a32119cf679f,8b2e6b11,"Merge ""Update: improve WikiSite.authorityToLanguageCode() robustness""","Merge ""Update: improve WikiSite.authorityToLanguageCode() robustness""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1486049968,1486049968,"9a13dd1b4826da535e3b552fb24e3a39962778c1,12f69a88eeb9945a74f848961fdb7304e9ae38a2"
7889c2f7cb6ed6bc567748594bd1def4a03c5f7c,7889c2f7,Add UserExtendedInfoClientTest,"Add UserExtendedInfoClientTest

Change-Id: I063b904a632526c91719686dbc43c652deb2262d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1486010389,1486010389,484c53350b5ffd68a3b1ad0dd789e9ecf891eefb
484c53350b5ffd68a3b1ad0dd789e9ecf891eefb,484c5335,Get user ID after logging in or creating an account,"Get user ID after logging in or creating an account

The MW API doesn't return user id on login or account creation success.
We have to get it separately.  Currently, we don't do this, and the user id
in the app is always 0.

It seems the numeric user ID is needed for EventLogging, so we'd better
get it.

For the login case, this adds another paramter to the request that's
already made after login to retrieve group memberships, so that the user
ID is also returned.

For account creation, a simple new UserIdClient is added to make the
follow-up request.

Bug: T149915
Change-Id: I3dc7871805edf51d2de6598dd5a5e67140f416b5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485384436,1486010348,9a13dd1b4826da535e3b552fb24e3a39962778c1
9a13dd1b4826da535e3b552fb24e3a39962778c1,9a13dd1b,"Merge ""Fix/improve page backstack behavior.""","Merge ""Fix/improve page backstack behavior.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485996938,1485996938,"738402a1b0e858bb6cdef469bfdfb1933943e5f1,0eab5df43dea9b909e03bc79bf69bfe31b156c35"
738402a1b0e858bb6cdef469bfdfb1933943e5f1,738402a1,Hygiene: upgrade to Android Plugin for Gradle v2.2.3,"Hygiene: upgrade to Android Plugin for Gradle v2.2.3

Already outdated! No release notes but semver implies bug fixes

Change-Id: Ie0127d801c219576772de7c0a243d24842830055
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485991564,1485991564,936cb3099cf0d3ec9e4c423d7a1e717d715e412c
936cb3099cf0d3ec9e4c423d7a1e717d715e412c,936cb309,Update to Android Plugin for Gradle 2.2.0,"Update to Android Plugin for Gradle 2.2.0

See release notes:
https://developer.android.com/studio/releases/gradle-plugin.html

* When you run a build from the command line, Gradle now attempts to
  auto-download any missing SDK components or updates that your project
  depends on. To learn more, read Auto-download missing packages with
  Gradle.

* A new experimental caching feature lets Gradle speed up build times
  by pre-dexing, storing, and reusing the pre-dexed versions of your libraries
  To learn more about using this experimental feature, read the Build Cache
  guide at http://tools.android.com/tech-docs/build-cache.
  Again note that this is experimental.

* Adds support for the android:extractNativeLibs flag, which can reduce the
  size of your app when you install it on a device. When you set this flag to
  false in the <application> element of your app manifest, Gradle packages
  uncompressed and aligned versions of your native libraries with your APK.
  This prevents PackageManager from copying out your native libraries from
  the APK to the device's file system during installation and has the added
  benefit of making delta updates of your app smaller.

* You can now specify versionNameSuffix for product flavors. (Issue 59614)

* Jack now supports Jacoco test coverage when setting testCoverageEnabled to
  true.

Bug: T146169
Change-Id: I20b22f9c04d33901df17ed11845f910d93a781bd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485974132,1485985738,97aa8ec58024e058869c68109315175bd92a2ed9
0eab5df43dea9b909e03bc79bf69bfe31b156c35,0eab5df4,Fix/improve page backstack behavior.,"Fix/improve page backstack behavior.

Our tab/backstack logic is some of our more convoluted code to wrap one's
head around (sorry), but here's what this patch does:

- Previously, when PageFragment became attached to the activity, it
  automatically (unconditionally) asked PageDataClient to load the last
  page that was on the backstack. This is actually not quite correct,
  because the very next thing that the activity does is tell the fragment
  to load a new page. So what happens is that PageFragment pushes one page
  onto the backstack implicitly (without the activity telling it to), and
  then pushing another page onto the backstack explicitly when the
  activity tells it to load the next page.

The above logic may have actually been degrading the app's performance by
thrashing the WebView, by starting to load the implicit page, and
immediately following by loading the new page. This effect wasn't
perceptible during testing, which is why it was overlooked.

This patch adds some conditions to PageFragment's implicit loading of the
last page on the backstack. Namely, the only reasons for implicitly
loading the page is (a) when restoring from savedInstanceState, and (b)
when PageFragment is invoked to show the list of tabs.

This also simplifies some of the logic around loading the Main Page, and
when/how this actually happens (some of the logic is no longer necessary
due to our overhauled navigation).

And this also moves the logic of checking whether the requested page is
already being shown to PageFragment instead of PageActivity.

Note that this patch shouldn't be changing any user-visible behavior with
respect to tabs or navigation. On its face, it simply fixes the
above-mentioned backstack duplication bug that was observed recently.

Change-Id: I492acbbb96daad03c12a0cdf4a6b8d30ad9051e2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485974277,1485984807,97aa8ec58024e058869c68109315175bd92a2ed9
97aa8ec58024e058869c68109315175bd92a2ed9,97aa8ec5,"Merge ""Enable multi-window support.""","Merge ""Enable multi-window support.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485967973,1485967973,"ff69dd995279c2b338dd5170283eeab8239a0d38,ad44f568fdd3ea3b5cf6b17f3ceddddfba712463"
ff69dd995279c2b338dd5170283eeab8239a0d38,ff69dd99,"Merge ""Convert link preview dialog to be a native BottomSheet.""","Merge ""Convert link preview dialog to be a native BottomSheet.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485967544,1485967544,"2ffc7979acb610ab8fde021cd854c27eae314c5b,386bfffaa46085bbf1181d163f39b296bb0e3208"
27c813302821bfa207a94493a276953b5746588b,27c81330,Update: palette,"Update: palette

Update the app color scheme to 2017-01-15[0]. Only the Foundation theme
was changed. Screenshot tests still pass locally somehow

[0] https://phabricator.wikimedia.org/M82/222/

Bug: T156677
Bug: T139187
Change-Id: I361ec2742c3bd01026ecc24f11223204096fb9c3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485964767,1485964767,dd857a54ae59cb2b02dd42b74c25274be543f58f
dd857a54ae59cb2b02dd42b74c25274be543f58f,dd857a54,Update: tweak the page header subtitle,"Update: tweak the page header subtitle

Increase subtitle line height to ~24dp and darken

Bug: T156677
Change-Id: Ibfdb48b23362887832752edddc778a8d772a712c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485906330,1485964398,2ffc7979acb610ab8fde021cd854c27eae314c5b
2ffc7979acb610ab8fde021cd854c27eae314c5b,2ffc7979,"Merge ""Fix: rename PageHeaderViewTest reference images""","Merge ""Fix: rename PageHeaderViewTest reference images""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485960847,1485960847,"32c55637d9aaf4b18ed2d6459a65e33e06edb179,a6704c30a219fd2e3652efd8cbb5be6404809c63"
32c55637d9aaf4b18ed2d6459a65e33e06edb179,32c55637,"Merge ""Hygiene: remove unused method""","Merge ""Hygiene: remove unused method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485919876,1485919876,"00b290c79da1e946502bb5b9c9e4810d5691e748,268a21b2f60bf4e689d207c446e00d8330aa474e"
00b290c79da1e946502bb5b9c9e4810d5691e748,00b290c7,"Merge ""Update: allow OkHttp Cache to serve stale responses""","Merge ""Update: allow OkHttp Cache to serve stale responses""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485916574,1485916574,"1aaf868e481e5c3e6f48fcb4aef4b9b420358ed3,f459999e8bac26e37c8510de59f53c314d7a77f0"
268a21b2f60bf4e689d207c446e00d8330aa474e,268a21b2,Hygiene: remove unused method,"Hygiene: remove unused method

Change-Id: Ibf618904838043a2618041cef37b37436027921a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485907828,1485907828,1aaf868e481e5c3e6f48fcb4aef4b9b420358ed3
a6704c30a219fd2e3652efd8cbb5be6404809c63,a6704c30,Fix: rename PageHeaderViewTest reference images,"Fix: rename PageHeaderViewTest reference images

Change-Id: I14e0b96e880abdef244314e4a7a4acf077087ce4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485901683,1485901683,1aaf868e481e5c3e6f48fcb4aef4b9b420358ed3
1fb0cf4bf8e60a42bd025d05827c23b4e7f75eda,1fb0cf4b,Fix: add WikiSite unmarshaller for legacy JSON,"Fix: add WikiSite unmarshaller for legacy JSON

Bug: T152980
Change-Id: Ia4fdadd999036a01037f29313231608cf72973f7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485899230,1485899230,12f69a88eeb9945a74f848961fdb7304e9ae38a2
ad44f568fdd3ea3b5cf6b17f3ceddddfba712463,ad44f568,Enable multi-window support.,"Enable multi-window support.

- On Android Nougat, the app already implicitly has multi-window support,
  and needs no changes to its manifest.

- On Samsung devices, it's a simple matter of adding a few specific tags
  to the manifest.

Now that link previews have been converted to true BottomSheets, there
don't seem to be any additional blockers to enabling this.

Bug: T109178
Change-Id: I7275c1ba642090ea66c1c88b7c5dc3873271fea1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485898433,1485898433,386bfffaa46085bbf1181d163f39b296bb0e3208
386bfffaa46085bbf1181d163f39b296bb0e3208,386bfffa,Convert link preview dialog to be a native BottomSheet.,"Convert link preview dialog to be a native BottomSheet.

This makes our link preview dialog become a true BottomSheet, which the
rest of our bottom sheets already are.

The only thing we ""lose"" by doing this is the overlay ""Read article""
button that floats on top of the sheet (the button will now be fixed at
the bottom of the sheet). However, the user may always tap the title
header of the link preview to navigate to the article.

The benefits of this change are:
- This was one of the last missing pieces for multi-window support on
  Samsung and Android Nougat devices.
- A great simplification of the code, and removal of custom reinvention
  of bottom sheet functionality.

TODO: Make the link preview dialog use butterknife.

Bug: T109341
Change-Id: I6290e14774a5746c6a0988276139cfcb8cbd2978
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485897141,1485897141,bdd77a22b6da77170fc045a3e0c85cf9bbb89d01
12f69a88eeb9945a74f848961fdb7304e9ae38a2,12f69a88,Update: improve WikiSite.authorityToLanguageCode() robustness,"Update: improve WikiSite.authorityToLanguageCode() robustness

Return correct outputs for no and mobile subdomain authority inputs. Add
some tests to WikiSite

Bug: T152980
Change-Id: I2a6075b746b36462086a8aa639d06d6bb6e1c275
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485828711,1485895602,1aaf868e481e5c3e6f48fcb4aef4b9b420358ed3
1aaf868e481e5c3e6f48fcb4aef4b9b420358ed3,1aaf868e,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485895108,1485895108,"bdd77a22b6da77170fc045a3e0c85cf9bbb89d01,12bad603d6b1178b60b54fbc90a467f00cea8e6e"
12bad603d6b1178b60b54fbc90a467f00cea8e6e,12bad603,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ie57dcc3254cbb4cf0686fd2b13f5ec3c33bcefc9
",,,,Translation updater bot,l10n-bot@translatewiki.net,Stephen Niedzielski,stephen@niedzielski.com,1485791690,1485894763,cc7f6a1ffcdced9f837aa471b61163891b5fd26a
bdd77a22b6da77170fc045a3e0c85cf9bbb89d01,bdd77a22,"Merge ""Allow minimal HTML in errors from abusefilter when editing descriptions.""","Merge ""Allow minimal HTML in errors from abusefilter when editing descriptions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485891161,1485891161,"c3b4a3b728782581b6581ef9ec9577ed38edc13d,3021bbbd86220d5b2fc4a617d084fc7f85a28f5d"
c3b4a3b728782581b6581ef9ec9577ed38edc13d,c3b4a3b7,"Merge ""Remove IME action when editing a section.""","Merge ""Remove IME action when editing a section.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485891006,1485891006,"02b421c11fb7c2f0088474b282bd48e90c54c896,31fc8fafb60e30229309b8836ca9a9ed12c0686e"
02b421c11fb7c2f0088474b282bd48e90c54c896,02b421c1,"Merge ""Replace PageCache with OkHttp caching""","Merge ""Replace PageCache with OkHttp caching""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485887349,1485887349,"6afa3190b3e838d21660b77316d52e33d6dd870a,155f4731ddd3281de9671c1f338c0c55535c0f60"
3021bbbd86220d5b2fc4a617d084fc7f85a28f5d,3021bbbd,Allow minimal HTML in errors from abusefilter when editing descriptions.,"Allow minimal HTML in errors from abusefilter when editing descriptions.

The `abusefilter` server response may actually contain HTML, so let's try
to render it properly in our TextInputLayout.

Change-Id: I9c812aba841807d6d492c2fd3c3a251eed97b10a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485885876,1485885876,83a0df05ffe2c09ba4a8654e00a60135ab6b412b
6afa3190b3e838d21660b77316d52e33d6dd870a,6afa3190,"Merge ""Improve error messages in CreateAccount and EditSection.""","Merge ""Improve error messages in CreateAccount and EditSection.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485881138,1485881138,"83df080d9b53d5de61ca8c693652fde0a50295a3,874bc14f61bdb75d61f4f400087297369b3dd538"
31fc8fafb60e30229309b8836ca9a9ed12c0686e,31fc8faf,Remove IME action when editing a section.,"Remove IME action when editing a section.

When editing a section (on API 25), the soft keyboard was showing a ""Done""
button, which not only doesn't do anything, but it also prevents the user
from inserting a carriage-return into the text.

This explicitly sets the IME action to None. (It doesn't seem to be enough
to simply leave out the ""imeOptions"" xml attribute...)

Change-Id: I9ecd3e855fa06ac2fbae20487de1dd39954ea01d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485881048,1485881048,83a0df05ffe2c09ba4a8654e00a60135ab6b412b
874bc14f61bdb75d61f4f400087297369b3dd538,874bc14f,Improve error messages in CreateAccount and EditSection.,"Improve error messages in CreateAccount and EditSection.

In a couple places, we're currently showing error messages with no context
at all:

- If account creation fails (i.e. the server returns an error), we simply
  show ""An unknown error occurred"", when in fact the server error contains
  a meaningful message about why the account cannot be created.

- Similarly, if submitting an edit fails, we simply show a dialog with the
  message ""Edit failed,"" and no other data.

This patch, without doing a major refactor, improves the messages shown to
the user in these circumstances by displaying the actual contents of the
Exception that was received, which is often a meaningful response from the
server that explains exactly what went wrong.

Bug: T102877
Change-Id: I90fc03b451bffc32875f19b49ce2841d0aa741e9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485879920,1485879920,83a0df05ffe2c09ba4a8654e00a60135ab6b412b
83df080d9b53d5de61ca8c693652fde0a50295a3,83df080d,Use thumbwidth instead of thumbsize when fetching lead image,"Use thumbwidth instead of thumbsize when fetching lead image

At long last T98528 is resolved, so let's use thumbwidth rather than
thumbsize when requesting lead images.

Corresponding MCS patch: I1d902456ab5c87e5e4f22c58fd7ae0245e0d2de5

Bug: T91144
Change-Id: Ic709ab9cf60b3bf99fde1bd4b66bb6556af7f3fa
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485869985,1485869985,83a0df05ffe2c09ba4a8654e00a60135ab6b412b
83a0df05ffe2c09ba4a8654e00a60135ab6b412b,83a0df05,"Merge ""[Facepalm] Correctly set interval for notification polling.""","Merge ""[Facepalm] Correctly set interval for notification polling.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485835228,1485835228,"9730cb73f4de0dea554f853800e681fcafff01be,0101ff0b838f949d773d893ea506ca863e850074"
0101ff0b838f949d773d893ea506ca863e850074,0101ff0b,[Facepalm] Correctly set interval for notification polling.,"[Facepalm] Correctly set interval for notification polling.

In my ongoing testing of our notifications, I've been noticing that our
polling task doesn't actually repeat like we tell it to. After hours of
fruitless debugging, I noticed that we were passing in the raw integer
resource ID, instead of the actual integer dimension. Therefore, we were
inadvertently setting a repeat interval of 2132897234 or something
similar.  The same for the number-of-days timeout for the polling task to
stop itself.

This patch switches to the much-more-correct scheme of using the
getInteger() method of retrieving the integer dimension, instead of using
the resource ID.

I suspect that our ""testing"" of notifications has worked so far because
after editing a description we call startPollTask() which effectively
queues the task for immediate execution.

(This patch also cleans up the code a bit.)

Change-Id: I5e0f6b0bb3813763133f891b9475abb232dee62a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485811936,1485820166,d2e7b0b363bbdfc5d4e6c6016ed79bfc691f3618
9730cb73f4de0dea554f853800e681fcafff01be,9730cb73,"Merge ""Display description editing errors as user-friendly language in a snackbar""","Merge ""Display description editing errors as user-friendly language in a snackbar""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485813434,1485813434,"852ecc3b9e908e94e2311a605113e4b5a3169cd5,7f7b08ce708d3ad0dd886345e590d8e3754915c9"
852ecc3b9e908e94e2311a605113e4b5a3169cd5,852ecc3b,"Merge ""Hygiene: add Page @NonNull / @Nullable annotations""","Merge ""Hygiene: add Page @NonNull / @Nullable annotations""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485813140,1485813140,"d2e7b0b363bbdfc5d4e6c6016ed79bfc691f3618,465826b9942a228c9a6d79e4d885750a1b35304d"
7f7b08ce708d3ad0dd886345e590d8e3754915c9,7f7b08ce,Display description editing errors as user-friendly language in a snackbar,"Display description editing errors as user-friendly language in a snackbar

Use FeedbackUtil.showError, which achieves both goals at once:

1) Shows the message in a snackbar, and

2) Leverages ThrowableUtil.getAppError to return a user-friendly
   message for the error type.

Bug: T152010
Change-Id: Ia231dea2c10d41fd5e8a637c9e583425742352f0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485812220,1485812374,d2e7b0b363bbdfc5d4e6c6016ed79bfc691f3618
d2e7b0b363bbdfc5d4e6c6016ed79bfc691f3618,d2e7b0b3,"Merge ""Make description editing respect page protection""","Merge ""Make description editing respect page protection""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485811441,1485811441,"13665cefa87e9e27a0a45cf0851dd3307947bad6,a49333791f0a6dbbe0c0b560719bf77f4c7d7210"
465826b9942a228c9a6d79e4d885750a1b35304d,465826b9,Hygiene: add Page @NonNull / @Nullable annotations,"Hygiene: add Page @NonNull / @Nullable annotations

Add missing @NonNull / @Nullable annotations as inferred by existing
constructor annotations and final. Remove redundant null check in
DescriptionEditClient

Change-Id: Ia657ef88f78f653229f61a6d929b5cc10ff54dbf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485811252,1485811252,a49333791f0a6dbbe0c0b560719bf77f4c7d7210
13665cefa87e9e27a0a45cf0851dd3307947bad6,13665cef,"Fix ""Edit History"" link in notifications.","Fix ""Edit History"" link in notifications.

When a notification comes from Wikidata, the text() property contains the
Q-number, and the full() contains the label. When directing the user to
the edit history of the item, we actually want the Q-number, since
navigating to the label in Wikidata will go to a nonexistent page.

Change-Id: I2193847d1182dd58b28c31663de982ce89f6898f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485808375,1485808375,116de59f4b7be235964a9827f3d5055e29141138
116de59f4b7be235964a9827f3d5055e29141138,116de59f,Show notifications in heads-up style.,"Show notifications in heads-up style.

This configures our notifications to appear as ""heads-up"" notifications,
meaning that they will pop up on top of the current app, in addition to
just showing a notification icon in the system bar.

This applies to Revert notifications, as well as Zero enter/exit
notifications.

The key was to set the DEFAULT_ALL flag on the notification, along with
the PRIORITY flag being set to high or max.

Change-Id: I24c8f54a5c6c6761e7ddcd5ad87469d751f0fcac
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485805772,1485806158,cc7f6a1ffcdced9f837aa471b61163891b5fd26a
f459999e8bac26e37c8510de59f53c314d7a77f0,f459999e,Update: allow OkHttp Cache to serve stale responses,"Update: allow OkHttp Cache to serve stale responses

Bug: T148675
Change-Id: Ie4a99141462497c13ff63dee666ed4948e7c5421
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485474618,1485797006,155f4731ddd3281de9671c1f338c0c55535c0f60
155f4731ddd3281de9671c1f338c0c55535c0f60,155f4731,Replace PageCache with OkHttp caching,"Replace PageCache with OkHttp caching

Only use OkHttp caching. This patch introduces a regression where
unsaved cached pages are no longer loaded when offline. A later patch
enables the stale behavior for OkHttp

Bug: T148675
Change-Id: Ie4cd16463360a1b44f5f52ac1d1a3afb84fb66ff
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484857147,1485796998,cc7f6a1ffcdced9f837aa471b61163891b5fd26a
cc7f6a1ffcdced9f837aa471b61163891b5fd26a,cc7f6a1f,Show CC license disclaimer when editing descriptions.,"Show CC license disclaimer when editing descriptions.

Includes a couple of design tweaks in DescriptionEditView.

This also updates the tint of the CC icon in the section editing activity,
and updates it to use the vector drawable.

TODO: Factor out the display of the CC logo + license disclaimer into its
own View, to be shared between the Section editing and Description editing
activities.

TODO: Remove the raster CC logo image, which is currently only being used
by some screenshot tests.

Bug: T156279
Bug: T153483
Change-Id: Id501b2fb337abe4ae394d68753d36368f60a3188
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1485446932,1485787130,a40b386a1229a62ad570e6a6b771af29809e0363
a40b386a1229a62ad570e6a6b771af29809e0363,a40b386a,"Merge ""Hygiene: Move Wikitext-related classes from 'preview' to 'wikitext'""","Merge ""Hygiene: Move Wikitext-related classes from 'preview' to 'wikitext'""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485786948,1485786948,"e6762789e2cb5e18b4c02a713b60cf77b22a4cd9,893c2172d5c0501c57fa15ce2c92ea0e0957324e"
e6762789e2cb5e18b4c02a713b60cf77b22a4cd9,e6762789,Hygiene: update comment in NamespaceTypeAdapterTest,"Hygiene: update comment in NamespaceTypeAdapterTest

Change-Id: I7af95b3dcbd881e42c852383eb7689d8d1bd8ec0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485569116,1485569116,5f6950ec65ff7ed92a1aa479ffd32bdbf913972d
5f6950ec65ff7ed92a1aa479ffd32bdbf913972d,5f6950ec,Update: throw Exception when trying to marshal ZeroConfig,"Update: throw Exception when trying to marshal ZeroConfig

ZeroConfig.toString() does not produce JSON. Throw an
UnsupportedOperationException so no attempt can be made

Change-Id: If999b4fddd6e218e7c4ee2488a9d298870d93791
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485567905,1485567905,2d95c900665550f8ff2e9ed167c08f2221951b63
2d95c900665550f8ff2e9ed167c08f2221951b63,2d95c900,Update: add a couple WikiSite tests,"Update: add a couple WikiSite tests

Change-Id: Id68f4efbccadf4c4e351d444832c47b22d9deb52
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485567637,1485567637,7aa2e83e4f20527cbf2b1ea1c15944df2b29593c
7aa2e83e4f20527cbf2b1ea1c15944df2b29593c,7aa2e83e,Hygiene: reorder PageBackStackItem methods,"Hygiene: reorder PageBackStackItem methods

Change-Id: I2f6eca294f69db197e2f94e41c74561d7f544a11
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485566126,1485566126,ba13669d0395f9f8ef4cf21e0765e4cbc1df088d
ba13669d0395f9f8ef4cf21e0765e4cbc1df088d,ba13669d,Hygiene: reorder PageTitle members and add annotations,"Hygiene: reorder PageTitle members and add annotations

Reorder member variables and methods according to exposure and add a
couple missing annotations

Change-Id: Ib437ac91c2115b9dfc939a58d17776dd130b76e6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485565709,1485565709,74f052a296f4bb6b8e8ac141c569d1396937b6bd
74f052a296f4bb6b8e8ac141c569d1396937b6bd,74f052a2,Hygiene: limit visibility of Parcel constructors,"Hygiene: limit visibility of Parcel constructors

Parcelable implementations only require private Parcel constructors, not
public. For non-final classes, protected is appropriate. For final
classes, private

Change-Id: I0191a0498a4ff3e8f85c788458cfbe48eecdaca6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485565428,1485565428,0b3a55e28fac8f6e1726cdcbbcc977cc4bb329ef
0b3a55e28fac8f6e1726cdcbbcc977cc4bb329ef,0b3a55e2,Update: add equals() and hashCode() overrides to Tab and PageBackStackItem,"Update: add equals() and hashCode() overrides to Tab and PageBackStackItem

 • Subclass BaseModel from Tab and PageBackStackItem so equals() works
   as expected

 • Add partial implementation of TabUnmarshallerTest

Change-Id: Ifd67340dcac3c28c2a0d9ce4fc8e3e9b7095c477
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485560524,1485560524,298bffc9e34a04f990d223b18bfeec2fe68702ca
298bffc9e34a04f990d223b18bfeec2fe68702ca,298bffc9,Hygiene: move WikiSite Parcelable test from PercelableTest to WikiSiteTest,"Hygiene: move WikiSite Parcelable test from PercelableTest to WikiSiteTest

Change-Id: I4b1c3c7a03c85ac18257b9103b6b36cd9d62a061
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485560369,1485560369,b18c50b37bf9fca04ebca56e50ab942bccff74cc
893c2172d5c0501c57fa15ce2c92ea0e0957324e,893c2172,Hygiene: Move Wikitext-related classes from 'preview' to 'wikitext',"Hygiene: Move Wikitext-related classes from 'preview' to 'wikitext'

The Wikitext and WikitextClient classes somehow made it into the package
org.wikipedia.edit.preview but don't have anything to do with the edit
preview.  They're used initially to fetch the wikitext to edit.

This moves them to their own package, org.wikipedia.edit.wikitext.

Change-Id: Ifc258c802140e463d43001b5d2e58f12278beab2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485559197,1485559197,b18c50b37bf9fca04ebca56e50ab942bccff74cc
b18c50b37bf9fca04ebca56e50ab942bccff74cc,b18c50b3,"Merge ""Update CSS assets""","Merge ""Update CSS assets""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485529765,1485529765,"dafaeafdd92ab722ea6cf2d2c56fa83b078a8cf4,49d913362fca9d321ab5169a8165ef4698bced14"
dafaeafdd92ab722ea6cf2d2c56fa83b078a8cf4,dafaeafd,"Merge ""Load CSS stylesheets from a Wikimedia production environment""","Merge ""Load CSS stylesheets from a Wikimedia production environment""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485529763,1485529763,"677215541455e4cb5e64ce26d688e456fed258ee,2b58739e21b0ceb98090942793fc121a1b4cc0ce"
677215541455e4cb5e64ce26d688e456fed258ee,67721554,"Merge ""Show link previews for (Wikipedia) links in gallery item descriptions""","Merge ""Show link previews for (Wikipedia) links in gallery item descriptions""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485479674,1485479674,"43ef04951eef76b37eb3c6bc35cdbabdef20c45c,16cd7260d7cae512531c0ec99d2d9fe0f8930262"
43ef04951eef76b37eb3c6bc35cdbabdef20c45c,43ef0495,Hygiene: rename some MediaWiki action API response types,"Hygiene: rename some MediaWiki action API response types

• Add MobileView or Query to MediaWiki action API response types to
  indicate the request type. It's a little verbose but it's easy to
  understand intended use case

• Rename MwApiException to MwException, MwApiResponsePage to
  MwQueryPage, NearbyPageMwResponse to MwQueryNearbyPage

Change-Id: I5f9b150c5a05428476aab1cec12ff2983c494c44
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485032046,1485455358,2f35d1dc5a6f352e427ee3204ccbef5e6c60aa42
1c0d5e453fb0b1079db86057c029fc7f1ce7fba1,1c0d5e45,Hygiene: don't assume gradlew is in PATH,"Hygiene: don't assume gradlew is in PATH

The gradlew is script is normally only in the project folder which is
unlikely to appear in the PATH environment variable except on Windows

Change-Id: Icc59dc29d76fed553586ba4bc15b5a4345da29a6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485453964,1485454235,2f35d1dc5a6f352e427ee3204ccbef5e6c60aa42
2f35d1dc5a6f352e427ee3204ccbef5e6c60aa42,2f35d1dc,"Merge ""Give the gallery a black background""","Merge ""Give the gallery a black background""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485453683,1485453683,"f72fd15e105cf1dea43a4922a7e592b9e3838b89,4618460d4cbab212fa3fb3268414edfe08dfcb12"
f72fd15e105cf1dea43a4922a7e592b9e3838b89,f72fd15e,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485452236,1485452236,"958c39b45e123876271fa9e0350888f1fe33eaa2,01b195b65b9e2e8eacdfaf1c315b5d92eb8fe073"
01b195b65b9e2e8eacdfaf1c315b5d92eb8fe073,01b195b6,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ibd922c2733213988eeed97b6851ff6453a04042f
",,,,Translation updater bot,l10n-bot@translatewiki.net,Stephen Niedzielski,stephen@niedzielski.com,1485426099,1485451372,cd6e5bddf7e9336089c39d29df3ea8f244ac3861
958c39b45e123876271fa9e0350888f1fe33eaa2,958c39b4,"Merge ""Replace EditPreviewTest with MockWebServer-based EditPreviewClientTest""","Merge ""Replace EditPreviewTest with MockWebServer-based EditPreviewClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485450085,1485450085,"d837f8c82ea40ec7675b8fbfec6c5a02624c9629,a8a0184eed26d355fd49ebfa7fd7b45847e21665"
d837f8c82ea40ec7675b8fbfec6c5a02624c9629,d837f8c8,"Merge ""Make revert notification lead to the original page, with help dialog.""","Merge ""Make revert notification lead to the original page, with help dialog.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485449167,1485449167,"7cc36a6c23cab6c46302e19e068dbfb7cc443f9a,610eee3e0397f70187ad1f57f0b6e1c3fe001749"
7cc36a6c23cab6c46302e19e068dbfb7cc443f9a,7cc36a6c,"When fetching page images, specify 'any' license.","When fetching page images, specify 'any' license.

This ensures that the app will show the most relevant images for search
results and other page lists, by explicitly requesting images with any
license, which may include fair-use in addition to CC.

Bug: T153823
Change-Id: I546b3abef0b03dbba5308a720f651b91a9819b82
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485193749,1485443154,26ef29c7f9658b19fc316f242e36fb9ef6a40d87
a8a0184eed26d355fd49ebfa7fd7b45847e21665,a8a0184e,Replace EditPreviewTest with MockWebServer-based EditPreviewClientTest,"Replace EditPreviewTest with MockWebServer-based EditPreviewClientTest

Bug: T154809
Change-Id: I1767d12be1f9617bd3c38a3b7306f1ff634f1532
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485029529,1485442953,37401c6e40157b68aae61161f853759d0e9b9b56
610eee3e0397f70187ad1f57f0b6e1c3fe001749,610eee3e,"Make revert notification lead to the original page, with help dialog.","Make revert notification lead to the original page, with help dialog.

When the user receives a revert notification, they'll now be able to click
the notification to go back to that page in the app, and see a brief
explanation dialog with a few reasons why the edit might be reverted.

Bug: T154787
Change-Id: I4c6a78f27f0a6ef5e7bfebc991958f3425cfc792
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485191074,1485442916,795939fcfc946405be137cc0ad2c20ef330ee02a
26ef29c7f9658b19fc316f242e36fb9ef6a40d87,26ef29c7,Ensure that keyboard is hidden after editing description.,"Ensure that keyboard is hidden after editing description.

After a lot (a *lot*) of trial and error, this is the least amount of code
necessary to ensure that the soft keyboard gets hidden upon a successful
description edit, on all APIs and vendors that I've tested.

Change-Id: I377eb8ae3bbde6d8aa1be4045f7f8ff4d5666977
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485440613,1485442744,37401c6e40157b68aae61161f853759d0e9b9b56
37401c6e40157b68aae61161f853759d0e9b9b56,37401c6e,"Merge ""Hygiene: consolidate org.wikipedia.server into org.wikipedia.dataclient""","Merge ""Hygiene: consolidate org.wikipedia.server into org.wikipedia.dataclient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485442584,1485442584,"bc6f1fadb24962ac04b6e6df1410a961a050c5ca,5b8a635bb1b2d6b28542db1f141e8e60f4b7d161"
bc6f1fadb24962ac04b6e6df1410a961a050c5ca,bc6f1fad,"Merge ""Fix: use app language when new nearby results are requested""","Merge ""Fix: use app language when new nearby results are requested""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485442583,1485442583,"2a48deaa72c50026d51912989bdb78b9c2244c05,fdc3a9c53ab02e24fa0971e9cfe6b3e40bd923eb"
2a48deaa72c50026d51912989bdb78b9c2244c05,2a48deaa,"Merge ""Hygiene: Remove unused method""","Merge ""Hygiene: Remove unused method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485442582,1485442582,"cd6e5bddf7e9336089c39d29df3ea8f244ac3861,f8ee47013c7c78879b99b5b838b884e08ec9d59a"
a49333791f0a6dbbe0c0b560719bf77f4c7d7210,a4933379,Make description editing respect page protection,"Make description editing respect page protection

Change-Id: I45f99bf1af8fb75ec61a454ab9bcfb0dc87e3119
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485441266,1485441873,cd6e5bddf7e9336089c39d29df3ea8f244ac3861
49d913362fca9d321ab5169a8165ef4698bced14,49d91336,Update CSS assets,"Update CSS assets

This includes the latest changes to the relevant modules pushed to
mediawiki.org as part of the mediawiki 1.29.0-wmf.9 branch release.

Change-Id: I094a0e226cdb7dc87aaf2bd043cce9607cc3f3da
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485391043,1485391043,2b58739e21b0ceb98090942793fc121a1b4cc0ce
2b58739e21b0ceb98090942793fc121a1b4cc0ce,2b58739e,Load CSS stylesheets from a Wikimedia production environment,"Load CSS stylesheets from a Wikimedia production environment

As of I177b3a355dcd2488da9af668273f7e65b6afa86b, certain Wikipedia-
specific style hacks are only applied in Wikimedia production
environments (via the config variable $wgMinervaApplyKnownTemplateHacks).
See T94102.

We can hit a production wiki for our stylesheets and still get the
styles.  This will also have the (perhaps beneficial) effect that we will
only get the code that has been deployed to production (i.e., not styles
merged to MobileFrontend master but subject to change before release).

THEREFORE, this changes make-css-assets.bash to get stylesheets from
mediawiki.org, which is among the ""Group 0"" wikis that first receive
weekly release branch code on Tuesdays (11 a.m. Pacific / 2 p.m Eastern).

Change-Id: I12a38fecfe21495681b1a0b1d2bf2c521396f601
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485377208,1485391035,cd6e5bddf7e9336089c39d29df3ea8f244ac3861
cd6e5bddf7e9336089c39d29df3ea8f244ac3861,cd6e5bdd,Make text in reference popups be selectable.,"Make text in reference popups be selectable.

Bug: T153575
Change-Id: I03cc75fcad15f613b71781f1ab8df751a1488c73
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1485359194,1485359194,c4c4287a0bd391342f3240aa38e088cba5c44768
f8ee47013c7c78879b99b5b838b884e08ec9d59a,f8ee4701,Hygiene: Remove unused method,"Hygiene: Remove unused method

Change-Id: I6f8159db3ef49deb22699da18714f8088f78aa1b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485301005,1485301005,c4c4287a0bd391342f3240aa38e088cba5c44768
c4c4287a0bd391342f3240aa38e088cba5c44768,c4c4287a,"Merge ""Fix: wrap long description inputs across multiple lines""","Merge ""Fix: wrap long description inputs across multiple lines""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485299163,1485299163,"4c7061784fe05a0e24b0ab24a0235b0515cfb26a,fc59a0984b89d35b2f43507b4415d7bc1e2cc1fd"
4c7061784fe05a0e24b0ab24a0235b0515cfb26a,4c706178,"Merge ""Rename ArticleHeaderView to PageHeaderView""","Merge ""Rename ArticleHeaderView to PageHeaderView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485298461,1485298461,"f0e92aca9ad7e6d63b4134f5ee3141a0b859b825,73890d33c1d549b6ac9f1127224e82a64107fc7a"
73890d33c1d549b6ac9f1127224e82a64107fc7a,73890d33,Rename ArticleHeaderView to PageHeaderView,"Rename ArticleHeaderView to PageHeaderView

Since all pages are not articles, ArticleHeaderView becomes a misnomer. Hence, this task has renamed the ArticleHeaderView with PageHeaderView.

Bug: T155920
Change-Id: I3d307164eddea99292070fe7bc8b951628a8df3f
",,,,Sandaru,sandarumk@gmail.com,Michael Holloway,mholloway@wikimedia.org,1485281383,1485297928,be1c57a36371eeed719284f393c69c5158404d88
fc59a0984b89d35b2f43507b4415d7bc1e2cc1fd,fc59a098,Fix: wrap long description inputs across multiple lines,"Fix: wrap long description inputs across multiple lines

Setting the IME options to ""actionDone"" unexpectedly disables the
multiline wrap behavior of the EditText. Add a workaround to
PlainPasteEditText after the input connection is made

Change-Id: Iea367c06f238c4bf62d01feea631f13bba6d0c15
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485272369,1485283224,be1c57a36371eeed719284f393c69c5158404d88
16cd7260d7cae512531c0ec99d2d9fe0f8930262,16cd7260,Show link previews for (Wikipedia) links in gallery item descriptions,"Show link previews for (Wikipedia) links in gallery item descriptions

Note that many links in gallery item descriptions are for Commons pages
and will not be handled in-app (see T156018).

Bug: T142024
Change-Id: If7ce774861176ba71af4345742a3eee99955dea3
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484959497,1485278212,4618460d4cbab212fa3fb3268414edfe08dfcb12
4618460d4cbab212fa3fb3268414edfe08dfcb12,4618460d,Give the gallery a black background,"Give the gallery a black background

Bug: T142024
Change-Id: I1386827ec958b3f6367d06e3f57407c8f7427231
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485278137,1485278137,be1c57a36371eeed719284f393c69c5158404d88
f0e92aca9ad7e6d63b4134f5ee3141a0b859b825,f0e92aca,Add basic 2FA support,"Add basic 2FA support

Can be modified to be a ""one-step"" rather than ""two-step"" process for the
user if desired.

Very basic but this gets us from zero to something for those users who
need it.

Bug: T150900
Change-Id: I89f339ec8d58813815ea6791bf8930b83ff7f400
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1479479098,1485267417,be1c57a36371eeed719284f393c69c5158404d88
be1c57a36371eeed719284f393c69c5158404d88,be1c57a3,"Merge ""Display date in featured image share subject when coming from the gallery""","Merge ""Display date in featured image share subject when coming from the gallery""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485235484,1485235484,"c10bc2f1a95f4652b2e9f3e9f2e526a9a959c0d0,4369fb92edfa4e0d9480af5a4d6273ad6b1e18f3"
4369fb92edfa4e0d9480af5a4d6273ad6b1e18f3,4369fb92,Display date in featured image share subject when coming from the gallery,"Display date in featured image share subject when coming from the gallery

Change-Id: I38cb6dcd274c1a9b9248d266f28aab3a0c053ca6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1481668032,1485213963,f78d6588e77b5f25d9329f7ec23af831d6dacb2f
c10bc2f1a95f4652b2e9f3e9f2e526a9a959c0d0,c10bc2f1,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485213041,1485213041,"f78d6588e77b5f25d9329f7ec23af831d6dacb2f,1641325c3a476d14ddf55408af1c7ee53aefd608"
1641325c3a476d14ddf55408af1c7ee53aefd608,1641325c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I66e36a088640ed8d54606b83fb0fad4d567f150c
",,,,Translation updater bot,l10n-bot@translatewiki.net,Stephen Niedzielski,stephen@niedzielski.com,1485173934,1485212361,795939fcfc946405be137cc0ad2c20ef330ee02a
f78d6588e77b5f25d9329f7ec23af831d6dacb2f,f78d6588,"Merge ""Make use of IME action button when editing descriptions.""","Merge ""Make use of IME action button when editing descriptions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485198369,1485198369,"1a9a1d06e353c2188daccaed41316142cfee3ab2,9983d996d5fa82e580234150bd07e514a3c8e4f6"
1a9a1d06e353c2188daccaed41316142cfee3ab2,1a9a1d06,"Merge ""Replace EditTest with MockWebServer-based EditClientTest""","Merge ""Replace EditTest with MockWebServer-based EditClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485196943,1485196943,"a6542a4671550e3497467a054b36c8bf283d7de0,0bd980eeebd1e9b5bd265f6dd9f3d06cab45feb8"
a6542a4671550e3497467a054b36c8bf283d7de0,a6542a46,"Merge ""Hygiene: Clean up some editing-related classes""","Merge ""Hygiene: Clean up some editing-related classes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485195850,1485195850,"498340b01d97e3c22173d408a9a436613f107e45,53eb887a1aad780409d4ebd5c49682eed7036cad"
498340b01d97e3c22173d408a9a436613f107e45,498340b0,"Merge ""Hygiene: Clean up misuse of PageTitles in GalleryActivity""","Merge ""Hygiene: Clean up misuse of PageTitles in GalleryActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485194803,1485194803,"2fa6b593e22f3692381f49fb2936ba459582f215,c1c7ccff8a8a01150cbc16c111d639dac260d8a2"
2fa6b593e22f3692381f49fb2936ba459582f215,2fa6b593,"Merge ""Hygiene: Move more PageFragment message handlers to setupMessageHandlers""","Merge ""Hygiene: Move more PageFragment message handlers to setupMessageHandlers""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485191803,1485191803,"7ef9a889f6483525b72c5193b7642f7928456612,2eb9185168a313f1335abc394a343d03b6c2052b"
5b8a635bb1b2d6b28542db1f141e8e60f4b7d161,5b8a635b,Hygiene: consolidate org.wikipedia.server into org.wikipedia.dataclient,"Hygiene: consolidate org.wikipedia.server into org.wikipedia.dataclient

org.wikipedia.server is mostly a page data client so start breaking
classes into page subpackages

Change-Id: I7915807d44a4173c48be416e41629e44c9efe7e5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485031220,1485189156,7ef9a889f6483525b72c5193b7642f7928456612
9983d996d5fa82e580234150bd07e514a3c8e4f6,9983d996,Make use of IME action button when editing descriptions.,"Make use of IME action button when editing descriptions.

This enables a ""Done"" button on the soft keyboard when editing a
description, which takes the place of the carriage-return key. Clicking
the button will have the same effect as the Save button in the toolbar.

Unfortunately it doesn't seem to be possible to dynamically ""enable"" and
""disable"" the Done button inside the keyboard in the same way that we do
with the Save button, so the keyboard button is always enabled, but it
will simply have no effect if the Save button is disabled (i.e. if the
description is unmodified or empty).

This also enables long-press hints for the buttons in the description
editing UX.

Bug: T150712
Change-Id: I00f8b185eb671e75de7d9aaee4c9c37b5de1aec7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1484866770,1485181760,7ef9a889f6483525b72c5193b7642f7928456612
c1c7ccff8a8a01150cbc16c111d639dac260d8a2,c1c7ccff,Hygiene: Clean up misuse of PageTitles in GalleryActivity,"Hygiene: Clean up misuse of PageTitles in GalleryActivity

The logger expects a PageTitle object coming from the gallery activity,
but we may not be in the context of wiki page since the gallery can now
also be launched from the feed featured image card.

An earlier commit introduced the idea of keeping around a placeholder
PageTitle for logging purposes in the event we're coming from the feed
featured image card.  But storing this in the pageTitle member variable
is a bad idea since this makes creates a risk it'll end up getting
inappropriately passed to the content model for the page data client or
inserted into the cache.

This patch eliminates such use of the PageTitle class and updates
downstream usages of the PageTitle object as need.

To follow up: figure out a good way to pass the featured image date
through to the gallery for use in a share subject.  A
FeaturedImageGalleryItem subclass would likely be appropriate here.

Bug: T152980
Change-Id: I74ef3557700018176310097180515664652b13ca
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1481647710,1485181695,7ef9a889f6483525b72c5193b7642f7928456612
7ef9a889f6483525b72c5193b7642f7928456612,7ef9a889,"Merge ""Hygiene: Move the 'gallery' package up a level, to org.wikipedia""","Merge ""Hygiene: Move the 'gallery' package up a level, to org.wikipedia""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485180965,1485180965,"50fb3a0506e6856ae72d6f1cd1d89661bd8d1134,26266241f3885af18a02e5af2a3b2359d9d98393"
50fb3a0506e6856ae72d6f1cd1d89661bd8d1134,50fb3a05,"Merge ""EditClient: Fix captchaid and captchaword params""","Merge ""EditClient: Fix captchaid and captchaword params""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1485180847,1485180847,"795939fcfc946405be137cc0ad2c20ef330ee02a,a3d92d4d7478f16b612ad0ed4daa54c5e849a977"
a3d92d4d7478f16b612ad0ed4daa54c5e849a977,a3d92d4d,EditClient: Fix captchaid and captchaword params,"EditClient: Fix captchaid and captchaword params

Unlike in AuthManager (e.g., when creating an account), the API expects
the captchaid and captchaword parameters to be all lowercase rather than
camel case.  Therefore our captcha submission requests for editing, in
the event a captcha is required, will always fail.  This fixes them.

Change-Id: I6833e76b7ea9001efe81f2250379f601a7b246bf
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485096434,1485096434,b8656a0ab24d909e62163cbf085ad83418c859c2
0bd980eeebd1e9b5bd265f6dd9f3d06cab45feb8,0bd980ee,Replace EditTest with MockWebServer-based EditClientTest,"Replace EditTest with MockWebServer-based EditClientTest

Bug: T154809
Change-Id: I5ab26370acc0e63fbe636275edf1c5ab4d24b3db
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485096046,1485096363,53eb887a1aad780409d4ebd5c49682eed7036cad
53eb887a1aad780409d4ebd5c49682eed7036cad,53eb887a,Hygiene: Clean up some editing-related classes,"Hygiene: Clean up some editing-related classes

* Reorganizes the result handling logic in EditClient for better
  readability

* Brings EditAbuseFilterResult up to present-day standards and updates
  the constructor to remove the need to remarshal the response to pass in

* Moves the two-second delay out of the data client before calling
  cb.success, and out into the caller.

Change-Id: I31e5225d5d7280fa5dd0bd67c4231e16450b8918
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1485033300,1485034981,b8656a0ab24d909e62163cbf085ad83418c859c2
795939fcfc946405be137cc0ad2c20ef330ee02a,795939fc,Hygiene: rename Retrofit *Endpoints* to Service,"Hygiene: rename Retrofit *Endpoints* to Service

Service terminology has become more prevalent in our codebase when
referring to Retrofitted API endpoints. Rename remaining endpoints
usages to service

Change-Id: Ib9365c3c624abefc0baa6ec0f553eb1574a4977a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1485029393,1485029393,b8656a0ab24d909e62163cbf085ad83418c859c2
26266241f3885af18a02e5af2a3b2359d9d98393,26266241,"Hygiene: Move the 'gallery' package up a level, to org.wikipedia","Hygiene: Move the 'gallery' package up a level, to org.wikipedia

Since the feed was introduced, it hasn't been the case that the gallery
is always used in the context of a specific page.

This moves the gallery out from under org.wikipedia.page to its own
package under org.wikipedia to reflect this.

Change-Id: Icec537bcda6b94b886003cf2cee6e7bfadd665df
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484951846,1484959483,2c6c2677aa5b793f1b452175499ec9585cde02a0
b8656a0ab24d909e62163cbf085ad83418c859c2,b8656a0a,Hygiene: Remove unused private class,"Hygiene: Remove unused private class

Change-Id: I30e70afbe221224c98b261be35d642cd5955d303
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484958110,1484958110,2c6c2677aa5b793f1b452175499ec9585cde02a0
2c6c2677aa5b793f1b452175499ec9585cde02a0,2c6c2677,Fix showing of captcha in certain API levels.,"Fix showing of captcha in certain API levels.

Fresco loads an image into a view only when the view is VISIBLE, whereas
we were showing the captcha view slightly after loading the image into it.

Bug: T155535
Change-Id: Ia892bece3bc39afe43726d608655d8921ddd15a6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1484948849,1484949065,052f334c306b31bf0093a083dff8c16036f3e6bd
052f334c306b31bf0093a083dff8c16036f3e6bd,052f334c,"Merge ""Validate username before proceeding to next step""","Merge ""Validate username before proceeding to next step""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484948094,1484948094,"9fa10d529e4f1e119f4b6bc9a5368415a5c8d868,45dbe07e73f4e0aac9a3dd97e2332314a1590447"
45dbe07e73f4e0aac9a3dd97e2332314a1590447,45dbe07e,Validate username before proceeding to next step,"Validate username before proceeding to next step

When creating a new account or logging in, the username is
validated before proceeding to the next step. The username
should not contain the characters # < > [ ] | { } / @ according
to the wikipedia username policy.

Bug: T147087
Change-Id: I9e5b81e38a4fc780527023d41dc241de09fcea84
",,,,OdysseasKr,OdysseasKr@users.noreply.github.com,Michael Holloway,mholloway@wikimedia.org,1483832952,1484947446,0fe737b81000f7207917906d682fbf8434c87a1b
2eb9185168a313f1335abc394a343d03b6c2052b,2eb91851,Hygiene: Move more PageFragment message handlers to setupMessageHandlers,"Hygiene: Move more PageFragment message handlers to setupMessageHandlers

With a bit of additional light refactoring.

No functional changes intended.

Change-Id: I91fabbdbeadd28ac243c85ee32ae73f0ac5f854a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484197701,1484938811,0fe737b81000f7207917906d682fbf8434c87a1b
fdc3a9c53ab02e24fa0971e9cfe6b3e40bd923eb,fdc3a9c5,Fix: use app language when new nearby results are requested,"Fix: use app language when new nearby results are requested

Previously, the nearby screen would use a copy of app language from
NearbyFragment birth. This caused app language changes to have no effect
on the map until the Fragment was recreated

Change-Id: I445f54e0984be8adaccfa654946fc9c37d971316
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484938266,1484938601,9fa10d529e4f1e119f4b6bc9a5368415a5c8d868
9fa10d529e4f1e119f4b6bc9a5368415a5c8d868,9fa10d52,Hygiene: split nearby MwApiResponsePage data into subclass,"Hygiene: split nearby MwApiResponsePage data into subclass

MwApiResponsePage could model many different MediaWiki responses but
subclassing for broad use cases seems more appropriate. Begin by
breaking out nearby data into a new class, NearbyPageMwResponse

Change-Id: I6ee83ddf4644ec69a3c71eccdd49190b4a4f58bb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484937853,1484938597,0fe737b81000f7207917906d682fbf8434c87a1b
0fe737b81000f7207917906d682fbf8434c87a1b,0fe737b8,Add NearbyClientTest,"Add NearbyClientTest

Bug: T152400
Change-Id: I3cffc1d660bb3b79f75979feb88102c3e5044423
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484931956,1484933774,ef323c7f16f9de1d6ab373a3b72140fc5a477e47
ef323c7f16f9de1d6ab373a3b72140fc5a477e47,ef323c7f,Retrofit NearbyFetchTask,"Retrofit NearbyFetchTask

Bug: T152400
Bug: T155393
Change-Id: I3191d2a4dafb5c49159970f38a8a919c71efb08b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477090062,1484933774,9aae66a1218ba0f710b4fcedb41ffc76ff0bc91b
9aae66a1218ba0f710b4fcedb41ffc76ff0bc91b,9aae66a1,"Merge ""Hygiene: Consolidate MwApiResultPage into MwApiResponsePage""","Merge ""Hygiene: Consolidate MwApiResultPage into MwApiResponsePage""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484932944,1484932944,"57f6374131534d75f10445016eabaceb4bc12b05,870905cf93e44d25cdfe89caa50ef17338752a1b"
57f6374131534d75f10445016eabaceb4bc12b05,57f63741,"Merge ""Hygiene: Remove MwApiErrorException once and for all""","Merge ""Hygiene: Remove MwApiErrorException once and for all""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484932524,1484932524,"25de42b065622b0997275da857104686d2d23ec4,9df9364e17781a30cb3fd8a271214b8d66bd264e"
25de42b065622b0997275da857104686d2d23ec4,25de42b0,Hygiene: Rename EditToken* to CsrfToken*,"Hygiene: Rename EditToken* to CsrfToken*

For better technical correctness; note also that these tokens are also
used for description editing and retrieving user preferences.

Change-Id: I3ac65c4f35600d79abda72d3a229652714f7ca3c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484925592,1484926824,115788cfd913eee2e3aa3ff36dc44fd9a46baf6d
115788cfd913eee2e3aa3ff36dc44fd9a46baf6d,115788cf,Fetch CSRF token before each page edit,"Fetch CSRF token before each page edit

This prepares us for when the anon edit token (+\) goes away, and should
resolve an issue causing users to be unable to edit before logging out and
back in due to submitting an invalid stored token.

Bug: T153104
Bug: T154414
Change-Id: I9a4b4ab7ed5a355fedf6d516286cd785752219a1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484664876,1484926824,f5b63cac05097ecf3702301baea6a1a7d0ceeb22
f5b63cac05097ecf3702301baea6a1a7d0ceeb22,f5b63cac,"Merge ""Hygiene: replace StringUtil methods with Apache Commons StringUtils""","Merge ""Hygiene: replace StringUtil methods with Apache Commons StringUtils""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484925804,1484925804,"5d11d6b0491b1222d0b605ed9dbe402d470df655,364b1b33c3c05fbd29c28ba8ee088bf828aa3772"
5d11d6b0491b1222d0b605ed9dbe402d470df655,5d11d6b0,"Merge ""Fix: update AppTextViewWithImagesTest reference images""","Merge ""Fix: update AppTextViewWithImagesTest reference images""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484925083,1484925083,"c18d63cf5d6852b81aae08da6374b0e9fe12dc22,95ce87d4481082db25e017375f8a8c0b6390bcc4"
9df9364e17781a30cb3fd8a271214b8d66bd264e,9df9364e,Hygiene: Remove MwApiErrorException once and for all,"Hygiene: Remove MwApiErrorException once and for all

MwApiErrorException was to be replaced with MwApiException during code
review but somehow they both made it into the repo.  This should remove
it for good.

Change-Id: Ie53e8209106a082a5c069378a09b9defb565dcb5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484923699,1484923699,c18d63cf5d6852b81aae08da6374b0e9fe12dc22
870905cf93e44d25cdfe89caa50ef17338752a1b,870905cf,Hygiene: Consolidate MwApiResultPage into MwApiResponsePage,"Hygiene: Consolidate MwApiResultPage into MwApiResponsePage

MwApiResponsePage is a model class meant to model a standard page object
as returned by the MediaWiki API.

MwApiResultPage is also intended as a model class for the same purpose,
but also includes some incidental feed-related cruft.

This consolidates MwApiResultPage into MwApiResponsePage and moves the
cruft to various more-appropriate places.

Change-Id: I039737f326626724ff4affc979b2c72b1073224c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484673098,1484923571,c18d63cf5d6852b81aae08da6374b0e9fe12dc22
c18d63cf5d6852b81aae08da6374b0e9fe12dc22,c18d63cf,"Merge ""Fix: potential NPE in PageLeadProperties.getSections() clients""","Merge ""Fix: potential NPE in PageLeadProperties.getSections() clients""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484881527,1484881527,"0e1048d45c56bc816b59f8ffa604aa155149b983,993d75bff00dcbd5226647a41820971eccaa1d54"
364b1b33c3c05fbd29c28ba8ee088bf828aa3772,364b1b33,Hygiene: replace StringUtil methods with Apache Commons StringUtils,"Hygiene: replace StringUtil methods with Apache Commons StringUtils

• Replace methods in StringUtil:
  • compareStrings(String, String):
    StringUtils.equals(CharSequence, CharSequence)
  • emptyIfNull(CharSequence):
    StringUtils.defaultIfEmpty(T, """") since there's no
    StringUtils.defaultString(CharSequence)
  • emptyIfNull(String): StringUtils.defaultString(String)
  • equals(CharSequence, CharSequence):
    StringUtils.equals(CharSequence, CharSequence)
  • defaultIfBlank(String, String):
    StringUtils.defaultIfBlank(T, T)
  • defaultIfNull(String, String):
    StringUtils.defaultString(String, String)
  • isBlank(String): StringUtils.isBlank(CharSequence)
  • listToDelimitedString(): TextUtils.join(CharSequence, Iterable)
  • removeNulls(): ArrayUtils.removeAllOccurences(T[], null)
• Rename StringUtil.trim(CharSequence) to strip since it functionally
  matches StringUtils.strip(String), not StringUtils.trim(String)
• Remove unused StringUtil.defaultIfNull(CharSequence, CharSequence),
  StringUtil.prefix()
• Add some missing annotations in StringUtil

Change-Id: I005ef83b2cd1a63aaf0f3b44a88c1f7ff7741f5d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484868659,1484870943,1b175311e0507e8250784168b8842164caab1a03
0e1048d45c56bc816b59f8ffa604aa155149b983,0e1048d4,Hygiene: very minor misc clean up,"Hygiene: very minor misc clean up

Change-Id: I664b588dafbb45859ab26d11e5973a8c3e22f699
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484861053,1484869965,1b175311e0507e8250784168b8842164caab1a03
993d75bff00dcbd5226647a41820971eccaa1d54,993d75bf,Fix: potential NPE in PageLeadProperties.getSections() clients,"Fix: potential NPE in PageLeadProperties.getSections() clients

Also remove outdated @VisibleForTesting annotation

Change-Id: Ic15b1ba1f4b9c7bd4efc5b8acd881538f000cc01
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484869305,1484869593,1b175311e0507e8250784168b8842164caab1a03
1b175311e0507e8250784168b8842164caab1a03,1b175311,"Merge ""Add LangLinksClientTest""","Merge ""Add LangLinksClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484859870,1484859870,"9ab864836a1cf5a979877f6a24483c69c584daf6,3ca3b7789ff5e05ad13571935067539d6d3762cb"
9ab864836a1cf5a979877f6a24483c69c584daf6,9ab86483,"Merge ""Retrofit LangLinksFetchTask""","Merge ""Retrofit LangLinksFetchTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484859656,1484859656,"f673b51c213f498bb52aa405803be84e0c5a6c46,00193ee9a27e22eb452fb5ef3d25a3d992c5580b"
f673b51c213f498bb52aa405803be84e0c5a6c46,f673b51c,Allow up to five anonymous description edits before requiring login.,"Allow up to five anonymous description edits before requiring login.

Bug: T154785
Change-Id: I39102e27c29e1d13706b674c8aa7ad884ba4f046
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1484853667,1484858473,efdb088aa2e3d2aa5255020299b6007ff195ede1
3ca3b7789ff5e05ad13571935067539d6d3762cb,3ca3b778,Add LangLinksClientTest,"Add LangLinksClientTest

Bug: T152397
Change-Id: I54ab46ee844691fde9315593aba72387cc7baaac
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484858448,1484858448,00193ee9a27e22eb452fb5ef3d25a3d992c5580b
00193ee9a27e22eb452fb5ef3d25a3d992c5580b,00193ee9,Retrofit LangLinksFetchTask,"Retrofit LangLinksFetchTask

Bug: T152397
Change-Id: I5428066ecfca61c90a22214d946a03fe1f54072b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477088481,1484858419,8ed6c93818f453c08397929fe74443283c84ff32
efdb088aa2e3d2aa5255020299b6007ff195ede1,efdb088a,Delay briefly and then refresh on description edit success,"Delay briefly and then refresh on description edit success

Introduces a short delay mechanism before refreshing the page after
a description edit, similar to the mechanism we use for page editing.

Hopefully this will ensure that in most cases, the change will have
propagated and we will receive and cache the page with the updated
description.

Bug: T152207
Change-Id: I2e913ad4ca3b61f637b5b14be5a907d11bc71666
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1480727323,1484855986,8ed6c93818f453c08397929fe74443283c84ff32
8ed6c93818f453c08397929fe74443283c84ff32,8ed6c938,"Merge ""Replace old Wikitext fetch test with MockWebServer-based WikitextClientTest""","Merge ""Replace old Wikitext fetch test with MockWebServer-based WikitextClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484850546,1484850546,"8f6893a6343000b4481895206cd6e4d01ac7017a,3f676ab8f28d48db98355500c0c576bf59a0c315"
8f6893a6343000b4481895206cd6e4d01ac7017a,8f6893a6,"Merge ""Make WikitextClient expect a MwQueryResponse<Wikitext>""","Merge ""Make WikitextClient expect a MwQueryResponse<Wikitext>""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484850544,1484850544,"b81f3539f45736086e34f41e34750c7556f0465f,7814255c41ad10e16fcb9607653c517b41d7abc4"
95ce87d4481082db25e017375f8a8c0b6390bcc4,95ce87d4,Fix: update AppTextViewWithImagesTest reference images,"Fix: update AppTextViewWithImagesTest reference images

An amendment to 140e8d5, AppTextViewWithImages now uses the Support
Library's DrawableCompat utility for tinting which has introduced a
subtle difference in rendering. Update the reference screenshots

Change-Id: I66b61c0d4d7dea42e661a7808681ae6976b574ce
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484849034,1484849034,b81f3539f45736086e34f41e34750c7556f0465f
b81f3539f45736086e34f41e34750c7556f0465f,b81f3539,"Merge ""Add CreateAccountClientTest""","Merge ""Add CreateAccountClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484846276,1484846276,"9b9edfc438a968fd52bff96d57aaa954b286a55e,fa7083309c0cd6b591b224c87a58d3719c9cda6d"
9b9edfc438a968fd52bff96d57aaa954b286a55e,9b9edfc4,"Merge ""Retrofit CreateAccountTask""","Merge ""Retrofit CreateAccountTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484846139,1484846139,"ac013bbb477a018a5e9ef3c247358eb99389c043,c61d1edd4e38adc1c261ca9027c05f3c012ebb21"
ac013bbb477a018a5e9ef3c247358eb99389c043,ac013bbb,"Merge ""Add CreateAccountInfoClientTest""","Merge ""Add CreateAccountInfoClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484845623,1484845623,"0f8d8617fd74ea096d74ca9d90fdf12d67be1a72,1172763690919b501114841751ee90cb648b91c6"
0f8d8617fd74ea096d74ca9d90fdf12d67be1a72,0f8d8617,"Merge ""Retrofit CreateAccountInfoTask""","Merge ""Retrofit CreateAccountInfoTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484845511,1484845511,"55dd719185e0606f1a9c95c3dc3ea4a17a675cc6,fc46da5fb4b92f4879863fc9ec59c4a1bdcef749"
fa7083309c0cd6b591b224c87a58d3719c9cda6d,fa708330,Add CreateAccountClientTest,"Add CreateAccountClientTest

Bug: T152396
Change-Id: Ib26470d7bf6820bdbd845da1918ce536e321ca33
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484845351,1484845427,c61d1edd4e38adc1c261ca9027c05f3c012ebb21
c61d1edd4e38adc1c261ca9027c05f3c012ebb21,c61d1edd,Retrofit CreateAccountTask,"Retrofit CreateAccountTask

Bug: T152396
Change-Id: If38b2ba739b0c4fc6b6ae027df95278bebe20826
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484845022,1484845342,1172763690919b501114841751ee90cb648b91c6
1172763690919b501114841751ee90cb648b91c6,11727636,Add CreateAccountInfoClientTest,"Add CreateAccountInfoClientTest

Bug: T152396
Change-Id: Ic7305e3ef9ee9db745d120f595e63fa9961690d9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484844573,1484844573,fc46da5fb4b92f4879863fc9ec59c4a1bdcef749
fc46da5fb4b92f4879863fc9ec59c4a1bdcef749,fc46da5f,Retrofit CreateAccountInfoTask,"Retrofit CreateAccountInfoTask

Bug: T152396
Change-Id: Ic194830ca25592c3fe29e8b30755bd2b208588e5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484431661,1484844484,00916f0686efdbed860b781c180d661d2f205d9f
55dd719185e0606f1a9c95c3dc3ea4a17a675cc6,55dd7191,"Merge ""New: make it harder to be a single lingual dev""","Merge ""New: make it harder to be a single lingual dev""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484674715,1484674715,"b2da7d2da7021347bd7005944e8d84ce194e1e0b,76ac30a479c338cd76aa9baab291fdb1acc4cbb9"
b2da7d2da7021347bd7005944e8d84ce194e1e0b,b2da7d2d,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I8aad788f825e6b368bff0eba4a6bc1755b721574
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484669670,1484672128,ccc713d7abdbc9261f9ee55a4311d7645eca1783
3f676ab8f28d48db98355500c0c576bf59a0c315,3f676ab8,Replace old Wikitext fetch test with MockWebServer-based WikitextClientTest,"Replace old Wikitext fetch test with MockWebServer-based WikitextClientTest

This provides a more robust testing structure and allows testing a variety
of failure scenarios including an API error, a network error, and a
malformed response.

Bug: T152982
Bug: T154809
Change-Id: I78c0893b5a5b1bfdce3a26befc2763fe23a5ef6d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484668791,1484669362,7814255c41ad10e16fcb9607653c517b41d7abc4
7814255c41ad10e16fcb9607653c517b41d7abc4,7814255c,Make WikitextClient expect a MwQueryResponse<Wikitext>,"Make WikitextClient expect a MwQueryResponse<Wikitext>

WikitextClient currently can't adequately detect and handle MediaWiki
API errors because its requests are for bare Wikitext objects with no
notion of an error response, rather than a MwQueryResponse<Wikitext>.
This changes it to use the latter.

This should fix any crashes, but the underlying cause in T152982 is
still unknown.  An error can occur if the section the user requests
disappears between loading the page and clicking edit, but that doesn't
actually appear to be what's going on here.

Also, our error handling in the section editing activity is inadequate
and will need updating for whatever resolution we decide on. (T154805)

Bug: T152982
Bug: T154807
Change-Id: I1955924c8b3230a536acaa9b44218db7ca3a663b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1483739553,1484668860,ccc713d7abdbc9261f9ee55a4311d7645eca1783
ccc713d7abdbc9261f9ee55a4311d7645eca1783,ccc713d7,Hygiene: consistently use 4 space indent in www/js,"Hygiene: consistently use 4 space indent in www/js

find www/js -name \*.js|xargs -rd\\n sed -ri 's%\t%    %g'

Change-Id: I60905dc81f92eb51df5f1695f4e2e4af2b544624
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484254644,1484337224,263db3e1a705421e158f9ed1e3d8307dce945cea
263db3e1a705421e158f9ed1e3d8307dce945cea,263db3e1,Hygiene: remove unused css-color-parser JavaScript,"Hygiene: remove unused css-color-parser JavaScript

Change-Id: Id289c5c404a50f60200088c847cfc871a5c15fbe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484253678,1484254404,00916f0686efdbed860b781c180d661d2f205d9f
00916f0686efdbed860b781c180d661d2f205d9f,00916f06,Add DescriptionEditTutorialPageViewTest,"Add DescriptionEditTutorialPageViewTest

Bug: T148205
Change-Id: I94ac6f61cde473fc35f7ce260fe8ff38ee8f8a84
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1484198906,1484198906,f644ba512c45bab9ba8d348c51e79a384fb75a2c
f644ba512c45bab9ba8d348c51e79a384fb75a2c,f644ba51,Description editing tutorial: further design tweaks,"Description editing tutorial: further design tweaks

Moves the PageIndicatorView from the fragment layout to the view layout.
This has two benefits:

(1) we no longer require an offset that can potentially obscure text at
    larger text size configurations;

(2) the page indicator view is included in the screenshots used for
    testing.

Further tweaks the view layout to accommodate this new arrangement.

Sadly, this means that the page view indicator will no longer remain
stationary while scrolling between the pages but will appear separately
on each page; such is life.

Bug: T148205
Change-Id: Ic443210ef8a6512d19372eaef7a9c99e0a758f46
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1483649184,1484198694,12480c29874cbfe3fc9f843456ad5d85ef876247
76ac30a479c338cd76aa9baab291fdb1acc4cbb9,76ac30a4,New: make it harder to be a single lingual dev,"New: make it harder to be a single lingual dev

This patch may be controversial because it makes it harder to program
blissfully unaware of other languages. The intent is to force devs to
experience the app in other, especially non-English, locales regularly.
The mechanism used is to pick a random language on initial app install
of the dev flavor.

Change-Id: Id86349d230b521ddc56e9f1c21d0a57b25bc210a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484099772,1484159117,12480c29874cbfe3fc9f843456ad5d85ef876247
12480c29874cbfe3fc9f843456ad5d85ef876247,12480c29,Hygiene: remove unused method in SharedPreferenceCookieManager,"Hygiene: remove unused method in SharedPreferenceCookieManager

Change-Id: I14750eca61e758d6becd38d53d748e7b6207f0cf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484096962,1484096962,f1c34f28e2f90c9472139070a9393f9445eb1fb2
f1c34f28e2f90c9472139070a9393f9445eb1fb2,f1c34f28,Hygiene: use ReleaseUtil directly instead of wrapping in WikipediaApp,"Hygiene: use ReleaseUtil directly instead of wrapping in WikipediaApp

Change-Id: I3d00b9d384857b5d927e814f5ccf80d917a91fad
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484096161,1484096161,4001b6567ff58a4d34ae2af91f9df5802930c703
4001b6567ff58a4d34ae2af91f9df5802930c703,4001b656,Hygiene: remove unused PageProps class,"Hygiene: remove unused PageProps class

Change-Id: Ic1480b187b003ca7b60743e903a9a5ea52053ab7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484086360,1484095940,d81f33497eba9f8aab1020856b7ba36d16e7e648
d81f33497eba9f8aab1020856b7ba36d16e7e648,d81f3349,Hygiene: change terminology from night to dark mode,"Hygiene: change terminology from night to dark mode

Change-Id: I0bb1a563cb6126a58d1ccffe31096e8025cd7134
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484084799,1484095940,12c5e01d9711048e4c937647ce7ac040d21c7feb
12c5e01d9711048e4c937647ce7ac040d21c7feb,12c5e01d,Hygiene: clean up static data,"Hygiene: clean up static data

• Use immutable maps

• Don't use wildcard imports

• Hold reference to interface instead of implementation

• Don't specify custom default load factor on HashMap. From the source:

    Android-Note: We always use a load factor of 0.75 and ignore any
    explicitly selected values.

• Don't add an unused element

• Fix import and method order

Change-Id: I907a66d34b07de6602e1f85678b075b1456b9aeb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484072978,1484095940,3f31d2c31f3cb519926fad6107ef8175e22d8bb8
3f31d2c31f3cb519926fad6107ef8175e22d8bb8,3f31d2c3,Hygiene: don't generate iOS language JSON files,"Hygiene: don't generate iOS language JSON files

Change-Id: Ieda41251d30ffc4bbf4ed5db6a81a801b91fb518
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484080914,1484095940,ccee9bed7f8dc75adea0aa3a429d1b739ba884b6
ccee9bed7f8dc75adea0aa3a429d1b739ba884b6,ccee9bed,Update: languages supported & namespace translation,"Update: languages supported & namespace translation

  scripts/generate_wiki_languages.py &&
  scripts/make-templates.py &&
  mv \
    FileAliasData.java \
    MainPageNameData.java \
    SpecialAliasData.java \
    app/src/main/java/org/wikipedia/staticdata/ &&
  mv languages_list.xml app/src/main/res/values/ &&
  rm filealias.json languages_list.json mainpages.json specialalias.json

Change-Id: Ic385c2f814a5821111a5dce5e9278324c2170e18
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484080503,1484095940,ab265de76e945ab4d3df51ec9c52dc9b1b8e274c
ab265de76e945ab4d3df51ec9c52dc9b1b8e274c,ab265de7,Hygiene: change NearbyResult reference from implementation to interface,"Hygiene: change NearbyResult reference from implementation to interface

Change-Id: Iea559cc6581bf67e46d28d04b8785ea97f15971c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484072091,1484095940,a102496c65a82a89369cfcf6e8481dd618a64249
a102496c65a82a89369cfcf6e8481dd618a64249,a102496c,Hygiene: add Card.title() default implementation,"Hygiene: add Card.title() default implementation

Change-Id: I1f2a7e0c48d3d0776f5f95686747e66035febd55
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484072026,1484095940,990c77321d69c4fdf54a1c2c26c208288000e841
990c77321d69c4fdf54a1c2c26c208288000e841,990c7732,"Merge ""Hygiene: remove unused param in MainPageCard""","Merge ""Hygiene: remove unused param in MainPageCard""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484094665,1484094665,"e85a2e2c57ad95d232e497d17524fef233bab5c9,11456ff94361fbc24c957102199d1023ea9cce8a"
e85a2e2c57ad95d232e497d17524fef233bab5c9,e85a2e2c,"Merge ""Hygiene: change SearchClient superclass to DummyClient""","Merge ""Hygiene: change SearchClient superclass to DummyClient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484094375,1484094375,"f167f84dae287ca208c7de9c6284c2534419a69c,6ca2120bedfa28be8be6df4079b251b77af2f4a2"
f167f84dae287ca208c7de9c6284c2534419a69c,f167f84d,"Merge ""Hygiene: remove unused DummyClient generic parameter""","Merge ""Hygiene: remove unused DummyClient generic parameter""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484093743,1484093743,"7cad21288b60d6c8c9bf7c7c4c89d9f72b604aa8,51e9291b402b3b6da6a684488b4df06283f47076"
7cad21288b60d6c8c9bf7c7c4c89d9f72b604aa8,7cad2128,"Merge ""Fix span Parcelable implementations""","Merge ""Fix span Parcelable implementations""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484093397,1484093397,"ef2e841a3f10cb150390269d666a12158d6b624c,71a9c6e1d6ab8523aa578b7298246caa6ab45b24"
ef2e841a3f10cb150390269d666a12158d6b624c,ef2e841a,"Merge ""Hygiene: move SyntaxHighlight styling classes to enum""","Merge ""Hygiene: move SyntaxHighlight styling classes to enum""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484092747,1484092747,"6ad207b3a0ef17f66bba00d523627e1ceff04f12,34912a717513721ec4413ff6c02a414a4b102ee3"
6ad207b3a0ef17f66bba00d523627e1ceff04f12,6ad207b3,"Merge ""Hygiene: convert SyntaxHighlighter comments to code""","Merge ""Hygiene: convert SyntaxHighlighter comments to code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484092235,1484092235,"5ef10488e34584082e6a4a15cbd7e08ec9678bf5,5e11b2fb6b965c6167040733c303b636fe491451"
5ef10488e34584082e6a4a15cbd7e08ec9678bf5,5ef10488,"Merge ""Hygiene: consolidate parcel test logic in util""","Merge ""Hygiene: consolidate parcel test logic in util""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484087202,1484087202,"e7f6403e50c12af30ca2c5ec479e02e7dcbb10b6,a3076694fe3b7d6b2d33b74157c37fa718c6b733"
e7f6403e50c12af30ca2c5ec479e02e7dcbb10b6,e7f6403e,"Merge ""Hygiene: remove unused method, WikiSite.authorityToDesktop""","Merge ""Hygiene: remove unused method, WikiSite.authorityToDesktop""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484087011,1484087011,"d5d7432af0a8e7f509b0ad1364ddba6119140466,1551022b7039de34c8697204a3b8d96b01e5df84"
d5d7432af0a8e7f509b0ad1364ddba6119140466,d5d7432a,"Merge ""Hygiene: Remove obsolete check for JSONArray when checking page protection""","Merge ""Hygiene: Remove obsolete check for JSONArray when checking page protection""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484086917,1484086917,"bbb0556896b6bd1f8fc4f3b2009e892cacd6124f,46b61eabb9ef787eb893c448fc5249b6bb1ee290"
bbb0556896b6bd1f8fc4f3b2009e892cacd6124f,bbb05568,"Merge ""Get wikibase item ID in MW API page lead requests""","Merge ""Get wikibase item ID in MW API page lead requests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1484086546,1484086546,"bb7f8ffd5eab990dc041dc0a04116bb5da87aca8,b68c3e0c777523ad90726db0fefab872b839b309"
bb7f8ffd5eab990dc041dc0a04116bb5da87aca8,bb7f8ffd,Check for notifications only for 1 day after last description edit.,"Check for notifications only for 1 day after last description edit.

Change-Id: If3fe66ca440da2ba1c16e1f169f197b398d1363e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1483639605,1484085049,6126451c262c9d67031fec21426a2c7598b59675
11456ff94361fbc24c957102199d1023ea9cce8a,11456ff9,Hygiene: remove unused param in MainPageCard,"Hygiene: remove unused param in MainPageCard

Change-Id: Ibf70e79d0fdbc36ae7ed3b52916d6128c7f79c84
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484071783,1484071783,6ca2120bedfa28be8be6df4079b251b77af2f4a2
6ca2120bedfa28be8be6df4079b251b77af2f4a2,6ca2120b,Hygiene: change SearchClient superclass to DummyClient,"Hygiene: change SearchClient superclass to DummyClient

Change-Id: I8b41d7190cbeb9cd60bf5371295ca5e6ab322091
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484071740,1484071740,51e9291b402b3b6da6a684488b4df06283f47076
51e9291b402b3b6da6a684488b4df06283f47076,51e9291b,Hygiene: remove unused DummyClient generic parameter,"Hygiene: remove unused DummyClient generic parameter

Change-Id: I5587b4f1436bc23c82723c17fd0240c5b0baa710
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484071478,1484071648,71a9c6e1d6ab8523aa578b7298246caa6ab45b24
71a9c6e1d6ab8523aa578b7298246caa6ab45b24,71a9c6e1,Fix span Parcelable implementations,"Fix span Parcelable implementations

Change-Id: I0d22917c9f90623c4834bb4231ffe3c7979259ae
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484015571,1484071643,34912a717513721ec4413ff6c02a414a4b102ee3
34912a717513721ec4413ff6c02a414a4b102ee3,34912a71,Hygiene: move SyntaxHighlight styling classes to enum,"Hygiene: move SyntaxHighlight styling classes to enum

This will allow custom spans to easily support Parcelable

Change-Id: I7af86f7835a0646ae456ce328b86fcdb99afa64a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484009030,1484009030,5e11b2fb6b965c6167040733c303b636fe491451
5e11b2fb6b965c6167040733c303b636fe491451,5e11b2fb,Hygiene: convert SyntaxHighlighter comments to code,"Hygiene: convert SyntaxHighlighter comments to code

Change-Id: I4d9f6238002f6062074b4957af3bb4d4c484c633
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484007716,1484007716,a3076694fe3b7d6b2d33b74157c37fa718c6b733
a3076694fe3b7d6b2d33b74157c37fa718c6b733,a3076694,Hygiene: consolidate parcel test logic in util,"Hygiene: consolidate parcel test logic in util

Refactoring to a utility allows other classes to test Parcel logic

Change-Id: I91e83e398e6f435b34803abc7d77dafceb8a046e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484002181,1484002181,1551022b7039de34c8697204a3b8d96b01e5df84
1551022b7039de34c8697204a3b8d96b01e5df84,1551022b,"Hygiene: remove unused method, WikiSite.authorityToDesktop","Hygiene: remove unused method, WikiSite.authorityToDesktop

Change-Id: I65524c56343516ce733047ffd9ba709fbae5a980
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1484000239,1484000239,6126451c262c9d67031fec21426a2c7598b59675
6126451c262c9d67031fec21426a2c7598b59675,6126451c,"Merge ""Echo notifications for description edits.""","Merge ""Echo notifications for description edits.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1483993543,1483993543,"2f000609db866c48b3770657fcc430ef2dd4e1ec,45025edbc6f8056ee11f8d7745a6a00e0c655411"
2f000609db866c48b3770657fcc430ef2dd4e1ec,2f000609,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I14375abd44fa84450c44423d6a388ee6f8a2f2d2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1483984335,1483984929,140e8d5489eac14cff160f59ddc67ec21635e0cc
140e8d5489eac14cff160f59ddc67ec21635e0cc,140e8d54,Hygiene: replace DrawableUtil with DrawableCompat,"Hygiene: replace DrawableUtil with DrawableCompat

Change-Id: Ie85abde686e433ef6677fda662a7d6abd28fd9f0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1483743682,1483743682,56893b6db57f5e8624759121cbcb6cce63e02366
56893b6db57f5e8624759121cbcb6cce63e02366,56893b6d,Hygiene: remove unused string,"Hygiene: remove unused string

Change-Id: I69ecf6a4e7d56dc2eae59a9127a9017d55e06c9b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1483743059,1483743059,137565060db1d7699ce9e33b718b2a1a10decb9b
45025edbc6f8056ee11f8d7745a6a00e0c655411,45025edb,Echo notifications for description edits.,"Echo notifications for description edits.

This introduces logic to show a system notification when an edit made by
the user is reverted by another user. This uses the Echo API to retrieve a
list of currently-unread notifications, and then issue a request to mark
them as read.

Technically, this logic is capable of showing arbitrary Echo notifications
for any sort of reason, but is currently limited to Wikidata deliberately,
until we decide to enable notifications for other reasons.

Also, something specific to Wikidata:
For notifications that come from Wikidata, the ""target"" article in the
notification is represented as the Q-number, instead of the human-readable
article name. Therefore we need to make an additional request to resolve
the Q-number into the correct label for the user's language. I haven't yet
found a way to get notifications from Wikidata with the Q-number
pre-resolved.

Important: This requires a new permission to receive the BOOT_COMPLETED
broadcast, so that our notification service can start upon boot, without
needing to launch the app. (Previously the BOOT_COMPLETED permission was
only for preload partner builds.)

TODO: Limit NotificationPollService to run for only one day after the user
makes an edit (or alternately run all the time, but only make network
requests for a day after an edit is made).

Bug: T150477
Change-Id: Ic2ab7bc402064cb8bf7351f6482b5b27a8925b03
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478708096,1483735809,137565060db1d7699ce9e33b718b2a1a10decb9b
b68c3e0c777523ad90726db0fefab872b839b309,b68c3e0c,Get wikibase item ID in MW API page lead requests,"Get wikibase item ID in MW API page lead requests

RESTBase page lead responses already return the wikibase ID, if present.

This adds logic to do the same for MW API requests so that we can have
feature parity for the two loading methods.

This should complement (and not conflict with, at least in the current
iteration) Ie1b18879dfe634241ce09913959b5b53056f840e.

Depends on a change in MobileFrontend to do for empty pageprops result
sets what I20bc5a43c2f348925584b8473f95abb87c623974 did for empty
protection result sets, so we don't have to add complex and fragile logic
to conditionally handle empty arrays.

Bug: T154032
Change-Id: I11b37fa6f27adf64fd1f41e10d4127bdc0ad422d
Depends-On: I5dacdaf356bfb4d85a62a7e8972b5e6e14f22458
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1483657533,1483724485,137565060db1d7699ce9e33b718b2a1a10decb9b
137565060db1d7699ce9e33b718b2a1a10decb9b,13756506,"Merge ""Allow description editing only for pages with wikibase ID.""","Merge ""Allow description editing only for pages with wikibase ID.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1483724397,1483724397,"0683c840b5e52bd5edc3c4258c7900ef05ca1f75,b8791ce63b68d6c1f4a98a0d61f5dec5296d22f8"
b8791ce63b68d6c1f4a98a0d61f5dec5296d22f8,b8791ce6,Allow description editing only for pages with wikibase ID.,"Allow description editing only for pages with wikibase ID.

Bug: T154032
Change-Id: Ie1b18879dfe634241ce09913959b5b53056f840e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1483568864,1483723515,646ec3ef4ba3b3c54db69e5544784559fdd78ed0
46b61eabb9ef787eb893c448fc5249b6bb1ee290,46b61eab,Hygiene: Remove obsolete check for JSONArray when checking page protection,"Hygiene: Remove obsolete check for JSONArray when checking page protection

No longer needed as a result of I20bc5a43c2f348925584b8473f95abb87c623974.

Change-Id: Ifa92693ce9a68dce3984d23e1ab899aa419b2e4d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1483718285,1483718285,0683c840b5e52bd5edc3c4258c7900ef05ca1f75
0683c840b5e52bd5edc3c4258c7900ef05ca1f75,0683c840,"Merge ""Add page indicator view to description edit tutorial""","Merge ""Add page indicator view to description edit tutorial""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1483638175,1483638175,"ce4ec7fad760bbc1e8e0b2fc470b6fd42c413d64,e01c1b2da0cd62153a73bab53c3c8cf6615146ab"
ce4ec7fad760bbc1e8e0b2fc470b6fd42c413d64,ce4ec7fa,"Merge ""Fix status bar translucency in description editing tutorial""","Merge ""Fix status bar translucency in description editing tutorial""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1483638175,1483638175,"646ec3ef4ba3b3c54db69e5544784559fdd78ed0,2494a99c41abe2d33cfe79f68ad77b7f1321d5e9"
e01c1b2da0cd62153a73bab53c3c8cf6615146ab,e01c1b2d,Add page indicator view to description edit tutorial,"Add page indicator view to description edit tutorial

Incorporates the PageIndicatorView[1] library to provide a page indicator
view as specified in the tutorial mock.

[1] https://github.com/romandanylyk/PageIndicatorView

Bug: T148205
Change-Id: Ide208e92a777f4f1b9372b09b597ecb099482cff
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1482436346,1483562941,2494a99c41abe2d33cfe79f68ad77b7f1321d5e9
646ec3ef4ba3b3c54db69e5544784559fdd78ed0,646ec3ef,"Merge ""Update DescripitonEditSuccessView per design comments""","Merge ""Update DescripitonEditSuccessView per design comments""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1483545599,1483545599,"1e640935703282f112e15131d11f1357dff5bbda,1753df8f4f25c425d1c9b41ab9a800f97cb53577"
2494a99c41abe2d33cfe79f68ad77b7f1321d5e9,2494a99c,Fix status bar translucency in description editing tutorial,"Fix status bar translucency in description editing tutorial

Somewhere along the line, the status bar in the description editing
tutorial lost its translucency.  This puts it back.

Change-Id: Id3b1134416afd19e6f397f4a5fa84cc9b57eb89f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1483500965,1483544522,1e640935703282f112e15131d11f1357dff5bbda
1753df8f4f25c425d1c9b41ab9a800f97cb53577,1753df8f,Update DescripitonEditSuccessView per design comments,"Update DescripitonEditSuccessView per design comments

Bug: T148202
Change-Id: I586ddf96fb0dd53bb6fb2ad6bbcc826ed36f7279
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1482502735,1483485322,056942c51cc1ec2bba6dd13176adac50be84294d
1e640935703282f112e15131d11f1357dff5bbda,1e640935,Tweak description editing tutorial button height,"Tweak description editing tutorial button height

Fix the button height so that the text is not truncated when the text size
is increased (on Nougat and future Android versions).

android:minHeight is now set in order to override the minHeight of 48dp
set in the base AppCompat button style.

Change-Id: Iea4d780e8aaa052d402885ad0348c8b1fd1cf21d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1483479242,1483479242,056942c51cc1ec2bba6dd13176adac50be84294d
056942c51cc1ec2bba6dd13176adac50be84294d,056942c5,"Merge ""Hygiene: move NonEmptyValidator to views package""","Merge ""Hygiene: move NonEmptyValidator to views package""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1483469133,1483469133,"ed507d6b4b3ebc17b4f10656bc5f487bf404f1b5,87bc5d94fb98dfc6f791579dc9964d2d2276e5af"
ed507d6b4b3ebc17b4f10656bc5f487bf404f1b5,ed507d6b,"Merge ""Hygiene: move SearchActionModeCallback to history package""","Merge ""Hygiene: move SearchActionModeCallback to history package""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1483469100,1483469100,"b829422703be233507c0b802b6bd70be49f5c809,3c91a8c0b9d2f4707d3fa9ec179c2f4fea6c48df"
b829422703be233507c0b802b6bd70be49f5c809,b8294227,"Merge ""Hygiene: move NightModeHandler to bridge package""","Merge ""Hygiene: move NightModeHandler to bridge package""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1483469099,1483469099,"357ab44eac72bce25c1c9fb8b1121460235245fb,635ae566ab4e2b07761ea77b7e255a5788682aed"
357ab44eac72bce25c1c9fb8b1121460235245fb,357ab44e,"Merge ""Hygiene: move ViewAnimations to views package""","Merge ""Hygiene: move ViewAnimations to views package""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1483469098,1483469098,"badeca79514cf7ac7bf2ea994622bfd0d205ff93,09855799d8544d6ac5708201520ed83bfe93b964"
badeca79514cf7ac7bf2ea994622bfd0d205ff93,badeca79,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I30b8981492c2fc97bf95a3f139e803bda8001da2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1483459257,1483459860,5d9407bfe5871b78c543f7fd88da52b2342c76be
87bc5d94fb98dfc6f791579dc9964d2d2276e5af,87bc5d94,Hygiene: move NonEmptyValidator to views package,"Hygiene: move NonEmptyValidator to views package

Change-Id: I67b0b2b562d801947204eaabebd3eaba82e321cb
",,,,BearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1482522064,1482528805,3c91a8c0b9d2f4707d3fa9ec179c2f4fea6c48df
3c91a8c0b9d2f4707d3fa9ec179c2f4fea6c48df,3c91a8c0,Hygiene: move SearchActionModeCallback to history package,"Hygiene: move SearchActionModeCallback to history package

Used by history and reading list code

Change-Id: Iee3247a668d65cd15eeb6b9e2d56df5386df2541
",,,,BearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1482521967,1482528461,635ae566ab4e2b07761ea77b7e255a5788682aed
635ae566ab4e2b07761ea77b7e255a5788682aed,635ae566,Hygiene: move NightModeHandler to bridge package,"Hygiene: move NightModeHandler to bridge package

It mostly deals with the Java -> WebView bridge

Change-Id: Ic256133790939d490242df9c3c4cd6c624cbbf95
",,,,BearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1482521690,1482528381,09855799d8544d6ac5708201520ed83bfe93b964
09855799d8544d6ac5708201520ed83bfe93b964,09855799,Hygiene: move ViewAnimations to views package,"Hygiene: move ViewAnimations to views package

Change-Id: Iefbdc53df5b912cf54c0598a233f55233a08e50d
",,,,BearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1482520665,1482528192,5d9407bfe5871b78c543f7fd88da52b2342c76be
5d9407bfe5871b78c543f7fd88da52b2342c76be,5d9407bf,Hygiene: move RemoteConfig + RemoteConfigRefreshTask to settings package,"Hygiene: move RemoteConfig + RemoteConfigRefreshTask to settings package

Trying to find a home for the classes in our main package.

Change-Id: Ifeb6f6604f538cc19f08bc142708c5fb4217f159
",,,,BearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1482520434,1482527823,cd101c286c3ef60973cf9df78d9d955abff9af98
cd101c286c3ef60973cf9df78d9d955abff9af98,cd101c28,"Merge ""Fix crash caused by vector drawable on pre-lollipop devices""","Merge ""Fix crash caused by vector drawable on pre-lollipop devices""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1482512495,1482512495,"577f57756495fb8dfbcceec782f1921bd5abbdca,50a80d5c5c83b0cf73006212a5eb503ac1358e60"
577f57756495fb8dfbcceec782f1921bd5abbdca,577f5775,"Merge ""Make Google Maps use the coordinates supplied by Wikipedia app""","Merge ""Make Google Maps use the coordinates supplied by Wikipedia app""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1482509590,1482509590,"fe781a69f39ea906820d6494426605900d9cc150,0c88c752deac4bd1961d0835696c65693de3c0fa"
0c88c752deac4bd1961d0835696c65693de3c0fa,0c88c752,Make Google Maps use the coordinates supplied by Wikipedia app,"Make Google Maps use the coordinates supplied by Wikipedia app

Bug: T120275
Change-Id: I7eebb4c2b4e7164cb481ea23831296d4d50a426b
",,,,Kunal Grover,kunalgrover05@gmail.com,Michael Holloway,mholloway@wikimedia.org,1479491384,1482501155,4e70c62e5075be8becc54bea949c5e34cbb5a3a3
fe781a69f39ea906820d6494426605900d9cc150,fe781a69,"Merge ""Fix DescriptionEditActivity layout""","Merge ""Fix DescriptionEditActivity layout""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1482474467,1482474467,"4e70c62e5075be8becc54bea949c5e34cbb5a3a3,a82dfe6d5ca2749753aa75392634e3865da5fa21"
50a80d5c5c83b0cf73006212a5eb503ac1358e60,50a80d5c,Fix crash caused by vector drawable on pre-lollipop devices,"Fix crash caused by vector drawable on pre-lollipop devices

Switch to create a VectorDrawableCompat of the Nearby map marker icon to
give to the Mapbox IconFactory, rather than passing a raw resource id,
which crashes on pre-Lollipop devices.

This crash occurred when the user selected either Nearby or History from
the bottom tabbed navigation menu.  Apparently the ViewPager was getting
resources for the adjacent views to the current view teed up in the latter
case.

Bug: T153968
Change-Id: Iecbe0be5756d9bc9e34b119fdeb81dabb2fe297e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1482450565,1482451181,4e70c62e5075be8becc54bea949c5e34cbb5a3a3
a82dfe6d5ca2749753aa75392634e3865da5fa21,a82dfe6d,Fix DescriptionEditActivity layout,"Fix DescriptionEditActivity layout

DescriptionEditActivity was changed to subclass SingleFragmentToolbar-
Activity in I6ce1cee0807fe992d32a43ca22c3ccf82512f3dd, which breaks
the layout.

This changes it back to a non-toolbarred SingleFragmentActivity.

Bug: T153969
Change-Id: I227a80ec0adab6781def7f4eab04b98925b0605d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1482263956,1482436382,28f98b06ae3e8b939b2b5ae2fa8b87f17fdb5b59
4e70c62e5075be8becc54bea949c5e34cbb5a3a3,4e70c62e,Vectorize still more drawables.,"Vectorize still more drawables.

- Abuse filter icons.
- Map marker icon.
- Error icon used in Crash dialog and WikiErrorView (no longer using a
  compound drawable in TextView, for compatibility).

Change-Id: Ia07ab53e7aa99c62b2a5e241e0a142ad89861aac
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1481924725,1482263534,28f98b06ae3e8b939b2b5ae2fa8b87f17fdb5b59
28f98b06ae3e8b939b2b5ae2fa8b87f17fdb5b59,28f98b06,"Merge ""Hygiene: make ThemedActionBarActivity exception handling more specific""","Merge ""Hygiene: make ThemedActionBarActivity exception handling more specific""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1482252153,1482252153,"6e45932f230e93caa143a76b4a2f7bec3f86be69,bb419ec617fb4ca25d22349351e74f43a31c5c7c"
6e45932f230e93caa143a76b4a2f7bec3f86be69,6e45932f,"Merge ""Vectorize even more drawables.""","Merge ""Vectorize even more drawables.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1482252151,1482252151,"1d2a41687a098c69185330ff26e56a0a57af9667,5abd3ff4343300416dc5759a022fe3a0c4d8b891"
1d2a41687a098c69185330ff26e56a0a57af9667,1d2a4168,"Merge ""Hygiene: simplify SingleFragmentActivityWithToolbar name""","Merge ""Hygiene: simplify SingleFragmentActivityWithToolbar name""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1482251333,1482251333,"daae53431e70d57398109e0661b447073e6788c7,a7e4e2976ba6c39b47509843f9970f0badfad627"
daae53431e70d57398109e0661b447073e6788c7,daae5343,"Merge ""Fix: make DescriptionEditHelpViewTest @SmallTest""","Merge ""Fix: make DescriptionEditHelpViewTest @SmallTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1482251185,1482251185,"d5e449302f25cee103a65339c2871b16ca75490a,6bb2643efaef4297e41a8520e159b69ad55dcb2d"
d5e449302f25cee103a65339c2871b16ca75490a,d5e44930,"Merge ""Fix: ArticleHeaderViewTest screenshots""","Merge ""Fix: ArticleHeaderViewTest screenshots""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1482251004,1482251004,"95382e65f510e7358580f9f60115118e36a79f94,ec1e40a8b596fbc59b2c28da345377eedd131bb5"
bb419ec617fb4ca25d22349351e74f43a31c5c7c,bb419ec6,Hygiene: make ThemedActionBarActivity exception handling more specific,"Hygiene: make ThemedActionBarActivity exception handling more specific

Change-Id: I7757fba24487545229ea9b8ec8ffd9aa6e71fd58
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481222175,1482186550,95382e65f510e7358580f9f60115118e36a79f94
a7e4e2976ba6c39b47509843f9970f0badfad627,a7e4e297,Hygiene: simplify SingleFragmentActivityWithToolbar name,"Hygiene: simplify SingleFragmentActivityWithToolbar name

Change-Id: I6ce1cee0807fe992d32a43ca22c3ccf82512f3dd
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481221597,1482186361,95382e65f510e7358580f9f60115118e36a79f94
95382e65f510e7358580f9f60115118e36a79f94,95382e65,"Merge ""Description editing tutorial""","Merge ""Description editing tutorial""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1482185938,1482185938,"2d6f3a48bdac63df571be55233aeb8c131bfb5c7,0bbd8027ea02cee56e3bfd878b9dbde91b527095"
2d6f3a48bdac63df571be55233aeb8c131bfb5c7,2d6f3a48,Vectorize WMF logo.,"Vectorize WMF logo.

- No longer use this drawable for our Authenticator (use launcher icon
  instead, for compatibility with API <21)
- Tinting the logo to be monochrome in About activity, to comply with new
  design guidelines.

This was the last raster drawable in the ""ldrtl"" directories!

Change-Id: I7aa753d2dbaae451b720fbc9f92c14a1dd2bc1b4
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1481925630,1482183033,12bbb5c5c0d6799cbeef47d2bd651fd0b9841bcf
5abd3ff4343300416dc5759a022fe3a0c4d8b891,5abd3ff4,Vectorize even more drawables.,"Vectorize even more drawables.

- Icon for title pronunciations.
- Icons for different licenses used in Gallery.
- Icons for Facebook/Twitter/Messaging used in share-a-fact onboarding.

Change-Id: I26f6525254bd833b3f3063910e3251b3af2f471e
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1481922088,1482180576,ec1e40a8b596fbc59b2c28da345377eedd131bb5
12bbb5c5c0d6799cbeef47d2bd651fd0b9841bcf,12bbb5c5,"Merge ""Vectorize a few more drawables.""","Merge ""Vectorize a few more drawables.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1482179758,1482179758,"6a30665756605f42602d20fc87165b825a7a41d8,c5b1004cbf3a296738e0a961e7a534c4355d9330"
6bb2643efaef4297e41a8520e159b69ad55dcb2d,6bb2643e,Fix: make DescriptionEditHelpViewTest @SmallTest,"Fix: make DescriptionEditHelpViewTest @SmallTest

Change-Id: Id2b8f2d1a6b65fa90ff263779ff741698358e48c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1482177922,1482177922,6a30665756605f42602d20fc87165b825a7a41d8
ec1e40a8b596fbc59b2c28da345377eedd131bb5,ec1e40a8,Fix: ArticleHeaderViewTest screenshots,"Fix: ArticleHeaderViewTest screenshots

ArticleHeaderView was updated but the screenshots were not. Update all
screenshots

Change-Id: I07241a7ac1ddab680bfbad13afbd8d61aee66793
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1482177654,1482177654,6a30665756605f42602d20fc87165b825a7a41d8
0bbd8027ea02cee56e3bfd878b9dbde91b527095,0bbd8027,Description editing tutorial,"Description editing tutorial

TODO (in separate patches to follow):

* Add ViewPager position indicator

* Add view tests.

Bug: T148205
Change-Id: I67c9d0960e979929ab832323e6435c4d1ce3dd6d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1481221599,1482176832,6a30665756605f42602d20fc87165b825a7a41d8
6a30665756605f42602d20fc87165b825a7a41d8,6a306657,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I0ffb450a59fd68946bf7b96ab9fc0bb03b8e5801
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1482165004,1482165953,7d7bcbd7271d2fe945e279eab3dfcd171ef045bf
c5b1004cbf3a296738e0a961e7a534c4355d9330,c5b1004c,Vectorize a few more drawables.,"Vectorize a few more drawables.

- Icon for Wiktionary definitions.
- ""Search"" icon specified in styles (already existed as a vector)
- Notification icon for AlphaUpdateChecker (using launcher mipmap instead
  of additional asset)

Change-Id: Ia09222ec29d8eb7ab1fc27e90a38850586055d1a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481920937,1481920937,7d7bcbd7271d2fe945e279eab3dfcd171ef045bf
7d7bcbd7271d2fe945e279eab3dfcd171ef045bf,7d7bcbd7,Add logic to restrict description editing by language.,"Add logic to restrict description editing by language.

When rolling out our description editing functionality, we will want to
limit it to a subset of Wikipedias, starting with enwiki.

Change-Id: I133101b5a2a7c673a4b265dd9c1d0e351d700be7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481901887,1481913712,92a7ab325892fdb0560ebdd7652b40e56bb46e97
92a7ab325892fdb0560ebdd7652b40e56bb46e97,92a7ab32,Fix scrollability of article when tapping on description.,"Fix scrollability of article when tapping on description.

Since we endow the description with a LinkMovementMethod, it no longer
passes scroll events down to the WebView, making it impossible to scroll
the article by dragging the description. This is more of a problem now
that we're allowing descriptions to span multiple lines.

This patch sets a LinkMovementMethod only if the description is empty
(only if we actually want the description to be clickable), and otherwise
sets it to null.

Change-Id: Ie462560bf82e9ac43b5d0891d2b17ef8304240ac
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481899885,1481899885,23daa6acf26d87761cb5033b04200e937d3db99b
23daa6acf26d87761cb5033b04200e937d3db99b,23daa6ac,"Merge ""Fix: ArticleHeaderView leading and add LeadingSpanTest""","Merge ""Fix: ArticleHeaderView leading and add LeadingSpanTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481899289,1481899289,"1f16603511f9a4141fed11db595a41a31ebae63d,074aeb9dbab30ed6dfdbd24d6c773eb45c1f23c6"
074aeb9dbab30ed6dfdbd24d6c773eb45c1f23c6,074aeb9d,Fix: ArticleHeaderView leading and add LeadingSpanTest,"Fix: ArticleHeaderView leading and add LeadingSpanTest

Bug: T152213
Change-Id: I6cd7395e58b18e787f98d6b1c21d3edda3efdda1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481841439,1481841439,fb7bed4d9d114c3dc1617232fceaca0eaf3bf7bf
1f16603511f9a4141fed11db595a41a31ebae63d,1f166035,"Merge ""Hygiene: don't constrain article header title height""","Merge ""Hygiene: don't constrain article header title height""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481839800,1481839800,"484be2622bd3cfe3630e52ce33e992e110f14dad,fb7bed4d9d114c3dc1617232fceaca0eaf3bf7bf"
484be2622bd3cfe3630e52ce33e992e110f14dad,484be262,"Merge ""Hygiene: add ArticleHeaderViewTest""","Merge ""Hygiene: add ArticleHeaderViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481838655,1481838655,"8fa0b46d7079d9dc47cea3e348bdd6854c9ccf3e,1e5307bab3c43edd8b540ec588b969b4d90581f7"
8fa0b46d7079d9dc47cea3e348bdd6854c9ccf3e,8fa0b46d,"Merge ""Hygiene: add AppTextViewTest""","Merge ""Hygiene: add AppTextViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481831344,1481831344,"1f7e55a570fa3732222db8c90aa4be45b7ed5fa6,f8b80c6efdd629a15bdf45df025b32000952219a"
fb7bed4d9d114c3dc1617232fceaca0eaf3bf7bf,fb7bed4d,Hygiene: don't constrain article header title height,"Hygiene: don't constrain article header title height

This code didn't seem to have any effect

Bug: T152213
Change-Id: Ifcf14dd02c2b883e673acca4f4e75abae8ea9157
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481828031,1481829165,1e5307bab3c43edd8b540ec588b969b4d90581f7
1f7e55a570fa3732222db8c90aa4be45b7ed5fa6,1f7e55a5,"Merge ""Hygiene: add script for testing translations""","Merge ""Hygiene: add script for testing translations""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481827779,1481827779,"ece43c1819a085674d781ed28c8bdf07ec7bcb16,e7a5e0c7041faf217436d54e0f18e7d7449a0290"
ece43c1819a085674d781ed28c8bdf07ec7bcb16,ece43c18,"Merge ""Fixed null-ptr crash if support actionbar retuns null""","Merge ""Fixed null-ptr crash if support actionbar retuns null""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481827384,1481827384,"66533ecdd1b7e3f10a9dad1a3c70194de73abb5b,bfe03c65e1c30f228df654297afbc93a2425814a"
66533ecdd1b7e3f10a9dad1a3c70194de73abb5b,66533ecd,"Merge ""Make SyntaxHighlighter correctly highlight the last word and prevent it…","Merge ""Make SyntaxHighlighter correctly highlight the last word and prevent it from highlighting unmatched symbols""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481827247,1481827247,"65f3e0fad92c858095e4e5f3124995b469b28592,7728b8c9d77c3c6354029dbb16760c2bdfb8561e"
bfe03c65e1c30f228df654297afbc93a2425814a,bfe03c65,Fixed null-ptr crash if support actionbar retuns null,"Fixed null-ptr crash if support actionbar retuns null

Change-Id: Ifa994dd264173c634a2ae457230c8aec28324624
",,,,Chris Zhao,xinyue.zhao@immonet.de,Dbrant,dbrant@wikimedia.org,1481752700,1481826529,65f3e0fad92c858095e4e5f3124995b469b28592
1e5307bab3c43edd8b540ec588b969b4d90581f7,1e5307ba,Hygiene: add ArticleHeaderViewTest,"Hygiene: add ArticleHeaderViewTest

Bad subtitle leading is present in these images, even in the simplest
cases:

• org.wikipedia.page.leadimages.ArticleHeaderViewTest.testLayout-320dp-en-ltr-font1.5x-light-null_image-null_title-long_subtitle-no_pronunciation.png
• org.wikipedia.page.leadimages.ArticleHeaderViewTest.testLayout-320dp-en-ltr-font1.0x-light-null_image-null_title-long_subtitle-no_pronunciation.png

Bug: T152213
Change-Id: I7df340a31efd5bdc068bd2713bf292f816de71c7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481825956,1481825956,f8b80c6efdd629a15bdf45df025b32000952219a
65f3e0fad92c858095e4e5f3124995b469b28592,65f3e0fa,"Revert ""Hygiene: Separate Activity classes into themed and unthemed variants""","Revert ""Hygiene: Separate Activity classes into themed and unthemed variants""

This reverts commit a4feb3b1723a915e8fb4bcc45a0e9a78f8fd5298.

Change-Id: Idcab794f0b09d4ce0ada7297f0f8da172420ce4e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481824224,1481824224,4ff71b02cf4be09a5f6757b62e6d36161bc1c4c5
7728b8c9d77c3c6354029dbb16760c2bdfb8561e,7728b8c9,Make SyntaxHighlighter correctly highlight the last word and prevent it from…,"Make SyntaxHighlighter correctly highlight the last word and prevent it from highlighting unmatched symbols

This fixes a problem in the syntax highlighter that didn't highlight the last
word. It also fixes corrects it's previous behaviour of highlighting
unmatched symbols.

Bug: T148191
Change-Id: Iafb19a72b7a9b41054ffcfcf20623cc95acd5921
",,,,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,Kaartic Sivaraam,kaarticsivaraam91196@gmail.com,1479581278,1481824188,7736081bfafaa73241c9826dc6d18d4bfb3e7fa5
f8b80c6efdd629a15bdf45df025b32000952219a,f8b80c6e,Hygiene: add AppTextViewTest,"Hygiene: add AppTextViewTest

This tests shows that simple usage doesn't cause incorrect leading.

Bug: T152213
Change-Id: I4e2c3bb32862b9fa360ab885b9b91e8e1fde7909
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481774808,1481819061,4ff71b02cf4be09a5f6757b62e6d36161bc1c4c5
4ff71b02cf4be09a5f6757b62e6d36161bc1c4c5,4ff71b02,"Merge ""Hygiene: replace Button with TextView""","Merge ""Hygiene: replace Button with TextView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481816697,1481816697,"a4feb3b1723a915e8fb4bcc45a0e9a78f8fd5298,959a8529110cbbc5a74cf8659db54c6f0867f12a"
a4feb3b1723a915e8fb4bcc45a0e9a78f8fd5298,a4feb3b1,Hygiene: Separate Activity classes into themed and unthemed variants,"Hygiene: Separate Activity classes into themed and unthemed variants

The DescriptionEditSuccessActivity is an instance of a situation in which
we don't want some of the theming assumptions currently made in our
Activity class hierarchy.  For instance, SingleFragmentActivity sets both
a background color (in activity_single_fragment.xml) and a theme (as a
result of subclassing ThemedActionBarActivity) that were unwanted for
DescriptionEditSuccessActivity.

This patch removes the theming logic from the main branch of the Activity
classes and creates Themed variants of both the ActionBarActivity and
SingleFragmentActivity for when the default theming logic is desired.

No functional changes intended.

Change-Id: I3c2d07aa04c0f04a9f1d07a1c2fc72b410ab8ded
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1480629051,1481728719,d59ccdc698dcf1d9135266102f06920d2a452455
d59ccdc698dcf1d9135266102f06920d2a452455,d59ccdc6,Bump versionCode,"Bump versionCode

Change-Id: Ia8a180a10b5da58dbd55cc6c3ad70e7bc0d9d2a5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481724928,1481724928,01f36d47fe79c2e5235c02e911192e49497ee1c1
01f36d47fe79c2e5235c02e911192e49497ee1c1,01f36d47,"Merge ""Fix possible crash when upgrading from older app versions.""","Merge ""Fix possible crash when upgrading from older app versions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481662866,1481662866,"5d43d2a90f3cc0d6a24294a996f50e5bfc9086be,cafe728875a3c3db10d645c6437e9d8f21ee0d3a"
5d43d2a90f3cc0d6a24294a996f50e5bfc9086be,5d43d2a9,"Merge ""Fix size-limiting issue in PageCache.""","Merge ""Fix size-limiting issue in PageCache.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481662352,1481662352,"57d4360bc2e7eee33e23162cdc2391a2ced16563,6e239ec792434543cccaa8d6009ba6b1da803e3c"
cafe728875a3c3db10d645c6437e9d8f21ee0d3a,cafe7288,Fix possible crash when upgrading from older app versions.,"Fix possible crash when upgrading from older app versions.

In versions of the app prior to 2.1.142, the list of Tabs was serialized
in a way that's not completely consistent with the way it's serialized
today. Specifically, the ""domain"" item of the ""site"" component can
sometimes be an empty string, which would manifest itself as a Uri with
an empty authority.

This leads to a dangerous condition where the tab list is deserialized
""successfully"", but the Uri contains a ticking time bomb of null members,
which causes a confusing exception when the Uri is passed to Retrofit.

This patch adds logic to look for tab entries that match this description
after deserializing, and if found, fall back to clearing out the tab list
and starting fresh.

Bug: T152980
Change-Id: If09f6832e6a4f3e2b47a3806cb4e8da9cad8031e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481661270,1481661270,6e239ec792434543cccaa8d6009ba6b1da803e3c
57d4360bc2e7eee33e23162cdc2391a2ced16563,57d4360b,"Merge ""Add detailed ""help"" activity for editing descriptions.""","Merge ""Add detailed ""help"" activity for editing descriptions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481657015,1481657015,"da0df6ada8d573f7f9def7a895fc0b5d93d483e7,0273a7a559249f73742549257dc9a79210e88a11"
6e239ec792434543cccaa8d6009ba6b1da803e3c,6e239ec7,Fix size-limiting issue in PageCache.,"Fix size-limiting issue in PageCache.

This fixes a bug that was preventing our PageCache from being trimmed to
our specified maximum size of 64MB, and instead was allowing it to grow
indefinitely.

This is fixed by calling flush() on the cache *after* calling commit() on
the editor object, instead of before.

Upon examining the source code of DiskLruCache, we can see that it enters
a loop when trimming the size of the cache, and within the loop it evicts
old entries until the size is less than the maximum.

HOWEVER: If the editor object wasn't committed yet, the evict() operation
will be unsuccessful, and the size of the cache will be unchanged, which
will send the trim operation into an *infinite loop*, making this an
eyebrow-raisingly serious issue.

Change-Id: I6bdfca20e8b751b3a94a0b0c234ba31c715a0e3b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481655842,1481655842,89ea7e1cfd265629232df58401d923719aaa47c8
da0df6ada8d573f7f9def7a895fc0b5d93d483e7,da0df6ad,"Merge ""Fix possible crash when edit preview times out.""","Merge ""Fix possible crash when edit preview times out.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481650468,1481650468,"39c1b1abf3c3ec601657801ca4e28cbc8ddce57d,1ed4ddf28996686bb78bad98754ff3af4f9bfef0"
39c1b1abf3c3ec601657801ca4e28cbc8ddce57d,39c1b1ab,"Merge ""Fix possible crash due to support library bug.""","Merge ""Fix possible crash due to support library bug.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481649934,1481649934,"b6bf705e20a67ea45249551df14e67ce06ce3853,471ac98563661a321c7dfe1f5d9db5616e94ff6a"
0273a7a559249f73742549257dc9a79210e88a11,0273a7a5,"Add detailed ""help"" activity for editing descriptions.","Add detailed ""help"" activity for editing descriptions.

Bug: T151467
Change-Id: Ic139e8e64ba122f17cf0a3d9d27356a118f961f6
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1479954426,1481649692,b6bf705e20a67ea45249551df14e67ce06ce3853
471ac98563661a321c7dfe1f5d9db5616e94ff6a,471ac985,Fix possible crash due to support library bug.,"Fix possible crash due to support library bug.

https://rink.hockeyapp.net/manage/apps/226649/app_versions/113/crash_reasons/148684781

I haven't been able to repro, so this will need to be a blind fix, but it
is impacting a nontrivial number of users.

Change-Id: I449cdb9b809547afc906d1d71a8db24900865baf
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1481588138,1481649398,bedad3296b2429b7d9e77cb52cbfa5a646f98d5d
b6bf705e20a67ea45249551df14e67ce06ce3853,b6bf705e,"Merge ""Finalize design of description editing view.""","Merge ""Finalize design of description editing view.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481649103,1481649103,"9c64edd005120aabab8c6c3d52cd251b560cffe2,bedad3296b2429b7d9e77cb52cbfa5a646f98d5d"
bedad3296b2429b7d9e77cb52cbfa5a646f98d5d,bedad329,Finalize design of description editing view.,"Finalize design of description editing view.

- No longer use a FAB for saving.
- No longer use a Toolbar in the activity itself. Instead, all of the
  components are part of the View.
- Updated the max character count to 90.

Change-Id: Ic4ed8bdab93a6754a5884cf1d81dc74827be6650
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1481135827,1481648734,89ea7e1cfd265629232df58401d923719aaa47c8
9c64edd005120aabab8c6c3d52cd251b560cffe2,9c64edd0,"Merge ""Fix possible NPE when fetching edit preview.""","Merge ""Fix possible NPE when fetching edit preview.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481648632,1481648632,"89ea7e1cfd265629232df58401d923719aaa47c8,a8aaa3ee00fead1c23cdd0dbe73cf83afac3174d"
a8aaa3ee00fead1c23cdd0dbe73cf83afac3174d,a8aaa3ee,Fix possible NPE when fetching edit preview.,"Fix possible NPE when fetching edit preview.

Bug: T152982
Change-Id: I046d2cec819ba3dee6f5bcd9a4c4ce2f031531a5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481576238,1481587349,d89a119acccd9dad1cfde80d8cd4b0482c2b657c
1ed4ddf28996686bb78bad98754ff3af4f9bfef0,1ed4ddf2,Fix possible crash when edit preview times out.,"Fix possible crash when edit preview times out.

https://rink.hockeyapp.net/manage/apps/226649/app_versions/113/crash_reasons/148711407

The ""failure"" callback of the edit preview request was checking whether
the caught exception was an instance of ApiException, which was OK prior
to switching to Retrofit, since ApiException used to encompass socket
timeouts that happened within the java-mwapi library. But now, the caught
exception can itself be a SocketTimeoutException, among others. The check
for ApiException is no longer necessary.

Change-Id: I2a79a9ca9d6b7454c13e6971f826b2d3bc2f7301
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481586476,1481586786,89ea7e1cfd265629232df58401d923719aaa47c8
89ea7e1cfd265629232df58401d923719aaa47c8,89ea7e1c,"Merge ""Fix possible crash when visiting external link.""","Merge ""Fix possible crash when visiting external link.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481575139,1481575139,"edebcb5f3b4d8de53d7bd66f8f0867defc1b453e,0a7eca7c3f3aa1b377f95b3c9d64d9cea4872777"
edebcb5f3b4d8de53d7bd66f8f0867defc1b453e,edebcb5f,"Merge ""Fix possible crash when resuming activity.""","Merge ""Fix possible crash when resuming activity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481574490,1481574490,"3a63bef6f2aca5d85034a58c7311898b440259aa,e2fb232f49d662d6e887681bce84bf7f3da0f728"
3a63bef6f2aca5d85034a58c7311898b440259aa,3a63bef6,Fix crash when posting W0 notification on API <21.,"Fix crash when posting W0 notification on API <21.

API <21 does not handle vector drawables in Notifications, and therefore
crashes when we issue W0 notifications. Unfortunately this was not caught
during testing. :(

This patch shows the new vector drawables when running on API 21+, and
falls back on using the app launcher icon on API <21.

Bug: T152984
Change-Id: Ifc194c574e6829a09cb80db1e30f25799df4d463
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481569149,1481569149,d89a119acccd9dad1cfde80d8cd4b0482c2b657c
d89a119acccd9dad1cfde80d8cd4b0482c2b657c,d89a119a,"Merge ""Update design of ""add description"" CTA in article header.""","Merge ""Update design of ""add description"" CTA in article header.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481562872,1481562872,"29d37564783db6ba336b77920044e6e7573a8b79,ccb920571c0a6ae01a3ada6af558b2f83504c320"
e7a5e0c7041faf217436d54e0f18e7d7449a0290,e7a5e0c7,Hygiene: add script for testing translations,"Hygiene: add script for testing translations

This script isn't wired to CI but should be useful to anyone adding or
removing strings.

Change-Id: I62762d10d84ad12ffdfb528ba85d59d6fda2dce3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481559914,1481559914,15115632c593995dbdeecc61ae1c48cefe85c442
29d37564783db6ba336b77920044e6e7573a8b79,29d37564,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ibc3fcef74d6791f4d77ff8c5251841dfce6f1bf6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481558972,1481559531,15115632c593995dbdeecc61ae1c48cefe85c442
e2fb232f49d662d6e887681bce84bf7f3da0f728,e2fb232f,Fix possible crash when resuming activity.,"Fix possible crash when resuming activity.

On certain Samsung devices, in certain cases, the invocation of onPause()
doesn't seem to happen symmetrically with the invocation of onResume(),
leading to an imbalance of our calls to register/unregister with the Bus.

This patch moves the register/unregister calls to onCreate()/onDestroy(),
which seems to be more consistent on these devices.
(repro'd, with difficulty, on my Galaxy S7.)

Change-Id: I4f923c1008da74e74be767a331c4130ae581f768
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481558575,1481558575,cd4486bcd3e4cdf5118da0062c6ae3e5ab67ea93
0a7eca7c3f3aa1b377f95b3c9d64d9cea4872777,0a7eca7c,Fix possible crash when visiting external link.,"Fix possible crash when visiting external link.

Our method to visitInExternalBrowser() was actually making an assumption
that the Context being passed into it is really an Activity, when in fact
it could be an Application context. The crash occurs because the system
doesn't want to create an Intent without a backing Activity when the
Intent doesn't have a flag of FLAG_ACTIVITY_NEW_TASK.

This patch adds that flag, which fixes the crash when the Context is not
an Activity, and has no effect when the Context is an Activity.

https://rink.hockeyapp.net/manage/apps/226649/app_versions/113/crash_reasons/148648041

Change-Id: I18c66bda32315d4ef97cf15a61cf7727fa7ec805
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481555736,1481555736,cd4486bcd3e4cdf5118da0062c6ae3e5ab67ea93
15115632c593995dbdeecc61ae1c48cefe85c442,15115632,"Merge ""Update bundled CSS""","Merge ""Update bundled CSS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481555730,1481555730,"cd4486bcd3e4cdf5118da0062c6ae3e5ab67ea93,ec6d696f874207df8c85b7857848d50d02ea9edf"
ccb920571c0a6ae01a3ada6af558b2f83504c320,ccb92057,"Update design of ""add description"" CTA in article header.","Update design of ""add description"" CTA in article header.

Added a compound drawable to the description TextView, taking RTL into
account in code.

Change-Id: I4f037b8393b8b1b0df484590983670566f84ef2e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481320825,1481320825,cd4486bcd3e4cdf5118da0062c6ae3e5ab67ea93
cd4486bcd3e4cdf5118da0062c6ae3e5ab67ea93,cd4486bc,"Merge ""Fix: update DescriptionEditSuccessViewTest screenshots""","Merge ""Fix: update DescriptionEditSuccessViewTest screenshots""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481311988,1481311988,"e4c894f2d2571755e73a8f0305f8e41da894d14f,8b3f101ab91112d6e1032b9bf3e475c4816a26c6"
e4c894f2d2571755e73a8f0305f8e41da894d14f,e4c894f2,"Merge ""Update: SDK Build Tools to v25.0.1""","Merge ""Update: SDK Build Tools to v25.0.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481310866,1481310866,"c6a425963b4d9c14bbf9e194f73855df68ae5d58,1dfda866545dc23752fefb5c3a002415c1345822"
c6a425963b4d9c14bbf9e194f73855df68ae5d58,c6a42596,"Merge ""Hygiene: fix or suppress miscellaneous lint""","Merge ""Hygiene: fix or suppress miscellaneous lint""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481310528,1481310528,"388c021bc67c80c15aeddc5a832813fccfac3979,b07c60d77a5fec145f0ff16484f0a0e4572d66e4"
388c021bc67c80c15aeddc5a832813fccfac3979,388c021b,"Merge ""Hygiene: move lint rules to lint config""","Merge ""Hygiene: move lint rules to lint config""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481309479,1481309479,"6b43b7be494c10ab7a556a4086e32ea290e23541,3f863c41351e0d1cf135d3d50e315009cc57d360"
959a8529110cbbc5a74cf8659db54c6f0867f12a,959a8529,Hygiene: replace Button with TextView,"Hygiene: replace Button with TextView

A follow up to 58eee82, replace Buttons with TextViews and add
appropriate styling where needed to maintain the current appearance.
Button is nearly identical to TextView. It seems more appropriate to use
TextViews with styles directly than subclasses for such little gain.
Also update the ButtonProgressive and ButtonGray styles directly rather
than each usage.

Change-Id: I2fcbc1b38df1523b801889030e497e4034c14a4a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481308856,1481308856,726476ee1ccd23e5ec2eee25d805bb9101ba8e85
6b43b7be494c10ab7a556a4086e32ea290e23541,6b43b7be,"Merge ""Hygiene: fix or suppress miscellaneous lint""","Merge ""Hygiene: fix or suppress miscellaneous lint""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481308825,1481308825,"f2baee1941eba667f0019455bc65029de389df4b,15d15c6d48b52fe22babe9b230a9f8822401ec3e"
f2baee1941eba667f0019455bc65029de389df4b,f2baee19,"Merge ""Copy CentralAuth tokens for www.wikidata.org requests""","Merge ""Copy CentralAuth tokens for www.wikidata.org requests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481308721,1481308721,"726476ee1ccd23e5ec2eee25d805bb9101ba8e85,a4548009598ef6333af30b3bc356b1b5e361afca"
1dfda866545dc23752fefb5c3a002415c1345822,1dfda866,Update: SDK Build Tools to v25.0.1,"Update: SDK Build Tools to v25.0.1

https://developer.android.com/studio/releases/build-tools.html

Change-Id: I48b4cf7234e0006bd9da12c54561cb9f2c8aad58
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481239858,1481304307,b07c60d77a5fec145f0ff16484f0a0e4572d66e4
ec6d696f874207df8c85b7857848d50d02ea9edf,ec6d696f,Update bundled CSS,"Update bundled CSS

Change-Id: I7fd906947acf2a426b714ab9c11fa8628a500049
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1481249461,1481249478,726476ee1ccd23e5ec2eee25d805bb9101ba8e85
8b3f101ab91112d6e1032b9bf3e475c4816a26c6,8b3f101a,Fix: update DescriptionEditSuccessViewTest screenshots,"Fix: update DescriptionEditSuccessViewTest screenshots

These replacements hardly differ from the original but were sufficiently
fuzzy to fail the diff in CI[0]. PageTitleListCardItemViewTest was
failing[1] but does not appear to be now

[0] https://integration.wikimedia.org/ci/job/apps-android-wikipedia-periodic-test/1101/artifact/app/screenshots-diff/
[1] https://integration.wikimedia.org/ci/job/apps-android-wikipedia-periodic-test/1087/artifact/app/screenshots-diff/

Change-Id: I4c41a3debea890334fd38b73a48c4472540a9bbd
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481242064,1481242064,b07c60d77a5fec145f0ff16484f0a0e4572d66e4
b07c60d77a5fec145f0ff16484f0a0e4572d66e4,b07c60d7,Hygiene: fix or suppress miscellaneous lint,"Hygiene: fix or suppress miscellaneous lint

Change-Id: Ib0fdf6a5e79b377f79c1d651a5152631b756e888
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481239721,1481240380,3f863c41351e0d1cf135d3d50e315009cc57d360
3f863c41351e0d1cf135d3d50e315009cc57d360,3f863c41,Hygiene: move lint rules to lint config,"Hygiene: move lint rules to lint config

Also exclude the Facebook directory from all linting. Note: some linting
is inconsistent between Android Studio and Gradle:
https://code.google.com/p/android/issues/detail?id=191631

Change-Id: Ibf2365b4ef905437e7aab85559d3ef6a73967756
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481238586,1481238763,15d15c6d48b52fe22babe9b230a9f8822401ec3e
15d15c6d48b52fe22babe9b230a9f8822401ec3e,15d15c6d,Hygiene: fix or suppress miscellaneous lint,"Hygiene: fix or suppress miscellaneous lint

Change-Id: Iadd5b34119aa7ffacce7917949e2eeaf503cdafe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481223583,1481223583,726476ee1ccd23e5ec2eee25d805bb9101ba8e85
726476ee1ccd23e5ec2eee25d805bb9101ba8e85,726476ee,Bump versionCode,"Bump versionCode

Change-Id: I6e7119f4017165efb12b55803c7036bfa0e74440
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481221546,1481221546,7338fbb227058cfd3a687ba982898a02cdbbe908
7338fbb227058cfd3a687ba982898a02cdbbe908,7338fbb2,"Revert ""Add CentralAuthTokenClient""","Revert ""Add CentralAuthTokenClient""

This reverts commit 8218d146ceb9205cfdf7a2f6fc74d5a6f1ec2c22.

Not needed anymore since we're passing the central auth tokens through the ShareCookieManager.

See patches starting with I91599b410dfbc6136838e9301290866ee733aaa8, in particular Ic3e05370d9bb028bac80446acf8b184c49b479a7 ""Copy CentralAuth tokens for www.wikidata.org requests""

Change-Id: Ic4f2c180f3b85599795c9bce2934c85068c99d2f
",,,,BearND,bsitzmann@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1480958901,1481216400,32e2d202e3f9b7776ac55048b358726760fc3dda
32e2d202e3f9b7776ac55048b358726760fc3dda,32e2d202,Fix subject string for featured image sharing,"Fix subject string for featured image sharing

Changes the subject string for featured image sharing via image viewing
activity. Now sharing featured image from feed and viewing activity displays
the same subject in email clients. Updates the featured image checking in
viewing activity.

Bug: T151023
Change-Id: If38c3d925ea248dde0798f356724fb9bb5fe3f3b
",,,,hlakhara,himanshulakhara1947@gmail.com,hlakhara,himanshulakhara1947@gmail.com,1481207439,1481207727,747db68a499a142032ab4869157b89f95b2c5bd9
747db68a499a142032ab4869157b89f95b2c5bd9,747db68a,"Merge ""Update: hide description length on error, show on edit""","Merge ""Update: hide description length on error, show on edit""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481207368,1481207368,"713f2ed624221b7f5b795a400f862c6508d8f696,0c869d023c7ed010973329fca4184019ab88d967"
713f2ed624221b7f5b795a400f862c6508d8f696,713f2ed6,Hygiene: remove redundant manifest Activity export,"Hygiene: remove redundant manifest Activity export

Remove redundant export=""false"" attributes from Activities that have no
intent filters. From the docs[0]:

  Whether or not the activity can be launched by components of other
  applications — ""true"" if it can be, and ""false"" if not. If ""false"",
  the activity can be launched only by components of the same
  application or applications with the same user ID.

  The default value depends on whether the activity contains intent
  filters. The absence of any filters means that the activity can be
  invoked only by specifying its exact class name. This implies that the
  activity is intended only for application-internal use (since others
  would not know the class name). So in this case, the default value is
  ""false"". On the other hand, the presence of at least one filter
  implies that the activity is intended for external use, so the default
  value is ""true"".

[0] https://developer.android.com/guide/topics/manifest/activity-element.html#exported

Change-Id: Ia56250b6049af671663d1f7cd323f9413ce939ba
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1479251816,1481152177,517a8f813f2947b08bfb76a32b0ba7298bd760d9
0c869d023c7ed010973329fca4184019ab88d967,0c869d02,"Update: hide description length on error, show on edit","Update: hide description length on error, show on edit

Bug: T148203
Change-Id: Ib94d135e925124bd79da5ef6f27cfb09ca1fa122
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1480375033,1481150654,517a8f813f2947b08bfb76a32b0ba7298bd760d9
517a8f813f2947b08bfb76a32b0ba7298bd760d9,517a8f81,"Merge ""Hygiene: move SharedPreferenceCookieManager to dataclient package""","Merge ""Hygiene: move SharedPreferenceCookieManager to dataclient package""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481149499,1481149499,"6934b429f4ec94e9fad04c56cdaa031457665d6c,3c5c3ea051533f3a70f980af993cb6304fc5d415"
6934b429f4ec94e9fad04c56cdaa031457665d6c,6934b429,"Merge ""Refresh login session for Wikidata editing""","Merge ""Refresh login session for Wikidata editing""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481149396,1481149396,"9d9f93876c01e243b2c75e6262a76d30964c3224,e137f9f25748e73e52ee881db752365e4148cff6"
9d9f93876c01e243b2c75e6262a76d30964c3224,9d9f9387,"Merge ""Always request edit token before Wikidata description edits""","Merge ""Always request edit token before Wikidata description edits""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481147347,1481147347,"ce0aae817f46ff09912ff4a145f257c27646991e,22aaa6cce19003c0dcf49475f5de702c163c4dce"
ce0aae817f46ff09912ff4a145f257c27646991e,ce0aae81,"Merge ""Generalize Announcement cards a bit.""","Merge ""Generalize Announcement cards a bit.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481135762,1481135762,"f5b368e1f0c553d71568915d328911a425fbcf70,f061feeb5860ad8c8a610396b4707242b9ee988d"
f5b368e1f0c553d71568915d328911a425fbcf70,f5b368e1,"Merge ""Fix: AppTextViewWithImages spannable boundaries""","Merge ""Fix: AppTextViewWithImages spannable boundaries""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481135117,1481135117,"253b94113b400f125c9a9a8863ec59686743985d,587fb332b9bc7b29da78e4219e5105ec31bc1320"
253b94113b400f125c9a9a8863ec59686743985d,253b9411,"Merge ""Update: add screenshot tests to AppTextViewWithImagesTest""","Merge ""Update: add screenshot tests to AppTextViewWithImagesTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481135023,1481135023,"ab94256568a39e450ec70b1c90cd6080ec0c335b,ba65a3cbc491fe6258d9192fb3b116fed8a5a0e2"
ab94256568a39e450ec70b1c90cd6080ec0c335b,ab942565,"Merge ""Fix: ListCardViewTest""","Merge ""Fix: ListCardViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481133684,1481133684,"64a73df9b23bc2f0786ef6d45232cdda0f37f560,30131fa7e45a8911f8cde47b67cceb28670fd557"
f061feeb5860ad8c8a610396b4707242b9ee988d,f061feeb,Generalize Announcement cards a bit.,"Generalize Announcement cards a bit.

The previous (first) version of announcement cards didn't actually make
use of the ""caption_HTML"" or ""image"" parameters that are part of the
announcement endpoint of the Content Service, which are meant to represent
the footer verbiage and the header image, respectively.

This patch updates our logic to make use of these fields, which means that
we no longer need to maintain any hard-coded images or strings for this
purpose.

We will still, however, keep around the separate classes of SurveyCard and
FundraisingCard, since this distinction is necessary for analytics
purposes. But aside from that, the card is now fully customizable
by the endpoint content.

(Also update the Test to be a more general test of AnnouncementCardView.)

Change-Id: I8e77fc7bcbdd9ed020127f40c1996ff772fff097
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481071820,1481132730,64a73df9b23bc2f0786ef6d45232cdda0f37f560
64a73df9b23bc2f0786ef6d45232cdda0f37f560,64a73df9,"Merge ""Fix: enable tests in CI""","Merge ""Fix: enable tests in CI""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481131657,1481131657,"9ceded81c302549f8a88a098980ae1b0b1ec7c03,9cb226439fe63490525e0ef02816d0ae58d1f9e3"
9ceded81c302549f8a88a098980ae1b0b1ec7c03,9ceded81,"Merge ""Update: fix card enter / exit animations when added / removed by button tap""","Merge ""Update: fix card enter / exit animations when added / removed by button tap""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481118563,1481118563,"367f43d7829c96236fddb466b7654e93f476c9c7,578e9adc20087f0cd216c121b1b7c8dd2376dc11"
367f43d7829c96236fddb466b7654e93f476c9c7,367f43d7,"Merge ""Update: don't truncate article descriptions""","Merge ""Update: don't truncate article descriptions""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481117626,1481117626,"cad527cf1a0279b7c1c1c866fd9263ccd9c28a0e,3df027a0be683c2d75e06d12741306ce3819681e"
a4548009598ef6333af30b3bc356b1b5e361afca,a4548009,Copy CentralAuth tokens for www.wikidata.org requests,"Copy CentralAuth tokens for www.wikidata.org requests

Copy CentralAuth tokens for www.wikidata.org requests from wikipedia.org
if the user is logged in. There are tokens that start with ""centralauth_"".

Examples:
* centralauth_Token
* centralauth_User
* centralauth_Session

Gergo mentioned that this would create the local session on the fly.
This would allow us to skip CentralAuthClient implementation we had added earlier
and reduce the number of requests per description edit.

This happens independent of the data client. It's all contained in the
SharedPreferenceCookieManager.

The one thing added to the data client is to now add the assert=user if
a user is logged in.

Bug: T150705
Change-Id: Ic3e05370d9bb028bac80446acf8b184c49b479a7
(cherry picked from commit c5400639bb916e44b50b32e66113464db2bfa821)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1480668283,1481068581,3c5c3ea051533f3a70f980af993cb6304fc5d415
3c5c3ea051533f3a70f980af993cb6304fc5d415,3c5c3ea0,Hygiene: move SharedPreferenceCookieManager to dataclient package,"Hygiene: move SharedPreferenceCookieManager to dataclient package

This really belongs to dataclient.

Change-Id: Ia3d7f8ff207b97c337ccae4a327cd37b87d14509
(cherry picked from commit 280a735b583a4e80c41c07f64ddfcfc966a5e2bb)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1480662952,1481067967,e137f9f25748e73e52ee881db752365e4148cff6
e137f9f25748e73e52ee881db752365e4148cff6,e137f9f2,Refresh login session for Wikidata editing,"Refresh login session for Wikidata editing

When the login token/cookies expire we get an error from the server
when executing the first request.

When this happens we refresh the login tokens then retry
the first request one more time.
Unfortunately, I did not save all the logs from when it happened earlier.

Theoretically there is a small window of time where this
could happen on later requests as well. Not sure if it's worth adding
more complexity to this at this time.

There is room for refactoring to share common behavior with the
page edit scenario. See I88b700b2bfb9433ddcaab86829b32557000f772d

Change-Id: I3d8d7e7220f80d1cb0a7181afef1edb38518a7ef
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1479511909,1481067936,22aaa6cce19003c0dcf49475f5de702c163c4dce
22aaa6cce19003c0dcf49475f5de702c163c4dce,22aaa6cc,Always request edit token before Wikidata description edits,"Always request edit token before Wikidata description edits

Note that the edit token is fetched from Wikidata. This is a
step towards making description edits using logged in credentials.
We still want to request a token for the non-logged in case
since the hard-coded token will go away soon. See T40417.

Bug: T150705
Bug: T146641
Change-Id: I91599b410dfbc6136838e9301290866ee733aaa8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1479232411,1481067763,cad527cf1a0279b7c1c1c866fd9263ccd9c28a0e
cad527cf1a0279b7c1c1c866fd9263ccd9c28a0e,cad527cf,"Merge ""Add UI for abusefilter cases in description editing""","Merge ""Add UI for abusefilter cases in description editing""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481054665,1481054665,"4b42fe68f65fb19f79166e4bc4e933d7ab0facea,5a12b1214ef9840d490054eb833980869c75c368"
4b42fe68f65fb19f79166e4bc4e933d7ab0facea,4b42fe68,"Merge ""Fix: PageTitleListCardItemViewTest""","Merge ""Fix: PageTitleListCardItemViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481052878,1481052878,"a8bd4228800e7937d163941b4774e61725730f0d,123d8db9c2e917e98c131a332fa17c79d09a3bf6"
587fb332b9bc7b29da78e4219e5105ec31bc1320,587fb332,Fix: AppTextViewWithImages spannable boundaries,"Fix: AppTextViewWithImages spannable boundaries

Bug: T152141
Change-Id: I450ad8cd26f4dd62d4ff88fd6fa4ae1bf35e9057
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481052243,1481052243,ba65a3cbc491fe6258d9192fb3b116fed8a5a0e2
ba65a3cbc491fe6258d9192fb3b116fed8a5a0e2,ba65a3cb,Update: add screenshot tests to AppTextViewWithImagesTest,"Update: add screenshot tests to AppTextViewWithImagesTest

Bug: T152141

	new file:   app/screenshots-ref/org.wikipedia.views.AppTextViewWithImagesTest.testWidth-120dp-en-ltr-font1.0x-light-long_text.png

Change-Id: Ib887d6377b686361c65654e8044af4af443b206d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481051636,1481051636,30131fa7e45a8911f8cde47b67cceb28670fd557
a8bd4228800e7937d163941b4774e61725730f0d,a8bd4228,"Merge ""Fix: CardLargeHeaderViewTest""","Merge ""Fix: CardLargeHeaderViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481051499,1481051499,"46965a994ae7d2cf460a19431a199116a7b46b7b,e21b7576acf90809c907e3f8b3b9d02e7b21af89"
46965a994ae7d2cf460a19431a199116a7b46b7b,46965a99,"Merge ""Fix: BecauseYouReadCardViewTest""","Merge ""Fix: BecauseYouReadCardViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481049023,1481049023,"78ddc9db4eca325dc65cb4f8a5c59372900cd03a,56d0449f8e77d5220fe92dbceb2ecd1bd01d5a24"
78ddc9db4eca325dc65cb4f8a5c59372900cd03a,78ddc9db,"Merge ""Fix: PasswordTextInputTest""","Merge ""Fix: PasswordTextInputTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1481047774,1481047774,"2e1391bdc6e0ecb8910fc01d409e7941840473fa,f4dad03a63e7135735d82749a9799a43bd0004de"
30131fa7e45a8911f8cde47b67cceb28670fd557,30131fa7,Fix: ListCardViewTest,"Fix: ListCardViewTest

This test wasn't marked @SmallTest and so wasn't executed in CI. Fix and
enable it.

Change-Id: I245631b7de83500891f0c0af2146a951972c9e42
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481044320,1481044320,9cb226439fe63490525e0ef02816d0ae58d1f9e3
9cb226439fe63490525e0ef02816d0ae58d1f9e3,9cb22643,Fix: enable tests in CI,"Fix: enable tests in CI

The periodic CI job only executes tests annotated @SmallTest. Update
annotations and suppress a couple warnings in ViewTest.

Change-Id: I39ae51bf22ecea2768de9985bbfba69af8964976
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481043394,1481043873,123d8db9c2e917e98c131a332fa17c79d09a3bf6
123d8db9c2e917e98c131a332fa17c79d09a3bf6,123d8db9,Fix: PageTitleListCardItemViewTest,"Fix: PageTitleListCardItemViewTest

This test wasn't marked @SmallTest and so wasn't executed in CI. Fix and
enable it.

Change-Id: I24d999ed2ba8a847fa43aa8f79f11c5ea0edd208
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481042945,1481042945,e21b7576acf90809c907e3f8b3b9d02e7b21af89
e21b7576acf90809c907e3f8b3b9d02e7b21af89,e21b7576,Fix: CardLargeHeaderViewTest,"Fix: CardLargeHeaderViewTest

I'm not sure why this error wasn't seen in CI.

Change-Id: I3b19c3c6a5a2b1373adc19c9b6cde8e53b842388
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481042651,1481042713,56d0449f8e77d5220fe92dbceb2ecd1bd01d5a24
56d0449f8e77d5220fe92dbceb2ecd1bd01d5a24,56d0449f,Fix: BecauseYouReadCardViewTest,"Fix: BecauseYouReadCardViewTest

This test wasn't marked @SmallTest and so wasn't executed in CI. Fix and
enable it.

Change-Id: Ia6a2bc954fb41dd122b44a5fbd5ee722810517bc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481042500,1481042500,f4dad03a63e7135735d82749a9799a43bd0004de
2e1391bdc6e0ecb8910fc01d409e7941840473fa,2e1391bd,Bump versionCode,"Bump versionCode

Change-Id: I5cb03aa435dc86e9d767ecf335decf1a51222281
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481041639,1481041639,a52c67b122d6c70f540fe3a78289604a537be478
f4dad03a63e7135735d82749a9799a43bd0004de,f4dad03a,Fix: PasswordTextInputTest,"Fix: PasswordTextInputTest

This test wasn't marked @SmallTest and so wasn't executed in CI. Fix and
enable it.

Change-Id: I29c94f2b926221f7fe37532aa4e2ee7b5ccf613d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1481041619,1481041619,d10bf5b591ea6ae043674e750e3fa47d286d7735
a52c67b122d6c70f540fe3a78289604a537be478,a52c67b1,Fix deserializing of older Namespace values (and possible crash).,"Fix deserializing of older Namespace values (and possible crash).

Bug: T152501
Change-Id: Ia58edeaa310534f3d9369731257053ba90fdef4b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1481040678,1481040678,d10bf5b591ea6ae043674e750e3fa47d286d7735
5a12b1214ef9840d490054eb833980869c75c368,5a12b121,Add UI for abusefilter cases in description editing,"Add UI for abusefilter cases in description editing

This is a minimal UI for when abusefilters are triggered.
Unlike for page edits, this only shows a validation error text
below the edit text field. No special layout or icons here.

Use uselang parameter to get localized abusefilter error messages.

Bug: T150704
Change-Id: I90f847acffbe521e205fc25e7c54f78c09ca2632
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1481010457,1481039265,d10bf5b591ea6ae043674e750e3fa47d286d7735
3df027a0be683c2d75e06d12741306ce3819681e,3df027a0,Update: don't truncate article descriptions,"Update: don't truncate article descriptions

Bug: T152213
Change-Id: I747b5f346b4e1d3f864a3e276c78a2608d3dd9db
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1480967769,1480967769,74e209a15f5fead7af4288e8d46e5748eb189b5b
578e9adc20087f0cd216c121b1b7c8dd2376dc11,578e9adc,Update: fix card enter / exit animations when added / removed by button tap,"Update: fix card enter / exit animations when added / removed by button tap

Change-Id: Iae02e654f17c7e751f4a8bacd03809e5de259d31
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1480967125,1480967125,74e209a15f5fead7af4288e8d46e5748eb189b5b
d10bf5b591ea6ae043674e750e3fa47d286d7735,d10bf5b5,Bump versionCode,"Bump versionCode

Change-Id: If4203873101395655f93da02b8ed7f8af2f9e2f7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1480966809,1480966809,74e209a15f5fead7af4288e8d46e5748eb189b5b
74e209a15f5fead7af4288e8d46e5748eb189b5b,74e209a1,"Merge ""Fix article description subtitle capitalization""","Merge ""Fix article description subtitle capitalization""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480965385,1480965385,"6b694c166a0789524d9a6c39be06c8a35764e89c,76e0781d0945a72ab74176a9a90c31dce9222a05"
6b694c166a0789524d9a6c39be06c8a35764e89c,6b694c16,"Merge ""Feed cards for Surveys and Fundraising.""","Merge ""Feed cards for Surveys and Fundraising.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480964627,1480964627,"a691d770f12219e42df0db851be17befb58054b0,be876e2905b7721353c1e2d315cc6b953492ac77"
a691d770f12219e42df0db851be17befb58054b0,a691d770,"Merge ""Hygiene: Remove unused method and clean up getAPIForSite""","Merge ""Hygiene: Remove unused method and clean up getAPIForSite""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480961246,1480961246,"ffa9b9c153810db47c2d77676d33ea0c9a316742,a04b0a9feb41e3bb0a2179aacef05e7c081519ea"
ffa9b9c153810db47c2d77676d33ea0c9a316742,ffa9b9c1,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I38cd6be8687bb34f85f5a6bcbb125b4f119da1ab
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1480954056,1480954371,6809dc3d6c6d05a7781e33c80dea8aad0ab3bcb8
a04b0a9feb41e3bb0a2179aacef05e7c081519ea,a04b0a9f,Hygiene: Remove unused method and clean up getAPIForSite,"Hygiene: Remove unused method and clean up getAPIForSite

The getAPIForMobileSite method in WikipediaApp is no longer used now that
Zero configs are fetched with Retrofit, as it is the only API call using
the mobile subdomain.  This removes it, and consolidates getAPIForSite into
one method, since there is no longer any need to take mobile vs.
non-mobile subdomain requests into account.

No functional changes intended.

Change-Id: Ibc4babd736033e741b41aa84753543e99d655197
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1480952882,1480952882,6809dc3d6c6d05a7781e33c80dea8aad0ab3bcb8
6809dc3d6c6d05a7781e33c80dea8aad0ab3bcb8,6809dc3d,"Merge ""Fix: system recents toolbar color in dark mode""","Merge ""Fix: system recents toolbar color in dark mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480710903,1480710903,"20b1e7a9a35d914d11746fde1a3e1a9da350d344,60e57e31b570c046244048b926f8dd10f4333c46"
be876e2905b7721353c1e2d315cc6b953492ac77,be876e29,Feed cards for Surveys and Fundraising.,"Feed cards for Surveys and Fundraising.

...plus Tests!

Bug: T140012
Change-Id: If2f32bdf869b17210e9e9efbd9d774e8cbcd33b4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1480636729,1480708796,000afc68f2969e7eaa5170602c29e96c6addbfc2
20b1e7a9a35d914d11746fde1a3e1a9da350d344,20b1e7a9,"Merge ""Update TranslationTests for TextUtils.expandTemplate param format""","Merge ""Update TranslationTests for TextUtils.expandTemplate param format""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480706057,1480706057,"a03e39ef309ee9315e32515e7184f799ce71866a,e990f837cfd792a4f6189c156f57e03a6d416337"
a03e39ef309ee9315e32515e7184f799ce71866a,a03e39ef,Add AppTextViewWithImagesTest,"Add AppTextViewWithImagesTest

Bug: T148202
Change-Id: I674a9cb3c02fe4489d4bfc4f925c163a0b89c067
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1480451894,1480629596,f78b2965465087e726412f39ef1e4bbde9911235
e990f837cfd792a4f6189c156f57e03a6d416337,e990f837,Update TranslationTests for TextUtils.expandTemplate param format,"Update TranslationTests for TextUtils.expandTemplate param format

Bug: T148202
Change-Id: I2ca35984dc3b9b6df791dd6b1ae81e79196de521
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1480446426,1480629409,f78b2965465087e726412f39ef1e4bbde9911235
76e0781d0945a72ab74176a9a90c31dce9222a05,76e0781d,Fix article description subtitle capitalization,"Fix article description subtitle capitalization

Looks like this got knocked out in a recent commit.  This fixes it.

Change-Id: Id416ffc29007e915900dbdbdec5963a9b7d33637
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1480628355,1480628355,39370cfba7540bdd15cd3b3df659523fa89501c7
f78b2965465087e726412f39ef1e4bbde9911235,f78b2965,Add DescriptionEditSuccessViewTest,"Add DescriptionEditSuccessViewTest

Bug: T148202
Change-Id: Ib0331bfacc0c0a5ce2ac1235caa085f8bee5f496
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1480619698,1480625049,39370cfba7540bdd15cd3b3df659523fa89501c7
60e57e31b570c046244048b926f8dd10f4333c46,60e57e31,Fix: system recents toolbar color in dark mode,"Fix: system recents toolbar color in dark mode

This patch appears correctly on my system but the previous
implementation did too. This patch makes the same changes as e23acc6 but
for the dark theme.

Bug: T146928
Change-Id: I4647b4e348a44dfde67b8f905a06e53ec877787b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1480621246,1480621246,39370cfba7540bdd15cd3b3df659523fa89501c7
39370cfba7540bdd15cd3b3df659523fa89501c7,39370cfb,"Merge ""Add description editing success activity""","Merge ""Add description editing success activity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480620466,1480620466,"000afc68f2969e7eaa5170602c29e96c6addbfc2,271fde2308749133640bbf3b4182c4dbd01f236b"
000afc68f2969e7eaa5170602c29e96c6addbfc2,000afc68,"Merge ""Make the first edit pencil serve a dual purpose.""","Merge ""Make the first edit pencil serve a dual purpose.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480613921,1480613921,"8a7c976dae33d27cc3c15c2ee3271940c8547700,988faf817b594ac681f54395e1ff623a1caf96ea"
8a7c976dae33d27cc3c15c2ee3271940c8547700,8a7c976d,"Merge ""Announcement cards in the feed.""","Merge ""Announcement cards in the feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480612435,1480612435,"52d489fb3b88d71b995bf39d02ff4c2d7d714186,2f320ffc6a7cf0c4101dec5098ccc7906c04d564"
52d489fb3b88d71b995bf39d02ff4c2d7d714186,52d489fb,"Merge ""Announcement data client.""","Merge ""Announcement data client.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480612415,1480612415,"630299f1d6d78575e8864014c7c86adc40c4efae,f8a4c79a9550c070555821b7a5d03efdfe03fe73"
988faf817b594ac681f54395e1ff623a1caf96ea,988faf81,Make the first edit pencil serve a dual purpose.,"Make the first edit pencil serve a dual purpose.

This does a few things:
- Moves the first edit pencil into the native ArticleHeaderView (and
  removes the first edit pencil from the WebView).
- Shows a PopupMenu at the location of the pencil that allows options to
  edit the description or the lead section of the article.
- Splits the single TextView that contained the title+description into two
  TextViews, so that the second TextView (containing the description) can
  have a padding to accommodate the edit pencil.

Bug: T151468
Change-Id: I6f2fadaeeb0345b208e3f112d3f012e33784dbf9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1479936717,1480541398,ffc8f7af29c0c791ccc7c5f8a5df8789a67baf01
2f320ffc6a7cf0c4101dec5098ccc7906c04d564,2f320ffc,Announcement cards in the feed.,"Announcement cards in the feed.

This is not the final design, just the first working version.
Design refinements to appear later.

Bug: T140012
Change-Id: I1353688655ae6d8695db0d97c1eb51e7718d3d38
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1479768854,1480539536,f8a4c79a9550c070555821b7a5d03efdfe03fe73
f8a4c79a9550c070555821b7a5d03efdfe03fe73,f8a4c79a,Announcement data client.,"Announcement data client.

Includes logic to conditionally show announcements based on country code
and start/end time.

Bug: T151085
Change-Id: Ibbfcbcbbcf000a03515af83168e06e307c43b5a4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1479753950,1480537955,ffc8f7af29c0c791ccc7c5f8a5df8789a67baf01
630299f1d6d78575e8864014c7c86adc40c4efae,630299f1,"Merge ""Hygiene: Consolidate news classes in org.wikipedia.feed.news""","Merge ""Hygiene: Consolidate news classes in org.wikipedia.feed.news""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480537611,1480537611,"ffc8f7af29c0c791ccc7c5f8a5df8789a67baf01,40f24ed45b1a128131ee3d4f03a6929759c8b04c"
ffc8f7af29c0c791ccc7c5f8a5df8789a67baf01,ffc8f7af,"Merge ""Hygiene: remove convert-icons.py""","Merge ""Hygiene: remove convert-icons.py""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480519340,1480519340,"87468784b0ec9e6b5e845cc9d7800d78241143b4,d4fcab4611416233e909e0593e63c9377a631bad"
271fde2308749133640bbf3b4182c4dbd01f236b,271fde23,Add description editing success activity,"Add description editing success activity

Bug: T148202
Change-Id: I5039df3e428cd7564b126ebb50cc4a095a2cf6ec
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1478111847,1480446333,87468784b0ec9e6b5e845cc9d7800d78241143b4
87468784b0ec9e6b5e845cc9d7800d78241143b4,87468784,"Merge ""Add rememberMe login param""","Merge ""Add rememberMe login param""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480442323,1480442323,"8448b44d02a9b2f5e161bf992bfbe9fa0f4db848,833bcec9ca9ae4c2a5ac4d7fefc71c09874b61d1"
8448b44d02a9b2f5e161bf992bfbe9fa0f4db848,8448b44d,"Merge ""Hygiene: light FeedCoordinator refactoring""","Merge ""Hygiene: light FeedCoordinator refactoring""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480439039,1480439039,"a922269d4325341664ac01f1f125ee806dddaf41,79286b81b34f3dc5bb54258f1752785479a0ab58"
79286b81b34f3dc5bb54258f1752785479a0ab58,79286b81,Hygiene: light FeedCoordinator refactoring,"Hygiene: light FeedCoordinator refactoring

* Tighten up class access
* Remove init() method and inline the single method call it contained
* Remove unnecessary comment

Change-Id: Ica9c6fee1d031f868a7faf7237427e1e6f77bfad
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1480363456,1480432148,93c013b262023e322a29787875089f60ce770b1c
a922269d4325341664ac01f1f125ee806dddaf41,a922269d,"Merge ""Hygiene: Remove StringUtil.capitalizeFirstChar""","Merge ""Hygiene: Remove StringUtil.capitalizeFirstChar""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480366040,1480366040,"1221e8e1e0d468d8846867fb071803c45ca3e61a,81df12fd112bb95c49ae945e2cbde110fa7fe6d3"
1221e8e1e0d468d8846867fb071803c45ca3e61a,1221e8e1,"Merge ""Capitalize Wikidata description in the presentation layer only""","Merge ""Capitalize Wikidata description in the presentation layer only""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480365921,1480365921,"fa0ae071bdaa909de7b1c158746dd76e48218c07,78e9e5bf6979d0a12e3aaa765fe95a84f79dccef"
fa0ae071bdaa909de7b1c158746dd76e48218c07,fa0ae071,"Merge ""Support for unmarshalling and using GeoIP cookies.""","Merge ""Support for unmarshalling and using GeoIP cookies.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1480363049,1480363049,"93c013b262023e322a29787875089f60ce770b1c,832cf938d97a513136454ae57ee423149e84ef06"
81df12fd112bb95c49ae945e2cbde110fa7fe6d3,81df12fd,Hygiene: Remove StringUtil.capitalizeFirstChar,"Hygiene: Remove StringUtil.capitalizeFirstChar

Replace remaining occurrences with StringUtil.capitalize and remove
the method.

Change-Id: I9a96853ca00970c1eb07026a793eae3e86668c19
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1480356230,1480356230,78e9e5bf6979d0a12e3aaa765fe95a84f79dccef
78e9e5bf6979d0a12e3aaa765fe95a84f79dccef,78e9e5bf,Capitalize Wikidata description in the presentation layer only,"Capitalize Wikidata description in the presentation layer only

Fixes issues caused by the Wikidata description being transformed to
capitalized form when read, including being presented for editing in
capitalized form and unintentionally modified to be capitalized when
saved.

Unfortunately, doing this in xml with android:inputType=""textCapSentences""
doesn't work, and TextView.setText() is final and can't be overridden to
do this in a custom view, so calling StringUtils.capitalize when setting
the description text on a view looks like our best option.

Bug: T151336
Bug: T151337
Change-Id: I7c6e8de21ab41fc9296f2f6582d4dbabd9b65cfd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1479854961,1480356167,93c013b262023e322a29787875089f60ce770b1c
93c013b262023e322a29787875089f60ce770b1c,93c013b2,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia353b63f4d5184910cfcd431be132061e1a475e9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1480349688,1480350069,d542591cc03d9535fce5dfa5600ab3b56ef2f60b
d4fcab4611416233e909e0593e63c9377a631bad,d4fcab46,Hygiene: remove convert-icons.py,"Hygiene: remove convert-icons.py

This script hasn't been used since we switched everything over to
Android Studio vector assets

Change-Id: I0ffebff202fb174b9af82f79487d51407dbf352d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1480053962,1480053962,d542591cc03d9535fce5dfa5600ab3b56ef2f60b
833bcec9ca9ae4c2a5ac4d7fefc71c09874b61d1,833bcec9,Add rememberMe login param,"Add rememberMe login param

Adds a hardcoded 'true' value for rememberMe and moves it to a hardcoded
URL query segment along with action=clientlogin and format=json, which also
don't vary.

Bug: T151494
Change-Id: Ife2bfb339dcfe364668bf82faf02142c9d0ab218
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1479522237,1479941925,1ee4b8446bd6c3fb3466dd2684fcc33b93d37ece
40f24ed45b1a128131ee3d4f03a6929759c8b04c,40f24ed4,Hygiene: Consolidate news classes in org.wikipedia.feed.news,"Hygiene: Consolidate news classes in org.wikipedia.feed.news

The news activity is always launched from the context of the feed.  Having
some related classes living in a standalone org.wikipedia.news package and
others in org.wikipedia.feed.news seems inconvenient and unnecessary.
This consolidates them in org.wikipedia.feed.news.

Includes other light refactoring for style.

No functional changes intended.

Change-Id: Ia7141e90492a5f4f5ee2c77e0e3af710c1777ec2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1479936713,1479936713,d542591cc03d9535fce5dfa5600ab3b56ef2f60b
832cf938d97a513136454ae57ee423149e84ef06,832cf938,Support for unmarshalling and using GeoIP cookies.,"Support for unmarshalling and using GeoIP cookies.

Lays some groundwork for conditionally showing announcements based on
country code and other parameters.

Bug: T151085
Change-Id: I4857433286d415d1a1a15cf7e22e603cb6b70410
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1475764623,1479838640,7736081bfafaa73241c9826dc6d18d4bfb3e7fa5
d542591cc03d9535fce5dfa5600ab3b56ef2f60b,d542591c,Update: lower contrast of list item overflow buttons,"Update: lower contrast of list item overflow buttons

Bug: T144858
Change-Id: Iae3af08b6bb98638f45345ebe48994eb1d4e8f0a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1479763559,1479763559,263d7a9efcb59920236cce31c9b34e20436ff7f3
263d7a9efcb59920236cce31c9b34e20436ff7f3,263d7a9e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I70250187e33bb2a0082867bfbc8b1a3ac22d5842
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1479742099,1479742471,7736081bfafaa73241c9826dc6d18d4bfb3e7fa5
7736081bfafaa73241c9826dc6d18d4bfb3e7fa5,7736081b,Hygiene: Bump target SDK to 25 in project.properties,"Hygiene: Bump target SDK to 25 in project.properties

Whoops!  This needs to be in sync with targetSdkVersion in build.gradle
in order for CI to work correctly.

Change-Id: I76101fdb334af14be625de7bea7c9126cbb7dc44
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1479521348,1479521348,1ee4b8446bd6c3fb3466dd2684fcc33b93d37ece
1ee4b8446bd6c3fb3466dd2684fcc33b93d37ece,1ee4b844,"Merge ""Bump targetSdkVersion to 25""","Merge ""Bump targetSdkVersion to 25""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1479491276,1479491276,"a4e454b2bb3a22fcf1a2024a9a9cfc5ff2b37c26,fc7123ff87b40b66f0218ec82c3f86ae48c0babd"
a4e454b2bb3a22fcf1a2024a9a9cfc5ff2b37c26,a4e454b2,"Merge ""Clicking new tab button to make the created tab active""","Merge ""Clicking new tab button to make the created tab active""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1479490231,1479490231,"67c318ccaa02c928dc966b166f585523d67ee923,e6562ab0a4ede1bf44eaa5778b3e14ae84ee0afe"
67c318ccaa02c928dc966b166f585523d67ee923,67c318cc,"Merge ""Add CentralAuthTokenClient""","Merge ""Add CentralAuthTokenClient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1479489027,1479489027,"fc1707553d306fcd3e4927732811efa33981614f,8218d146ceb9205cfdf7a2f6fc74d5a6f1ec2c22"
fc1707553d306fcd3e4927732811efa33981614f,fc170755,"Merge ""Handle abusefilters in Wikidata description editing""","Merge ""Handle abusefilters in Wikidata description editing""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1479488932,1479488932,"09d99ea354234c12ac0102d9752e83e3da16b716,876b39f6d6753d343a4b1f10a5efa4de14cb278c"
e6562ab0a4ede1bf44eaa5778b3e14ae84ee0afe,e6562ab0,Clicking new tab button to make the created tab active,"Clicking new tab button to make the created tab active

Bug: T150019
Change-Id: I7d507f3da3d670b005e224e7c19e27ba33d14196
",,,,Kunal Grover,kunalgrover05@gmail.com,Grover,kunalgrover05@gmail.com,1478931597,1479487665,5f88eece626ede08c95169ed921c753d8c42e0a1
8218d146ceb9205cfdf7a2f6fc74d5a6f1ec2c22,8218d146,Add CentralAuthTokenClient,"Add CentralAuthTokenClient

This is needed so we can edit a Wikidata description from a user that is
logged in on Wikipedia.

Bug: T150705
Change-Id: I2162000b8af895a4f4fac7cb29815ac23a102a4b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1479229052,1479487388,876b39f6d6753d343a4b1f10a5efa4de14cb278c
876b39f6d6753d343a4b1f10a5efa4de14cb278c,876b39f6,Handle abusefilters in Wikidata description editing,"Handle abusefilters in Wikidata description editing

Add checks for abusefilter warning and disallowed when checking server
response after editing a Wikidata description.

Similarly to the (Page) EditClient abusefilter cases use the success
callback. This is mainly because we don't throw an Exception in this
case. Alternatively, we could create distinct callbacks for these cases.

Bug: T150704
Bug: T146641
Change-Id: I5c6abcb5425ce6c8d602e6d794610c1778d138ea
(cherry picked from commit 010fd1d8fa77c7fecc75b4964bb488591d29dfe9)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1478844379,1479487383,1ef60fdb540080742707e1e7c18e3d05c1e4e139
09d99ea354234c12ac0102d9752e83e3da16b716,09d99ea3,Fix server logout case when logged in user edits,"Fix server logout case when logged in user edits

When a user is logged into the app and makes an edit, EditClient
requests that the server verify the user is still logged in and that the
edit will be associated with their account. If the user is logged out,
the request fails. This patch checks for and retries in that scenario.
I no longer reproduce this issue but I wrote a test to exercise the
scenario.

Bug: T150529
Change-Id: I88b700b2bfb9433ddcaab86829b32557000f772d
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1479340058,1479447627,f1c98ab8a5108cf50871425d64419865858404dc
fc7123ff87b40b66f0218ec82c3f86ae48c0babd,fc7123ff,Bump targetSdkVersion to 25,"Bump targetSdkVersion to 25

* Tested app in split-screen mode.
* Reviewed change docs for potential problems.
    - Doze/App standby: No changes needed
    - Project Svelte: No changes needed
    - Filesystem permissions changes:
    - Sharing files between apps:
       - Handling of downloaded files was broken, now fixed!
       - https://phabricator.wikimedia.org/T144920
    - Display Size change handling: created new tickets:
       - https://phabricator.wikimedia.org/T144976
       - https://phabricator.wikimedia.org/T144984
       - These aren't blockers.
    - Other vision settings: No changes needed

Also of note (from section Other Important Points):

If an app posts Runnable tasks to a View, and the View is not attached to
a window, the system queues the Runnable task with the View; the Runnable
task does not execute until the View is attached to a window. This
behavior fixes the following bugs:

* If an app posted to a View from a thread other than the intended
  window’s UI thread, the Runnable may run on the wrong thread as a result.

* If the Runnable task was posted from a thread other than a looper thread,
  the app could expose the Runnable task.

Refs:
https://developer.android.com/about/versions/nougat/android-7.0-changes.html
https://android-developers.blogspot.com/2016/10/android71-dev-preview-available.html
https://developer.android.com/preview/support.html

Bug: T140907
Change-Id: I9ff03cd11902680e4e8dc6fd78fd6161a9ecdd17
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1476894533,1479414132,f1c98ab8a5108cf50871425d64419865858404dc
f1c98ab8a5108cf50871425d64419865858404dc,f1c98ab8,"Merge ""Fix MediaDownloadReceiver to work with all API versions.""","Merge ""Fix MediaDownloadReceiver to work with all API versions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1479412878,1479412878,"5c2f3c741f8dfd5358ed7b8e27c16091b4ed2333,ff79b39bd3ac46dcf3999208f06030cc2aba4ff4"
5c2f3c741f8dfd5358ed7b8e27c16091b4ed2333,5c2f3c74,"Merge ""Store time spent reading in History entries.""","Merge ""Store time spent reading in History entries.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1479412227,1479412227,"0c82c677c976e91e5075ecdd9d74c5b53f7ea7a3,957bdc20f03a5db750b5681c7f0dc67fbc6c7d10"
0c82c677c976e91e5075ecdd9d74c5b53f7ea7a3,0c82c677,Persist channel parameter from install referrer.,"Persist channel parameter from install referrer.

This introduces a new parameter for our install referrer string, called
""channel"". If this parameter is present, we will save the channel in
SharedPreferences, so that it will be passed through to the userAgent that
the app uses for all network requests. (The logic of putting the channel
into the userAgent is already there.)

Bug: T149917
Change-Id: Ia4ea46765dacde8e1c1957dc6f94bd36d5807462
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1479409047,1479409173,a24e947dd6ba400475f073863eea6cc5372a3b45
957bdc20f03a5db750b5681c7f0dc67fbc6c7d10,957bdc20,Store time spent reading in History entries.,"Store time spent reading in History entries.

This improves the smartness of our History database by adding a ""time
spent"" column, which keeps track of the total time the user spends looking
at the article. This field is cumulative: if the user visits the article
multiple times, the reading durations are added together.

This also makes use of this new column by plugging it into our Feed
content: the Continue Reading and Because You Read cards will now only
show suggestions for articles that have been read for 30 or more seconds.

Bug: T146646
Bug: T146647
Change-Id: Id8d198a3340c58f7077bd46ebc6147545143d4c4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1479392444,1479407220,1bf216e03990e7ee73310225541d4d043d9c54c0
a24e947dd6ba400475f073863eea6cc5372a3b45,a24e947d,"Merge ""Hygiene: add base class for MW responses""","Merge ""Hygiene: add base class for MW responses""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1479406556,1479406556,"a078f5eaf3d6bd5579e8a1e41a0eeaf4f529bd96,1ef60fdb540080742707e1e7c18e3d05c1e4e139"
ff79b39bd3ac46dcf3999208f06030cc2aba4ff4,ff79b39b,Fix MediaDownloadReceiver to work with all API versions.,"Fix MediaDownloadReceiver to work with all API versions.

This resolves one of the blockers for targeting API 24+.

This fixes the way we update the device's MediaStore upon completion of a
downloaded image or other media file. Instead of using the deprecated
COLUMN_LOCAL_FILENAME, we now use COLUMN_LOCAL_URI. All of the other logic
remains unchanged.

Also, it looks like the MediaDownloadReceiver wasn't wired correctly into
MainFragment, so it wasn't receiving the download completion event. This
patch wires it in correctly.

Bug: T144920
Change-Id: Ie760cd7f86f52a18d0c63ad658f73eba8f0e7c1e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1479400736,1479400873,439288090120d73b2bb47070558e389d7030aceb
a078f5eaf3d6bd5579e8a1e41a0eeaf4f529bd96,a078f5ea,Update support library to 25.0.1,"Update support library to 25.0.1

Release notes:
https://developer.android.com/topic/libraries/support-library/revisions.html

Issues fixed:
https://code.google.com/p/android/issues/list?can=1&q=label%3ATarget-Support-25.0.1

The most relevant bit for us:
""The TextInputLayout password toggle is now disabled by default""...
meaning that we need to set it to true in xml.

Change-Id: Ibd3767be0417850938ba1405f68d51ff2405e620
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1479394482,1479395043,439288090120d73b2bb47070558e389d7030aceb
1ef60fdb540080742707e1e7c18e3d05c1e4e139,1ef60fdb,Hygiene: add base class for MW responses,"Hygiene: add base class for MW responses

For the Wikidata description editing work I need to have an MW GET response
without a query (just a centralauthtoken).

Change-Id: I8ca7c888ec4335c63b8c4f9062093bd8746d829e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1479158752,1479342651,439288090120d73b2bb47070558e389d7030aceb
439288090120d73b2bb47070558e389d7030aceb,43928809,Hygiene: remove unused show password icon,"Hygiene: remove unused show password icon

Change-Id: If8dd80012ff039c498141460a42a5946b6022604
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1479233427,1479233427,a83af83cd0084f1b25ee065201fc16cd0e9c09c1
a83af83cd0084f1b25ee065201fc16cd0e9c09c1,a83af83c,Hygiene: remove EditTask,"Hygiene: remove EditTask

This class has been superseded by EditClient. No functional change
intended.

Change-Id: Ie989b6e1de37f7a3e288cf083b63a0468f78381b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1479232627,1479232627,35ea82200980a3125012b53bdfc5bca40fa413eb
35ea82200980a3125012b53bdfc5bca40fa413eb,35ea8220,"Merge ""Close DescriptionEditActivity on successful edit""","Merge ""Close DescriptionEditActivity on successful edit""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1479223636,1479223636,"f01bbb7057fe1754d7b294abb4d3d9b752a42d44,73323e03a3c2d2ee20892b31bcb0be5db533dc00"
f01bbb7057fe1754d7b294abb4d3d9b752a42d44,f01bbb70,"Merge ""Add error feedback UI to description editing""","Merge ""Add error feedback UI to description editing""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1479222717,1479222717,"1bf216e03990e7ee73310225541d4d043d9c54c0,f20b7de46b45a9f5fc4b0ab2d6abf69e35cbc39d"
73323e03a3c2d2ee20892b31bcb0be5db533dc00,73323e03,Close DescriptionEditActivity on successful edit,"Close DescriptionEditActivity on successful edit

Bug: T148204
Change-Id: I8687d4f812685a015e0d15dbb9fc0b0cf9852c51
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478713017,1479162957,f20b7de46b45a9f5fc4b0ab2d6abf69e35cbc39d
1bf216e03990e7ee73310225541d4d043d9c54c0,1bf216e0,"Merge ""Fix app toolbar color in recents menu""","Merge ""Fix app toolbar color in recents menu""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1479159420,1479159420,"c684a07ffa9134bc08dd660ee200c05abdb44cf1,e23acc62db35ab23850d34f37cf25fe482697db1"
e23acc62db35ab23850d34f37cf25fe482697db1,e23acc62,Fix app toolbar color in recents menu,"Fix app toolbar color in recents menu

Bug: T146928

Change-Id: I29b2c52bb07add5c56e6b17e6cfd8b9ecbf97c8b
",,,,Adi Pascu,mail@adipascu.ro,Stephen Niedzielski,stephen@niedzielski.com,1478948567,1479158661,4d124bfef1aaa35d265b549dab697bb413f0a9d2
c684a07ffa9134bc08dd660ee200c05abdb44cf1,c684a07f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4e6e66de59a3f3bc1b88f8c832996823de79043d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1479140494,1479142344,4d124bfef1aaa35d265b549dab697bb413f0a9d2
f20b7de46b45a9f5fc4b0ab2d6abf69e35cbc39d,f20b7de4,Add error feedback UI to description editing,"Add error feedback UI to description editing

Bug: T148203
Change-Id: I50369d113b39df3232b1bd2c45108224e102d7fc
",,,,Stephen Niedzielski,stephen@niedzielski.com,bearND,bsitzmann@wikimedia.org,1478649097,1478853737,4d124bfef1aaa35d265b549dab697bb413f0a9d2
4d124bfef1aaa35d265b549dab697bb413f0a9d2,4d124bfe,"Merge ""Fix/restore Wikipedia Zero enter notification.""","Merge ""Fix/restore Wikipedia Zero enter notification.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478796778,1478796778,"90964c05dc6ca8062614e5d69b76b14c40c13168,674df840ff11848a198fb5bab8c3cf3fe7da2814"
674df840ff11848a198fb5bab8c3cf3fe7da2814,674df840,Fix/restore Wikipedia Zero enter notification.,"Fix/restore Wikipedia Zero enter notification.

For some reason, the notification when entering a Zero network seems to
have disappeared (?), along with the code that produces it. This seems to
have been due to https://gerrit.wikimedia.org/r/317166

This brings back that notification, and also adds separate icons for
entering and leaving a Zero network.

Bug: T150258
Change-Id: I21d556b0ea4f3fae27f4d98e4d11f0ee9674763f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478784935,1478785158,7a04741abae79b23a9e590d969c1d559acf28132
90964c05dc6ca8062614e5d69b76b14c40c13168,90964c05,Fix feed page summary content model,"Fix feed page summary content model

Create a new FeedPageSummary class reflecting the special case of RESTBase
page summary items in the aggregated feed response, where RESTBase injects
a ""normalizedtitle"" field.

This new structure accurately reflects what's going on in the feed
response.  Update to use it when building the feed content in the app.

Beyond rationalizing the feed content model, fixes a regression probably
caused by https://phabricator.wikimedia.org/rAPAW8af3495a2afaffd20a12782026cb5b44b52b0fc6.

Change-Id: I319304ba3f059a1f1449b2a0141e3473d676d53c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1478528995,1478709033,7a04741abae79b23a9e590d969c1d559acf28132
7a04741abae79b23a9e590d969c1d559acf28132,7a04741a,Fix PasswordTextInput's EditText RTL layout,"Fix PasswordTextInput's EditText RTL layout

Align password entry to the right in right to left languages. The hint
does not appear to be adjustable[0].

[0] https://code.google.com/p/android/issues/detail?id=182155

Change-Id: Idf5d524cebdcb1bbab4fa90f6bd3dd1e8eb60084
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478647649,1478647649,65ff3f77e1f86ee00da2ba252d233b45a2e4c728
65ff3f77e1f86ee00da2ba252d233b45a2e4c728,65ff3f77,Hygiene: replace NullValue with @TestedOnBool,"Hygiene: replace NullValue with @TestedOnBool

Change-Id: I5737dd765f8d0ba3726006f7a26079cef34a0e64
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478635262,1478635314,0c49cea2557c375416a770becf36aa40ff9b684f
0c49cea2557c375416a770becf36aa40ff9b684f,0c49cea2,Hygiene: replace Visibility with @TestedOnBool,"Hygiene: replace Visibility with @TestedOnBool

Change-Id: I7ea8b1291b134990f0879351a22523da2a90717f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478634747,1478634747,d7fa8a958d77f5e90a8e16e332d801afe4d64d9a
d7fa8a958d77f5e90a8e16e332d801afe4d64d9a,d7fa8a95,Upgrade to Commons Lang v3.5,"Upgrade to Commons Lang v3.5

There was a bug introduced by 6f8ba16 when comparing two CharSequences
in DescriptionEditView. The fix is in Commons Lang v3.5[0]. LANG-1127
may be applicable for some of our Locale dependent tests and many util
supplements were made[1]

[0] https://issues.apache.org/jira/browse/LANG-1162
[1] https://commons.apache.org/proper/commons-lang/release-notes/RELEASE-NOTES-3.5.txt

Change-Id: I50cc4252747a2812d8aa44b68d90b12f11135d71
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478629995,1478630589,94cc86b01316cf060748d2a3ef23838aaf60d632
94cc86b01316cf060748d2a3ef23838aaf60d632,94cc86b0,Hygiene: add layout prefixes to description IDs,"Hygiene: add layout prefixes to description IDs

Add view_ / fragment_ layout prefixes to description IDs and remove an
unnecessary View parent in DescriptionEditFragment

Bug: T148203
Change-Id: I54db1df44458ff3fa7716860a61d1ea1468f0ac0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478561118,1478630589,fda0c68697c25de36181575a2f3f4c0fd7487e95
fda0c68697c25de36181575a2f3f4c0fd7487e95,fda0c686,Hygiene: remove verbose ArticleHeaderView methods,"Hygiene: remove verbose ArticleHeaderView methods

Remove a couple methods that explicate ordinary operations and aren't
worthwhile

Change-Id: I1f0e722bcedfa1e13a5e952524693585ec284459
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478560366,1478630589,4281216d6afddbbef9ebedb9b2ff02ddbe3efeae
4281216d6afddbbef9ebedb9b2ff02ddbe3efeae,4281216d,Fix potential NPE & hygiene in DescriptionEditView,"Fix potential NPE & hygiene in DescriptionEditView

• Allow for an original null description and add an @Nullable annotation

• Update test save button logic and refactor lightly

• Rename editText to pageDescriptionText

Bug: T148203
Change-Id: I73f6bc98f8b6bf3a1b82d16ea55ce7ac8583ca0e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478559744,1478630589,5a17e15cd038e40547172efdb80594b49f0806af
5a17e15cd038e40547172efdb80594b49f0806af,5a17e15c,Add DescriptionEditViewTest,"Add DescriptionEditViewTest

Bug: T148203
Change-Id: I67b3250583784a3ba74b69bf46fbee76465dca71
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478293619,1478630589,8ea92d5565d19d18c05aaa39604309e1d2b6b9b5
8ea92d5565d19d18c05aaa39604309e1d2b6b9b5,8ea92d55,Hygiene: replace requestFocus idiom with util,"Hygiene: replace requestFocus idiom with util

Bug: T148203
Change-Id: I71a6748442ac120eaa1f1f767e3d6f66e88e9303
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478289225,1478630589,fe737f553ccb0665d713487adf214b81dac45f5c
fe737f553ccb0665d713487adf214b81dac45f5c,fe737f55,"Merge ""Add @TestedOnBool annotation for @Theory tests""","Merge ""Add @TestedOnBool annotation for @Theory tests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478630219,1478630219,"c80a1641e7984134c8b447a11a551a6fc7c888d9,1963d236c14378277b926cfbc65d1a5f968a4548"
c80a1641e7984134c8b447a11a551a6fc7c888d9,c80a1641,"Merge ""Fix duplicate show password icon""","Merge ""Fix duplicate show password icon""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478626315,1478626315,"ed869fbdff4103320554cf209890bb6a6a49e347,a4542ecc33d6d57f99e4082b1f6737e54568c1c7"
ed869fbdff4103320554cf209890bb6a6a49e347,ed869fbd,"Merge ""Fix a few annoyances in Nearby.""","Merge ""Fix a few annoyances in Nearby.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478626100,1478626100,"e957c618d4f0c70cabc70f61b03218408470da34,72ee0743a6c8328ca0c8d6b08307c064cd26ba1f"
72ee0743a6c8328ca0c8d6b08307c064cd26ba1f,72ee0743,Fix a few annoyances in Nearby.,"Fix a few annoyances in Nearby.

This patch nails down some logic that hasn't yet been optimal when
navigating and switching back and forth to the Nearby tab.

- Currently, when you open the app and go to the *History* tab, the app
  sometimes shows a snackbar that actually belongs to the Nearby tab which
  says ""location services are disabled"", which is not true.
- Currently, when pressing the ""my location"" button for the first time
  (and accepting the location permission), the app still issues a snackbar
  that says ""location services are disabled"", which is incorrect.
- Currently, when switching from Nearby to Explore and back to Nearby, the
  previous location and results are not preserved.

This patch fixes these inconsistencies by introducing a more proper
function for determining whether location services are actually enabled,
and also improving the logic of persisting the current location of the
mapView, as well as the logic of when to jump to the user's location.

Change-Id: Ia43f5254b755b2a424e38af54e78c964e1339880
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478276437,1478619531,fdae90821b646fd9e81aa239971277e682c3f6d7
1963d236c14378277b926cfbc65d1a5f968a4548,1963d236,Add @TestedOnBool annotation for @Theory tests,"Add @TestedOnBool annotation for @Theory tests

Bug: T148203
Change-Id: I694e3a542c9377d48e6b04f421970db783d80d88
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478279353,1478549022,e957c618d4f0c70cabc70f61b03218408470da34
e957c618d4f0c70cabc70f61b03218408470da34,e957c618,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I2f9921a9f324ae5b46f2250c81ebdc5bafb1e59f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478536185,1478547221,5f88eece626ede08c95169ed921c753d8c42e0a1
5f88eece626ede08c95169ed921c753d8c42e0a1,5f88eece,"Merge ""Hygiene: Rename editing stuff, pt. 2""","Merge ""Hygiene: Rename editing stuff, pt. 2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478295511,1478295511,"a22fa7c3661a3e49700fc9248274d5c126ff54aa,bf6870f03105615b8ac534bbb795f413187e12fd"
a22fa7c3661a3e49700fc9248274d5c126ff54aa,a22fa7c3,"Merge ""Add RandomSummaryClientTest""","Merge ""Add RandomSummaryClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478288009,1478288009,"081970548e569d13c1ed5e1ccf168db593f802ba,582e98920c68e94338acc5118646777c27ae4d57"
081970548e569d13c1ed5e1ccf168db593f802ba,08197054,"Merge ""Add null checks for classes with @Required fields""","Merge ""Add null checks for classes with @Required fields""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478287797,1478287797,"85b7878f2ba48cc367cd7c62c50f64d7b59ac2f5,aa1e744222eaa6432d9afbc6056df41b339b5834"
85b7878f2ba48cc367cd7c62c50f64d7b59ac2f5,85b7878f,"Merge ""Fix possible memory leak(s) in feed.""","Merge ""Fix possible memory leak(s) in feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478287686,1478287686,"10ced02809d3fdaef78e017e9d50a60f3f5d2e0b,9fb372594c8da7d7bb27da6f520e9166211c362a"
10ced02809d3fdaef78e017e9d50a60f3f5d2e0b,10ced028,"Merge ""Marshal DescriptionEditFragment Bundle not Intent""","Merge ""Marshal DescriptionEditFragment Bundle not Intent""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478286938,1478286938,"916f33195fa4fb290445203d51cf4490ee6942eb,3aaad4e9d82b2b263f3439ae70dd0caa7b5541ba"
916f33195fa4fb290445203d51cf4490ee6942eb,916f3319,"Merge ""Upgrade to Support Library v25.0.0""","Merge ""Upgrade to Support Library v25.0.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478286106,1478286106,"e2be1fe4e394748c2d0a1ff0f0470e7c24324d67,7d602c245b621519b7da74dfeb17d1b00c3527be"
9fb372594c8da7d7bb27da6f520e9166211c362a,9fb37259,Fix possible memory leak(s) in feed.,"Fix possible memory leak(s) in feed.

Observed in API 17, certain Clients that provide feed content seem
to retain a reference to a Context, which in this case is MainActivity.

This patch provides the FeedCoordinator with an Application context
instead of an Activity context, so that it won't matter if the coordinator
(or any Clients to which it passes the Context) holds on to the Context
longer than necessary.

Change-Id: Ia2603d0ccf57889d84a81d1b90f71cc88f78884d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1477964178,1478280311,e2be1fe4e394748c2d0a1ff0f0470e7c24324d67
e2be1fe4e394748c2d0a1ff0f0470e7c24324d67,e2be1fe4,Fix possible leak in FacePostprocessor.,"Fix possible leak in FacePostprocessor.

Observed in API 17, this leak seems to happen because the
FacePostprocessor class implicitly retains an instance of the
FaceAndColorDetectImageView of which it is a member.

This patch separates out the FacePostprocessor class, along with its
concerns, and makes sure that it doesn't keep any references to the View
that uses it.

Change-Id: I6e637b4e5fe676f9b6bc13f1e2ff21d1c500bbaa
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1477962549,1478279598,029194f73925628c03f0d882c24c46e59995d465
bf6870f03105615b8ac534bbb795f413187e12fd,bf6870f0,"Hygiene: Rename editing stuff, pt. 2","Hygiene: Rename editing stuff, pt. 2

A couple more changes for uniformity:

* Renamed package org.wikipedia.editing to org.wikipedia.edit

* Renamed *EditResult classes to Edit*Result so that all editing-related
  classes begin with 'Edit' (but not 'Editing')

No functional changes intended.

Change-Id: I42996e431687ac8ef738330a4e7dac5e2dd99298
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1478279497,1478279497,029194f73925628c03f0d882c24c46e59995d465
582e98920c68e94338acc5118646777c27ae4d57,582e9892,Add RandomSummaryClientTest,"Add RandomSummaryClientTest

Bug: T148897
Change-Id: If6c5dcedb8103685b4ace9a1e9d9c473135f35fc
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1478125327,1478279284,aa1e744222eaa6432d9afbc6056df41b339b5834
aa1e744222eaa6432d9afbc6056df41b339b5834,aa1e7442,Add null checks for classes with @Required fields,"Add null checks for classes with @Required fields

Added null checks as necessary (i.e., where not already present, as
they were for most of the feed content).

Bug: T148897
Change-Id: Iab7bcb7bb6693cd22609d08ca9ca64d31191e7bb
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1478125231,1478277066,029194f73925628c03f0d882c24c46e59995d465
029194f73925628c03f0d882c24c46e59995d465,029194f7,"Capitalize ""yesterday"" in feed card titles","Capitalize ""yesterday"" in feed card titles

A doh! follow-up to cb2b7f6.

Bug: T148746
Change-Id: Ia8aebbebe51a05d7787a01bd302f36b74a76d5c8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478273827,1478273827,76bd37a45511a1502fc564e8b93f6b10451eebcb
76bd37a45511a1502fc564e8b93f6b10451eebcb,76bd37a4,"Merge ""Update deprecated APIs""","Merge ""Update deprecated APIs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478273207,1478273207,"fdae90821b646fd9e81aa239971277e682c3f6d7,833366d85ed8d687e137d7e8eaa83cc8e4fbb781"
3aaad4e9d82b2b263f3439ae70dd0caa7b5541ba,3aaad4e9,Marshal DescriptionEditFragment Bundle not Intent,"Marshal DescriptionEditFragment Bundle not Intent

• Unmarshal from the Fragment argument bundle not the Intent. In the
  present implementation, this has the same effect since the Activity
  uses the same key and passes the same data.

• For good symmetry, null out the EditView callback and PageTitle
  argument.

Bug: T148203
Change-Id: I192f9e292763480874e9de432744322f97221336
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478214130,1478214130,fdae90821b646fd9e81aa239971277e682c3f6d7
fdae90821b646fd9e81aa239971277e682c3f6d7,fdae9082,"Merge ""Close search interface when explicitly switching navigation tabs.""","Merge ""Close search interface when explicitly switching navigation tabs.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478210484,1478210484,"1dfc6a7a267734940f8dad14dcd58d50aa4c6ca0,5798ab7370acc84ec00eedb71c454adcc1f28e65"
1dfc6a7a267734940f8dad14dcd58d50aa4c6ca0,1dfc6a7a,"Merge ""Handle error responses in EditClient""","Merge ""Handle error responses in EditClient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478209810,1478209810,"62315bfb5b633d2d245fc5d052e583be51815014,d74c75b16c1d21deefb6213d2f66603e34d3749b"
5798ab7370acc84ec00eedb71c454adcc1f28e65,5798ab73,Close search interface when explicitly switching navigation tabs.,"Close search interface when explicitly switching navigation tabs.

Consider this current behavior:
- In MainActivity, search for something, long-press one of the results and
  add it to a reading list.
- In the snackbar that appears, tap the ""view list"" button, and observe
  that nothing really happens, because the search interface is still on
  top of the reading lists tab.

This patch makes it so that the search interface is explicitly dismissed
any time we programmatically jump to a different navigation tab.

Change-Id: If702b3ae7d9bc72b202437138fce70068406c955
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1478206674,1478209541,62315bfb5b633d2d245fc5d052e583be51815014
62315bfb5b633d2d245fc5d052e583be51815014,62315bfb,"Merge ""Fix long-press menu actions in search results in MainActivity.""","Merge ""Fix long-press menu actions in search results in MainActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478209480,1478209480,"4899c3ba12b3ab9d35dea20387eec796a93e7bf4,fd8fed694165cba97ba9859d0f614a11ca165d92"
fd8fed694165cba97ba9859d0f614a11ca165d92,fd8fed69,Fix long-press menu actions in search results in MainActivity.,"Fix long-press menu actions in search results in MainActivity.

I've found that when you invoke the Search interface from MainActivity
(i.e. the feed), some of the long-press actions don't seem to work,
including add-to-reading-list, share, and copy link.

This is because the function to obtain the callback() object for the
current fragment only looks at the ""parent"" fragment or ""target"" fragment,
whereas the Search fragment is actually a *grandparent* of MainFragment.

This patch refactors the Callback interfaces of the search sub-fragments
so that they're only directional with respect to the immediate parent of
the fragment.

Change-Id: If71346f4c77cca0e7793ad61fc05ceb15babe2bf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478205566,1478208506,958be7b1e3e93c687a3ce5cfbeeb1d3f09d53e25
d74c75b16c1d21deefb6213d2f66603e34d3749b,d74c75b1,Handle error responses in EditClient,"Handle error responses in EditClient

EditClient currently can't handle error responses (e.g., bad token).

This makes the Edit class subclass MwPostResponse so that Gson knows how
to handle error responses.

Bug: T149921
Change-Id: I7c848d09c18b44077c679b4bb9bfaee4f0077d1a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477668154,1478208204,4899c3ba12b3ab9d35dea20387eec796a93e7bf4
4899c3ba12b3ab9d35dea20387eec796a93e7bf4,4899c3ba,"Merge ""Handle error responses in EditPreviewClient""","Merge ""Handle error responses in EditPreviewClient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478207922,1478207922,"958be7b1e3e93c687a3ce5cfbeeb1d3f09d53e25,8a3b74acab6e6c3445be18f080940503d29c143d"
958be7b1e3e93c687a3ce5cfbeeb1d3f09d53e25,958be7b1,"Merge ""Fix possible memory leak in BottomSheetPresenter.""","Merge ""Fix possible memory leak in BottomSheetPresenter.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478205741,1478205741,"91aaee92078b9e7ef48a4bc183eace181234b56b,ebee3d62cbc14594c492ca949cc99a7358f7df16"
91aaee92078b9e7ef48a4bc183eace181234b56b,91aaee92,"Merge ""Hygiene: Remove CardPageItem""","Merge ""Hygiene: Remove CardPageItem""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478205480,1478205480,"61e7da2ebca69d650320a4cbd311b34f8a07d906,8af3495a2afaffd20a12782026cb5b44b52b0fc6"
61e7da2ebca69d650320a4cbd311b34f8a07d906,61e7da2e,"Merge ""Hygiene: lightly refactor random summary client""","Merge ""Hygiene: lightly refactor random summary client""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478205419,1478205419,"dbe40b6b5e4a1bed64686afc016b52d8c889e3bd,2010950e4bb35721c043c725b2bf7f68dc115000"
a4542ecc33d6d57f99e4082b1f6737e54568c1c7,a4542ecc,Fix duplicate show password icon,"Fix duplicate show password icon

Bug: T144318
Change-Id: I7faa4aebebaf55f6b5b18a2a625734e45c61a1a7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478124683,1478203548,7d602c245b621519b7da74dfeb17d1b00c3527be
dbe40b6b5e4a1bed64686afc016b52d8c889e3bd,dbe40b6b,Fix visual nuisance when adding to a reading list from the feed.,"Fix visual nuisance when adding to a reading list from the feed.

Take the following steps to see what I mean:
- Open the feed, and scroll down so that the navigation bar becomes
  hidden.
- Tap the button to save one of the displayed items to a reading list
  (e.g. tap the ""save"" button on the Featured Article).
- Select a reading list to save into, and observe a snackbar that gives
  you the option to ""View list"".
- When you tap the snackbar, it takes you to the reading lists tab, and
  the topmost reading list is weirdly scrolled underneath the main
  toolbar.

This patch adds some code that programmatically scrolls the
CoortinatorLayout just enough so that the bottom navigation bar is fully
shown, and the inner content of the current tab is fully scrolled into
view.  Ideally we probably wouldn't want the reading lists screen to be
""scrollable"" when there's no scroll-worthy content in it, but that's for
later.

Change-Id: I9f82f6d166d778bb57fe7a54a873b82bc4ca8b96
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478202468,1478202468,bf2dd783c9a25e5c6b9da75c601c3e920a5addc3
7d602c245b621519b7da74dfeb17d1b00c3527be,7d602c24,Upgrade to Support Library v25.0.0,"Upgrade to Support Library v25.0.0

Upgrade the Support Libraries to v25.0.0[0], buildToolsVersion to
v25.0.0[1], and compileSdkVersion to 25. There were several bugs
mentioned in the Android subreddit[2,3,4,5] but none I could repro in
the app. There was one noteworthy new feature added mentioned in the
release notes that is not tracked in Phabricator:

  The new DiffUtil class can calculate the difference between two
  collections, and can dispatch a list of update operations that are
  suitable to be consumed by a RecyclerView.Adapter.

The paradigm for Gradle dependencies is unclear. The Topeka[6] example
doesn't match the library breakdown by feature[7].

The upgrade does not seem to have affected any of the Spoon or unit
screenshot tests.

[0] https://developer.android.com/topic/libraries/support-library/revisions.html
[1] https://developer.android.com/studio/releases/build-tools.html
[2] https://www.reddit.com/r/androiddev/comments/500cx9/android_design_support_2420_update_password/
[3] https://www.reddit.com/r/androiddev/comments/52m6ac/android_support_library_revision_2421_released/
[4] https://www.reddit.com/r/androiddev/comments/4y70e7/android_support_library_v242_released/
[5] https://www.reddit.com/r/androiddev/comments/58czcd/support_lib_25_with_bottomnavigationview/
[6] https://github.com/googlesamples/android-topeka/blob/ed5573691843d6afde4086f86ed2f7659016ec9b/app/build.gradle
[7] https://developer.android.com/topic/libraries/support-library/features.html

Bug: T144318
Change-Id: Ibdf76a6b640b5cb749caaf2b3e4bb3186d6fa710
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477946643,1478201418,833366d85ed8d687e137d7e8eaa83cc8e4fbb781
833366d85ed8d687e137d7e8eaa83cc8e4fbb781,833366d8,Update deprecated APIs,"Update deprecated APIs

Bug: T144318
Change-Id: I9cdc208f2f61c940ba6aeedb153703ca16d83a05
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477945145,1478201418,bf2dd783c9a25e5c6b9da75c601c3e920a5addc3
bf2dd783c9a25e5c6b9da75c601c3e920a5addc3,bf2dd783,"Merge ""Fix and simplify clicking of audio pronunciation icon.""","Merge ""Fix and simplify clicking of audio pronunciation icon.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478200614,1478200614,"04eedbd7a97a39e732632f115d970112df49376f,1a709142e5f3c5c0920e853ca7a7ebbc1783b513"
1a709142e5f3c5c0920e853ca7a7ebbc1783b513,1a709142,Fix and simplify clicking of audio pronunciation icon.,"Fix and simplify clicking of audio pronunciation icon.

Bug: T149856
Change-Id: I57c8d515fcd32f81c8078889a7ae83361b59adc7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478186291,1478199382,4ea8f0215d0316a05adb246ec367dce6c2e5f077
04eedbd7a97a39e732632f115d970112df49376f,04eedbd7,"Merge ""Hygiene: Don't keep unnecessary Activity in settings.""","Merge ""Hygiene: Don't keep unnecessary Activity in settings.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478199026,1478199026,"8fe612166cb078598a97c0b8196842a2680a1967,fef66f83840012d3e92e6ad5a12301159d2537f9"
8fe612166cb078598a97c0b8196842a2680a1967,8fe61216,Hygiene: remove unused resources,"Hygiene: remove unused resources

Bug: T144318
Change-Id: Iad695f9e6208910f8565b1ef0ecac43b0a57feae
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477939993,1478127719,0da5b83bfb378566313cad2e3642dc9c6736966c
0da5b83bfb378566313cad2e3642dc9c6736966c,0da5b83b,Fix ArrayAdapter<?>s to use parent when inflating,"Fix ArrayAdapter<?>s to use parent when inflating

When inflating items, consider the parent attributes. This doesn't
appear to have any effect but perhaps the list item layouts may be
simplified in a future patch. Also reduce Activity dependency to
Context.

Bug: T144318
Change-Id: I229bba004799e835b9f3af2e24f8cee04a8c3fd5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477939626,1478127719,4ea8f0215d0316a05adb246ec367dce6c2e5f077
fef66f83840012d3e92e6ad5a12301159d2537f9,fef66f83,Hygiene: Don't keep unnecessary Activity in settings.,"Hygiene: Don't keep unnecessary Activity in settings.

Change-Id: I3dfd7d9e90331947453477dc4a0de59bc154346f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478096220,1478126750,4ea8f0215d0316a05adb246ec367dce6c2e5f077
8af3495a2afaffd20a12782026cb5b44b52b0fc6,8af3495a,Hygiene: Remove CardPageItem,"Hygiene: Remove CardPageItem

CardPageItem was meant to represent essentially a RESTBase page summary
response.  But we already have a class for that: RbPageSummary.  We
should use that instead.

Change-Id: I88a4e2384bde45073e64412b649451eaf1050326
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1478023762,1478124325,2010950e4bb35721c043c725b2bf7f68dc115000
4ea8f0215d0316a05adb246ec367dce6c2e5f077,4ea8f021,Hygiene: Don't keep an Activity in DisambigList and IssuesList.,"Hygiene: Don't keep an Activity in DisambigList and IssuesList.

Change-Id: I983700722a028703c16250f36a95eb01643e46a9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478038165,1478123665,e2dfceb6b3a1cb176e5d0d04408c4221fe5b54d5
ebee3d62cbc14594c492ca949cc99a7358f7df16,ebee3d62,Fix possible memory leak in BottomSheetPresenter.,"Fix possible memory leak in BottomSheetPresenter.

I've observed a memory leak in API 23, which seems to be caused by our
BottomSheetPresenter holding on to a reference of FragmentManager.

This patch updates the Presenter to always accept FragmentManager as a
parameter, and also lightly refactors the way that we launch the
AddToReadingListDialog.

Change-Id: I930ef47b5ae39f32cdd7659e00ac09780f1ad88d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1477955600,1478122733,e2dfceb6b3a1cb176e5d0d04408c4221fe5b54d5
e2dfceb6b3a1cb176e5d0d04408c4221fe5b54d5,e2dfceb6,"Merge ""Hygiene: remove ParcelableLruCache""","Merge ""Hygiene: remove ParcelableLruCache""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478119614,1478119614,"cb2b7f60219c916326c10c1807334700f182c625,28697d230e60d57121cb61bf35c6266995bf2b3a"
cb2b7f60219c916326c10c1807334700f182c625,cb2b7f60,"Capitalize ""today"" in because you read card titles","Capitalize ""today"" in because you read card titles

Bug: T148746
Change-Id: Ief9d291b9f08032e04bef5c9030b712f77ad51a8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1478116244,1478116244,f5bbc16c7ed61977b0ec0df076c47603f7153df2
f5bbc16c7ed61977b0ec0df076c47603f7153df2,f5bbc16c,"Merge ""Add Wikidata description editing dataclient""","Merge ""Add Wikidata description editing dataclient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478115564,1478115564,"21bbd84ade0fde56f3dac485187c42f725d5cd03,d56a3708890632bab141b7d45317db3c832be7e2"
21bbd84ade0fde56f3dac485187c42f725d5cd03,21bbd84a,"Merge ""Hygiene: Don't require an Activity for EditSummaryHandler.""","Merge ""Hygiene: Don't require an Activity for EditSummaryHandler.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478115563,1478115563,"1e8d100fe9963eeca51cf5d7f0ed84d4d1beb30e,d9e52e68ba2641ac18a1fd335ddb54fbf3360297"
d56a3708890632bab141b7d45317db3c832be7e2,d56a3708,Add Wikidata description editing dataclient,"Add Wikidata description editing dataclient

Allows to edit the description of a Wikidata item corresponding to a PageTitle on Wikipedia.

For testing I have been using the Wikidata sandbox item https://www.wikidata.org/wiki/Q4115189,
which is linked on enwiki to https://en.wikipedia.org/wiki/Wikipedia:Wikidata/Wikidata_Sandbox.
The wikidata item has links to other wikis (towards the bottom of the page).

Future patches:
TODO: handle abusefilter cases
TODO: get token for a logged in user + centralauthtoken instead of hardcoding +\

Bug: T146641
Change-Id: I2a7c4659fb51c5189f6e188dc10bfa8cb1f7eca0
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1477636142,1478113341,1e8d100fe9963eeca51cf5d7f0ed84d4d1beb30e
28697d230e60d57121cb61bf35c6266995bf2b3a,28697d23,Hygiene: remove ParcelableLruCache,"Hygiene: remove ParcelableLruCache

The functionality of this class no longer appears.

Bug: T144318
Change-Id: I44d80cd8daab7c07f17e2570442af85b6846cd42
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477939489,1478112925,1e8d100fe9963eeca51cf5d7f0ed84d4d1beb30e
2010950e4bb35721c043c725b2bf7f68dc115000,2010950e,Hygiene: lightly refactor random summary client,"Hygiene: lightly refactor random summary client

* Rename RandomSummaryService to RandomSummaryClient for consistency
  with other Retrofit clients
* Other light internal refactoring to make less verbose

No functional changes intended.

Change-Id: I4487b0c08885a2402aa3101ed0b437b0c5b24fbe
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1478025086,1478111930,1e8d100fe9963eeca51cf5d7f0ed84d4d1beb30e
1e8d100fe9963eeca51cf5d7f0ed84d4d1beb30e,1e8d100f,"Merge ""Integrate leakcanary into Dev build.""","Merge ""Integrate leakcanary into Dev build.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478106742,1478106742,"5d1672996eacfd796d48129f05af9384977e73f5,133e6fd22ad75d9971a77af197592348b8756918"
5d1672996eacfd796d48129f05af9384977e73f5,5d167299,Hygiene: Refactor SnippetImage to be fully static.,"Hygiene: Refactor SnippetImage to be fully static.

...so that it doesn't need to keep references to Contexts or Bitmaps.
Also solidify the contracts required by its methods.

Change-Id: I184cd4556308acc7bb0b5f7de42ef6dfb85d0d91
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478031811,1478096674,106f15f04cef53b4bcb2efa35683f04ffa69bc19
133e6fd22ad75d9971a77af197592348b8756918,133e6fd2,Integrate leakcanary into Dev build.,"Integrate leakcanary into Dev build.

This integrates leakcanary[0] into our builds, in the following way:
- I added a developer preference that will enable LeakCanary when running a
  Dev-flavor build. (LeakCanary should not always be enabled, since it
  can cause nuisance leak reports or false-positives. It should be enabled
  when performing an ""audit"" for leaks.) Make sure to restart the app when
  turning on/off the developer preference.
- For non-Dev builds, the code will automatically use a no-op reference
  watcher. (The preference for watching memory leaks will have no effect.)

[0] https://github.com/square/leakcanary

Change-Id: I827028322054d767a222ee51265890f56181afab
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461691948,1478092967,4630377a49fe487f61abc5e5a299ca1605a7b014
d9e52e68ba2641ac18a1fd335ddb54fbf3360297,d9e52e68,Hygiene: Don't require an Activity for EditSummaryHandler.,"Hygiene: Don't require an Activity for EditSummaryHandler.

Change-Id: I2541bd864803c91ecf1b9b1eb3d9e953c57680ee
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478037272,1478092367,f506e6d0c26e46a5a8a7e19d173d1484925180b1
106f15f04cef53b4bcb2efa35683f04ffa69bc19,106f15f0,"Merge ""Hygiene: Don't require Context in PageToolbarHideHandler.""","Merge ""Hygiene: Don't require Context in PageToolbarHideHandler.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478041638,1478041638,"c83d00af16779da75a36bd7ac01cd947c415edcc,f506e6d0c26e46a5a8a7e19d173d1484925180b1"
c83d00af16779da75a36bd7ac01cd947c415edcc,c83d00af,"Merge ""Hygiene: Don't keep Context where not necessary.""","Merge ""Hygiene: Don't keep Context where not necessary.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478041576,1478041576,"d94ce964bfbc6759e1f6e83f2d452ecd612c0ef6,56168ced5a19fa6773ce2a005ee1225ce95f22da"
d94ce964bfbc6759e1f6e83f2d452ecd612c0ef6,d94ce964,"Merge ""Hygiene: Don't require a Context for LongPressHandler.""","Merge ""Hygiene: Don't require a Context for LongPressHandler.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478041442,1478041442,"8185727765ae6042df0b780832587594c119c748,8aa364ce8c1780f6878f3840f1955e577e3569e2"
f506e6d0c26e46a5a8a7e19d173d1484925180b1,f506e6d0,Hygiene: Don't require Context in PageToolbarHideHandler.,"Hygiene: Don't require Context in PageToolbarHideHandler.

Change-Id: Ia26e9092bcb948d0cd348d214f76ccfb0dea2a09
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478033192,1478033192,56168ced5a19fa6773ce2a005ee1225ce95f22da
56168ced5a19fa6773ce2a005ee1225ce95f22da,56168ced,Hygiene: Don't keep Context where not necessary.,"Hygiene: Don't keep Context where not necessary.

Change-Id: Id466149fd50d0ef8355a1a43504ac7e2d0632465
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478030883,1478030954,8aa364ce8c1780f6878f3840f1955e577e3569e2
8aa364ce8c1780f6878f3840f1955e577e3569e2,8aa364ce,Hygiene: Don't require a Context for LongPressHandler.,"Hygiene: Don't require a Context for LongPressHandler.

Change-Id: Iad00c9f9df447e3833c0951edf7bdb6f835b1113
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478027595,1478027595,bb821e6d0230df06ec4cdc5e29b92920f291d2bd
8185727765ae6042df0b780832587594c119c748,81857277,"Merge ""Remove ambiguity when using GoneIfEmptyTextView.""","Merge ""Remove ambiguity when using GoneIfEmptyTextView.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478020860,1478020860,"d9e38d1e6665e65a484acc4eab20d954c13141d6,4630377a49fe487f61abc5e5a299ca1605a7b014"
d9e38d1e6665e65a484acc4eab20d954c13141d6,d9e38d1e,"Merge ""Fix crash when clicking a reference in Edit Preview.""","Merge ""Fix crash when clicking a reference in Edit Preview.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478018911,1478018911,"dad105726e3f362b8f8ae905b5a7f2310f1fcb5a,1e44d9d6cc473c8add6aec574b33bbe10b49765e"
dad105726e3f362b8f8ae905b5a7f2310f1fcb5a,dad10572,"Merge ""Fix possible crash when clicking on an image.""","Merge ""Fix possible crash when clicking on an image.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1478017443,1478017443,"9ea03a06f8b3396bf6ee02accfdd1af6bbdb5f1d,5bcfa43b32356ba3e3d11ed2f0db4c112d3e08f0"
1e44d9d6cc473c8add6aec574b33bbe10b49765e,1e44d9d6,Fix crash when clicking a reference in Edit Preview.,"Fix crash when clicking a reference in Edit Preview.

This is simply because we weren't providing a bridge listener for
receiving reference click events.

This also adds a click listener for video/media objects.

Bug: T148744
Change-Id: I6335f65b7f0945bcd655a210e0e633757c04637a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478014211,1478014211,bb821e6d0230df06ec4cdc5e29b92920f291d2bd
5bcfa43b32356ba3e3d11ed2f0db4c112d3e08f0,5bcfa43b,Fix possible crash when clicking on an image.,"Fix possible crash when clicking on an image.

Based on a (relatively small) number of crash reports, it looks like some
articles have images that link to their subjects without the ""/wiki""
prefix, which doesn't match the expectation of our imageClicked event
handler. This causes the handler to pass the link off to the parent
LinkHandler, which causes it to look for a ""title"" attribute in the
payload, which doesn't exist, which causes an exception.

This patch makes the ""title"" attribute in this case optional, and also
hardens the handling of the ""title"" parameter within the LinkHandler
itself, so that if the titleString happens to be null, the original href
is used.

Bug: T149692
Change-Id: I0b2a35db20cbb35c5b557b4fdeb9966ae6a3f030
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478013585,1478013585,bb821e6d0230df06ec4cdc5e29b92920f291d2bd
9ea03a06f8b3396bf6ee02accfdd1af6bbdb5f1d,9ea03a06,Fix Norwegian language title when picking article language.,"Fix Norwegian language title when picking article language.

Bug: T146584
Change-Id: Id4c73f7c45398324194d634801ccacdd1b796ed6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1478011602,1478011602,bb821e6d0230df06ec4cdc5e29b92920f291d2bd
8a3b74acab6e6c3445be18f080940503d29c143d,8a3b74ac,Handle error responses in EditPreviewClient,"Handle error responses in EditPreviewClient

As with EditClient, EditPreviewClient should handle API error responses
that can be sent with a 200 response code.  Make EditPreview a subclass
of MwPostResponse so that it does so.

Errors are probably a little less likely here than with editing proper
but still possible.

Change-Id: I565cdbfc188c9037942e192ab016e5eaae6fdeff
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477672583,1477946719,75f17b075a5944f64ea63c9797bd0fef57fee8cf
4630377a49fe487f61abc5e5a299ca1605a7b014,4630377a,Remove ambiguity when using GoneIfEmptyTextView.,"Remove ambiguity when using GoneIfEmptyTextView.

I've noticed that in the current Feed, we have a regression:
In the list of trending articles, if an article does not have a
description, the title should become vertically centered, whereas it now
incorrectly stays near the top of the list item.

This is because the description field is a GoneIfEmptyTextView. This
component very deceptively exposes a setText(String) function, which
does NOT override the super function setText(CharSequence). This can lead
to all kinds of subtle visual bugs like this.

This patch finally patches this inconsistency once and for all, by making
this component use a TextWatcher, and update its visibility based on the
text content that is fed into it.

Change-Id: I0d1675b801b17df36aa5d61d9200d596e1c35c1d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1477943722,1477946624,bb821e6d0230df06ec4cdc5e29b92920f291d2bd
bb821e6d0230df06ec4cdc5e29b92920f291d2bd,bb821e6d,"Merge ""Fix picture of the day caption being single-line.""","Merge ""Fix picture of the day caption being single-line.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477944300,1477944300,"4233c522911e3ddfa17bc9fe6a21e39e77f110dd,06339ee325ea016d3524978fc10954d808bab35a"
06339ee325ea016d3524978fc10954d808bab35a,06339ee3,Fix picture of the day caption being single-line.,"Fix picture of the day caption being single-line.

I've noticed that the caption shown on top of the picture of the day is
overflowing onto multiple lines, despite having the attribute of
maxLines=""1"". This seems to be fixable by removing the textIsSelectable
attribute, which isn't particularly necessary, since the user may click
the card itself, and select the text from the full-screen gallery caption.

Change-Id: Ife44dd4f48e8be93d0605f8fc137d899f9d739f0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1477942212,1477942212,e13a16c3c52b221cd82c3e06574f89fc236d6b40
4233c522911e3ddfa17bc9fe6a21e39e77f110dd,4233c522,"Merge ""Don't show Zero preferences until initially joining a Zero network.""","Merge ""Don't show Zero preferences until initially joining a Zero network.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477928558,1477928558,"8317bb03b8c8c1fe6c7a46bbb50d7b4a40610d85,5523435936dbaa1369e34083c5e3ad96a9749486"
8317bb03b8c8c1fe6c7a46bbb50d7b4a40610d85,8317bb03,"Merge ""Add/update tests for W0 Retrofit client""","Merge ""Add/update tests for W0 Retrofit client""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477928449,1477928449,"e11c58cee450e0c1d326eaef6e0e2a23dc550247,70c7b2186f790d91ec0fe8bf650e60ba7659ac52"
e11c58cee450e0c1d326eaef6e0e2a23dc550247,e11c58ce,"Merge ""Retrofit zeroconfig requests""","Merge ""Retrofit zeroconfig requests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477928417,1477928417,"ad11a9a665797279359d5cd7b7d858abd69e093b,d6a0cd82f0523687420fa60b98c6553df176625c"
ad11a9a665797279359d5cd7b7d858abd69e093b,ad11a9a6,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ib198ca7ca2900e580122ca72159f72ae4c3606fa
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477926635,1477927339,23c7b5d73f0de002dc00006942d6a1990d8c3f9f
23c7b5d73f0de002dc00006942d6a1990d8c3f9f,23c7b5d7,"Merge ""Fixes T143732. Make Article horizontal divider RTL aware.""","Merge ""Fixes T143732. Make Article horizontal divider RTL aware.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477920665,1477920665,"e13a16c3c52b221cd82c3e06574f89fc236d6b40,d90f71a5d2aafca0ef01c4576c7012497e77200a"
70c7b2186f790d91ec0fe8bf650e60ba7659ac52,70c7b218,Add/update tests for W0 Retrofit client,"Add/update tests for W0 Retrofit client

Change-Id: Ia345f1ad269059dba2ba6eb0651b3510fa63f1e2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477611138,1477692303,d6a0cd82f0523687420fa60b98c6553df176625c
5523435936dbaa1369e34083c5e3ad96a9749486,55234359,Don't show Zero preferences until initially joining a Zero network.,"Don't show Zero preferences until initially joining a Zero network.

Break our preferences into three separate XML chunks, and add logic to
conditionally inflate the Zero preference chunk only if the initial Zero
tutorial has been shown.

Bug: T140610
Change-Id: I456ba77f7eeebccd249d455e3ad4cf369f322a29
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1477490025,1477688246,e13a16c3c52b221cd82c3e06574f89fc236d6b40
e13a16c3c52b221cd82c3e06574f89fc236d6b40,e13a16c3,"Merge ""Fix bug in Namespace to legacy string conversion""","Merge ""Fix bug in Namespace to legacy string conversion""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477688216,1477688216,"5ef325412e1a413802e4a39cdbf6bde171c8b7d7,654e62d6e26f3c8f93f513cebf4f1246c2d73f3b"
5ef325412e1a413802e4a39cdbf6bde171c8b7d7,5ef32541,"Merge ""Move CI scripts into version control""","Merge ""Move CI scripts into version control""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477687931,1477687931,"7f4097a00eadc8236ab0cff220bf7a6afe13b944,18b504ba615428efb4d3cc1c4b5ae23e75a77754"
7f4097a00eadc8236ab0cff220bf7a6afe13b944,7f4097a0,"Merge ""Add BecauseYouReadCardViewTest""","Merge ""Add BecauseYouReadCardViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477687728,1477687728,"db608fe7473b2adcdd024eec6a8572bfb6498fd7,6598688b8f9348a4c0173a1c6dc4368a1438dc26"
db608fe7473b2adcdd024eec6a8572bfb6498fd7,db608fe7,"Merge ""Add PageTitleListCardItemViewTest""","Merge ""Add PageTitleListCardItemViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477686913,1477686913,"b2d13d6e6fecd9354b45ceb0258f0b35d6957d8c,0a8b1ff204504bf1b3492a11fe3b97ce32cf0cca"
b2d13d6e6fecd9354b45ceb0258f0b35d6957d8c,b2d13d6e,"Merge ""Hygiene: add TestStr to String helper in ViewTest""","Merge ""Hygiene: add TestStr to String helper in ViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477686492,1477686492,"f9a9a8be394cc8e1bd8ec08738d41626e0442123,6195095fc9ab78ec39cff3507e4e501cc85b5aaf"
f9a9a8be394cc8e1bd8ec08738d41626e0442123,f9a9a8be,"Merge ""Hygiene: update ViewTest packaging""","Merge ""Hygiene: update ViewTest packaging""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477686040,1477686040,"f68a69b21dd536a3bd22dcc37a93798c1b593234,653a9142a18285ffe9397e1b292ad30023505ae6"
f68a69b21dd536a3bd22dcc37a93798c1b593234,f68a69b2,"Merge ""Hygiene: replace ViewTest primitives w/ classes""","Merge ""Hygiene: replace ViewTest primitives w/ classes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477685550,1477685550,"0c328a636dfc46cb02c6bb0543594e2c75de3c42,9962b46370d7d688a49712a76981bf6804c98874"
0c328a636dfc46cb02c6bb0543594e2c75de3c42,0c328a63,"Merge ""Hygiene: collapse PageTitleListCardItemView""","Merge ""Hygiene: collapse PageTitleListCardItemView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477685299,1477685299,"57906787aae4a7add00fc28291c658d81939abc0,f7b52ea8c3cc4d3a7583b1924ea8bd0bdb1b653f"
d6a0cd82f0523687420fa60b98c6553df176625c,d6a0cd82,Retrofit zeroconfig requests,"Retrofit zeroconfig requests

Change-Id: Ied31b924d6c482b73671bb1ac86a5f2cef03f90c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477610774,1477682995,4354d603a4f9f188586cc0b8380526923e6980b4
57906787aae4a7add00fc28291c658d81939abc0,57906787,"Merge ""Add ListCardItemViewTest""","Merge ""Add ListCardItemViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477681940,1477681940,"4354d603a4f9f188586cc0b8380526923e6980b4,5b0e939d62eefb0cfd68745ff483b9bbe58b0115"
4354d603a4f9f188586cc0b8380526923e6980b4,4354d603,"Merge ""Hygiene: replace hardcoded font scale with symbol""","Merge ""Hygiene: replace hardcoded font scale with symbol""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477677540,1477677540,"740a7f858d4db7f07c6f8f7261a47d6c3f0c6f18,f9537bc2532553d0e215f3e7712ab8be9a232b3e"
740a7f858d4db7f07c6f8f7261a47d6c3f0c6f18,740a7f85,"Merge ""Add ListCardViewTest""","Merge ""Add ListCardViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477677424,1477677424,"c7f252e6c3dd8e58781e7b27c69de4745d08892c,a923c226ce0e43e7590a434486267910e99bc362"
c7f252e6c3dd8e58781e7b27c69de4745d08892c,c7f252e6,"Merge ""Add DefaultFeedCardViewTest""","Merge ""Add DefaultFeedCardViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477677213,1477677213,"66537819925f1bcc5464643e461a1110e6d09c4f,88ed74d8295a3aef9a728c7e545feeb621b473d0"
66537819925f1bcc5464643e461a1110e6d09c4f,66537819,"Merge ""Add CardHeaderViewTest""","Merge ""Add CardHeaderViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477676224,1477676224,"75f17b075a5944f64ea63c9797bd0fef57fee8cf,2853c43bdd60a6fa6a8635d6de262eb685788c43"
75f17b075a5944f64ea63c9797bd0fef57fee8cf,75f17b07,Hygiene: Repackage and rename editing and Captcha handling classes,"Hygiene: Repackage and rename editing and Captcha handling classes

* Move captcha classes to package org.wikipedia.captcha
* Move various editing classes to sub-packages
* Rename EditingResult to EditResult for consistency with other Edit*
  classes

No functional changes intended.

Change-Id: I86b21dbf24c09cdc88528b501de0bc6e12076dc6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477598938,1477610978,320ea87501fb1d34ef001d3c7864ebe0d30b94c0
654e62d6e26f3c8f93f513cebf4f1246c2d73f3b,654e62d6,Fix bug in Namespace to legacy string conversion,"Fix bug in Namespace to legacy string conversion

Fix capitalization bug in Namespace to legacy string conversion and add
test. When converting a non-main Namespace to a legacy string, the
expected result is sentence case with underscores. For example, ""Talk""
or ""Gadget_definition"". Fix a state bug causing the result to be fully
capitalized like ""TALK"" or ""GADGET_DEFINITION"".

Change-Id: I383f5728cfb551181d0ba9e41657863ce7cda9f4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477608365,1477609390,320ea87501fb1d34ef001d3c7864ebe0d30b94c0
18b504ba615428efb4d3cc1c4b5ae23e75a77754,18b504ba,Move CI scripts into version control,"Move CI scripts into version control

Copy over the shell commands from CI[0,1,2] to the Android repo. This
will allow us to version the scripts, easily change them without much CI
knowledge, and easily reference them without a Jenkins login. A
subsequent patch in the integration config repo will update the Jenkins
console commands to reference these scripts.

[0] https://integration.wikimedia.org/ci/job/apps-android-wikipedia-test/configure
[1] https://integration.wikimedia.org/ci/job/apps-android-wikipedia-periodic-test/configure
[2] https://integration.wikimedia.org/ci/job/apps-android-wikipedia-lint/configure

Change-Id: Id365caf945087f1a73107c36f95762881cea57fe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477606803,1477607152,6598688b8f9348a4c0173a1c6dc4368a1438dc26
6598688b8f9348a4c0173a1c6dc4368a1438dc26,6598688b,Add BecauseYouReadCardViewTest,"Add BecauseYouReadCardViewTest

Bug: T140019
Change-Id: I33ad951833a51e85e6ee59cc880083a1eaa1e9ac
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472255190,1477606415,0a8b1ff204504bf1b3492a11fe3b97ce32cf0cca
0a8b1ff204504bf1b3492a11fe3b97ce32cf0cca,0a8b1ff2,Add PageTitleListCardItemViewTest,"Add PageTitleListCardItemViewTest

Bug: T144399
Change-Id: I29ea5621f6e0e175ea4b1bd32c6ea4ac5f1126b0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477599573,1477606415,6195095fc9ab78ec39cff3507e4e501cc85b5aaf
6195095fc9ab78ec39cff3507e4e501cc85b5aaf,6195095f,Hygiene: add TestStr to String helper in ViewTest,"Hygiene: add TestStr to String helper in ViewTest

Change-Id: Id55360e1911aa3d6ac412c03726ee9b397193cdf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477595977,1477606414,653a9142a18285ffe9397e1b292ad30023505ae6
653a9142a18285ffe9397e1b292ad30023505ae6,653a9142,Hygiene: update ViewTest packaging,"Hygiene: update ViewTest packaging

Move ViewTest into org.wikipedia.test.view. This wasn't done in the
previous commit to minimize deltas.

Change-Id: I4f3603d5048555e17686b4cc2aef4e5b7068aa6b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477527275,1477606414,9962b46370d7d688a49712a76981bf6804c98874
9962b46370d7d688a49712a76981bf6804c98874,9962b463,Hygiene: replace ViewTest primitives w/ classes,"Hygiene: replace ViewTest primitives w/ classes

Replace ViewTest primitive types with distinct user types. This helps
eliminate @Theory parameter mismatches and standardizes test inputs.

Change-Id: Ife79a5d95d0abe8361ba23fb111fc296a71267ad
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477526898,1477606414,f7b52ea8c3cc4d3a7583b1924ea8bd0bdb1b653f
f7b52ea8c3cc4d3a7583b1924ea8bd0bdb1b653f,f7b52ea8,Hygiene: collapse PageTitleListCardItemView,"Hygiene: collapse PageTitleListCardItemView

Merge ListCardItemView into PageTitleListCardItemView and remove dead
code.

Change-Id: I2abab7182bee35026fe3e95acbf596a5e2c6f57b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477425768,1477606414,5b0e939d62eefb0cfd68745ff483b9bbe58b0115
5b0e939d62eefb0cfd68745ff483b9bbe58b0115,5b0e939d,Add ListCardItemViewTest,"Add ListCardItemViewTest

Bug: T144399
Change-Id: Ie3cc50516d783a6174d90490d6fa8f8b927a09ec
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477418518,1477606414,f9537bc2532553d0e215f3e7712ab8be9a232b3e
f9537bc2532553d0e215f3e7712ab8be9a232b3e,f9537bc2,Hygiene: replace hardcoded font scale with symbol,"Hygiene: replace hardcoded font scale with symbol

Change-Id: Ib273e18ee5d53e1c35dc76b14bc01ff3beb6b87e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477345553,1477606414,a923c226ce0e43e7590a434486267910e99bc362
a923c226ce0e43e7590a434486267910e99bc362,a923c226,Add ListCardViewTest,"Add ListCardViewTest

Bug: T144399
Change-Id: I1e1b1285d2dab4c99fee9822d63199402f7479b6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477350607,1477606414,88ed74d8295a3aef9a728c7e545feeb621b473d0
88ed74d8295a3aef9a728c7e545feeb621b473d0,88ed74d8,Add DefaultFeedCardViewTest,"Add DefaultFeedCardViewTest

Bug: T144399
Change-Id: I664d051183df7ba7cd8a343c6ca4e50969e28e6b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477345212,1477606414,2853c43bdd60a6fa6a8635d6de262eb685788c43
2853c43bdd60a6fa6a8635d6de262eb685788c43,2853c43b,Add CardHeaderViewTest,"Add CardHeaderViewTest

I had to change an ImageView in CardHeaderView back to an explicit
AppCompatImageView because the test library doesn't seem to use that
implementation implicitly.

Bug: T144400
Bug: T148875
Change-Id: Iffe71e944512b00c14f04445191217a807249b6f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477088952,1477606414,320ea87501fb1d34ef001d3c7864ebe0d30b94c0
320ea87501fb1d34ef001d3c7864ebe0d30b94c0,320ea875,"Merge ""Retrofit editing""","Merge ""Retrofit editing""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477603835,1477603835,"42fb0440d3a718419dee135ad8cf37c84486a2f8,9fa1b8a23de41425fc65ca6afd49a2171270257d"
42fb0440d3a718419dee135ad8cf37c84486a2f8,42fb0440,"Merge ""Hygiene: MW client classes should get Retrofit from MwCachedService""","Merge ""Hygiene: MW client classes should get Retrofit from MwCachedService""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477600214,1477600214,"975aebffada7580e9b2e34e9cbde3a860ccbb9e9,f46d6441d3b23db3ffdd6cdb7114865738fc0a38"
9fa1b8a23de41425fc65ca6afd49a2171270257d,9fa1b8a2,Retrofit editing,"Retrofit editing

Change-Id: I54e551b3f4802350740db5450f018549373558f8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477597587,1477597587,b34f24f538dd4cce5b04ec632309cc4551f3d440
975aebffada7580e9b2e34e9cbde3a860ccbb9e9,975aebff,"Merge ""Update TranslationTests.""","Merge ""Update TranslationTests.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477594600,1477594600,"b34f24f538dd4cce5b04ec632309cc4551f3d440,73ac3aeb460c389d410b08005fbc4e3250794b8f"
73ac3aeb460c389d410b08005fbc4e3250794b8f,73ac3aeb,Update TranslationTests.,"Update TranslationTests.

...since we now have strings with two decimal parameters.

Change-Id: I289e442a942dbac5084facb4aeb2a9ddeddcd5de
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1477592258,1477592258,1ec66d2912ea0a48e1225088d304ed501a39d678
f46d6441d3b23db3ffdd6cdb7114865738fc0a38,f46d6441,Hygiene: MW client classes should get Retrofit from MwCachedService,"Hygiene: MW client classes should get Retrofit from MwCachedService

Change-Id: I6c8fd61c11b29be2a404999d5d3c05268edaedb3
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477590706,1477591176,ed5cf6ad396af6c7ad744e4656904f889d870e69
b34f24f538dd4cce5b04ec632309cc4551f3d440,b34f24f5,"Merge ""Show ""Add description"" message when description is empty.""","Merge ""Show ""Add description"" message when description is empty.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477591112,1477591112,"ed5cf6ad396af6c7ad744e4656904f889d870e69,2331ef469972b984ca4665fa4018a80449a3783a"
ed5cf6ad396af6c7ad744e4656904f889d870e69,ed5cf6ad,"Merge ""Add EditTokenClientTest""","Merge ""Add EditTokenClientTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477590967,1477590967,"962ed3de00fab4e4e03caab9be5c299223e6b6ae,112867e9d4674a4b45eed0dea19b85971a0e6ae7"
2331ef469972b984ca4665fa4018a80449a3783a,2331ef46,"Show ""Add description"" message when description is empty.","Show ""Add description"" message when description is empty.

Change-Id: Ifafd013d41349bfb5666480de01f99a514de196f
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1477581169,1477590928,962ed3de00fab4e4e03caab9be5c299223e6b6ae
962ed3de00fab4e4e03caab9be5c299223e6b6ae,962ed3de,"Merge ""Retrofit edit token fetching""","Merge ""Retrofit edit token fetching""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477590903,1477590903,"0a19c805f4160305baefcb59255ec189194a64d2,581c45a37bdec9e8d416544bd77f8d9624af9202"
0a19c805f4160305baefcb59255ec189194a64d2,0a19c805,"Merge ""Retrofit edit preview fetching""","Merge ""Retrofit edit preview fetching""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477590801,1477590801,"230243f2b30299331db06ab56a18d133386841e4,756eee34a5a92243c0339537eca2c506faa6dcc8"
230243f2b30299331db06ab56a18d133386841e4,230243f2,"Merge ""Description editing UX.""","Merge ""Description editing UX.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477590271,1477590271,"3c6507b3c46f96cb995c927561d21d78af9fed26,1ec66d2912ea0a48e1225088d304ed501a39d678"
112867e9d4674a4b45eed0dea19b85971a0e6ae7,112867e9,Add EditTokenClientTest,"Add EditTokenClientTest

Change-Id: Id0f8597f3bbb63f0775cd8b6a0c8738d4e8bab71
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1477587807,1477589765,581c45a37bdec9e8d416544bd77f8d9624af9202
581c45a37bdec9e8d416544bd77f8d9624af9202,581c45a3,Retrofit edit token fetching,"Retrofit edit token fetching

Change-Id: I5fb3d6e824c4a2ac0d278dd847f34495c704f0da
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1477584489,1477589752,756eee34a5a92243c0339537eca2c506faa6dcc8
756eee34a5a92243c0339537eca2c506faa6dcc8,756eee34,Retrofit edit preview fetching,"Retrofit edit preview fetching

Change-Id: I653f2c4f68a10001209d7bac8e11226fb0c90ef1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477517379,1477589331,3c6507b3c46f96cb995c927561d21d78af9fed26
1ec66d2912ea0a48e1225088d304ed501a39d678,1ec66d29,Description editing UX.,"Description editing UX.

...with TODO annotations of where things will plug into.

Bug: T148201
Change-Id: I77f6f191020ff26cfc3067aa192254ff43fdd306
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1477517958,1477588851,c44d80956a88c45530cd33d71fa33fc75082ac40
3c6507b3c46f96cb995c927561d21d78af9fed26,3c6507b3,Retrofit Wikitext fetching,"Retrofit Wikitext fetching

Change-Id: I6422723877f09113d3da96aa76ae8b974d057492
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477579945,1477582038,c44d80956a88c45530cd33d71fa33fc75082ac40
d90f71a5d2aafca0ef01c4576c7012497e77200a,d90f71a5,Fixes T143732. Make Article horizontal divider RTL aware.,"Fixes T143732. Make Article horizontal divider RTL aware.

I tried multiple approaches but this approach seemed to be the simplest one that worked. Also included changes suggested in Gerrit review.

Bug: T143732
Change-Id: I33a04b001242b7e71306e74c79f9cf3aa03344ad
",,,,Anirudh S,anirudh24seven@gmail.com,Anirudh S,anirudh24seven@gmail.com,1477469487,1477548224,c44d80956a88c45530cd33d71fa33fc75082ac40
c44d80956a88c45530cd33d71fa33fc75082ac40,c44d8095,"Merge ""Create embryo description editing activity.""","Merge ""Create embryo description editing activity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477529895,1477529895,"774fbad8fe4298e54bc7e713f406d49ce977baeb,6843cd98d0210ab38f42422948f9c4856a0b01ea"
774fbad8fe4298e54bc7e713f406d49ce977baeb,774fbad8,Add CaptchaClientTest,"Add CaptchaClientTest

Also defined equals() and hashCode() for EditingResult and subclasses
including CaptchaResult.

Change-Id: I05a31d81a6a717d932d74ba7c14b64fc71bea4df
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477503710,1477519474,83576dac139ea67c1c5495f5b809d72b4625e9c8
83576dac139ea67c1c5495f5b809d72b4625e9c8,83576dac,"Merge ""Retrofit Captcha handling""","Merge ""Retrofit Captcha handling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477517107,1477517107,"19636f4c9a631d69cb1dde0053343a0d9fea0955,94c08646c5657e8dcfdf3bd6febf6975b8e4210d"
94c08646c5657e8dcfdf3bd6febf6975b8e4210d,94c08646,Retrofit Captcha handling,"Retrofit Captcha handling

Change-Id: I8c5e024f91bcf1a94fbc6dc33212ff55cea554e1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1477493202,1477516721,0fe22a478f71a4b0417e8cfcc295a177447fc952
19636f4c9a631d69cb1dde0053343a0d9fea0955,19636f4c,"Merge ""Wikipedia Zero system notifications.""","Merge ""Wikipedia Zero system notifications.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477515247,1477515247,"0fe22a478f71a4b0417e8cfcc295a177447fc952,0b71ab2821b31de1b9abbc605b246b489f096656"
6843cd98d0210ab38f42422948f9c4856a0b01ea,6843cd98,Create embryo description editing activity.,"Create embryo description editing activity.

This makes article descriptions clickable (by adding a ClickableSpan to
the relevant text portion).
This also creates a blank activity that will be the container for the
description editing workflow. The activity is not entirely blank: it
accepts a PageTitle parameter, which feeds it with the requested page
title, which will contain its current description.

Bug: T146639
Bug: T146640
Change-Id: Iaa62a901d93376cf743bfd933db0b6ea47be658c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1477497208,1477505076,33d5827cdbf87c8b7e2e123f06092713c2104e17
0fe22a478f71a4b0417e8cfcc295a177447fc952,0fe22a47,"Merge ""Update and improve widget designs.""","Merge ""Update and improve widget designs.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477500175,1477500175,"33d5827cdbf87c8b7e2e123f06092713c2104e17,ccf2292441d1debd02937a9d359e264e0e458169"
0b71ab2821b31de1b9abbc605b246b489f096656,0b71ab28,Wikipedia Zero system notifications.,"Wikipedia Zero system notifications.

Implemented according to the acceptance criteria in the associated task.
Note: the verbiage in the notification and the welcome dialog is subject
to tweaks from Comms.

Bug: T135450
Change-Id: I40f1f1d25ac8cf67e108b16424d5cf617e667172
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1476988053,1477498697,33d5827cdbf87c8b7e2e123f06092713c2104e17
ccf2292441d1debd02937a9d359e264e0e458169,ccf22924,Update and improve widget designs.,"Update and improve widget designs.

- There's no reason for the Search widget to take up 4x1 amount of space
  on the screen, so I made it 1x1 by default, but also made it resizable.
- The Featured Article widget still takes up 4x1 space, but is now
  resizable to take up less space, with the text becoming ellipsized if
  necessary.
- Both widgets now use the package icon.

Bug: T100047
Bug: T128356
Change-Id: I904c5d05cb734652ba97814a489f50c16bb04389
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1477486915,1477498566,78dc0a75ae9dfaab9afc9a584351d9b1cfa34b89
33d5827cdbf87c8b7e2e123f06092713c2104e17,33d5827c,"Merge ""Hygiene: remove unused PageCache put callback code""","Merge ""Hygiene: remove unused PageCache put callback code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477489513,1477489513,"a114286bc9dd7d9218d26c3284f7adaad4803517,a09df9dc91cebd67357924306dae4ab771a60324"
a114286bc9dd7d9218d26c3284f7adaad4803517,a114286b,"Merge ""Don't lose the page when refreshing offline""","Merge ""Don't lose the page when refreshing offline""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477488307,1477488307,"78dc0a75ae9dfaab9afc9a584351d9b1cfa34b89,84800be8c521ac5fbaa607f824836821ff6f0314"
78dc0a75ae9dfaab9afc9a584351d9b1cfa34b89,78dc0a75,"Merge ""Request more search suggestions for filtering""","Merge ""Request more search suggestions for filtering""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477423443,1477423443,"bc0016b31f9d152e507eac30ae7b77ff1e14582d,fca88753c329009354e6abdbc6d70a1732208535"
bc0016b31f9d152e507eac30ae7b77ff1e14582d,bc0016b3,"Merge ""Hygiene: minor clean up of TranslationTests""","Merge ""Hygiene: minor clean up of TranslationTests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477420520,1477420520,"956a7b7af3d89d589a7d687e559be241af744a96,dfa5e3438497660461bb30b4b1416f9bd2e74800"
956a7b7af3d89d589a7d687e559be241af744a96,956a7b7a,"Merge ""Hygiene: remove TestDummyActivity""","Merge ""Hygiene: remove TestDummyActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477420519,1477420519,"af693ec69eb760e1542fa6406f02faff49e5edfe,7f90e63d4a48e35fcbebcb0a8d4abf04297c92af"
af693ec69eb760e1542fa6406f02faff49e5edfe,af693ec6,"Merge ""Hygiene: update LanguageVariantTest to plain JUnit""","Merge ""Hygiene: update LanguageVariantTest to plain JUnit""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477420518,1477420518,"8d6616a5c72a1281f3180b7119449bd5dd9eb97d,2effe8532736a2fe9e8b4ddb2d45f76eaeccb4ea"
8d6616a5c72a1281f3180b7119449bd5dd9eb97d,8d6616a5,"Merge ""Hygiene: convert LanguageVariantTests to JUnit 4""","Merge ""Hygiene: convert LanguageVariantTests to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477420039,1477420039,"2c10896cfd6411e8d90870c9b79128b244aac30d,07c9d1b0fca42411bbf5c4d31e1eff3273e94c1a"
2c10896cfd6411e8d90870c9b79128b244aac30d,2c10896c,"Merge ""Hygiene: convert FullSearchArticle*Test to JUnit 4""","Merge ""Hygiene: convert FullSearchArticle*Test to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477419910,1477419910,"365359efc4fb1faebbb76798e0b5869eda5d9392,a2bdc34c71e75159edb951c6e6599802c9f04473"
365359efc4fb1faebbb76798e0b5869eda5d9392,365359ef,"Merge ""Enforce default Android Studio import ordering""","Merge ""Enforce default Android Studio import ordering""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477417934,1477417934,"ed016acc7f08275d8f439129e8cffd2de97e1b8c,c21a772eeee04d61d6ccc58397129b939e2493be"
ed016acc7f08275d8f439129e8cffd2de97e1b8c,ed016acc,Hygiene: update SaneAsyncTaskTest to JUnit 4,"Hygiene: update SaneAsyncTaskTest to JUnit 4

I thought this test was causing problems when I looked at the log but it
was actually expected to throw (and log) Exceptions. Upgrade to JUnit 4
and clean up code where easy. Also, use UI thread when referring to
caller since AsyncTasks require execute() to be called on the main
thread.

Change-Id: Ie7fb15a9837f8ff71e76531c9c19ec75f9841496
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476917912,1477413654,5d26eabb49bc1d01a6822d59b33a493028f18312
c21a772eeee04d61d6ccc58397129b939e2493be,c21a772e,Enforce default Android Studio import ordering,"Enforce default Android Studio import ordering

Also prohibit wildcard star imports.

Change-Id: I5145cd2a0ab2d7e94cd19253efe1add6f67fb959
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477068199,1477413471,5d26eabb49bc1d01a6822d59b33a493028f18312
5d26eabb49bc1d01a6822d59b33a493028f18312,5d26eabb,"Merge ""Upgrade minimum Android version to v4.1 (API 16)""","Merge ""Upgrade minimum Android version to v4.1 (API 16)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477413029,1477413029,"fdc71690d3093597cc86d299f884d195eb35aed2,45c0d56c7f4b53b8b333f64999a331ed15253992"
fdc71690d3093597cc86d299f884d195eb35aed2,fdc71690,"Merge ""Hygiene: remove adb-setup.bash""","Merge ""Hygiene: remove adb-setup.bash""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477412367,1477412367,"aae7c489b1b6dea811bfba3000c4415ea0c3b0a0,fe81f26e67e63b9b3896d1447d47c0471ea30195"
45c0d56c7f4b53b8b333f64999a331ed15253992,45c0d56c,Upgrade minimum Android version to v4.1 (API 16),"Upgrade minimum Android version to v4.1 (API 16)

Upgrade minSdkVersion to 16. No references were found to
ICE_CREAM_SANDWICH_MR1. Also bump the versionCode up by 20 to allow for
critical backfixes.

Bug: T147010
Change-Id: I59ad6f8423be7e0cf3f21049de9d0757228afea6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477411863,1477411863,aae7c489b1b6dea811bfba3000c4415ea0c3b0a0
aae7c489b1b6dea811bfba3000c4415ea0c3b0a0,aae7c489,"Merge ""Fixes T134906. Prevent No matches found message from overlapping.""","Merge ""Fixes T134906. Prevent No matches found message from overlapping.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477410714,1477410714,"b88c4b97dbc4585abe4a0b739338986c4d3d6a20,e3b421a93806162f128b4e94aacd5a3a3d2f6b41"
e3b421a93806162f128b4e94aacd5a3a3d2f6b41,e3b421a9,Fixes T134906. Prevent No matches found message from overlapping.,"Fixes T134906. Prevent No matches found message from overlapping.

Moved the TextView into the shared layout of the list itself, as suggested.

Bug: T134906
Change-Id: I9ee553fce5b3862ef04494dac687d4adbed001eb
",,,,Anirudh S,anirudh24seven@gmail.com,Stephen Niedzielski,stephen@niedzielski.com,1477379083,1477410280,8aca5be2eafcdde9fe639f10b50b47b8f48d0ab5
b88c4b97dbc4585abe4a0b739338986c4d3d6a20,b88c4b97,"Merge ""Hygiene: convert SuggestionsTaskTest to JUnit 4""","Merge ""Hygiene: convert SuggestionsTaskTest to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477410145,1477410145,"8d27741aa2fb7f281baa5165e2c457199bf19876,23f503ca59b81a75b0b5d45f51407a7c724ea981"
8d27741aa2fb7f281baa5165e2c457199bf19876,8d27741a,"Merge ""Removed inconsistency between ""Similar Titles"" and ""Similar Pages Bug: T130221""","Merge ""Removed inconsistency between ""Similar Titles"" and ""Similar Pages Bug: T130221""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477410076,1477410076,"45d904257b53218cc114e509ecb9e2ea288e7890,8a2cdffdedfa19d81b45caedc1743863694a85bf"
45d904257b53218cc114e509ecb9e2ea288e7890,45d90425,"Merge ""Hygiene: convert SectionTest to plain JUnit""","Merge ""Hygiene: convert SectionTest to plain JUnit""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477409668,1477409668,"5d93229d4da38021e6ea6a4fd7fbaee846a04712,326d3d23298c3c42425e752a5b1333bfc9c23a72"
5d93229d4da38021e6ea6a4fd7fbaee846a04712,5d93229d,"Merge ""Hygiene: convert SectionTest to JUnit 4""","Merge ""Hygiene: convert SectionTest to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477409391,1477409391,"9d7487d95bc8dc3620746abaf2154a9e82d93255,56e4dd3f9dfa5fd677ebe0185141864902caa3b6"
9d7487d95bc8dc3620746abaf2154a9e82d93255,9d7487d9,"Merge ""Fixes T146725. Theme change will apply to main screen now.""","Merge ""Fixes T146725. Theme change will apply to main screen now.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477409347,1477409347,"b54cbdccce62f6984c80fbde1fa4a476f22730a0,645c5b847b3a84bb5e1cea0a2100f09a2bb4e210"
645c5b847b3a84bb5e1cea0a2100f09a2bb4e210,645c5b84,Fixes T146725. Theme change will apply to main screen now.,"Fixes T146725. Theme change will apply to main screen now.

Added Event listener to MainActivity so that it can recreate itself when theme changes. Similar solution as that of PageActivity.

Bug: T146725

Change-Id: I1297bf59e83eb81182c7b994871334117183ba39
",,,,Anirudh S,anirudh24seven@gmail.com,Stephen Niedzielski,stephen@niedzielski.com,1477385314,1477408982,8aca5be2eafcdde9fe639f10b50b47b8f48d0ab5
b54cbdccce62f6984c80fbde1fa4a476f22730a0,b54cbdcc,"Merge ""Hygiene: convert NearbyUnitTests to plain JUnit""","Merge ""Hygiene: convert NearbyUnitTests to plain JUnit""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477407499,1477407499,"b23e77e63e992ed671dc96eb7360a945efe71164,437798bc2f3632b7416a072e215bd6804a12ab3c"
b23e77e63e992ed671dc96eb7360a945efe71164,b23e77e6,"Merge ""Hygiene: convert NearbyUnitTests to JUnit 4""","Merge ""Hygiene: convert NearbyUnitTests to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477406656,1477406656,"1c656d92f0250295bb689be4082dc7c2558be3e1,b8d11e436534b0e705cc1a0e339b3dade421dead"
1c656d92f0250295bb689be4082dc7c2558be3e1,1c656d92,"Merge ""Hygiene: update FetchSectionWikitextTaskTest""","Merge ""Hygiene: update FetchSectionWikitextTaskTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477406305,1477406305,"a5a10a7019758570915ae520c8a050709ca8acc1,c15c1272b38ae623e46f10c687c68fcfc8d02ac8"
a5a10a7019758570915ae520c8a050709ca8acc1,a5a10a70,"Merge ""Hygiene: convert WikiSiteTest to plain JUnit""","Merge ""Hygiene: convert WikiSiteTest to plain JUnit""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477405634,1477405634,"a6980751f3e40c7752ab58b1de1a0938dc213767,7cbd9323d9fefbfc360696b1fde15644daabc2c4"
a6980751f3e40c7752ab58b1de1a0938dc213767,a6980751,"Merge ""Hygiene: convert WikiSiteTest to JUnit 4""","Merge ""Hygiene: convert WikiSiteTest to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477404290,1477404290,"7ea79a64079ee31ce56170a3e9270da3d34731ae,7aa3027a651e581c38ba8571e22044ab21b0dd10"
7ea79a64079ee31ce56170a3e9270da3d34731ae,7ea79a64,"Merge ""Hygiene: convert SaneAsyncTaskTest to JUnit 4""","Merge ""Hygiene: convert SaneAsyncTaskTest to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477403685,1477403685,"8aca5be2eafcdde9fe639f10b50b47b8f48d0ab5,ed9dc841521f0c58723cf6e4a2351d0514be35eb"
8aca5be2eafcdde9fe639f10b50b47b8f48d0ab5,8aca5be2,"Merge ""Hygiene: suppress autoMirrored API level warnings""","Merge ""Hygiene: suppress autoMirrored API level warnings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477352245,1477352245,"c31dedb55c11fc18f5125eb66598dd2be4b5de75,ee044901a981cf0056b9bcf23b88d6eb886e6e3f"
fca88753c329009354e6abdbc6d70a1732208535,fca88753,Request more search suggestions for filtering,"Request more search suggestions for filtering

Search suggestions are filtered which may cause less than the optimal
number to be shown. Request more results so filtering is less likely to
affect the total. Side effect fix for SuggestionsTaskTest.

Change-Id: If08d86fbca7afcbbcd2a2a2eb356edc4cd957cee
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477342358,1477342358,c31dedb55c11fc18f5125eb66598dd2be4b5de75
c31dedb55c11fc18f5125eb66598dd2be4b5de75,c31dedb5,"Merge ""Hygiene: remove redundant method""","Merge ""Hygiene: remove redundant method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477340312,1477340312,"a9ef5d12b9e1db46b2d00ccc2fe4842d3617f6cd,0f02e5e571cc77b034bd80b499c0ddb81146cc51"
a9ef5d12b9e1db46b2d00ccc2fe4842d3617f6cd,a9ef5d12,"Merge ""Hygiene: remove unused colors and dimens""","Merge ""Hygiene: remove unused colors and dimens""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477339925,1477339925,"5f89cb0d0105724d98a29772811349ac8fcfad1f,df120f72399ab306366d816dec2aaa31e7a2cbd7"
a09df9dc91cebd67357924306dae4ab771a60324,a09df9dc,Hygiene: remove unused PageCache put callback code,"Hygiene: remove unused PageCache put callback code

Chip away at PageCache by removing unused callback functionality. Also,
replace usages of Log with L, add a couple @NonNull / @Nullable
annotations, and make a method private.

Change-Id: I80ccb18d6a3a8aa9714ae9114e3704bd2c877452
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476909789,1477331390,84800be8c521ac5fbaa607f824836821ff6f0314
84800be8c521ac5fbaa607f824836821ff6f0314,84800be8,Don't lose the page when refreshing offline,"Don't lose the page when refreshing offline

This patch removes the no cache option from the page data client and
would be a helpful first step in transitioning to Retrofit caching.

Bug: T148657
Change-Id: I2a47a8f6730e62dc01ea4d33229fa14d95ecacc7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476903331,1477331322,b6e821e2db495719203b167d3c2037065fab990f
dfa5e3438497660461bb30b4b1416f9bd2e74800,dfa5e343,Hygiene: minor clean up of TranslationTests,"Hygiene: minor clean up of TranslationTests

Replace System.out Log.* logging with L and add a couple helper methods.

Change-Id: Iab363b83bbb246f659d2b86482e50409abd9bd15
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477020937,1477330786,7f90e63d4a48e35fcbebcb0a8d4abf04297c92af
7f90e63d4a48e35fcbebcb0a8d4abf04297c92af,7f90e63d,Hygiene: remove TestDummyActivity,"Hygiene: remove TestDummyActivity

This class is no longer needed.

Change-Id: I87fcd2e116daf8fc33da7ae4da3bf6874e281f31
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477018768,1477330780,2effe8532736a2fe9e8b4ddb2d45f76eaeccb4ea
2effe8532736a2fe9e8b4ddb2d45f76eaeccb4ea,2effe853,Hygiene: update LanguageVariantTest to plain JUnit,"Hygiene: update LanguageVariantTest to plain JUnit

Convert LanguageVariantTests to plain JUnit and update name.

Change-Id: I05d09340499004f3dcdd2604c0d7f5d0742d68ba
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477018648,1477330775,07c9d1b0fca42411bbf5c4d31e1eff3273e94c1a
07c9d1b0fca42411bbf5c4d31e1eff3273e94c1a,07c9d1b0,Hygiene: convert LanguageVariantTests to JUnit 4,"Hygiene: convert LanguageVariantTests to JUnit 4

Change-Id: I5c36baa533dd81f78439c8c350d8fd33b5935265
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477018564,1477330770,a2bdc34c71e75159edb951c6e6599802c9f04473
a2bdc34c71e75159edb951c6e6599802c9f04473,a2bdc34c,Hygiene: convert FullSearchArticle*Test to JUnit 4,"Hygiene: convert FullSearchArticle*Test to JUnit 4

Convert FullSearchArticlesTaskTest to JUnit 4.

Change-Id: I93187a5b7ceffb54160b21157afd094a4d7c57f1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477018389,1477330706,23f503ca59b81a75b0b5d45f51407a7c724ea981
23f503ca59b81a75b0b5d45f51407a7c724ea981,23f503ca,Hygiene: convert SuggestionsTaskTest to JUnit 4,"Hygiene: convert SuggestionsTaskTest to JUnit 4

Change-Id: I3898924b0866baf5ddf97d8d1ed59c7c80fac7f1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477018149,1477330700,326d3d23298c3c42425e752a5b1333bfc9c23a72
326d3d23298c3c42425e752a5b1333bfc9c23a72,326d3d23,Hygiene: convert SectionTest to plain JUnit,"Hygiene: convert SectionTest to plain JUnit

Change-Id: I407a59a9508aa8fe2310071bce74f605bd8e65ea
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477017581,1477330694,56e4dd3f9dfa5fd677ebe0185141864902caa3b6
56e4dd3f9dfa5fd677ebe0185141864902caa3b6,56e4dd3f,Hygiene: convert SectionTest to JUnit 4,"Hygiene: convert SectionTest to JUnit 4

Change-Id: I0c4e85079bd906e20a2708e5342091b2c6d90700
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477017479,1477330689,437798bc2f3632b7416a072e215bd6804a12ab3c
437798bc2f3632b7416a072e215bd6804a12ab3c,437798bc,Hygiene: convert NearbyUnitTests to plain JUnit,"Hygiene: convert NearbyUnitTests to plain JUnit

Convert NearbyUnitTests to plain JUnit and update name.

Change-Id: I4633c30c737b9d6f947d6e37db246644ef478f14
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477017341,1477330684,b8d11e436534b0e705cc1a0e339b3dade421dead
b8d11e436534b0e705cc1a0e339b3dade421dead,b8d11e43,Hygiene: convert NearbyUnitTests to JUnit 4,"Hygiene: convert NearbyUnitTests to JUnit 4

Change-Id: Iaa03df48677e5708067cbf1497d6e71e180fb0eb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477017073,1477330674,c15c1272b38ae623e46f10c687c68fcfc8d02ac8
c15c1272b38ae623e46f10c687c68fcfc8d02ac8,c15c1272,Hygiene: update FetchSectionWikitextTaskTest,"Hygiene: update FetchSectionWikitextTaskTest

Convert FetchSectionWikitextTaskTest to JUnit 4.

Change-Id: Ia9c92647dc64a26217e8df4376c75d8317ef3fc5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477016562,1477330631,7cbd9323d9fefbfc360696b1fde15644daabc2c4
7cbd9323d9fefbfc360696b1fde15644daabc2c4,7cbd9323,Hygiene: convert WikiSiteTest to plain JUnit,"Hygiene: convert WikiSiteTest to plain JUnit

Change-Id: I3a73c29356ca34c95954960ece9c79826e683d08
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477016345,1477330626,7aa3027a651e581c38ba8571e22044ab21b0dd10
7aa3027a651e581c38ba8571e22044ab21b0dd10,7aa3027a,Hygiene: convert WikiSiteTest to JUnit 4,"Hygiene: convert WikiSiteTest to JUnit 4

Change-Id: I356fa846e7263dda66ad7251e6a413f73f6bed8b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477016253,1477330620,ed9dc841521f0c58723cf6e4a2351d0514be35eb
ed9dc841521f0c58723cf6e4a2351d0514be35eb,ed9dc841,Hygiene: convert SaneAsyncTaskTest to JUnit 4,"Hygiene: convert SaneAsyncTaskTest to JUnit 4

Change-Id: Ib24132fdb203ecb5cabf580998301651b007528f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477015870,1477330615,5f89cb0d0105724d98a29772811349ac8fcfad1f
5f89cb0d0105724d98a29772811349ac8fcfad1f,5f89cb0d,Hygiene: convert ParcelableTest to plain JUnit,"Hygiene: convert ParcelableTest to plain JUnit

Change-Id: I0d46e153b1c3cbde02e4c2bce40d0e9b53e9a2fa
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477015309,1477330609,fa7beaf6615754b9eaff70ed83898173facd1fdf
fa7beaf6615754b9eaff70ed83898173facd1fdf,fa7beaf6,Hygiene: convert ParcelableTest to JUnit 4,"Hygiene: convert ParcelableTest to JUnit 4

Change-Id: I1838c694c92e230a7c07c5a43f62738f3a9f10ac
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477015171,1477330603,81388beb6919224e8accb413c4ab4de806b0d688
81388beb6919224e8accb413c4ab4de806b0d688,81388beb,Hygiene: consolidate PageTests into PageTest,"Hygiene: consolidate PageTests into PageTest

Move PageTests into PageTest and convert to plain JUnit.

Change-Id: Ia1cfbd35e8bd05c5f2e083ccba82145947c870ed
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477014823,1477330547,71ec0f3ff30e10953f35db9d33e0386aef41838b
71ec0f3ff30e10953f35db9d33e0386aef41838b,71ec0f3f,Hygiene: update test packaging and naming,"Hygiene: update test packaging and naming

Move tests to match subject packaging and naming.

Change-Id: Ife248bd34b2fe60412d5f2e17edab0bd24fcf6b7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477014581,1477330539,b6e821e2db495719203b167d3c2037065fab990f
0f02e5e571cc77b034bd80b499c0ddb81146cc51,0f02e5e5,Hygiene: remove redundant method,"Hygiene: remove redundant method

getDimensionPixelOffset truncates whereas getDimensionPixelSize rounds,
which is more intuitive. Additioanlly, *Size guarantees the result will
be nonzero if the base dp input value is nonzero which is very
desirable. Using both is surprising and seems like a bug. Replace
*Offset with *Size.

Change-Id: Ie90a7dbbeef57b35fc38936f24a2c55f00224fcf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476987280,1477324291,2fc4dff6a21445fdaeb3f1110855591356dc52bf
df120f72399ab306366d816dec2aaa31e7a2cbd7,df120f72,Hygiene: remove unused colors and dimens,"Hygiene: remove unused colors and dimens

Change-Id: Ib34a23cf9f8cb2ab974ef4cfd8b3aaf3a8b1df63
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476987207,1477324262,2fc4dff6a21445fdaeb3f1110855591356dc52bf
b6e821e2db495719203b167d3c2037065fab990f,b6e821e2,Hygiene: suppress lints for lib resource overrides,"Hygiene: suppress lints for lib resource overrides

HockeyApp library strings and Onboarding tool tip drawables are
overridden but Lint can't detect that and emits a warning. There are
hundreds of string translations and so hundreds of warnings. Suppress
the UnusedResources warning for only these resources.

Change-Id: I48de1f9ac92cfb74535bcef63d92513291f52a60
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476986382,1477324208,2fc4dff6a21445fdaeb3f1110855591356dc52bf
2fc4dff6a21445fdaeb3f1110855591356dc52bf,2fc4dff6,"Merge ""Add snackbar in nearby fragment when location is disabled""","Merge ""Add snackbar in nearby fragment when location is disabled""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477324079,1477324079,"651abcb2b6538cc37f151db26f58fc15588941db,5c4cb7ead43d2b07982a3857c5c36c0a8780231b"
651abcb2b6538cc37f151db26f58fc15588941db,651abcb2,"Merge ""Hide password repeat field when password is shown""","Merge ""Hide password repeat field when password is shown""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477323401,1477323401,"3ab1bf61873351b8d07c82bbb3e5a27590078514,8f4b612adcaac68c0cedce967889665612546fef"
8f4b612adcaac68c0cedce967889665612546fef,8f4b612a,Hide password repeat field when password is shown,"Hide password repeat field when password is shown

Don't show the create account password confirmation field when the user
has made the password visible.

Bug: T147086
Change-Id: Ic99d0c5b9211b5c8df9398cf5e6dc76bcd14b548
",,,,Mary,mr.sheikhha@gmail.com,Stephen Niedzielski,stephen@niedzielski.com,1477254297,1477322760,d01c1cf5c7631f8d692d3a9d6ed4c4129accfe55
5c4cb7ead43d2b07982a3857c5c36c0a8780231b,5c4cb7ea,Add snackbar in nearby fragment when location is disabled,"Add snackbar in nearby fragment when location is disabled

The user is being prompted to enable location services when attempting
to use the ""Nearby"" feature. The prompt appears in the form of
snackbar.

Bug: T142023
Change-Id: I0941067b3bad850c06027e4aed48e98eb98b2496
",,,,OdysseasKr,OdysseasKr@users.noreply.github.com,OdysseasKr,odysseaskrst@gmail.com,1476990128,1477322423,89bea6f59cc3657f3a5249fbc5a806d11527147e
3ab1bf61873351b8d07c82bbb3e5a27590078514,3ab1bf61,"Merge ""Hygiene: Reorder import statements in alphabetical manner""","Merge ""Hygiene: Reorder import statements in alphabetical manner""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477321789,1477321789,"12718bbf172025560ebe0fc66d9913fb451e81d9,926067ebeb8ec617f87224bc8754131a6b5941c1"
926067ebeb8ec617f87224bc8754131a6b5941c1,926067eb,Hygiene: Reorder import statements in alphabetical manner,"Hygiene: Reorder import statements in alphabetical manner

Ran Android Studio's 'Optimize Imports' feature in all classes to cleanup & reorder imports. This will prevent unnecessary diff lines in the future when someone runs 'Optimize Imports'.

Change-Id: Ib20cddd539c04780b92b464fdb63ad1a650dd159
",,,,Anirudh S,anirudh24seven@gmail.com,Stephen Niedzielski,stephen@niedzielski.com,1477059966,1477321432,f4ff49f92fa12d193e29d80cc928de56454844ae
12718bbf172025560ebe0fc66d9913fb451e81d9,12718bbf,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4eec32d23eaa44ca9b816acb1c142c525e2a4f76
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477319919,1477320541,f4ff49f92fa12d193e29d80cc928de56454844ae
f4ff49f92fa12d193e29d80cc928de56454844ae,f4ff49f9,"Merge ""Hygiene: consolidate runOnMainSync() helper method""","Merge ""Hygiene: consolidate runOnMainSync() helper method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477319070,1477319070,"02b69e79706679ed17753751965caced5fae7920,fd9ba097f6a26f4b98285d68bcb2a15987808806"
02b69e79706679ed17753751965caced5fae7920,02b69e79,"Merge ""Hygiene: rename GetDescriptionsTask test & package""","Merge ""Hygiene: rename GetDescriptionsTask test & package""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477317384,1477317384,"35adecb24a172b4ad0ae67af095303bf761acce6,18d17f3e3a1530b30ade389bdb1c1ff44d48e3e7"
35adecb24a172b4ad0ae67af095303bf761acce6,35adecb2,"Merge ""Hygiene: update GetDescriptionsTaskTest to JUnit 4""","Merge ""Hygiene: update GetDescriptionsTaskTest to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477317155,1477317155,"9470d56076f8a6cd991dfa9b70555cc4c30c404d,e69ea8e26f01936d847682ff608f6c91c0264df6"
9470d56076f8a6cd991dfa9b70555cc4c30c404d,9470d560,"Merge ""Upgrade to screenshot-tests-for-android v0.4.2""","Merge ""Upgrade to screenshot-tests-for-android v0.4.2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477316955,1477316955,"8584aed8a14d0a8c05bc8077045255b79113c58f,7015d2730e57df0d9181145a6da4699e819b4586"
8584aed8a14d0a8c05bc8077045255b79113c58f,8584aed8,"Merge ""Add content descriptions to article toolbar""","Merge ""Add content descriptions to article toolbar""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477316541,1477316541,"d01c1cf5c7631f8d692d3a9d6ed4c4129accfe55,ded897b59db064180811012967cc4e0d7b450b51"
d01c1cf5c7631f8d692d3a9d6ed4c4129accfe55,d01c1cf5,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ibf2668d4a91ada858222c4dca4218f7d6af33dcb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477089986,1477090607,a71c024d9605b07925d4e2ec1ecd6983c775c378
a71c024d9605b07925d4e2ec1ecd6983c775c378,a71c024d,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477089660,1477089660,"260ca06f01f37030f4ed3838029d9d575eff5ebb,c7cbba285fbcd968c591b24e61a522e7cc7f5716"
260ca06f01f37030f4ed3838029d9d575eff5ebb,260ca06f,"Merge ""Hygiene: make Uri Exception handling more granular""","Merge ""Hygiene: make Uri Exception handling more granular""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477077993,1477077993,"ebceb2d1f53d89d0cdad7a822d58e812704d215f,a8e945142482a9da6742b99ea767297d7918eb6c"
ebceb2d1f53d89d0cdad7a822d58e812704d215f,ebceb2d1,"Merge ""Use Chinese script when available, not country""","Merge ""Use Chinese script when available, not country""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477077577,1477077577,"bc97f06c8f2c5cf72e18f1d32d44a8f82daf011d,b1aaa7c83281451a2d9205ba49934ca1f60a33c8"
bc97f06c8f2c5cf72e18f1d32d44a8f82daf011d,bc97f06c,"Merge ""Workaround EditTaskTest warning test""","Merge ""Workaround EditTaskTest warning test""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477075632,1477075632,"2bc687c735bf07b0e10911192a8776ef912ab45c,3d9bfce07f210135c41e88f87766ae221d13febf"
2bc687c735bf07b0e10911192a8776ef912ab45c,2bc687c7,"Merge ""Fix abuse filter test""","Merge ""Fix abuse filter test""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477075607,1477075607,"f4fe380d74c3ae7c806e234180f54c0721ba6058,55baedf8dd53c8fd891e93a4696457c5bbbc70ba"
f4fe380d74c3ae7c806e234180f54c0721ba6058,f4fe380d,"Merge ""Say ""today"" when the date on the card is today""","Merge ""Say ""today"" when the date on the card is today""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1477065337,1477065337,"9a8ab93baf34a58aa32c5129004b2798c0255338,e9e32a325e79422135451d5f6d874171ffaf53a2"
e9e32a325e79422135451d5f6d874171ffaf53a2,e9e32a32,"Say ""today"" when the date on the card is today","Say ""today"" when the date on the card is today

This is supposed to prevent ""0 days ago"" from appearing
on the main screen feed.
It makes more sense to just say ""today"".

Bug: T148746
Change-Id: I77b02d435cdd5124119172883e91f32a48371486
",,,,Amire80,amir.aharoni@mail.huji.ac.il,Amire80,amir.aharoni@mail.huji.ac.il,1476994185,1477063443,7e171344c09df1d2498f6636a99ff8b30161ae3a
9a8ab93baf34a58aa32c5129004b2798c0255338,9a8ab93b,Mark required (@NonNull) Gson POJO fields @Required,"Mark required (@NonNull) Gson POJO fields @Required

N.B. I've only included feed and definitions endpoint classes here.
That's because all of the mobile-sections* POJOs that have nullability
annotations have only @Nullable fields.

Bug: T145075
Change-Id: I67aaf4585e5cff4dd094865b50e6907af3e0f243
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1476989516,1477058108,8c6d23ab2817544dab03d4c1dae0b5a4e1bc47cf
8c6d23ab2817544dab03d4c1dae0b5a4e1bc47cf,8c6d23ab,Add tests for field checking with the new @Require annotation,"Add tests for field checking with the new @Require annotation

Bug: T145075
Change-Id: I2f5add17352ae234ea860be1c7f291909eced67d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1476989470,1477057829,12f788df261aead6670a10d358c18d0e8036429e
fd9ba097f6a26f4b98285d68bcb2a15987808806,fd9ba097,Hygiene: consolidate runOnMainSync() helper method,"Hygiene: consolidate runOnMainSync() helper method

Consolidate runOnMainSync() helper method for Android instrumentation
tests.

Change-Id: I94b799ffc10b1c2157012904e1abb7ee6571f1bb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477010954,1477012107,18d17f3e3a1530b30ade389bdb1c1ff44d48e3e7
18d17f3e3a1530b30ade389bdb1c1ff44d48e3e7,18d17f3e,Hygiene: rename GetDescriptionsTask test & package,"Hygiene: rename GetDescriptionsTask test & package

Move org.wikipedia.test.GetDescriptionsTaskTests to
org.wikipedia.wikidata.GetDescriptionsTaskTest. The test name and
package should match the subject.

Change-Id: I1beb17e0bca8db6d734726c4b8ba86360283c316
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477004679,1477011410,e69ea8e26f01936d847682ff608f6c91c0264df6
e69ea8e26f01936d847682ff608f6c91c0264df6,e69ea8e2,Hygiene: update GetDescriptionsTaskTest to JUnit 4,"Hygiene: update GetDescriptionsTaskTest to JUnit 4

Change-Id: I8d21dadb00771409b311eb095e179754ede5de2e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477004406,1477011410,12f788df261aead6670a10d358c18d0e8036429e
12f788df261aead6670a10d358c18d0e8036429e,12f788df,Hygiene: separate large numbers by thousands,"Hygiene: separate large numbers by thousands

Change-Id: Iabc12cea69f3b2b9cc664e2701785ea4fd019d9a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477003937,1477003937,eafddf059658b27c54962076131c9c5626407121
7015d2730e57df0d9181145a6da4699e819b4586,7015d273,Upgrade to screenshot-tests-for-android v0.4.2,"Upgrade to screenshot-tests-for-android v0.4.2

Upgrade to screenshot-tests-for-android v0.4.2[0] which advertises
""Support for Android gradle plugin 2.2.0"". Also update all screenshots
for the new library and update CI emulator configuration. The wiki has
also been revised[1].

One screenshot was removed because the test was updated to remove a
configuration previously but the screenshot wasn't accounted for then.

[0] https://github.com/facebook/screenshot-tests-for-android/blob/master/CHANGELOG
[1] https://www.mediawiki.org/wiki/Wikimedia_Apps/Team/Wikipedia_Android_app_hacking#Screenshot_tests

Change-Id: I2b3d7855cf2ec130ba44cceaf3a18ffd88086eb6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477002719,1477003063,eafddf059658b27c54962076131c9c5626407121
3d9bfce07f210135c41e88f87766ae221d13febf,3d9bfce0,Workaround EditTaskTest warning test,"Workaround EditTaskTest warning test

AbuseFilter/94 is currently returning abusefilter-disallowed instead of
abusefilter-warning. EditTask needs to be reworked to a data client that
can consume mock data. EditTask in its current state is at a point of
diminishing returns so for now just check against errors and add a todo.

Change-Id: I068da495c0b2efb1bb50f1b010b38af711c3048c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477001552,1477001552,55baedf8dd53c8fd891e93a4696457c5bbbc70ba
55baedf8dd53c8fd891e93a4696457c5bbbc70ba,55baedf8,Fix abuse filter test,"Fix abuse filter test

testAbuseFilterTriggerStopOnArbitraryErrorCode() tests for arbitrary
error codes which are interpreted as TYPE_ERROR. This tests seems to
have been mistakenly written to check against TYPE_WARNING.

Change-Id: I2d60a0215c742052fd20ca032318217fd9e3fb25
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1477000341,1477000466,eafddf059658b27c54962076131c9c5626407121
ded897b59db064180811012967cc4e0d7b450b51,ded897b5,Add content descriptions to article toolbar,"Add content descriptions to article toolbar

Make the page toolbar more accessible by adding
android:contentDescriptions to each iconic button. These tips are also
available on long press.

Change-Id: Ib7134bca2899db517765b533ea6deb4e185166ad
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476993042,1476993042,eafddf059658b27c54962076131c9c5626407121
eafddf059658b27c54962076131c9c5626407121,eafddf05,"Merge ""Add field checking for API responses""","Merge ""Add field checking for API responses""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476992691,1476992691,"89bea6f59cc3657f3a5249fbc5a806d11527147e,2c83583327da64dcd3908f276201cc06f0890e2b"
2c83583327da64dcd3908f276201cc06f0890e2b,2c835833,Add field checking for API responses,"Add field checking for API responses

Provides a mechanism for enforcing the API contract on the client side.

Specifically, this provides a @Required annotation that can be used to mark
fields that should be considered required during deserialization.  When a
field in a class is marked @Required, a custom Gson type adapter will be
created during unmarshalling that will check to ensure that the field is
non-null before instantiating a new instance of the class, and otherwise
return NULL rather than a malformed object.

Tests to follow.  Implementation in the Gson POJOs to follow.

Bug: T145075
Change-Id: Ic4e9d62cb24cb453d1c34e0618ff83479a924fe9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1476736945,1476989236,7e171344c09df1d2498f6636a99ff8b30161ae3a
ee044901a981cf0056b9bcf23b88d6eb886e6e3f,ee044901,Hygiene: suppress autoMirrored API level warnings,"Hygiene: suppress autoMirrored API level warnings

We should commit to ignoring these warnings or fixing them on API 18 and
19. From the docs[0]:

  On previous versions of Android, if your app includes images that
  should reverse their horizontal orientation for right-to-left layouts,
  you must include the mirrored image in a drawables-ldrtl/ resource
  directory.

This patch takes the ignore route because it's easy and uses less
space.

[0] https://developer.android.com/about/versions/android-4.4.html#DrawableMirroring

Change-Id: I09a0d8427bda1b4e4c1d2fa1e0df36d7aca57f09
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476983353,1476987897,89bea6f59cc3657f3a5249fbc5a806d11527147e
89bea6f59cc3657f3a5249fbc5a806d11527147e,89bea6f5,"Merge ""Hygiene: replace deprecated android:singleLine""","Merge ""Hygiene: replace deprecated android:singleLine""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476986709,1476986709,"a4837067e0d0e85f67cf58c94173fd8684bbc7e4,55ac6831cb1cbc4ae06874c9d7bba5acd5833608"
a4837067e0d0e85f67cf58c94173fd8684bbc7e4,a4837067,Hygiene: remove unused resources,"Hygiene: remove unused resources

Change-Id: I0c4a942c224aae82fa0b6ad1ea5eaf6853bfe8a6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476984961,1476984961,4cd9f7018298e97b440e69604005a88a50e1c9c3
55ac6831cb1cbc4ae06874c9d7bba5acd5833608,55ac6831,Hygiene: replace deprecated android:singleLine,"Hygiene: replace deprecated android:singleLine

Change-Id: Ib13ee515c1470d335feb808a5b8c0876b7e9cc29
android:singleLine is deprecated. Use maxLines=""1"" instead.
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476984049,1476984049,4cd9f7018298e97b440e69604005a88a50e1c9c3
4cd9f7018298e97b440e69604005a88a50e1c9c3,4cd9f701,"Merge ""Hygiene: clarify EditPreviewTask dependency""","Merge ""Hygiene: clarify EditPreviewTask dependency""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476977442,1476977442,"4d95dc2fe76f36463dc83a475aafdcdb022a2063,a4826c5f08e3e9a6b96eae19511bf02a7155b03d"
4d95dc2fe76f36463dc83a475aafdcdb022a2063,4d95dc2f,Hygiene: rename SaneAsyncTask test and package,"Hygiene: rename SaneAsyncTask test and package

Move org.wikipedia.test.concurrency.AsyncTaskTest to
org.wikipedia.concurrency.SaneAsyncTaskTest. The test name and package
should match the subject.

Change-Id: I7f263553718b798f600d8fa2917277e4141ce7c6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476916165,1476916282,7e171344c09df1d2498f6636a99ff8b30161ae3a
c7cbba285fbcd968c591b24e61a522e7cc7f5716,c7cbba28,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Manually rename unsupported language resource files to use Android[0]
BCP 47[1,2,3] naming.

One way to test BCP 47 codes is to flip between Simplified and
Traditional Chinese variants with these changes:

  mv app/src/main/res/values-{zh-rTW,b+zh+Hant}/ &&
  rm app/src/main/res/values-zh-rHK

[0] https://android.googlesource.com/platform/tools/base/+/60ec62e3cb8225fab8fe06add2ee9d7c3271be6c/sdk-common/src/main/java/com/android/ide/common/resources/configuration/LocaleQualifier.java#36
[1] https://tools.ietf.org/html/bcp47
[2] http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry
[3] https://en.wikipedia.org/wiki/IETF_language_tag

Bug: T38264
Bug: T148480
Change-Id: I471a89bcc2adf97e3ce64fdbfdd9e24f9079b3b8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476199612,1476893948,a8e945142482a9da6742b99ea767297d7918eb6c
a8e945142482a9da6742b99ea767297d7918eb6c,a8e94514,Hygiene: make Uri Exception handling more granular,"Hygiene: make Uri Exception handling more granular

Catch all exception handlers should be rare. Clarify impossible states
by crashing.

Change-Id: I6b926b45163b955754ff4b7fc99c196ec32837b7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476744022,1476893948,b1aaa7c83281451a2d9205ba49934ca1f60a33c8
b1aaa7c83281451a2d9205ba49934ca1f60a33c8,b1aaa7c8,"Use Chinese script when available, not country","Use Chinese script when available, not country

Determine Chinese variant by script on newer APIs.

Change-Id: I2b759fb4cc512a8441c98d4a8f04fee7db12d954
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476743391,1476893944,36413c3531d909245de88b24fa637ffb4bfa9910
a4826c5f08e3e9a6b96eae19511bf02a7155b03d,a4826c5f,Hygiene: clarify EditPreviewTask dependency,"Hygiene: clarify EditPreviewTask dependency

Change EditPreviewTask constructor parameter type instead of casting and
add @NonNull annotation to implied nonnull parameter.

Change-Id: I801eee443aac75cda6afaee733c25784e22b5f69
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476721155,1476741080,9f654863b99005f28c06046bf473f85277ac5060
7e171344c09df1d2498f6636a99ff8b30161ae3a,7e171344,Fix un/marshalling of Uris to extend to subclasses,"Fix un/marshalling of Uris to extend to subclasses

GsonBuilder.registerTypeAdapter() does not consider type hierarchies.
Uri is an abstract type so all instances will always be a subclass. Use
registerTypeHierarchyAdapter() instead. Also, move null handling to
TypeAdapter.nullSafe() and add tests.

Change-Id: I59ba6a9e32e898f28c9d1248fd39c20c71eebca1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476738008,1476738528,3210ce4491f13bb56112d5e7c042c70a447df109
36413c3531d909245de88b24fa637ffb4bfa9910,36413c35,Hygiene: update NamespaceTypeAdapter package,"Hygiene: update NamespaceTypeAdapter package

Move NamespaceTypeAdapter to org.wikipedia.json where it will be used.

Change-Id: I7e3b90156cc45ea1ee59cabee9477d487d77bafc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476726274,1476738502,15c9b773a622d469df541d5c1e57bce384ee4f2a
3210ce4491f13bb56112d5e7c042c70a447df109,3210ce44,Hygiene: handle Namespace un/marshalling uniformly,"Hygiene: handle Namespace un/marshalling uniformly

Change-Id: I5c851b10baae37ffd764ebcba5ebe9b9c2be44e3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476726069,1476738502,36413c3531d909245de88b24fa637ffb4bfa9910
15c9b773a622d469df541d5c1e57bce384ee4f2a,15c9b773,Hygiene: remove legacy code for Site domain,"Hygiene: remove legacy code for Site domain

Remove legacy unmarshalling code for Site.domain authority.

Change-Id: Ide22a24115e3c43f64062742a27a3cefabece1c0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475701375,1476738458,9f654863b99005f28c06046bf473f85277ac5060
9f654863b99005f28c06046bf473f85277ac5060,9f654863,Hygiene: update WikiSite comments,"Hygiene: update WikiSite comments

Change-Id: Ib15b80ea0257ff854fc7346862e91f3b23d3bc7c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476235651,1476731553,cf6101256c97b8962bb8be7ed5edeab7246fee8a
cf6101256c97b8962bb8be7ed5edeab7246fee8a,cf610125,Hygiene: rename Site to WikiSite,"Hygiene: rename Site to WikiSite

Move org.wikipedia.Site to org.wikipedia.dataclient.WikiSite. No user
visible change intended.

Site appears to have originally been intended as a generic wiki URL. If
not, that's what is expected now as class assumptions around URL
structure are wiki specific, especially language. This patch renames
Site to WikiSite and moves it under the dataclient package to help
alleviate confusion over its purpose.

Site is misused to accept unsupported URLs in some cases. A future
refactor should find and fix these instances. There are also some wiki
corner cases that aren't fully handled around language including: meta,
upload, deployment, and test. Maybe a more generic Site super class
would help.

Additional changes:

• Use ""wiki"" terminology instead of ""site"". Retaining site nomenclature
  would be keeping some confusion. Where models are thought to be kept
  as JSON, @SerializedName is used. For volatile storage,
  @SerializedName is not used

• Use WikiSite.forLanguageCode instead of hardcoding *.wikipedia.org

• Removed always null Site member from GalleryCollection

• In tests, replace a couple instances of:

  (WikipediaApp) getInstrumentation().getTargetContext().getApplicationContext()`

  With: `WikipediaApp.getInstance()`

My apologies for the unhappily large diff. I recommend viewing through a
few programs including icdiff and grep.

Change-Id: Ic967146a77b1301c87a0e6fa552c2f70663ca2fe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476226322,1476731553,90d0dba525fc7c51760af8317385790fe0e3568e
90d0dba525fc7c51760af8317385790fe0e3568e,90d0dba5,"Merge ""Make User Set input immutable""","Merge ""Make User Set input immutable""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476731313,1476731313,"233625e6515675284b0914fecbfef934c47431fa,22528e7e7dbe41f81f6c1e5a7990c1b30dccea1f"
233625e6515675284b0914fecbfef934c47431fa,233625e6,"Merge ""Hygiene: replace array with Set for user groups""","Merge ""Hygiene: replace array with Set for user groups""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476731313,1476731313,"ae5841eaba5db1b760bde076c233e0c6faed4832,eab409a9d4b25da9a55658b8311097ebce17e2a7"
ae5841eaba5db1b760bde076c233e0c6faed4832,ae5841ea,"Merge ""Hygiene: update ApiTask and OkHttp* packaging""","Merge ""Hygiene: update ApiTask and OkHttp* packaging""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476730537,1476730537,"c8a438a6ecdda7a7bb36c425924e9005dae59b41,d512bb292be535d1d25db288d41937bba6789e02"
c8a438a6ecdda7a7bb36c425924e9005dae59b41,c8a438a6,"Merge ""Hygiene: make CardPageItem.namespace nonnull""","Merge ""Hygiene: make CardPageItem.namespace nonnull""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476726973,1476726973,"cfa0fc406c65cc1a5dd936d84390be037d76e01d,6004b93bdfea7407beb5ff51fa61d7f7adb744ef"
6004b93bdfea7407beb5ff51fa61d7f7adb744ef,6004b93b,Hygiene: make CardPageItem.namespace nonnull,"Hygiene: make CardPageItem.namespace nonnull

Make CardPageItem.namespace @NonNull by adding default Namespace.MAIN
value when JSON field is not present.

Change-Id: I462d1e0fbee4efe1ec6d386b91ce1f43aabde457
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476725221,1476725443,738514425eec0863dd15784a0e3ff9c192bdc8bb
cfa0fc406c65cc1a5dd936d84390be037d76e01d,cfa0fc40,"Merge ""Fix deprecated app:theme namespace warning""","Merge ""Fix deprecated app:theme namespace warning""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476724718,1476724718,"738514425eec0863dd15784a0e3ff9c192bdc8bb,99bd31bb22b6d322e8faef0bbc82e7ba09dfb847"
22528e7e7dbe41f81f6c1e5a7990c1b30dccea1f,22528e7e,Make User Set input immutable,"Make User Set input immutable

Make a copy of the passed in group Set to ensure the collection is
immutable. Also, add a missed @NonNull to Protection.edit.

Change-Id: I413059a8c38cacba4a2fd0cad0663b8e2542a84e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476724100,1476724100,eab409a9d4b25da9a55658b8311097ebce17e2a7
99bd31bb22b6d322e8faef0bbc82e7ba09dfb847,99bd31bb,Fix deprecated app:theme namespace warning,"Fix deprecated app:theme namespace warning

Use android:theme instead of app:theme per logcat warning:

  AppCompatViewInflater: app:theme is now deprecated. Please move to using
                         android:theme instead.

Change-Id: I979a4bb1bbb63820bd2009e23d2b7ae4db8d50a1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476723605,1476723605,416131ee5caf42a83b12edfb9c7b65a5422311c1
738514425eec0863dd15784a0e3ff9c192bdc8bb,73851442,Do not allow getStringSet() to be modified,"Do not allow getStringSet() to be modified

Unconditionally prohibit modifications to the result of
SharedPreferences.getStringSet(). The Javadocs warn:

  Note that you must not modify the set instance returned by this call.
  The consistency of the stored data is not guaranteed if you do, nor is
  your ability to modify the instance at all.

This seems like it would have the potential to cause data loss
sporadically.

Change-Id: I01221423aab52f29a5a9066a7cbdbbc10e4f0c90
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476722697,1476722697,416131ee5caf42a83b12edfb9c7b65a5422311c1
eab409a9d4b25da9a55658b8311097ebce17e2a7,eab409a9,Hygiene: replace array with Set for user groups,"Hygiene: replace array with Set for user groups

Change-Id: I91f1728ce1c958865ca5ca8aa9a8b48eadadbc09
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476722591,1476722591,416131ee5caf42a83b12edfb9c7b65a5422311c1
d512bb292be535d1d25db288d41937bba6789e02,d512bb29,Hygiene: update ApiTask and OkHttp* packaging,"Hygiene: update ApiTask and OkHttp* packaging

Move ApiTask and OkHttpConnectionFactory to org.wikipedia.dataclient.
This might not be the ideal location but seems more appropriate than
org.wikipedia.

Change-Id: Ida2a670cafa0cd3a153b3fb5c8966982df3d96e8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476721775,1476721775,416131ee5caf42a83b12edfb9c7b65a5422311c1
416131ee5caf42a83b12edfb9c7b65a5422311c1,416131ee,Bump versionCode,"Bump versionCode

Change-Id: I9067b6cad715f66902c04361643069971aebd196
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476480839,1476480881,ec9e957aa39d74ad9faae125ddc1d79a4ba90896
ec9e957aa39d74ad9faae125ddc1d79a4ba90896,ec9e957a,Turn SharedPreferenceCookieManager into a singleton.,"Turn SharedPreferenceCookieManager into a singleton.

...and hopefully fix the related crash when instantiating OkHttpClient.

Bug: T148172
Change-Id: Ie49b3474f4f2cd166728e57459fa6f529ac208dd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1476477817,1476477817,da16696bac93855033daa881217992009f3f75ea
da16696bac93855033daa881217992009f3f75ea,da16696b,Bump versionCode,"Bump versionCode

Change-Id: Iac3023666bde7237cc458c19a5ea5b10b8274668
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476466733,1476466770,3e06e35aae1be8b2f1072d971cad7e19f298f602
3e06e35aae1be8b2f1072d971cad7e19f298f602,3e06e35a,Fix possible crash due to null CookieManager.,"Fix possible crash due to null CookieManager.

Although I've been unable to reproduce it, I'm fairly sure about the cause
of this crash:

Inside OkHttpConnectionFactory, we initialize the CLIENT statically.
However, the instance of the client depends on the cookieManager to be
initialized in WikipediaApp, *but* the initialization of the cookieManager
only happens in onCreate(). This leaves open a possibility of CLIENT to be
initialized while cookieManager is still null.

This patch switches to initializing the CLIENT lazily, ensuring that the
cookieManager will have been initialized prior to any access of the
client.

Bug: T148172
Change-Id: Ieb16b0f4b9ea85eeabfb6923417f9bc3d9a85b94
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1476452235,1476452651,0dbc6d0ef74216f130d2c10d85fd780728ec7597
0dbc6d0ef74216f130d2c10d85fd780728ec7597,0dbc6d0e,Bump versionCode,"Bump versionCode

Change-Id: I1b3de532775dbaf07ecb7a8c3f485a96cd8a3c0d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1476372917,1476372989,eee239b49f3978780236aa552660a78d28ea11b9
eee239b49f3978780236aa552660a78d28ea11b9,eee239b4,"Merge ""Change way to get title from links""","Merge ""Change way to get title from links""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476372450,1476372450,"b84df50c95d1f05bcd09e8ca6356118b2ff23199,f28fd6344c218a305711421c3068a8c4f0f3665f"
b84df50c95d1f05bcd09e8ca6356118b2ff23199,b84df50c,"Merge ""Hygiene: refactor insertion of common headers in Retrofit requests.""","Merge ""Hygiene: refactor insertion of common headers in Retrofit requests.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476372012,1476372012,"fbc4528b2cf5558f6bcc513f9a9d5ac27cc1848f,8e1cc87c8e2e021f8e0617cbb029f111322d8f6b"
fbc4528b2cf5558f6bcc513f9a9d5ac27cc1848f,fbc4528b,"Merge ""Correctly handle Site language when instantiating Retrofit clients.""","Merge ""Correctly handle Site language when instantiating Retrofit clients.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476372008,1476372008,"a55bc469c90f29ffc6f4110131c8934252929ca1,198d946276d8976b3765bb8df833ca7ec502a8d8"
a55bc469c90f29ffc6f4110131c8934252929ca1,a55bc469,"Merge ""Make sure daily recurring tasks are executed when MainActivity is run.""","Merge ""Make sure daily recurring tasks are executed when MainActivity is run.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476372007,1476372007,"49f20bd11c17baf203ff0d7ce162a426a3fa61f0,b998b33c9faa95af1a3e49f5d8aa4398473db3af"
b998b33c9faa95af1a3e49f5d8aa4398473db3af,b998b33c,Make sure daily recurring tasks are executed when MainActivity is run.,"Make sure daily recurring tasks are executed when MainActivity is run.

Right now our recurring tasks are triggered only when PageActivity is
started, which was acceptable in the previous incarnation of the app.
However, we now have MainActivity, with which the user can interact
without ever launching PageActivity, meaning that the recurring tasks
might not get executed.

This can actually mess with our engagement/retention metrics, since one of
the recurring tasks is DailyEventTask, which sends an event that we use to
measure retention.

This patch moves the execution of recurring tasks to the base activity
class, so that the tasks are executed when *any* of our activities is
started, not just PageActivity.

Change-Id: Ic9d41817740a65aac4ade0840efe784b32603b87
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1476370562,1476371163,ad34cd93d23d6c2915a9417250be4fb8ed5706e1
8e1cc87c8e2e021f8e0617cbb029f111322d8f6b,8e1cc87c,Hygiene: refactor insertion of common headers in Retrofit requests.,"Hygiene: refactor insertion of common headers in Retrofit requests.

Change-Id: Id6b13d9bc1483506346e69170a396fc9fa4f3f43
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1476273855,1476314038,198d946276d8976b3765bb8df833ca7ec502a8d8
49f20bd11c17baf203ff0d7ce162a426a3fa61f0,49f20bd1,Check user group memberships on protected pages,"Check user group memberships on protected pages

Now that we know what groups a user is a member of we can check
if the user is a member of any of the allowed groups to edit the page.

This will enable a logged in user to see the regular edit pencils instead
of the disabled ones. The server still ultimately checks permissions upon
an edit submission.

Bug: T132834
Change-Id: I01a180f256f3a82ac197ed23445e976581ca8813
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1474992319,1476310926,3b7312898909c67cd834e3d8622dc3e2e6a68e7a
3b7312898909c67cd834e3d8622dc3e2e6a68e7a,3b731289,Retrieve group membership info when logging in,"Retrieve group membership info when logging in

This is in preparation for bug T132834 (Semi-protected page cannot be edited).
The problem is that with the highly cached responses we get from RESTBase
the app doesn't get any user specific responses anymore.
In the case of a semi-protected page, it would return false, no matter as
what user one is logged in. Instead of taking that as the truth we could
consider the value of ""editable"" in the lead response to be ""editable for
anonymous users"". To be able to do that we need to retrieve the group
membership information for a logged in user first.

The membership info would only be available for newly logged in users.
If it's important that it works for already logged in users we could follow
up with another patch which checks if there is membership data when
downloading a page.

GroupMembershipClient:
Added another DataClient which automatically gets executed
when the login process is complete.

The login would be marked as failed if the retrieval of group membership
info fails. We could theoretically mark it as successful instead. This is
just so we can say that if a user is newly logged in and has the proper
membership she should be able to edit semi-protected pages.

The list=users request could provide more information in the future.
We just don't need more at this time.

Bug: T132834
Change-Id: Iccb8a482bbe4646ed3f625b7da8e3284a5a3f8d8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1474961587,1476310920,34bb84f50ded12548a67e9368a56c659aa2c521e
34bb84f50ded12548a67e9368a56c659aa2c521e,34bb84f5,"Merge ""Fix possible crash on Samsung devices.""","Merge ""Fix possible crash on Samsung devices.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476298683,1476298683,"ad34cd93d23d6c2915a9417250be4fb8ed5706e1,e43765acc447a5e6555e0ca6b2ed04dc21daf4ab"
ad34cd93d23d6c2915a9417250be4fb8ed5706e1,ad34cd93,Fix clicking on History search results.,"Fix clicking on History search results.

This was because the click handler for History items ignores the click if
an ActionMode is present (to account for the existing implementation of
the long-press-to-delete ActionMode). This is now fixed by setting a ""tag""
on the search ActionMode, so that we can distinguish which ActionMode is
currently active.

Bug: T147854
Change-Id: Id55301a7bd4791a9a965fadf3b3ceee1486e48a2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1476196448,1476271955,d63ec1fddb6dceae2a87ba50f79bbd53c4337c04
198d946276d8976b3765bb8df833ca7ec502a8d8,198d9462,Correctly handle Site language when instantiating Retrofit clients.,"Correctly handle Site language when instantiating Retrofit clients.

The switch to using a single instance of OkHttpClient left out a crucial
bit of information: the Site object contains a languageCode field that is
used to determine custom headers (for language variants) that are sent
with each request, whereas the new single-instance OkHttpClient was simply
using the subdomain name of the Url as the language code.

This restores the Site object as a parameter for making new Retrofit
instances, and preserves the Site for use by the Interceptor that adds
custom headers.

Change-Id: Ic40d795746d9722c490407813228273fb2c13ced
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1476271660,1476271660,69497c181b460a99867d445bbd3a911a70ef1c2c
e43765acc447a5e6555e0ca6b2ed04dc21daf4ab,e43765ac,Fix possible crash on Samsung devices.,"Fix possible crash on Samsung devices.

On Samsung devices with API 23+, the floating ActionMode can cause a crash
when exiting an activity while the ActionMode is active (the system seems
to be attempting to attach the same ActionMode to the new activity).
(This is now our most prevalent crash in production, not counting the one
that was fixed earlier.)

This patch explicitly closes any ActionMode when pausing PageActivity.

As a bonus, this also seems to fix a potential leak of a Window object on
other (non-Samsung) devices when exiting the activity with an active
floating ActionMode.

Bug: T147191
Change-Id: I8cf8f803aec81cfe77612f81b683d4e55c5442ef
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1476199839,1476199839,69497c181b460a99867d445bbd3a911a70ef1c2c
d63ec1fddb6dceae2a87ba50f79bbd53c4337c04,d63ec1fd,"Merge ""Hygiene: use TimeUnit instead of arithmetic""","Merge ""Hygiene: use TimeUnit instead of arithmetic""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476197653,1476197653,"69497c181b460a99867d445bbd3a911a70ef1c2c,b9d7d0fdb3b53a557d156afd918e8aead48a64ba"
69497c181b460a99867d445bbd3a911a70ef1c2c,69497c18,"Merge ""Ignore encoding malformations when decoding URL fragments.""","Merge ""Ignore encoding malformations when decoding URL fragments.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476194481,1476194481,"fdba6ee62b344aba4a4948a6284fd6349aec065a,8686187845d2aa7c1e6a770c0ea4534916e3fd1a"
fdba6ee62b344aba4a4948a6284fd6349aec065a,fdba6ee6,"Merge ""Fix lifecycle of syntax highlighter when editing.""","Merge ""Fix lifecycle of syntax highlighter when editing.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1476194097,1476194097,"f9b5c3e8411ee092c48d2a0ea9a4f89a154d9be7,4ecb95b80badcce28e523d3feb4191de6c25ab0c"
8686187845d2aa7c1e6a770c0ea4534916e3fd1a,86861878,Ignore encoding malformations when decoding URL fragments.,"Ignore encoding malformations when decoding URL fragments.

Search results that come from prefix-search can sometimes contain URL fragments
(links to a section within the article), and it turns out that these fragments
can potentially be formatted incorrectly, and cause URLDecoder to throw an
exception that we weren't handling previously.

Bug: T147754
Change-Id: I568cd472564695da3e9e3d8200eed7b8c7f09fb8
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1476027633,1476193709,8d2b632ec7f97f4dab5a7231ed23f9c20e873c7e
4ecb95b80badcce28e523d3feb4191de6c25ab0c,4ecb95b8,Fix lifecycle of syntax highlighter when editing.,"Fix lifecycle of syntax highlighter when editing.

(clean it up in onDestroy, instead of onStop.)
Also remove an unnecessary usage of Bus.

Bug: T147704
Bug: T146538
Change-Id: I98489996c94dd66178ddd3b63e2e9082286e4fe5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1476026059,1476193668,8d2b632ec7f97f4dab5a7231ed23f9c20e873c7e
fe81f26e67e63b9b3896d1447d47c0471ea30195,fe81f26e,Hygiene: remove adb-setup.bash,"Hygiene: remove adb-setup.bash

Remove setup script which unlocked the screen, waited until the emulator
was fully booted and connected to the internet, and reset the date. This
no longer seems necessary and appears to be at least partially handled
by the Android Emulator Jenkins Plugin[0] for API 23+.

[0] https://wiki.jenkins-ci.org/display/JENKINS/Android+Emulator+Plugin#AndroidEmulatorPlugin-Version2.14%28April8%2C2016%29

Change-Id: I410df0e693af20dab047b6dc2451d5f181f233e8
Depends-On: I974ea54c5035b6cc08edd2f17ebdcd130770c56f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475882914,1475882914,8d2b632ec7f97f4dab5a7231ed23f9c20e873c7e
f9b5c3e8411ee092c48d2a0ea9a4f89a154d9be7,f9b5c3e8,Upgrade TranslationTests to JUnit 4,"Upgrade TranslationTests to JUnit 4

A follow-up to 4994f86 and 8d2b632, remove indirect WebView dependency
from missed test, TranslationTests. TranslationTests depended on
PageActivity which uses a WebView. Also, upgrade to JUnit 4. Tested on:

• Pass
• Failure: remove HTML from es/wp_stylized
• Failure: change %s to %d in iw/last_updated_text

Bug: T133183
Change-Id: Ibb476fc463e26f1f5c93f47cf926c08b874b985a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475878527,1475881468,8d2b632ec7f97f4dab5a7231ed23f9c20e873c7e
8d2b632ec7f97f4dab5a7231ed23f9c20e873c7e,8d2b632e,Annotate BridgeTests as @Large,"Annotate BridgeTests as @Large

A follow-up to 4994f86, add @Large annotation to missed WebView
dependent test, BridgeTests.

Bug: T133183
Change-Id: If20213fc98ab8f4c515ee6c89a8127a1e2fc3688
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475876369,1475876603,2973be2b4f396cde30ee38dbd834edbcd42eedf4
f28fd6344c218a305711421c3068a8c4f0f3665f,f28fd634,Change way to get title from links,"Change way to get title from links

For the mobileview/MW API case we can simply use the title
attribute instead of decoding the href attribute.

For the Parsoid/MCS case newer revisions of pages and once we get
all pages re-rendered after Icae4b83278791ed09284bb73c3ba80363cac9202
gets deployed will also have a title attribute.
For older pages the title attribute doesn't exists.
But we can derive it in JavaScript code from the href attribute by
removing a starting ""/wiki/"" or ""./"" and running decodeURIComponent on it.

That way the JS code always returns a title property, which the Java
side can just take as is.

The onUrlClick() method gets a new parameter titleString.
Instead of using getSite().titleForInternalLink(href) we now create the
PageTitle directly using titleString.

In the case of the gallery we don't get the link data from native code
instead of JS. The parsing of the HTML there is done using Html.fromHtml()
which doesn't preserve the title attribute of the link. In that one case
the Java code will derive the title from the href attribute like it did before.
This case is OK since the gallery data is not coming from Parsoid.

Introducing one factory method to create a PageTitle with a potential
fragment passed in separately. There was already a constructor with three
String parameters.

Related: Icae4b83278791ed09284bb73c3ba80363cac9202
Bug: T136223
Change-Id: Iedbe1ae611f4d433d4c6bcac3cce3935333753e0
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1470786135,1475859757,24d62ac510b44a5401c2d778dcb086f4802c7573
2973be2b4f396cde30ee38dbd834edbcd42eedf4,2973be2b,Hygiene: Rename interlanguage package to language,"Hygiene: Rename interlanguage package to language

The old name was used in a catachrestic way.

Change-Id: I14785354da76f75301bd7ef17787f8e5519ac47c
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1475797995,1475797995,501e2e3207eaa1718fb4171d27c4b3d8df780a6e
501e2e3207eaa1718fb4171d27c4b3d8df780a6e,501e2e32,"Merge ""Add padding to share a fact dialog""","Merge ""Add padding to share a fact dialog""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475766722,1475766722,"c36b76a529c64e8a4d98c8bb01a99fb494c49442,009b2d0add36180ebc4310549bd29ded2dd1efff"
b9d7d0fdb3b53a557d156afd918e8aead48a64ba,b9d7d0fd,Hygiene: use TimeUnit instead of arithmetic,"Hygiene: use TimeUnit instead of arithmetic

Change-Id: Ifca43a277058c1f58026a39b3d93b05edd28c1a7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475599282,1475705228,1150aef4041cf5d1db456e4202622f95989842b3
009b2d0add36180ebc4310549bd29ded2dd1efff,009b2d0a,Add padding to share a fact dialog,"Add padding to share a fact dialog

Add a very small amount of padding to the share a fact dialog. This
seems like an improvement but please abandon if there's any
disagreement.

Before:
https://phab.wmfusercontent.org/file/data/nhnowgbe4lbxi4fxpkbe/PHID-FILE-eyp6xpmkbzrtuchtqevh/screenshot-2016-10-05-15-18-53-328441001.png

After:
https://phab.wmfusercontent.org/file/data/zqo2t3pnodjov56bqlcz/PHID-FILE-mnwhwe2y76omphtszczy/screenshot-2016-10-05-15-17-08-036327916.png

Change-Id: I35b2edc064db9b017f973fcfd5c1e28e46ef3f03
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475702401,1475702401,1150aef4041cf5d1db456e4202622f95989842b3
c36b76a529c64e8a4d98c8bb01a99fb494c49442,c36b76a5,Don't toggle the GPS when requesting location,"Don't toggle the GPS when requesting location

The Mapbox SDK will quickly toggle location services if it was already
enabled and requested. This may be observed in the SDK sources and by
watching the location services system icon. This patch checks the enable
state first and enables location services only if required.

Change-Id: I7ebb9c38efd21c60b49385151ece8546016ddb49
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475701720,1475701720,1150aef4041cf5d1db456e4202622f95989842b3
1150aef4041cf5d1db456e4202622f95989842b3,1150aef4,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ie2bdcb46527d57abfacec7e62069675a93b7feea
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475680365,1475680365,5b6a103537490bc415001c0445a9be4528adca41
5b6a103537490bc415001c0445a9be4528adca41,5b6a1035,"Merge ""Always show ""search"" and ""tabs"" buttons in Explore and Page toolbars.""","Merge ""Always show ""search"" and ""tabs"" buttons in Explore and Page toolbars.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475613127,1475613127,"4c49c3d9aa923113f2ab0572bf7dd6d5568a1391,a8f9d7d7beb96f979378de2fd07968d6b8ebd34f"
4c49c3d9aa923113f2ab0572bf7dd6d5568a1391,4c49c3d9,"Merge ""Fix tap-to-hide image description in Gallery.""","Merge ""Fix tap-to-hide image description in Gallery.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475613012,1475613012,"7b121241f6d391454341209fd22b66967a3d3139,354943ce2dfb02085dd6b72c9f2906aa203b19fe"
7b121241f6d391454341209fd22b66967a3d3139,7b121241,"Merge ""Add comment to search-related eventlogging to inform Discovery of changes""","Merge ""Add comment to search-related eventlogging to inform Discovery of changes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475607892,1475607892,"8b2f52c6ce0aa7f5f9db52adf474d90b48542727,5855d859a60e2cf59ef417d29b87cf72717bf258"
5855d859a60e2cf59ef417d29b87cf72717bf258,5855d859,Add comment to search-related eventlogging to inform Discovery of changes,"Add comment to search-related eventlogging to inform Discovery of changes

Bug: T143753
Change-Id: I95fbea9a69858882c59e110843eab834b9947ce1
",,,,Mikhail Popov,mpopov@wikimedia.org,Mikhail Popov,mpopov@wikimedia.org,1475529697,1475607276,29da5b5b0beb109c688d1270ff0e5cdb776823ac
354943ce2dfb02085dd6b72c9f2906aa203b19fe,354943ce,Fix tap-to-hide image description in Gallery.,"Fix tap-to-hide image description in Gallery.

Somewhere along the way, our functionality of tapping to hide/show the
image description in the Gallery has disappeared, probably because of
updates to the sample ZoomableDraweeView.

This reinstates that functionality in the correct way.

Change-Id: Ia9b21b55ba20a240f54881bf9e4526a3ff7cae4b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1475601809,1475601809,8b2f52c6ce0aa7f5f9db52adf474d90b48542727
8b2f52c6ce0aa7f5f9db52adf474d90b48542727,8b2f52c6,"Merge ""TabsProvider: Add close all tabs button""","Merge ""TabsProvider: Add close all tabs button""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475600487,1475600487,"6acfb1a085267f49c2d246c3fbc22a4a79ec2e98,47f2c3ad231ee76d6c3f002af1e2e199ce21a77d"
47f2c3ad231ee76d6c3f002af1e2e199ce21a77d,47f2c3ad,TabsProvider: Add close all tabs button,"TabsProvider: Add close all tabs button

There wasn't a button to close all tabs at the tab overview screen. The
only way was to close each tab individually. This button is added to the
left of the ""+"" button, closes all tabs after confirmation.

Bug: T146800
Change-Id: Icaa03f190b15706794a97c7bb92ee10d317dd401
",,,,Neslihan,tur.neslihan@gmail.com,Neslihan,tur.neslihan@gmail.com,1475533729,1475599764,29da5b5b0beb109c688d1270ff0e5cdb776823ac
a8f9d7d7beb96f979378de2fd07968d6b8ebd34f,a8f9d7d7,"Always show ""search"" and ""tabs"" buttons in Explore and Page toolbars.","Always show ""search"" and ""tabs"" buttons in Explore and Page toolbars.

Possibly controversial, but hear me out:
Our current menu for the Feed has all items marked as ""ifRoom"", which is
strictly correct by Android guidelines. However, on small-ish screens, it
can cause some of the menu items to overflow into the native overflow
menu, which we don't actually want. I can reproduce this easily on an
emulator with a small enough screen. (The overflow sometimes happens
even when there's seemingly enough space for all the buttons.)

It's very important for the user to be able to access the ""search"" button
in the toolbar at all times, as well as the ""tabs"" button. If these
buttons overflow, it greatly reduces their discoverability and
accessibility. This issue has already been raised via OTRS feedback.

Therefore, in this rare case, I propose we mark all of these menu items
with showAsAction=""always"", and add a rule to ignore the corresponding
lint warning.

I'm also marking our custom overflow button as ""always"", because if it
overflows, it will just create a native overflow button, which defeats the
purpose of our button, and takes up an equivalent amount of space.

Change-Id: If102252a9ce30e8a62f5650ad63037815624c712
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1475591809,1475598718,29da5b5b0beb109c688d1270ff0e5cdb776823ac
6acfb1a085267f49c2d246c3fbc22a4a79ec2e98,6acfb1a0,"Merge ""Add CSS rule to hide IPAs""","Merge ""Add CSS rule to hide IPAs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475587286,1475587286,"29da5b5b0beb109c688d1270ff0e5cdb776823ac,13d852005e996dd6508867c23d0a74a5e5e08694"
29da5b5b0beb109c688d1270ff0e5cdb776823ac,29da5b5b,Hygiene: Rename JsonPageLoadStrategy to PageDataClient,"Hygiene: Rename JsonPageLoadStrategy to PageDataClient

Bug: T136322
Change-Id: I60da7ab1a6691e69c9a163ba5dcbdc96fe7c6067
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1475496748,1475513669,29f7f7da7dc8d97c2d941c0182393e6865c57c84
29f7f7da7dc8d97c2d941c0182393e6865c57c84,29f7f7da,"Merge ""Simplify loading of styles.""","Merge ""Simplify loading of styles.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475513475,1475513475,"5c8d8d9ac2760db9b3334757a00de07a85ebaedb,a1b3882df436f829b8ffbc87f152c2618ebe86a6"
a1b3882df436f829b8ffbc87f152c2618ebe86a6,a1b3882d,Simplify loading of styles.,"Simplify loading of styles.

This simplifies the way that we load CSS styles into our WebView
by simply including them in a <link> tag within the <head> element in
the HTML file, instead of loading the CSS via a Bridge event. This was a
vestige of the time when the app used to dynamically download CSS
bundles in the field, and is no longer necessary.

Change-Id: I481d5102ccffca407178e6b98b3e5d2c8363809b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1475505291,1475511901,3e191ee237379bac13b0260593472ef223a54b64
5c8d8d9ac2760db9b3334757a00de07a85ebaedb,5c8d8d9a,Retrofit LoginTask,"Retrofit LoginTask

It seems easier to chain request implemented using Retrofit than the traditional
java-mwapi requests. In the future we want to chain yet another request, in
addition to the two we have already. One to get the login token.
The 2nd one for the actual login request.

This patch replaces the LoginTask with a Retrofit2 LoginClient.
The test changes from LoginTaskTest to LoginClientTest.

Bug: T132834
Change-Id: I6d9818c92bfd834adf966a6c5808b7c0a236235d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1473750144,1475510984,84e1c0126891df594f0aadf80fb1379575f7a527
84e1c0126891df594f0aadf80fb1379575f7a527,84e1c012,Hygiene: Decouple user mgmt from app and storage,"Hygiene: Decouple user mgmt from app and storage

Having the user management functionality tied to the Application instance
and the storage in shared preferences makes it really hard to create mock
user for unit testing.

While the User class is now a bit more complex the resulting usages
are now much simpler and concerns are clearer.

Added a simple unit test for user management.

This patch is in preparation for unit testing the work for T132834.

Bug: T132834
Change-Id: I1c45843b94e0bbdc5205f9cd20677ae942303e70
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1473380116,1475510984,ac392f2dc93f9486e5d4e582452e9363ada9fbf9
ac392f2dc93f9486e5d4e582452e9363ada9fbf9,ac392f2d,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I8d89b53ef5feeb886f1c970730b44d23132ca5ce
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475508739,1475508739,3e191ee237379bac13b0260593472ef223a54b64
3e191ee237379bac13b0260593472ef223a54b64,3e191ee2,"Merge ""Update CSS assets""","Merge ""Update CSS assets""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475504036,1475504036,"627c2f7f5ebbc1970a0fef58a7144108e1e1395f,8ec0da4e0570183238a48ad90811e41cf6384fa7"
627c2f7f5ebbc1970a0fef58a7144108e1e1395f,627c2f7f,Fix possible NPE when recreating MainActivity.,"Fix possible NPE when recreating MainActivity.

Bug: T147190
Change-Id: I8fc6993b0408dad7c493a1b53bd79b573ca85cec
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1475501071,1475501071,bd79d212e3ea557f56822dbdaccdab2ce9321917
8a2cdffdedfa19d81b45caedc1743863694a85bf,8a2cdffd,"Removed inconsistency between ""Similar Titles"" and ""Similar Pages","Removed inconsistency between ""Similar Titles"" and ""Similar Pages
Bug: T130221

Change-Id: Ia8458569990ca3c541eb274707dc54f318c999ed
",,,,Niknok,niknokdewally@yahoo.co.uk,Niknok,niknokdewally@yahoo.co.uk,1475349241,1475349936,646b6829aec03d0b6e6b36204da5e39b5f5d4fc5
13d852005e996dd6508867c23d0a74a5e5e08694,13d85200,Add CSS rule to hide IPAs,"Add CSS rule to hide IPAs

IPAs will soon be marked with a class rather than directly hidden by the
mobile content service.  Add stylesheet rule to hide them.

See https://gerrit.wikimedia.org/r/#/c/30917

Change-Id: Ie01f24f6668fadd89b88d816dd409e5c519d6213
Depends-On: Id707bdd2782298518836552aec96998c4ed91772
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1475185191,1475185191,8ec0da4e0570183238a48ad90811e41cf6384fa7
8ec0da4e0570183238a48ad90811e41cf6384fa7,8ec0da4e,Update CSS assets,"Update CSS assets

Change-Id: Ibe3372b658f5af7f20ed712b80a575ab816070a3
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1475185096,1475185096,bd79d212e3ea557f56822dbdaccdab2ce9321917
bd79d212e3ea557f56822dbdaccdab2ce9321917,bd79d212,"Merge ""Load File pages with api.php""","Merge ""Load File pages with api.php""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475183729,1475183729,"b18f67892cae2290b1851c67f355d4fdcca0de7c,cbb696401069351597466977796e1d7d30ef26ba"
b18f67892cae2290b1851c67f355d4fdcca0de7c,b18f6789,"Merge ""Use single instance of OkHttpClient.""","Merge ""Use single instance of OkHttpClient.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475177625,1475177625,"17357541839252d901ac8fdf04f01e4d3b753f6b,d115821372c78d719e3b1d5134840fdd1fd643a1"
17357541839252d901ac8fdf04f01e4d3b753f6b,17357541,"When scrolling away bottom views, don't wait for the first screenful.","When scrolling away bottom views, don't wait for the first screenful.

This makes the scrolling behavior of the bottom toolbar in PageActivity
consistent with the behavior of the bottom tab bar in MainActivity.

The top toolbar in PageActivity can still scroll away after the first
screenful.

Change-Id: I13f70442f33f0872968afdb9ebae4f933719f30a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1475172506,1475172588,ff229cc2a408e728dacc5a8c9e71ce889ad25aa1
ff229cc2a408e728dacc5a8c9e71ce889ad25aa1,ff229cc2,Allow platform to handle main screen config change,"Allow platform to handle main screen config change

The OverhaulActivity became the new MainActivity. OverhaulActivity
doesn't hold a WebView and so doesn't seem to require manual View
configuration management. The default is considered best practice for
most apps[0]:

  Note: Using this attribute should be avoided and used only as a last
  resort. Please read Handling Runtime Changes for more information
  about how to properly handle a restart due to a configuration change.

Our use of retained Fragment instances and shorter View hierarchies
keeps configurations changes, such as those on device rotation, speedy.
The default seems adequate.

Note: if this patch is not merged, we will need to handle configuration
changes manually in Views expect standard View lifecycles.

[0] https://developer.android.com/guide/topics/manifest/activity-element.html#config

Change-Id: I190bae2232d35a89a3e0d36f71322353141b2c80
",,,,Stephen Niedzielski,stephen@niedzielski.com,Mholloway,mholloway@wikimedia.org,1473178471,1475165520,12cbe60200899a8133aa71a8facd5fe3a402273b
12cbe60200899a8133aa71a8facd5fe3a402273b,12cbe602,"Merge ""Hygiene: move MainActivity & Fragment to main pkg""","Merge ""Hygiene: move MainActivity & Fragment to main pkg""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475163709,1475163709,"f4d6b5aac12b175c848638b4078ca570b7bc95d4,a242085481686f219ea4e943ec519dc413b0826a"
d115821372c78d719e3b1d5134840fdd1fd643a1,d1158213,Use single instance of OkHttpClient.,"Use single instance of OkHttpClient.

Also bumped up the size of our HTTP cache.

Bug: T137578
Change-Id: Iaf5134fbbe82bfb404fba335bb5a52649cd9ff5d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1475160349,1475160645,a95132db17e4f4096b9f95f29f8d181d5c943b61
f4d6b5aac12b175c848638b4078ca570b7bc95d4,f4d6b5aa,"Merge ""ShareHandler: Add close button to large bottom sheets""","Merge ""ShareHandler: Add close button to large bottom sheets""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1475158067,1475158067,"a95132db17e4f4096b9f95f29f8d181d5c943b61,12d8f501cda8074b89394a7fe85737c25e8f00ae"
cbb696401069351597466977796e1d7d30ef26ba,cbb69640,Load File pages with api.php,"Load File pages with api.php

MediaWiki HTML for an image File page includes the image itself, but the
Parsoid HTML only includes metadata.  Subbu is aware of this and will look
into whether Parsoid is behaving as intended.

In the meantime, let's load File pages with api.php.

Bug: T135242
Change-Id: If96925b3980945088a048013cc707eaeb570c09e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1475097356,1475097599,21c7884f85b9ef2844aa4f06d808c044c9762776
a95132db17e4f4096b9f95f29f8d181d5c943b61,a95132db,Bump versionCode,"Bump versionCode

Change-Id: I37ba081e4f30a4d918b2e85a02c698bd1e1d8d84
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475080630,1475080813,21c7884f85b9ef2844aa4f06d808c044c9762776
21c7884f85b9ef2844aa4f06d808c044c9762776,21c7884f,Fix background image in share-a-fact cards.,"Fix background image in share-a-fact cards.

Bug: T146767
Change-Id: Icea9b0c02908a4614650d62f19438a32340d3b9a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1475069431,1475069518,16a8a3b28c7a0a762d46d19773cf249f7f5081c0
16a8a3b28c7a0a762d46d19773cf249f7f5081c0,16a8a3b2,Tweak verbiage for empty reading list window.,"Tweak verbiage for empty reading list window.

- Update the verbiage to reflect the new location of the bookmark button.
- Use a large bookmark icon instead of the ""heart"" icon to serve as a
  better visual cue of what to look for when saving reading lists.

Change-Id: I267bd45bf3d9b25520f7983ac28d6ef45d0e5e8c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1475063902,1475064590,fcd99a2f4285ad9bf388085eeb128ca6da930846
a242085481686f219ea4e943ec519dc413b0826a,a2420854,Hygiene: move MainActivity & Fragment to main pkg,"Hygiene: move MainActivity & Fragment to main pkg

MainActivity and MainFragment feel lost at in org.wikipedia. Move them
to a subpackage, org.wikipedia.main.

Change-Id: Iac9c327121aad48b34ad819af01b147709d2b7c4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475002567,1475008143,fcd99a2f4285ad9bf388085eeb128ca6da930846
fcd99a2f4285ad9bf388085eeb128ca6da930846,fcd99a2f,Hygiene: remove dead code in LeadImagesHandler,"Hygiene: remove dead code in LeadImagesHandler

Change-Id: I0794273f238ae213647c28c1ec51671f88335525
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1475002397,1475008143,3f552f94dd4d117682b7880a02e1df7606e12194
3f552f94dd4d117682b7880a02e1df7606e12194,3f552f94,Autohide the nav bar on scroll,"Autohide the nav bar on scroll

Bug: T146726
Change-Id: I6256c9658e2d3b9374730b5b4fc9d7fe5b3eb4c4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474673110,1475008140,773b99ca5fd3ea7753faf42b6badfa1851fc8390
773b99ca5fd3ea7753faf42b6badfa1851fc8390,773b99ca,Update bundled CSS,"Update bundled CSS

Via make-css-assets.bash.

Change-Id: Id21f350dcaf91f20242f85eec50330e2b2e72f4f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1474992281,1474992281,5a80d14bf392cd55c632e971a8a57130730bf865
5a80d14bf392cd55c632e971a8a57130730bf865,5a80d14b,Don't show tab animation when loading page in new foreground tab.,"Don't show tab animation when loading page in new foreground tab.

Bug: T146721
Change-Id: I1e4d87c02feb9e3dbdea5bc1aebeb7526b41ef38
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474981172,1474981641,94b47a10d324f9341d87289e38c199a9c0b4e9e7
12d8f501cda8074b89394a7fe85737c25e8f00ae,12d8f501,ShareHandler: Add close button to large bottom sheets,"ShareHandler: Add close button to large bottom sheets

Large bottom sheets may completely overlap the page. In this case, the only
way to close them was swipping the bottom sheet down or touching the system
back button. To close them easier a close button is added to top right corner
of the view.

Bug: T130220
Change-Id: Iea748051826f45cce666cd6e3914f4a9ff5f00b5
",,,,Neslihan,tur.neslihan@gmail.com,Neslihan,tur.neslihan@gmail.com,1474823040,1474927610,a0c99081b712dd8d7b2ceca1a1bd9382b0773023
94b47a10d324f9341d87289e38c199a9c0b4e9e7,94b47a10,"Merge ""Remove underscores from video filenames when loading in gallery""","Merge ""Remove underscores from video filenames when loading in gallery""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474925991,1474925991,"65e7203b3703fea622f7456d7777acb01f8c3281,c4e2cb099746bb77a8e99df38dd7ca67f92151e9"
65e7203b3703fea622f7456d7777acb01f8c3281,65e7203b,"Merge ""Fix home-as-up behavior when launched from external intent.""","Merge ""Fix home-as-up behavior when launched from external intent.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474924753,1474924753,"29962ccc407a7efa798767b584d4c89871e196e3,868655c6da34af24d8db4ece49a1aca700f57a3a"
29962ccc407a7efa798767b584d4c89871e196e3,29962ccc,"Merge ""Always open pages from Intent in a new foreground tab.""","Merge ""Always open pages from Intent in a new foreground tab.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474921807,1474921807,"f179aad8d3398e278b56be0e70e8ad62a6827173,da6d06aba2ee66b9b214ef73fe0c68b4b58164ab"
f179aad8d3398e278b56be0e70e8ad62a6827173,f179aad8,"Merge ""StringUtil: Replace deprecated Html.fromHtml(String) calls""","Merge ""StringUtil: Replace deprecated Html.fromHtml(String) calls""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474920393,1474920393,"9992ac841eedd68612ea1b62e6cf60db6d26c341,b466dce9d6ae11481712769207147f39935b00ad"
b466dce9d6ae11481712769207147f39935b00ad,b466dce9,StringUtil: Replace deprecated Html.fromHtml(String) calls,"StringUtil: Replace deprecated Html.fromHtml(String) calls

Html.fromHtml(String) method was deprecated in API level 24. A version check
method is added to StringUtil class to use old method on before API level 24
and new method on API level 24 and higher. Additionally, the method is overloaded
to satisfy overloaded version of fromHtml(String) method, which is fromHtml(String, ImageGetter, TagHandler).

Bug: T145582
Change-Id: I256ce2b3a35e5d8434b7d392eb1c3b102f2e7af7
",,,,Neslihan,tur.neslihan@gmail.com,Michael Holloway,mholloway@wikimedia.org,1474727753,1474920055,a0c99081b712dd8d7b2ceca1a1bd9382b0773023
da6d06aba2ee66b9b214ef73fe0c68b4b58164ab,da6d06ab,Always open pages from Intent in a new foreground tab.,"Always open pages from Intent in a new foreground tab.

Some users, as well as our own dogfooding, have expressed some confusion
around the behavior of the hardware Back button when reading articles.

The confusion seems to stem from the following:
When a user opens a page from within MainActivity (from the feed, History,
etc), it causes PageActivity to open, and load the requested page into the
*current tab* that may have been previously open. This causes some
unexpected behavior:  if the user presses the hardware Back button,
PageActivity will go backwards in the backstack of pages that had already
existed in the current tab. This is contrary to the intuition that the
Back button should simply close the current page and go back to
MainActivity from where we launched it.

This patch attempts to alleviate the confusion by always loading pages in
a new tab (that is, pages that are loaded from an Intent that causes
PageActivity to start). Here are the benefits to this approach:

- This introduces better ""navigational consistency"", meaning that every
  launch of PageActivity will now be a proper self-contained browsing
  ""session"".
- The user will still be able to navigate to links and build a backstack
  in the current tab, but the number of Back presses to return to the
  parent Activity will now make intuitive sense, since the newly-opened
  page will not be pushed onto the existing backstack of the current tab.
- Notice that when the app is launched from an external Intent (e.g. from
  a deeplink) we do already open the requested page in a new tab,
  precisely for the purpose of maintaining consistent Back behavior. We
  should simply treat ""internal"" Intents coming from MainActivity the same
  way we treat external intents.

This patch also limits the total number of possible tabs to 100, since
we're technically leaving open the possibility for the user to create more
tabs than they normally would, if the user always uses the home-as-up
button for backwards navigation instead of the hardware Back button.
Limiting the total number of tabs doesn't seem too unexpected, since users
will still be able to refer to their History and Reading Lists for reading
previous pages.

In addition, this patch removes a bit of dead code.

Change-Id: I861b2822942f28c95ac0c3d3fb6f56ed18a8fd00
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474903812,1474920050,9992ac841eedd68612ea1b62e6cf60db6d26c341
9992ac841eedd68612ea1b62e6cf60db6d26c341,9992ac84,"Merge ""Use ""X"" icon for home-as-up button in PageActivity.""","Merge ""Use ""X"" icon for home-as-up button in PageActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474919130,1474919130,"8911b1befadf0ac3642d2405ce33a429e8b1eafd,59f2fc7fe02aae72b4b42271cc444d3f4e759b45"
59f2fc7fe02aae72b4b42271cc444d3f4e759b45,59f2fc7f,"Use ""X"" icon for home-as-up button in PageActivity.","Use ""X"" icon for home-as-up button in PageActivity.

Bug: T145910
Change-Id: I6f40890fba7dde296e354270f120000d491d0285
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474917309,1474917309,814fc69d925655810b15f6c355e00d4d01d5ba24
8911b1befadf0ac3642d2405ce33a429e8b1eafd,8911b1be,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia1699cdb08209654b0ff0fab8a0292ee764884e7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474907873,1474907873,11a7cf84ccb6a786d7c5a4459e08b00ffc4db30d
11a7cf84ccb6a786d7c5a4459e08b00ffc4db30d,11a7cf84,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4c67b1d5024125f6e9e8b6a738174979f8b48c36
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474904400,1474906035,814fc69d925655810b15f6c355e00d4d01d5ba24
814fc69d925655810b15f6c355e00d4d01d5ba24,814fc69d,"Merge ""Ellipsize nav tab labels.""","Merge ""Ellipsize nav tab labels.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474899876,1474899876,"2dc9eb393eee389127fbc6e922af2fda5cd6b6d3,7585429d9992e85e98742c1888912504b9b24439"
7585429d9992e85e98742c1888912504b9b24439,7585429d,Ellipsize nav tab labels.,"Ellipsize nav tab labels.

It's an unfortunate reality that in some languages, the labels for our
bottom navigation tabs are too long to fit in the small space allowed by
each tab.

This patch allows the labels to be ellipsized, instead of the default
behavior of overflowing onto multiple lines (even though it's set to
maxLines=1).

Bug: T146579
Change-Id: I3dad2f0a53b31261c3f13c6d37508855558a56cc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474899100,1474899100,a0c99081b712dd8d7b2ceca1a1bd9382b0773023
868655c6da34af24d8db4ece49a1aca700f57a3a,868655c6,Fix home-as-up behavior when launched from external intent.,"Fix home-as-up behavior when launched from external intent.

Here's what happens:
- When our MainActivity is started from the Launcher, it automatically jumps
  to PageActivity if the user was reading a page within the last 24 hours.
- When the user presses the home-as-up button in PageActivity, we actually
  launch MainActivity with the same intent as the Launcher uses to launch
  it from the home screen.
- Taking the above two facts together, this results in a weird circular
  behavior where pressing the home-as-up button launches MainActivity,
  which immediately launches PageActivity again.

This patch adds an ""extra"" parameter to the intent when launching
MainActivity from pressing the home-as-up button, so that MainActivity can
differentiate it from a regular intent triggered from the Launcher.

Bug: T145831
Change-Id: I7ade14e3900d774126d47eeeda3be103fa478fa4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474895984,1474895984,a0c99081b712dd8d7b2ceca1a1bd9382b0773023
2dc9eb393eee389127fbc6e922af2fda5cd6b6d3,2dc9eb39,"Merge ""Hygiene: replace ImageButton with ImageView""","Merge ""Hygiene: replace ImageButton with ImageView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474894888,1474894888,"a0c99081b712dd8d7b2ceca1a1bd9382b0773023,58eee822e5762477175455a6060572e75b9bef66"
a0c99081b712dd8d7b2ceca1a1bd9382b0773023,a0c99081,"Merge ""Hygiene: Butter Knife FeaturedArticleCardView""","Merge ""Hygiene: Butter Knife FeaturedArticleCardView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474671211,1474671211,"e970d91e2835566c31f6ea219e53b2212dbc2655,650e59fd9182b362667db02e5f5ae0a5d65dcc94"
e970d91e2835566c31f6ea219e53b2212dbc2655,e970d91e,"Merge ""Null out feed card callbacks when Activity dies""","Merge ""Null out feed card callbacks when Activity dies""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474670926,1474670926,"043bc4422cdbe14f51304f21d7f93f6929abfdf2,985ab0cfa9a0f15bf824d8ae32a98a7b88f5e36e"
043bc4422cdbe14f51304f21d7f93f6929abfdf2,043bc442,"Merge ""Don't require faketouch support""","Merge ""Don't require faketouch support""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474651831,1474651831,"cbbffa28eb4dd46f73abcae0228b1c3c3ae88241,4cfd4cc5129b2fa073db1061fd094c450dd0888f"
cbbffa28eb4dd46f73abcae0228b1c3c3ae88241,cbbffa28,"Merge ""Reduce font weight of bottom tab text.""","Merge ""Reduce font weight of bottom tab text.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474649675,1474649675,"3df44688b21c79f575795bdf02a4f77bfc0dba58,f9a79fe49e3f829265725c7c0ed1689dedfc2356"
650e59fd9182b362667db02e5f5ae0a5d65dcc94,650e59fd,Hygiene: Butter Knife FeaturedArticleCardView,"Hygiene: Butter Knife FeaturedArticleCardView

Convert FeaturedArticleCardView click listener usage to Butter Knife.

Change-Id: I49a13006eb3f9aa58441bed15a747f30821a46ec
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474647367,1474648142,985ab0cfa9a0f15bf824d8ae32a98a7b88f5e36e
985ab0cfa9a0f15bf824d8ae32a98a7b88f5e36e,985ab0cf,Null out feed card callbacks when Activity dies,"Null out feed card callbacks when Activity dies

Bug: T146086
Change-Id: I1c56cfff175ec9d8bfeab523bcc6c3cf6b5fff24
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474502049,1474648129,3df44688b21c79f575795bdf02a4f77bfc0dba58
4cfd4cc5129b2fa073db1061fd094c450dd0888f,4cfd4cc5,Don't require faketouch support,"Don't require faketouch support

Previously, we required faketouch support to allow devices that don't
have a touchscreen but do offer mouse support. However, faketouch to
certain Amazon devices seems to be a requirement in *addition* to
optional touchscreen support. The console warning was:

  This APK’s manifest conflicts with 3 of your targeted Amazon Fire
  devices.
  Starting in October, any APK update will require an updated manifest
  to maintain your current device support. Click on “View device
  support” below for more information on how to address conflicts.

The warning detail is that we require devices to have
android.hardware.faketouch but these devices don't have it:

  Kindle Fire (2011)
  Kindle Fire HD 8.9 (2012)
  Kindle Fire HD 8.9 WAN (2012)
  And a couple non-Amazon devices

Change-Id: I94753fddac75b866219834f993d723a3224a698b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474645473,1474645473,3df44688b21c79f575795bdf02a4f77bfc0dba58
3df44688b21c79f575795bdf02a4f77bfc0dba58,3df44688,"Merge ""Hygiene: move article toolbar to custom View""","Merge ""Hygiene: move article toolbar to custom View""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474636510,1474636510,"7f50e63f5b8e26f5c47673892d345ef60bb507ba,22a4f78a4c1d2ae4ad82e2dd6e45415d8f48a22c"
7f50e63f5b8e26f5c47673892d345ef60bb507ba,7f50e63f,"Merge ""Hygiene: remove redundant code from FeedView""","Merge ""Hygiene: remove redundant code from FeedView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474583725,1474583725,"fe3fcbbc63a533bba12bacd9e3df12f05402fa04,84c8bce963c29d98458ee212770bf0be9d3c4bd0"
fe3fcbbc63a533bba12bacd9e3df12f05402fa04,fe3fcbbc,"Merge ""Hygiene: move FeedViewCallback to FeedAdapter""","Merge ""Hygiene: move FeedViewCallback to FeedAdapter""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474582503,1474582503,"80a85006fb697fb60d6130cd8ebe6bb73a68d8ed,532f0fb4dcef9823aaf303bef80fa093cfe098a9"
80a85006fb697fb60d6130cd8ebe6bb73a68d8ed,80a85006,"Merge ""Hygiene: encapsulate NewsListCardView's callback""","Merge ""Hygiene: encapsulate NewsListCardView's callback""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474582130,1474582130,"6551ececfe81010d7d32029d3ee5a034fd829c8e,8e9c2100230d62d93b121fef8ffa53577917c3c3"
6551ececfe81010d7d32029d3ee5a034fd829c8e,6551ecec,"Merge ""Hygiene: encapsulate SearchCardView's callback""","Merge ""Hygiene: encapsulate SearchCardView's callback""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474581239,1474581239,"b58e948741bc5ff66e6410564a3450b50b47efc2,462daa94cf05be758264ac828065bac6aca6c2de"
b58e948741bc5ff66e6410564a3450b50b47efc2,b58e9487,"Merge ""Hygiene: move FeaturedImageCardView callback""","Merge ""Hygiene: move FeaturedImageCardView callback""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474579786,1474579786,"ef70ae39044708c35221b8ac16d0f90dfdf7c0a3,bb363c1baced3b76d705116e65f52395ed323e4c"
ef70ae39044708c35221b8ac16d0f90dfdf7c0a3,ef70ae39,"Merge ""Hygiene: encapsulate CardHeaderView callback""","Merge ""Hygiene: encapsulate CardHeaderView callback""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474579160,1474579160,"f95194bae4eea96a362c63ec10522660b2b57595,e569604da911d37fbbc15882d2ab5c38262f722a"
f9a79fe49e3f829265725c7c0ed1689dedfc2356,f9a79fe4,Reduce font weight of bottom tab text.,"Reduce font weight of bottom tab text.

Also slightly reduce the padding between text and icons.

Bug: T146411
Change-Id: Iffa777ec4a48634a9ba0fda21b59f76c745c6b1c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474578375,1474578375,975b2ec5d57c0ccad1843c7212a6376e0e2eeed6
f95194bae4eea96a362c63ec10522660b2b57595,f95194ba,"Merge ""Gruntfile.js: Remove unused 'pkg' property""","Merge ""Gruntfile.js: Remove unused 'pkg' property""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474573067,1474573067,"5976be7013389d2b4f096dba2660c2d9803fe729,86d3ad9a825471ba6211bebacaba4000ea0c342c"
84c8bce963c29d98458ee212770bf0be9d3c4bd0,84c8bce9,Hygiene: remove redundant code from FeedView,"Hygiene: remove redundant code from FeedView

Remove programmatic configuration of minColumnWidth. This attribute is
set in XML.

Change-Id: I8d13a7cc27a4b1a103e5eff1796a357e13a7d900
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474482285,1474572339,5976be7013389d2b4f096dba2660c2d9803fe729
5976be7013389d2b4f096dba2660c2d9803fe729,5976be70,Scrolling header at the top of Feed.,"Scrolling header at the top of Feed.

A simple dark-blue background that overlaps behind the Search bar, and a
portion of the first non-search card in the feed.

Also slightly decrease the size of the WP wordmark in the toolbar.

Bug: T145895
Bug: T145888
Change-Id: I6a8fb2b061909075fb477bcf7315bc775cd6d09a
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1474061149,1474572125,b1108acadda9f7994bcc311590501735078af9b9
b1108acadda9f7994bcc311590501735078af9b9,b1108aca,"Merge ""Hygiene: encapsulate FeedAdapter callback in class""","Merge ""Hygiene: encapsulate FeedAdapter callback in class""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474570024,1474570024,"cf2f67adbfbac2d0506129d84b74578341a89658,7b0fd568e75bcad8973bb4f211f2576c556d8e76"
cf2f67adbfbac2d0506129d84b74578341a89658,cf2f67ad,"Merge ""Hygiene: move PageTitleListCardItemCallback""","Merge ""Hygiene: move PageTitleListCardItemCallback""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474569464,1474569464,"f5fc558db8324a5a1b93b4970b5e488a1fbca6c9,570a3daf5edbab18aaa71c2d923788066e9942d3"
f5fc558db8324a5a1b93b4970b5e488a1fbca6c9,f5fc558d,"Merge ""Hygiene: name callback s/getters consistently""","Merge ""Hygiene: name callback s/getters consistently""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474569286,1474569286,"1783ac0f72afaa3de885e3b012a0607ddd8702d2,e10d6b76a5ced9db75e335ed76dda922e6b60a73"
22a4f78a4c1d2ae4ad82e2dd6e45415d8f48a22c,22a4f78a,Hygiene: move article toolbar to custom View,"Hygiene: move article toolbar to custom View

Change-Id: I5baf2a6dc4c491ce8e13a7aa218f727c295bb684
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474564092,1474567992,1783ac0f72afaa3de885e3b012a0607ddd8702d2
58eee822e5762477175455a6060572e75b9bef66,58eee822,Hygiene: replace ImageButton with ImageView,"Hygiene: replace ImageButton with ImageView

Replace ImageButtons with ImageViews and add the appropriate styling
where needed. ImageButton is nearly identical to ImageView. It seems
more appropriate to use ImageViews with styles than subclasses for such
little gain. Also remove some unused ImageView attributes, replace a
AppCompatImageView declaration with ImageView which is the implicit
implementation, and replace a usage of #ffffff with the platform white
symbol.

Change-Id: Ia79c02c211e464d2c8310bd7961dda71b710d237
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473791400,1474563188,1783ac0f72afaa3de885e3b012a0607ddd8702d2
1783ac0f72afaa3de885e3b012a0607ddd8702d2,1783ac0f,"Merge ""Fix regression of clipping News items to padding.""","Merge ""Fix regression of clipping News items to padding.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474561154,1474561154,"27afd2964fbf29b6108c8d5dec03002ccb95c84f,387d099ab73ea02ed9f11ce2cb8b85591fc1b870"
387d099ab73ea02ed9f11ce2cb8b85591fc1b870,387d099a,Fix regression of clipping News items to padding.,"Fix regression of clipping News items to padding.

One of our recent changes has brought back the issue of News items being
clipped to the padding/margin of their parent RecyclerView.

This correctly restores the no-clipping behavior, allowing the News items
to extend all the way to the edge of the card.

Change-Id: I42621c6cd075664bdca46e2b07e34d283dc6454f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474550349,1474550708,975b2ec5d57c0ccad1843c7212a6376e0e2eeed6
27afd2964fbf29b6108c8d5dec03002ccb95c84f,27afd296,Allow Dark mode for MainActivity.,"Allow Dark mode for MainActivity.

There was really only one color attribute that needed to be introduced to
support dark mode.

This also requires us to set the statusBarColor programmatically, since
the theme is now set dynamically (and it's shared with other activities
that might not want a custom statusBarColor). Might be the subject of a
future refactor.

Bug: T145686
Bug: T146109
Change-Id: Ia952336b043aec0be39743cb10e2f0fb3a574b77
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474494700,1474495311,975b2ec5d57c0ccad1843c7212a6376e0e2eeed6
532f0fb4dcef9823aaf303bef80fa093cfe098a9,532f0fb4,Hygiene: move FeedViewCallback to FeedAdapter,"Hygiene: move FeedViewCallback to FeedAdapter

Change-Id: Id9f302237469637405de51c4bd413cf311186bb0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474495298,1474495298,8e9c2100230d62d93b121fef8ffa53577917c3c3
8e9c2100230d62d93b121fef8ffa53577917c3c3,8e9c2100,Hygiene: encapsulate NewsListCardView's callback,"Hygiene: encapsulate NewsListCardView's callback

Change-Id: I63539c2a7f2c351f8da0b1c0b46e1764fc224419
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474495067,1474495067,462daa94cf05be758264ac828065bac6aca6c2de
462daa94cf05be758264ac828065bac6aca6c2de,462daa94,Hygiene: encapsulate SearchCardView's callback,"Hygiene: encapsulate SearchCardView's callback

Change-Id: Icf476bca12b3b8901acd781e2e1283770a8c93d8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474494964,1474494964,bb363c1baced3b76d705116e65f52395ed323e4c
bb363c1baced3b76d705116e65f52395ed323e4c,bb363c1b,Hygiene: move FeaturedImageCardView callback,"Hygiene: move FeaturedImageCardView callback

Encapsulate FeaturedImageCardView's callback as
FeaturedImageCardView.Callback.

Change-Id: Ideeed05abecb0de2b662a02d9d65de32aad10558
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474494847,1474494847,e569604da911d37fbbc15882d2ab5c38262f722a
e569604da911d37fbbc15882d2ab5c38262f722a,e569604d,Hygiene: encapsulate CardHeaderView callback,"Hygiene: encapsulate CardHeaderView callback

Move CardHeaderView's callback to within the class itself. This makes it
obvious to clients what the true dependencies of the class' callback are
because its precise and gives a clear CardHeaderView.Callback reference.

Change-Id: Ifd20df3f32d46176b7b28987c263708b69b764eb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474494575,1474494575,7b0fd568e75bcad8973bb4f211f2576c556d8e76
7b0fd568e75bcad8973bb4f211f2576c556d8e76,7b0fd568,Hygiene: encapsulate FeedAdapter callback in class,"Hygiene: encapsulate FeedAdapter callback in class

Move FeedAdapter specific callback into FeedAdapter.Callback.

Change-Id: Id8c68b20b1b5693cc7a1c473a92d4fd31b07ca0e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474494400,1474494400,570a3daf5edbab18aaa71c2d923788066e9942d3
570a3daf5edbab18aaa71c2d923788066e9942d3,570a3daf,Hygiene: move PageTitleListCardItemCallback,"Hygiene: move PageTitleListCardItemCallback

Move PageTitleListCardItemCallback into
PageTitleListCardItemView.Callback since this is what the callback is
attached to and the pattern we use for Fragments.

Change-Id: Id56e2c3396f519bde077ffa08a24b1c0faccf235
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474494136,1474494136,e10d6b76a5ced9db75e335ed76dda922e6b60a73
e10d6b76a5ced9db75e335ed76dda922e6b60a73,e10d6b76,Hygiene: name callback s/getters consistently,"Hygiene: name callback s/getters consistently

Change-Id: Ic7043296b355ccef33dea73cd665fdfa357b5c2c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474492508,1474492508,975b2ec5d57c0ccad1843c7212a6376e0e2eeed6
86d3ad9a825471ba6211bebacaba4000ea0c342c,86d3ad9a,Gruntfile.js: Remove unused 'pkg' property,"Gruntfile.js: Remove unused 'pkg' property

It's unused and was most likely copied from another repo that
also didn't need it.

Change-Id: Ie8d1c905f382adc50ee71648e57bcfcf3f306ed2
",,,,Timo Tijhof,krinklemail@gmail.com,Timo Tijhof,krinklemail@gmail.com,1474483522,1474483522,975b2ec5d57c0ccad1843c7212a6376e0e2eeed6
975b2ec5d57c0ccad1843c7212a6376e0e2eeed6,975b2ec5,Hygiene: convert SearchCardView to Butter Knife,"Hygiene: convert SearchCardView to Butter Knife

Change-Id: Ia6f2d97f9155384ccce07ed664dea0c4f15e5796
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474430116,1474431268,f9a08c17333c257a023e58613e0c8e390fc46b14
f9a08c17333c257a023e58613e0c8e390fc46b14,f9a08c17,Hygiene: unify feed card interface,"Hygiene: unify feed card interface

Handle all feed cards in the same way. Also, use set/get prefixes to
avoid less obvious mistakes like calling super.card() instead of
super.card(Card) when overriding card(Card).

Change-Id: Icda23061f7d07b73cccebaa74fb7907f695d2786
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474429629,1474431263,116734f929c59bfded8a5106ebf00ec4f0f1764c
116734f929c59bfded8a5106ebf00ec4f0f1764c,116734f9,Workaround ItemTouchHelper NPE,"Workaround ItemTouchHelper NPE

This issue occurs with ""don't keep activities"" enabled while quickly
tapping a news item.

Change-Id: Idaed5f133806ad3d70cae3039e2f445c7b98159b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474413639,1474413984,8d477133652d60af15914bde17d3430ba05acf5b
8d477133652d60af15914bde17d3430ba05acf5b,8d477133,Hygiene: make feed cards branch polymorphically,"Hygiene: make feed cards branch polymorphically

Feed card types were encapsulated in a few large switches. This works
well enough but since similar functionality is expected of each
specialization, formalizing differences in a custom CardType seems less
error prone and more flexible.

Change-Id: I5e9480a8c5cd11485f068719bff689e6abb03366
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474413322,1474413984,16f8fe698677cb743dc9f43d1129d9a115b4c5ce
16f8fe698677cb743dc9f43d1129d9a115b4c5ce,16f8fe69,Hygiene: move FeedView Adapter config to client,"Hygiene: move FeedView Adapter config to client

Focus FeedView on presentation and exposing user interaction callbacks
by moving adapter logic to the client.

Change-Id: I1f03b48cde5ef7c7a694426688a97693f8273231
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474400968,1474413892,04d34c8448c40ac7795fe00ae0d0c319834a2754
04d34c8448c40ac7795fe00ae0d0c319834a2754,04d34c84,Hygiene: treat FeedView like an AdapterView,"Hygiene: treat FeedView like an AdapterView

FeedView is now a plain RecyclerView. It seems clearer to interact with
adapters conventionally than to invoke helper methods. Remove update().

Change-Id: I89092221fd3e2ca76aa20e66698d42b09b6a25fb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474397540,1474413777,87fa3c683a601646a83bf944731c9c861c4876f9
c4e2cb099746bb77a8e99df38dd7ca67f92151e9,c4e2cb09,Remove underscores from video filenames when loading in gallery,"Remove underscores from video filenames when loading in gallery

It seems that a video's being playable in the Gallery activity depends
on its filename NOT containing underscores in place of spaces.  Use
StringUtil.removeUnderscores to remove them when loading from the content
service.  (They're already absent when coming from mobileview HTML.)

Bug: T140905
Change-Id: I3a7eceb55051adf3f40cd583ef2d661141894236
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1474403740,1474403852,87fa3c683a601646a83bf944731c9c861c4876f9
87fa3c683a601646a83bf944731c9c861c4876f9,87fa3c68,"Merge ""Fix NPE crash in SearchFragment.""","Merge ""Fix NPE crash in SearchFragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474392151,1474392151,"4ba27be58f8a1ea225496c5b3b11966bf222e839,ed9a7606753bee05eb9f8401b3cf53fcc2fbec9f"
4ba27be58f8a1ea225496c5b3b11966bf222e839,4ba27be5,"Merge ""Fix a couple lint issues.""","Merge ""Fix a couple lint issues.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474390611,1474390611,"21e66ca53512e3e01797611d7bd2cb23e191613b,e793280c9a39461b4e7f45d90c4b89151a0b1364"
ed9a7606753bee05eb9f8401b3cf53fcc2fbec9f,ed9a7606,Fix NPE crash in SearchFragment.,"Fix NPE crash in SearchFragment.

In the case when the user taps the ""Go"" button on the soft keyboard, the
closeSearch() method was being called twice! (it's called automatically
from navigateToTitle())

Bug: T146142
Change-Id: Ia835403f4728bef64370f65df41bd430ea597564
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1474378592,1474390193,e793280c9a39461b4e7f45d90c4b89151a0b1364
21e66ca53512e3e01797611d7bd2cb23e191613b,21e66ca5,"Merge ""Hygiene: remove duplicate code in ListCardView""","Merge ""Hygiene: remove duplicate code in ListCardView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474389649,1474389649,"a6d15ac1c050e17cad18e2d862689273b6218df8,ad2d22aa0f8bb50f9ddc4c222aea55b6b9c86e41"
e793280c9a39461b4e7f45d90c4b89151a0b1364,e793280c,Fix a couple lint issues.,"Fix a couple lint issues.

- There was one offending string resource that was using an incorrect
  format specifier.
- In AccountUtil, our usage of the getAccountsByType() method was being
  flagged as a candidate for needing to ask for a runtime permission.
  However, since we don't actually need this permission in API >= 23, this
  is a false alarm, and I simply added an explicit check for
  SecurityException, which shouldn't happen, but it fixes lint.

Change-Id: Ibb20ac95b4b72721d31fb76cd429fc0d247cbfad
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474377925,1474389579,ac0852041936ffe96b1f74c8b50dd26e20bb4bc4
a6d15ac1c050e17cad18e2d862689273b6218df8,a6d15ac1,"Merge ""Hygiene: rename FeedRecyclerAdapter to FeedAdapter""","Merge ""Hygiene: rename FeedRecyclerAdapter to FeedAdapter""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474383347,1474383347,"7053bc4441c71553f8e97df50c23c6ca546a2a28,1e3e219100e5b359d816d41c7bb60de29d354fcb"
7053bc4441c71553f8e97df50c23c6ca546a2a28,7053bc44,"Merge ""Hygiene: refactor feed CardView listener to file""","Merge ""Hygiene: refactor feed CardView listener to file""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474381552,1474381552,"8cd6e06082ca780c4e252937969415eb52d10a95,8999b9bbcf7e481a3f601efa6258cef3354d03e7"
8cd6e06082ca780c4e252937969415eb52d10a95,8cd6e060,"Merge ""Hygiene: remove dead feed CardView code""","Merge ""Hygiene: remove dead feed CardView code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474381338,1474381338,"58d66bdd76f36e940743b5a3c3d36638e517c2e5,0521ef8046f6848d057be48def66c67eb17f41c4"
58d66bdd76f36e940743b5a3c3d36638e517c2e5,58d66bdd,"Merge ""Avoid Fragment IllegalStateException""","Merge ""Avoid Fragment IllegalStateException""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474380898,1474380898,"8da4d4d7236f0f8bd3480eae29c2cdb1d9ce502b,6bc49d02587e3b433120012e7707c267c2993675"
8da4d4d7236f0f8bd3480eae29c2cdb1d9ce502b,8da4d4d7,"Merge ""push to origin in make-release""","Merge ""push to origin in make-release""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474380497,1474380497,"ac0852041936ffe96b1f74c8b50dd26e20bb4bc4,175836bcad3d0e416f2fa2562cb1d3b8d90c27e5"
ad2d22aa0f8bb50f9ddc4c222aea55b6b9c86e41,ad2d22aa,Hygiene: remove duplicate code in ListCardView,"Hygiene: remove duplicate code in ListCardView

Refactor HorizontalScrollingListCardView to subclass ListCardView. The
current @Override mechanism seems clumsy and could probably be further
improved but is preferable to the nearly identical code in ListCardView.

Change-Id: Ib54e329104f7e7a635e06c81a3dc929b33fd3b73
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474330369,1474330369,8999b9bbcf7e481a3f601efa6258cef3354d03e7
8999b9bbcf7e481a3f601efa6258cef3354d03e7,8999b9bb,Hygiene: refactor feed CardView listener to file,"Hygiene: refactor feed CardView listener to file

Move HorizontalScrollingListCardView.DontInterceptTouchListener to new
file. The listener is large and independent enough to separate.

Change-Id: Idbfbfa1a8c4025566b1a8357e6d36da034f8fdda
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474329161,1474329161,0521ef8046f6848d057be48def66c67eb17f41c4
0521ef8046f6848d057be48def66c67eb17f41c4,0521ef80,Hygiene: remove dead feed CardView code,"Hygiene: remove dead feed CardView code

Remove unused code in HorizontalScrollingListCardView.

Change-Id: I0feb7d5373594ab29735c655d52228adb8b926ff
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474328701,1474328701,6bc49d02587e3b433120012e7707c267c2993675
6bc49d02587e3b433120012e7707c267c2993675,6bc49d02,Avoid Fragment IllegalStateException,"Avoid Fragment IllegalStateException

Allowing state loss isn't best practice but custom handling of Fragments
rarely works well. This workaround was intended for f96ce1f and should
be eliminated in T145834.

  java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=65581, result=-1, data=Intent { (has extras) }} to activity {org.wikipedia.beta/org.wikipedia.MainActivity}: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
     at android.app.ActivityThread.deliverResults(ActivityThread.java:3384)
     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3427)
     at android.app.ActivityThread.access$1300(ActivityThread.java:139)
     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1248)
     at android.os.Handler.dispatchMessage(Handler.java:102)
     at android.os.Looper.loop(Looper.java:136)
     at android.app.ActivityThread.main(ActivityThread.java:5103)
     at java.lang.reflect.Method.invokeNative(Native Method)
     at java.lang.reflect.Method.invoke(Method.java:515)
     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:606)
     at dalvik.system.NativeStart.main(Native Method)
  Caused by: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
     at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1527)
     at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1545)
     at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:654)
     at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:621)
     at org.wikipedia.MainFragment.openSearchFragment(MainFragment.java:423)
     at org.wikipedia.MainFragment.onActivityResult(MainFragment.java:129)
     at android.support.v4.app.FragmentActivity.onActivityResult(FragmentActivity.java:165)
     at android.app.Activity.dispatchActivityResult(Activity.java:5467)
     at android.app.ActivityThread.deliverResults(ActivityThread.java:3380)
     ... 11 more

https://rink.hockeyapp.net/manage/apps/226650/app_versions/48/crash_reasons/137015016

Change-Id: I6ebdeea38b7925f230060f681828bea0cdcfb508
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474327559,1474327559,175836bcad3d0e416f2fa2562cb1d3b8d90c27e5
175836bcad3d0e416f2fa2562cb1d3b8d90c27e5,175836bc,push to origin in make-release,"push to origin in make-release

Bug: T141314
Change-Id: I064bff17d83de7c6ffee04d9484dc74ecbcbad04
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474326835,1474326835,ccfdd67e0630769da6b011eda6b57e42cfd2012e
ac0852041936ffe96b1f74c8b50dd26e20bb4bc4,ac085204,Bump versionCode,"Bump versionCode

Change-Id: I32ad726c1c925bb2d7cceed473c19d436ab2a939
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474316559,1474316578,18e6b3c2d7821404f3c4dbb52766aa71e470399f
18e6b3c2d7821404f3c4dbb52766aa71e470399f,18e6b3c2,Fix custom overflow button when it's shown from the real overflow menu.,"Fix custom overflow button when it's shown from the real overflow menu.

...also remove the hacky long-press handling from the overflow button,
since we now have a title for it.

Bug: T145911
Change-Id: Iaec085445e2f840a90704f2a42a0b9c4f26f95cd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474306775,1474309939,ccfdd67e0630769da6b011eda6b57e42cfd2012e
ccfdd67e0630769da6b011eda6b57e42cfd2012e,ccfdd67e,"Merge ""Give a text label to the Feed overflow menu button.""","Merge ""Give a text label to the Feed overflow menu button.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474300499,1474300499,"575b1836ac332e655d67ce6c5184c0cdc559142a,562bc2d4ce70b6aeffaf28472ebbf5be090991d3"
575b1836ac332e655d67ce6c5184c0cdc559142a,575b1836,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I3f7081e77183c3faf151a0a6b263098b0a978db1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474298600,1474299265,1de64919f1f6507c5aec350a2d076e842b1f813e
562bc2d4ce70b6aeffaf28472ebbf5be090991d3,562bc2d4,Give a text label to the Feed overflow menu button.,"Give a text label to the Feed overflow menu button.

Because our ""custom"" overflow button uses @null as its title, it can lead
to some unexpected behavior. For example, in the rare case when this
button is forced to overflow into the ""real"" overflow menu provided by
Android, the resulting menu item appears empty.

This patch simply provides a text label for the custom overflow button, so
that if it overflows ""for real"", it will at least have a label.

Bug: T145911
Change-Id: If5bf1c3b4918dd29af1ebd146b156bc704d0732b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474291158,1474291158,1de64919f1f6507c5aec350a2d076e842b1f813e
1de64919f1f6507c5aec350a2d076e842b1f813e,1de64919,"Merge ""Upgrade to Spoon v1.7.0""","Merge ""Upgrade to Spoon v1.7.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474287427,1474287427,"c6b78cfe3b1757ba557965f7ccb37e07df5e7747,735c0d266e1ab0671ed6bc8782ce8cc081ca6814"
c6b78cfe3b1757ba557965f7ccb37e07df5e7747,c6b78cfe,"Merge ""Upgrade to OkHttp v3.4.1 and Retrofit v2.1.0""","Merge ""Upgrade to OkHttp v3.4.1 and Retrofit v2.1.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474287172,1474287172,"8f03d70439954e1cdf74f22ae998d578a54b2045,0688759ef4a44966418d631c42af4059879ad024"
8f03d70439954e1cdf74f22ae998d578a54b2045,8f03d704,"Merge ""Upgrade to Fresco v0.13.0""","Merge ""Upgrade to Fresco v0.13.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474285895,1474285895,"646b6829aec03d0b6e6b36204da5e39b5f5d4fc5,7d0533db3f42d6196d33234ef658a86f0cd84880"
646b6829aec03d0b6e6b36204da5e39b5f5d4fc5,646b6829,Bump versionCode,"Bump versionCode

Change-Id: Ia4ef9dde2ae0226aeb57ac9da871092318de5bd4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474062255,1474062287,f96ce1f0e4b08bcb3a31afaf8830283746143acd
1e3e219100e5b359d816d41c7bb60de29d354fcb,1e3e2191,Hygiene: rename FeedRecyclerAdapter to FeedAdapter,"Hygiene: rename FeedRecyclerAdapter to FeedAdapter

FeedView now descends from a RecyclerView. Everything in FeedView is
RecyclerView-centric. Rename FeedRecyclerAdapter to FeedAdapter.

Change-Id: I994d1e82eea6c198f2b488ee5207134ce2d86d4e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474061863,1474061863,735c0d266e1ab0671ed6bc8782ce8cc081ca6814
735c0d266e1ab0671ed6bc8782ce8cc081ca6814,735c0d26,Upgrade to Spoon v1.7.0,"Upgrade to Spoon v1.7.0

https://github.com/square/spoon/blob/master/CHANGELOG.md#version-154-2016-05-31
https://github.com/square/spoon/blob/master/CHANGELOG.md#version-155-2016-06-15
https://github.com/square/spoon/blob/master/CHANGELOG.md#version-156-2016-06-15
https://github.com/square/spoon/blob/master/CHANGELOG.md#version-157-2016-06-29
https://github.com/square/spoon/blob/master/CHANGELOG.md#version-160-2016-07-11
https://github.com/square/spoon/blob/master/CHANGELOG.md#version-161-2016-07-13
https://github.com/square/spoon/blob/master/CHANGELOG.md#version-162-2016-07-26
https://github.com/square/spoon/blob/master/CHANGELOG.md#version-163-2016-08-08
https://github.com/square/spoon/blob/master/CHANGELOG.md#version-164-2016-08-09
https://github.com/square/spoon/blob/master/CHANGELOG.md#version-170-2016-09-12

Change-Id: Iba1f67192510c15c76a5e76be7744d9ead9e9d25
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474061176,1474061176,f96ce1f0e4b08bcb3a31afaf8830283746143acd
f96ce1f0e4b08bcb3a31afaf8830283746143acd,f96ce1f0,Use newInstance() pattern for SearchFragment,"Use newInstance() pattern for SearchFragment

Changes:

• Use newInstance() pattern for SearchFrament. The SearchFragment is no
  longer inflated from XML which has a different lifecycle and is less
  flexible.

• Side effect fix for the Fragment state bug, T145698.

• Remove needless FrameLayout with SearchFragment from fragment_main. No
  other changes intended.

Unintentional changes in behavior and notes:

• The animation to dismiss the search fragment is too quick. An Activity
  (SearchActivity) or Fragment transition should probably be used.

• The query from the previous search is not preserved in the query box
  after dismissing the SearchFragment. This could be added back in but
  seems simpler to keep out for now.

• Searching from m.wikipedia.org is broken but this isn't a regression.

• Tapping a search result from m.wikipedia.org and then tapping the back
  arrow is broken but this isn't a regression.

• The callback structure is weak but this isn't really a regression. A
  future patch should make a SearchActivity and use that.

• There's some similar code in PageActivity and MainFragment that could
  be consolidate with a little work. It seems preferable to make
  SearchActivity in a future patch and just delete this code instead.

• The query is unconditionally trimmed in MainFrament and PageActivity.
  This seems desirable and a future patch may place this trim in
  SearchFragment.newInstance().

Bug: T145698
Bug: T145693
Change-Id: If89136d33827bef75b58795b26641c1628948a3e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473985005,1474059470,1c5d920638cede7fbbfa19fcb5d70d39780ce1a0
1c5d920638cede7fbbfa19fcb5d70d39780ce1a0,1c5d9206,Use Foundation color as app-wide accent color.,"Use Foundation color as app-wide accent color.

This sets Foundation Blue as the ""accent color"" for the app's theme. This
means a couple things:

- Components that have a color to them (e.g. ProgressBar, Switch, etc)
  will automatically inherit their color from this setting. We no longer
  need to set the color on a per-component basis (like we were doing with
  ProgressBars)
- We will now finally ""own"" the accent color in the components that our
  app uses, and be able to apply our brand to them.

Change-Id: I8cce0ecc20542f15c466e136d479ebef9ec95bbb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473711498,1474048725,a0c0ba529fc4eee14e087a4a747102396343fa72
0688759ef4a44966418d631c42af4059879ad024,0688759e,Upgrade to OkHttp v3.4.1 and Retrofit v2.1.0,"Upgrade to OkHttp v3.4.1 and Retrofit v2.1.0

https://github.com/square/okhttp/blob/master/CHANGELOG.md#version-341
https://github.com/square/okhttp/blob/master/CHANGELOG.md#version-340
https://github.com/square/okhttp/blob/master/CHANGELOG.md#version-340-rc1
https://github.com/square/retrofit/blob/master/CHANGELOG.md#version-210-2016-06-15

Change-Id: I4a739ade3c9e870e90c2ae5aba9c888fe7812d4b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474045639,1474045639,7d0533db3f42d6196d33234ef658a86f0cd84880
7d0533db3f42d6196d33234ef658a86f0cd84880,7d0533db,Upgrade to Fresco v0.13.0,"Upgrade to Fresco v0.13.0

Also replace demo code copies per release notes[0,1,2]. From 6efeb95:

  [3]: MultiPointerGestureDetector, TransformGestureDetector
  [4]: DefaultZoomableController, ZoomableController, ZoomableDraweeView

The javax.annotation.Nullable import was changed to the Support library
and Checkstyle config updated to ignore these files.

[0] https://github.com/facebook/fresco/releases/tag/v0.11.0
[1] https://github.com/facebook/fresco/releases/tag/v0.12.0
[2] https://github.com/facebook/fresco/releases/tag/v0.13.0
[3] https://github.com/facebook/fresco/tree/master/samples/gestures/src/main/java/com/facebook/samples/gestures
[4] https://github.com/facebook/fresco/tree/master/samples/zoomable/src/main/java/com/facebook/samples/zoomable

Change-Id: I64be6993cb1ec4acb6509daf3a1d8a7373b28431
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1474044075,1474045053,a0c0ba529fc4eee14e087a4a747102396343fa72
a0c0ba529fc4eee14e087a4a747102396343fa72,a0c0ba52,"Show overflow menu (Login, etc) in Feed fragment only.","Show overflow menu (Login, etc) in Feed fragment only.

Bug: T144028
Change-Id: Ia8b04672b0dbc694b795674e069519adb4292b25
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474038679,1474042918,ba219b2a77074c9a8429c62b3e8c5117e089610f
ba219b2a77074c9a8429c62b3e8c5117e089610f,ba219b2a,"Merge ""Show Search icon in Feed when Search bar scrolled away.""","Merge ""Show Search icon in Feed when Search bar scrolled away.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474041378,1474041378,"767c11db2c43a97d067f6ce782acb03240819d09,90a2a6b7d04552819f2157943f9c28976e42ff58"
767c11db2c43a97d067f6ce782acb03240819d09,767c11db,"Merge ""Hygiene: remove dead GalleryItemFragment constant""","Merge ""Hygiene: remove dead GalleryItemFragment constant""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474039030,1474039030,"bd1f74dfbee217f49798d145c4eb65e0368be747,49793d26a8676aa1a5a47f6e09ba9c7a35aa99b0"
bd1f74dfbee217f49798d145c4eb65e0368be747,bd1f74df,"Merge ""Hygiene: set initial container visibility in XML""","Merge ""Hygiene: set initial container visibility in XML""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474038980,1474038980,"7699be0ecbfd70236fb9f3bbd0a4903171903f20,a6c890922e1cda18fba58d591f27868e1383b378"
7699be0ecbfd70236fb9f3bbd0a4903171903f20,7699be0e,"Merge ""Improve timing of hiding link preview when loading a new page.""","Merge ""Improve timing of hiding link preview when loading a new page.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1474038592,1474038592,"36f0ac1fc9f0558cb31153aa6ebcffe88b990db6,9b90f5830ba2b4ca03750f54a49c8693d5be6ee5"
49793d26a8676aa1a5a47f6e09ba9c7a35aa99b0,49793d26,Hygiene: remove dead GalleryItemFragment constant,"Hygiene: remove dead GalleryItemFragment constant

Change-Id: I1dedf3a3aea51749ab99b1581c7533d938067943
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473974940,1474038071,a6c890922e1cda18fba58d591f27868e1383b378
a6c890922e1cda18fba58d591f27868e1383b378,a6c89092,Hygiene: set initial container visibility in XML,"Hygiene: set initial container visibility in XML

Change-Id: I22dbdbd73d6b129a3f3415e8901a8aa7bd930d03
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473972351,1474038071,4994f86d0204361d387c26c9a70c2de32d176f11
36f0ac1fc9f0558cb31153aa6ebcffe88b990db6,36f0ac1f,Hygiene: remove redundant code in NavTabView/Test,"Hygiene: remove redundant code in NavTabView/Test

• Remove redundant Drawable padding change. It's unclear why but the
  screenshots showed the slightest jitter seemingly from this change so
  update them too.

• Remove screen width as a variable for layout direction. NavTabView is
  no longer responsive.

Change-Id: I00183908177674f65250ba77e9fe95f3c05cad07
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473871937,1474037668,4dccc53151bf0190fab87c3a3c7cf08e36634990
4dccc53151bf0190fab87c3a3c7cf08e36634990,4dccc531,Update NavTabViewTest screenshots,"Update NavTabViewTest screenshots

These became outdated with a previous update to the test but were not
refreshed.

Change-Id: Ie2ddc7cd5bc218d3944243fa3a5cc96e6b5dd889
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473871247,1474037584,4994f86d0204361d387c26c9a70c2de32d176f11
9b90f5830ba2b4ca03750f54a49c8693d5be6ee5,9b90f583,Improve timing of hiding link preview when loading a new page.,"Improve timing of hiding link preview when loading a new page.

Bug: T145697
Change-Id: I5ec56fd991b0bb1ac61bd6149d8c61752cab1ad6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474036492,1474036492,4994f86d0204361d387c26c9a70c2de32d176f11
90a2a6b7d04552819f2157943f9c28976e42ff58,90a2a6b7,Show Search icon in Feed when Search bar scrolled away.,"Show Search icon in Feed when Search bar scrolled away.

Bug: T145683
Change-Id: I20530a194de02f0847e0a3cc40ee0acb582a47d4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1474035395,1474036069,4994f86d0204361d387c26c9a70c2de32d176f11
4994f86d0204361d387c26c9a70c2de32d176f11,4994f86d,Annotate tests that do not require a WebView,"Annotate tests that do not require a WebView

BasePageLoadTest is annotated as @LargeTest but there isn't a flag known
to run all tests not annotated. Instead, annotate all other
instrumentation tests as @Small.

Bug: T133183
Change-Id: Iee336a91b2b610b0ffb53a6bcd3d43f6a4ba90c8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dmitry Brant,dbrant@wikimedia.org,1473787074,1474032156,38527f31db6c354cfe9389767f5eb2f291861b10
38527f31db6c354cfe9389767f5eb2f291861b10,38527f31,"Merge ""Hygiene: use @OnClick for SearchFragment listeners""","Merge ""Hygiene: use @OnClick for SearchFragment listeners""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473980992,1473980992,"41b80779e31d8a288b13ec32d760f92df47dd616,b1f229f8ba48dfdcd498049cb7e5a2112ee11955"
41b80779e31d8a288b13ec32d760f92df47dd616,41b80779,"Merge ""Hygiene: refactor SearchFragment""","Merge ""Hygiene: refactor SearchFragment""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473980991,1473980991,"e1accd89c5596c98fb45939cae1e2f632868abcf,a2b1bb17e64e830b68365ce1395590c4b5d7e9f0"
e1accd89c5596c98fb45939cae1e2f632868abcf,e1accd89,"Merge ""Null View listener in SearchFragment.onDestroyView""","Merge ""Null View listener in SearchFragment.onDestroyView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473980863,1473980863,"2ed03c9ca139a02a3a068421140968c47aeecadc,8392e311c2aca1070e6770b31d560e53c9d8fd14"
2ed03c9ca139a02a3a068421140968c47aeecadc,2ed03c9c,"Merge ""Hygiene: use @BindView for SearchFragment View""","Merge ""Hygiene: use @BindView for SearchFragment View""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473980812,1473980812,"617968679152f0d8db042bf49004f44ffd4b2898,338c4a9c02234f375055525dd3699c0796850ff1"
b1f229f8ba48dfdcd498049cb7e5a2112ee11955,b1f229f8,Hygiene: use @OnClick for SearchFragment listeners,"Hygiene: use @OnClick for SearchFragment listeners

Change-Id: I14af19ea104d36424d86e31cea1edbc75080b2d4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473971861,1473972789,a2b1bb17e64e830b68365ce1395590c4b5d7e9f0
a2b1bb17e64e830b68365ce1395590c4b5d7e9f0,a2b1bb17,Hygiene: refactor SearchFragment,"Hygiene: refactor SearchFragment

• Move SearchFragment.InvokeSource to separate file, SearchInvokeSource.
  This enum was at home in SearchFragment but is large and independent.

• Move SearchFragment variables to the top of the class.

• Group public SearchFragment methods at the top of the class.

• Make showLangPreferenceDialog() private because it can be.

No functional changes intended.

Change-Id: Ice0531d005db762aee6e49d49a8e638a2839cb4e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473971278,1473972789,8392e311c2aca1070e6770b31d560e53c9d8fd14
8392e311c2aca1070e6770b31d560e53c9d8fd14,8392e311,Null View listener in SearchFragment.onDestroyView,"Null View listener in SearchFragment.onDestroyView

Change-Id: I913be47d9deb04b228521b3dfc97bc835a566f93
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473970464,1473972789,338c4a9c02234f375055525dd3699c0796850ff1
338c4a9c02234f375055525dd3699c0796850ff1,338c4a9c,Hygiene: use @BindView for SearchFragment View,"Hygiene: use @BindView for SearchFragment View

Change-Id: If395bfe424376385633b17fcea91c5693dac2b05
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473970330,1473972789,bdd8e3acf26a29d056c9f6e6a2c9b98b594069c1
617968679152f0d8db042bf49004f44ffd4b2898,61796867,Fix Fragment crash when leaving GalleryActivity,"Fix Fragment crash when leaving GalleryActivity

The GalleryActivity manipulates Fragments in strange ways. Undo the
performance changs in 3c6e0b5. The Activity no longer crashes but
loses the currently viewed image until the Activity is closed.

Bug: T145700
Bug: T145802
Change-Id: Id2aaaf8537fe123029e881ecaee97515e17a8acf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473961009,1473961009,2c89c4b7ab749de27b7c138e540f90faf9b78f45
2c89c4b7ab749de27b7c138e540f90faf9b78f45,2c89c4b7,Fix two NPEs in nearby,"Fix two NPEs in nearby

• Respect Fragment / View lifecyels per 56a5e7a:

    Call MapView.onDestroy in Fragment.onDestroyView()

    After switching to Butter Knife in 715b322, the MapView's lifecycle
    was properly accounted for as Fragment.onCreateView() to
    onDestroyView(). In 8b63ffb, a null check was added to
    Fragment.onDestroy() where MapView.onDestroy() was called per
    documentation. However, this can't be correct because MapView will
    always be null at this time. Move the call to
    Fragment.onDestroyView() instead of checking for null.

• Android lifecycles are nuttier than chunky peanut butter. The docs[0]
  stress that onSaveInstanceState() may be called at any time before
  onDestroy(). This means the View hierarchy may have been destroyed and
  nulled by onSaveInstanceState() invocation and must be checked before
  used.

[0] https://developer.android.com/reference/android/support/v4/app/Fragment.html#onSaveInstanceState(android.os.Bundle)

Bug: T145705
Change-Id: I3f1e493bbab8b5b1973b87affe82d3e29801d45a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473958454,1473959137,af6860ea42f0f1b367cd8d3bbcdf9c89cb7ca418
af6860ea42f0f1b367cd8d3bbcdf9c89cb7ca418,af6860ea,Hygiene: remove dead code in FeaturedImageCard,"Hygiene: remove dead code in FeaturedImageCard

Change-Id: I6b155e2931f5710f8ab58d4d3267707bf095f225
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473954559,1473954563,fabf65fd851a39ef20eeebb805168de0de62451c
fabf65fd851a39ef20eeebb805168de0de62451c,fabf65fd,Thoroughly fix feed card equals contracts,"Thoroughly fix feed card equals contracts

2cb18da patched BecauseYouReadCard.equals() but missed other omissions.
This patch fixes all cases and leverages Card.equals() and hashCode()
inherited from the reflective BaseModel. A future patch may benefit from
implementing a marker pattern on Cards that are dismissable.

Change-Id: I0b91d1cd61e645469326182fa85ffc1fa6817b58
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473954183,1473954183,bdd8e3acf26a29d056c9f6e6a2c9b98b594069c1
bdd8e3acf26a29d056c9f6e6a2c9b98b594069c1,bdd8e3ac,Bump versionCode,"Bump versionCode

Change-Id: I6878e0efcb875643604674c3b737fee7847dc836
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473882100,1473882100,7f92fd3305763cece1487a9e72d66047a794070a
7f92fd3305763cece1487a9e72d66047a794070a,7f92fd33,Remove random from aggregated feed parsing,"Remove random from aggregated feed parsing

We had random data display in earlier versions of the app but don't actually use it.
During an RB deploy today where we wanted to change the format to an array
we discovered that the app was still expecting the random property to be an object.

Therefore let's remove the random property from even being read in
to allow for more flexibility in the future.

Change-Id: I56a33249d0083c88eec3254aca9173a7c8edfbd6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1473880933,1473880933,87f733e3d2735b11021a93e09079033b96685e85
87f733e3d2735b11021a93e09079033b96685e85,87f733e3,Bump versionCode,"Bump versionCode

Increment version minor too: v2.4.153

Change-Id: Ia237182ab0f7a102f9fe22d2749412fa496ab42d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473879416,1473879466,3277887c456a342d7b7321686a0fc4f68f037f3d
3277887c456a342d7b7321686a0fc4f68f037f3d,3277887c,Use correct protocol for feed requests,"Use correct protocol for feed requests

Change-Id: Ia6afa83e4e103eb26687ba5f8087cb6e61608add
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1473877968,1473877968,eb732f1650d6d99f3ef0d93cc8b2deab6cae94e0
eb732f1650d6d99f3ef0d93cc8b2deab6cae94e0,eb732f16,"Merge ""Design tweaks to NavTab bar.""","Merge ""Design tweaks to NavTab bar.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473870327,1473870327,"2c36b8f4d8510931a08ed054dbb7a24c30d4d21b,26e0fd0dbd6228f603bbad6a7de9ce1ae7c4cacd"
26e0fd0dbd6228f603bbad6a7de9ce1ae7c4cacd,26e0fd0d,Design tweaks to NavTab bar.,"Design tweaks to NavTab bar.

Make it adhere precisely to the Material spec:
- Height is exactly 56dp
- Text size is 14sp for active tab and 12sp for inactive tabs
- No bottom-border
- Same style for handset and tablet.
- Update reference screenshots for tests.

https://material.google.com/components/bottom-navigation.html#bottom-navigation-specs

Bug: T145421
Change-Id: I34a239807db0e72693903643ce33d3c17728feb3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1473780930,1473862680,831b43fe0d883ba3abf3aa66f54d3ba3511deb78
2c36b8f4d8510931a08ed054dbb7a24c30d4d21b,2c36b8f4,Design tweaks to Explore feed.,"Design tweaks to Explore feed.

- Use correct background color.
- Give additional padding to the first card in the feed, so that it's not
  too close to the Toolbar.

This is accomplished by creating an extra type of ItemDecoration that only
has an effect on the first item in the RecyclerView, and only takes a
parameter for the top margin.

Bug: T145422
Change-Id: I07c3d448e476339031fe5268e1e35abbb1b021e1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473783217,1473862565,831b43fe0d883ba3abf3aa66f54d3ba3511deb78
831b43fe0d883ba3abf3aa66f54d3ba3511deb78,831b43fe,"Merge ""Hygiene: Convert two fields in PageFragment class to local variables""","Merge ""Hygiene: Convert two fields in PageFragment class to local variables""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473860516,1473860516,"efeb05cdc6b105810aa2e405d4e5933d7ac74b19,50f178ee4e8b2d75387edc704e083ea11c61b5bf"
efeb05cdc6b105810aa2e405d4e5933d7ac74b19,efeb05cd,"Merge ""Test null listener in CardLargeHeaderViewTest""","Merge ""Test null listener in CardLargeHeaderViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473860249,1473860249,"78e8fa905a45e15b94267db2977ec15825ab9e58,fac85546ac6b3ecf1e3eedaf39a3549b6e7fe80b"
78e8fa905a45e15b94267db2977ec15825ab9e58,78e8fa90,"Merge ""Move generic TextView assertion method to ViewTest""","Merge ""Move generic TextView assertion method to ViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473859946,1473859946,"4670bde3c1e32041aae77aa3797e8c0aa3074006,d4ea14b52a122850ba9b7e846986b1a05407aac1"
4670bde3c1e32041aae77aa3797e8c0aa3074006,4670bde3,"Merge ""Hygiene: reduce visibility of @OnClick methods""","Merge ""Hygiene: reduce visibility of @OnClick methods""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473859540,1473859540,"e1a6c3fcc6d3bfac8f63b593ae827686d3ee7330,aad1a877cd676aa82bc71bec81ea60d617774e70"
e1a6c3fcc6d3bfac8f63b593ae827686d3ee7330,e1a6c3fc,"Merge ""Add missing tests to CardLargeHeaderViewTest""","Merge ""Add missing tests to CardLargeHeaderViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473859201,1473859201,"6fc08503183a070d67b0a069475a3e92a6855fe6,943ae1cb44a0423852acf0ea8c5b586b2c7b54b7"
6fc08503183a070d67b0a069475a3e92a6855fe6,6fc08503,"Merge ""Add missing interface tests to NavTabViewTest""","Merge ""Add missing interface tests to NavTabViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473858529,1473858529,"ee5ad5c6b57f84a27af8c61d11156017dfb09c29,292b326bb083ce65f3c88663f569cfcb49d361a1"
50f178ee4e8b2d75387edc704e083ea11c61b5bf,50f178ee,Hygiene: Convert two fields in PageFragment class to local variables,"Hygiene: Convert two fields in PageFragment class to local variables

This patch convers two fields in the class to local variables as they are
only used in a single method. This generally improves code cleanliness and
slightly improves performance.

Change-Id: I753d39f99de4ba58cb9429bd19e5bf12d91a61e2
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1473804197,1473804197,ee5ad5c6b57f84a27af8c61d11156017dfb09c29
fac85546ac6b3ecf1e3eedaf39a3549b6e7fe80b,fac85546,Test null listener in CardLargeHeaderViewTest,"Test null listener in CardLargeHeaderViewTest

Change-Id: I34d32e4708fc01d1c5627ccb45eee9aa9a646dba
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473801626,1473802281,d4ea14b52a122850ba9b7e846986b1a05407aac1
d4ea14b52a122850ba9b7e846986b1a05407aac1,d4ea14b5,Move generic TextView assertion method to ViewTest,"Move generic TextView assertion method to ViewTest

assertText() will be used by other ViewTest subclasses.

Change-Id: I05ff167cc00ef4f76f8bf2ddcacf116db8b0b060
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473801258,1473801258,aad1a877cd676aa82bc71bec81ea60d617774e70
aad1a877cd676aa82bc71bec81ea60d617774e70,aad1a877,Hygiene: reduce visibility of @OnClick methods,"Hygiene: reduce visibility of @OnClick methods

@OnClick methods should be private but Butter Knife requires at least
package visibility. Set method visibility to the minimum.

Change-Id: I98def99115c8a61b7ddbdb794e297e30623b9ba8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473798930,1473798930,943ae1cb44a0423852acf0ea8c5b586b2c7b54b7
943ae1cb44a0423852acf0ea8c5b586b2c7b54b7,943ae1cb,Add missing tests to CardLargeHeaderViewTest,"Add missing tests to CardLargeHeaderViewTest

Test all methods exposed by the subject.

Change-Id: I8dcbeff284ae70c9ad0ab88530b90179238ffcea
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473797722,1473797722,292b326bb083ce65f3c88663f569cfcb49d361a1
ee5ad5c6b57f84a27af8c61d11156017dfb09c29,ee5ad5c6,"Merge ""Add ""back"" button in reading list detail view.""","Merge ""Add ""back"" button in reading list detail view.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473794494,1473794494,"d9632560bbb5281156130ef4ff1bd63f35445ecf,c625be12af4a938a439cbb9b459e0aa488ca9782"
292b326bb083ce65f3c88663f569cfcb49d361a1,292b326b,Add missing interface tests to NavTabViewTest,"Add missing interface tests to NavTabViewTest

Change-Id: I53daa2e4c39cb68b50dc511a8d6b9286b01a6b4d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473794197,1473794197,439f71b42da8c560dc37f953113eda1d911cbc97
d9632560bbb5281156130ef4ff1bd63f35445ecf,d9632560,Hygiene: update deprecated @LargeTest import,"Hygiene: update deprecated @LargeTest import

http://stackoverflow.com/questions/38551547/smalltest-mediumtest-and-largetest-deprecated-on-android

Change-Id: I73b30e39ae3450c3aab55d59509f5364a23d03cf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473783771,1473783805,439f71b42da8c560dc37f953113eda1d911cbc97
c625be12af4a938a439cbb9b459e0aa488ca9782,c625be12,"Add ""back"" button in reading list detail view.","Add ""back"" button in reading list detail view.

This is a somewhat temporary solution, until we make the reading list
detail view into its own ActionMode or even its own Activity.

Bug: T145423
Change-Id: Ib438fa827fe2fa0030e8d32bb772bd9b3cf6fb60
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473779348,1473783599,cebf23a20263acf02ab4014e2c3432e1a056677e
439f71b42da8c560dc37f953113eda1d911cbc97,439f71b4,Close ActionMode when switching away from current fragment.,"Close ActionMode when switching away from current fragment.

Bug: T145210
Change-Id: I0bb961f090e820969702a05bfd5467da7998a331
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473441051,1473703710,cebf23a20263acf02ab4014e2c3432e1a056677e
cebf23a20263acf02ab4014e2c3432e1a056677e,cebf23a2,"Merge ""Fix reading list fragment state when adding items.""","Merge ""Fix reading list fragment state when adding items.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473694393,1473694393,"f55aacf781c305adcc34b3d192b4f968003d265b,e6dc825c082c4c9a6bc5d58d0a53c1f7a605d60a"
f55aacf781c305adcc34b3d192b4f968003d265b,f55aacf7,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id635abaa2ba7bf95e2870c23bd90b1bcce769934
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473692611,1473692784,a3e41bcca6841030dced4dd533fec0d144639e83
e6dc825c082c4c9a6bc5d58d0a53c1f7a605d60a,e6dc825c,Fix reading list fragment state when adding items.,"Fix reading list fragment state when adding items.

- When adding an item to a reading list from the Feed, and then switching
  directly to the Reading Lists tab, the list was not being updated, since
  the fragment wasn't getting any sort of event to update itself.
- Added Snackbars when adding a page to a reading list. The snackbar
  shown in PageActivity does not (yet) have an action to go to the
  selected reading list, since this will require activityResult logic
  (subsequent patch).

Change-Id: Iaa5b0da37873777c4b5f1c91503f390e49aecf0a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473430783,1473447909,558fc2207d45775357a97693b928c2fe0ff38075
a3e41bcca6841030dced4dd533fec0d144639e83,a3e41bcc,"Merge ""Show login success Snackbar in MainActivity.""","Merge ""Show login success Snackbar in MainActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473437610,1473437610,"659fba88a309367c7e9d27be1948df5cb3c163c5,f050e8c1a51524c7fcf087c43aebc011071b0720"
659fba88a309367c7e9d27be1948df5cb3c163c5,659fba88,"Merge ""Fix Snackbar positioning from Fragments.""","Merge ""Fix Snackbar positioning from Fragments.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473435262,1473435262,"1c0458d1f328494750623082908fe55d45319f08,deaf2e232c6de267f9c1bd98d00028940eda62ba"
1c0458d1f328494750623082908fe55d45319f08,1c0458d1,"Merge ""Fix deleting items from reading lists, and reading list fragment state.""","Merge ""Fix deleting items from reading lists, and reading list fragment state.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473433917,1473433917,"5d1d77db68f5643625d053a28489d983ba96289e,558fc2207d45775357a97693b928c2fe0ff38075"
f050e8c1a51524c7fcf087c43aebc011071b0720,f050e8c1,Show login success Snackbar in MainActivity.,"Show login success Snackbar in MainActivity.

...and take out the login success logic from PageActivity.

Change-Id: Ica3dd011d6dde1363242555163f7cb2f8dc7bcda
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473433700,1473433700,1d8a38423e3ac3e0eb128d3bd29ef41813f443a4
deaf2e232c6de267f9c1bd98d00028940eda62ba,deaf2e23,Fix Snackbar positioning from Fragments.,"Fix Snackbar positioning from Fragments.

This fixes the way that Snackbars are shown from within Fragments, since
FragmentUtil relies on which Activity the fragment belongs to, and latches
on to the appropriate CoordinatorLayout.

In MainActivity, this means that Snackbars will be correctly shown above
the tab bar (instead of overlapping it).

Change-Id: Ic38ab59f9ea6362e147d656492f3b59ab516221b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473433247,1473433247,1d8a38423e3ac3e0eb128d3bd29ef41813f443a4
558fc2207d45775357a97693b928c2fe0ff38075,558fc220,"Fix deleting items from reading lists, and reading list fragment state.","Fix deleting items from reading lists, and reading list fragment state.

- Searching of items in a reading list introduced some additional state
  that wasn't being updated when items were deleted/restored to the
  reading list.
- This also makes the ReadingListsFragment explicitly go to the
  list-of-lists page when the fragment is resumed, since it doesn't (yet)
  preserve the state of which reading list was viewed in the DetailView,
  which may result in a blank DetailView (see bug). (todo: preserve state)

Bug: T144859
Change-Id: I7cb322735d969a5222d63638ba246eb4dd1102cf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473428018,1473428018,1d8a38423e3ac3e0eb128d3bd29ef41813f443a4
5d1d77db68f5643625d053a28489d983ba96289e,5d1d77db,Don't resize the main screen when keyboard is up,"Don't resize the main screen when keyboard is up

Pan the app, don't resize it, when bringing up the soft keyboard for
history, reading list, nearby queries.

Change-Id: Id7e1f3e2dc51f38fcb65d90693a687a934e3f997
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473369806,1473369806,1d8a38423e3ac3e0eb128d3bd29ef41813f443a4
1d8a38423e3ac3e0eb128d3bd29ef41813f443a4,1d8a3842,"Merge ""Update ProgressBar and SwipeRefresh styles to use Foundation colors.""","Merge ""Update ProgressBar and SwipeRefresh styles to use Foundation colors.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473369472,1473369472,"db310f8ff0d894f51777e42e232d8d3f574f9d5c,07d7c4cd7482a6012c0cbda815161367988d6380"
db310f8ff0d894f51777e42e232d8d3f574f9d5c,db310f8f,"Merge ""Make Featured Article image tappable.""","Merge ""Make Featured Article image tappable.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473369305,1473369305,"578dd30286ac00094b8ccbfba382675d87d5c590,ee6c9608d2ef4dc4d94794cb0eeb65bfa7bb37fd"
07d7c4cd7482a6012c0cbda815161367988d6380,07d7c4cd,Update ProgressBar and SwipeRefresh styles to use Foundation colors.,"Update ProgressBar and SwipeRefresh styles to use Foundation colors.

The SwipeRefresh color must be set programmatically (couldn't find an xml attribute for it).

Change-Id: I9d94fd484d2791e3f66a243cca9ceeb8db5a9372
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473367527,1473367527,f5555e2b836de3753da7e0e01f1053d325c192d3
ee6c9608d2ef4dc4d94794cb0eeb65bfa7bb37fd,ee6c9608,Make Featured Article image tappable.,"Make Featured Article image tappable.

Bug: T139383
Change-Id: I51eb59bc19f2cd0e55fb125abbc95a9be6cd0868
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473366442,1473366442,f5555e2b836de3753da7e0e01f1053d325c192d3
578dd30286ac00094b8ccbfba382675d87d5c590,578dd302,Show the keyboard when tapping the history search,"Show the keyboard when tapping the history search

Show the soft keyboard when tapping on the history or reading list query
buttons. DeviceUtil.showSoftKeyboard() didn't seem to work previously.
This patch updates the method to work in the nebulous way described
here[0].

[0] http://stackoverflow.com/a/6514702/970346

Change-Id: I7b6cc13917022ac4050851d32d90174f1ace9b9b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473360396,1473360819,f5555e2b836de3753da7e0e01f1053d325c192d3
f5555e2b836de3753da7e0e01f1053d325c192d3,f5555e2b,Use a proper ActionMode for searching History and Reading Lists.,"Use a proper ActionMode for searching History and Reading Lists.

Our loyal users who have 1000+ pages in reading lists can now search them!

This adds a ""search"" button to the actual Toolbar in the History and
Reading Lists fragments, which takes the user to a proper ActionMode that
dispatches search queries.

Searching of reading lists is two-pronged, since it depends on whether the
user is looking at the list of lists or the pages in a particular list.
When looking at the list of lists, I was able to tweak the db query that
fetches the list so that it includes the search term. Unfortunately the
same cannot be done when looking at individual list pages; in this case,
we're manually searching the pages and showing the results.

Bug: T145100
Change-Id: Iebf78a0bda3f92774ada0faac479053e105dcc99
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1473353652,1473359407,4c44f8d5fb32e53b332ed20059d4d74d084ad133
4c44f8d5fb32e53b332ed20059d4d74d084ad133,4c44f8d5,"Merge ""Hook up hiding and fading of Page toolbar.""","Merge ""Hook up hiding and fading of Page toolbar.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473355260,1473355260,"3fdcf9197346a40092c929eea04514f236789c4a,917c8bdb080c4c86a920c390421d5f65b0c94235"
917c8bdb080c4c86a920c390421d5f65b0c94235,917c8bdb,Hook up hiding and fading of Page toolbar.,"Hook up hiding and fading of Page toolbar.

I tried using a CoordinatorLayout to control the behavior of the Toolbar
with respect to the WebView; I really did! But my best attemps proved
futile. The most reasonable solution for now is simply to use the old
""hide-handler"" pattern, so I brought back the old HideHandler and hooked
it up to the Toolbar in PageActivity.

This also adds a bit of functionality: when you're scrolled deeply into a
page (with the toolbar hidden), you can now click anywhere within the
WebView, and it will cause the toolbar to appear again (scrolling is no
longer necessary to show it).

Change-Id: Ia0a427c58790fb8e7bf748a1c12963c9b7788604
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473257076,1473353727,9bc2ebd31de29e65b20e0edd65df65384a069b58
3fdcf9197346a40092c929eea04514f236789c4a,3fdcf919,"Merge ""Restrict lead image click area to the image, not the whole header.""","Merge ""Restrict lead image click area to the image, not the whole header.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473350186,1473350186,"1fc4fed5e805a81c1290d6c6a7903a0f807e0ce2,7a40f441ac2577e14914f25beee05466f6d76f4c"
1fc4fed5e805a81c1290d6c6a7903a0f807e0ce2,1fc4fed5,"Merge ""Don't show duplicate search results.""","Merge ""Don't show duplicate search results.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473348734,1473348734,"aaec1496f8289cb2fea649f4f63a19839f0f87a5,d83b1f9563a5569f26a2dfe62d90773a999347c4"
7a40f441ac2577e14914f25beee05466f6d76f4c,7a40f441,"Restrict lead image click area to the image, not the whole header.","Restrict lead image click area to the image, not the whole header.

Right now clicking the article title or description opens the image
gallery with the lead image. It's only clicking the image itself that
should take the user to the gallery.

Change-Id: Ic7e00dd710564e8a724e7e9c423273ba0708c443
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473348574,1473348574,67e4d41dffd393a1b984f876576135d56b3de796
aaec1496f8289cb2fea649f4f63a19839f0f87a5,aaec1496,Resume reading Page if exited from PageActivity within 1 day.,"Resume reading Page if exited from PageActivity within 1 day.

This reinstates the behavior of going directly to PageActivity if the user
exits from PageActivity (i.e. home button) within 24 hours.

This also correctly preserves the user's scroll position on their
last-read page.

And it also correctly refreshes the ""tab-count"" icon in the toolbar of the
Explore feed.

Bug: T144853
Change-Id: I078936dece6b2604029977906c6d9965a5fe7ff1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473346334,1473346848,67e4d41dffd393a1b984f876576135d56b3de796
d83b1f9563a5569f26a2dfe62d90773a999347c4,d83b1f95,Don't show duplicate search results.,"Don't show duplicate search results.

Bug: T143280
Change-Id: Idd95a05fbf11438b008286e649eabb882bff4f0d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473344119,1473344119,67e4d41dffd393a1b984f876576135d56b3de796
67e4d41dffd393a1b984f876576135d56b3de796,67e4d41d,"Merge ""Update screenshot names for packaging changes""","Merge ""Update screenshot names for packaging changes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473340935,1473340935,"7d90093905a18775be77b60d792ec4351be247b4,173b1235e11ff31cd1bce1ef3c811f930c18876e"
7d90093905a18775be77b60d792ec4351be247b4,7d900939,"Merge ""Add special header styles""","Merge ""Add special header styles""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473338613,1473338613,"9bc2ebd31de29e65b20e0edd65df65384a069b58,a4daba490fc924c0326bb848b995df62c8f3bf15"
9bc2ebd31de29e65b20e0edd65df65384a069b58,9bc2ebd3,"Merge ""Update home-as-up logic in PageActivity.""","Merge ""Update home-as-up logic in PageActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473284284,1473284284,"a0cd8e15ed3b405c53ab7d8257c3a215dbe4d1b9,e5898f9ecf258d188d66d2bf7b27a3d563a133da"
a0cd8e15ed3b405c53ab7d8257c3a215dbe4d1b9,a0cd8e15,"Merge ""Correctly handle different Intent types between Main- and PageActivity.""","Merge ""Correctly handle different Intent types between Main- and PageActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473281901,1473281901,"63c74412c8cccdcd32d131cee75621b2cb84baef,520476934a2bd1538a5a3d830c68467bdf40dade"
e5898f9ecf258d188d66d2bf7b27a3d563a133da,e5898f9e,Update home-as-up logic in PageActivity.,"Update home-as-up logic in PageActivity.

The behavior upon which we decided is as follows:

- If the user taps the home-as-up button in the Toolbar, it will close the
  PageActivity and take the user back to MainActivity (without popping the
  current page from the backstack). This means that it needs to explicitly
  launch MainActivity, since there are Intents that launch PageActivity as
  a standalone thing.

- Whereas, if the user taps the physical Back button, the behavior is the
  same as before:  the current page is popped from the current tab's
  backstack, and if there are no more pages, the activity is closed.

Change-Id: I1f361365bea300ed425e66f1ae85120aaa062e3a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473266604,1473281695,520476934a2bd1538a5a3d830c68467bdf40dade
520476934a2bd1538a5a3d830c68467bdf40dade,52047693,Correctly handle different Intent types between Main- and PageActivity.,"Correctly handle different Intent types between Main- and PageActivity.

This patch finishes distributing the responsibilities of handling
different Intents between PageActivity and MainActivity. All
""search""-related intents will now be handled in MainActivity, and all
""page""-related intents continue to be handled in PageActivity.

Bug: T144029
Bug: T143442
Change-Id: Id7fac893faf2e594f63d2035e9722230a5422035
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473262778,1473275286,032a6df0bef5b3c3e85f5da304a65ab3d2316b9e
63c74412c8cccdcd32d131cee75621b2cb84baef,63c74412,Update style of Close button in AddToReadingListDialog.,"Update style of Close button in AddToReadingListDialog.

At some point, this button seems to have acquired a gray background.

Change-Id: I8a272d61940fdd8e814a41697647afd3c737af9c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473253848,1473268021,76708f672835c2de82539fd949089be31125e9fd
76708f672835c2de82539fd949089be31125e9fd,76708f67,"Merge ""Update style and order of Tab bar.""","Merge ""Update style and order of Tab bar.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473266959,1473266959,"8f99febbba5aade6867e46cb2ba8ff3b5bea59a2,be40fe775dde88d6b3a34d85c11a9973716d1a32"
be40fe775dde88d6b3a34d85c11a9973716d1a32,be40fe77,Update style and order of Tab bar.,"Update style and order of Tab bar.

- Move Nearby to the last position in the tab list, so that it doesn't get
  unnecessarily initialized when swiping between Explore and History.
- Update style and color to match the design more closely.

Bug: T144656

Change-Id: I4fabe3e12312e3f8a7652bb8649cf8e5867fe46b
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1473253114,1473266367,032a6df0bef5b3c3e85f5da304a65ab3d2316b9e
8f99febbba5aade6867e46cb2ba8ff3b5bea59a2,8f99febb,Change NavTab pager back to FragmentPagerAdapter.,"Change NavTab pager back to FragmentPagerAdapter.

When using a FragmentStatePagerAdapter, the action of swiping between our
Tabs feels noticeably less snappy, since the fragment gets recreated every
time the user swipes to it.

In this particular case, I think that proper memory management must give
way to snappiness.

Change-Id: Ifbce0e7231071d22718d1a2f6071fbe08569efdc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473263328,1473263328,032a6df0bef5b3c3e85f5da304a65ab3d2316b9e
173b1235e11ff31cd1bce1ef3c811f930c18876e,173b1235,Update screenshot names for packaging changes,"Update screenshot names for packaging changes

Change-Id: I6616dc78b8c57cf302aae2e29168e3edb616cee1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473260378,1473260378,032a6df0bef5b3c3e85f5da304a65ab3d2316b9e
032a6df0bef5b3c3e85f5da304a65ab3d2316b9e,032a6df0,"Merge ""Hook up downloading of feed images in overhauled fragment.""","Merge ""Hook up downloading of feed images in overhauled fragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473189667,1473189667,"8b90feda46f7d4a49f1754c8d4ea86b30aa6ce87,333a71deeef51f088ffd129dbe6b8612ee591d4e"
333a71deeef51f088ffd129dbe6b8612ee591d4e,333a71de,Hook up downloading of feed images in overhauled fragment.,"Hook up downloading of feed images in overhauled fragment.

Change-Id: Id55df1645082fe47e18469bacfbf4892bff52e67
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473174612,1473189054,6c1d18b6f19a0611fe38b11f3c9f791f2eeff93b
8b90feda46f7d4a49f1754c8d4ea86b30aa6ce87,8b90feda,"Merge ""Stop sending unnecessary noimages=false param for page combo requests""","Merge ""Stop sending unnecessary noimages=false param for page combo requests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473189021,1473189021,"bbdc6d9d17cf65388478840d7f12e6259a4d8949,3207d3c1d18ee21e10a16066b6f279223c3fbad5"
bbdc6d9d17cf65388478840d7f12e6259a4d8949,bbdc6d9d,"Merge ""Always hide the soft keyboard on the main screen""","Merge ""Always hide the soft keyboard on the main screen""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473188941,1473188941,"6c1d18b6f19a0611fe38b11f3c9f791f2eeff93b,283c1544942d501ffe8a5affc1551df8dae5398b"
6c1d18b6f19a0611fe38b11f3c9f791f2eeff93b,6c1d18b6,"Hook up back behavior in Search fragment, and fix its status bar.","Hook up back behavior in Search fragment, and fix its status bar.

Made the status bar placeholder in the Search fragment hideable by the
parent fragment, since it should be hidden in MainActivity, but visible in
PageActivity.

Bug: T144770
Change-Id: I2ac6178d44ca7a3ad9bc0d068c8a1271ede2b7e6
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1473172423,1473187552,35e3bacdc3cc59a745276ba6de19da6ca78406d7
35e3bacdc3cc59a745276ba6de19da6ca78406d7,35e3bacd,Hook up back-button behavior through the overhauled fragments.,"Hook up back-button behavior through the overhauled fragments.

Keeping track of back-button logic is necessary for fragments that have
sub-navigational behavior, such as the Reading Lists fragment: clicking on
a reading list takes you to the list of pages, then pressing the Back
button takes you back to the list of lists.

Change-Id: Ia0d538d85568583e3ffc0b5c21872971cab42802
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1473170991,1473187544,948064f558348ae9f3dd847c269c8a8db01027f0
948064f558348ae9f3dd847c269c8a8db01027f0,948064f5,Hook up Tabs button in the overhauled toolbar.,"Hook up Tabs button in the overhauled toolbar.

Change-Id: I5edddf1762e6ee1ee579bcbf9a2c53492dda8a0a
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1473169322,1473187451,8ba591af6b2c5719b0a52b6e90bff558b8766b08
8ba591af6b2c5719b0a52b6e90bff558b8766b08,8ba591af,"Merge ""Hook up News and Featured Picture in overhauled feed.""","Merge ""Hook up News and Featured Picture in overhauled feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1473187083,1473187083,"222faeadfb6de96f4774a1b060dc66f52fca0bd6,f7ee8154303fd79a9c5111449f31ffff01fb1dcd"
3207d3c1d18ee21e10a16066b6f279223c3fbad5,3207d3c1,Stop sending unnecessary noimages=false param for page combo requests,"Stop sending unnecessary noimages=false param for page combo requests

For some reason these requests aren't currently leveraging the optional()
method to prevent sending a value of false, which is the default anyway.
This makes them do so.

Change-Id: Idc9087ed6cf71fe2a66d5d07aeace88e2fb538bd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1473185660,1473185660,222faeadfb6de96f4774a1b060dc66f52fca0bd6
f7ee8154303fd79a9c5111449f31ffff01fb1dcd,f7ee8154,Hook up News and Featured Picture in overhauled feed.,"Hook up News and Featured Picture in overhauled feed.

Correctly handle the corresponding ActivityResult from MainFragment and
LinkPreviewDialog.

Change-Id: I9ea0dacb38229c2e049764f6719ab539b42b3f1e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1473168380,1473185609,a302f72525d2403fe5cfe71e3587b5bc6b2c3cf7
222faeadfb6de96f4774a1b060dc66f52fca0bd6,222faead,Hide/show article action toolbar depending on page scroll actions,"Hide/show article action toolbar depending on page scroll actions

Bug: T143766
Change-Id: I12e2e79c09e548aaaab9f24ad87ddb309a05e461
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1472113381,1473179702,a302f72525d2403fe5cfe71e3587b5bc6b2c3cf7
283c1544942d501ffe8a5affc1551df8dae5398b,283c1544,Always hide the soft keyboard on the main screen,"Always hide the soft keyboard on the main screen

The soft keyboard resizes MainActivity to a tiny window, smaller still
in landscape, and nothing accepts input from it. For example:

  1 Open the main screen
  2 Share a story to Gmail and see the soft keyboard pop up
  3 Discard the Gmail draft, allowing the keyboard to persist
  4 (The app is now foregrounded with the soft keyboard)

Now always hide the soft keyboard.

Change-Id: I8ba28ca34d5e26da82280c8b3f8cea2ecd268271
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473177859,1473177859,a302f72525d2403fe5cfe71e3587b5bc6b2c3cf7
a302f72525d2403fe5cfe71e3587b5bc6b2c3cf7,a302f725,Hygiene: rename NavTabViewPagerAdapter,"Hygiene: rename NavTabViewPagerAdapter

Rename NavTabViewPagerAdapter to NavTabFragmentPagerAdapter. NTFPA
returns Fragments and shouldn't be confused with NavTabViews which are
buttons.

Change-Id: I7e36da6ba12aa109232f79050451b7f90cd412ea
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473108030,1473108030,4b7783e65d1284b0baacf268646ed1713f7e67e5
4b7783e65d1284b0baacf268646ed1713f7e67e5,4b7783e6,Hygiene: use Butter Knife in ReadingListFragment,"Hygiene: use Butter Knife in ReadingListFragment

Change-Id: I0c5bebb4e63f00a59173f8d3a110593a06951765
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473107937,1473107937,bc2eebe904172360de80133f2e2b92c5e2433de8
bc2eebe904172360de80133f2e2b92c5e2433de8,bc2eebe9,Fix crash in reading lists screen,"Fix crash in reading lists screen

The default implementation of PagerAdapter.destroyItem() throws an
UnsupportedOperationException and must be overridden. From the docs[0]:

  When you implement a PagerAdapter, you must override the following
  methods at minimum:

  • instantiateItem(ViewGroup, int)
  • destroyItem(ViewGroup, int, Object)
  • getCount()
  • isViewFromObject(View, Object)

[0] https://developer.android.com/reference/android/support/v4/view/PagerAdapter.html

Change-Id: I3460b5352e0468d5c8d55744bf625f32136adbec
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473107507,1473107507,3c6e0b5d16923198f43689085e0422488a0b6555
3c6e0b5d16923198f43689085e0422488a0b6555,3c6e0b5d,Reduce memory usage of Fragment pagers,"Reduce memory usage of Fragment pagers

Use FragmentStatePagerAdapter instead of FragmentPagerAdapter[0]:

  This version of the pager is more useful when there are a large number
  of pages, working more like a list view. When pages are not visible to
  the user, their entire fragment may be destroyed, only keeping the
  saved state of that fragment. This allows the pager to hold on to much
  less memory associated with each visited page as compared to
  FragmentPagerAdapter at the cost of potentially more overhead when
  switching between pages.

[0] https://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html

Change-Id: Ia61c468575af1e90eaab16aae42f3216a47d3d14
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473107117,1473107117,dbad2b315b38de08c86c558fb64f9509ec128b8c
dbad2b315b38de08c86c558fb64f9509ec128b8c,dbad2b31,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ic1c28102447f588ef9b922c7a4c89c03a0c115c4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1473089822,1473090427,24d62ac510b44a5401c2d778dcb086f4802c7573
24d62ac510b44a5401c2d778dcb086f4802c7573,24d62ac5,Unify and normalize toolbar in MainActivity.,"Unify and normalize toolbar in MainActivity.

- Simplify things by using a single Toolbar in MainActivity, to be used by
  all sub-fragments. (the Feed no longer has its own toolbar.)
- Simplify paddings in other fragments.
- Make the Wikipedia wordmark be part of the Toolbar, and shown only on
  the Explore tab.

Next patch: Improve alignment of Search fragment.

Change-Id: I549c790656862b56bd8efe7e2c0ba4b934ac4423
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1472745691,1472836452,038c75f10f685b0818f4449ef169c5d5aaafd06d
038c75f10f685b0818f4449ef169c5d5aaafd06d,038c75f1,Whoops: Fix showing of Explore overflow menu on all API versions.,"Whoops: Fix showing of Explore overflow menu on all API versions.

Change-Id: Iafa9b58ede5a39b74f821295772164ab9e89873d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1472687121,1472827293,79a4fdfe0ac78a514357037b9bc1a3e2128d9e49
79a4fdfe0ac78a514357037b9bc1a3e2128d9e49,79a4fdfe,"Remove ""overhaul"" designation.","Remove ""overhaul"" designation.

Bug: T143441
Change-Id: I7063241b2b0b444255f3a15425485c09817d7fa0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1472677830,1472827236,091ac1b5fa9b59d31bdad6703559131ff9a1d386
091ac1b5fa9b59d31bdad6703559131ff9a1d386,091ac1b5,"Rip out MainActivity, et al.","Rip out MainActivity, et al.

This removes the old MainActivity, and delegates any of its remaining
references to either PageActivity or OverhaulActivity.

This also rips out other things from the pre-overhaul navigation model,
including the old NavDrawerHelper, RandomHandler, Search fragment, toolbar
hiding handler, etc.

In the next patch, we'll rename OverhaulActivity to MainActivity and
remove any other ""overhaul"" designations.

And in the patch after that, we'll start solidifying which types of
intents will be sent to which activity.

Bug: T143441
Change-Id: Ibb6003b6bcca2fe4298df3c8e2e7e578fa2de2d8
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1472673961,1472826495,966195bdb80fafbf3c2a8dac672c577ab948cb10
966195bdb80fafbf3c2a8dac672c577ab948cb10,966195bd,"Merge ""Add CardLargeHeaderViewTest""","Merge ""Add CardLargeHeaderViewTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472824381,1472824381,"2ec759480d64def690c276eb2440f80aec42f97f,4e47615a98720de5f6ecb5feb2025cf5c126a06d"
2ec759480d64def690c276eb2440f80aec42f97f,2ec75948,"Merge ""Update ViewTest to include system font size""","Merge ""Update ViewTest to include system font size""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472824085,1472824085,"05d4b1e8dfd477cf27d52b024e5884689c7490d2,c60034a83bab37b30a770d0a05bfa8a6b098999e"
05d4b1e8dfd477cf27d52b024e5884689c7490d2,05d4b1e8,"Merge ""Hygiene: simplify CardLargeHeaderView""","Merge ""Hygiene: simplify CardLargeHeaderView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472823735,1472823735,"221335d5ab9cfa36f318795844d6a958319027bc,1bace5110499f32f9d7c917ef645de38eebd73be"
221335d5ab9cfa36f318795844d6a958319027bc,221335d5,"Merge ""Hygiene: remove commented out code""","Merge ""Hygiene: remove commented out code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472823238,1472823238,"960bb19f4008841e4898b7ef672635c6eb75382d,8edb16daa83839593dbf50901d91e52c4af74def"
960bb19f4008841e4898b7ef672635c6eb75382d,960bb19f,"Merge ""Hygiene: remove unused constructors""","Merge ""Hygiene: remove unused constructors""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472823027,1472823027,"d213504ee15a7d08a340828739a71967f582e8a2,a9f5c62d30b0ca83b183dee91d8edf9e38a42a6e"
d213504ee15a7d08a340828739a71967f582e8a2,d213504e,"Merge ""Add NavTabViewTest and initial ViewTest framework""","Merge ""Add NavTabViewTest and initial ViewTest framework""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472822882,1472822882,"eafa3450cf6acc6bc232ae83d37065f133b909ea,6c9c944787d6e2f3e773b99fcb2b98e751351e80"
eafa3450cf6acc6bc232ae83d37065f133b909ea,eafa3450,"Merge ""Add screenshot unit test support and diff script""","Merge ""Add screenshot unit test support and diff script""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472822576,1472822576,"d38139a517e7381f3477b68d5aa66f1ded6622a5,f6110147410ac4d94d89dc3b20e278f492b687b3"
d38139a517e7381f3477b68d5aa66f1ded6622a5,d38139a5,"Merge ""Hygiene: update Namespace Javadocs""","Merge ""Hygiene: update Namespace Javadocs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472818710,1472818710,"efd26199a80fe980f6cdacf51e123867920110d3,802f5d22941c594c190312b982c15a448fc20e4f"
4e47615a98720de5f6ecb5feb2025cf5c126a06d,4e47615a,Add CardLargeHeaderViewTest,"Add CardLargeHeaderViewTest

Bug: T144401
Change-Id: I2da84116a5d4d2e85b6fd704fe61b6d00549406a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472774946,1472775099,c60034a83bab37b30a770d0a05bfa8a6b098999e
c60034a83bab37b30a770d0a05bfa8a6b098999e,c60034a8,Update ViewTest to include system font size,"Update ViewTest to include system font size

Users may specify a font size multiplier. It's important that our Views
are still usable under this configuration. Also some very light
refactoring.

Change-Id: I90e74878f49cbf5b4e6c7fd0afd808ac151adafe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472773879,1472775099,1bace5110499f32f9d7c917ef645de38eebd73be
1bace5110499f32f9d7c917ef645de38eebd73be,1bace511,Hygiene: simplify CardLargeHeaderView,"Hygiene: simplify CardLargeHeaderView

• Fix title for RTL.

• Remove unused subtitle.

• Reduce View hierarchy depth.

• Rename pageTitle to title. This View is generic and shouldn't assume
  an article title will be shown.

Change-Id: Ie0bae4dd3b918e8e78aebf5c88bc24bf621e5c3b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472761903,1472775099,8edb16daa83839593dbf50901d91e52c4af74def
8edb16daa83839593dbf50901d91e52c4af74def,8edb16da,Hygiene: remove commented out code,"Hygiene: remove commented out code

Change-Id: Ibfeb3541b03eaf1f96c2265d9512106aada0fca9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472748185,1472775099,a9f5c62d30b0ca83b183dee91d8edf9e38a42a6e
a9f5c62d30b0ca83b183dee91d8edf9e38a42a6e,a9f5c62d,Hygiene: remove unused constructors,"Hygiene: remove unused constructors

All FeedCardViews are constructed in Javaland, not inflated. Remove
unused and likely unsupported constructors.

Change-Id: Ic159855c143be6edcff52167915fdc29a2945a36
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472747998,1472775094,6c9c944787d6e2f3e773b99fcb2b98e751351e80
6c9c944787d6e2f3e773b99fcb2b98e751351e80,6c9c9447,Add NavTabViewTest and initial ViewTest framework,"Add NavTabViewTest and initial ViewTest framework

Bug: T140019
Change-Id: I86d2b7757c0b02b8dc1b26f1629d46c350d2bc64
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472589662,1472744090,f6110147410ac4d94d89dc3b20e278f492b687b3
f6110147410ac4d94d89dc3b20e278f492b687b3,f6110147,Add screenshot unit test support and diff script,"Add screenshot unit test support and diff script

Add support for screenshot unit tests to detect regressions and a diff
script for identifying them.

The Facebook plugin, although image diffs are shown in the
presentation[0], does not in itself provide them. However, the plugin is
still wanted for its on device Java API. The screenshot diff script
supplements.

Some considerations were made in writing it. An ideal place for image
diffing support would be in the plugin itself, perhaps using Pillow's
ImageChops since it's already a dependency[1,2]. This effort was not
pursued as the plugin bails on the first error and the expected effort
seemed large.

The diff script uses the popular ImageMagick convert command and is
written in Make to test only changed files and easily invoke convert.
A more ideal and lasting solution can be made when tests are being made
regularly.

This is not yet wired into CI but shouldn't cause unwanted errors
either.

[0] http://facebook.github.io/screenshot-tests-for-android/#getting-started
[1] https://github.com/facebook/screenshot-tests-for-android/blob/v0.4.1/plugin/src/py/android_screenshot_tests/recorder.py#L82
[2] https://github.com/facebook/screenshot-tests-for-android/blob/master/README.md#requirements

Bug: T118102
Change-Id: Ib9e25ff0a8d0c1fe7dc61836bf2dd07b71e4f223
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472080968,1472744090,efd26199a80fe980f6cdacf51e123867920110d3
efd26199a80fe980f6cdacf51e123867920110d3,efd26199,"Merge ""Increase ADB timeout""","Merge ""Increase ADB timeout""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472672033,1472672033,"dde42aab4562133e88c5d0e97a90a03214434612,671d00fc34b6f373020437e65e7695af3d13664e"
dde42aab4562133e88c5d0e97a90a03214434612,dde42aab,Use PageActivity (instead of MainActivity) for page-related intents.,"Use PageActivity (instead of MainActivity) for page-related intents.

...in anticipation of removing MainActivity.

Bug: T143442
Change-Id: Ifbbce379696c15c273828565fa6a262a9f99f421
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1472596059,1472662065,b6897e9b79a1e435958c15966cc0534e16c8916e
802f5d22941c594c190312b982c15a448fc20e4f,802f5d22,Hygiene: update Namespace Javadocs,"Hygiene: update Namespace Javadocs

Change-Id: Id572f1011e4dcd80ff2bcbf214e6e6ddca066afa
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472657064,1472657087,b6897e9b79a1e435958c15966cc0534e16c8916e
671d00fc34b6f373020437e65e7695af3d13664e,671d00fc,Increase ADB timeout,"Increase ADB timeout

ADB times out in the rare scenario where a new emulator image must be
created on CI instead of started from a snapshot. 15 minutes is a long
time but CI is really slow.

Change-Id: I1d536c789bf9f7cf5ad3445b8467b2dee21937f0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472598447,1472598447,b6897e9b79a1e435958c15966cc0534e16c8916e
b6897e9b79a1e435958c15966cc0534e16c8916e,b6897e9b,Add Explore overflow menu.,"Add Explore overflow menu.

I ended up implementing this as a custom View, since it turns out to be
nearly impossible to put custom layouts into popup menu items.

This is now its own View, which implements its own popup functionality by
invoking a modal PopupWindow.

A couple ""hacky"" things about this:
- We now have our own ""overflow"" button in the Explore action menu. All of
  the action buttons are configured as ""ifRoom"", so if the display is
  narrow enough, our overflow button can potentially overflow into the
  ""real"" overflow menu provided by the Toolbar. But this is highly
  unlikely, since there are only three buttons total.
- I'm overriding the long-press handler of the overflow button to match
  the behavior of the ""real"" overflow button, which is to automatically
  invoke the overflow window, instead of showing a Toast with the title of
  the button.

Bug: T144028
Change-Id: I06832eefc7d92d2f9759cfaaa9e9fe8230f0e09f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1472566523,1472581916,a68e134be42211c277f93c79adf6f65c5e65f280
a68e134be42211c277f93c79adf6f65c5e65f280,a68e134b,"Merge ""Fix nav tab icon RTL position""","Merge ""Fix nav tab icon RTL position""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472571615,1472571615,"d9dd09558541a5cb60fae652c55e1817a5e44cee,9dc97555f26a5d5275e3146092fdd7dbebb8c079"
d9dd09558541a5cb60fae652c55e1817a5e44cee,d9dd0955,"Merge ""Tie BecauseYouReadCard equals & hashCode together""","Merge ""Tie BecauseYouReadCard equals & hashCode together""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472571127,1472571127,"bd6c1b81bddd8bbb4c715c9b9885e44e51b73ce6,2cb18da67b1d1751cd63ef5debbb72a19dca3c2b"
bd6c1b81bddd8bbb4c715c9b9885e44e51b73ce6,bd6c1b81,"Merge ""Truncate subtitles in Feed card headers""","Merge ""Truncate subtitles in Feed card headers""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472570346,1472570346,"d9bd9d533e9d6502f8e0c8e7cc20d9653cbd06ee,6e20875b4076e8e6c38975a210038ab51410d56f"
d9bd9d533e9d6502f8e0c8e7cc20d9653cbd06ee,d9bd9d53,"Merge ""Hygiene: remove cast""","Merge ""Hygiene: remove cast""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472570147,1472570147,"6ee4271e4d6ece2472a199c415ee2d6ed6d4f834,d971b878fffefac864651e6bf89e35ed1213037f"
6ee4271e4d6ece2472a199c415ee2d6ed6d4f834,6ee4271e,"Merge ""Hygiene: misc cleanup""","Merge ""Hygiene: misc cleanup""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472569990,1472569990,"5b9e60c287758553bd3a39234074bb301fb9925f,ee06ebb9672a2b4375cd468a76a822ace357daf2"
5b9e60c287758553bd3a39234074bb301fb9925f,5b9e60c2,"Merge ""Upgrade Robolectric to v3.1.2""","Merge ""Upgrade Robolectric to v3.1.2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472569768,1472569768,"ee0c812742b0c90eb4a05dfb5f69d6a56e0a93f2,8e0dd484817400285de3b0c3a465e4d3718c2480"
ee0c812742b0c90eb4a05dfb5f69d6a56e0a93f2,ee0c8127,"Merge ""Upgrade Gson to v2.7""","Merge ""Upgrade Gson to v2.7""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472569559,1472569559,"1e95a1da0b56714209430ba2ac6002cedc843bc8,fff730baacfd66cdddf303066a6de9b5c5005f5c"
8e0dd484817400285de3b0c3a465e4d3718c2480,8e0dd484,Upgrade Robolectric to v3.1.2,"Upgrade Robolectric to v3.1.2

No release notes available.

Change-Id: I9b240737dea3d2d97e8c97799984d232fa754127
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472163685,1472568816,bc1fa949ac50b9fa7459efbc69c38f43b37185b9
9dc97555f26a5d5275e3146092fdd7dbebb8c079,9dc97555,Fix nav tab icon RTL position,"Fix nav tab icon RTL position

• Flip the tab icon side for RTL languages.

• Remove needless layout width and height adjustment.

Change-Id: I2b68bc08eb0f71e4357b808a07f62df0694069ab
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472246781,1472568704,bc1fa949ac50b9fa7459efbc69c38f43b37185b9
d971b878fffefac864651e6bf89e35ed1213037f,d971b878,Hygiene: remove cast,"Hygiene: remove cast

Change-Id: I927cc86251777b04f9d485a266a99608a8080141
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472504295,1472568591,bc1fa949ac50b9fa7459efbc69c38f43b37185b9
2cb18da67b1d1751cd63ef5debbb72a19dca3c2b,2cb18da6,Tie BecauseYouReadCard equals & hashCode together,"Tie BecauseYouReadCard equals & hashCode together

Kind of fix broken equals() and hashCode() contract[0] by overriding
equals() to use the same object:

  Indicates whether some other object is ""equal to"" this one.

  The equals method implements an equivalence relation on non-null
  object references:

  • It is reflexive: for any non-null reference value x, x.equals(x)
    should return true.
  • It is symmetric: for any non-null reference values x and y,
    x.equals(y) should return true if and only if y.equals(x) returns
    true.
  • It is transitive: for any non-null reference values x, y, and z, if
    x.equals(y) returns true and y.equals(z) returns true, then
    x.equals(z) should return true.
  • It is consistent: for any non-null reference values x and y,
    multiple invocations of x.equals(y) consistently return true or
    consistently return false, provided no information used in equals
    comparisons on the objects is modified.
  • For any non-null reference value x, x.equals(null) should return
    false.

  The equals method for class Object implements the most discriminating
  possible equivalence relation on objects; that is, for any non-null
  reference values x and y, this method returns true if and only if x
  and y refer to the same object (x == y has the value true).

  Note that it is generally necessary to override the hashCode method
  whenever this method is overridden, so as to maintain the general
  contract for the hashCode method, which states that equal objects must
  have equal hash codes.

A real fix should probably just subclass BaseModel or autogenerate the
methods but this will be incompatible with SharedPreferences state.

[0] https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object)

Change-Id: I123879d78d93793ebbd3e04bbee73498944f51ea
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472513163,1472568466,bc1fa949ac50b9fa7459efbc69c38f43b37185b9
6e20875b4076e8e6c38975a210038ab51410d56f,6e20875b,Truncate subtitles in Feed card headers,"Truncate subtitles in Feed card headers

When space is unavailable, truncate the subtitle.

Change-Id: I61959361570e896935efa5f98c21a591e8c1ecb0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472505492,1472568116,bc1fa949ac50b9fa7459efbc69c38f43b37185b9
ee06ebb9672a2b4375cd468a76a822ace357daf2,ee06ebb9,Hygiene: misc cleanup,"Hygiene: misc cleanup

Remove a dead method and reduce visibility of another method.

Change-Id: I577c43cd4e74a8271cde146f1e488ca75c646249
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472513676,1472568028,bc1fa949ac50b9fa7459efbc69c38f43b37185b9
fff730baacfd66cdddf303066a6de9b5c5005f5c,fff730ba,Upgrade Gson to v2.7,"Upgrade Gson to v2.7

https://github.com/google/gson/blob/master/CHANGELOG.md#version-27

Change-Id: I3e12b01f79b0bb834cf5bcf1f629503119aa1274
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472534715,1472567994,bc1fa949ac50b9fa7459efbc69c38f43b37185b9
1e95a1da0b56714209430ba2ac6002cedc843bc8,1e95a1da,Hygiene: move callback to Butter Knife annotation,"Hygiene: move callback to Butter Knife annotation

Change-Id: I55cfad8357e012228e3bcceb46bd794c91d64966
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472565457,1472567934,57c068ec5bf2ed820160b6df0645acef66c0c0a5
57c068ec5bf2ed820160b6df0645acef66c0c0a5,57c068ec,Upgrade Butter Knife to v8.4.0,"Upgrade Butter Knife to v8.4.0

https://github.com/JakeWharton/butterknife/blob/master/CHANGELOG.md#version-840-2016-08-26
https://github.com/JakeWharton/butterknife/blob/master/CHANGELOG.md#version-830-2016-08-23
https://github.com/JakeWharton/butterknife/blob/master/CHANGELOG.md#version-821-2016-07-11
https://github.com/JakeWharton/butterknife/blob/master/CHANGELOG.md#version-820-2016-07-10
https://github.com/JakeWharton/butterknife/blob/master/CHANGELOG.md#version-810-2016-06-14

Change-Id: Ia4f0fb76e32690662f99b745faec0a8ed252a933
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472565106,1472567926,bc1fa949ac50b9fa7459efbc69c38f43b37185b9
bc1fa949ac50b9fa7459efbc69c38f43b37185b9,bc1fa949,"Merge ""Lighten lead image gradient""","Merge ""Lighten lead image gradient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472503508,1472503508,"941a543e8d27206c9c4207b076775113c8754ecc,8a470d71b0e4ab8f591051361bbda56e4a26c7f4"
941a543e8d27206c9c4207b076775113c8754ecc,941a543e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I5aca7b780233f331330e2284d790fb61aff34c2c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472484629,1472485554,5d47a3b221998c4499a822d3aad3d00c5851327c
8a470d71b0e4ab8f591051361bbda56e4a26c7f4,8a470d71,Lighten lead image gradient,"Lighten lead image gradient

Bug: T135294
Change-Id: If9e272849cf7c4ebdba3249c57cc3fe53e8b9dfe
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1472230049,1472230318,5d47a3b221998c4499a822d3aad3d00c5851327c
5d47a3b221998c4499a822d3aad3d00c5851327c,5d47a3b2,Remove testAll task,"Remove testAll task

The testAll Gradle task hasn't been properly supported since allowing
Android instrumentation tests in release build types. It's unused in CI
too so it's appropriate to remove.

Change-Id: Idac5284624513d2f51fb1044f322601bf3a0310f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1472158022,1472162506,5d0e1ad048f19f60d97efd5de4c5874568524a47
5d0e1ad048f19f60d97efd5de4c5874568524a47,5d0e1ad0,Add Mockito support to Android instrument tests,"Add Mockito support to Android instrument tests

Enable Mockito usage in Android instrumentation tests which will
continued to be used for View tests.

Change-Id: I0ab42d0b3d40f86ee8f1df1554a957b85cc8ae21
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1471975914,1472161878,b887fd184e2aebcd0490c36ce82fb4d4f0596f2b
b887fd184e2aebcd0490c36ce82fb4d4f0596f2b,b887fd18,Hygiene: remove redundant Feed code,"Hygiene: remove redundant Feed code

Change-Id: I979f55a5d6fde41bc83698079ef66d9ec2929ccb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1471966421,1472161878,eea2b8d993fc97bee58446e8a5529e2f9cc663da
eea2b8d993fc97bee58446e8a5529e2f9cc663da,eea2b8d9,Hygiene: move Gradle code to gradle subdir,"Hygiene: move Gradle code to gradle subdir

Change-Id: I29e802d206d6a33b938fc10bb74071050f5d0e05
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1470170998,1472161878,ec628edd26bd5e0f341b57cda5b3a1bcdfb32779
ec628edd26bd5e0f341b57cda5b3a1bcdfb32779,ec628edd,Hygiene: move Gradle Spoon code to separate script,"Hygiene: move Gradle Spoon code to separate script

Change-Id: Ic63745cb65aca677aeb61050271c9dbf13feacdb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1470170778,1472161878,524a05c392e48caa170884dd9a50e70e1e9c8ba3
524a05c392e48caa170884dd9a50e70e1e9c8ba3,524a05c3,Hygiene: move Gradle Checkstyle to separate script,"Hygiene: move Gradle Checkstyle to separate script

Change-Id: I95455e19657ed5d6031b082c003c86c32b68b641
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1470170603,1472161878,27a385f7b35a9ba58b62fbcfeb7f94283240a80d
27a385f7b35a9ba58b62fbcfeb7f94283240a80d,27a385f7,Hygiene: move Gradle test code to separate script,"Hygiene: move Gradle test code to separate script

Change-Id: I024b8f874d87387d90ddca0fdc72a1d6f53c30f9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1470170293,1472161878,fad775233cfeaa3bb6cf6a4068468db512b4e375
fad775233cfeaa3bb6cf6a4068468db512b4e375,fad77523,Decouple a few more things from MainActivity.,"Decouple a few more things from MainActivity.

- Move activity request constants to Constants class.
- Use the newIntent() pattern for launching MainActivity, so that it can
  be migrated easier to the new activity.

Change-Id: I81d2de0c96404549cf4cb37a803262f62a8304b5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1472137361,1472158812,1b578c21e6dd025e9af18d49392f845d2b4a96e7
1b578c21e6dd025e9af18d49392f845d2b4a96e7,1b578c21,Decouple WiktionaryDialog from MainActivity.,"Decouple WiktionaryDialog from MainActivity.

Change-Id: I4ca7903ea569c26fbd991e793b02254e91434e47
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1472135586,1472158348,adeccfeea7e4733a362039acffabc74ca2233e6f
adeccfeea7e4733a362039acffabc74ca2233e6f,adeccfee,Implement interfaces in OverhaulFragment.,"Implement interfaces in OverhaulFragment.

This fills in most of the interfaces that had been missing from
OverhaulFragment. There are only a few more left relating to
sharing/saving images from the Feed, but those will come in a separate
patch.

Bug: T143439
Change-Id: Ie057f3cb67b4c19d61dba6ec76d118a51e89e355
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471976899,1472157940,6e6a35d7b8bde9945f1c6d5ad9c5ed4ed800fc97
6e6a35d7b8bde9945f1c6d5ad9c5ed4ed800fc97,6e6a35d7,"Merge ""Decouple LinkPreviewDialog from PageFragment.""","Merge ""Decouple LinkPreviewDialog from PageFragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472156057,1472156057,"dba3532ed89edcd3b310204955df1b2ca9140eee,824e17be2acfce16b0773223bd7070297b38469f"
dba3532ed89edcd3b310204955df1b2ca9140eee,dba3532e,"Merge ""Decouple AddToReadingListDialog from MainActivity.""","Merge ""Decouple AddToReadingListDialog from MainActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472155967,1472155967,"d7789bf1d56d8180114fe782198403b50a712bbc,53a93ed3327e37e70747c6d005d989578dea5c6c"
d7789bf1d56d8180114fe782198403b50a712bbc,d7789bf1,"Merge ""Integrate Search fragment into PageActivity.""","Merge ""Integrate Search fragment into PageActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472155964,1472155964,"71f19ccc8d419d7348ccc25436cbf539846a3e93,645952f2673d7fffb26ba8c3be26a1a87af3a424"
71f19ccc8d419d7348ccc25436cbf539846a3e93,71f19ccc,"Merge ""Integrate voice search into OverhaulFragment.""","Merge ""Integrate voice search into OverhaulFragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472155226,1472155226,"e0e81de930d711502420c48609c231bfa4d082ef,c9eaed07c3537b1a646bc56b3657ed9abdf4dc94"
e0e81de930d711502420c48609c231bfa4d082ef,e0e81de9,"Merge ""Create an activity with just PageFragment in it.""","Merge ""Create an activity with just PageFragment in it.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472155225,1472155225,"6d69cbe8f472821e6f646d209e4159861fe9cbca,9b5144023bcdf0aaae3e934f6a0619624286a27c"
6d69cbe8f472821e6f646d209e4159861fe9cbca,6d69cbe8,"Merge ""Restore lead image gradient (alternate version)""","Merge ""Restore lead image gradient (alternate version)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472130872,1472130872,"331233b965929d0d9ddcfa6a908e7c2a99556301,ac7015007ca855f15813540167033db384a6879c"
331233b965929d0d9ddcfa6a908e7c2a99556301,331233b9,"Merge ""Fix pronunciation icon color.""","Merge ""Fix pronunciation icon color.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472103615,1472103615,"a07e02f1a8b76d6249d95326830d9522c2e32b85,7d7c64203414845575ac646056ba875170a2d2b6"
ac7015007ca855f15813540167033db384a6879c,ac701500,Restore lead image gradient (alternate version),"Restore lead image gradient (alternate version)

Previously, the lead image gradient was actually applied to the TextView
containing the article title/description, but that's now below the lead
image.  This adds a view on top of the lead image view with the desired
gradient.

If we want to adjust the opacity now that the text is moved, we can do
that separately.

Bug: T135294
Change-Id: I5cbb7e679b4efe23672fbc9351d658ef2ab45441
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1472050454,1472064928,a07e02f1a8b76d6249d95326830d9522c2e32b85
a07e02f1a8b76d6249d95326830d9522c2e32b85,a07e02f1,"Merge ""Bring back parallax scroll of the lead image.""","Merge ""Bring back parallax scroll of the lead image.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1472053073,1472053073,"4ac9df6cb85af465d079638dd3e42ed0f0a5e994,091bfaff7ff3e5f4725ed4b71b52113864c6b6d9"
091bfaff7ff3e5f4725ed4b71b52113864c6b6d9,091bfaff,Bring back parallax scroll of the lead image.,"Bring back parallax scroll of the lead image.

Change-Id: Ib40da114acaa6ed024fdb425950219054f9e1b6b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1472050416,1472050416,e110853288c7926f1cb0fd2a5da76329d819df4f
7d7c64203414845575ac646056ba875170a2d2b6,7d7c6420,Fix pronunciation icon color.,"Fix pronunciation icon color.

After we moved the title away from the lead image, the pronunciation icon
became white-on-white. This patch correctly sets the tint of the icon to
the inverse window color.

Change-Id: Ibb5adadc8d73ea166de4e426c55edbf4627a550c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1472046319,1472046445,4ac9df6cb85af465d079638dd3e42ed0f0a5e994
4ac9df6cb85af465d079638dd3e42ed0f0a5e994,4ac9df6c,Article header: limit serif font to article title,"Article header: limit serif font to article title

Removes the view-wide typeface setting and adds a serif TypefaceSpan
to the article title only.

Bug: T135294
Change-Id: I9d537366bf110c2fd99d3cc216e6e31403fe9edc
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1472042758,1472042758,9a2f674f97a7a49d16760b0fd11b612adfe5ef5e
824e17be2acfce16b0773223bd7070297b38469f,824e17be,Decouple LinkPreviewDialog from PageFragment.,"Decouple LinkPreviewDialog from PageFragment.

Change-Id: Iada089449bfbcf5b6848353e68d1af3f6deecf7b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471978790,1471978790,53a93ed3327e37e70747c6d005d989578dea5c6c
53a93ed3327e37e70747c6d005d989578dea5c6c,53a93ed3,Decouple AddToReadingListDialog from MainActivity.,"Decouple AddToReadingListDialog from MainActivity.

Change-Id: Ib8737186f3a7fedcd6a0463972fa3384f95e6bb9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471977803,1471977803,645952f2673d7fffb26ba8c3be26a1a87af3a424
645952f2673d7fffb26ba8c3be26a1a87af3a424,645952f2,Integrate Search fragment into PageActivity.,"Integrate Search fragment into PageActivity.

Bug: T143440
Change-Id: Ic09ba9486eea5ea1649cd4be6a62e484458b6486
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471969945,1471969945,9b5144023bcdf0aaae3e934f6a0619624286a27c
9a2f674f97a7a49d16760b0fd11b612adfe5ef5e,9a2f674f,Article header tweaks,"Article header tweaks

-Reduce height of divider view to 1dp and use color resource
-Make article description (subtitle) the same color as the divider

Change-Id: I392fb4fb6628406b0aecaf643010b3b5eb113439
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471933128,1471933128,e110853288c7926f1cb0fd2a5da76329d819df4f
c9eaed07c3537b1a646bc56b3657ed9abdf4dc94,c9eaed07,Integrate voice search into OverhaulFragment.,"Integrate voice search into OverhaulFragment.

Change-Id: I4102dae99733f143b043c1da5f3e67cce52e3fdf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471895568,1471896901,9b5144023bcdf0aaae3e934f6a0619624286a27c
9b5144023bcdf0aaae3e934f6a0619624286a27c,9b514402,Create an activity with just PageFragment in it.,"Create an activity with just PageFragment in it.

This will serve as the activity that is launched when browsing a page from
the new OverhaulActivity.

The new PageActivity is basically a copy of MainActivity, with unnecessary
stuff stripped out (nothing added).

This includes a very basic integration of the new activity with
OverhaulFragment, where tapping a link in the Feed will open the new
activity and load the page. Further integration will be in subsequent
patches, which will also fill in the remaining TODOs in PageActivity.

Bug: T141131
Change-Id: I76f99d25d359944c991d63d3a160df6bc1f50fd4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1470934266,1471896138,41e2c8548280a1bd90a1a93a3c10aabdb2c84b4b
e110853288c7926f1cb0fd2a5da76329d819df4f,e1108532,Add Flake8 to requirements,"Add Flake8 to requirements

Flake8 is used by the Python CI job to verify code style. Add it to
requirements.txt so developers can check their code locally.

Change-Id: Idf6820d85f7692cdae064278dc4987f0dc898a3e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1471885359,1471885359,41e2c8548280a1bd90a1a93a3c10aabdb2c84b4b
41e2c8548280a1bd90a1a93a3c10aabdb2c84b4b,41e2c854,"Merge ""Update bookmark icon to reflect page saved state""","Merge ""Update bookmark icon to reflect page saved state""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471883559,1471883559,"bd8066d242f0a00dd21685c170c3f10658b94965,9f30113642bc5557b618ea64456b1097456eb6d2"
bd8066d242f0a00dd21685c170c3f10658b94965,bd8066d2,"Merge ""Introduce Foundation colors, and consolidate non-grays.""","Merge ""Introduce Foundation colors, and consolidate non-grays.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471882288,1471882288,"0f11a33848724693da412b55b9594775d851e390,ab89cd417c82f16e196bee5efe3999b2d2a66f75"
0f11a33848724693da412b55b9594775d851e390,0f11a338,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471881748,1471881748,"d29c849fb2ef0f76c0d07eeb7e4bc63beaa76eef,5ac1b14bb153981c712a1ec1efe10281f70e9321"
5ac1b14bb153981c712a1ec1efe10281f70e9321,5ac1b14b,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia0ab4234d93883ac58b8e5067bc3b4af1c7797a5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1471879289,1471880482,952a9b1d4aa5337140eb459120100bcd6143b491
ab89cd417c82f16e196bee5efe3999b2d2a66f75,ab89cd41,"Introduce Foundation colors, and consolidate non-grays.","Introduce Foundation colors, and consolidate non-grays.

OK, this consolidates some low-hanging grays, too.

Next patch: create abstract ""primary""/""secondary""/etc colors for grays,
and make attr definitions use them.

Bug: T139187
Change-Id: I32814e27d0b38764acae8a2f50f0fe4e25eaccb2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471879462,1471879462,d29c849fb2ef0f76c0d07eeb7e4bc63beaa76eef
d29c849fb2ef0f76c0d07eeb7e4bc63beaa76eef,d29c849f,Make popup menus overlap the emitting view.,"Make popup menus overlap the emitting view.

Per Material guidelines.

Bug: T143369
Change-Id: Id1fb5d6015bb115f6431dd416ac5a2350e9418d4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471874072,1471874072,952a9b1d4aa5337140eb459120100bcd6143b491
9f30113642bc5557b618ea64456b1097456eb6d2,9f301136,Update bookmark icon to reflect page saved state,"Update bookmark icon to reflect page saved state

This replaces updating the icon on the article menu bar (which is being
removed on a different branch).

Bug: T135295
Change-Id: I4edf71b77dccd92517a74390e12794e474236cc9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471608702,1471628206,952a9b1d4aa5337140eb459120100bcd6143b491
952a9b1d4aa5337140eb459120100bcd6143b491,952a9b1d,"Merge ""Update ToC onboarding tooltip to point at new page action button""","Merge ""Update ToC onboarding tooltip to point at new page action button""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471625328,1471625328,"853aa13ba4f2167ca3c3c3532ab60a09299ca884,b9367b6a97cc2772c73b611e2b89c8ecb692d91d"
853aa13ba4f2167ca3c3c3532ab60a09299ca884,853aa13b,"Merge ""Remove article header menu bar""","Merge ""Remove article header menu bar""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471623010,1471623010,"63984a64ce85a7de0a47743ba852f64494ff3e09,558d284dc0906712a65ca57a095255c23df2f9cd"
63984a64ce85a7de0a47743ba852f64494ff3e09,63984a64,"Merge ""Add actions to page action tab layout""","Merge ""Add actions to page action tab layout""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471620884,1471620884,"123ecc88504cb4b0494f5179f68e54754ccb27f6,0dedb514f76795409e1c4041e1f5fdfcc672b9bb"
123ecc88504cb4b0494f5179f68e54754ccb27f6,123ecc88,Hygiene: Remove unnecessary js file,"Hygiene: Remove unnecessary js file

Removes transforms.js, which apparently does nothing.

Change-Id: I4f7e57929cc3d390dd167f809cce9e6f5914bcd9
",,,,Michael Holloway,mholloway@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1471437165,1471619852,30d9c102354a07997e7de39790f6d49a36c6fa83
30d9c102354a07997e7de39790f6d49a36c6fa83,30d9c102,"Merge ""Make ""in the news"" items spill to the edge of the card.""","Merge ""Make ""in the news"" items spill to the edge of the card.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471619062,1471619062,"ac6bced7e7fcaecd092bda231cd22267212d7bd8,787c89c4c1d9184ab755043b650600f8a7b57913"
ac6bced7e7fcaecd092bda231cd22267212d7bd8,ac6bced7,"Merge ""Remove lead image parallax scroll effect""","Merge ""Remove lead image parallax scroll effect""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471619061,1471619061,"0679f968e461de096d1f1dbd03015b7c05a840e8,527baee9b9377c35c33b35443d6aa8177034a245"
0679f968e461de096d1f1dbd03015b7c05a840e8,0679f968,"Merge ""Move article title/subtitle beneath the lead image""","Merge ""Move article title/subtitle beneath the lead image""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471618419,1471618419,"035aff358bac439eb0053735c2ad91c8b2e60d96,e46bfaa9fdb653bacaec615d95a18920c185d2b6"
035aff358bac439eb0053735c2ad91c8b2e60d96,035aff35,"Merge ""Hygiene: Remove debug code""","Merge ""Hygiene: Remove debug code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471612097,1471612097,"70efe7d8d63e13b8dfb51ac24071dcc47a432718,885b8dfa5beeb9b40379fe4bef1259d8eab52497"
70efe7d8d63e13b8dfb51ac24071dcc47a432718,70efe7d8,"Merge ""Hygiene: Rename setNonGbDivWidth to setDivWidth""","Merge ""Hygiene: Rename setNonGbDivWidth to setDivWidth""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471611814,1471611814,"85d79ba015a7e035d41d8e277026cda322c5991a,0367f51da219d9e48e686f89cbbe16afa6b4c4d8"
85d79ba015a7e035d41d8e277026cda322c5991a,85d79ba0,"Merge ""Remove setMathFormulaImageMaxWidth""","Merge ""Remove setMathFormulaImageMaxWidth""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471611248,1471611248,"0b460660c9c27005af4710fb3b1b4fa9c0aa26d6,94239bc445f55b6104e527590bb8613feb95d537"
787c89c4c1d9184ab755043b650600f8a7b57913,787c89c4,"Make ""in the news"" items spill to the edge of the card.","Make ""in the news"" items spill to the edge of the card.

Bug: T140385
Change-Id: If33507e730d6b86e3343a277849e9fb7c091a64e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471609891,1471609891,a5cff97747aef0073413aa31ad87c228c057314c
558d284dc0906712a65ca57a095255c23df2f9cd,558d284d,Remove article header menu bar,"Remove article header menu bar

TODO in next patch: Update bookmark icon when page is saved

Note that this removes the Navigate action and the footer article action
toolbar doesn't replace it.  Do we want to put it somewhere else?

Bug: T135295
Change-Id: I3516eb508d9f3a4844d49ed536fe3d3f1428d0ab
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471602594,1471605099,527baee9b9377c35c33b35443d6aa8177034a245
527baee9b9377c35c33b35443d6aa8177034a245,527baee9,Remove lead image parallax scroll effect,"Remove lead image parallax scroll effect

Bug: T135294
Change-Id: I4a3ed45fd81c6e5066317153d3c4e0ae96cf4f72
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471595604,1471595797,e46bfaa9fdb653bacaec615d95a18920c185d2b6
e46bfaa9fdb653bacaec615d95a18920c185d2b6,e46bfaa9,Move article title/subtitle beneath the lead image,"Move article title/subtitle beneath the lead image

N.B. The parallax scrolling behavior no longer works well or makes sense
with this change, so I'll remove it in a follow-up patch.

Bug: T135294
Change-Id: I7c435fb86f0bd245a53670128472603ec4fcba1a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471269892,1471595362,0b460660c9c27005af4710fb3b1b4fa9c0aa26d6
b9367b6a97cc2772c73b611e2b89c8ecb692d91d,b9367b6a,Update ToC onboarding tooltip to point at new page action button,"Update ToC onboarding tooltip to point at new page action button

Bug: T135295
Change-Id: I93e11b7fed5e25c7f9886c728ef12f1fb853095f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471591007,1471591007,0dedb514f76795409e1c4041e1f5fdfcc672b9bb
0dedb514f76795409e1c4041e1f5fdfcc672b9bb,0dedb514,Add actions to page action tab layout,"Add actions to page action tab layout

Bug: T135295
Change-Id: Ia2d754b10238d6a9e63cda7cee538122ad173eb9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471533639,1471590692,0b460660c9c27005af4710fb3b1b4fa9c0aa26d6
0b460660c9c27005af4710fb3b1b4fa9c0aa26d6,0b460660,"Merge ""Add page action tab layout""","Merge ""Add page action tab layout""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471560700,1471560700,"3bb71c6aeb53832c3ca1b506d98fb0044bd03970,9e3261d2319f4da1e83267256f9069f419521587"
3bb71c6aeb53832c3ca1b506d98fb0044bd03970,3bb71c6a,"Merge ""Eliminate floating TOC button""","Merge ""Eliminate floating TOC button""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471560030,1471560030,"a5cff97747aef0073413aa31ad87c228c057314c,2dcd2a423e08f79a146f159bef8e681c340801b5"
a5cff97747aef0073413aa31ad87c228c057314c,a5cff977,Bump versionCode,"Bump versionCode

Change-Id: If507aba99a0f33855c75db24d5a881611f593558
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1471537315,1471537339,f1df1eb5e6cbce05891e53b454bb9f55f7a2666f
f1df1eb5e6cbce05891e53b454bb9f55f7a2666f,f1df1eb5,Always hide dev-only menu items,"Always hide dev-only menu items

setGroupVisible() changes the visibility of all children. Update the
visibility status of dev-only menu items whenever updating the
containing group.

Change-Id: I9af230f29a445ac0d4f4fdadab2dd62a49009fd9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1471535155,1471535155,fcdffc3ae3064e7e66f67c92613e90ede0af116f
9e3261d2319f4da1e83267256f9069f419521587,9e3261d2,Add page action tab layout,"Add page action tab layout

Does nothing for now.  Will add listener/actions in the next patch.

Bug: T135295
Change-Id: I9636990607fd1d69a021cb1f3faf71787731c6e1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471521588,1471523804,2dcd2a423e08f79a146f159bef8e681c340801b5
2dcd2a423e08f79a146f159bef8e681c340801b5,2dcd2a42,Eliminate floating TOC button,"Eliminate floating TOC button

This will be replaced by the TOC page action tab.

TODO: Update the tooltip once the page action tab menu work is complete.

Bug: T135295
Change-Id: I7b05b1f19087a07cde3e0e8ffb6c61d94fa54967
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471523602,1471523602,fcdffc3ae3064e7e66f67c92613e90ede0af116f
fcdffc3ae3064e7e66f67c92613e90ede0af116f,fcdffc3a,Bump versionCode,"Bump versionCode

Change-Id: Icd7ceb3f67e069ff2c7c5ef0b157f1a080023bc0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1471465094,1471465122,abb85047c5936cea890ce5ac704ef9feb0f4de23
abb85047c5936cea890ce5ac704ef9feb0f4de23,abb85047,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471449596,1471449596,"d4c5a09c3b4d20227707bcf7b8708aebb54a34fe,13e39413f94f13dbfa30cdb2a6a9f0d0871b2d1f"
13e39413f94f13dbfa30cdb2a6a9f0d0871b2d1f,13e39413,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I92ffe1aafb58bd4d81536b6eca0a5fcf95f8df17
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1471446917,1471448860,9359bc4995e1878a39237e48fa677413c9953fc5
d4c5a09c3b4d20227707bcf7b8708aebb54a34fe,d4c5a09c,Update icons for Tabs button.,"Update icons for Tabs button.

- Update the ""1"" thgouth ""9+"" vector drawables for the Tabs button.
- In the Feed, put the Tabs button to the right of the Search button, so
  that it doesn't ""jump"" around when the Search button is shown/hidden.

Bug: T143168
Change-Id: I60f1460ead84f782d395b9bbcddcd05a8043ff05
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471445041,1471445041,9359bc4995e1878a39237e48fa677413c9953fc5
9359bc4995e1878a39237e48fa677413c9953fc5,9359bc49,"Merge ""Create .arcconfig""","Merge ""Create .arcconfig""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471443396,1471443396,"5181e55ee7fca7c831fe5508ac527c0e51d18f90,834ea8b617893d4b76049b15dfae62c6c9e08acc"
5181e55ee7fca7c831fe5508ac527c0e51d18f90,5181e55e,"Merge ""Set accept header to content-type version for MCS requests""","Merge ""Set accept header to content-type version for MCS requests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471443098,1471443098,"f9b16beab7eca7ea4dc1a6fec74d59c4b60e30e4,287cbd2edefbff5d0bf0596c1a8c37b01365a1f2"
94239bc445f55b6104e527590bb8613feb95d537,94239bc4,Remove setMathFormulaImageMaxWidth,"Remove setMathFormulaImageMaxWidth

Math formula images are already set to max-width: 100% in CSS[1] and so
this transform appears to be redundant.

For a test example, see enwiki article ""Elliptic curve primality"" >
formula under the heading ""Justification of the algorithm.""

[1] https://github.com/wikimedia/mediawiki-extensions-MobileApp/blob/master/styles/enwiki.less#L311-L333

Change-Id: I108bc4744dc2c6f4964630314ca33b28c4b78eb4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471432190,1471438042,f9b16beab7eca7ea4dc1a6fec74d59c4b60e30e4
885b8dfa5beeb9b40379fe4bef1259d8eab52497,885b8dfa,Hygiene: Remove debug code,"Hygiene: Remove debug code

We seldom need to debug image widening, so it's probably not necessary to
keep this debug code in the repo.

Change-Id: If0f48e91ebed5680c2741931f0405af81820f931
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471437669,1471437724,f9b16beab7eca7ea4dc1a6fec74d59c4b60e30e4
0367f51da219d9e48e686f89cbbe16afa6b4c4d8,0367f51d,Hygiene: Rename setNonGbDivWidth to setDivWidth,"Hygiene: Rename setNonGbDivWidth to setDivWidth

We haven't supported Gingerbread in current development for over a
year.  This appears to have been an oversight.

Change-Id: I35d5b9b8a6995b60e58b3d29f22a255dd6140607
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471436620,1471436620,f9b16beab7eca7ea4dc1a6fec74d59c4b60e30e4
287cbd2edefbff5d0bf0596c1a8c37b01365a1f2,287cbd2e,Set accept header to content-type version for MCS requests,"Set accept header to content-type version for MCS requests

To allow us to preserve current behavior for older app versions in the future
have the app send accept headers with the expected content-type header.
The spec version is in the profile property at the end.

Done for mobile-sections, definition, and aggregated-feed endpoints.

Bug: T142965
Change-Id: Ic7b05765932c5af2b091d5a10c29ef3d48737d65
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1471243370,1471420179,bcc7034dfc885b547d35d64eba064c7319a1e939
f9b16beab7eca7ea4dc1a6fec74d59c4b60e30e4,f9b16bea,"Merge ""Update gradle plugin to 2.1.3""","Merge ""Update gradle plugin to 2.1.3""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1471363822,1471363822,"a17f6b720bc781e1797410466173e2691251f7e8,87909cdec99fe84bbdcd016ff3b543710c7db057"
87909cdec99fe84bbdcd016ff3b543710c7db057,87909cde,Update gradle plugin to 2.1.3,"Update gradle plugin to 2.1.3

Change-Id: I436dd7a3210b1320cc4f9de0a54d23d6c65a116f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471356996,1471356996,bcc7034dfc885b547d35d64eba064c7319a1e939
834ea8b617893d4b76049b15dfae62c6c9e08acc,834ea8b6,Create .arcconfig,"Create .arcconfig

Per instructions at https://secure.phabricator.com/book/phabricator/
article/arcanist_quick_start/

Bug: T141157
Change-Id: Icd7848eb3a75fd532edddcb714ad3b8f8baa3ee0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471343058,1471343058,bcc7034dfc885b547d35d64eba064c7319a1e939
a4daba490fc924c0326bb848b995df62c8f3bf15,a4daba49,Add special header styles,"Add special header styles

Changes h3 headers to a sans-serif font and adjusts margins.

Bug: T135297
Change-Id: I371a60ec4c1c458eef0748b104a191d9460df435
Depends-On: Ibbbdbfeb5f7fcab6cb3e4ee55e413c9ea63b50d5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471257086,1471257086,a17f6b720bc781e1797410466173e2691251f7e8
a17f6b720bc781e1797410466173e2691251f7e8,a17f6b72,Latest CSS updates,"Latest CSS updates

Via make-css-assets.bash.  All changes here appear to be cosmetic (e.g.,
adding leading zeroes to fractional decimal values).

Change-Id: I4b8f6bb5814a064e9d2493ac63253dea0641e3ce
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1471244819,1471244819,bcc7034dfc885b547d35d64eba064c7319a1e939
bcc7034dfc885b547d35d64eba064c7319a1e939,bcc7034d,Fix determination of tab count via preferences.,"Fix determination of tab count via preferences.

When we have zero tabs open, the PageFragment still keeps a single Tab
object, but with an empty backstack. This case is now handled correctly
when determining the actual tab count for showing the icon in the feed.

Change-Id: I353a438e0043458af32d426dec96c44e1fdf0438
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1471008571,1471018974,7f7e332a5a3412d3c4b78c0d3f8f7d773ef101b9
7f7e332a5a3412d3c4b78c0d3f8f7d773ef101b9,7f7e332a,Persist state of dismissed feed cards.,"Persist state of dismissed feed cards.

This implements a rather simple (for now) way of persisting the state of
dismissed cards. Although, due to its implementation, it does have some
""smarts"" to it. It works by persisting the hashCode of dismissed cards,
and it's up to each card type to implement its own hashCode(). This has
the following effect:

- Cards that are dependent on the current day (e.g. trending) create a
  hash code based on the date, so that the user won't see that card again
  for that date. The user will, however, continue to see that type of card
  for other dates.
- Cards that are dependent on a ""title"" create a hashCode based on the
  title. This means that if the user dismisses a because-you-read card for
  a certain title, they won't see it again, regardless of which day they
  visit the feed, or if they visit that page again.

Additional notes:

- Undo still works as expected.
- There's a maximum of 100 persisted cards (rotated in FIFO order, by
  means of a LinkedHashSet that removes the eldest entry), so that
  the storage mechanism of saving them in SharedPreferences is not
  stressed unnecessarily.

Bug: T138981
Change-Id: Ie3d8432832341f6ed161b0ded1df22b4edc363df
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1470843017,1471014451,511b92971344c6abe1997ba2189360afd81e6b9c
511b92971344c6abe1997ba2189360afd81e6b9c,511b9297,"Merge ""Fix lifecycle methods of MapView (for real).""","Merge ""Fix lifecycle methods of MapView (for real).""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1470983564,1470983564,"b35eacdc1010d6f72a68ca8aa3d447cb16f249b6,1dad53a6d74b7434af320321e44a18221d07b979"
b35eacdc1010d6f72a68ca8aa3d447cb16f249b6,b35eacdc,"Merge ""Fix hiding of the Overhaul nav item in non-dev builds.""","Merge ""Fix hiding of the Overhaul nav item in non-dev builds.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1470982515,1470982515,"1d46708e6d8db8d4a3938f377dff8ac047621c62,bf0a0d25d49b415558e0d0b4a77299017ec792e4"
1d46708e6d8db8d4a3938f377dff8ac047621c62,1d46708e,"Merge ""Decouple JsonPageLoadStrategy from MainActivity.""","Merge ""Decouple JsonPageLoadStrategy from MainActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1470980409,1470980409,"7582f25446ad4e987fc0fdd3cd4c353b2ce9295b,26105e24fe0857dc2dfb029d8405595cb18b6d00"
7582f25446ad4e987fc0fdd3cd4c353b2ce9295b,7582f254,"Merge ""Generalize SearchBarHideHandler, in preparation for overhaul.""","Merge ""Generalize SearchBarHideHandler, in preparation for overhaul.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1470980386,1470980386,"1a58b29cebbdcd819d3ab9c2aaddbf91df88be7c,153673c47a0643081fc8a9a9bc989c4541174fa6"
26105e24fe0857dc2dfb029d8405595cb18b6d00,26105e24,Decouple JsonPageLoadStrategy from MainActivity.,"Decouple JsonPageLoadStrategy from MainActivity.

...so that we can plug PageFragment into a clean new Activity (to come).

Bug: T141131
Change-Id: I57b5e05c2efeff0b70af50b567e40dd1dddcf828
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1470941977,1470957369,153673c47a0643081fc8a9a9bc989c4541174fa6
153673c47a0643081fc8a9a9bc989c4541174fa6,153673c4,"Generalize SearchBarHideHandler, in preparation for overhaul.","Generalize SearchBarHideHandler, in preparation for overhaul.

This creates a ""stub"" base class for the SearchBarHideHandler, so that
PageFragment can keep using it from either MainActivity or the new
overhauled PageActivity (to come).

Bug: T141131
Change-Id: Id1779682b0500e16a844758ca75a83e1fdcf9010
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1470941679,1470957146,53fe128cf74290d84dbadde26105cdee8180f3eb
1a58b29cebbdcd819d3ab9c2aaddbf91df88be7c,1a58b29c,Fix long-pressing of links inside the WebView.,"Fix long-pressing of links inside the WebView.

I've noticed that long-pressing links was no longer working. This is
because we've recently made a change that updates the base URL of the
WebView dynamically, but then our long-press handler was expecting link
URIs to have an authority that exactly matches ""wikipedia.org"", which
would fail for language-specific domains, e.g. ""en.wikipedia.org"".

This patch fixes the URI checking logic, and thus fixes the long-press
handler.

Change-Id: I48b0add7bcaf21ad4e4db705d5823502205c2eb5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1470924593,1470956622,53fe128cf74290d84dbadde26105cdee8180f3eb
53fe128cf74290d84dbadde26105cdee8180f3eb,53fe128c,Tabs in feed.,"Tabs in feed.

Placed a ""tabs"" icon in the toolbar of the feed, for convenient access to
the user's list of active tabs, by strong user demand.

Also update the icon of the Tabs button to be a ""dynamic"" icon based on
the number of tabs.

Bug: T142712
Change-Id: If55ed75d3a389d4d80128ea7ee347ace0009b36f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1470343438,1470954890,d8ca78b030fc690bd4d0b50e98e3b7885b1e5384
d8ca78b030fc690bd4d0b50e98e3b7885b1e5384,d8ca78b0,"Merge ""Integrate Search fragment into overhaul.""","Merge ""Integrate Search fragment into overhaul.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1470954633,1470954633,"e8997829d21f9146e3c79128db8bb47702533c4a,f79ae2cae1f3ccf622a6fdcecafa2feddf5fd522"
1dad53a6d74b7434af320321e44a18221d07b979,1dad53a6,Fix lifecycle methods of MapView (for real).,"Fix lifecycle methods of MapView (for real).

Bug: T142031
Change-Id: Ida6709cb088e5d973eb53f739e4788f4d131034a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1470946304,1470946304,bf0a0d25d49b415558e0d0b4a77299017ec792e4
bf0a0d25d49b415558e0d0b4a77299017ec792e4,bf0a0d25,Fix hiding of the Overhaul nav item in non-dev builds.,"Fix hiding of the Overhaul nav item in non-dev builds.

Change-Id: I90b61f9e5fcbae0f672911965458876461fb39e8
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1470945058,1470945058,0f5b17ce59f7ffea8c0cb575c3bf9067e55e0ed9
e8997829d21f9146e3c79128db8bb47702533c4a,e8997829,Hygiene: remove a couple stub methods,"Hygiene: remove a couple stub methods

Change-Id: I40dba95188d3fde799fe1d2836dfbc8937a68af1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1470847647,1470847647,0f5b17ce59f7ffea8c0cb575c3bf9067e55e0ed9
f79ae2cae1f3ccf622a6fdcecafa2feddf5fd522,f79ae2ca,Integrate Search fragment into overhaul.,"Integrate Search fragment into overhaul.

Remaining things to do:
- Fill in all the callback functions to have the proper effect.
- Implement correct Back behavior.

Change-Id: I37aef4b3274d6b6ae019ac73d12d4db76ed9dd4a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1470337190,1470770445,0f5b17ce59f7ffea8c0cb575c3bf9067e55e0ed9
0f5b17ce59f7ffea8c0cb575c3bf9067e55e0ed9,0f5b17ce,Correctly respect MapView's lifecycle methods.,"Correctly respect MapView's lifecycle methods.

The MapView requires us to call its lifecycle methods manually, and there
are a couple that seem to have disappeared recently, namely onPause and
onResume. Without these calls, the MapView produces a silent error
(visible in logcat) when closing the Nearby fragment.

Change-Id: Ia7bb926eb4247ee5296174960d69bfc751278ccf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1470695656,1470695656,49232ad861b31f854d86cd55a35640144b1529e3
49232ad861b31f854d86cd55a35640144b1529e3,49232ad8,"Merge ""Add a toolbar to overhaul activity.""","Merge ""Add a toolbar to overhaul activity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1470417599,1470417599,"5a94f543b1609a7b8019013128207d422ba47442,876a9806c630cbb13708a74718acdd1f36589eb4"
5a94f543b1609a7b8019013128207d422ba47442,5a94f543,Finish decoupling Search fragment from MainActivity.,"Finish decoupling Search fragment from MainActivity.

This completes the decoupling of the search-related fragments from
anything having to do with expecting a parent activity, and instead
using callback mechanisms.

The only thing that remains an indirect depenency on MainActivity is the
setSearchViewEnabled function, which expects a specific view hierarchy
inside the activity's toolbar. However, this will be removed and/or
simplified in subsequent patches as part of the navigation overhaul.

Change-Id: I07111a8dff5bbabaa0fa310d2d190c926c86ac7a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1470323945,1470324568,205703978e4c6b1f87acc35860bf5178cdd4b834
876a9806c630cbb13708a74718acdd1f36589eb4,876a9806,Add a toolbar to overhaul activity.,"Add a toolbar to overhaul activity.

This adds a generic toolbar to OverhaulActivity, making it usable by the
History, Nearby, and ReadingLists fragments. The FeedFragment still
provides its own toolbar, since it requires a unique coordinator behavior.

NB: The toolbar in FeedFragment is still not aligned properly below the
system status bar. This is to be addressed separately.

Bug: T141475
Change-Id: I66cd97ffb5be217f8f344c86506e948618bcf66e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1470156657,1470269044,136c9e9f55b09d87ce0277591def2919641642f5
205703978e4c6b1f87acc35860bf5178cdd4b834,20570397,Add callback interface and long press handler for SearchResultsFragment,"Add callback interface and long press handler for SearchResultsFragment

SearchResultsFragment was intertwined with PageFragment and needed to be
separated as part of the work of extracting PageFragment and related
components from MainActivity.

Bug: T141137
Change-Id: I186a77222b3d9ecbeb656f46c84e912e0f7e4028
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1470264847,1470265027,f0f1ce9e83ac596dcdddd5a43e473a05c4288e2f
f0f1ce9e83ac596dcdddd5a43e473a05c4288e2f,f0f1ce9e,Create PageFragment callback interface,"Create PageFragment callback interface

Creates a callback interface to be implemented by activities hosting
PageFragments and implements it in MainActivity.  Removes explicit
dependencies on MainActivity from various components in favor of
PageFragment.

TODO (in follow-up patch): implement SearchResultsFragment callbacks and
long press handler.  These were dependent on PageFragment-related code and
should be independent.

Bug: T141137
Change-Id: I08f062e9c1b1bbd127312c7e11e4f98795873c9a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469559192,1470264127,33d715fa45f25c8aa166975d4fbef34c2283a477
33d715fa45f25c8aa166975d4fbef34c2283a477,33d715fa,"Merge ""Make other list item layouts consistent with Feed lists.""","Merge ""Make other list item layouts consistent with Feed lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1470260479,1470260479,"86a0c9892cc51ed594624bf37de4f71ec9c8e379,e89a904515f0ea6192e4ef29d4cd2e22d1834063"
e89a904515f0ea6192e4ef29d4cd2e22d1834063,e89a9045,Make other list item layouts consistent with Feed lists.,"Make other list item layouts consistent with Feed lists.

- Basically copied the layout from the feed list item to the layouts used
  by History, Search, and Reading Lists.
- Replaced the placeholder image with new Material image.
- I realize there are opportunities for DRY here, but that can be
  done in a future patch.

Bug: T140382
Change-Id: I3d76831e13640644548899da2d793ed936fcbd20
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1470233816,1470250950,136c9e9f55b09d87ce0277591def2919641642f5
86a0c9892cc51ed594624bf37de4f71ec9c8e379,86a0c989,"Merge ""Fix possible infinite loop of saving page images.""","Merge ""Fix possible infinite loop of saving page images.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1470244480,1470244480,"c0104f71fe4796bc5c936739f99a7f6e8bc4b697,89562c0b3d2a466522769ef088f57b17c1ddcb3b"
c0104f71fe4796bc5c936739f99a7f6e8bc4b697,c0104f71,Fix possible leaks of socket connections.,"Fix possible leaks of socket connections.

Bug: T141992
Change-Id: I5856ba7652478e033f82523f6756890aad30c9aa
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1470236657,1470236657,136c9e9f55b09d87ce0277591def2919641642f5
89562c0b3d2a466522769ef088f57b17c1ddcb3b,89562c0b,Fix possible infinite loop of saving page images.,"Fix possible infinite loop of saving page images.

When downloading images for a saved page, if any of the images fail to
download for any reason, that image url is removed from the urlMap (while
iterating through the map), which causes a ConcurrentModificationException.

Unfortunately, this condition also makes the download process start all
over again, and continue in an infinite loop.

This patch makes it no longer remove the failed url from the map, since
it's perfectly acceptable to leave it in (when the offline content is
loaded into the WebView, the broken image URL will simply not produce an
image, which is equivalent to the previous behavior).

Bug: T141892
Change-Id: I6061297c59e8db26354bec708b82a0890476e3f6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1470158196,1470158196,136c9e9f55b09d87ce0277591def2919641642f5
136c9e9f55b09d87ce0277591def2919641642f5,136c9e9f,"Merge ""Dynamically set our WebView's base URL.""","Merge ""Dynamically set our WebView's base URL.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1470086190,1470086190,"131f2ecda8df6c9317f272cba05ecfb798c16ffb,9955c393f59e01896e98abea0ad0e62c6563042e"
131f2ecda8df6c9317f272cba05ecfb798c16ffb,131f2ecd,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: If82e4576841518ed3b79519ebef739561d06a6fe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1470072062,1470073084,aef972c45ec5f9435de60fbada8438d4d9a38aa3
aef972c45ec5f9435de60fbada8438d4d9a38aa3,aef972c4,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I3f791376da823da85ac1411759be84ca51c0ab81
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1470064247,1470069510,cc51cc7ddb3903592222f7d28fcd3e57f411123a
9955c393f59e01896e98abea0ad0e62c6563042e,9955c393,Dynamically set our WebView's base URL.,"Dynamically set our WebView's base URL.

Bug: T141596
Change-Id: I975eebb275463358cadd928efcc5f85921dae4a4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1469825219,1469825219,cc51cc7ddb3903592222f7d28fcd3e57f411123a
cc51cc7ddb3903592222f7d28fcd3e57f411123a,cc51cc7d,Hygiene: rename class,"Hygiene: rename class

Rename NavViewPagerAdapter to NavTabViewPagerAdapter.

Change-Id: I1463158bdab5e485e42f4b09484be25854ce5fcf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469806527,1469806527,891cc67dc057ba2e91d84d4b54552dbaeac8fef2
891cc67dc057ba2e91d84d4b54552dbaeac8fef2,891cc67d,Add missed HistoryFragment callback,"Add missed HistoryFragment callback

Add HistoryFragment dependency to callback interface missed in 4fd053a.

Change-Id: I5fe37e0dac2838d224b166914c0a3c3393a8ef0c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469742521,1469742521,be949ec178fcd7bd28e4be2d90f177d9efda1aad
be949ec178fcd7bd28e4be2d90f177d9efda1aad,be949ec1,Move snackbar to appear above the nav tabs,"Move snackbar to appear above the nav tabs

Change-Id: I5f7e0d6376726065578a998f4a7e228f2081687e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469655896,1469658348,2e97309cbe28ba25dbab7386e283121910b66667
2e97309cbe28ba25dbab7386e283121910b66667,2e97309c,Break apart nav tabs,"Break apart nav tabs

Better componentize some of the nav Views in preparation to move the
snack bar.

Change-Id: Ic59271b7b759d20ec397e163b9acdfa62f42d518
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469655243,1469658348,56a5e7a2189dd486a9f8cc5f141c4054aa68912d
56a5e7a2189dd486a9f8cc5f141c4054aa68912d,56a5e7a2,Call MapView.onDestroy in Fragment.onDestroyView(),"Call MapView.onDestroy in Fragment.onDestroyView()

After switching to Butter Knife in 715b322, the MapView's lifecycle was
properly accounted for as Fragment.onCreateView() to onDestroyView(). In
8b63ffb, a null check was added to Fragment.onDestroy() where
MapView.onDestroy() was called per documentation. However, this can't be
correct because MapView will always be null at this time. Move the call
to Fragment.onDestroyView() instead of checking for null.

Change-Id: I509a57c3250e968af99ddd245f9356afac474fea
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469635434,1469658348,8e99a93944454e200fafa5844bc1b6f0ae79406b
8e99a93944454e200fafa5844bc1b6f0ae79406b,8e99a939,Hygiene: rename class,"Hygiene: rename class

Rename NavViewTab to just NavTab.

Change-Id: I887be583e53326cda8e7902f89a77e8d5e43c19f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469635315,1469658348,53a6f313fa99a583a1ca44ac32b6daf3131143f6
53a6f313fa99a583a1ca44ac32b6daf3131143f6,53a6f313,"Merge ""Update license content and handling""","Merge ""Update license content and handling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469635318,1469635318,"19abaeffc956427a4d6d545c8494075d5d2bd785,36c6c68c653e899e115e0099a14a9d2711fe618b"
19abaeffc956427a4d6d545c8494075d5d2bd785,19abaeff,Disable page swiping in OverhaulFragment,"Disable page swiping in OverhaulFragment

Change-Id: I0776d04d2453d7b6607423204dac5d43d9008483
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469631313,1469631313,268c4ebc0a6d18dfcee05e1287f5d9c39e0282e5
36c6c68c653e899e115e0099a14a9d2711fe618b,36c6c68c,Update license content and handling,"Update license content and handling

Updated the credits with updated library and license links.

Change-Id: I85be0264e4f2ba789be15b8d7ae1e9e6783f40b1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469473588,1469626047,268c4ebc0a6d18dfcee05e1287f5d9c39e0282e5
268c4ebc0a6d18dfcee05e1287f5d9c39e0282e5,268c4ebc,Fix lint errrors,"Fix lint errrors

-Remove invalid format argument from setText call in HistoryFragment
-Fix RTL issues
-Demote MissingQuantity and ImpliedQuantity to warnings since we probably
 want to know about them but they're basically translation issues
-Ignore GoogleAppIndexingUrlError in the LicenseActivity manifest entry
 since we intentionally don't want indexing applied there
-Add annotations to fix newApi errors, which are no longer ignored
 globally as of Ibbfadfaed56c5079afcf0a526f7653c61f4a63b6.

With these changes, no lint errors remain (only warnings) and we can make
apps-android-wikipedia-lint voting in CI if we wish.

Change-Id: Ia89429486e7022f1b038588ff9ac018df9a1da01
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469225071,1469570560,3281eab8066427b09c0fcaf6f1a661c36d6eb791
3281eab8066427b09c0fcaf6f1a661c36d6eb791,3281eab8,"Merge ""Make first letter of Reading List titles uppercase when creating a list""","Merge ""Make first letter of Reading List titles uppercase when creating a list""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469563286,1469563286,"14a53449b6eab2cdbbb88bcfa7035eb401caf0f2,2ccfd3abb00e3af8563c8ff7871b62cdfef31dd3"
14a53449b6eab2cdbbb88bcfa7035eb401caf0f2,14a53449,Remove ApiUtil,"Remove ApiUtil

Restores inline SDK version checks and removes ApiUtil.  This allows the
IDE to do its version checking and display warnings as designed.

Also stop suppressing newApi lint warnings.

Change-Id: Ibbfadfaed56c5079afcf0a526f7653c61f4a63b6
",,,,Michael Holloway,mholloway@wikimedia.org,Dbrant,dbrant@wikimedia.org,1469485169,1469562379,e28c4747572d7dd6eb18de0ac0266636a8f5d780
e28c4747572d7dd6eb18de0ac0266636a8f5d780,e28c4747,"Merge ""Update bundled CSS""","Merge ""Update bundled CSS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469562147,1469562147,"45101e1ee6f840f8787d8b6be2d1f33874f1473d,4fbf6cc068ba16f9b2583fa24aeae72da52b7d76"
45101e1ee6f840f8787d8b6be2d1f33874f1473d,45101e1e,"Merge ""Convert remaining HttpURLConnection usages to OkHttp""","Merge ""Convert remaining HttpURLConnection usages to OkHttp""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469561837,1469561837,"c851cd335c305e683ee991f257bcbe8fc79028c0,8c4f0342d549605bb8de74594a6e3f54fafa287e"
c851cd335c305e683ee991f257bcbe8fc79028c0,c851cd33,"Merge ""Retain Feed and OverhaulFragment state on rotation""","Merge ""Retain Feed and OverhaulFragment state on rotation""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469561479,1469561479,"5c924cb2caecba962d8a7abe16a157eb1d389ed6,be26cefd79c225d17dd8ca7dae5d5c73caca721b"
5c924cb2caecba962d8a7abe16a157eb1d389ed6,5c924cb2,"Merge ""Fix Nearby NPEs""","Merge ""Fix Nearby NPEs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469561302,1469561302,"4cb84f8fafca4dd1620deed4928ae8aedc3980c1,8b63ffbaa7bdb1f58651134868929edf22daaaa2"
4cb84f8fafca4dd1620deed4928ae8aedc3980c1,4cb84f8f,"Merge ""Add callback stubs for Feed in OverhaulFragment""","Merge ""Add callback stubs for Feed in OverhaulFragment""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469561040,1469561040,"fd5e0a07935092ff859c89aca0f3b7b4b31c9654,a7689e8acd87a67a8086edcfda1b0b221b4b6606"
fd5e0a07935092ff859c89aca0f3b7b4b31c9654,fd5e0a07,"Merge ""Refactor HistoryFragment to use callback pattern""","Merge ""Refactor HistoryFragment to use callback pattern""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469560741,1469560741,"f772c477641f585b3aee672a32e6937c712fd566,4fd053ae29eda1ad86c5fe007c4a576294fc9918"
f772c477641f585b3aee672a32e6937c712fd566,f772c477,"Merge ""Refactor ReadingListsFragment to use callbacks""","Merge ""Refactor ReadingListsFragment to use callbacks""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469559520,1469559520,"07183a46835ef197912fee04bb1efbb454ea1793,8e65c1c2ea5f01e47c28adf04cf54c8cc550b5cf"
07183a46835ef197912fee04bb1efbb454ea1793,07183a46,"Merge ""Disable location listener when backgrounded""","Merge ""Disable location listener when backgrounded""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469559280,1469559280,"cb96d5b59062d5ada52dc110940b0ff2e86c78ad,350911738a6d3579cb468263df57e3f149b6d930"
cb96d5b59062d5ada52dc110940b0ff2e86c78ad,cb96d5b5,"Merge ""Hygiene: use Butter Knife in NearbyFragment""","Merge ""Hygiene: use Butter Knife in NearbyFragment""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469558940,1469558940,"919e9ba52cae2bd202443358c783609a9a17c53c,715b3228a438b6620536846065d3455d70893ed1"
be26cefd79c225d17dd8ca7dae5d5c73caca721b,be26cefd,Retain Feed and OverhaulFragment state on rotation,"Retain Feed and OverhaulFragment state on rotation

• Retain FeedFragment and OverhaulFragment instance state. Since this
  requires the Fragment to have a cooperative implementation, the
  property is set in newInstance(). The Fragments will recreate their
  Views on configuration change but will not reissue network requests or
  change other model state.

• Move the initial Feed network request from onCreateView() to
  onCreate(). The kickoff request is only desirable once as subsequent
  requests due to config changes may go unused and consume processing
  resources at an already intensive time.

• Add otherwise useless View ID to CoordinatorLayout to preserve and
  restore instance state. Functionality denoted with ""__save_state""
  suffix.

• Clear a couple listeners set in FeedFragment.onCreateView() in
  onDestroyView() for tidiness.

• Fix a bad method name in NearbyFragment.

Change-Id: I3e5bd522a29240e47c2e0ee3776fd469627495c5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469558063,1469558930,8b63ffbaa7bdb1f58651134868929edf22daaaa2
919e9ba52cae2bd202443358c783609a9a17c53c,919e9ba5,"Merge ""Hygiene: use newInstance pattern for Fragments""","Merge ""Hygiene: use newInstance pattern for Fragments""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469558683,1469558683,"38b655ff0fb10fb0f2f06948780a8a615f27c392,f47254858b8d0f2d4c90b32ce7085c7690a48101"
38b655ff0fb10fb0f2f06948780a8a615f27c392,38b655ff,"Merge ""Refactor NearbyFragment to use callback pattern""","Merge ""Refactor NearbyFragment to use callback pattern""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469555819,1469555819,"90e0bc8cb7e49744b82b3fb0b297683bc535d276,f9f41cbcb06fcf70f071daf332d3a3858746884f"
90e0bc8cb7e49744b82b3fb0b297683bc535d276,90e0bc8c,"Merge ""Add Reading Lists to overhaul""","Merge ""Add Reading Lists to overhaul""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469555179,1469555179,"4df41a11d4de47b3c72fab620ac08cb50b704496,58371199b1e6cb190aec1b53c94af2e9e5b6bda5"
4df41a11d4de47b3c72fab620ac08cb50b704496,4df41a11,"Merge ""Hygiene: remove CallbackFragment""","Merge ""Hygiene: remove CallbackFragment""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469554806,1469554806,"54e49659af4cab099cf397a141f68e50278dc551,ef3670ac5efb5c22abe1e78f10ab24347efcc312"
54e49659af4cab099cf397a141f68e50278dc551,54e49659,"Merge ""Check hosting Fragment for callback""","Merge ""Check hosting Fragment for callback""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469553615,1469553615,"30ee231fe33f9ac04c034a3b16de6a8b88fc4c2a,56381cd64940269c1bca4397a12de665f6ccc96d"
30ee231fe33f9ac04c034a3b16de6a8b88fc4c2a,30ee231f,"Merge ""Hygiene: remove redundant code""","Merge ""Hygiene: remove redundant code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469553348,1469553348,"5e1a8b9f6318e2f446bdf3b0e84e920d3e3f5a68,0cbe8cc4772b08680931a3b1f027a31fab46922b"
5e1a8b9f6318e2f446bdf3b0e84e920d3e3f5a68,5e1a8b9f,"Merge ""Request location permission on action not on open""","Merge ""Request location permission on action not on open""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469553341,1469553341,"0d5b52a53acb5dd7d5cf5cd0687b77c12872e199,00aace43479e632e642041f3457fee8a317407eb"
8b63ffbaa7bdb1f58651134868929edf22daaaa2,8b63ffba,Fix Nearby NPEs,"Fix Nearby NPEs

We now null out views in onDestroyView() and must take care not to
dereference View references thereafter.

Change-Id: Ibbcd323154c1281318ca9ebd33bce6c7b6577562
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469552314,1469552314,a7689e8acd87a67a8086edcfda1b0b221b4b6606
0d5b52a53acb5dd7d5cf5cd0687b77c12872e199,0d5b52a5,"Merge ""Remove summary from Wikipedia Zero FAQ button in Settings""","Merge ""Remove summary from Wikipedia Zero FAQ button in Settings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469552029,1469552029,"785d47993f601ceb5912f4521595ad8ac5fd5901,dfca259ab33f9926a1a2b4d73a6aaa129d85c2b3"
a7689e8acd87a67a8086edcfda1b0b221b4b6606,a7689e8a,Add callback stubs for Feed in OverhaulFragment,"Add callback stubs for Feed in OverhaulFragment

Bug: T139194
Change-Id: Iac01d633aefe1699aed06eb68e79118473a9bdd1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469551692,1469551883,4fd053ae29eda1ad86c5fe007c4a576294fc9918
4fd053ae29eda1ad86c5fe007c4a576294fc9918,4fd053ae,Refactor HistoryFragment to use callback pattern,"Refactor HistoryFragment to use callback pattern

Bug: T139194
Change-Id: I42b06602f4c618cbb154ee3c6304d70f807443ce
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469550780,1469551883,8e65c1c2ea5f01e47c28adf04cf54c8cc550b5cf
8e65c1c2ea5f01e47c28adf04cf54c8cc550b5cf,8e65c1c2,Refactor ReadingListsFragment to use callbacks,"Refactor ReadingListsFragment to use callbacks

Refactor ReadingListsFragment to use callback pattern.

Bug: T139194
Change-Id: I67b804fddaf39c0a95737d86cc4a7b51ed93c4cb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469549793,1469551883,350911738a6d3579cb468263df57e3f149b6d930
350911738a6d3579cb468263df57e3f149b6d930,35091173,Disable location listener when backgrounded,"Disable location listener when backgrounded

Disable the NearbyFragment's MapView when not in the foreground.

Change-Id: I92ed499c5f16192b9b8a1876aa9669e073c36638
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469547096,1469551883,715b3228a438b6620536846065d3455d70893ed1
715b3228a438b6620536846065d3455d70893ed1,715b3228,Hygiene: use Butter Knife in NearbyFragment,"Hygiene: use Butter Knife in NearbyFragment

Change-Id: I26f1bb0eb55978d34323b4f7c5367887b76d9b57
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469545410,1469551883,f47254858b8d0f2d4c90b32ce7085c7690a48101
f47254858b8d0f2d4c90b32ce7085c7690a48101,f4725485,Hygiene: use newInstance pattern for Fragments,"Hygiene: use newInstance pattern for Fragments

Use newInstance() pattern for some History, Nearby, and
ReadingListsFragment. This creates a seam to declare constant input
dependencies.

Change-Id: Id60d13435c3fd7d720dd6353e4baff63b2317049
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469484924,1469551883,f9f41cbcb06fcf70f071daf332d3a3858746884f
f9f41cbcb06fcf70f071daf332d3a3858746884f,f9f41cbc,Refactor NearbyFragment to use callback pattern,"Refactor NearbyFragment to use callback pattern

Bug: T139194
Change-Id: Ic6e587343e6eb8fcd762ce2c8aef0bfa62903d00
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469483377,1469551883,58371199b1e6cb190aec1b53c94af2e9e5b6bda5
58371199b1e6cb190aec1b53c94af2e9e5b6bda5,58371199,Add Reading Lists to overhaul,"Add Reading Lists to overhaul

Add Reading Lists to overhaul and rename library to history.

Change-Id: Icbaea0537a9798a6a64557f2741c7b16fd9539d9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469483327,1469551883,ef3670ac5efb5c22abe1e78f10ab24347efcc312
ef3670ac5efb5c22abe1e78f10ab24347efcc312,ef3670ac,Hygiene: remove CallbackFragment,"Hygiene: remove CallbackFragment

CallbackFragment was originally meant to encourage a pattern for
Fragments but now it's just noise.

Change-Id: I99135622e4bae8bcf8255bf54f405cdaaed339b5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469480409,1469551883,56381cd64940269c1bca4397a12de665f6ccc96d
56381cd64940269c1bca4397a12de665f6ccc96d,56381cd6,Check hosting Fragment for callback,"Check hosting Fragment for callback

The Support Library now allows a Fragment to request its hosting
Fragment, if any. Update FragmentUtil.getCallback() to check the host's
instance after checking for an explicitly set target Fragment.

Change-Id: I582b3fc0e975d426c4ced494d8551a77f12b372f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469478175,1469551883,0cbe8cc4772b08680931a3b1f027a31fab46922b
0cbe8cc4772b08680931a3b1f027a31fab46922b,0cbe8cc4,Hygiene: remove redundant code,"Hygiene: remove redundant code

""My location"" is enabled in the NearbyFragment XML layout. It only needs
to be reenabled when a previously prohibited location permission is
granted.

Change-Id: Ib8bab309cdc3b616ee03519294ebf82aaa3af865
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469207383,1469551883,00aace43479e632e642041f3457fee8a317407eb
00aace43479e632e642041f3457fee8a317407eb,00aace43,Request location permission on action not on open,"Request location permission on action not on open

Request location permission when the user requests it instead of on
NearbyFragment display.

Change-Id: I9b494e1a9836d2fdd398067699711b98b4a10267
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469206553,1469551883,785d47993f601ceb5912f4521595ad8ac5fd5901
785d47993f601ceb5912f4521595ad8ac5fd5901,785d4799,"Merge ""Fix privacy policy URL""","Merge ""Fix privacy policy URL""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469551476,1469551476,"226cc300083e19670595f349d1a6e2b10e84ae60,70f92e8757f142476298656656e2945f488e8fee"
226cc300083e19670595f349d1a6e2b10e84ae60,226cc300,"Merge ""Hygiene: convert member to local""","Merge ""Hygiene: convert member to local""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469549947,1469549947,"4329eed5d04836a2a3e145235c4a3fea5e04773b,ad9a0bd523144b4cf5daef24107f98d33474cb45"
4329eed5d04836a2a3e145235c4a3fea5e04773b,4329eed5,"Merge ""Add overhaul tabs""","Merge ""Add overhaul tabs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469548999,1469548999,"de1da4b1098d9ed4261de36209d17f432f9fe790,3635232eafc54272da3c7ed9d83cc8c7c120cff3"
de1da4b1098d9ed4261de36209d17f432f9fe790,de1da4b1,"Merge ""Change default Activity for dev flavor""","Merge ""Change default Activity for dev flavor""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469548108,1469548108,"0ca03cf9d84399acce626e77a6ddb6538c167c05,ff5384a41936bb190513dc7be9a42a2f57aa6af9"
0ca03cf9d84399acce626e77a6ddb6538c167c05,0ca03cf9,"Merge ""Upgrade Android Support Libraries to v24.1.1""","Merge ""Upgrade Android Support Libraries to v24.1.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469546911,1469546911,"6465e28309582cbf10e3ea4717d85354ce627783,dabc868db04b4433bc79e6af3fcd4d80dcbda699"
4fbf6cc068ba16f9b2583fa24aeae72da52b7d76,4fbf6cc0,Update bundled CSS,"Update bundled CSS

via Vagrant + make-css-assets.bash

Change-Id: I6c1c4351cd8ba509975179bcbae97f718818bdaa
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469539902,1469539902,6465e28309582cbf10e3ea4717d85354ce627783
6465e28309582cbf10e3ea4717d85354ce627783,6465e283,Bump versionCode,"Bump versionCode

Change-Id: I1436215c12816235fa8407db0c0b13f2357fdd63
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469483648,1469483737,13bfc4c396a6ba54f330e7277bc107d10eb68c3d
13bfc4c396a6ba54f330e7277bc107d10eb68c3d,13bfc4c3,"Merge ""Revert stylized wordmark at top of feed.""","Merge ""Revert stylized wordmark at top of feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469483164,1469483164,"c3eacef5b6bd73a1789432295874e21c708023ef,a6bbebeafba0b720db7782490b60c1515266f6ac"
70f92e8757f142476298656656e2945f488e8fee,70f92e87,Fix privacy policy URL,"Fix privacy policy URL

The current privacy policy URL is actually pointing to a redirect to the
privacy policy, instead of hte privacy policy itself. This patch fixes that,
by making the URL point directly to the page.

Change-Id: If5acdbff1347999d0580cc53c5014b14474fb565
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1469480406,1469480406,3042cae8c0cecc2faed50dbe02180ad767bbd1a2
c3eacef5b6bd73a1789432295874e21c708023ef,c3eacef5,"Merge ""Fix translation test""","Merge ""Fix translation test""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469479020,1469479020,"29c22758f3b2b2b77231c6a5bfd67662544cdbd6,506c331a86e7ec942e0a052470e45e0f50eb78a1"
2ccfd3abb00e3af8563c8ff7871b62cdfef31dd3,2ccfd3ab,Make first letter of Reading List titles uppercase when creating a list,"Make first letter of Reading List titles uppercase when creating a list

Does what it says in the description. :-)

Bug: T133118
Change-Id: Ic9bde6da3398d57cf65dc761b884fa480ae9e7a5
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1469478595,1469478638,3042cae8c0cecc2faed50dbe02180ad767bbd1a2
a6bbebeafba0b720db7782490b60c1515266f6ac,a6bbebea,Revert stylized wordmark at top of feed.,"Revert stylized wordmark at top of feed.

Change-Id: Idbf08ada63f46d8dccbbcab91ffa646f7e223ec2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1469477078,1469477078,3042cae8c0cecc2faed50dbe02180ad767bbd1a2
ad9a0bd523144b4cf5daef24107f98d33474cb45,ad9a0bd5,Hygiene: convert member to local,"Hygiene: convert member to local

Change-Id: Iaf0d00b36d2fe6af8e90c9ad98798739d69d592b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469138522,1469476984,3635232eafc54272da3c7ed9d83cc8c7c120cff3
3635232eafc54272da3c7ed9d83cc8c7c120cff3,3635232e,Add overhaul tabs,"Add overhaul tabs

Add navigation tabs to the OverhaulActivity. This isn't the final form
surely but it meets the ticket requirements and is ready to iterate on.
Some future work and considerations are:

• The Fragments embedded aren't ideal yet and some of that may be
  covered by T139194. For instance, you can't go anywhere because
  neither OverhaulFragment nor OverhaulActivity implement any callbacks.

• Some of the buttons, Fragments, icons, and wording will likely change.

• Some of the Fragments don't fit well. For example, NearbyFragment has
  a big empty bar on top.

• Swiping in the Feed doesn't really work.

• The text color in the tab bar sometimes sticks. This appears to be a
  library bug. We should only attempt to fix it if we don't end up using
  a custom View for each tab.

• The NearbyFragment location permission pop up could appear when
  tapping on a card or the current location action button instead of
  when changing tabs.

• Orientation changes are handled by the platform. Network requests
  seem to cache well but we don't preserve the scroll position.

• The landscape experience could be improved. We should probably at
  least show text alongside the icons since there's lots of room
  horizontally.

• One Fragment is cached in background whether it is shown or not to
  improve the change page performance. This uses more memory.

• The tabs might glide out of the way on scroll.

• Snackbars appear over the tab bar instead of the Fragment.

Bug: T139192
Change-Id: I9a445bdd9b46f1c542a07ffa0eec1f0e5abbea93
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469137042,1469476984,ff5384a41936bb190513dc7be9a42a2f57aa6af9
ff5384a41936bb190513dc7be9a42a2f57aa6af9,ff5384a4,Change default Activity for dev flavor,"Change default Activity for dev flavor

Get the full overhaul experience before it makes prod. Android Studio
doesn't seem to pick up the merged default Activity so you may have to
update your launcher.

Change-Id: I46d53ac939bf0e72900948fb32f119803b7f5d6e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469129402,1469476984,dabc868db04b4433bc79e6af3fcd4d80dcbda699
dabc868db04b4433bc79e6af3fcd4d80dcbda699,dabc868d,Upgrade Android Support Libraries to v24.1.1,"Upgrade Android Support Libraries to v24.1.1

Besides just staying current, there are some fixes around TabLayout and
ViewPager that sound nice to have:

  https://developer.android.com/topic/libraries/support-library/revisions.html#rev24-1-0
  https://www.reddit.com/r/androiddev/comments/4u0gw1/support_library_2411_released/

Change-Id: I9e4ae90082498a3a5fcfe0d5d2a4c4bc926a782f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469028333,1469476984,29c22758f3b2b2b77231c6a5bfd67662544cdbd6
29c22758f3b2b2b77231c6a5bfd67662544cdbd6,29c22758,Remove string resources no longer needed with AuthManager,"Remove string resources no longer needed with AuthManager

AuthManager provides localized error strings in login and account creation
failure responses.  This means we no longer have any use for the many
error string translations pertaining to login and account creation.

Bug: T137504
Change-Id: Iec35504d647dc5b54eb974ab8eaadb5f18038c81
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469228120,1469476308,23f94ae18c50ce3bbdbd0288cd65babfc4350fb5
506c331a86e7ec942e0a052470e45e0f50eb78a1,506c331a,Fix translation test,"Fix translation test

strings_no_translate should not be considered in TranslationTest.
Manually exclude false positives until all strings are properly
excluded.

Change-Id: I9998f594f9fade1149487cdf91cfb7467ac62b3d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469475634,1469475757,3042cae8c0cecc2faed50dbe02180ad767bbd1a2
23f94ae18c50ce3bbdbd0288cd65babfc4350fb5,23f94ae1,Remove pre-AuthManager authentication code and update auth tests,"Remove pre-AuthManager authentication code and update auth tests

Also fixed EditTaskTest with one small (and apparently, judging by the
comment, foreseen) change so that testers can observe that all tests now
pass.

Bug: T137504
Bug: T137573
Change-Id: I3488e03ab63ee34e00152d938c5f2e61c046040d
",,,,Michael Holloway,mholloway@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1468968679,1469474391,3042cae8c0cecc2faed50dbe02180ad767bbd1a2
3042cae8c0cecc2faed50dbe02180ad767bbd1a2,3042cae8,"Merge ""Convert field to local variable in ReadingListDetailView class""","Merge ""Convert field to local variable in ReadingListDetailView class""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469464662,1469464662,"235f74b826bc4a410f820eecdcb7ff6e85eb9089,253c665b8a816db67da5b673af2ed1702b0e772d"
235f74b826bc4a410f820eecdcb7ff6e85eb9089,235f74b8,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469464381,1469464381,"587f10f222fc83af2c6948341047abe6855deca6,244030f915dde042350c018e678edbbff970d391"
587f10f222fc83af2c6948341047abe6855deca6,587f10f2,"Merge ""Lint: Use format string for 'find in page' results""","Merge ""Lint: Use format string for 'find in page' results""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469464280,1469464280,"e17971a93ad8c657e872ecacbc0da1d20de6dd8f,a9087afd33c022c6ae8c3d6a95610ac0c6741526"
e17971a93ad8c657e872ecacbc0da1d20de6dd8f,e17971a9,"Merge ""Upgrade to Gradle v2.14.1""","Merge ""Upgrade to Gradle v2.14.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469463979,1469463979,"6bde4cc3b673060480fd59c6d71f897a75f72583,20b9f7edfe01616ecba36ba4ef58a2b8e3c89e70"
6bde4cc3b673060480fd59c6d71f897a75f72583,6bde4cc3,"Merge ""Hygiene: remove remants of custom app ID support""","Merge ""Hygiene: remove remants of custom app ID support""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469461885,1469461885,"8b31617e9012238db1674d1af16099401e375c05,688be82311985709f45250ddf4b6833b4b8c6c77"
244030f915dde042350c018e678edbbff970d391,244030f9,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I55cab441dbb143b90417d3f713f7c4439fbe1d37
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469459904,1469461065,37727e7a362ff0e928f8f34a36e1f2198f8f33b1
a9087afd33c022c6ae8c3d6a95610ac0c6741526,a9087afd,Lint: Use format string for 'find in page' results,"Lint: Use format string for 'find in page' results

Updates to use format string as recommended and eliminates related lint
warnings.

Change-Id: I83e0d8ef833ea180f450ba87a9d450047a01e02e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469460151,1469460151,37727e7a362ff0e928f8f34a36e1f2198f8f33b1
8b31617e9012238db1674d1af16099401e375c05,8b31617e,Feed: Fix RTL display for multiline Wikidata descriptions,"Feed: Fix RTL display for multiline Wikidata descriptions

Adds RtlAwareTextView style to the TextView.  Also added it to the title
TextView since we'd likely see the same problem there in the event a
title wraps to a second line.

Bug: T140512
Change-Id: I5637c3d86c8f1c1fb2c0035796875a57831abeb1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469457457,1469457520,37727e7a362ff0e928f8f34a36e1f2198f8f33b1
dfca259ab33f9926a1a2b4d73a6aaa129d85c2b3,dfca259a,Remove summary from Wikipedia Zero FAQ button in Settings,"Remove summary from Wikipedia Zero FAQ button in Settings

Per T129937#2151054, this patch removes the summary from the Wikipedia Zero
FAQ button.

Bug: T129937
Change-Id: Icf65c237202773c4b118e912ee8d0215af2927eb
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1469316293,1469316293,034f647c18a307ebd10083be47073ca240525625
253c665b8a816db67da5b673af2ed1702b0e772d,253c665b,Convert field to local variable in ReadingListDetailView class,"Convert field to local variable in ReadingListDetailView class

This patch converts a field which is only used in one method in the
ReadingListDetailView class to a local variable, to improve performance and
code cleanliness.

Change-Id: Ia54425f30baa97587beb93e3be44d89a9f606134
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1469304277,1469304277,034f647c18a307ebd10083be47073ca240525625
688be82311985709f45250ddf4b6833b4b8c6c77,688be823,Hygiene: remove remants of custom app ID support,"Hygiene: remove remants of custom app ID support

The functional change was in https://gerrit.wikimedia.org/r/#/c/271975/.
This just removes now defunct code in the Python script.

Bug: T103903
Change-Id: I14419523b13d96fe90d7411c403466d6b5faceec
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469247832,1469247966,37727e7a362ff0e928f8f34a36e1f2198f8f33b1
37727e7a362ff0e928f8f34a36e1f2198f8f33b1,37727e7a,"Merge ""Try RB earlier after fallback""","Merge ""Try RB earlier after fallback""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469210748,1469210749,"0c0ab8e27bfe26ff15baf18aef360057314f6651,fe8089d380248fcc59839806406a93d5c1644e97"
8c4f0342d549605bb8de74594a6e3f54fafa287e,8c4f0342,Convert remaining HttpURLConnection usages to OkHttp,"Convert remaining HttpURLConnection usages to OkHttp

Most of our core API calls already use the up-to-date Request/Response API
provided by OkHttp.  But there were a few remaining calls using the
HttpRequest library from earlier versions of the app.  This patch moves
more of them to Retrofit.

We won't be able to completely do away with OkUrlFactory until we stop
using the apps/android/java-mwapi library, which needs the cookie handling
that the OkHttpClient provides.  (In principle we could put together our
own implementation, but it's really not worth the trouble.)  Removing our
reliance on apps/android/java-mwapi will be in a patch to follow.

Also includes some light refactoring.

Bug: T134904
Change-Id: I785eeb329718453818d6d224fa5c059ce37cad2e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1468617765,1469206214,0c0ab8e27bfe26ff15baf18aef360057314f6651
0c0ab8e27bfe26ff15baf18aef360057314f6651,0c0ab8e2,"Merge ""Hygiene: Remove miscellaneous espresso libraries from build.gradle""","Merge ""Hygiene: Remove miscellaneous espresso libraries from build.gradle""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469205277,1469205277,"1370c161a9cecf54b4ba9cc208ed4445947d03ad,389d742b8b640883df225bc67c9a7b0443b508ef"
20b9f7edfe01616ecba36ba4ef58a2b8e3c89e70,20b9f7ed,Upgrade to Gradle v2.14.1,"Upgrade to Gradle v2.14.1

https://docs.gradle.org/2.14.1/release-notes

Change-Id: I84a5e7ebead46ba027956e74da45e707110a5e9c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469203182,1469203182,96bb42836c96bfe3cb8a893fdd3e9d553068083d
1370c161a9cecf54b4ba9cc208ed4445947d03ad,1370c161,Fix a couple NPEs on dev and alpha flavors,"Fix a couple NPEs on dev and alpha flavors

Change-Id: I473b20e74310c1cc33cbe540f7af5411b95ed571
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469203011,1469203011,96bb42836c96bfe3cb8a893fdd3e9d553068083d
96bb42836c96bfe3cb8a893fdd3e9d553068083d,96bb4283,"Merge ""Disable HockeyApp exception handling for pre-beta releases""","Merge ""Disable HockeyApp exception handling for pre-beta releases""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469202440,1469202440,"23738b372bf7452e1842de44b66f3867cbda2846,d12042fc3a890396f1f1a8ce4c92ca628af9492d"
23738b372bf7452e1842de44b66f3867cbda2846,23738b37,"Merge ""Add empty nav overhaul Activity, Fragment, & theme""","Merge ""Add empty nav overhaul Activity, Fragment, & theme""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469136852,1469136852,"384cc085275472b4ed05a264d99cd21c230033b1,1d492081af8b32d38f48a0010b08e8efb3d4dfdd"
384cc085275472b4ed05a264d99cd21c230033b1,384cc085,"Merge ""Hygiene: Remove unused constants from SavedPageSyncService""","Merge ""Hygiene: Remove unused constants from SavedPageSyncService""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469132730,1469132730,"371b2030730ae46894b589e3f6c28e35e10f2b8e,e96516481a82dac5a8c9648ba162685a8d0f4d35"
371b2030730ae46894b589e3f6c28e35e10f2b8e,371b2030,"Merge ""Hygiene: replace equals & hashCode with BaseModel""","Merge ""Hygiene: replace equals & hashCode with BaseModel""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469132471,1469132471,"b3e146796da2418f63971c85f4c68e071d107cd4,ae32bcd1a16241481bd8318ba5831f1182d28111"
1d492081af8b32d38f48a0010b08e8efb3d4dfdd,1d492081,"Add empty nav overhaul Activity, Fragment, & theme","Add empty nav overhaul Activity, Fragment, & theme

Add navigation overhaul skeleton.

Bug: T139192
Change-Id: I43aa51759aa569f2aaa4f8f2db5e4f033ea4c156
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468450578,1469129960,b3e146796da2418f63971c85f4c68e071d107cd4
b3e146796da2418f63971c85f4c68e071d107cd4,b3e14679,"Merge ""Hygiene: fix some nullable issues and misc cleanup""","Merge ""Hygiene: fix some nullable issues and misc cleanup""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1469128585,1469128585,"59f756a8809106780f17a28d685980a83a379da6,06f594f79fa7f57cc199359b204e262628ac687c"
389d742b8b640883df225bc67c9a7b0443b508ef,389d742b,Hygiene: Remove miscellaneous espresso libraries from build.gradle,"Hygiene: Remove miscellaneous espresso libraries from build.gradle

These appear unused and probably needn't be included in our build script.

Change-Id: Ic51cc5d4428ab2329e9f1943ac003603b86fd0e0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469107989,1469127450,0f9ea53084991c3a90abc13e178f0c1a1c3a04b1
d12042fc3a890396f1f1a8ce4c92ca628af9492d,d12042fc,Disable HockeyApp exception handling for pre-beta releases,"Disable HockeyApp exception handling for pre-beta releases

It breaks the test runner.  If we want exception handling for alpha and
dev builds, we can add a dev option for it.

Bug: T136873
Change-Id: Iea86b747796ac2d469e1be6b2d2dd0ed1d19f4a6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469125944,1469125944,59f756a8809106780f17a28d685980a83a379da6
ae32bcd1a16241481bd8318ba5831f1182d28111,ae32bcd1,Hygiene: replace equals & hashCode with BaseModel,"Hygiene: replace equals & hashCode with BaseModel

Change-Id: I359f2dd0c03188d621d43b6e1c92d3c9b05150e2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1469123653,1469123653,59f756a8809106780f17a28d685980a83a379da6
06f594f79fa7f57cc199359b204e262628ac687c,06f594f7,Hygiene: fix some nullable issues and misc cleanup,"Hygiene: fix some nullable issues and misc cleanup

• Remove some @SuppressWarnings @NonNull View annotations in Fragments
  and Activities as previously discussed[0]. In Activities, Views are
  null until setContentView() is called in onCreate() and until
  onCreateView() returns in Fragments. An additional complexity in
  Fragments is the onDestroyView case which might null them out (for
  example, using Unbinder.unbind()). The IDE can't flag issues
  constructively for @Nullable or @NonNull so just remove the
  annotations.

• TextView.setText() seems to be null hardy[1]. Remove the redundant
  null to empty conversion.

• Miscellaneous cleanup.

[0] https://gerrit.wikimedia.org/r/#/c/297984/9/app/src/main/java/org/wikipedia/page/gallery/GalleryItemFragment.java
[1] https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/TextView.java#4213

Change-Id: Icdea630129c094ba88cf746beb018f4b328d51e9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468532485,1469121793,d083a1dc0fe91fa5b4d731fdc37ad2fb393c4b8c
59f756a8809106780f17a28d685980a83a379da6,59f756a8,Fix page load tests,"Fix page load tests

Interact with MainActivity rather than a PageFragment that we assume to
be at the top of the fragment backstack.

Bug: T140896
Change-Id: Ib9412c1962094be54903fe48a68a03a233cbf2b3
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469034210,1469121605,d083a1dc0fe91fa5b4d731fdc37ad2fb393c4b8c
e96516481a82dac5a8c9648ba162685a8d0f4d35,e9651648,Hygiene: Remove unused constants from SavedPageSyncService,"Hygiene: Remove unused constants from SavedPageSyncService

Change-Id: Ic6cfdf75b2e51bd1d1caa42f12e3925697370a84
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1469040090,1469040090,0f9ea53084991c3a90abc13e178f0c1a1c3a04b1
d083a1dc0fe91fa5b4d731fdc37ad2fb393c4b8c,d083a1dc,Specify UTC Time Zone for feed card date strings,"Specify UTC Time Zone for feed card date strings

This simple change fixes two feed card date string bugs:

1) Makes the featured article/image cards reflect the true UTC date their
   content is associated with, rather than the current local date (minus
   ""age""), when the two differ.

2) Makes the most-read card date string reflect the correct date that its
   content is associated with (currently it shows as a day behind the true
   value).

Bug: T140712
Change-Id: I0bd35b93157ab905a5adbc5950ddc0cb19f4c590
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1468983092,1469029231,0f9ea53084991c3a90abc13e178f0c1a1c3a04b1
fe8089d380248fcc59839806406a93d5c1644e97,fe8089d3,Try RB earlier after fallback,"Try RB earlier after fallback

To further the RB roll out we want to try using RB earlier after a fallback case from RB to MW API has occurred.

This patch changes it so that the app tries to go back to RB after 5 successful page loads instead of waiting for a 100 successful page loads.

Change-Id: I3604f8e588c39c27cb1dd3967b75169ea7020b4f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1468986984,1468986984,0f9ea53084991c3a90abc13e178f0c1a1c3a04b1
0f9ea53084991c3a90abc13e178f0c1a1c3a04b1,0f9ea530,Bump versionCode,"Bump versionCode

Change-Id: I7a55237f760516905a5a74936ab51a1ceac04eb4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468947405,1468947418,e2fbafcc94d645445200b9378d2318d87a638b5f
e2fbafcc94d645445200b9378d2318d87a638b5f,e2fbafcc,"Merge ""Add online status check to saved page sync service""","Merge ""Add online status check to saved page sync service""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468947358,1468947358,"68a2e8928be0d7f542f96c3a52e3785a832f40cc,346cf4b560bdcb3369fe222a925954a9d6e1df67"
346cf4b560bdcb3369fe222a925954a9d6e1df67,346cf4b5,Add online status check to saved page sync service,"Add online status check to saved page sync service

This should check for online status before it begins to perform its
sync/save operations.  Currently it retries indefinitely.  After this
patch, it won't.

Bug: T140762
Change-Id: Ie7c4beb18168ab29086c224a3ddb9a5105fa3550
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1468939147,1468946620,3de9261578357a68b7d57b2526ea41564ca28fc4
68a2e8928be0d7f542f96c3a52e3785a832f40cc,68a2e892,"Merge ""Fix system status bar color in API 19 when looking at Feed.""","Merge ""Fix system status bar color in API 19 when looking at Feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468943480,1468943480,"528cf2366f9a3ebb4c86b961753e112dbf4c72e7,fa1e099c5cb118ba364d46db1f5674865f696837"
528cf2366f9a3ebb4c86b961753e112dbf4c72e7,528cf236,"Merge ""Add time stamp to Because You Read card.""","Merge ""Add time stamp to Because You Read card.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468942956,1468942956,"77042fdca9b99e3581c29e5522a94272eae73f1f,e66e2398dca6ba8fd6c4a2392f43d85981fb6869"
fa1e099c5cb118ba364d46db1f5674865f696837,fa1e099c,Fix system status bar color in API 19 when looking at Feed.,"Fix system status bar color in API 19 when looking at Feed.

This seems to be the only way to do it.

Bug: T140392
Change-Id: I2b7700a0cb2dbfadd8cbeb25b163c7e6c560982d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468942338,1468942338,77042fdca9b99e3581c29e5522a94272eae73f1f
77042fdca9b99e3581c29e5522a94272eae73f1f,77042fdc,Honor disabled images setting in the feed.,"Honor disabled images setting in the feed.

When the user disables images in Settings, the images were still being
loaded in the feed.

Bug: T140761
Change-Id: I956ccb46b4cdf467b0840cdc865c5475e1b19792
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468939068,1468939068,3de9261578357a68b7d57b2526ea41564ca28fc4
3de9261578357a68b7d57b2526ea41564ca28fc4,3de92615,Add missing pluralizations,"Add missing pluralizations

Pluralizations should always include at least an other item.

Bug: T140700
Change-Id: I142be15ae2943f325aaea6cf1759ad6440dc2958
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468882579,1468882661,2929123c5a5c1cd253b91af9f45204deb5fc6f3d
2929123c5a5c1cd253b91af9f45204deb5fc6f3d,2929123c,Bump versionCode,"Bump versionCode

Increment version minor too: v2.3.148.

Change-Id: Ib09ed2db766c80a26b0d527a3db9947e5414e398
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468863753,1468863848,9529b8f71b917b33ca797c78e58a0af3462e4ac3
9529b8f71b917b33ca797c78e58a0af3462e4ac3,9529b8f7,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I2f8620faaab7965b19c21201bbf752187cc5896e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468855374,1468857873,4ca5f546ab5baea9f860b7d6f00627355f8b5464
e66e2398dca6ba8fd6c4a2392f43d85981fb6869,e66e2398,Add time stamp to Because You Read card.,"Add time stamp to Because You Read card.

The data was already there; it just needed to be exposed.
This makes all the cards consistent, with a date message in the header.

Change-Id: Ie164fa93f3fd4235d4553ffa209a9079cc067e74
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468672134,1468680150,4ca5f546ab5baea9f860b7d6f00627355f8b5464
4ca5f546ab5baea9f860b7d6f00627355f8b5464,4ca5f546,"Merge ""Use stylized text wordmark at top of feed.""","Merge ""Use stylized text wordmark at top of feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468612040,1468612040,"0b13f52b67c7c6e27c0cb2565ef5ee00f3d26e3b,edd0e1672a4be71716d0962bc1240f1fbdf8270d"
0b13f52b67c7c6e27c0cb2565ef5ee00f3d26e3b,0b13f52b,Put News card at the top.,"Put News card at the top.

It looks like explicitly setting setNestedScrollingEnabled to false seems to solve
the weird scrolling issue I mentioned earlier.

Change-Id: Ibfd2c383af44311e5a318bd2bde140a5b98fbd26
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468609001,1468610778,5934dc4b19c637b73d1e46ea06c05187895dec6b
edd0e1672a4be71716d0962bc1240f1fbdf8270d,edd0e167,Use stylized text wordmark at top of feed.,"Use stylized text wordmark at top of feed.

Bug: T140375
Change-Id: I4aede416cba4fde9fb2fcc9ddce8155c9ac7a59d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468588858,1468607938,5934dc4b19c637b73d1e46ea06c05187895dec6b
5934dc4b19c637b73d1e46ea06c05187895dec6b,5934dc4b,"Merge ""Fix crash after clicking Random card""","Merge ""Fix crash after clicking Random card""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468600164,1468600164,"92aa8aef4bb47f8d629d6cdee8315bdc0a142e7e,cfb477116b5dfb8502dd3d93f8740c90ce4a67cc"
92aa8aef4bb47f8d629d6cdee8315bdc0a142e7e,92aa8aef,"Merge ""Hygiene: rename string resource""","Merge ""Hygiene: rename string resource""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468599029,1468599029,"a6665f8b935ac50e88310aac8015229fe61593eb,b0ccf6ba921038c21efa28dbcbde26097dc366d9"
cfb477116b5dfb8502dd3d93f8740c90ce4a67cc,cfb47711,Fix crash after clicking Random card,"Fix crash after clicking Random card

Our output format for /page/random/title is now the standard restbase
/page/title/{title} format.  We were looking for a normalizedtitle
property, but this response doesn't have one.  Luckily, a non-normailzed
title is fine here for our purposes.

Change-Id: I51a794a39887a2b6e7f9413dc010eb64166e95dd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1468598696,1468598696,bacb3581f4c3eadd8bc10e5c7f92008a1f1ddc06
a6665f8b935ac50e88310aac8015229fe61593eb,a6665f8b,"Merge ""Hygiene: use SettingsActivity.newIntent()""","Merge ""Hygiene: use SettingsActivity.newIntent()""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468597519,1468597519,"647af56e84e2d5225a86fd4c497e27ee517626ce,d0c177f02b03f87f3040c1c4d9669fafd4cf0034"
647af56e84e2d5225a86fd4c497e27ee517626ce,647af56e,"Merge ""Final order of feed cards.""","Merge ""Final order of feed cards.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468597280,1468597280,"fe0625b0e0ffbb800cde56c6007ed6906211d023,fd43e3da2fa587bcd5c629f38ef038580c53b650"
fe0625b0e0ffbb800cde56c6007ed6906211d023,fe0625b0,"Merge ""Fix possible leak of MainActivity when exiting app.""","Merge ""Fix possible leak of MainActivity when exiting app.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468596623,1468596623,"d4e4d49a7da531d2e1496e8531d556c563d7fda5,65dc641720b9d23f72bb303c78b81d8aea2f4114"
65dc641720b9d23f72bb303c78b81d8aea2f4114,65dc6417,Fix possible leak of MainActivity when exiting app.,"Fix possible leak of MainActivity when exiting app.

It's not 100% clear why this leak occurs, but it appears to be preventable
by making sure that all fragments are popped from the FragmentManager
before closing the activity.
(Observed on API 19)

Bug: T139945
Change-Id: Ib8fe6685ac03261471ae3210fc64c76461a2a670
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468594915,1468595416,5e761fd964966f8916054dfa96e13f9263920693
d4e4d49a7da531d2e1496e8531d556c563d7fda5,d4e4d49a,"Merge ""Fix memory leak related to HockeySDK""","Merge ""Fix memory leak related to HockeySDK""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468595232,1468595232,"bacb3581f4c3eadd8bc10e5c7f92008a1f1ddc06,5e761fd964966f8916054dfa96e13f9263920693"
5e761fd964966f8916054dfa96e13f9263920693,5e761fd9,Fix memory leak related to HockeySDK,"Fix memory leak related to HockeySDK

The current HockeySDK has a known issue that can leak an Activity, if the
MetricsManager is initialized with the Activity's context. For some
reason, MetricsManager asks for both an Application context and an
Activity context, when in fact it seems to function identically when
initialized with just the Application context.

https://github.com/bitstadium/HockeySDK-Android/issues/166

Bug: T139945
Change-Id: I059f1af67d5c5a6c1d2485eb5dd2d4f37cc42d1a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468594675,1468594675,1587d5a709c2cd57a34bf27e5549eddc5dd7144b
bacb3581f4c3eadd8bc10e5c7f92008a1f1ddc06,bacb3581,"Merge ""Hygiene: generify method""","Merge ""Hygiene: generify method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468591140,1468591140,"1587d5a709c2cd57a34bf27e5549eddc5dd7144b,aac184635d52b0ffe4723b13c7cc8eac5c375596"
fd43e3da2fa587bcd5c629f38ef038580c53b650,fd43e3da,Final order of feed cards.,"Final order of feed cards.

Change-Id: Ibc1af8bca678708843875641bf1ab6cc78d44950
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468588272,1468588272,1587d5a709c2cd57a34bf27e5549eddc5dd7144b
b0ccf6ba921038c21efa28dbcbde26097dc366d9,b0ccf6ba,Hygiene: rename string resource,"Hygiene: rename string resource

FeedActivity was removed. Update string naming to use Fragment.

Change-Id: Ic7f95b691175693c215487a543872f8acf08bdc4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468450429,1468532858,d0c177f02b03f87f3040c1c4d9669fafd4cf0034
d0c177f02b03f87f3040c1c4d9669fafd4cf0034,d0c177f0,Hygiene: use SettingsActivity.newIntent(),"Hygiene: use SettingsActivity.newIntent()

Add SettingsActivity.newIntent() and use newIntent() pattern.

Change-Id: I043c4d1ffb613d75d77677e93cd932d0d724db49
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468450277,1468532841,aac184635d52b0ffe4723b13c7cc8eac5c375596
aac184635d52b0ffe4723b13c7cc8eac5c375596,aac18463,Hygiene: generify method,"Hygiene: generify method

No functional changes intended.

Change-Id: I3ec700614467c2ee1b8348f2b45ecf7d9ef7357f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468448698,1468532819,9f2a599086ebb80894ece2773de544ff804c0beb
1587d5a709c2cd57a34bf27e5549eddc5dd7144b,1587d5a7,Hygiene: use default LinearLayout orientation,"Hygiene: use default LinearLayout orientation

The default orientation of LinearLayouts are horizontal[0]. Defaults
should only be overridden when deviation is necessary. Consider the
recent case of overriding textColor on a TextView to black. What seemed
identical actually introduced a subtle bug apparent only in night mode.
Although not explicating code requires an understanding of the implicit
behavior, that is often a requirement regardless and less code is easier
to read and work with.

[0] https://developer.android.com/reference/android/widget/LinearLayout.html#attr_android:orientation

Change-Id: I3ad6a8937bc65759fdf514317e21a6633fe7b235
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468531973,1468531973,9f2a599086ebb80894ece2773de544ff804c0beb
9f2a599086ebb80894ece2773de544ff804c0beb,9f2a5990,"Merge ""Derive card dates from callback age param rather than static Date object""","Merge ""Derive card dates from callback age param rather than static Date object""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468529987,1468529987,"61247c62139414e57482b7f9415fbf7dcafc2629,d98ae92b307d27008c63908f2fd0aa2ea1dbb037"
61247c62139414e57482b7f9415fbf7dcafc2629,61247c62,"Merge ""General design tweaks in feed items.""","Merge ""General design tweaks in feed items.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468528472,1468528472,"1ab60a9b386b6a7c2f0385ff7c697929e460505b,96d0b80da44f112fee9bb4c59aba59721e63c646"
1ab60a9b386b6a7c2f0385ff7c697929e460505b,1ab60a9b,"Merge ""Fix news screen face detection & night mode title""","Merge ""Fix news screen face detection & night mode title""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468527671,1468527671,"916b8b78dfed42db25031c0fab23d6c1cd77495e,0543f3f4c9c07b3f47af3fa29871f1275a3d93d5"
96d0b80da44f112fee9bb4c59aba59721e63c646,96d0b80d,General design tweaks in feed items.,"General design tweaks in feed items.

Bug: T140378
Change-Id: I376ba6fa0dca07d7607c4fe31b49e5c4aae273df
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468525956,1468526823,50ec58cb3619f815f356b6cb3313739981f6cf73
d98ae92b307d27008c63908f2fd0aa2ea1dbb037,d98ae92b,Derive card dates from callback age param rather than static Date object,"Derive card dates from callback age param rather than static Date object

Whomever implemented the aggregated feed content client (spoiler: it was
me) unwisely chose to maintain a static Date object, set when a request was
made from the feed, that would then be also read from the callback to
assign dates to cards.  Unfortunately, this meant the date could be modified
before the callback returned.

This fixes that.

Bug: T140406
Change-Id: I4091945dc25b74bd79f5b59851f2ab39f6e87ce7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1468526737,1468526737,011a8ac3bd57f66775b44f2eb0fe570c68a96f0f
916b8b78dfed42db25031c0fab23d6c1cd77495e,916b8b78,Scroll feed to top when selecting Explore from nav menu.,"Scroll feed to top when selecting Explore from nav menu.

Bug: T140379
Change-Id: I8c2d83ca8804ad11ee7b2757b12c0f0e203b1f7f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468522825,1468526604,5a0688107374edb8b0f7df64ffe897c15f51c0f8
0543f3f4c9c07b3f47af3fa29871f1275a3d93d5,0543f3f4,Fix news screen face detection & night mode title,"Fix news screen face detection & night mode title

Fix face detection and title color in night mode for the news Feed card
item Activity.

Change-Id: Iaa6d21d76bc93a6b77dd42400f479c3a6974a810
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468525075,1468525075,50ec58cb3619f815f356b6cb3313739981f6cf73
5a0688107374edb8b0f7df64ffe897c15f51c0f8,5a068810,Fix highlighting of nav menu items.,"Fix highlighting of nav menu items.

For some reason the line of code that actually highlights the current nav item
seems to have disappeared.

Change-Id: Iecc626b79e96e9882d860558213658964198aae1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468522648,1468522648,50ec58cb3619f815f356b6cb3313739981f6cf73
50ec58cb3619f815f356b6cb3313739981f6cf73,50ec58cb,"Merge ""Nail down face detection throughout the app.""","Merge ""Nail down face detection throughout the app.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468518264,1468518264,"982b235743f959f4cd0ed54b29d953b15427a0d0,474e4d036b91da2a7b846b63068dbaf260cfff3f"
982b235743f959f4cd0ed54b29d953b15427a0d0,982b2357,"Merge ""Featured image card: open image in gallery when clicked""","Merge ""Featured image card: open image in gallery when clicked""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468517144,1468517144,"011a8ac3bd57f66775b44f2eb0fe570c68a96f0f,1538a339a8338f874647098265de3ff74e2940af"
011a8ac3bd57f66775b44f2eb0fe570c68a96f0f,011a8ac3,"Merge ""Make Feed only dismiss by swiping right""","Merge ""Make Feed only dismiss by swiping right""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468515113,1468515113,"afa09fca2edb5f8ec465008d6ca3f264682b708e,193d45599f26fa091e23f779307e4ae6f0912636"
afa09fca2edb5f8ec465008d6ca3f264682b708e,afa09fca,"Merge ""Make continue reading Feed card images tappable""","Merge ""Make continue reading Feed card images tappable""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468514819,1468514819,"0d5218b979f68728ff43998b13d647008e3747b7,1fac2d97c02412f56e297e40a449a203f0d36460"
474e4d036b91da2a7b846b63068dbaf260cfff3f,474e4d03,Nail down face detection throughout the app.,"Nail down face detection throughout the app.

This patch updates our custom face-detecting ImageView with a new default
handler that *automatically* centers the focus onto the face. All you need
to do is make sure that you set the image cropping to focusCrop in the
xml.

The patch updates the Featured Aricle card, Featured Image card, News
cards, and Continue Reading / Because You Read cards to all use automatic
face detection.

The actual face detection logic is now updated to properly center on the
nose of the subject, instead on the eyes, making the subjects appear
nicely centered in landscape-oriented views.

This also cleans up a lot of additional unnecessary logic surrounding the
previous incarnation of this feature.

Change-Id: Icf2385fd5de3b4f7b0a72dbb61dfabba2a5a1be6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468506435,1468511393,0d5218b979f68728ff43998b13d647008e3747b7
0d5218b979f68728ff43998b13d647008e3747b7,0d5218b9,"Merge ""Remove hardcoded eye to nose offset on lead images""","Merge ""Remove hardcoded eye to nose offset on lead images""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468506357,1468506357,"7e6b2c30c9bb0659f7b4a75223cbc10ebaf1dc2b,41c421cf69a0f9b0ea13124f67f101575cbfb868"
1538a339a8338f874647098265de3ff74e2940af,1538a339,Featured image card: open image in gallery when clicked,"Featured image card: open image in gallery when clicked

Does what it says on the tin.  Further, logs gallery events with a constant
string (""FeedFeaturedImage"") as the pageTitle value when opened in the
gallery.

Also includes some light refactoring to pass in the filename and Site as
String and Site rather than an ""imageTitle"" PageTitle object, which seems
confusing and unnecessary.

Bug: T132814
Change-Id: Ice34d54bf6c17f5359d707dddc148e24d1fdd4a0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1467915544,1468506170,7e6b2c30c9bb0659f7b4a75223cbc10ebaf1dc2b
7e6b2c30c9bb0659f7b4a75223cbc10ebaf1dc2b,7e6b2c30,"Merge ""Hygiene: update Feed class packaging""","Merge ""Hygiene: update Feed class packaging""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468505278,1468505278,"7c467f099a57391604fb7e461146d5c5d2fad17a,85360dc3dc08b96213d44b898328044063080bc6"
7c467f099a57391604fb7e461146d5c5d2fad17a,7c467f09,"Merge ""Hygiene: remove needless type parameter""","Merge ""Hygiene: remove needless type parameter""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468504994,1468504994,"9c60b20ce6b596ff7c6b20e59307e2877808ebbb,293fa5090984c99c21717d477b0905b8c04f313a"
9c60b20ce6b596ff7c6b20e59307e2877808ebbb,9c60b20c,"Merge ""Update CSS assets""","Merge ""Update CSS assets""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468504741,1468504741,"468e040635b6644fefd306b981c9ff6fa0548068,9b994b53ce8128e4b2b5601ee44d0af9b0b26bf1"
468e040635b6644fefd306b981c9ff6fa0548068,468e0406,"Merge ""Always clear pending image download""","Merge ""Always clear pending image download""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468504372,1468504372,"6b4b4830a8850faa5c732547eb9711cc89a9ec3d,25fc469035ae8271bc827d42c48c7ed3bdd85d27"
6b4b4830a8850faa5c732547eb9711cc89a9ec3d,6b4b4830,"Merge ""Add Feed nav menu logging""","Merge ""Add Feed nav menu logging""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468503744,1468503744,"129471fc19e678a8bb2231cfd0379aae00cf5512,1289a262fad4ecc5dbeb52a6bf334582853135b8"
129471fc19e678a8bb2231cfd0379aae00cf5512,129471fc,"Revert ""Use random/title endpoint instead of random/summary""","Revert ""Use random/title endpoint instead of random/summary""

This reverts commit 525f5e159a180f91e1d4d633003b6148cdf5a880.

Now that title normalization comes into play this doesn't seem 
like a great move anymore. It's now problematic because the title
endpoint provided by RB doesn't have a normalizedtitle property,
and the object would be unnecessarily wrapped into an items array.

Change-Id: Ic098ad257266e80878428f64910e16af8a3f8929
",,,,BearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1468451245,1468470400,02303c935e27324308bb45e4bf5c3cafcefae035
1289a262fad4ecc5dbeb52a6bf334582853135b8,1289a262,Add Feed nav menu logging,"Add Feed nav menu logging

Resolve nav menu Feed todo by adding logging. Remove old saved pages
logging.

Change-Id: I424d6f6fd741e3974490bf02dd2ae7bcf9b2984e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468446776,1468446776,02303c935e27324308bb45e4bf5c3cafcefae035
25fc469035ae8271bc827d42c48c7ed3bdd85d27,25fc4690,Always clear pending image download,"Always clear pending image download

• Clear pending image download when external storage write permission is
  already given.

• Move call to super to default case.

• Annotate pendingDownloadImage as @Nullable to hint at expected usage.

• Rename Constants.WRITE_EXTERNAL_STORAGE_PERMISSION_REQUEST to
  ACTIVITY_REQUEST_WRITE_EXTERNAL_STORAGE_PERMISSION to match what's
  what's used in other MainActivity request codes.

• Remove unused interface, PermissionUtil.Callback.

• Miscellaneous minor clean up.

Change-Id: Ib19ddea539477d1bee1b5567d14c5a7dcbec21f8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468263549,1468444708,02303c935e27324308bb45e4bf5c3cafcefae035
193d45599f26fa091e23f779307e4ae6f0912636,193d4559,Make Feed only dismiss by swiping right,"Make Feed only dismiss by swiping right

From design feedback. Also helps avoid bad dismissals on the cards with
embedded horizontally oriented RecyclerViews.

Change-Id: I841892580e46f377f92c5cac02684fcd1a73c960
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468444170,1468444387,02303c935e27324308bb45e4bf5c3cafcefae035
02303c935e27324308bb45e4bf5c3cafcefae035,02303c93,"Merge ""Bugfix: Fix nearby crash on permissions request result""","Merge ""Bugfix: Fix nearby crash on permissions request result""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468444007,1468444007,"b3682600db0ca2882e4eb172800dd3384a044b5e,982e36b240f4bbee1d135f09baad6a28eb4b7619"
293fa5090984c99c21717d477b0905b8c04f313a,293fa509,Hygiene: remove needless type parameter,"Hygiene: remove needless type parameter

Remove type parameterization from CallbackFragment. CallbackFragment
requires Fragment implementers to override getCallback(). getCallback()
returns the host implementing whatever dependencies the Fragment has,
all specified in a CallbackFragment.Callback subclass. Since the
Fragment may initially implement
CallbackFragment<CallbackFragment.Callback> but still return a subclass,
the type doesn't seem especially useful. FragmentUtil.getCallback()
ensures that a host implements the expected subclass or null is
returned. No functional changes intended.

Change-Id: Ibe58d0fd8c426dabd83c7762f409bef052f2f01c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468442673,1468443862,d25b1a83e43a1baaa5cf3b5c329b0ba175f07588
9b994b53ce8128e4b2b5601ee44d0af9b0b26bf1,9b994b53,Update CSS assets,"Update CSS assets

The latest and greatest, via make-css-assets.bash

Change-Id: I22b34d8355fb5cf0fac52a7df461d8a132444639
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1468443809,1468443809,d25b1a83e43a1baaa5cf3b5c329b0ba175f07588
b3682600db0ca2882e4eb172800dd3384a044b5e,b3682600,"Merge ""Use random/title endpoint instead of random/summary""","Merge ""Use random/title endpoint instead of random/summary""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468443735,1468443735,"288b768abf96f7962a8faab32b65c1bb850031df,525f5e159a180f91e1d4d633003b6148cdf5a880"
1fac2d97c02412f56e297e40a449a203f0d36460,1fac2d97,Make continue reading Feed card images tappable,"Make continue reading Feed card images tappable

Continue reading Feed cards look almost identical to the first entry of
because you read cards but behaved differently. Continue reading cards
respond to taps on the image or the text but continue reading only
respond to text taps. Change CardLargeHeaderView.onClickListener() to
listen to the root View instead of the TextView and remove the cludge in
BecauseYouReadCardView.

Change-Id: If29e47fa671949f80c590454392aad5c45e465a5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468443446,1468443446,d25b1a83e43a1baaa5cf3b5c329b0ba175f07588
288b768abf96f7962a8faab32b65c1bb850031df,288b768a,"Merge ""Fall back to title check when detecting main page""","Merge ""Fall back to title check when detecting main page""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468443185,1468443185,"93c97068cd0ea96e4076c6a25056e25739ec9d01,ef6e8fefa831ea3fdd83844de4cdc7b248dd615a"
85360dc3dc08b96213d44b898328044063080bc6,85360dc3,Hygiene: update Feed class packaging,"Hygiene: update Feed class packaging

• DummyClient and FeedClient to .dataclient.

• FeedViewCallback to .view.

• UtcDate to .model.

No functional changes intended.

Change-Id: If6d00282429f8f2704462fc4a0f3fb2d740d4b33
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468441407,1468441407,d25b1a83e43a1baaa5cf3b5c329b0ba175f07588
93c97068cd0ea96e4076c6a25056e25739ec9d01,93c97068,Limit read more queries to non-main pages,"Limit read more queries to non-main pages

Bug: T139375
Change-Id: I0a489451edf8f42f72134a9fff67c8cdf89b40d2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468430207,1468430207,d25b1a83e43a1baaa5cf3b5c329b0ba175f07588
d25b1a83e43a1baaa5cf3b5c329b0ba175f07588,d25b1a83,"Merge ""Filter out Main Page from ""continue reading"" card.""","Merge ""Filter out Main Page from ""continue reading"" card.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468429434,1468429434,"38b80c08f9bd5c2aa6f2c5f0938663bcaff4db25,5570540889b21f8563b1c658bec80f8b92b81f63"
ef6e8fefa831ea3fdd83844de4cdc7b248dd615a,ef6e8fef,Fall back to title check when detecting main page,"Fall back to title check when detecting main page

Change-Id: Ib866144b9494fdb44fe5a2f140dca11fe30dfce2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Niedzielski,sniedzielski@wikimedia.org,1467994040,1468428310,6bfada80b9bd50586a8f14ec1f86898156a17057
38b80c08f9bd5c2aa6f2c5f0938663bcaff4db25,38b80c08,"Merge ""Update CardPageItem and consumers to reflect updated service output""","Merge ""Update CardPageItem and consumers to reflect updated service output""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468427981,1468427981,"6d46bdc93020b5daf2fc7cbec1bcf4bd8566027a,f966ee0d9a7ff556b9cee1973b6a53fd6840decf"
982e36b240f4bbee1d135f09baad6a28eb4b7619,982e36b2,Bugfix: Fix nearby crash on permissions request result,"Bugfix: Fix nearby crash on permissions request result

Moving the permission result listener to MainActivity in
I320c8ea6414d4edd7efcf3924505a89b93abae86 caused that listener to receive
result signals we weren't expecting, causing us to throw an exception when
hitting the default block.  Instead, let's not throw in the default block,
but allow signals not handled there to propagate to the fragments for
handling.

Bug: T140084
Change-Id: I39037f03755b787149360763b1332d354704d26b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1468427451,1468427451,6d46bdc93020b5daf2fc7cbec1bcf4bd8566027a
5570540889b21f8563b1c658bec80f8b92b81f63,55705408,"Filter out Main Page from ""continue reading"" card.","Filter out Main Page from ""continue reading"" card.

Change-Id: Ie8eab134c38488d815aa529ae8342122d039fbf9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468427437,1468427437,6d46bdc93020b5daf2fc7cbec1bcf4bd8566027a
6d46bdc93020b5daf2fc7cbec1bcf4bd8566027a,6d46bdc9,"Merge ""Hygiene: infer nullity""","Merge ""Hygiene: infer nullity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468422071,1468422071,"af03664026ac3a2127f0dda887724ce0043bf2da,6bfada80b9bd50586a8f14ec1f86898156a17057"
af03664026ac3a2127f0dda887724ce0043bf2da,af036640,"Merge ""Hygiene: update test to JUnit 4""","Merge ""Hygiene: update test to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468419664,1468419664,"ba070f1c3bad2ec5d4bbd5b6f16b3693a6943e24,dfa6711b7af9a669f61549fe80155dbed80a186e"
ba070f1c3bad2ec5d4bbd5b6f16b3693a6943e24,ba070f1c,"Merge ""Hygiene: move PageTitle test to JVM JUnit""","Merge ""Hygiene: move PageTitle test to JVM JUnit""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468419238,1468419238,"44f6cd510e5cd2cb3fa01b249a360dca117a90e7,7ac6ef0b9925953b32b0638de65fcce2fcadb7a3"
44f6cd510e5cd2cb3fa01b249a360dca117a90e7,44f6cd51,"Merge ""Adjust feed layout dimensions""","Merge ""Adjust feed layout dimensions""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468418699,1468418699,"1968a1f789aabdb8687d480f8b2eb1dde3ed749c,8dd3bc804ef4f84e6897413e21faa4729416966e"
41c421cf69a0f9b0ea13124f67f101575cbfb868,41c421cf,Remove hardcoded eye to nose offset on lead images,"Remove hardcoded eye to nose offset on lead images

The upgrade to Fresco patch, 8287304, changed both the library and app
lead image implementations considerably with the side effect that some
of the assumptions around the finer details of face detection are
difficult to identify and verify. FaceDetection.getMidPoint() provides
the point between the subject's eyes. Previous to this patch, we
attempted to vertically offset to the nose as it gave a more pleasing
presentation on some articles. This seems to give a poor presentation
for other articles, so this patch removes it and also enables horizontal
offsets and corrects the default offsets from (0, 0) to (.5, .5). The
David Lloyd Johnston Japanese Wikipedia article gives a good example of
the horizontal offset in action.

For face detection to work properly, 1) the face must be detected
correctly and 2) that face must be favorably positioned relative the
bounds of the image. The image will not be zoomed in for the sake of
focus. For instance the face for the English Wikipedia governor-general
article is correctly identified but it's close to the picture edge so
the image cannot be offset sufficiently to be centered the face.

Bug: T139393
Change-Id: Ie11d8134a5443b2643a6e8a75a8e9bc4c013125e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468364801,1468364801,1968a1f789aabdb8687d480f8b2eb1dde3ed749c
6bfada80b9bd50586a8f14ec1f86898156a17057,6bfada80,Hygiene: infer nullity,"Hygiene: infer nullity

There are seven public constructors to PageTitle, one of which accepts
raw JSON. Many paths of execution make it difficult to reason about a
class. Try to infer member variable nullity of PageTitle and add
annotations. For site, a bug existed where hashCode() expects it to be
nonnull but the JSON constructor sets it null. I've rewritten the
constructor to throw a RuntimeException in non-prod builds and use the
app site while remotely logging the error otherwise. I also changed a
couple of the hasProperties() conditionals to just check for properties
== null directly as the IDE isn't intelligent enough not to erroneously
flag subsequent dereferences.

Change-Id: Ibfff6290c6e5b7b9b35113d9688e15c76159fdbc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468355960,1468356471,dfa6711b7af9a669f61549fe80155dbed80a186e
dfa6711b7af9a669f61549fe80155dbed80a186e,dfa6711b,Hygiene: update test to JUnit 4,"Hygiene: update test to JUnit 4

Change-Id: I57ea4b3e389684717017ba7b4972d75d99491b1e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468351905,1468352524,7ac6ef0b9925953b32b0638de65fcce2fcadb7a3
7ac6ef0b9925953b32b0638de65fcce2fcadb7a3,7ac6ef0b,Hygiene: move PageTitle test to JVM JUnit,"Hygiene: move PageTitle test to JVM JUnit

Move PageTitleTests from Android instrumentation to JVM JUnit and fix
the name and package.

Change-Id: If1521443c498d6c9feebe0f2ef113256b302b165
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468340188,1468340188,1968a1f789aabdb8687d480f8b2eb1dde3ed749c
f966ee0d9a7ff556b9cee1973b6a53fd6840decf,f966ee0d,Update CardPageItem and consumers to reflect updated service output,"Update CardPageItem and consumers to reflect updated service output

In I5eb24688a774316481b98a494d3984044d09d948 we changed the output for
the random and featured article endpoints to include both the normalized
title in the normalizedtitle field, and the raw title in the title field
(where the normalized title previously was).  As an effect of this, right
now you'll see underscores in the Featured Article card article title.

This updates the relevant consumers to handle the updated output.

Change-Id: Id112b7ab904704ecb85d6cbe9b5f45e97fb2130f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1468327017,1468327454,1968a1f789aabdb8687d480f8b2eb1dde3ed749c
1968a1f789aabdb8687d480f8b2eb1dde3ed749c,1968a1f7,"Merge ""Featured image card: enable image downloading from footer button""","Merge ""Featured image card: enable image downloading from footer button""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468263739,1468263739,"7fb68cbcd3f14e545fe37d8bce39e3a6aadb5b18,1179b30a51a8f4ce32ff942047b519a5e33959dd"
7fb68cbcd3f14e545fe37d8bce39e3a6aadb5b18,7fb68cbc,"Change ""1 day ago"" to ""yesterday""","Change ""1 day ago"" to ""yesterday""

Change-Id: I08f68a4857b06102397c13f6004fb57217bcd4de
",,,,Amire80,amir.aharoni@mail.huji.ac.il,Amire80,amir.aharoni@mail.huji.ac.il,1468257205,1468257255,40d58133a11d9a7957d42197fd0ed3440ce1e20b
1179b30a51a8f4ce32ff942047b519a5e33959dd,1179b30a,Featured image card: enable image downloading from footer button,"Featured image card: enable image downloading from footer button

Bug: T130962
Change-Id: I320c8ea6414d4edd7efcf3924505a89b93abae86
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1467991071,1468256902,8854536edd0fad68fa3f8293f2392e478e1755b4
40d58133a11d9a7957d42197fd0ed3440ce1e20b,40d58133,Update feed header wordmark and nav icon.,"Update feed header wordmark and nav icon.

- Replace the telescope with a vector drawable of the Wikipedia wordmark.
- Use a lower-quality aurora background.
- Update the nav icon for the Feed.

Change-Id: I9dfd9fa51b20baf541eb2472462ae56ee216192c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1468244923,1468255009,8854536edd0fad68fa3f8293f2392e478e1755b4
8854536edd0fad68fa3f8293f2392e478e1755b4,8854536e,"Merge ""Remove in-Wikitext image captions from news stories""","Merge ""Remove in-Wikitext image captions from news stories""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468254340,1468254340,"524e9b2aff9fbb812481968c9cc76a8f09400371,a55f68f81a1a5084d1a317691bdc9935d4dac16d"
524e9b2aff9fbb812481968c9cc76a8f09400371,524e9b2a,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ica50cf8e211c67c36cdbfe2f618dd540893b0d82
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1468252720,1468253784,1460f84dc03f05658b43bfbd8aca95112e295c77
a55f68f81a1a5084d1a317691bdc9935d4dac16d,a55f68f8,Remove in-Wikitext image captions from news stories,"Remove in-Wikitext image captions from news stories

The Wikitext we scrape for the In the News stories often includes a
parenthetical referral to a thumbnail for the section, which we don't use.
Instead, we get thumbnails for each card from the metadata for the linked
pages for each story.  This patch removes the inapplicable caption.

Note that this has a soft dependency on
I295c01b48a0d4feea6b21e07e85179deadf1f216 in that merging without it won't
hurt anything, but you'll need that patch applied to the service to see
the effect here.

Among current stories on enwiki, this applies to the one concerning the
Juno spacecraft.

Change-Id: I04284d257858f9d50494c8b0f4a459da099a2091
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1468003582,1468253435,1460f84dc03f05658b43bfbd8aca95112e295c77
1460f84dc03f05658b43bfbd8aca95112e295c77,1460f84d,"Merge ""Featured image card: enable sharing from card footer button""","Merge ""Featured image card: enable sharing from card footer button""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1468250595,1468250595,"fb99d0eb54cbd3f6877b968957fb6e6bfd3cffb8,17b76e451521b08844b9bdedbfd530661f014334"
8dd3bc804ef4f84e6897413e21faa4729416966e,8dd3bc80,Adjust feed layout dimensions,"Adjust feed layout dimensions

* Increase the minimum width. On a Nexus 9 in portrait mode the feed has three columns,
  which are too narrow, to the point that headline text gets clipped. In landscape mode it
  still has three columns, but there it's ok. Tested also on a Nexus 5.
* Reduce horizontal margin because the space between two columns was too wide.
* Increase vertical margin because sometime it's harder to see where a new card starts.

Change-Id: Ibfce7c8edc1d4ca5f5b0534eb0e12a199d6cdb36
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1468220290,1468220290,9063ab7d45ffd98b75edfb061a26488f32633851
17b76e451521b08844b9bdedbfd530661f014334,17b76e45,Featured image card: enable sharing from card footer button,"Featured image card: enable sharing from card footer button

Bug: T130962
Change-Id: I17936897be1fee0571fec62bd6a8b00b031fe8cb
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1467994892,1468007455,9063ab7d45ffd98b75edfb061a26488f32633851
fb99d0eb54cbd3f6877b968957fb6e6bfd3cffb8,fb99d0eb,Ripple background in news items.,"Ripple background in news items.

Change-Id: Ie610de28a0bf65a689f1fb367013303d23538c4e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467998078,1467998078,9063ab7d45ffd98b75edfb061a26488f32633851
9063ab7d45ffd98b75edfb061a26488f32633851,9063ab7d,Don't repeat news Feed card,"Don't repeat news Feed card

Bug: T139480
Change-Id: Ia1a8ab61b898b08bfc2cd92d8ba360e295ea46c6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467994761,1467994761,2e2f920f4db47a00a5445615567ad6331d90e24a
2e2f920f4db47a00a5445615567ad6331d90e24a,2e2f920f,Remove Feed feature flag,"Remove Feed feature flag

Feed is about production ready so always enable it and remove the
feature flag.

Change-Id: Iea5e08d80bf5b6d93a5e190225911f0a5a34b094
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467932883,1467932883,1f44aef6fa5a9f5448fb2b39537553ea63d2e043
1f44aef6fa5a9f5448fb2b39537553ea63d2e043,1f44aef6,Hygiene: misc Feed clean up,"Hygiene: misc Feed clean up

• Remove unused footers. These are currently unused and seem a little
  crufty to keep around.

• Remove unused last page dismissed preference.

• Lots of miscellaneous minor clean up.

Change-Id: I52c33459e8f19e23a10615629cc965b73fd9c16b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467932424,1467932424,b5b514b72bf04b469b43467dcf649953311e37b1
b5b514b72bf04b469b43467dcf649953311e37b1,b5b514b7,Hygiene: remove unnecessary merge nodes,"Hygiene: remove unnecessary merge nodes

• Remove needless merge nodes. Merge nodes are only useful when they
  might have more than one child.

• Simplify custom View superclasses to FrameLayout where all that's
  wanted is a ViewGroup implementation.

Change-Id: If84313f1bf59d61701db6c58eb050a420bb658ee
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467924952,1467925034,bf528b315fe697e35478dfb2dd0c53b6479f65c8
bf528b315fe697e35478dfb2dd0c53b6479f65c8,bf528b31,"Merge ""Hygiene: rename page_activity to main_activity""","Merge ""Hygiene: rename page_activity to main_activity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467924318,1467924318,"02d6e818555646701ac99ee4bd8d6978a974df4f,674904cdcf6583cf1e3256fd063bc1a863658445"
02d6e818555646701ac99ee4bd8d6978a974df4f,02d6e818,Tweak continue reading & because you read cards,"Tweak continue reading & because you read cards

• Resize header and image to be 96dp tall and the image to 96dp wide.

• Change title font to 16sp romanized.

• Make the header interactive. Tapping goes to the referenced article.

Bug: T139402
Change-Id: Iad2cb74330d2ff168787151d74f4f184cdb9b862
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1467912079,1467923439,128542c269534fdc54fb350ae5da6cbc404d9553
674904cdcf6583cf1e3256fd063bc1a863658445,674904cd,Hygiene: rename page_activity to main_activity,"Hygiene: rename page_activity to main_activity

Missed in f4bb28c. No functional changes intended.

Change-Id: I2ea44f5bdacdd01a9e7ac26182439c1dc99d7ca0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467922951,1467922951,128542c269534fdc54fb350ae5da6cbc404d9553
128542c269534fdc54fb350ae5da6cbc404d9553,128542c2,Fix some stuff in NewsActivity.,"Fix some stuff in NewsActivity.

- Give it a Toolbar with home-as-up arrow.
- Give list items a divider.
- Fix adding a page to reading list.

Change-Id: I5d3fff75841b0e99d87e956f7a989f7201c6a62a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1467914799,1467921788,c20e8d5037be4b77ee9674ee44b49db68e1bc333
c20e8d5037be4b77ee9674ee44b49db68e1bc333,c20e8d50,Factor out common action footer for Featured cards.,"Factor out common action footer for Featured cards.

- Made a unified ""footer"" view with a customizable ""action"" button.

Change-Id: Idb61f06e349ab2d43816e19886d20f70c5e85783
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467918921,1467919312,473847159a5514d0be95a95cbfe6f846699a7649
473847159a5514d0be95a95cbfe6f846699a7649,47384715,Whoops: fix divider drawable for API <21,"Whoops: fix divider drawable for API <21

...Forgot that attribute references are not supported within <shape> tags
in API <21.

Change-Id: Ia120ad65ab98db96f56eb6d895825e41dbcf9212
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467912188,1467915983,4f6d27d07d3ed05db317c964d6b280f7b8b7b286
4f6d27d07d3ed05db317c964d6b280f7b8b7b286,4f6d27d0,"Merge ""Hygiene: convert setOnClickListener() to @OnClick""","Merge ""Hygiene: convert setOnClickListener() to @OnClick""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467915171,1467915171,"db9d9ad743d9b5734a175aa8681a24c039dded1c,5428ab0f2fd03de62f4004e96c23a028c74b9a56"
db9d9ad743d9b5734a175aa8681a24c039dded1c,db9d9ad7,"Merge ""Allow for picture of the day without description""","Merge ""Allow for picture of the day without description""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467914451,1467914451,"3335113c6b914375f25bae9f8df045255911e4a2,b7b3fc7e705e33985e30feb0db4bb3d367b02c79"
5428ab0f2fd03de62f4004e96c23a028c74b9a56,5428ab0f,Hygiene: convert setOnClickListener() to @OnClick,"Hygiene: convert setOnClickListener() to @OnClick

No functiona changes intended.

Change-Id: I83c599a4233e9811e732c1df58bb9db6263c921a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467912844,1467912844,3335113c6b914375f25bae9f8df045255911e4a2
3335113c6b914375f25bae9f8df045255911e4a2,3335113c,Feed: further general design tweaks.,"Feed: further general design tweaks.

- Standardized color scheme throughout all feed cards.
- Slight adjustments to margins and paddings.
- Nail down Dark mode!
- Hide footer in News card, until we know what to do with it.

Bug: T139389, T139478
Change-Id: I68c2012b8160a0ca3f560481e34c6e6d3ce6326c
",,,,Dmitry Brant,dbrant@wikimedia.org,Niedzielski,sniedzielski@wikimedia.org,1467904787,1467910117,a86333fc720b53c2ec6219ed90946087ea625298
a86333fc720b53c2ec6219ed90946087ea625298,a86333fc,"Merge ""Move test to JUnit v4""","Merge ""Move test to JUnit v4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467907909,1467907909,"348a17226addd884ed244252e787bb1abdaf943f,8faf3bd78b8b07d005879b551d81f2a188cb49ac"
b7b3fc7e705e33985e30feb0db4bb3d367b02c79,b7b3fc7e,Allow for picture of the day without description,"Allow for picture of the day without description

See also If17f02ef09704293355db508b205d8c34512a409.

Change-Id: I1bd8efa0085f814054ba17dba19e36a1bfd39431
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467907846,1467907846,348a17226addd884ed244252e787bb1abdaf943f
348a17226addd884ed244252e787bb1abdaf943f,348a1722,"Merge ""Picture of the Day card, pt. 1""","Merge ""Picture of the Day card, pt. 1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467905479,1467905479,"396bad998c672d63df9cf631405b78f26dceaf7c,d132aeb50924cec86de333995bedcd21b4b9e6d0"
396bad998c672d63df9cf631405b78f26dceaf7c,396bad99,"Merge ""Tweak Feed list card item UI""","Merge ""Tweak Feed list card item UI""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467904950,1467904950,"5d57e552b0776851cae47ec72973e3176fa8d2ee,e415aff408d1e3d94ec9e83f0723ac3bdccef033"
5d57e552b0776851cae47ec72973e3176fa8d2ee,5d57e552,"Merge ""Drop language name from card title strings""","Merge ""Drop language name from card title strings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467904392,1467904392,"9360955303ffabf71b2ec296d30fcdaac59101f7,37ff27cf315e5f2c23a0b0d0945a4e50e29a348a"
d132aeb50924cec86de333995bedcd21b4b9e6d0,d132aeb5,"Picture of the Day card, pt. 1","Picture of the Day card, pt. 1

Basic view/model classes.  Interactivity to follow.  Header icon size also
needs fixing as usual.

Bug: T132765
Change-Id: I35c9301b81939e535648fbc730ee41286e6d2552
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1467842691,1467901410,81f151d88099899121563838ec54ca9bbe2dd80a
37ff27cf315e5f2c23a0b0d0945a4e50e29a348a,37ff27cf,Drop language name from card title strings,"Drop language name from card title strings

""Today on English Wikipedia"", with English is passed in as a parameter, is problematic for translations
to languages which have different suffixes for genders/declinations.
When I switched to German language and refreshed the explore feed, it said
""Today on Deutsch Wikipedia"". When translated it would say
""Heute auf Deutsch Wikipedia"", but it should say
""Heute auf der deutschen Wikipedia"" instead. (It also requires an article.)
Even then it sounds weird.
When I got to German Wikipedia it just says
""Willkommen bei Wikipedia"" and not
""Willkommen bei der deutschen Wikipedia"". The language name is not used.

I grant that if you switch languages often and for testing it would be nice to see which
WP the feed is based on. It feels awkward for most people, and would be grammatically wrong.

Change-Id: Id5d832d03cc9e7af62442cac1575ab9d23ae29ce
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1467868984,1467869186,81f151d88099899121563838ec54ca9bbe2dd80a
525f5e159a180f91e1d4d633003b6148cdf5a880,525f5e15,Use random/title endpoint instead of random/summary,"Use random/title endpoint instead of random/summary

Bug: T139424
Change-Id: I4ac0a5e15d9540d9e53a4766d88099a31f69bdf2
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1467850514,1467850514,81f151d88099899121563838ec54ca9bbe2dd80a
8faf3bd78b8b07d005879b551d81f2a188cb49ac,8faf3bd7,Move test to JUnit v4,"Move test to JUnit v4

• Update ImageUrlMapTests to use JUnit v4.

• Move ImageUrlMapTests to ImageUrlMapTest.

• Add missing @RunWith annotation to WikipediaZeroTaskTest for
  consistency.

Change-Id: I57be2e8bde6d8bffeabb474504c714a64f5d7255
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467838747,1467838747,81f151d88099899121563838ec54ca9bbe2dd80a
e415aff408d1e3d94ec9e83f0723ac3bdccef033,e415aff4,Tweak Feed list card item UI,"Tweak Feed list card item UI

• Titles are now a roman font with a color of #222 and 6dp closer to
  the top of the item row.

• Subtitles are now colored #555.

• Thumbnails are now 40x40dp with a 2dp corner radius and a 1dp
  rgba(0,0,0,0.12) border inset visible when the image is translucent.

• Overflow menus are 8dp lower.

Bug: T139391
Change-Id: Ib8ea91d994311bc2a1230578187a714f8505a9c8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467835524,1467836681,81f151d88099899121563838ec54ca9bbe2dd80a
9360955303ffabf71b2ec296d30fcdaac59101f7,93609553,Pad Feed cards not the RecyclerView,"Pad Feed cards not the RecyclerView

When swiped left or right, Feed cards are truncated by the padding of
the parent RecyclerView. Move the padding from the RecyclerView to the
card ItemDecoration. This gives a better full screen experience and
makes the cards feel like their falling on the ground.

Change-Id: Iec1bf40a4b18ba3b4b7d460c802a660823e424b2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467826150,1467826250,81f151d88099899121563838ec54ca9bbe2dd80a
81f151d88099899121563838ec54ca9bbe2dd80a,81f151d8,"Merge ""Update Feed date format to ""MMM DD, YYYY""""","Merge ""Update Feed date format to ""MMM DD, YYYY""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467822132,1467822132,"843cb0ee0ddbadc60621f82727c464077341c753,443dcb0ec95928ce988da63bf676974f7f9f896f"
843cb0ee0ddbadc60621f82727c464077341c753,843cb0ee,"Merge ""Tweak Feed paragraph text""","Merge ""Tweak Feed paragraph text""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467821660,1467821660,"d7dccfbadd97347bae04a8fa31c44e76745b55e9,b39d615cdffd861dff912e6ed6500eb61d91be6b"
d7dccfbadd97347bae04a8fa31c44e76745b55e9,d7dccfba,"Merge ""Update Feed strings""","Merge ""Update Feed strings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467820954,1467820954,"1ec800de006cce885a7433a3265bea1df8343481,a84ca1e297004bd4872162e956fba13cf3ac4696"
443dcb0ec95928ce988da63bf676974f7f9f896f,443dcb0e,"Update Feed date format to ""MMM DD, YYYY""","Update Feed date format to ""MMM DD, YYYY""

Bug: T139382
Change-Id: I668137e5647868ea7bd3f8bb030b025cfb97cc5d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467759604,1467820201,b39d615cdffd861dff912e6ed6500eb61d91be6b
b39d615cdffd861dff912e6ed6500eb61d91be6b,b39d615c,Tweak Feed paragraph text,"Tweak Feed paragraph text

Make paragraph text a darker #555 color and size to 14sp.

Bug: T139404
Change-Id: I7cf9be9d326f2659f8964072cd12810761eb7e9b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467758338,1467819529,1ec800de006cce885a7433a3265bea1df8343481
1ec800de006cce885a7433a3265bea1df8343481,1ec800de,"Merge ""In the News card: add interactivity""","Merge ""In the News card: add interactivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467819356,1467819356,"bcc97d0af2f81e7b360fc10ba7dce81bbf1039d3,8d02b88820a1cdb047575a9d71fa7c6ffb038350"
a84ca1e297004bd4872162e956fba13cf3ac4696,a84ca1e2,Update Feed strings,"Update Feed strings

• Promote experimental strings from no_translate and add qq
  descriptions.

• Change suggestion terminology to cards.

• Remove unused demo string.

Change-Id: I32f7ca64e578048380fe01849a52de8439c42dd0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467395223,1467819341,bcc97d0af2f81e7b360fc10ba7dce81bbf1039d3
bcc97d0af2f81e7b360fc10ba7dce81bbf1039d3,bcc97d0a,"Merge ""Tweak Feed footer margins""","Merge ""Tweak Feed footer margins""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467813000,1467813000,"394ed0788eb1a18521204c98a08e556925076ecb,405941da5d95b847e7bd463abe96605468af5560"
394ed0788eb1a18521204c98a08e556925076ecb,394ed078,"Merge ""Strip IPA from today's featured article cards""","Merge ""Strip IPA from today's featured article cards""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467767332,1467767332,"0fb4b2fbfdf5f15448bdfef373b72e18a7e15336,a264233ae32b8ea4cc2c9aab8cf861fb5ea4eefe"
0fb4b2fbfdf5f15448bdfef373b72e18a7e15336,0fb4b2fb,"Merge ""Hygiene: reduce state""","Merge ""Hygiene: reduce state""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467766688,1467766688,"a9cd01df2f35310c4552ca23ef4dd1c3082d9990,14c55931a4b1b96e74fd4d955cac8be18a9acd62"
a9cd01df2f35310c4552ca23ef4dd1c3082d9990,a9cd01df,"Merge ""Don't repeat random and ""Today on Wikipedia"" cards""","Merge ""Don't repeat random and ""Today on Wikipedia"" cards""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467766326,1467766326,"4b8ea62c2941380363dfa5247020949faef46e04,9694c8ff0a8caa5ed293d0daffbea1c3069c1b35"
4b8ea62c2941380363dfa5247020949faef46e04,4b8ea62c,"Merge ""Darken the translucent status bar""","Merge ""Darken the translucent status bar""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467765071,1467765071,"b509fb33697db91ea828784e56dcf02952ee07ce,3085f98ace103c8c059445f65e8ca27f9f7427e3"
b509fb33697db91ea828784e56dcf02952ee07ce,b509fb33,Hygiene: remove unused type parameters,"Hygiene: remove unused type parameters

Change-Id: I1a652bd4013a4f8421382cb7eb0faf032e9b05c6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1467329113,1467763814,555023cb1e107004781a5e07c409ce979b3f9c73
555023cb1e107004781a5e07c409ce979b3f9c73,555023cb,"Merge ""Hygiene: minor clean up""","Merge ""Hygiene: minor clean up""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467763716,1467763716,"94c4899a018b2c0c33790cc7a7c2c75031f86b39,6d5d5f00ddf3ed297364638f16258763701334ca"
8d02b88820a1cdb047575a9d71fa7c6ffb038350,8d02b888,In the News card: add interactivity,"In the News card: add interactivity

Note: this has a soft dependency on
I725c7c98af8a9f28eaa1e94bca9dc55de468c947 (you don't strictly need it, but
the lead image in the news detail view will use a too-small thumbnail and
look bad without it).

Bug: T129084
Change-Id: I2d10e72876f337388a00958186ac4fe1e88f6d2c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1467312967,1467757804,1c836998ff613afba7d894561b75a9043c3ae0cd
405941da5d95b847e7bd463abe96605468af5560,405941da,Tweak Feed footer margins,"Tweak Feed footer margins

Move save and share footer actions 6dp closer to the extract and add 2dp
padding below.

Bug: T139404
Change-Id: Ibdb303d5c8f6e01d0f4012b1a635f6dc8313d715
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467757583,1467757701,94c4899a018b2c0c33790cc7a7c2c75031f86b39
3085f98ace103c8c059445f65e8ca27f9f7427e3,3085f98a,Darken the translucent status bar,"Darken the translucent status bar

Bug: T139379
Change-Id: I1bb0e68e2d3af256ce729476da7864064d380f98
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467746418,1467756529,8749c348795ddb07ef4820086b5e0a6bcd7ee429
14c55931a4b1b96e74fd4d955cac8be18a9acd62,14c55931,Hygiene: reduce state,"Hygiene: reduce state

Change-Id: I7d39aa38412f9fe11ba2b1d225a5285a0afcd298
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467749006,1467749006,94c4899a018b2c0c33790cc7a7c2c75031f86b39
a264233ae32b8ea4cc2c9aab8cf861fb5ea4eefe,a264233a,Strip IPA from today's featured article cards,"Strip IPA from today's featured article cards

Bug: T139404
Change-Id: Ifa2552b033c57c55613d5aae436d95d35b742923
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467748946,1467748946,94c4899a018b2c0c33790cc7a7c2c75031f86b39
9694c8ff0a8caa5ed293d0daffbea1c3069c1b35,9694c8ff,"Don't repeat random and ""Today on Wikipedia"" cards","Don't repeat random and ""Today on Wikipedia"" cards

Bug: T139373
Change-Id: If12a4ade4140f08c657adbfb8a25bd94e6d0ee6a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467746705,1467746705,94c4899a018b2c0c33790cc7a7c2c75031f86b39
94c4899a018b2c0c33790cc7a7c2c75031f86b39,94c4899a,"Merge ""Fix sizes of ""trending"" and ""news"" icons.""","Merge ""Fix sizes of ""trending"" and ""news"" icons.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467744818,1467744818,"8f6dbf2084cdd89751f543b4cc614fed1d3ee123,a7d3096635c992628faaa38d02f28ca90aff118b"
8f6dbf2084cdd89751f543b4cc614fed1d3ee123,8f6dbf20,"Merge ""Finalize nav menu icon for Feed.""","Merge ""Finalize nav menu icon for Feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467744816,1467744816,"8749c348795ddb07ef4820086b5e0a6bcd7ee429,96137e1f6282323544a62519aae5c647f34afa20"
a7d3096635c992628faaa38d02f28ca90aff118b,a7d30966,"Fix sizes of ""trending"" and ""news"" icons.","Fix sizes of ""trending"" and ""news"" icons.

Change-Id: I1eae4799a27dfe7cdebba0e9ef0cc5f8dc2236a5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467741199,1467741971,96137e1f6282323544a62519aae5c647f34afa20
96137e1f6282323544a62519aae5c647f34afa20,96137e1f,Finalize nav menu icon for Feed.,"Finalize nav menu icon for Feed.

Change-Id: I581b25879faf996c16d762b50aca4bc06b80b64d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467735349,1467735349,49ecba91f6f5e7c21b35669082f242c0170e5ac9
6d5d5f00ddf3ed297364638f16258763701334ca,6d5d5f00,Hygiene: minor clean up,"Hygiene: minor clean up

• Replace Resources.getColor with ContextCompat.getColor which fixes a
  lint for deprecation and a lint for supplying a themed resource.

• Remove unused class, RetrofitExceptionBuilder.

• Remove unused type parameter on PageTitleListCardView.

• Add typing to a couple raw types.

• Remove unused string.

Change-Id: I5c5ee6b70b7fdf4b2c7c434ba47cdd929b0a27f1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467315548,1467734450,49ecba91f6f5e7c21b35669082f242c0170e5ac9
8749c348795ddb07ef4820086b5e0a6bcd7ee429,8749c348,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: If3d4dc5fa9d787141fafdacd94f108f690cf6783
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467731730,1467732009,49ecba91f6f5e7c21b35669082f242c0170e5ac9
49ecba91f6f5e7c21b35669082f242c0170e5ac9,49ecba91,"Merge ""Keep the Feed background from overlapping contents""","Merge ""Keep the Feed background from overlapping contents""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467647614,1467647614,"db8c990611a9197cc81fa277663d6bd5141e0c46,8ed6734a6725f19ffad8ee733b80ce901a586d4c"
db8c990611a9197cc81fa277663d6bd5141e0c46,db8c9906,"Remove Feed ""MostReadClient""","Remove Feed ""MostReadClient""

Most read cards are available in the aggregated feed. Remove
MostReadClient and use the aggregated results instead.

Change-Id: I11dafa803500ff45c9dd38229e74efdf51fbbe72
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467409281,1467409281,1c836998ff613afba7d894561b75a9043c3ae0cd
8ed6734a6725f19ffad8ee733b80ce901a586d4c,8ed6734a,Keep the Feed background from overlapping contents,"Keep the Feed background from overlapping contents

When scrolling down, allowing the search bar to disappear, then
scrolling back up quickly, the telescope background overlaps the search
bar for a split second, then the search bar ""jumps"" back on top.
Override the default AppBarLayout elevation[0].

[0] Possibly related: https://code.google.com/p/android/issues/detail?id=181618

Change-Id: I907fc708f9c9c28ed6a09e0e92dd22ee82d48f0f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467403414,1467404118,1c836998ff613afba7d894561b75a9043c3ae0cd
1c836998ff613afba7d894561b75a9043c3ae0cd,1c836998,Hygiene: use return value according to docs,"Hygiene: use return value according to docs

According to the docs for OnMenuItemClickListener, we should return true
when handling the event. This doesn't seem to have any effect in the way
we're using it but is good practice.

Change-Id: I3381618a417693ca1827efe87c07cdbd55d71cb9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1467328838,1467395341,f2329fd6ddac4a5b0193d36cf8712e26b824f404
f2329fd6ddac4a5b0193d36cf8712e26b824f404,f2329fd6,Allow cards to be dimissed by swiping,"Allow cards to be dimissed by swiping

Change-Id: I085c5c0c1180196654ea493c04a746a98d4037a9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467328421,1467389902,665d1468a9bc8f95581257d0b780355869ec5d6e
665d1468a9bc8f95581257d0b780355869ec5d6e,665d1468,Make dismissing of cards undoable.,"Make dismissing of cards undoable.

Change-Id: I3c64118f06afe2d5fc2314b75bb70aa8125f5394
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467382146,1467382146,9ee0ca82ff408e8b967579a428986e61dc7ca086
9ee0ca82ff408e8b967579a428986e61dc7ca086,9ee0ca82,"Merge ""Fix translucency of system status bar.""","Merge ""Fix translucency of system status bar.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467339544,1467339544,"d84a8ca6f87317c97e936b7ac300ee46c781c850,5943cb7abcc4cb286ebb161a03b6b23e1fb5010f"
5943cb7abcc4cb286ebb161a03b6b23e1fb5010f,5943cb7a,Fix translucency of system status bar.,"Fix translucency of system status bar.

...by removing the ""fitsSystemWindows"" attribute from the top-level
SwipeRefreshLayout, for some reason.

(It had lost its translucency when we shuffled around the
SwipeRefreshLayout / CoordinatorLayout / etc.)

Change-Id: I58e69009dae7dc4a7617e5cf2b141e55cc5c49ce
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467320145,1467320214,65d7da81f21e2ac94cc1dce150526749b2ce3537
d84a8ca6f87317c97e936b7ac300ee46c781c850,d84a8ca6,Hygiene: suppress unused lints for Gson models,"Hygiene: suppress unused lints for Gson models

Android Studio doesn't recognize fields that are hydrated by Gson as
being initialized. This patch suppresses some of the warnings generated.

Change-Id: I674d74a1a8ce3c5bb7be2f04d3fdcc3a0383c69e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467319119,1467319119,65d7da81f21e2ac94cc1dce150526749b2ce3537
65d7da81f21e2ac94cc1dce150526749b2ce3537,65d7da81,Make feed cards dismissable.,"Make feed cards dismissable.

- Factored out the assignment of the Callback into a new base class called
  FeedCardView, from which any card that wants to take a Callback can be
  derived.
- Made CardHeaderView also accept a Callback, and added a callback method
  called onRequestDismissCard, which the Header view is responsible for
  calling when its overflow menu item is clicked.
- Wired the dismissal of cards into the Coordinator, as well as into
  eventlogging.

Bug: T136975
Change-Id: I25fca7b8b49ce154741b34d9e0c5ab79daafb45e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467309594,1467315818,5be3fca0b684c72c1c6307c42fd06d1cada9ec77
5be3fca0b684c72c1c6307c42fd06d1cada9ec77,5be3fca0,Progress indicator at bottom of feed.,"Progress indicator at bottom of feed.

- Implemented as a permanent ""card"" that sits at the bottom of the current
list of cards. There's no logic to show or hide it, since seeing it always
implies that more feed content is currently being fetched.
- Changed the ""base"" view class for cards to be View instead of CardView.

Change-Id: I903519d7e8b1f6426105fa0a4acc8d9ee95caa88
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467233696,1467313744,aee7ac23d74cc182fc9e7172e35fb67f974a187e
aee7ac23d74cc182fc9e7172e35fb67f974a187e,aee7ac23,Remove Feed demo card,"Remove Feed demo card

Change-Id: I81b271e95b6f93448cc64e2d40940fd5c0613e1a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dmitry Brant,dbrant@wikimedia.org,1467309517,1467312852,3cf9b1f69caab03eba36b1f1c7d85ab8694b41ac
3cf9b1f69caab03eba36b1f1c7d85ab8694b41ac,3cf9b1f6,"Add main page card, interactivity for both static cards","Add main page card, interactivity for both static cards

Bug: T132339
Bug: T138593
Change-Id: Ic5e5a011b23f66aa2259d6daa5dcd957238ed92b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1466808483,1467311906,cf948b6ba1d0fe5903a2dc2f05c7dfc60bf551e5
cf948b6ba1d0fe5903a2dc2f05c7dfc60bf551e5,cf948b6b,"Merge ""In the News card view/model classes""","Merge ""In the News card view/model classes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467308097,1467308097,"1522abf4e1dabed86e595f517adf256335432b59,d0215da43a33465e501c3e10cfd80dda325d945b"
1522abf4e1dabed86e595f517adf256335432b59,1522abf4,Eventlogging for the Feed itself.,"Eventlogging for the Feed itself.

This implements logging for the actions of requesting more feed contents
when scrolling down, as well as refreshing the feed when swiping down at
the top of the list.

This also provides a function for logging of dismissed cards, to be used
when we implement dismissing of cards.

Bug: T129085
Change-Id: I222cc0220c16f099b1df4307e22a04c815639a4d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467303752,1467304408,89f61be42a03f67f784d0be130b1b41494a3bd9c
d0215da43a33465e501c3e10cfd80dda325d945b,d0215da4,In the News card view/model classes,"In the News card view/model classes

Interactivity to follow.

I think there will be a general round of header/footer cleanup later
so I didn't spend time getting those 100% to spec either.

Bug: T129084
Change-Id: I189e16d3934aa31cb5ef7fa6cef363febec2bfd3
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1467051724,1467300508,89f61be42a03f67f784d0be130b1b41494a3bd9c
89f61be42a03f67f784d0be130b1b41494a3bd9c,89f61be4,"Merge ""Remove most-read field from aggregated content model""","Merge ""Remove most-read field from aggregated content model""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467295841,1467295841,"ef02a740ae474bfe7df51c69e1e2956966ed8fc5,f288b3ead236dab2cd8bcad9ce9931f2e4b61e02"
ef02a740ae474bfe7df51c69e1e2956966ed8fc5,ef02a740,"Merge ""Remove 'Today' from nav menu""","Merge ""Remove 'Today' from nav menu""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467295557,1467295557,"5edf7b996bed187da36ccc022a612a3133fc1f5a,ff3d96531473b16474e1428736031af2a3af1fd4"
5edf7b996bed187da36ccc022a612a3133fc1f5a,5edf7b99,"Merge ""Use Norwegian Bokmål language code not wiki code""","Merge ""Use Norwegian Bokmål language code not wiki code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467295261,1467295261,"120d0215de2a5eab539d72e619f72604e6fa36f5,b663d68deb6ccf741b2ef7b76373f4e2767e5e48"
ff3d96531473b16474e1428736031af2a3af1fd4,ff3d9653,Remove 'Today' from nav menu,"Remove 'Today' from nav menu

The feed is replacing 'Today' as the app's functional homescreen, and so
'Explore Wikipedia,' which links to it, is replacing it on the nav menu.

The appified main page is still accessible via the feed's main page card,
which is being added separately (no need to make it an explicit dependency
here, I think).

Bug: T129086
Change-Id: I75300d73951fb0f126f9c65307ca1841e235e9c2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1467042382,1467293798,120d0215de2a5eab539d72e619f72604e6fa36f5
120d0215de2a5eab539d72e619f72604e6fa36f5,120d0215,"Merge ""Exit with nonzero when qq strings are missing""","Merge ""Exit with nonzero when qq strings are missing""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467290963,1467290963,"d7fbe3d2ed6bff318eec71c2c897e87241f54f44,19e6c020bc7d640fe4c8ffbdf7825693d7e4a03a"
b663d68deb6ccf741b2ef7b76373f4e2767e5e48,b663d68d,Use Norwegian Bokmål language code not wiki code,"Use Norwegian Bokmål language code not wiki code

A follow up to 8e9125b, the languages supported and namespace
translation scripts assume that the wiki subdomain matches the language
code. This is not true for Norwegian Bokmål which has a subdomain of
""no"" and a language code of ""nb"". Update and rerun the scripts to record
the correct language code and move the ""nb"" to ""no"" language code to
subdomain translation from LanguageUtil to Site. A translation in
LanguageUtil is unwanted as ""nb"" is understood by the Android
configuration loader and only Site needs to be aware of the conversion.

Bug: T114042
Bug: T138720
Change-Id: Ia34c0791986e0b9904e178f599b43a4e06b503d6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467239953,1467240082,d7fbe3d2ed6bff318eec71c2c897e87241f54f44
d7fbe3d2ed6bff318eec71c2c897e87241f54f44,d7fbe3d2,Update languages supported & namespace translation,"Update languages supported & namespace translation

  scripts/generate_wiki_languages.py &&
  scripts/make-templates.py &&
  mv \
    FileAliasData.java \
    MainPageNameData.java \
    SpecialAliasData.java \
    app/src/main/java/org/wikipedia/staticdata/ &&
  mv languages_list.xml app/src/main/res/values/ &&
  rm filealias.json languages_list.json mainpages.json specialalias.json

Change-Id: Ie024730ba6d42092f538708b3bed1d414470f470
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467238228,1467238578,b3b253476996bf84a52dc3fdc42add93a1e4bb07
f288b3ead236dab2cd8bcad9ce9931f2e4b61e02,f288b3ea,Remove most-read field from aggregated content model,"Remove most-read field from aggregated content model

This is unused, since we get most-read results from MostReadClient.

We can put it back in if and when we move to using the most-read results
from the aggregated response.

Change-Id: I0f31d1b9a6dd772f9c997ae17bfa18dfdbd8c310
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1467233018,1467233302,b3b253476996bf84a52dc3fdc42add93a1e4bb07
b3b253476996bf84a52dc3fdc42add93a1e4bb07,b3b25347,"Merge ""Improve positioning and behavior of feed refresh circle.""","Merge ""Improve positioning and behavior of feed refresh circle.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467230807,1467230807,"03c347fd5e2f4cbce4d99454fde3df6857c4f454,5913e36876e841efc8b385f31189b7dd1c9d4db7"
5913e36876e841efc8b385f31189b7dd1c9d4db7,5913e368,Improve positioning and behavior of feed refresh circle.,"Improve positioning and behavior of feed refresh circle.

Now using a more correct arrangement of SwipeRefreshLayout ->
CoordinatorLayout -> RecyclerView.

No longer need custom refresh start/stop offsets.

Change-Id: I4918a00bfe1c16b71c95fa6b0f490ff1ea8865b0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467226573,1467226573,a84a8c09589f5f939e90e57b8339b3478eeb9916
03c347fd5e2f4cbce4d99454fde3df6857c4f454,03c347fd,Integrate eventlogging for pages navigated from the Feed.,"Integrate eventlogging for pages navigated from the Feed.

- Extended the LinkPreviewFunnel (which was already sending 'navigate'
  events for every link clicked) to contain a 'source' parameter which
  maps to the HistoryEntry source that we use when navigating to pages.
- Made the Feed callback interfaces return HistoryEntry objects instead of
  plain PageTitles, and allow different card types to specify their own
  history source parameter.

Bug: T129085
Change-Id: I2bad6d8f08b6de4ad58bf9485add911c12548581
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467217273,1467224122,a84a8c09589f5f939e90e57b8339b3478eeb9916
a84a8c09589f5f939e90e57b8339b3478eeb9916,a84a8c09,"Merge ""Integrate eventlogging for floating search bar in Feed.""","Merge ""Integrate eventlogging for floating search bar in Feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467212566,1467212566,"98398ea30799fb2043cc37bb4f3768911df2e710,17007f920388ff01d77add80a3dad363f705c197"
19e6c020bc7d640fe4c8ffbdf7825693d7e4a03a,19e6c020,Exit with nonzero when qq strings are missing,"Exit with nonzero when qq strings are missing

Change-Id: Ife0f114dbe48faa445397aa7a94f74de2309d117
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467141583,1467211077,98398ea30799fb2043cc37bb4f3768911df2e710
17007f920388ff01d77add80a3dad363f705c197,17007f92,Integrate eventlogging for floating search bar in Feed.,"Integrate eventlogging for floating search bar in Feed.

- Added an 'invokeSource' parameter to track from where the Search
  fragment was invoked.
- Added a 'position' parameter to track which search result position
  is selected.
- Fixed bug where opening a search result in a new tab wasn't working
  properly.
- Removed A/B test logic for prefix search autocompletion (this is now
  done by default on the server side.

Bug: T129085
Bug: T76412
Change-Id: If1c14b60a634f5bea53173398082e092ec51d1b6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467159225,1467209796,ffa3ab38795986ba81b5b1f37ecfe0f62e67127b
98398ea30799fb2043cc37bb4f3768911df2e710,98398ea3,Move TFA card strings to strings_no_translate,"Move TFA card strings to strings_no_translate

The TFA card is for now an experimental English-only card, so its
strings do not need to be translated to other languages.

Change-Id: I27d5ef3e9e687e50d5630bfe2f5e18ff10932832
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1466718923,1467158336,3e5c425ac30d4e743c051825464a11531abab302
3e5c425ac30d4e743c051825464a11531abab302,3e5c425a,"Merge ""Feed: make sure all client code paths end in a callback invocation.""","Merge ""Feed: make sure all client code paths end in a callback invocation.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467148564,1467148564,"f65081601979e96a46a5939816f3ef07727b709c,2dea2869260b8fcdc4d6d0e32b22fbbff43c9e74"
f65081601979e96a46a5939816f3ef07727b709c,f6508160,"Merge ""Remove custom protocol list from OkHttpConnectionFactory""","Merge ""Remove custom protocol list from OkHttpConnectionFactory""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1467144589,1467144589,"ffa3ab38795986ba81b5b1f37ecfe0f62e67127b,f7e91322d62c66d99be68857fc87b04d1d9b65b5"
ffa3ab38795986ba81b5b1f37ecfe0f62e67127b,ffa3ab38,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ifdd791500dc62bc68164f74e6d98b9fe4a0e7efa
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1467119276,1467120261,5e637357cf84374bb2a7769e3d368cb4d1fbf536
2dea2869260b8fcdc4d6d0e32b22fbbff43c9e74,2dea2869,Feed: make sure all client code paths end in a callback invocation.,"Feed: make sure all client code paths end in a callback invocation.

Change-Id: Ie746cb4dba04d7d41f79da701f23dece400bc08e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1467035937,1467035937,5e637357cf84374bb2a7769e3d368cb4d1fbf536
5e637357cf84374bb2a7769e3d368cb4d1fbf536,5e637357,'Random' feed card layout and view classes,"'Random' feed card layout and view classes

Adds a random card to the feed.  Based on 'static card' layouts and
view classes that can be also be used for the main page card.

Bug: T132339
Change-Id: I0d838cf28f14a3f1619cfc6e9db6e187d7019b00
",,,,Michael Holloway,mholloway@wikimedia.org,Dbrant,dbrant@wikimedia.org,1466696708,1466805643,61dcc845f5ace39d8a3c275a54643936a256a9f9
61dcc845f5ace39d8a3c275a54643936a256a9f9,61dcc845,Add overflow menu to card list items.,"Add overflow menu to card list items.

- Provides ""save"" and ""share"" options for any item in a card list.

Change-Id: I0f5c55363bd3e575858bc5107728181985b01c25
",,,,Dmitry Brant,dbrant@wikimedia.org,Mholloway,mholloway@wikimedia.org,1466792471,1466805106,8a46a699b30bd608ef0b04e90fdd1444d6a9773c
8a46a699b30bd608ef0b04e90fdd1444d6a9773c,8a46a699,Add interactivity to Trending Articles card.,"Add interactivity to Trending Articles card.

- Make items clickable.
- Hide the footer for now, since it's not yet clear what happens when it's
  clicked.

Change-Id: I453a9274c2354bb5231d0c3b32d13f08e5a12e3e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1466782316,1466804348,a0790d9801d89ecd21eb5e91269e8cf1cc646588
a0790d9801d89ecd21eb5e91269e8cf1cc646588,a0790d98,Add interactivity to Continue Reading card.,"Add interactivity to Continue Reading card.

Change-Id: I29067aea688e875e3b999089faec50bf20ebb03a
",,,,Dmitry Brant,dbrant@wikimedia.org,Mholloway,mholloway@wikimedia.org,1466780701,1466802369,8b529309268269b0220b96b359b2bb45a91c8bb6
8b529309268269b0220b96b359b2bb45a91c8bb6,8b529309,Add interactivity and design tweaks to Featured Article card.,"Add interactivity and design tweaks to Featured Article card.

- Made the entire text area of the card clickable, and working.
- Made the Save and Share buttons in the footer work.

Change-Id: Iaaff6f7d53fff52bbc247d69d4325c11a311cc95
",,,,Dmitry Brant,dbrant@wikimedia.org,Mholloway,mholloway@wikimedia.org,1466778897,1466801825,80ffa64a47f9c255ec6c95a79c9b31b42c31a97b
80ffa64a47f9c255ec6c95a79c9b31b42c31a97b,80ffa64a,"Design tweaks to feed card headers, based on final mocks.","Design tweaks to feed card headers, based on final mocks.

- All cards now have a standardized header.
- The header now accepts a Drawable resource id for its icon, and a color
  for the background circle.

Change-Id: I8fd0edcd125f4e8e8371b28d4108c6787461a9cc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1466773573,1466799849,d41efd2a8d4ccfa3cc51dd030bcc68d81b831631
d41efd2a8d4ccfa3cc51dd030bcc68d81b831631,d41efd2a,"Merge ""Swipe to refresh the feed.""","Merge ""Swipe to refresh the feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466798918,1466798918,"189e36e21d547fcaae19e3b999d716440554aa7f,5de502900d9bcbdc7e9d76cd132fddd7f80af4e9"
189e36e21d547fcaae19e3b999d716440554aa7f,189e36e2,"Merge ""Fetch more feed contents automatically upon scroll.""","Merge ""Fetch more feed contents automatically upon scroll.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466798833,1466798833,"d6d9d2990c4232da03914db86606f47f7ea723c6,56e02b7a45c25e742b86d1839c96aa79b80128c1"
d6d9d2990c4232da03914db86606f47f7ea723c6,d6d9d299,"Merge ""Improve toolbar overlay when scrolling feed.""","Merge ""Improve toolbar overlay when scrolling feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466798668,1466798668,"cd1088e4882172b130f768d8cb1f27f95ccfd417,33fb160a3e1a836775aeeba19f3a2096ae4b845a"
cd1088e4882172b130f768d8cb1f27f95ccfd417,cd1088e4,"Merge ""Feed: Remove placeholder String fields from AggregatedFeedContent model""","Merge ""Feed: Remove placeholder String fields from AggregatedFeedContent model""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466782513,1466782513,"a8f21662244f11bc9835209b6bcd9a3602147f34,26e9ead93318cba521585e2d44224102a0b66419"
a8f21662244f11bc9835209b6bcd9a3602147f34,a8f21662,Upgrade support library to 24.0.0,"Upgrade support library to 24.0.0

http://developer.android.com/tools/support-library/index.html

Bug: T138105
Change-Id: If0cc49751d1bfe32656fd612958a3737bdb917a3
",,,,Michael Holloway,mholloway@wikimedia.org,Antoine Musso,hashar@free.fr,1466685661,1466780257,d38c37a2f7fb72c2d62802d277c017d31049c4cc
d38c37a2f7fb72c2d62802d277c017d31049c4cc,d38c37a2,Hack to have Jenkins recognizes the compile SDK version,"Hack to have Jenkins recognizes the compile SDK version

The Wikimedia Jenkins job is able to automatically install the proper
SDK. Unfortunately the Android Emulator plugin does't recognize
android.compileSdkVersion from app/build.gradle instead it:

* Looks for files matching **/default.properties or **/project.properties
* parse the file to find a 'target' value which is then used as the
  Android platform to install

https://phabricator.wikimedia.org/T138506#2404266

Add a project.properties file that has the target platform expected by
the Jenkins plugin.
Add a comment in app/build.gradle to remember to keep the version in
sync.

Bug: T138506
Change-Id: I6be92df22396f87753599981d2800f4157c93936
",,,,Antoine Musso,hashar@free.fr,Antoine Musso,hashar@free.fr,1466766079,1466780226,80aef156c4ccd0eb633f27954140bc8b5af0871d
26e9ead93318cba521585e2d44224102a0b66419,26e9ead9,Feed: Remove placeholder String fields from AggregatedFeedContent model,"Feed: Remove placeholder String fields from AggregatedFeedContent model

These add nothing and break aggregated feed content deserialization
every time a new endpoint is added.  Let's just take them out and add
fields as we need them.

Change-Id: I92cb538f3a5e3fea6961ff30f52c4a74fc702452
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1466717454,1466717454,80aef156c4ccd0eb633f27954140bc8b5af0871d
5de502900d9bcbdc7e9d76cd132fddd7f80af4e9,5de50290,Swipe to refresh the feed.,"Swipe to refresh the feed.

Change-Id: If587bdc0ae50e8d1817e04cee2eebf0d1fece141
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1466701063,1466713824,56e02b7a45c25e742b86d1839c96aa79b80128c1
56e02b7a45c25e742b86d1839c96aa79b80128c1,56e02b7a,Fetch more feed contents automatically upon scroll.,"Fetch more feed contents automatically upon scroll.

This adds the piece of Feed interactivity where it automatically requests
more feed content when the user scrolls down sufficiently far.

Quick implementation note: I put the call to notifyDataSetChanged() into a
Runnable that is posted to the message queue. This is because the request
to fetch more feed contents is made during the view-binding phase of the
RecyclerView. Since some feed cards may return their contents immediately
(in the same thread), it may cause the RecyclerAdapter to be invalidated
while it's still laying out its contents. This will ensure that
notifyDataSetChanged() will get called only when it finishes its previous
layout.

Change-Id: I2667ad4aa4c59260ed117c4624aa413306b6d1ec
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1466695477,1466713628,33fb160a3e1a836775aeeba19f3a2096ae4b845a
33fb160a3e1a836775aeeba19f3a2096ae4b845a,33fb160a,Improve toolbar overlay when scrolling feed.,"Improve toolbar overlay when scrolling feed.

- Now uses the correct attribute to specify the overlay offset of the
  FeedView in relation to the AppBarLayout, and looks better when
  scrolling.
- Now hiding the ""search"" button in the toolbar until the feed is scrolled
  down sufficiently.

Change-Id: I1d8a4219e27f03fad59eeb25475cc4478d7999b9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1466692922,1466713444,80aef156c4ccd0eb633f27954140bc8b5af0871d
80aef156c4ccd0eb633f27954140bc8b5af0871d,80aef156,Add Today's Featured Article card,"Add Today's Featured Article card

This card adds a feed card for Today's Featured Article, and in doing so
adds some additional components:

* A BigPictureCard and associated View and layout files; and

* An aggregated feed endpoint client.

Bug: T129079
Change-Id: I7e4ac7b2f2e81f8cdf40f9649daecb08db0cdfc1
Depends-On: I4ae8e6bbaeb221872b1bc1d07be92f33002ff606
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1465841146,1466707565,f0d0999eebfa1bf343a51427a82172f0e366a75b
f0d0999eebfa1bf343a51427a82172f0e366a75b,f0d0999e,Whoops: Fix possible fragment duplication.,"Whoops: Fix possible fragment duplication.

Also fix options menu behavior when switching between fragments.

Change-Id: If83dd623b657f4b7be1689f0f3fff1f8998fd6d1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1466643467,1466643552,2f18a768f4f3ad016e57a59d1514d98f81e97130
2f18a768f4f3ad016e57a59d1514d98f81e97130,2f18a768,Whoops: fix toolbar coordinator logic.,"Whoops: fix toolbar coordinator logic.

- Show/hide the correct component in the coordinator.
- Make sure to clear out the OptionsMenu when in search mode.

Change-Id: I7070b73d20fb6bd4ec5140086176b2a41cd60c9c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1466637905,1466637905,9ee52443a466dafb10b229b58307a0b7651f752f
9ee52443a466dafb10b229b58307a0b7651f752f,9ee52443,"Merge ""Add transition animation when switching between Fragments.""","Merge ""Add transition animation when switching between Fragments.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466633721,1466633721,"c832b4083af70d4bac6aa3701b94a76f598a9cd1,b7d6b59b771416a20f705445dbffc16f219e3936"
c832b4083af70d4bac6aa3701b94a76f598a9cd1,c832b408,"Merge ""Integrate search into Feed (with voice).""","Merge ""Integrate search into Feed (with voice).""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466633646,1466633646,"1ad631c8ab22723c6a275ee6ab960ad08bda3d76,891701ee47125b9bf90ed4bc794bfe9ddf26d072"
1ad631c8ab22723c6a275ee6ab960ad08bda3d76,1ad631c8,"Merge ""Add interactivity to ""because you read"" card.""","Merge ""Add interactivity to ""because you read"" card.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466632949,1466632949,"d3f60a002b01b0633456a9e24b517ff4a3580028,127170e3a4bc2caa4a265d0d28e126317193b809"
d3f60a002b01b0633456a9e24b517ff4a3580028,d3f60a00,"Merge ""Color extraction for large feed card images.""","Merge ""Color extraction for large feed card images.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466627740,1466627740,"fdc2e0b57b8bd5c3444e7e9ed9ed869e4ee1ea85,a5baae91493beb3b8cc0b7d974cc252497b83e87"
fdc2e0b57b8bd5c3444e7e9ed9ed869e4ee1ea85,fdc2e0b5,"Merge ""Top o' the feed.""","Merge ""Top o' the feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466627426,1466627426,"f788fdcc9b2aa28591a1117436f65b2c9ea8650d,5241ea72b619e46cb58764a016ffec28bf2cef13"
b7d6b59b771416a20f705445dbffc16f219e3936,b7d6b59b,Add transition animation when switching between Fragments.,"Add transition animation when switching between Fragments.

- Added a short fade effect when transitioning between fragments.
- Improved the appearance of HistoryFragment when exiting out of it, by
  explicitly setting its emptyView to null (otherwise it has the jarring
  effect of momentarily flashing the ""glasses"" image while closing).
- This also fixes the transparency of the system status bar when the
  default Toolbar is hidden.

Change-Id: I7e09b9e4c4ee6e025964c3e50b1ba7c3bc3b9d63
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1466617455,1466617956,127170e3a4bc2caa4a265d0d28e126317193b809
a5baae91493beb3b8cc0b7d974cc252497b83e87,a5baae91,Color extraction for large feed card images.,"Color extraction for large feed card images.

- Moved the old ImageViewWithFace to a more general location.
- Made CardLargeHeaderView use the color extraction feature, and set its
  own background based on the extracted color.
- Made a performance improvement in FeedRecyclerAdapter, wherein it no
  longer unconditionally reloads the entire child View structure for every
  card. Instead, it now checks if a Card is being loaded into the same
  View.

Change-Id: I4cdf6599f2e064b37d6f239e09fe2a515130c66c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1466611373,1466613036,f788fdcc9b2aa28591a1117436f65b2c9ea8650d
891701ee47125b9bf90ed4bc794bfe9ddf26d072,891701ee,Integrate search into Feed (with voice).,"Integrate search into Feed (with voice).

Change-Id: Iff74f9054f1f6913dc1e15d433cc78e6283d1e9e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1466518890,1466555344,127170e3a4bc2caa4a265d0d28e126317193b809
127170e3a4bc2caa4a265d0d28e126317193b809,127170e3,"Add interactivity to ""because you read"" card.","Add interactivity to ""because you read"" card.

- Added some more methods to the Callback provided by FeedFragment, so
  that when PageActivity overrides them, the desired behavior is achieved.
- Wove a callback mechanism into the View hierarchy of feed cards.
- Created PageTitleListCardView (a descendant of ListCardView) that takes
  a PageTitle as a data provider. This is inescapable, since the original
  PageTitle (including its language code, namespace, etc) needs to be
  preserved in order to navigate to the correct page upon clicking.
- Updated the fragment backstack logic and back-behavior in MainActivity.

Change-Id: I0663b26dd247f65a28655213b73e08e07078426b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1466448993,1466554864,5241ea72b619e46cb58764a016ffec28bf2cef13
f788fdcc9b2aa28591a1117436f65b2c9ea8650d,f788fdcc,Update bundled CSS stylesheet,"Update bundled CSS stylesheet

Latest changes via make-css-assets.bash.

Change-Id: I29bd4c3fa41721017b7f8b7eefa7b38c25562e0a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1466533936,1466533936,eff23acee529870b667a1fe7ff65101b4eac8f63
5241ea72b619e46cb58764a016ffec28bf2cef13,5241ea72,Top o' the feed.,"Top o' the feed.

- Composed the layout of the feed header, using a CoordinatorLayout and
  AppToolbarLayout.
- FeedView is now itself a descendant of RecyclerView, instead of
  RelativeLayout.
- FeedFragment now has a Callback through which it passes a Toolbar view,
  and expects the parent activity to take this Toolbar and make it be the
  ""active"" toolbar of the activity (i.e. override the default toolbar of
  the activity).

Change-Id: I93e4868594f19033c9fcd561d036719f21a8b8fe
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1466018772,1466528920,eff23acee529870b667a1fe7ff65101b4eac8f63
eff23acee529870b667a1fe7ff65101b4eac8f63,eff23ace,"Merge ""Add logic to show the Page/FeedFragment""","Merge ""Add logic to show the Page/FeedFragment""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466523074,1466523074,"313eae9b770b5a7e1696973a9589487207aff1d3,2f8a5baa08aab626948d9788245deedb08868439"
313eae9b770b5a7e1696973a9589487207aff1d3,313eae9b,"Merge ""Hygiene: move less often used dev settings down""","Merge ""Hygiene: move less often used dev settings down""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466522433,1466522433,"9863b6985afc930948ab0756f593dcfd489080cb,49915faddb4fdca6ed5df7712aaed796607ed300"
9863b6985afc930948ab0756f593dcfd489080cb,9863b698,"Merge ""Hygiene: remove redundant lint suppression""","Merge ""Hygiene: remove redundant lint suppression""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466522002,1466522002,"e901190becf4487aface93ef2053b4ecb2ab18cf,6150962759a2e4c3e264e78423edf3021e64afd8"
e901190becf4487aface93ef2053b4ecb2ab18cf,e901190b,"Merge ""Hygiene: rename PageActivity to MainActivity""","Merge ""Hygiene: rename PageActivity to MainActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466521770,1466521770,"a13d01a6338282785aa325e12a2b72d7a09eba02,f4bb28c0818ccc66d622b2227a3b33baac1b78e1"
a13d01a6338282785aa325e12a2b72d7a09eba02,a13d01a6,"Merge ""Apply variant C most read UI tweaks""","Merge ""Apply variant C most read UI tweaks""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466521561,1466521561,"a18d97f81137fd49f7694dfe3938ee0546dbe90a,22568a9810c36c2c9762fa285ef6fa9d6401e7ce"
a18d97f81137fd49f7694dfe3938ee0546dbe90a,a18d97f8,"Merge ""Integrate most read""","Merge ""Integrate most read""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466521123,1466521123,"4c039da02e4c3530227169fa7b4f87453090b283,c609b403632f8da3e3c9cab05ee0565a3cd3170d"
f7e91322d62c66d99be68857fc87b04d1d9b65b5,f7e91322,Remove custom protocol list from OkHttpConnectionFactory,"Remove custom protocol list from OkHttpConnectionFactory

OkHttp will recover from REFUSED_STREAM errors in HTTP/2 as of v3.3.0.[1]

This patch removes the workaround we had in place while awaiting the
fixes in nginx and OkHttp so that we can benefit from HTTP/2.

[1] https://github.com/square/okhttp/blob/master/CHANGELOG.md

[2] https://nginx.org/en/CHANGES

The relevent change is:

*) Change: HTTP/2 clients can now start sending request body
   immediately; the ""http2_body_preread_size"" directive controls size of
   the buffer used before nginx will start reading client request body.

Bug: T134817
Change-Id: I50de05e1de4840f181a4d94360ecad1db41ecd08
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1465911436,1466460333,4c039da02e4c3530227169fa7b4f87453090b283
4c039da02e4c3530227169fa7b4f87453090b283,4c039da0,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I9ea604b02849c01af1cbd04d52deb6baeed6ab2d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1466441382,1466442002,b3070e831356027386b28ab1f73770932fe191a3
2f8a5baa08aab626948d9788245deedb08868439,2f8a5baa,Add logic to show the Page/FeedFragment,"Add logic to show the Page/FeedFragment

Bug: T136961
Change-Id: I62e21c1222c8390a0fbc6ffa3076ecb62004e347
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1466113556,1466113556,49915faddb4fdca6ed5df7712aaed796607ed300
49915faddb4fdca6ed5df7712aaed796607ed300,49915fad,Hygiene: move less often used dev settings down,"Hygiene: move less often used dev settings down

Change-Id: I568e5aabf053118c1d9aed0b74e82719c6a9416a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1466110867,1466110895,6150962759a2e4c3e264e78423edf3021e64afd8
6150962759a2e4c3e264e78423edf3021e64afd8,61509627,Hygiene: remove redundant lint suppression,"Hygiene: remove redundant lint suppression

Android Studio v2.1.2 no longer seems to incorrectly lint Preference
styles. Remove the suppressions.

Change-Id: I0729a2fdd6b45deab81bf5b37f74bb96dd0409d9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1466110709,1466110709,f4bb28c0818ccc66d622b2227a3b33baac1b78e1
f4bb28c0818ccc66d622b2227a3b33baac1b78e1,f4bb28c0,Hygiene: rename PageActivity to MainActivity,"Hygiene: rename PageActivity to MainActivity

• Replace all occurrences of PageActivity with MainActivity.

• Move MainActivity to org.wikipedia.

No functional changes intended.

Bug: T136961
Change-Id: I8a93a66d4b99130d56708b1c64b6535c1a12518c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1466103302,1466103748,22568a9810c36c2c9762fa285ef6fa9d6401e7ce
22568a9810c36c2c9762fa285ef6fa9d6401e7ce,22568a98,Apply variant C most read UI tweaks,"Apply variant C most read UI tweaks

https://app.zeplin.io/project.html#pid=575030de30a17087229662e6&sid=5756ffc19bf6204842c64ebf

Bug: T129082
Change-Id: I5a25213007c600be2882b38b3de425ca2c3c555f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465943841,1466102251,c609b403632f8da3e3c9cab05ee0565a3cd3170d
c609b403632f8da3e3c9cab05ee0565a3cd3170d,c609b403,Integrate most read,"Integrate most read

Bug: T129082
Change-Id: I688329f705646d917e00662be57385bc2cd4e50a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465937576,1466102248,b3070e831356027386b28ab1f73770932fe191a3
b3070e831356027386b28ab1f73770932fe191a3,b3070e83,Remove redundant null check,"Remove redundant null check

Change-Id: I089b8032e4163b0e813daa17765505b27f10eed4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465935274,1466101918,935f552f5983394f7283a656e60d654870cb84ad
935f552f5983394f7283a656e60d654870cb84ad,935f552f,Allow FeedClients to return Card subclasses,"Allow FeedClients to return Card subclasses

Change-Id: I039ba6291f90506f05eb74750084aedbcdcf9bda
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465935216,1466101918,6ecc1705ca2e240b1eeeb08dfb465da8360be3b9
6ecc1705ca2e240b1eeeb08dfb465da8360be3b9,6ecc1705,Prevent NPE,"Prevent NPE

FeedFragment unbinds (nulls) its Views in onDestroyView(). Check the
Fragment state before interacting with the Views in an asynchronous
callback.

Change-Id: I2a0507f4da82e76886589cbe490575c421182865
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465934476,1466101918,08adc316a804c16bc8321a3db21ef4694ac6d530
08adc316a804c16bc8321a3db21ef4694ac6d530,08adc316,Add Retrofit service cache,"Add Retrofit service cache

• Add Retrofit service interface cache. The previous implementation in
  WikipediaApp did not work for multiple clients.

• Move Site parameter from construction to request time. This allows
  localizations to change between requests.

• The centralized place for generating Retrofits seems to be in
  *PageEndpointsCache. Expose a static method for non-page services and
  use it.

• Rename some of the ""clients"" to ""services"" to match Retrofit
  terminology.

Bug: T129082
Change-Id: I6413f34113b7d110202b2db9c288b6e1836c8da9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465934100,1466101722,9b2dacc075661524d06e00f59ebd3aa1ab0ac204
9b2dacc075661524d06e00f59ebd3aa1ab0ac204,9b2dacc0,"Merge ""Add Search bar to feed.""","Merge ""Add Search bar to feed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466094801,1466094801,"b8fd664cae5b0ad61794293aaed91271bee675df,a904160f730a9fd81f4df1916b2b4c6145a410bf"
b8fd664cae5b0ad61794293aaed91271bee675df,b8fd664c,"Merge ""Update design of existing feed cards.""","Merge ""Update design of existing feed cards.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466094494,1466094494,"89de7c93a5c653389e81f80f070d4471816185b1,191d0c05b3a75bf0e2a8aecfa8687ceab5a69efb"
a904160f730a9fd81f4df1916b2b4c6145a410bf,a904160f,Add Search bar to feed.,"Add Search bar to feed.

- Modify FeedCoordinator to allow conditional pending clients, based on
  age.
- Add Search bar card, inserted only at the top of the feed.

TODO: tie it into the Search interface in PageActivity. It will be
sufficient if clicking the Search bar simply brings up the current Search
fragment.

Change-Id: Ib074c8f14232fc60032d01839ad12a99e72fa7b4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465915519,1466004926,191d0c05b3a75bf0e2a8aecfa8687ceab5a69efb
89de7c93a5c653389e81f80f070d4471816185b1,89de7c93,"Merge ""Upgrade to OkHttp 3.3.1""","Merge ""Upgrade to OkHttp 3.3.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1466004658,1466004658,"d488d2887d9de6d6c801813bdcaaa2bdb7045370,ee1a3b9f7f5cb8edda523a7fc753c4f8e3d1a2ef"
191d0c05b3a75bf0e2a8aecfa8687ceab5a69efb,191d0c05,Update design of existing feed cards.,"Update design of existing feed cards.

- Updated design of CardHeaderView.
- Created CardLargeHeaderView, which is another type of header view to be
  used by ""because-you-read"" and ""continue-reading"" cards.
- Added logic to retrieve and use the thumbnail image in the
  ""because-you-read"" card.
- Tweaks to list item margins (not final).

To come: automatic color extraction from the image in CardLargeHeaderView,
for use as the card background.

Change-Id: Ic76db7cb83ba9d5d9541688cba57809b6fabda6e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465920868,1466004400,465532d7fe44d1b5ba907da528d7785f9467f20c
d488d2887d9de6d6c801813bdcaaa2bdb7045370,d488d288,"Merge ""Upgrade Gradle to v2.14""","Merge ""Upgrade Gradle to v2.14""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465996545,1465996545,"aadf1fb787fe286e325b9d8ad30d17a3569a9344,e6a32bccd245afa50c63a571d86864dd8c361c25"
e6a32bccd245afa50c63a571d86864dd8c361c25,e6a32bcc,Upgrade Gradle to v2.14,"Upgrade Gradle to v2.14

Java 6 is deprecated[0].

[0] https://docs.gradle.org/2.14/release-notes

Change-Id: Iea8d9bf5767348aa5a1a4e1f0512965cd6129a0e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465945202,1465945202,2eacd18304192a69a6df0e61749168836ad28f73
ee1a3b9f7f5cb8edda523a7fc753c4f8e3d1a2ef,ee1a3b9f,Upgrade to OkHttp 3.3.1,"Upgrade to OkHttp 3.3.1

Change log: https://github.com/square/okhttp/blob/master/CHANGELOG.md

Notably, version 3.3.0 introduced recovery from REDUCED_STREAM errors in
HTTP/2, which will allow us to resolve T134817 and benefit from HTTP/2 at
long last.

Change-Id: I735a7b5c5bb34032a275758c08684fbea27ff3ed
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1465910633,1465943883,aadf1fb787fe286e325b9d8ad30d17a3569a9344
aadf1fb787fe286e325b9d8ad30d17a3569a9344,aadf1fb7,Upgrade Robolectric to v3.1 and API to Marshmallow,"Upgrade Robolectric to v3.1 and API to Marshmallow

Upgrade Robolectric to v3.1[0]. Also, upgrade the test API to v23 since
that seems to be compatible with OkHttp v3.3.1[1].

[0] https://github.com/robolectric/robolectric/releases/tag/robolectric-3.1
[1] https://github.com/square/okhttp/issues/2533#issuecomment-222366551

Change-Id: I2920ea8368b35f06615d45536ce5c7b733234303
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465920889,1465938382,2eacd18304192a69a6df0e61749168836ad28f73
2eacd18304192a69a6df0e61749168836ad28f73,2eacd183,"Merge ""Switch RB and MW backend servers without restart""","Merge ""Switch RB and MW backend servers without restart""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465919194,1465919194,"900bc899dc412e7c4b212e5abefdcd257c74424e,85b06ca60c61451076bb2aaabb7e81c969e7711d"
900bc899dc412e7c4b212e5abefdcd257c74424e,900bc899,"Merge ""Easier switch to labs MCS instance""","Merge ""Easier switch to labs MCS instance""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465917874,1465917874,"465532d7fe44d1b5ba907da528d7785f9467f20c,6a8ba2567acc1295acf3796acd286b85ed3ae4f1"
85b06ca60c61451076bb2aaabb7e81c969e7711d,85b06ca6,Switch RB and MW backend servers without restart,"Switch RB and MW backend servers without restart

Listen for SharedPreference changes and update the respective EndpointCache to
facilitate a faster switch of backend servers by not requiring the app to restart.

Change-Id: Ie806452d03af1dfed0a84d7dc25eba63f9de71b9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1465887261,1465887261,6a8ba2567acc1295acf3796acd286b85ed3ae4f1
6a8ba2567acc1295acf3796acd286b85ed3ae4f1,6a8ba256,Easier switch to labs MCS instance,"Easier switch to labs MCS instance

In dev settings you can switch to the labs instance but you'd have to
lookup and type the RESTBase URI format. With this added entry to the
preference hint you can just copy&paste the correct value to use our
labs instance for the Mobile Content Service.

Change-Id: I6ad8c9200111170451b3f9b89ed928088ce09762
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1465885239,1465885239,3259286b8316547b9169599a9a45ddcb4b1b4fb5
465532d7fe44d1b5ba907da528d7785f9467f20c,465532d7,"Fix title and thumbnail in ""continue reading"" card.","Fix title and thumbnail in ""continue reading"" card.

Change-Id: Ifc4ef9396cfe40560b70b76045920503a6e7d696
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465574679,1465871868,3259286b8316547b9169599a9a45ddcb4b1b4fb5
3259286b8316547b9169599a9a45ddcb4b1b4fb5,3259286b,Implement feed coordinator.,"Implement feed coordinator.

Bug: T137446
Change-Id: I25ebe596605bae07b24c4cc2cd9b2008d985ebda
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465571279,1465852475,b9347302eb6426b1ccfae7cc48a2e77d8006b056
b9347302eb6426b1ccfae7cc48a2e77d8006b056,b9347302,"Merge ""Override hashCode and equals for Cards""","Merge ""Override hashCode and equals for Cards""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465847415,1465847415,"5ca0b6916f43ac8da6bb61e3045e6a6459fdeb4c,2dbcd20e5ff4644e11fae7dd64d5a1a1220e3740"
5ca0b6916f43ac8da6bb61e3045e6a6459fdeb4c,5ca0b691,"Merge ""Hygiene: remove dead code""","Merge ""Hygiene: remove dead code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465846506,1465846506,"f04a91224a30a11fc4b6f5f9f2cf8c1693fc38a7,9157719fbd88c415490623cc892cb5afc7ff771e"
2dbcd20e5ff4644e11fae7dd64d5a1a1220e3740,2dbcd20e,Override hashCode and equals for Cards,"Override hashCode and equals for Cards

Make sure Cards equality comparisons work properly by subclassing
BaseModel.

Change-Id: Id202c2f102607348f8a98a5e2013c4c96f336c1e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465578644,1465843419,f04a91224a30a11fc4b6f5f9f2cf8c1693fc38a7
f04a91224a30a11fc4b6f5f9f2cf8c1693fc38a7,f04a9122,Regenerate test JSON,"Regenerate test JSON

• Regenerate JSON used by most read Feed tests. d991f85 was made for
  an early version of the service. Revision IDs are no longer included.

• Remove redundant unmarshalling code in MostReadArticles. The service
  guarantees that successful responses will always have one or more
  articles.

Bug: T129082
Change-Id: Id0fd39da1d532c3884adeff6a6fe089a76844974
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465502704,1465843419,f43a37d1372c2df7dba9f426553cd36e2b7498ec
f43a37d1372c2df7dba9f426553cd36e2b7498ec,f43a37d1,Hygiene: change URL to Uri,"Hygiene: change URL to Uri

Uris are expected by SimpleDraweeView.setImageURI() which is where these
thumbnail identifiers are used.

Change-Id: Ib436c0d43f1a7ad0c26982d5ce413479b6e248fb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465490889,1465843419,28c237f6e3a8db9fdc2c4f74f384feb801bc0245
28c237f6e3a8db9fdc2c4f74f384feb801bc0245,28c237f6,Use the default Gson unmarshaller with Retrofit,"Use the default Gson unmarshaller with Retrofit

Our default Gson has custom TypeAdapters that are expected. Use that
instead of a new Gson().

Change-Id: Icc3a6587e9857bcbfcd5477ec59b6d8f3dd9078e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465504036,1465843419,0a32f34e46acebca56df2ad881365c16c9cf0e55
0a32f34e46acebca56df2ad881365c16c9cf0e55,0a32f34e,Hygiene: move constant from WikiApp to Constants,"Hygiene: move constant from WikiApp to Constants

Move constant symbol from WikipediaApp to Constants. No functional
changes intended.

Change-Id: Ia555abfe900b8d0ef14fd55d06375cbf39a0f31e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465490724,1465843419,11c0c2f8f53acd726d8a4ccfa2e6698ec548c6ce
11c0c2f8f53acd726d8a4ccfa2e6698ec548c6ce,11c0c2f8,"Merge ""Add most read Feed data client and test""","Merge ""Add most read Feed data client and test""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465843172,1465843172,"b14f9ffdcaaaf4785a8f8fc775368225b477f05b,9d254d2c5a44d715847e58afcbb3e9f7dca13bee"
9157719fbd88c415490623cc892cb5afc7ff771e,9157719f,Hygiene: remove dead code,"Hygiene: remove dead code

Change-Id: I5276e06c126f54964c6db1368f903f542723de5b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465836371,1465836371,b14f9ffdcaaaf4785a8f8fc775368225b477f05b
b14f9ffdcaaaf4785a8f8fc775368225b477f05b,b14f9ffd,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I05aaef9a95377fdf02e22cd330759fd1b4214f0f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465832354,1465833316,63749f61f01b4c5eeec9f3d07c537228416e4149
63749f61f01b4c5eeec9f3d07c537228416e4149,63749f61,"""Because you read"" feed card","""Because you read"" feed card

This card displays up to three results from a morelike API search based
on a title from the user's recent browsing history (retrieved by a
subclass of our existing MainPageReadMoreTopicTask).

I implemented the search API call with Retrofit.  The existing ""read
more"" section still calls the API with an AsyncTask as before, but moving
all API searches to Retrofit could be a follow-up task.

I deferred on enforcing a minimum browsing time limit as specified in the
card for now, but in the future maybe this could be implemented by creating
a PageTimer and storing the page the user has most recently spent 30+
seconds on (or a queue of such pages) in a SharedPreference.

I also deferred on creating the ""FeedManager"" control logic since that will
likely be a substantial task in its own right.

Bug: T129080
Change-Id: I11ef1f59ee2530f116e7c02d2a238898210eb2ee
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1465394645,1465508488,9961bb1bb0c2f5fff3d3efe19ee2a842f6361c3d
9d254d2c5a44d715847e58afcbb3e9f7dca13bee,9d254d2c,Add most read Feed data client and test,"Add most read Feed data client and test

Bug: T129082
Change-Id: Ie6af592039255515ad71b3937d0db98d6aeaca98
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465439164,1465502551,9961bb1bb0c2f5fff3d3efe19ee2a842f6361c3d
9961bb1bb0c2f5fff3d3efe19ee2a842f6361c3d,9961bb1b,Add test Retrofit factory,"Add test Retrofit factory

Supplement MockWebServerTest with a Retrofit factory that executes with
MockWebServer on the main thread. Retrofit calls can be made
synchronously but our current code structure makes this unwieldy.
Instead make calls as in production and change the Retrofit client
instance to execute them synchronously.

Change-Id: I6d3525ad98ed7a8e8f7901ac6389a3c3e199d7c5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465438918,1465501885,9e2c9eda1669861a9e31064166b4f91a7557b233
9e2c9eda1669861a9e31064166b4f91a7557b233,9e2c9eda,Hygiene: consolidate MockWebServer set up,"Hygiene: consolidate MockWebServer set up

Make an abstract test case, MockWebServerTest, which is responsible for
set up and tear down of its server.

Change-Id: Id7b59b851eabc628d0a1f990b4ce1ae74edcf146
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465405486,1465501885,d991f85958221ca08ee36ccee57643e79e71d374
d991f85958221ca08ee36ccee57643e79e71d374,d991f859,Add most read models and unmarshaller tests,"Add most read models and unmarshaller tests

Add models for the most read Feed card. Since the models specify
unmarshalling annotations and have a tiny bit of deserialization logic
themselves, add tests.

Bug: T129082
Change-Id: I9771f06ea563c66cbc6d03c030d8c48f15721fa4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465331946,1465501878,056429fc223d98577db271f851b7871bdef646e1
056429fc223d98577db271f851b7871bdef646e1,056429fc,"Merge ""Add continue reading coordinator test""","Merge ""Add continue reading coordinator test""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465501289,1465501289,"f63cbdc00048c36a89d05e049f4fb8c068c38335,5b022ad776fc51852ae02e3e4fd8fc8d649c6886"
f63cbdc00048c36a89d05e049f4fb8c068c38335,f63cbdc0,"Merge ""Add continue reading card logic""","Merge ""Add continue reading card logic""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465489689,1465489689,"3d805595044091a9862a1935bcc278f547dcef47,1b40db2a559bac98c76248a101b1c9bd59a8b925"
3d805595044091a9862a1935bcc278f547dcef47,3d805595,"Merge ""Update CSS files""","Merge ""Update CSS files""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465434675,1465434675,"daf6207967ef40f25f8e631bb71f373fbdf34127,3fca8dac062a4cbe59d573676eea32d1c09a7833"
5b022ad776fc51852ae02e3e4fd8fc8d649c6886,5b022ad7,Add continue reading coordinator test,"Add continue reading coordinator test

Test simple but easy to exercise logic.

Bug: T130963
Change-Id: I6e7f95bdec60364739d484af8929ff7613eefc0e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464972484,1465434435,1b40db2a559bac98c76248a101b1c9bd59a8b925
1b40db2a559bac98c76248a101b1c9bd59a8b925,1b40db2a,Add continue reading card logic,"Add continue reading card logic

• Add continue reading card.

  The continue reading card is populated with the most recent article
  from history when it's a day old+ and wasn't just dismissed. The check
  is initiated when the FeedFragment is resumed. Any previous continue
  reading card is removed from the Feed card list and a new one is
  added, if available. The Feed card list may be owned by a greater
  coordinator later. You can try out the new continue reading card by
  hardcoding ContinueReadingCard.daysOld() to return 1.

  The nasty disk IO stuff is in ContinueReadingClient. This class
  leverages LastPageReadTask which is pretty similar to
  MainPageReadMoreTopicTask.

  The simple coordination state machine (literally just checks the age
  of the most recently viewed article and that it wasn't just dismissed)
  is in ContinueReadingCoordinator.

  ContinueReadingCard is just a simple wrapper around a HistoryEntry.
  Its existence is justified because everything expects a Card and both
  ContinueReadingCoordinator and ContinueReadingCardView care about the
  card age (in days).

  For the ContinueReadingCardView subtitle, ""x days ago"", use Android
  plural strings. According to T47695, TWN supports this.

  The FeedView's RecyclerView.Adapter is now a distinct file,
  FeedRecyclerAdapter. It was getting big, difficult to think about, and
  was completely static. There's some manual type checks in this file
  instead of polymorphism that may want for revision.

• Move the demo code to a demo package. The demo part of ListCard is now
  a ListCard subclass, IntegerListCard. This code is still useful for
  testing and verifying disjoint cards work well. It will probably be
  removed soon.

Bug: T130963
Change-Id: If8b255a397d36dd2821c29c1eff879ac10009196
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464971648,1465434435,daf6207967ef40f25f8e631bb71f373fbdf34127
daf6207967ef40f25f8e631bb71f373fbdf34127,daf62079,"Merge ""Remove unused test files""","Merge ""Remove unused test files""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465425321,1465425321,"de04caa1865418e3efd08edf1d9b7b37f380b9b5,8a44ab3c241e258e42b8fb3630f23e681d90d8c5"
de04caa1865418e3efd08edf1d9b7b37f380b9b5,de04caa1,"Merge ""Check responses of synchronous network requests""","Merge ""Check responses of synchronous network requests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465342592,1465342592,"9b4a1c6bfc5a0128f5b8a970dd8eae8a451059ed,d0f8105ccb44232089f331ba584c54e559cb7627"
d0f8105ccb44232089f331ba584c54e559cb7627,d0f8105c,Check responses of synchronous network requests,"Check responses of synchronous network requests

A follow up to 9a21153, check the response statuses of synchronous
network requests. Probably simply because synchronous requests are less
common, I don't see checking the status called out explicitly in the
docs for the synchronous case. However, the status is checked in many
usages of the asynchronous Callback.onResponse(), and it seems
surprising not to for either case. There is also mention of checking the
synchronous status in this sample[0].

[0] https://github.com/square/retrofit/blob/0e4fe60/samples/src/main/java/com/example/retrofit/DeserializeErrorBody.java#L60

Change-Id: I37042a3d4a36b63988d350a90ff7d5df02bfaff4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465248471,1465339500,5ef1ca7f462864386c56a7b9e602872e4337723b
9b4a1c6bfc5a0128f5b8a970dd8eae8a451059ed,9b4a1c6b,Hygiene: extremely light clean up,"Hygiene: extremely light clean up

• Replace deprecated method call.

• Add missing @Override.

• Remove unused namespace.

No functional changes intended.

Change-Id: Ieb8d172269f5f721f45823d53d9f1f4a13669e4c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465332921,1465332921,5ef1ca7f462864386c56a7b9e602872e4337723b
8a44ab3c241e258e42b8fb3630f23e681d90d8c5,8a44ab3c,Remove unused test files,"Remove unused test files

A follow-up to 5ef1ca7, remove test files no longer in use.

Change-Id: I7dba687c3813ab24f3b9a02f594c8a05651eac71
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465332206,1465332206,5ef1ca7f462864386c56a7b9e602872e4337723b
5ef1ca7f462864386c56a7b9e602872e4337723b,5ef1ca7f,Hygiene: remove non-functional code.,"Hygiene: remove non-functional code.

This removes the code for interfacing with the Gather API :..(

Change-Id: Ic0cbd19a1e0c58a4d4afc92c68e66434c9affcbb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465249680,1465250026,6440aedc325e9e577fac82165b63fa7530ca939b
6440aedc325e9e577fac82165b63fa7530ca939b,6440aedc,Add header & footer View support to Feed list card,"Add header & footer View support to Feed list card

The continue reading card, and other cards, have a header View that is a
little different than their item views. Add support for header and
footer Views without requiring adapter index and type logic.

Bug: T130963
Change-Id: I53bbf5dc70223c2775e83f38df49cce6480c7700
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464735582,1465239268,4aa61a626c90b1f05e0c51288bb23c22f075ff51
4aa61a626c90b1f05e0c51288bb23c22f075ff51,4aa61a62,Update Feed UI for continue reading,"Update Feed UI for continue reading

• Replace the placeholder cards with something closer using the mock
  from Zeplin. I think I would prefer to adjust some of these metrics.
  For now, I've tried to mimic the mocks as closely as possible and
  I'll address tweaks in separate patches as wanted.

• Add FeedTheme. Set FeedActivity to use it in the manifest and override
  the unfortunate ThemedActionBarActivity default behavior which is to
  use Theme.Light / Dark. There's no dark Feed theme since there's no
  mocks.

• Fix some of the margins in FeedActivity. Namely, the feed should go to
  the screen edge, so drop those margins and use ItemDecorations for the
  margins instead.

Bug: T130963
Change-Id: I67e796734201c7afd91d56662152be0f3f554807
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464300560,1465239268,9db75d35692f1d7a9afab4ad940ff8d39f0cf69f
9db75d35692f1d7a9afab4ad940ff8d39f0cf69f,9db75d35,Bump versionCode,"Bump versionCode

Change-Id: Ifbc59493ba879fbe1de79ea1f21fb31f754a46b7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465234552,1465234574,b632cf709eaef8453c33f2fcd0cab38956494658
b632cf709eaef8453c33f2fcd0cab38956494658,b632cf70,"Merge ""Fix possible NPE when receiving user option response.""","Merge ""Fix possible NPE when receiving user option response.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465231950,1465231950,"7207fcb30a181013e487735b85ba15847310c804,5d0f57353b14c81659d19b98552b2d943f2ed23b"
7207fcb30a181013e487735b85ba15847310c804,7207fcb3,"Merge ""Fix possible crash by making cookie manager synchronized.""","Merge ""Fix possible crash by making cookie manager synchronized.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465230697,1465230697,"e008a6ff90a61495d7a188a042abf95631aca051,f70ffdf14e04b54433583a5c17dc26a3239a5b34"
e008a6ff90a61495d7a188a042abf95631aca051,e008a6ff,"Merge ""Fix possible crash by sharing cache between instances of OkHttpClient.""","Merge ""Fix possible crash by sharing cache between instances of OkHttpClient.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465229439,1465229439,"88e691f327316fe4da520798cc087d4a3979704c,64426eee13f0a04ceb33b1c54663e09dfa322a60"
88e691f327316fe4da520798cc087d4a3979704c,88e691f3,"Merge ""Fix possible crash when displaying gallery license icon.""","Merge ""Fix possible crash when displaying gallery license icon.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465228581,1465228581,"d22b8098d456628c0d072091fa814b11d9c36362,0dfddda774e4d40c353676e70dcd90a8e2dc1628"
d22b8098d456628c0d072091fa814b11d9c36362,d22b8098,"Merge ""Fix possible crash(es) when fetching token for storing user options.""","Merge ""Fix possible crash(es) when fetching token for storing user options.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465227650,1465227650,"6927277a225694359fb60353d3ecc344f3980713,3bbd2b2cab37ff631bfa9b282480aad7f4b275cb"
0dfddda774e4d40c353676e70dcd90a8e2dc1628,0dfddda7,Fix possible crash when displaying gallery license icon.,"Fix possible crash when displaying gallery license icon.

Refactor things a bit, and make ImageLicense be final.

Bug: T137080
Change-Id: I88f3ef6160da86153234b46ea64c9d1cda87e903
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465178722,1465227562,18c34378449b5061fb35fe069168499053479161
6927277a225694359fb60353d3ecc344f3980713,6927277a,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I71eaccc1849f168e09c8825ef9a1e542dbf2c035
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1465225365,1465226070,18c34378449b5061fb35fe069168499053479161
3bbd2b2cab37ff631bfa9b282480aad7f4b275cb,3bbd2b2c,Fix possible crash(es) when fetching token for storing user options.,"Fix possible crash(es) when fetching token for storing user options.

This instance of FetchEditTokenTask simply didn't have its onCatch method
overridden, meaning that things like timeout exceptions or connection
errors were not being handled. We'll simply catch them silently, since it
will be retried next time the task is run.

Bug: T137078
Change-Id: Ic2779fec347b4738ec0868cb7b8aec655461e505
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465177039,1465218988,18c34378449b5061fb35fe069168499053479161
f70ffdf14e04b54433583a5c17dc26a3239a5b34,f70ffdf1,Fix possible crash by making cookie manager synchronized.,"Fix possible crash by making cookie manager synchronized.

The crash tells us that a call to map.get(key) is returning null, even
though two lines earlier we called map.put(key). This can only mean one
thing:  another thread is removing that key from the map. The solution?
Synchronize access to the map.

Bug: T136980
Change-Id: I55b094ec2cde606884bfbd0275297158f8c45952
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465171319,1465218703,18c34378449b5061fb35fe069168499053479161
18c34378449b5061fb35fe069168499053479161,18c34378,"Merge ""Remove bits URL from make-css-assets.bash""","Merge ""Remove bits URL from make-css-assets.bash""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1465218470,1465218470,"cf8a444baf1f1f3187c07d44b7efff9679ad1f67,ae046324a23c7f80b86d5a8b2490e9fabbd7ed38"
5d0f57353b14c81659d19b98552b2d943f2ed23b,5d0f5735,Fix possible NPE when receiving user option response.,"Fix possible NPE when receiving user option response.

Bug: T136978
Change-Id: Iaf77735750cf6d513355ba3b781113450ef4279e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465170608,1465217649,4a201758b258e524eb0d994d49e8dc2ac53c0300
64426eee13f0a04ceb33b1c54663e09dfa322a60,64426eee,Fix possible crash by sharing cache between instances of OkHttpClient.,"Fix possible crash by sharing cache between instances of OkHttpClient.

We create multiple instances of OkHttpClient, namely one per every Site
that the user visits.  And for each instance of this client, we create a
new Cache object, which points to the *same* cache directory. This
suggests that multiple caches can conflict with each other, and cause a
crash.

The OkHttp documentation[1] recommends using a single instance of
OkHttpClient, which we should eventually do, and it definitely recommends
using a single instance of Cache. And I quote:

""It is an error to have multiple caches accessing the same cache directory
simultaneously. Most applications should call new OkHttpClient() exactly
once, configure it with their cache, and use that same instance
everywhere.""

[1] https://github.com/square/okhttp/wiki/Recipes#response-caching

Bug: T137077
Change-Id: Ia8bcc60fb019dbbb127da758dad9cf22996f8093
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465217128,1465217128,4a201758b258e524eb0d994d49e8dc2ac53c0300
cf8a444baf1f1f3187c07d44b7efff9679ad1f67,cf8a444b,Update gradle to 2.1.2,"Update gradle to 2.1.2

Change-Id: I677eded3a4a7092872dd96766e34d0c4999eb7b7
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1465052924,1465052924,4a201758b258e524eb0d994d49e8dc2ac53c0300
ae046324a23c7f80b86d5a8b2490e9fabbd7ed38,ae046324,Remove bits URL from make-css-assets.bash,"Remove bits URL from make-css-assets.bash

Since bits is being decommissioned (see T107430, T132969).

Change-Id: Ie81f1095cace7d2b3c421d85dc144d79c5fe8eb7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1465014356,1465014356,2412e53b5411138972e6e1cb5621d26f069f7d02
3fca8dac062a4cbe59d573676eea32d1c09a7833,3fca8dac,Update CSS files,"Update CSS files

Pulled in recent updates via Vagrant & make-css-assets.bash.

Change-Id: I24a1f77091c76262c289253c0dc0c04859003447
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1465013567,1465013567,2412e53b5411138972e6e1cb5621d26f069f7d02
4a201758b258e524eb0d994d49e8dc2ac53c0300,4a201758,"Merge ""Fix possible crash when displaying W0 banner.""","Merge ""Fix possible crash when displaying W0 banner.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464983690,1464983690,"1938237b549c03298bd8068a3fbec8dd3480dd33,95fd166bf1fd06dd463cda0cc9ed87605db0e428"
1938237b549c03298bd8068a3fbec8dd3480dd33,1938237b,"Merge ""Show an onboarding snackbar for deleting a page from a reading list.""","Merge ""Show an onboarding snackbar for deleting a page from a reading list.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464983189,1464983189,"65b7301af089a2d24fb841a8e47304e9217aefe8,0d801014245273a8ec7834cfe0608ab9b4d77494"
65b7301af089a2d24fb841a8e47304e9217aefe8,65b7301a,"Merge ""Make reading lists sortable.""","Merge ""Make reading lists sortable.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464983120,1464983120,"7ceba8b5ead0d4b128fc2df61933ec59a388c433,f90b0df7aee2b16685dc0df2618aa6b08e6de95f"
7ceba8b5ead0d4b128fc2df61933ec59a388c433,7ceba8b5,"Merge ""Upgrade Robolectric to v3.1-rc1""","Merge ""Upgrade Robolectric to v3.1-rc1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464982883,1464982883,"2412e53b5411138972e6e1cb5621d26f069f7d02,552707b18700563a15c99e45264e8147d69fca6e"
95fd166bf1fd06dd463cda0cc9ed87605db0e428,95fd166b,Fix possible crash when displaying W0 banner.,"Fix possible crash when displaying W0 banner.

Bug: T136977
Change-Id: I6e76a08ac2a8fb0c8c95d23320885bb0fcd867ef
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1464982132,1464982132,d6823a1299c1a0dd407cd0c64a0234f13809489e
0d801014245273a8ec7834cfe0608ab9b4d77494,0d801014,Show an onboarding snackbar for deleting a page from a reading list.,"Show an onboarding snackbar for deleting a page from a reading list.

Bug: T136740
Change-Id: I86a04620842227387c7d77109459d8d6cef3850c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1464895899,1464907795,f90b0df7aee2b16685dc0df2618aa6b08e6de95f
f90b0df7aee2b16685dc0df2618aa6b08e6de95f,f90b0df7,Make reading lists sortable.,"Make reading lists sortable.

This adds a Toolbar button in the ReadingLists fragment used for sorting
the lists, as well as sorting the pages in a list. The button expands into
a menu with options to ""sort by name"" and ""sort by recent"".

If the user is looking at the list of lists, the sorting will apply to the
list of lists.  If the user is looking at the pages in a certain list, the
sorting will apply to the pages.

The sorting modes for both cases are stored in Prefs.

Bug: T136739
Change-Id: I76c095d912146fafbdd3f1e59de366767a00fafa
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1464889895,1464907299,d6823a1299c1a0dd407cd0c64a0234f13809489e
2412e53b5411138972e6e1cb5621d26f069f7d02,2412e53b,"Merge ""Make the message text in developer settings dialogs be highlightable.""","Merge ""Make the message text in developer settings dialogs be highlightable.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464899542,1464899542,"8d7115b0363f0496f4fdb1a8c264c4cfdad7e967,f8a67bad5bf2bbd817b0dc665e0de8c13abd9577"
552707b18700563a15c99e45264e8147d69fca6e,552707b1,Upgrade Robolectric to v3.1-rc1,"Upgrade Robolectric to v3.1-rc1

No release notes[0] yet but this seems to fix the sporadic AsyncTask
threading issue[1,2] that surfaced recently, possibly in 37ed818.

[0] https://github.com/robolectric/robolectric/releases/tag/robolectric-3.1-rc1
[1] https://github.com/robolectric/robolectric/issues/2415
[2] https://integration.wikimedia.org/ci/job/apps-android-wikipedia-test/2600/testReport/junit/org.wikipedia.readinglist.api.legacy/GetLegacyReadingListPageTitlesTest/testCollectionPages/

  Error Message

  java.lang.RuntimeException: java.lang.NullPointerException
  Stacktrace

  java.lang.RuntimeException: java.lang.NullPointerException
    at org.robolectric.RobolectricTestRunner$2.evaluate(RobolectricTestRunner.java:244)
    at org.robolectric.RobolectricTestRunner.runChild(RobolectricTestRunner.java:188)
    at org.robolectric.RobolectricTestRunner.runChild(RobolectricTestRunner.java:54)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
    at org.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:152)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:112)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:56)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:364)
    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)
    at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:745)
  Caused by: java.lang.NullPointerException
    at org.robolectric.shadows.ShadowAssetManager.getAndResolve(ShadowAssetManager.java:350)
    at org.robolectric.shadows.ShadowAssetManager.getResourceText(ShadowAssetManager.java:70)
    at android.content.res.AssetManager.getResourceText(AssetManager.java)
    at android.content.res.Resources.getText(Resources.java:270)
    at org.robolectric.shadows.ShadowResources.getText(ShadowResources.java:358)
    at android.content.res.Resources.getText(Resources.java)
    at android.content.res.Resources.getString(Resources.java:360)
    at org.robolectric.shadows.ShadowContext.getString(ShadowContext.java:33)
    at org.robolectric.shadows.ShadowContextWrapper.getString(ShadowContextWrapper.java:81)
    at android.content.Context.getString(Context.java)
    at org.wikipedia.WikipediaApp.initExceptionHandling(WikipediaApp.java:573)
    at org.wikipedia.WikipediaApp.onCreate(WikipediaApp.java:167)
    at org.robolectric.internal.ParallelUniverse.setUpApplicationState(ParallelUniverse.java:140)
    at org.robolectric.RobolectricTestRunner.setUpApplicationState(RobolectricTestRunner.java:433)
    at org.robolectric.RobolectricTestRunner$2.evaluate(RobolectricTestRunner.java:240)
    at org.robolectric.RobolectricTestRunner.runChild(RobolectricTestRunner.java:188)
    at org.robolectric.RobolectricTestRunner.runChild(RobolectricTestRunner.java:54)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
    at org.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:152)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:112)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:56)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
    ... 8 more
  Standard Output

  E/org.wikipedia.crash.hockeyapp.HockeyAppExceptionHandler:
  java.lang.RuntimeException: java.lang.RuntimeException: java.lang.NullPointerException
    at org.robolectric.util.SimpleFuture.run(SimpleFuture.java:61)
    at org.robolectric.shadows.ShadowAsyncTask$3.run(ShadowAsyncTask.java:112)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:745)
  Caused by: java.lang.RuntimeException: java.lang.NullPointerException
    at org.robolectric.shadows.ShadowAsyncTask$1.done(ShadowAsyncTask.java:57)
    at org.robolectric.util.SimpleFuture.run(SimpleFuture.java:58)
    ... 4 more
  Caused by: java.lang.NullPointerException
    at org.robolectric.shadows.ShadowAsyncTask$1.done(ShadowAsyncTask.java:38)
    ... 5 more
  E/HockeyApp: Error saving crash report!
  java.io.FileNotFoundException: /tmp/android-tmp-robolectric8261273648910926280/files/a8e7881d-492f-471d-aa28-42de4d79fe69.stacktrace (No such file or directory)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:221)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:110)
    at java.io.FileWriter.<init>(FileWriter.java:63)
    at net.hockeyapp.android.objects.CrashDetails.writeCrashReport(CrashDetails.java:148)
    at net.hockeyapp.android.ExceptionHandler.saveException(ExceptionHandler.java:93)
    at net.hockeyapp.android.ExceptionHandler.saveException(ExceptionHandler.java:51)
    at org.wikipedia.crash.hockeyapp.HockeyAppExceptionHandler.uncaughtException(HockeyAppExceptionHandler.java:42)
    at java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:1057)
    at java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:1052)
    at java.lang.Thread.dispatchUncaughtException(Thread.java:1986)
  V/org.wikipedia.WikipediaApp: initExceptionHandling():574: Registering for HockeyApp crash handling.
  I/org.wikipedia.WikipediaApp: onCreate():201: Registered reading list page observer
  Standard Error

  java.lang.NullPointerException
    at org.robolectric.shadows.ShadowAssetManager.getAndResolve(ShadowAssetManager.java:350)
    at org.robolectric.shadows.ShadowAssetManager.getResourceText(ShadowAssetManager.java:70)
    at android.content.res.AssetManager.getResourceText(AssetManager.java)
    at android.content.res.Resources.getText(Resources.java:270)
    at org.robolectric.shadows.ShadowResources.getText(ShadowResources.java:358)
    at android.content.res.Resources.getText(Resources.java)
    at android.content.res.Resources.getString(Resources.java:360)
    at org.robolectric.shadows.ShadowContext.getString(ShadowContext.java:33)
    at org.robolectric.shadows.ShadowContextWrapper.getString(ShadowContextWrapper.java:81)
    at android.content.Context.getString(Context.java)
    at org.wikipedia.WikipediaApp.initExceptionHandling(WikipediaApp.java:573)
    at org.wikipedia.WikipediaApp.onCreate(WikipediaApp.java:167)
    at org.robolectric.internal.ParallelUniverse.setUpApplicationState(ParallelUniverse.java:140)
    at org.robolectric.RobolectricTestRunner.setUpApplicationState(RobolectricTestRunner.java:433)
    at org.robolectric.RobolectricTestRunner$2.evaluate(RobolectricTestRunner.java:240)
    at org.robolectric.RobolectricTestRunner.runChild(RobolectricTestRunner.java:188)
    at org.robolectric.RobolectricTestRunner.runChild(RobolectricTestRunner.java:54)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
    at org.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:152)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:112)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:56)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:364)
    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)
    at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:745)
  May 25, 2016 8:58:05 PM okhttp3.mockwebserver.MockWebServer$3 execute
  INFO: MockWebServer[45585] starting to accept connections
  May 25, 2016 8:58:06 PM okhttp3.mockwebserver.MockWebServer$4 processOneRequest
  INFO: MockWebServer[45585] received request: GET /w/api.php?format=json&formatversion=2&action=query&list=listpages&lspid=0 HTTP/1.1 and responded: HTTP/1.1 200 OK
  May 25, 2016 8:58:06 PM okhttp3.mockwebserver.MockWebServer$3 acceptConnections
  INFO: MockWebServer[45585] done accepting connections: Socket closed

Change-Id: I7e47e3093ed1c289188cd3bbc7b5a4a0680b4420
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464208850,1464893775,d6823a1299c1a0dd407cd0c64a0234f13809489e
8d7115b0363f0496f4fdb1a8c264c4cfdad7e967,8d7115b0,"In search results, hide description when there's a redirect source.","In search results, hide description when there's a redirect source.

Bug: T129958
Change-Id: I8afbfece88f24c5da6655c0f3ef5a8e7dacc9fd1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1464702541,1464879756,d6823a1299c1a0dd407cd0c64a0234f13809489e
f8a67bad5bf2bbd817b0dc665e0de8c13abd9577,f8a67bad,Make the message text in developer settings dialogs be highlightable.,"Make the message text in developer settings dialogs be highlightable.

When modifying developer settings, such as the RestBase URI format, we
show a message with a ""hint"" of what the setting should be. Since the hint
is relatively long, and contains many special characters, it's beneficial
to allow long-pressing of the text to highlight it and copy it into the
EditText field, and simply modify the pasted text.

Change-Id: Iaff11fe749553ac4640d709315a7f8ecf6a01762
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1464876161,1464876161,d6823a1299c1a0dd407cd0c64a0234f13809489e
d6823a1299c1a0dd407cd0c64a0234f13809489e,d6823a12,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464709439,1464709439,"e40e4b1bd14c35b9850d80c0d06a235e5162e98d,efa981e2878d78d11c496941cb4cc3f1ba130c7e"
efa981e2878d78d11c496941cb4cc3f1ba130c7e,efa981e2,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I8e2fe688cf53a119c293e5e52b0033a82ed302da
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464708374,1464708948,61ac353904ba1fa892888b70bd1ce32967ad2455
e40e4b1bd14c35b9850d80c0d06a235e5162e98d,e40e4b1b,Hygiene: replace several more drawables with vectors.,"Hygiene: replace several more drawables with vectors.

Change-Id: Ie7a0d6a14f501edc5c17cfbb7abdecd2d805095f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1464701856,1464701856,61ac353904ba1fa892888b70bd1ce32967ad2455
61ac353904ba1fa892888b70bd1ce32967ad2455,61ac3539,Add Talk link at bottom of page,"Add Talk link at bottom of page

Opens the talk page from the link in external browser.

Change-Id: I39e5b18d5c96def6b9ac41a0fead92eeddf22712
(cherry picked from commit 89069e7df9d31dacf32c7d5b967a526121fa4a43)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1426651657,1464642191,c276548d8f428d83de978c7d88fe818c2742e7a5
c276548d8f428d83de978c7d88fe818c2742e7a5,c276548d,Improve some i18n documentation.,"Improve some i18n documentation.

As requested:

Bug: T135316
Bug: T136293
Bug: T136296
Change-Id: If2318751983a9b85fdf9dc4e1ef70d79b07acb6f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1464366256,1464366661,f924a63132076728d39cfacc851115cf552e06ea
f924a63132076728d39cfacc851115cf552e06ea,f924a631,Centralize SimpleDraweeView style,"Centralize SimpleDraweeView style

• Move some common SimpleDraweeView attributes to a style.

• Side effect fix for transparent images in link previews missing a
  background.

• Added captcha loading and error checkerboard placeholder.

Bug: T130158
Change-Id: I7fac6745f243c44144e5ae816b3802448718cb53
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464206389,1464362611,e86558a936d6a238d7990eb650cb13835bb2d5c0
e86558a936d6a238d7990eb650cb13835bb2d5c0,e86558a9,"Merge ""Close nav menu as soon as Random is tapped.""","Merge ""Close nav menu as soon as Random is tapped.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464282561,1464282561,"2abc1459f45699115ec8ebbff02bc04b9853d3a7,cda79b4a2c61ffcee97e0f394f810dabc05f78f3"
2abc1459f45699115ec8ebbff02bc04b9853d3a7,2abc1459,"Add Feed Activity, Fragment, & card aggregator UI","Add Feed Activity, Fragment, & card aggregator UI

• Add FeedActivity and wire it to the nav drawer. An Activity is used
  to help enforce separation of concerns. It's sparse and may be removed
  for a pure View or Fragment implementation at any time.

• Add bare bones FeedFragment with a FeedView and a button to add
  dummy cards.

• Add supporting components (a couple placeholders and
  AutoFitRecyclerView).

Bug: T129078
Change-Id: Icd6f10097d6b32f40f27b1409ead4ec803acb7ea
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463697777,1464280945,efd1f908cd9d9838ec5612544b6ad0b006c5daca
cda79b4a2c61ffcee97e0f394f810dabc05f78f3,cda79b4a,Close nav menu as soon as Random is tapped.,"Close nav menu as soon as Random is tapped.

Bug: T135448
Change-Id: Ic5467be50abd4fc38957c0a2dc38463127fade10
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1464275173,1464275173,efd1f908cd9d9838ec5612544b6ad0b006c5daca
efd1f908cd9d9838ec5612544b6ad0b006c5daca,efd1f908,"Merge ""Hygiene: replace deprecated method""","Merge ""Hygiene: replace deprecated method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464271768,1464271768,"a803035901b6ad423848294bbadddce903847937,c69d562468b75b776695e5a99877ac15069717bc"
c69d562468b75b776695e5a99877ac15069717bc,c69d5624,Hygiene: replace deprecated method,"Hygiene: replace deprecated method

Change-Id: I9c2ead8a2d4488627feaf69ff25a4b2e6050b42f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464213817,1464213817,178e466e3d3a538326cdd2314a466848cfa11bc5
a803035901b6ad423848294bbadddce903847937,a8030359,Hygiene: override return type instead of casting,"Hygiene: override return type instead of casting

No functional changes intended.

Change-Id: Iee10d5a5ea0061edde12ba438f31cc16891a7d42
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464210901,1464210901,178e466e3d3a538326cdd2314a466848cfa11bc5
178e466e3d3a538326cdd2314a466848cfa11bc5,178e466e,"Merge ""Hygiene: replace error logging with crash on beta""","Merge ""Hygiene: replace error logging with crash on beta""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464124542,1464124542,"ae78d7152823bcd33afdc864a49370e052524116,ad80d8f9d3991e9282776e0e4041b79c096eeb2a"
ae78d7152823bcd33afdc864a49370e052524116,ae78d715,"Merge ""Upgrade Gradle to v2.13""","Merge ""Upgrade Gradle to v2.13""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464123088,1464123088,"5095e5f5b68608aaad0da105ce31cc678a2718fd,b8cc5d1801c8a13a23f0e3b749fc816e5d2ff017"
5095e5f5b68608aaad0da105ce31cc678a2718fd,5095e5f5,Bump versionCode,"Bump versionCode

Change-Id: I596b8241c5519a9626c51688f476950b7bec06d9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464049596,1464049635,7a6c4bf4604247f7632a381bf1c860a18a01de26
b8cc5d1801c8a13a23f0e3b749fc816e5d2ff017,b8cc5d18,Upgrade Gradle to v2.13,"Upgrade Gradle to v2.13

https://docs.gradle.org/2.13/release-notes

Change-Id: If2b2ae1a69d177743c643250020f9c317ec9b136
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464048188,1464048277,8dde181434f4d79dfda3161b18816d67ad3c9fb2
7a6c4bf4604247f7632a381bf1c860a18a01de26,7a6c4bf4,"Merge ""Upgrade version minor hardcodes to v2.2.x""","Merge ""Upgrade version minor hardcodes to v2.2.x""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464046347,1464046347,"5eb9439ee8b68cd9eb9b2d1280a864bf6ad578cb,6eda3ce004c2622480fba1709fe3ad13c1bc9ebe"
5eb9439ee8b68cd9eb9b2d1280a864bf6ad578cb,5eb9439e,"Merge ""Fix exception type thrown""","Merge ""Fix exception type thrown""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464044794,1464044794,"8dde181434f4d79dfda3161b18816d67ad3c9fb2,2369851598d1fd29e5844ddb3917d83519803898"
ad80d8f9d3991e9282776e0e4041b79c096eeb2a,ad80d8f9,Hygiene: replace error logging with crash on beta,"Hygiene: replace error logging with crash on beta

Resolve todo that exceptions logged should cause crashes on non-prod
builds.

Change-Id: I1f0dc8724cec90f88e839ed07c437d4bb642fb6d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464042152,1464042152,8dde181434f4d79dfda3161b18816d67ad3c9fb2
6eda3ce004c2622480fba1709fe3ad13c1bc9ebe,6eda3ce0,Upgrade version minor hardcodes to v2.2.x,"Upgrade version minor hardcodes to v2.2.x

Change-Id: Iff90b6418553e2ef12c17f2024b1ea4445e72280
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464042026,1464042026,8dde181434f4d79dfda3161b18816d67ad3c9fb2
2369851598d1fd29e5844ddb3917d83519803898,23698515,Fix exception type thrown,"Fix exception type thrown

A follow up to 72f465c, change the exception type thrown to the one
expected.

Bug: T136037
Change-Id: If1b4146731a571d2461d37850c9f27e503094b67
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464039330,1464039577,f6dfa6bea8ac813906a74da91764b758d3f23413
8dde181434f4d79dfda3161b18816d67ad3c9fb2,8dde1814,Add a small artificial delay after saving an edit.,"Add a small artificial delay after saving an edit.

After an edit is saved in the app, the change on the server side is not
immediate, and takes a few moments to start appearing in the response when
fetching the page content again.

Until this is fixed on the server side, we can work around it by forcing a
short delay right after a successful edit, before we attempt to read back
the updated page content.

Bug: T132803
Change-Id: I56758654aa5dd6890eb397de139140600c45bdbe
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1464035997,1464035997,f6dfa6bea8ac813906a74da91764b758d3f23413
f6dfa6bea8ac813906a74da91764b758d3f23413,f6dfa6be,Bump versionCode,"Bump versionCode

Change-Id: Iadde693612ea984c492deec71eae89c63b08d29f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464028955,1464028999,3884abbe4f8c3d6cad79eb45b29e8717a031b0d8
3884abbe4f8c3d6cad79eb45b29e8717a031b0d8,3884abbe,"Merge ""Abort relaunch when a crash loop is detected""","Merge ""Abort relaunch when a crash loop is detected""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1464026312,1464026312,"5c81538b37d55b3ddfedaf8c5178e52a0c1e5d1c,7c002620fe62abae2f2fb5719c7df579be62390c"
5c81538b37d55b3ddfedaf8c5178e52a0c1e5d1c,5c81538b,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id45e89fc9b5e3bc984e5e14bca5e4d856a03aa8f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1464020489,1464021041,826736205fe5b3b845dcdd99b8f103837bf94acb
7c002620fe62abae2f2fb5719c7df579be62390c,7c002620,Abort relaunch when a crash loop is detected,"Abort relaunch when a crash loop is detected

Don't attempt to launch the crash report Activity when the current boot
sequence never made it to any UI. In these cases, fallback to default
Android behavior (terminate the current Activity and show the previous
Activity in the stack, if any).

Bug: T135854
Change-Id: I6276dd32ccd3b22c54f0063949ca7480eed3db33
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463760676,1464020200,826736205fe5b3b845dcdd99b8f103837bf94acb
826736205fe5b3b845dcdd99b8f103837bf94acb,82673620,"Merge ""Upgrade Mapbox to v4.0.1""","Merge ""Upgrade Mapbox to v4.0.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463781903,1463781903,"4af8726591f085ff5ff31912886d266a9b1d227d,ad56780841a10075fa726616a0305f5c4b8c3939"
4af8726591f085ff5ff31912886d266a9b1d227d,4af87265,"Merge ""Hygiene: remove protection unmarshaller""","Merge ""Hygiene: remove protection unmarshaller""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463781901,1463781901,"eb539eeb94b22c1228d5aa87fdaf103df7d28626,9fb09eb423ec6620e348272547207d97f9111506"
eb539eeb94b22c1228d5aa87fdaf103df7d28626,eb539eeb,"Merge ""Hygiene: move Fragment callbacks into Fragments""","Merge ""Hygiene: move Fragment callbacks into Fragments""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463777365,1463777365,"5d858d652955eac609d5f19e2d98bf941c3ca66c,9ef870e78c66476eb2acf9423fe60d73a4c92ec8"
5d858d652955eac609d5f19e2d98bf941c3ca66c,5d858d65,"Merge ""Add Feed nav drawer entry and dev setting""","Merge ""Add Feed nav drawer entry and dev setting""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463777362,1463777362,"39c3f7eb4fd4fb15cf8696100bd37423a6e507bc,fb82fb4e13ea7756a070cea858fb9aaf43af1a2b"
39c3f7eb4fd4fb15cf8696100bd37423a6e507bc,39c3f7eb,"Merge ""Minor post-API change patch cleanup""","Merge ""Minor post-API change patch cleanup""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463763874,1463763874,"e6bd7de9019ffd53fdedf70a5a562110f9009d61,31c5ab5d4882b0339d4d302418a8fcb383b2e1e9"
e6bd7de9019ffd53fdedf70a5a562110f9009d61,e6bd7de9,"Merge ""Reimplement AsyncTask thread pool in SaneAsyncTask""","Merge ""Reimplement AsyncTask thread pool in SaneAsyncTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463758694,1463758694,"5cf03f5772757c68bbb3ea8b661e1be82922cea0,37ed818bc36e4b906b60aa5c4003096774cdd73b"
5cf03f5772757c68bbb3ea8b661e1be82922cea0,5cf03f57,"Merge ""Fix crash when trying to save a page with a colon""","Merge ""Fix crash when trying to save a page with a colon""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463758692,1463758692,"9066ff393fb188629026586f6fcebc1150ed64bc,10fbcadedd9dba6e8b4c9a8e890e1d1998c346e7"
31c5ab5d4882b0339d4d302418a8fcb383b2e1e9,31c5ab5d,Minor post-API change patch cleanup,"Minor post-API change patch cleanup

-Remove methods where implementation is identical to that in superclass
-Rename flag param from 'i' to 'flags' in Parcelable.writeToParcel impl's
-Remove unused method

Change-Id: I57f775ce0e74c437c7a8a663b2bfc1a2a8bb2622
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1463694364,1463751486,ff1f0ac47bae2361db2e6bbb815430d46c8e40f0
9ef870e78c66476eb2acf9423fe60d73a4c92ec8,9ef870e7,Hygiene: move Fragment callbacks into Fragments,"Hygiene: move Fragment callbacks into Fragments

Fragment callbacks are often tiny interfaces and not worth distinct
files. Roll the callbacks into their Fragments:

• FragmentCallback -> CallbackFragment.Callback

• CrashReportFragmentCallback -> CrashReportFragment.Callback

No functional changes intended.

Change-Id: If3d8f6b31d3ce61b9ddcf56b1185640eea512627
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463686235,1463698504,fb82fb4e13ea7756a070cea858fb9aaf43af1a2b
fb82fb4e13ea7756a070cea858fb9aaf43af1a2b,fb82fb4e,Add Feed nav drawer entry and dev setting,"Add Feed nav drawer entry and dev setting

Add Feed navigation drawer entry, a developer toggle (defaults true for
dev flavor), and TODOs for missing tie ins. Text and icon are not final.

Bug: T129078
Change-Id: Ib30623d9b6980ffa07b0ce4051e552201dfd859a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463679677,1463698494,ff1f0ac47bae2361db2e6bbb815430d46c8e40f0
9066ff393fb188629026586f6fcebc1150ed64bc,9066ff39,Add authmanager to dev settings hints,"Add authmanager to dev settings hints

We're doing lots of testing with authmanager. I can't remember the URL.
Note the setting in the mediaWikiBaseUri dialog text. We can remove it
later if the server disappears.

Change-Id: I7737eabc88e27f24b185a88e9c7263bb14623337
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463677246,1463698443,ff1f0ac47bae2361db2e6bbb815430d46c8e40f0
ad56780841a10075fa726616a0305f5c4b8c3939,ad567808,Upgrade Mapbox to v4.0.1,"Upgrade Mapbox to v4.0.1

https://github.com/mapbox/mapbox-gl-native/blob/master/platform/android/CHANGELOG.md#401

Change-Id: Ib33854bae0aab15f7275f57863471df39b359131
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463674900,1463698419,ff1f0ac47bae2361db2e6bbb815430d46c8e40f0
9fb09eb423ec6620e348272547207d97f9111506,9fb09eb4,Hygiene: remove protection unmarshaller,"Hygiene: remove protection unmarshaller

A follow up to 283255c, the custom protection deserialization logic is
no longer needed. Remove the unmarshaller and also give some light clean
up to the related tests so they use the default app Gson instance.

Bug: T135070
Change-Id: I2e58d7f068cdaec6f72d1a4aa6e9a4fa36f8be34
",,,,Stephen Niedzielski,stephen@niedzielski.com,Niedzielski,sniedzielski@wikimedia.org,1463673427,1463692793,283255c15bfb9d05c26ce5030a70c2f297524466
ff1f0ac47bae2361db2e6bbb815430d46c8e40f0,ff1f0ac4,Hygiene: consolidate URL usage,"Hygiene: consolidate URL usage

Rename new Wikipedia URL constant and replace duplicate string in Prefs.
No functional changes intended.

Change-Id: I794d7e37ed415d2f6d505c255e1f76882fc9dfc2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462911315,1463689995,0c0fbbe9718b788394eee9e98643457dbb81cb55
0c0fbbe9718b788394eee9e98643457dbb81cb55,0c0fbbe9,Update login and account creation to work with AuthManager,"Update login and account creation to work with AuthManager

This updates the app's API calls to work with changes to the API
associated with the launch of AuthManager.

This does not remove any code but rather detects whether AuthManager is
enabled for the app site so that login and account creation can be handled
appropriately.  When legacy login and account creation are disabled on all
Wikipedias, the code to handle them can be removed accordingly.

Bug: T124229
Change-Id: Idcb8c8c05a8fa8321ce7bc67d3b4bea6393419f8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1461186686,1463687512,f7354bc798c5348c892095ffde6e8ed63ed76480
f7354bc798c5348c892095ffde6e8ed63ed76480,f7354bc7,Hygiene: Remove wildcard imports,"Hygiene: Remove wildcard imports

Change-Id: Ic6b82ac64cd510bc8e3f5d24baa7640bbc5687a5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1463678172,1463678172,283255c15bfb9d05c26ce5030a70c2f297524466
37ed818bc36e4b906b60aa5c4003096774cdd73b,37ed818b,Reimplement AsyncTask thread pool in SaneAsyncTask,"Reimplement AsyncTask thread pool in SaneAsyncTask

Copy the AsyncTask AOSP implementation to prevent low OEM
implementations. Test failure scenario by setting CPU_COUNT and
QUEUE_SIZE to 1.

Bug: T135572
Change-Id: I2ad6804a776a69d3a1dd2674a7ff8fbfcba71186
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463526238,1463526377,4043ef5564b4d6e496eeba469aa99638964b39b9
283255c15bfb9d05c26ce5030a70c2f297524466,283255c1,Update BasePageLeadTest to reflect new page protection response format,"Update BasePageLeadTest to reflect new page protection response format

As a result of T69054, the value of a lead response's ""protection"" field
for an unprotected page is now an empty object rather than an empty array.
This updates BasePageLeadTest to reflect the same.

Change-Id: I2672066fd5dc8a279a5d877e2188943bbef7fec6
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1463524097,1463524097,4043ef5564b4d6e496eeba469aa99638964b39b9
4043ef5564b4d6e496eeba469aa99638964b39b9,4043ef55,"Merge ""Enable progressive rendering of JPEGs""","Merge ""Enable progressive rendering of JPEGs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463513708,1463513708,"eac33161b293ec10dabe71c433974564311cfa7c,3e3923d2db0ef9bd1f259bcd1a4175d3f01533a7"
eac33161b293ec10dabe71c433974564311cfa7c,eac33161,"Merge ""Fix cookies and user options""","Merge ""Fix cookies and user options""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463513560,1463513560,"92ba98f7a240ad49e27d98290a289a2460f0bfd3,72f465c77fefffd0fdb5dca7ce8128611496189a"
92ba98f7a240ad49e27d98290a289a2460f0bfd3,92ba98f7,Hygiene: break layout into separate XML files,"Hygiene: break layout into separate XML files

The Reading List onboarding is a static billboard experience and quite
independent. Break the onboarding out into a separate file and include
it instead. No functional changes intended.

Change-Id: Ia934894a91d4a7618b9c0efdb0144cd0667973ba
",,,,Stephen Niedzielski,stephen@niedzielski.com,Mholloway,mholloway@wikimedia.org,1463170853,1463512067,bf3af027244206a3b4dd6ac8523cff7f785e92e6
bf3af027244206a3b4dd6ac8523cff7f785e92e6,bf3af027,"Merge ""Upgrade Android Support libraries to v23.4.0""","Merge ""Upgrade Android Support libraries to v23.4.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463511857,1463511857,"a544d7aecce7eaf3a942d7f723cf8f467de97603,b44612727bf2ba878d4d8a2df0abb995f942c314"
10fbcadedd9dba6e8b4c9a8e890e1d1998c346e7,10fbcade,Fix crash when trying to save a page with a colon,"Fix crash when trying to save a page with a colon

• Request namespace in the MediaWiki page query. In the Content Service
  and whenever the property is unavailable, continue to derive it. For
  distinct namespace (not namespace localized name) logic, use
  Namespace. The previous implementation attempted to convert the
  localized name to a number which failed when the article's title
  contained a colon.

• Move some of the legacy namespace code into the Namespace class for
  reusability.

Bug: T135523
Change-Id: I0e858b5d456bad150b2ae3313acda1369bd7abb9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463503823,1463503823,a544d7aecce7eaf3a942d7f723cf8f467de97603
a544d7aecce7eaf3a942d7f723cf8f467de97603,a544d7ae,Only check Wikipedia Zero state on page load,"Only check Wikipedia Zero state on page load

A Zero partner recently complained that the Zero on/off banner was
popping up erratically.  We think this was most likely due to an unstable
connectivity state causing rapid Zero on/off changes, with the zeroHandler
firing a notification snackbar each time.

This patch modifies WikipediaZeroHandler to no longer receive notice of
network state change events; rather, we'll just check Zero state on page
load.  This is a sufficiently fine-grained strategy for updating the Zero
chrome and should eliminate perceived banner jitters.

Also, some refactoring:
-Added @Nullable/@NonNull annotations as appropriate
-Broke out inline header change checks into separate method
-Use L logging class rather than Log

Bug: T135309
Change-Id: I5725e884e4165f844e5663db8fa055e163e279d4
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1463415153,1463433592,98d6b21adf18cf1463a56e0541c97288f9e1668b
b44612727bf2ba878d4d8a2df0abb995f942c314,b4461272,Upgrade Android Support libraries to v23.4.0,"Upgrade Android Support libraries to v23.4.0

Notes on the upgrade[0,1].

You may have to build twice initially to download the new library
dependencies. I think it's this bug[2] in the SDK Manager plugin.

[0] http://developer.android.com/tools/support-library/index.html#rev23-4-0
[1] https://medium.com/@chrisbanes/appcompat-v23-2-age-of-the-vectors-91cbafa87c88
[2] https://github.com/JakeWharton/sdk-manager-plugin/issues/101

Change-Id: I2c966a3066b9ceb873eec4bfa7053664e95f9fca
",,,,Stephen Niedzielski,stephen@niedzielski.com,Niedzielski,sniedzielski@wikimedia.org,1463170703,1463431101,cb9fc7095d93e0f4345c6a650f8275c2eae7a790
98d6b21adf18cf1463a56e0541c97288f9e1668b,98d6b21a,Zero banner design tweaks,"Zero banner design tweaks

-Makes the zero banner much smaller
-Fixes message centering (on API 17+, at least)
-Makes use of FeedbackUtil.findBestView when constructing it so that the
 text is not obscured by the software buttons on M+

Bug: T135310
Change-Id: I5b537c6f989693cfa8fb2fbcc661aa31244de340
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1463425473,1463425473,a6ab5b248d25511e5de115d319fa832e2ce519a8
a6ab5b248d25511e5de115d319fa832e2ce519a8,a6ab5b24,"Hygiene: Fix ""Inefficient layout weight""","Hygiene: Fix ""Inefficient layout weight""

Change-Id: Iabed34b71f2b4da04500eb5c8a94dda3c6d20114
",,,,Michael Basil,michael@intrications.com,Stephen Niedzielski,stephen@niedzielski.com,1463331080,1463416599,2ec0be2ffaecf94226c18ec5b13ca17db46b9e68
2ec0be2ffaecf94226c18ec5b13ca17db46b9e68,2ec0be2f,"Merge ""Hygiene: Remove useless parent layouts""","Merge ""Hygiene: Remove useless parent layouts""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463414844,1463414844,"26baa2779c38af773705ba433ced20697c235501,e111b8bcc152bbbd77abf7995e38f76eb82de068"
26baa2779c38af773705ba433ced20697c235501,26baa277,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I779ee3406498f06d3d248aef0b638cfa3193d424
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463412633,1463413501,8710d8e4e577a2bec52e0c3eefffd54ea5aa9097
e111b8bcc152bbbd77abf7995e38f76eb82de068,e111b8bc,Hygiene: Remove useless parent layouts,"Hygiene: Remove useless parent layouts

Change-Id: I95cdb44b67c8ef232d5bc65140942fde851d586a
",,,,Michael Basil,michael@intrications.com,Michael Basil,michael@intrications.com,1463331262,1463331523,8710d8e4e577a2bec52e0c3eefffd54ea5aa9097
8710d8e4e577a2bec52e0c3eefffd54ea5aa9097,8710d8e4,"Merge ""Improve logic for storing and updating offline pages.""","Merge ""Improve logic for storing and updating offline pages.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463171334,1463171334,"cb9fc7095d93e0f4345c6a650f8275c2eae7a790,ad4648ac6b68625662619e5d9dc3d207e4bac8ad"
cb9fc7095d93e0f4345c6a650f8275c2eae7a790,cb9fc709,"Merge ""Hygiene: remove dead code and resources""","Merge ""Hygiene: remove dead code and resources""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463166672,1463166672,"051ffe7de8a67dfb9babdab16c5e6913cf631511,72f3c2f2573c0e93be289c0dafc73919397d96cc"
051ffe7de8a67dfb9babdab16c5e6913cf631511,051ffe7d,"Merge ""Unbind Views on Fragment destruction""","Merge ""Unbind Views on Fragment destruction""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463166223,1463166223,"1ecf2536f0f58058c060a21d4b57f6abf538d9e0,236dcf5a172f291fb724b4bf394f0559ee1c7897"
72f3c2f2573c0e93be289c0dafc73919397d96cc,72f3c2f2,Hygiene: remove dead code and resources,"Hygiene: remove dead code and resources

• Remove saved pages leftovers.
• Remove app store description. We haven't used these translations in
  some time.
• Miscellaneous resource cleanup for Wikipedia Zero and network
  errors.

Bug: T91971
Change-Id: Ibb15681e65ae3cd8dc02977d29cb90990402c754
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462909951,1463164531,9a9bda3ad9e53e0b01cd273e3b46eefdf9852c0b
236dcf5a172f291fb724b4bf394f0559ee1c7897,236dcf5a,Unbind Views on Fragment destruction,"Unbind Views on Fragment destruction

Add missing unbind() call in UserOptionRowFragment. From the docs[0]:

  Fragments have a different view lifecycle than activities. When
  binding a fragment in onCreateView, set the views to null in
  onDestroyView. Butter Knife returns an Unbinder instance when you call
  bind to do this for you. Call its unbind method in the appropriate
  lifecycle callback.

[0] http://jakewharton.github.io/butterknife/#reset

Change-Id: If81cea985d1d4c93ac74cc1b289bd4c1fbd149a4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463004710,1463161380,9a9bda3ad9e53e0b01cd273e3b46eefdf9852c0b
3e3923d2db0ef9bd1f259bcd1a4175d3f01533a7,3e3923d2,Enable progressive rendering of JPEGs,"Enable progressive rendering of JPEGs

I haven't actually noticed a difference but it seems like a good thing
to enable.

Change-Id: I8cf52578d6ea08dc8e3b0a508f3c5fd6686ae45b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462920060,1463161068,1ecf2536f0f58058c060a21d4b57f6abf538d9e0
1ecf2536f0f58058c060a21d4b57f6abf538d9e0,1ecf2536,Upgrade Fresco to v0.10.0,"Upgrade Fresco to v0.10.0

Now includes GIF support as a separate dependency[0]. WebP support
dropped since we don't support it on Commons[1].

[0] https://github.com/facebook/fresco/releases/tag/v0.10.0
[1] https://commons.wikimedia.org/wiki/Commons:File_types

Change-Id: I21533cdb9e022e2c5c75e323022aa9fc88631de0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462919905,1463161051,adfa2a5f3474d37ec13122d331bdb5816ebf36d3
adfa2a5f3474d37ec13122d331bdb5816ebf36d3,adfa2a5f,Upgrade HockeyApp to v4.0.1,"Upgrade HockeyApp to v4.0.1

Upgrade the HockeyApp SDK[0] and enable user metrics[1].

[0] https://github.com/bitstadium/HockeySDK-Android/releases/tag/4.0.1
[1] https://www.hockeyapp.net/features/user-metrics/

Change-Id: I595e77f5f9f3c88b8c7b8762788de62f0e137867
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462919809,1463160994,742b48d20c887a25dce827e5a121cc82755303c4
742b48d20c887a25dce827e5a121cc82755303c4,742b48d2,Upgrade Android Testing Support Libraries,"Upgrade Android Testing Support Libraries

Upgrade Espresso to v2.2.2 and Runner/Rules to v0.5.

https://google.github.io/android-testing-support-library/downloads/release-notes/#espresso-222-runnerrules-05-2016-02-22-silent-release

Change-Id: I17292ed4608ab3dc88e6774e5043fbb0b6cf08e9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462919336,1463160973,ec717e9dfa779cbcd990d2ad3e36168f1e28d8fe
ec717e9dfa779cbcd990d2ad3e36168f1e28d8fe,ec717e9d,Upgrade Spoon client to v1.5.3 & plugin to v1.1.0,"Upgrade Spoon client to v1.5.3 & plugin to v1.1.0

https://github.com/square/spoon/blob/master/CHANGELOG.md#version-153-2016-05-09
https://github.com/stanfy/spoon-gradle-plugin/releases/tag/v1.1.0

Change-Id: I0dad91a47bd92a73028944ac4796607123b6d3fe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462919084,1463160973,9a9bda3ad9e53e0b01cd273e3b46eefdf9852c0b
9a9bda3ad9e53e0b01cd273e3b46eefdf9852c0b,9a9bda3a,"Merge ""Upgrade Butter Knife to v8.0.1""","Merge ""Upgrade Butter Knife to v8.0.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463160685,1463160685,"7ae21ce4dea5d39066d80c9f44e995d4228cf7b5,dbb816d60e4364b7f488ebaa0a5136d7130aefbd"
dbb816d60e4364b7f488ebaa0a5136d7130aefbd,dbb816d6,Upgrade Butter Knife to v8.0.1,"Upgrade Butter Knife to v8.0.1

https://github.com/JakeWharton/butterknife/blob/master/CHANGELOG.md#version-801-2016-04-27

Change-Id: Idf9a2e73f128f213bc2897017e86bc206c744831
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462918319,1463159625,f80964f08004c02225c92edf86dd40aa246e09ce
7ae21ce4dea5d39066d80c9f44e995d4228cf7b5,7ae21ce4,Don't widen images on metered connections,"Don't widen images on metered connections

Adds a check for ConnectivityManagerCompat.isActiveNetworkMetered, which
reports if the user is likely to be sensitive to data use.  Only widens
images if not.

Incorporates CSS changes in MobileApp to add styles to center unwidened
images in Parsoid HTML.

Bug: T127015
Change-Id: I85697989455a937720555d064fd7f80aedd41ec2
",,,,Michael Holloway,mholloway@wikimedia.org,Dbrant,dbrant@wikimedia.org,1459953708,1463156348,08663170207e5cfea5e91d38c2a12cf7b2ccbbb9
08663170207e5cfea5e91d38c2a12cf7b2ccbbb9,08663170,"Merge ""Add styles for Parsoid images""","Merge ""Add styles for Parsoid images""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463155948,1463155948,"38703e942e397c4a4363bb971c7b45995eef39d8,cf8426823fc33c900c764c35249090e40f3a4a41"
ad4648ac6b68625662619e5d9dc3d207e4bac8ad,ad4648ac,Improve logic for storing and updating offline pages.,"Improve logic for storing and updating offline pages.

Previously, each page in a reading list would be marked as OUTDATED every
time it was upserted for any reason, which would cause unnecessary network
requests and disk writes.

This patch updates the logic to write the page to disk only once (when
it's added to a list), and then update the page only when the user visits
the page again while online.

Change-Id: I3d073a7788894e51e4f43f7a0cc64993beb85ae2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1463019620,1463154349,dd2f26e2d04ba3d9a9ed19d6024c633bb5c6c6ad
72f465c77fefffd0fdb5dca7ce8128611496189a,72f465c7,Fix cookies and user options,"Fix cookies and user options

• The cookie jar was only being used for old Api requests. Use the
  same OkHttpClient and cookie manager everywhere.

• HttpCookie.getDomain() now seems to return a top level domain like
  wikipedia.org instead of en.wikipedia.org. This appears to affect
  only the user option cookie loosening around meta.wikimedia.org.
  Make the check slightly looser.

• There is a race condition with obtaining the edit token used to
  preserve user options. For now, catch the error and handle it like a
  network issue.

Change-Id: Ibf3985f1fcf0b349c9d8ec799adf8d2587d854a0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463093042,1463093889,f80964f08004c02225c92edf86dd40aa246e09ce
38703e942e397c4a4363bb971c7b45995eef39d8,38703e94,Hygiene: add @NonNull annotation,"Hygiene: add @NonNull annotation

Assume an English translation exists for File, Special, and Main pages
and add @NonNull annotation to valueFor. No functional changes intended.

Change-Id: I240f218a213e4290d0270552c3946a7dc9d88cf4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1463075571,1463075672,f80964f08004c02225c92edf86dd40aa246e09ce
f80964f08004c02225c92edf86dd40aa246e09ce,f80964f0,"Merge ""Update DefaultUserOptionDataClient for Retrofit2""","Merge ""Update DefaultUserOptionDataClient for Retrofit2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463074945,1463074945,"89f47e58959e4ecba450297adbe6d1ffe2d23ccc,9cff5c5928c38976b3c7a926e19c296de5f7c9ca"
89f47e58959e4ecba450297adbe6d1ffe2d23ccc,89f47e58,"Merge ""Added: action mode counter on History multiple selection (Google guideline)""","Merge ""Added: action mode counter on History multiple selection (Google guideline)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463068779,1463068779,"601ea2b8f05a83d6850ab58dc7224dd4133b7dee,acf0318a4aa7a84f19a2f4a04e2287fc27c5a8b7"
acf0318a4aa7a84f19a2f4a04e2287fc27c5a8b7,acf0318a,Added: action mode counter on History multiple selection (Google guideline),"Added: action mode counter on History multiple selection (Google guideline)

Change-Id: I05eb88f8adffe88b0f3c9896ce4275582dcb4555
",,,,Elad Keyshawn,elad.keyshawn@gmail.com,Elad Keyshawn,elad.keyshawn@gmail.com,1462623252,1463064221,b3a0321b17c1018094670abc9174df49c0de03df
601ea2b8f05a83d6850ab58dc7224dd4133b7dee,601ea2b8,"Merge ""Add dev setting to disable site language code""","Merge ""Add dev setting to disable site language code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463063582,1463063582,"4b070cfa9f32872ff0140a2a57d0746a47ac66da,cd5f211bebb1d54c2b0dc009c12e671c714c3e44"
4b070cfa9f32872ff0140a2a57d0746a47ac66da,4b070cfa,"Merge ""Hygiene: consolidate Site code""","Merge ""Hygiene: consolidate Site code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463062434,1463062434,"3d6c3c185055fb584ed5e5c7ebc16fc306b87e9c,15c39040598c975540259820d0b9385a0164e3b5"
3d6c3c185055fb584ed5e5c7ebc16fc306b87e9c,3d6c3c18,"Merge ""Update language list and templates""","Merge ""Update language list and templates""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463061358,1463061358,"c56e8822f91fc298165d282fe492de1cdecc53dc,14e5cd3d2e9513389e88feefeaacf31e34253593"
c56e8822f91fc298165d282fe492de1cdecc53dc,c56e8822,"Merge ""Hygiene: suppress unwanted lint""","Merge ""Hygiene: suppress unwanted lint""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1463060464,1463060464,"dd2f26e2d04ba3d9a9ed19d6024c633bb5c6c6ad,4cccd5a5688aa716dd4e7287234be23b8688d42e"
15c39040598c975540259820d0b9385a0164e3b5,15c39040,Hygiene: consolidate Site code,"Hygiene: consolidate Site code

Very tiny DRY up in Site. No functional changes intended.

Change-Id: I0bc3df50464ae92db68fc34f597c23a3968513c6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462910839,1463005792,dd2f26e2d04ba3d9a9ed19d6024c633bb5c6c6ad
14e5cd3d2e9513389e88feefeaacf31e34253593,14e5cd3d,Update language list and templates,"Update language list and templates

Approximately:

  scripts/generate_wiki_languages.py &&
  scripts/make-templates.py &&
  mv \
    FileAliasData.java \
    MainPageNameData.java \
    SpecialAliasData.java \
    app/src/main/java/org/wikipedia/staticdata/ &&
  mv languages_list.xml app/src/main/res/values/

Change-Id: I7831d82c8def8dbf113dcd93a1208ed8469acff7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462893047,1462998820,dd2f26e2d04ba3d9a9ed19d6024c633bb5c6c6ad
cd5f211bebb1d54c2b0dc009c12e671c714c3e44,cd5f211b,Add dev setting to disable site language code,"Add dev setting to disable site language code

Needed to test new authmanager test endpoint.

Change-Id: Id17567beeb7d55e17ec8dd23f803addb3caa5fdc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461362810,1462998722,dd2f26e2d04ba3d9a9ed19d6024c633bb5c6c6ad
9cff5c5928c38976b3c7a926e19c296de5f7c9ca,9cff5c59,Update DefaultUserOptionDataClient for Retrofit2,"Update DefaultUserOptionDataClient for Retrofit2

Bug: T134936
Change-Id: I37e60cf9d584a3ca378c409c40d69c0b0ea77b51
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1462989756,1462992555,dd2f26e2d04ba3d9a9ed19d6024c633bb5c6c6ad
dd2f26e2d04ba3d9a9ed19d6024c633bb5c6c6ad,dd2f26e2,Log URLs by default in dev builds,"Log URLs by default in dev builds

This is slightly more verbose but is relevant to many changes,
especially for the Content Service.

Change-Id: I66094f3cce1907889021f681940a6fce0d1fbd52
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462902038,1462912631,b5bb3a24d68d8cff5304e0b19b10d859f340b467
b5bb3a24d68d8cff5304e0b19b10d859f340b467,b5bb3a24,"Merge ""More memory for build process""","Merge ""More memory for build process""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1462912080,1462912080,"118f037905b6802fe9d7b1144828d5dc3a33701d,bd095ca45c1c3ad72af9e336cfc5bc3c92b4966e"
118f037905b6802fe9d7b1144828d5dc3a33701d,118f0379,Upgrade Android SDK Build Tools,"Upgrade Android SDK Build Tools

Not many changes advertised:

http://developer.android.com/tools/revisions/build-tools.html

Change-Id: Ifad01f04ae209b351345ed73adc5773bcd647a32
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1462908782,1462910380,9a211538433a618fcd96bd72995eb1c82033c176
bd095ca45c1c3ad72af9e336cfc5bc3c92b4966e,bd095ca4,More memory for build process,"More memory for build process

Gradle wants more memory and complains if it doesn't get at least 2GB.

Change-Id: Ieb0d8cba51fbf216f21b96a69fd990b759179537
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1462910275,1462910275,c0230890d31dc461eacb565ce4d9d64c4888985f
4cccd5a5688aa716dd4e7287234be23b8688d42e,4cccd5a5,Hygiene: suppress unwanted lint,"Hygiene: suppress unwanted lint

Change-Id: Ida51a88f1bdaa9f1e0369b69d76f0d6d14f44975
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462910107,1462910107,c0230890d31dc461eacb565ce4d9d64c4888985f
9a211538433a618fcd96bd72995eb1c82033c176,9a211538,Upgrade to Retrofit 2,"Upgrade to Retrofit 2

Note that if you use Developer Settings for RetrofitLogLevel or any of the URI patterns the vlues may have to be updated.
The base URIs now have to end with a slash. For RetrofitLogLevel see the discussion of HttpLoggingInterceptor below.

A lot has changed in Retrofit land:
* RestAdapter was renamed to Retrofit.
* Interceptors have moved to OkHttp since the HTTP connection layer has been moved to OkHttp.
* HttpLoggingInterceptor does not have the HEADERS_AND_ARGS logging level anymore. FULL got renamed to BODY.
   If you used one of those log level values before you will need to set a new level or you won't get logging since default is NONE.
* Slashes have moved in URIs. Base URIs should always end with a slash. Relative URLs usually not have a slash at the beginning.
* Using Call object to encapsulate request/response pairs.
* Same service interface for synchronous and asynchronous requests. Use execute for synchronous, enqueue for asynchronous requests.
* The callback methods for responses and failures have changed.
   E.g. 400 HTTP code is included in onResponse. Have to check isSuccessful() there.
   The callback method onFailure() only deals with exceptions, usually IOExceptions.
* HTTP headers in OkHttp only get replaced if a headers() builder is and its set() method is used.
   (Executing addHeader() on an existing header, like User-Agent does nothing.)
* MockWebServer is now part of OkHttp3 and in a different package.
   It also likes to use HttpUtl instead of URL. But fortunately, there is a convenient converter to URLs.

Additional changes:
* RestAdapterFactory was renamed to RetrofitFactory to match the rename of RestAdapter to Retrofit
* Introduced a retrofit package since we also have a few more classes to support Retrofit (RetrofitException, ...)

Further info:
* https://github.com/square/okhttp/wiki/Recipes
* https://futurestud.io/blog/retrofit-2-upgrade-guide-from-1-9

Change-Id: I0fd2fd9b9b800ac49dd28911591a85e7e01b57c9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1462377230,1462905919,c0230890d31dc461eacb565ce4d9d64c4888985f
c0230890d31dc461eacb565ce4d9d64c4888985f,c0230890,Remove Saved Pages.,"Remove Saved Pages.

To be merged when the UI is fully integrated with the DAO(s).
This patch leaves the Saved Pages database table intact, so it's
independent of the patch that will implement the migration path from saved
pages to reading lists.

Change-Id: I2921d3dd935fa7babb9262c5da154d8e7cb38d36
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1460731612,1462902239,c27b9351b0ee85df53c5a9974ebe1266d432c293
c27b9351b0ee85df53c5a9974ebe1266d432c293,c27b9351,"Merge ""Replace RetrofitError with Throwable""","Merge ""Replace RetrofitError with Throwable""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1462898636,1462898636,"1999ce0f96ab5d3354b13e8623cdfca224966764,d42dd8a424da45e8bf8535beec7ba3964101452a"
1999ce0f96ab5d3354b13e8623cdfca224966764,1999ce0f,"Merge ""Remove unneeded Retrofit Response parameter in callbacks""","Merge ""Remove unneeded Retrofit Response parameter in callbacks""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1462895724,1462895724,"852a1a1b11b7affea1c98e8af1fe8603f8e632b9,921afab330dd408fe38e31642fa4c8d75192a878"
852a1a1b11b7affea1c98e8af1fe8603f8e632b9,852a1a1b,"Merge ""Hygiene: remove redundant URI parameter""","Merge ""Hygiene: remove redundant URI parameter""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1462886599,1462886600,"b7869a39e6c74f612136598b9f0029fac0d3a79c,e5a1d265fd8ac240e3afe837c4ad17b8f0731bc1"
b7869a39e6c74f612136598b9f0029fac0d3a79c,b7869a39,"Merge ""Hygiene: remove redundant git ignore""","Merge ""Hygiene: remove redundant git ignore""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1462885871,1462885871,"9ae623ca71e2901af3707a2b053778fa77fd6305,d02917eafb4faa169030186b4673eec8c938de9c"
9ae623ca71e2901af3707a2b053778fa77fd6305,9ae623ca,"Merge ""Limit JSON Lint to app files""","Merge ""Limit JSON Lint to app files""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1462885578,1462885578,"b3a0321b17c1018094670abc9174df49c0de03df,a1e4668f76a3c6fd2c0f70fa491aec51b295360f"
d42dd8a424da45e8bf8535beec7ba3964101452a,d42dd8a4,Replace RetrofitError with Throwable,"Replace RetrofitError with Throwable

Getting ready to move to Retrofit2. We don't use any specific Retrofit functionality
in our failure callbacks. The Retrofit callback parameters will change once we move to Retrofit2.

Change-Id: Ib4956b302f7549e7d59083f4e8cf7ab9478f7e26
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1461791733,1462835871,921afab330dd408fe38e31642fa4c8d75192a878
921afab330dd408fe38e31642fa4c8d75192a878,921afab3,Remove unneeded Retrofit Response parameter in callbacks,"Remove unneeded Retrofit Response parameter in callbacks

Getting ready to move to Retrofit2. This parameter was only used for logging the URL, which
can be already dynamically accomplished using Retrofit logging interceptors.

Change-Id: I2fa627bb5f79527bfc4c94ea58f3ae2f7f3be45b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1461708420,1462835871,a9f5ee054069a2857cab6fd62894ded6c24b9a18
b3a0321b17c1018094670abc9174df49c0de03df,b3a0321b,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I01b25e7fe637485d8f7e387efc446882b5127600
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462834798,1462835797,a9f5ee054069a2857cab6fd62894ded6c24b9a18
e5a1d265fd8ac240e3afe837c4ad17b8f0731bc1,e5a1d265,Hygiene: remove redundant URI parameter,"Hygiene: remove redundant URI parameter

AppContentProvider defaults notify to true for observers. This flag only
needs to be used when false. Also, rename from
WikipediaApp.FROM_READING_LIST_PAGE_OBSERVER to
AppContentProviderContract.NOTIFY since it's completely generic and
concerns contractors.

Change-Id: Ibc0c091689cb5278213227ff7858a7e91b6bb105
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462834174,1462834174,a9f5ee054069a2857cab6fd62894ded6c24b9a18
a9f5ee054069a2857cab6fd62894ded6c24b9a18,a9f5ee05,Implement background saved page syncing,"Implement background saved page syncing

Kicks off a service on app startup to check with the new Reading List
pages DAO for added or deleted entries.  Handles adding or deleting
accordingly.

Bug: T126753
Change-Id: Iae8e9e19fa4d774f590a85f238b1510bb5642878
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1461367167,1462833136,b942ea00e73f192b82a90402ee3a98c62de232f3
b942ea00e73f192b82a90402ee3a98c62de232f3,b942ea00,Bump versionCode,"Bump versionCode

Change-Id: If1353b1b8d4f483ce4dcf5fdc5b17b34dbc7c7b5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462820873,1462820873,058ed9cb5f4b77411f113cb31820e4a8687ee11a
058ed9cb5f4b77411f113cb31820e4a8687ee11a,058ed9cb,Workaround: Prevent OkHttpClient from opening an HTTP/2 connection,"Workaround: Prevent OkHttpClient from opening an HTTP/2 connection

OkHttp does not play nicely with nginx over HTTP/2 and this is causing
our connection to fail when trying to log in or make an edit.

This workaround will fix our issue while Square works on resolving
https://github.com/square/okhttp/issues/2543 .

Bug: T134758
Bug: T134759
Change-Id: Ifc2ec3eb75e2e54b4789914f43ff9104f1ca11f9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1462819619,1462819619,87b690ab4ca9d6ce2aa67ef7d6922bd63d39e520
87b690ab4ca9d6ce2aa67ef7d6922bd63d39e520,87b690ab,"Merge ""Persist filename when adding page to a saved reading list""","Merge ""Persist filename when adding page to a saved reading list""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1462377424,1462377424,"77b4cce1ff678941269f8d5f5eb3ad3e5355df46,bd95c39d4a2ce7f1bdc44a676eef9c8a09a87773"
bd95c39d4a2ce7f1bdc44a676eef9c8a09a87773,bd95c39d,Persist filename when adding page to a saved reading list,"Persist filename when adding page to a saved reading list

Persist the directory in which saved page content is saved so that the
saved page sync service can find it if/when the page or list is deleted.

Moved a couple of SavedPage methods useful to reading lists to FileUtil.

Also a bit of minor cleanup.

Change-Id: Ie86617751172b67bb452b04e8314a9422527a5f1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1461596932,1462329374,8ac56ffd524e66fb206e3652ac2297f09fbbd064
d02917eafb4faa169030186b4673eec8c938de9c,d02917ea,Hygiene: remove redundant git ignore,"Hygiene: remove redundant git ignore

Change-Id: Ie68a4d5b49280cb58a977b9b540bacb1d741b590
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462211471,1462211471,a1e4668f76a3c6fd2c0f70fa491aec51b295360f
a1e4668f76a3c6fd2c0f70fa491aec51b295360f,a1e4668f,Limit JSON Lint to app files,"Limit JSON Lint to app files

• Limit JSON Lint to operate on app files not node_modules.
• Clean up globs.

Change-Id: Id3049749cde4bb570b2faf84f2bbc9229206c667
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462209211,1462209211,eaaa5538a3fee35afa3267c08a25a2b02a0d7d4e
77b4cce1ff678941269f8d5f5eb3ad3e5355df46,77b4cce1,"Merge ""Hygiene: tabs to spaces""","Merge ""Hygiene: tabs to spaces""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1462205946,1462205946,"8ac56ffd524e66fb206e3652ac2297f09fbbd064,eaaa5538a3fee35afa3267c08a25a2b02a0d7d4e"
eaaa5538a3fee35afa3267c08a25a2b02a0d7d4e,eaaa5538,Hygiene: tabs to spaces,"Hygiene: tabs to spaces

f38dfa3 mistakenly swapped spaces for tabs. Replace tabs with spaces. No
functional changes intended.

Change-Id: If468131f1efc3cb3200767066498eba12e489307
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1462204381,1462204381,ccf68e9e3c55c72043ad6614ad5a7dfa53e47c93
8ac56ffd524e66fb206e3652ac2297f09fbbd064,8ac56ffd,"Merge ""Workaround NPE in platform getExternalStorageState""","Merge ""Workaround NPE in platform getExternalStorageState""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461932829,1461932829,"ccf68e9e3c55c72043ad6614ad5a7dfa53e47c93,60abeba02cf9487cbd3d50fb2d56d32adb233f7f"
60abeba02cf9487cbd3d50fb2d56d32adb233f7f,60abeba0,Workaround NPE in platform getExternalStorageState,"Workaround NPE in platform getExternalStorageState

Work around platform bug[0,1] in Environment.getExternalStorageState().

[0] https://code.google.com/p/android/issues/detail?id=175810
[1] https://rink.hockeyapp.net/manage/apps/226649/app_versions/16/crash_reasons/115659443

Change-Id: Idc6dc06ec808f67935f62183781c4208cb3ee256
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461894356,1461894356,b37847710edec27e0be77f6f70094e1ba1bc48ff
ccf68e9e3c55c72043ad6614ad5a7dfa53e47c93,ccf68e9e,[facepalm] Update useRestBase upon refreshing RemoteConfig.,"[facepalm] Update useRestBase upon refreshing RemoteConfig.

http://i.imgur.com/Uybx5G4.png?1

Here's what currently happens:
- The app launches for the first time, and the RbSwitch singleton is
  statically initialized.
- Inside its private constructor is the only place where it updates the
  state of the ""useRestBase"" preference.
- The RemoteConfig task, which fetches the remote variable that determines
  RestBase enrollment, completes *after* RbSwitch is initialized, meaning
  that the ""useRestBase"" preference doesn't get updated until the current
  instance of the app is terminated and restarted. This may help account
  for the relatively slow uptake of RB usage.

Change-Id: I0af126e381c07c23c5f4f419604c9290d56f81dc
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461856296,1461856502,b37847710edec27e0be77f6f70094e1ba1bc48ff
b37847710edec27e0be77f6f70094e1ba1bc48ff,b3784771,[facepalm] Enable Wiktionary popups in production.,"[facepalm] Enable Wiktionary popups in production.

http://i.imgur.com/iWKad22.jpg?fb

Change-Id: I5c7556fb504ba991ff8c3aae6ba4764282c1a86a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461856185,1461856185,c9eb4fc274d6496818dc8cb57e9810e242a4a3cc
cf8426823fc33c900c764c35249090e40f3a4a41,cf842682,Add styles for Parsoid images,"Add styles for Parsoid images

Applies styles added in the MobileApp extension to correctly center images
in Parsoid HTML when not widened and to remove an undesired margin applied
by WebKit.

Bug: T127015
Bug: T132364
Depends-On: I34bd6468b140ff2456690b6abdc1de4fb8d03ab2
Depends-On: I0e61c93d9fe2e9c9d322177cda4a375154f8f6f1
Change-Id: I26a58e480a69ac97f3467465f3d735e0bd84d7c7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1461273373,1461788984,7c7923586c28ae66f9cf2f6d6eda91c4cc38f431
c9eb4fc274d6496818dc8cb57e9810e242a4a3cc,c9eb4fc2,Hygiene: Use TextInputEditText instead of EditText.,"Hygiene: Use TextInputEditText instead of EditText.

This switches to using the slightly more proper TextInputEditText when
nesting inside a TextInputLayout. This allows us to place the ""hint""
message in the parent TextInputLayout, instead of the EditText itself,
which works better when the IME is in ""extract"" mode.  We actually give
most of our EditTexts a flag of ""flagNoExtractUi"", but still, this
represents a hygienic improvement.

This also removes an annoying warning message in logcat about this issue.
No functional changes intended.

Bug: T133393
Change-Id: I57fe25fc95edbb906eb5cb186c01edbe81ce292f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461773024,1461773435,80ee3583188f648ef64d9ee4f45c0f9922b5599d
80ee3583188f648ef64d9ee4f45c0f9922b5599d,80ee3583,"Merge ""Upgrade Gradle plugin to 2.1""","Merge ""Upgrade Gradle plugin to 2.1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461772166,1461772166,"3b4895f473c7622e80f5ce0355b6433d6621ff1d,300c99a28327d3abfdcf9845a96a54c55657b3d7"
3b4895f473c7622e80f5ce0355b6433d6621ff1d,3b4895f4,"Merge ""Hygiene: collapse classes""","Merge ""Hygiene: collapse classes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461768937,1461768937,"e7fc86e241fafaa5fbafb3eb96586a7f41a4f497,a90e03ae06176be94b388048b7ce75d0076e3b8f"
300c99a28327d3abfdcf9845a96a54c55657b3d7,300c99a2,Upgrade Gradle plugin to 2.1,"Upgrade Gradle plugin to 2.1

Change-Id: Ic07c0c55c9d439749c21775ad3cca87f89bfb744
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1461766443,1461766443,e7fc86e241fafaa5fbafb3eb96586a7f41a4f497
e7fc86e241fafaa5fbafb3eb96586a7f41a4f497,e7fc86e2,Fix search result tests,"Fix search result tests

Update a couple of the search tests for the recent changes in
SearchResult.

Change-Id: If61ee49a5cc82c3200ffcde421a9c54374293062
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461703298,1461703298,4f35821eee6a713afaed0fe764d12841a1e920b9
4f35821eee6a713afaed0fe764d12841a1e920b9,4f35821e,"Merge ""Display redirect source in search results.""","Merge ""Display redirect source in search results.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461694160,1461694160,"034f647c18a307ebd10083be47073ca240525625,5a7305a847f28d14f9a2aff2ba51d5a129aba641"
5a7305a847f28d14f9a2aff2ba51d5a129aba641,5a7305a8,Display redirect source in search results.,"Display redirect source in search results.

Note: this patch also deprecates the ""disableFullTextSearch"" remote
variable, since we're pretty sure that full-text search from the app
doesn't overload the servers.

Bug: T129958
Change-Id: I313e16aec1e6cbd93339bce5672132cb6801f412
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461607361,1461691167,1c6d46edca88c697b8138b6c475966ae89c06f8c
a90e03ae06176be94b388048b7ce75d0076e3b8f,a90e03ae,Hygiene: collapse classes,"Hygiene: collapse classes

ReadingListDiskRow and ReadingListPageDiskRow are nearly identical and
should be collapsed.

Change-Id: Icf2e4709fb16c82dd89c186d7ba098cf6ddb5a80
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461689846,1461689846,034f647c18a307ebd10083be47073ca240525625
034f647c18a307ebd10083be47073ca240525625,034f647c,Reading List Page DAO interaction tweaks,"Reading List Page DAO interaction tweaks

1) Change DiskRow.next() so that SAVED rather than ONLINE follows
   OUTDATED; otherwise pages are in ONLINE state after saving, causing
   all kinds of problems

2) Upsert all rows after changing a reading list's saved state so that
   the service registers the change and saves or deletes as needed

3) Add a boolean flag to ReadingList to hold the user's offline saving
   preference for an empty list so that ReadingList.getSaveOffline()
   doesn't fall back to true regardless of the user's preference just
   because the list is empty.  The default on creation is still true.

4) Fix class name in ReadingListPageDiskTable.toContentValues() so
   filename persists as expected

Change-Id: Id299e7ae0263cec752139da29772b209cc664a62
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1461365715,1461687539,1c6d46edca88c697b8138b6c475966ae89c06f8c
1c6d46edca88c697b8138b6c475966ae89c06f8c,1c6d46ed,Fix multi-list membership.,"Fix multi-list membership.

Change-Id: I276a2bea6a5e810d609b049ff30a10e13b35061a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461682749,1461682749,2f06ef5690351510a438bb26b51d51171891fdff
2f06ef5690351510a438bb26b51d51171891fdff,2f06ef56,Further design tweaks and fixes for reading lists.,"Further design tweaks and fixes for reading lists.

- Make most DAO interactions synchronous, to avoid numerous subtle bugs.
- Enable proper renaming of a list (re-key all member pages).
- Improve fetching of thumbnails and descriptions for page items, and make
  it interwiki.
- Update design of onboarding dialog and the reading list fragment.
- Add indicator icon that shows the offline status of each reading list.

Bug: T130929
Change-Id: I9a0cbd98a9939085c74cce4bdc766a3d8a0eb576
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1461550044,1461676996,da476ccb56c6b8e7bf53fee0bb97d3657bc13e3d
da476ccb56c6b8e7bf53fee0bb97d3657bc13e3d,da476ccb,"Merge ""Fix Reading List page list membership queries""","Merge ""Fix Reading List page list membership queries""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461676687,1461676687,"ef738355af8d12da56f775198db17e8ba6ba497f,d30829210832790a13fbcf10229ad39cb0dcf2f0"
ef738355af8d12da56f775198db17e8ba6ba497f,ef738355,"Merge ""Hygiene: fix class hierarchy""","Merge ""Hygiene: fix class hierarchy""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461676014,1461676014,"22299b10200da86906b7ee3189ec1272603395a5,ab094c4a168834d2d081f454e252e76f09024664"
d30829210832790a13fbcf10229ad39cb0dcf2f0,d3082921,Fix Reading List page list membership queries,"Fix Reading List page list membership queries

List memberships are preserved as a CSV:

  key,key,key

An empty lists mean delete and should never exist in the database and a
list of one has no commas:

  key

In practice, a list of three keys looks like:

  ABCDEF,ABCDEFjsAdifj,SDFpodskfposk

The prior implementation intended to perform a substring query on the
CSV where the query was wrapped in delimiters to restrict matches to
whole keys and prevent portions of keys matching. In the above example,
a match for the ABCDEF key should match the first item but not the
second, which only happens to contain ABCDEF as a substring. The query
looks like:

  %,ABCDEF,%

Since the first and last items of the key list won't be delimited on
both sides, the column contents should pre and postfixed with commas.
The prior implementation was confused and broken.

Change-Id: I4605e0e1d37aae873d171d637bea43467eec77b6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461623046,1461623974,22299b10200da86906b7ee3189ec1272603395a5
22299b10200da86906b7ee3189ec1272603395a5,22299b10,"Merge ""Migrate saved pages to reading lists.""","Merge ""Migrate saved pages to reading lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461617384,1461617384,"9540b2bceaf47d1deefb2f69e061ec23c04822d4,b50835e17a514341eaf741cc1971aae72142257b"
ab094c4a168834d2d081f454e252e76f09024664,ab094c4a,Hygiene: fix class hierarchy,"Hygiene: fix class hierarchy

The super class of ReadingListPageDiskRow was
DiskRow<ReadingListPageRow>. This is incomplete as the actual disk row
contains a filename column as well. ReadingListPageDiskRow duplicated
the filename member when it should have just specified
ReadingListDiskRow as the super. No functional changes intended.

Change-Id: I452bb0a486efa44ca60117f77b5c33ca5b03d25c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461606941,1461606941,9540b2bceaf47d1deefb2f69e061ec23c04822d4
9540b2bceaf47d1deefb2f69e061ec23c04822d4,9540b2bc,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ifa6b4a936a2b239c8b92cba844a4e648ef1753db
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461597292,1461598505,4ef5ab1c10f50cdd41f6c8fabc035d82c675d67d
b50835e17a514341eaf741cc1971aae72142257b,b50835e1,Migrate saved pages to reading lists.,"Migrate saved pages to reading lists.

Bug: T127710
Change-Id: I90f92853819c58c7b2029b52ffa0a1ccd2d82387
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1460988899,1461459081,4ef5ab1c10f50cdd41f6c8fabc035d82c675d67d
4ef5ab1c10f50cdd41f6c8fabc035d82c675d67d,4ef5ab1c,"Merge ""Don't require JDK v1.7""","Merge ""Don't require JDK v1.7""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461354237,1461354237,"633f706e8e949773a23110db33ac58c7fc61fcbb,338f3f971e34369d33ffcc0fb3732ffc233416ec"
633f706e8e949773a23110db33ac58c7fc61fcbb,633f706e,Add Reading List list DAO and integration,"Add Reading List list DAO and integration

Bug: T127709, T130929
Change-Id: I6b82097b12367fc8c6c03acb2e4556ba64a3a3b1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461276042,1461343844,72a982d32dc2daa31604701d8c256f13fb3e2870
72a982d32dc2daa31604701d8c256f13fb3e2870,72a982d3,"Merge ""Add ""share"" and ""add to list"" to page overflow menu.""","Merge ""Add ""share"" and ""add to list"" to page overflow menu.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461343363,1461343363,"4ad5005ad6b6af53581ec4e0a5e8f45c22d1c719,02be0641d290a30b607b5c66ac98bdc6b9e0123c"
338f3f971e34369d33ffcc0fb3732ffc233416ec,338f3f97,Don't require JDK v1.7,"Don't require JDK v1.7

Remove the forced requirement to use JDK v1.7. This requirement was
added for plugins used by java-mwapi in 23c3bc4. However, java-mwapi is
rarely built and Android N supports v1.8.

Change-Id: I5a94abfe288668067ba72c56b7189d8b880e1e66
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461341473,1461341473,4ad5005ad6b6af53581ec4e0a5e8f45c22d1c719
02be0641d290a30b607b5c66ac98bdc6b9e0123c,02be0641,"Add ""share"" and ""add to list"" to page overflow menu.","Add ""share"" and ""add to list"" to page overflow menu.

Bug: T131463
Change-Id: I5155138a5cad87c660f6f8c2bfd84b14cd213951
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461277442,1461337452,7c7923586c28ae66f9cf2f6d6eda91c4cc38f431
4ad5005ad6b6af53581ec4e0a5e8f45c22d1c719,4ad5005a,Derive authority when no Reading List page lang,"Derive authority when no Reading List page lang

The Reading List page table, like all other tables in the app, does not
impose a nonnull language constraint. Check the language code and use
the appropriate Site constructor.

Change-Id: I56a36c6a5ac4754063bbe9986057033a37f89d6b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461257187,1461276117,7c7923586c28ae66f9cf2f6d6eda91c4cc38f431
7c7923586c28ae66f9cf2f6d6eda91c4cc38f431,7c792358,"Merge ""Upgrade Spoon client to v1.4.0""","Merge ""Upgrade Spoon client to v1.4.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461262234,1461262234,"77548f3098af1a1838b34f547b40318ed506016f,63cc0ac86d7067d8c3b877ce93e4620c89031575"
77548f3098af1a1838b34f547b40318ed506016f,77548f30,"Merge ""Hygiene: replace applicationId with suffix""","Merge ""Hygiene: replace applicationId with suffix""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461262067,1461262067,"eaafda28302ada1e57a264f62fb55715651aece0,523423072b861663d34218e4b6360360b61fd02b"
eaafda28302ada1e57a264f62fb55715651aece0,eaafda28,"Merge ""Fix optional table joins and unmarshalling""","Merge ""Fix optional table joins and unmarshalling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461261795,1461261795,"256ba66a9655e7ff73a4d9e73d865bcd5f80fb41,4a7983652135d3772f0435c696e13dde0ec394c0"
256ba66a9655e7ff73a4d9e73d865bcd5f80fb41,256ba66a,"Merge ""Add Reading List list content provider""","Merge ""Add Reading List list content provider""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461261011,1461261011,"1a411127564c244d7da5c2fab71d2423553529a7,f9c2b132bc8f98015256558f59208ff24347ddbb"
1a411127564c244d7da5c2fab71d2423553529a7,1a411127,"Merge ""Hygiene: Spell ostrich correctly""","Merge ""Hygiene: Spell ostrich correctly""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461257844,1461257844,"5e10b1cc696708e7ad0bcfbb9346c182f5606081,c13fd8c10877717f4d0912172c44bbc12636e423"
5e10b1cc696708e7ad0bcfbb9346c182f5606081,5e10b1cc,"Merge ""Add Reading List list table""","Merge ""Add Reading List list table""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461257509,1461257509,"c445ea3ba2f940028e656816dfb4cf2b40128826,c24aab96bcf39b91f3f232d0a5f816d7a461b2de"
c13fd8c10877717f4d0912172c44bbc12636e423,c13fd8c1,Hygiene: Spell ostrich correctly,"Hygiene: Spell ostrich correctly

Change-Id: I19657493c51928f1c2344a441c16240ac8fc075a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1461257197,1461257197,c445ea3ba2f940028e656816dfb4cf2b40128826
c445ea3ba2f940028e656816dfb4cf2b40128826,c445ea3b,"Merge ""Fix duplicate Search icon for RTL in API <23""","Merge ""Fix duplicate Search icon for RTL in API <23""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1461253890,1461253890,"408a9c487f75e3daa372a90d2d3b89b6c7ce267d,53010ec8a6b9124d2b7bad7c1b2405642e9e7fd9"
4a7983652135d3772f0435c696e13dde0ec394c0,4a798365,Fix optional table joins and unmarshalling,"Fix optional table joins and unmarshalling

Several of the new table joins expect the rows of the right hand table
to be optional. This requires a _left_ join, not just a join.
Additionally, Cursors returned from join queries always have these
columns but they may be empty. Instead of checking for the presence of a
column name to determine whether the joined part exists or not, check
that a field with a nonnull constraint is nonnull.

Change-Id: I3da94a9953f880e03cac4b3ab40f9c8c73b21110
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461192621,1461193196,f9c2b132bc8f98015256558f59208ff24347ddbb
f9c2b132bc8f98015256558f59208ff24347ddbb,f9c2b132,Add Reading List list content provider,"Add Reading List list content provider

Change-Id: I856e49528dd4285d698bd23e87906762cd6324d7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461191146,1461193154,c24aab96bcf39b91f3f232d0a5f816d7a461b2de
c24aab96bcf39b91f3f232d0a5f816d7a461b2de,c24aab96,Add Reading List list table,"Add Reading List list table

Bug: T127707
Change-Id: I72be73e67f703f78667f1cad10799c64bcf7aef8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461190944,1461193144,408a9c487f75e3daa372a90d2d3b89b6c7ce267d
408a9c487f75e3daa372a90d2d3b89b6c7ce267d,408a9c48,Add debug logging to ContentProvider queries,"Add debug logging to ContentProvider queries

Defaults to disabled.

Change-Id: Ibaacbbc7c024a45e991a6f004b8f312ea1d9ff00
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461189557,1461189557,efa527c162abb0947dc99beefc6c83c6ebeba99b
efa527c162abb0947dc99beefc6c83c6ebeba99b,efa527c1,Hygiene: use base class to reference statics,"Hygiene: use base class to reference statics

It is more consistent to reference the statics where they are declared
instead of from a subclass. No functional changes intended.

Change-Id: I3fbb7c9e3c282a2c944de22489eee3e27b4f7108
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461189026,1461189026,718b8f67116eee03867fdae871a32422b372b5bf
53010ec8a6b9124d2b7bad7c1b2405642e9e7fd9,53010ec8,Fix duplicate Search icon for RTL in API <23,"Fix duplicate Search icon for RTL in API <23

There are two places in our code where we use ""drawableStart"" to insert a
drawable at the start of a TextView. The Android guidelines (as well as
the IDE) encourage us to *also* supplement it with ""drawableLeft"" for
compatibility with API <17.

However, when switching to RTL under API <23, this seems to be having the
effect of rendering *both* the ""start"" drawable, as well as the ""left""
drawable... whereas theoretically the ""start"" drawable should override the
""left"" drawable.

Anyway, it looks like it's perfectly acceptable to remove the ""left""
drawable, and suppress the IDE check for it.  On API 17+ this means that
it will use the ""start"" drawable as expected, and on API <17 it still
renders the ""start"" drawable, but always places it on the left, which is
also expected.

Bug: T133169
Change-Id: Ia43adf10165543a9630c086c702005f1f07fc964
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461185740,1461185740,718b8f67116eee03867fdae871a32422b372b5bf
63cc0ac86d7067d8c3b877ce93e4620c89031575,63cc0ac8,Upgrade Spoon client to v1.4.0,"Upgrade Spoon client to v1.4.0

https://github.com/square/spoon/blob/master/CHANGELOG.md

Change-Id: Ib0ef997e6dc6c7690c23b5b2a9dc9cc318ef8070
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461180717,1461180717,718b8f67116eee03867fdae871a32422b372b5bf
718b8f67116eee03867fdae871a32422b372b5bf,718b8f67,Design tweaks for Reading List UI.,"Design tweaks for Reading List UI.

- A few margin and text size adjustments.
- Improved appearance in Dark mode.

Change-Id: Ie681148ca48e81629a84e529c66d6e3eb11c6140
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461164647,1461175426,1bee4c84115c67d6f9440ac8896bce0f4a9ac972
523423072b861663d34218e4b6360360b61fd02b,52342307,Hygiene: replace applicationId with suffix,"Hygiene: replace applicationId with suffix

It seems cleaner to only change the bit that changes across flavors. No
functional changes intended.

Change-Id: I3df9c89d0752a64906f94d88be5c055449b9bf33
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461135357,1461135357,0a0b34738f0708698ac2feae8671efca7bbb6c33
1bee4c84115c67d6f9440ac8896bce0f4a9ac972,1bee4c84,"Vector drawables, part 2.","Vector drawables, part 2.

Replace most other raster icons with vector equivalents, performing a
little cleanup along the way.

The remaining raster icons are either ""custom"" graphics specific to WMF,
or graphics that need to be flipped for RTL. Android vector drawables are
indeed flippable for RTL, but only for API 21+, so we'll need to keep
these for now.

Bug: T128046
Change-Id: Ie510342f0590f19e034ea5410ca58a4757ca3394
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461099397,1461113910,a07afd0201ed993e48e0ce72e90319018e828625
a07afd0201ed993e48e0ce72e90319018e828625,a07afd02,Introduction to vector drawables.,"Introduction to vector drawables.

This is the first of a series of patches that will transition our
Drawables to be vector objects, instead of individual PNGs.

This patch converts the icons in the article menu bar to vectors
(bookmark, share, and navigate).

Bug: T128046
Change-Id: Ic7c4f417b026f6c9c14c6d3a40e652934522f4d0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461077544,1461099868,c5f95368b8dd99619012d0ba80f0caad20c76b80
c5f95368b8dd99619012d0ba80f0caad20c76b80,c5f95368,Simplify tinting of drawables throughout.,"Simplify tinting of drawables throughout.

Remove most instances of programmatically setting the tint on drawables,
and move them to XML.

Change-Id: Ibb62b53bd6ad50301dd4fd41a3824282d21ab61b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461077831,1461090079,0a0b34738f0708698ac2feae8671efca7bbb6c33
0a0b34738f0708698ac2feae8671efca7bbb6c33,0a0b3473,Improve clickability of links in Wiktionary dialog.,"Improve clickability of links in Wiktionary dialog.

The issue was that the Wiktionary dialog expects all links to start with
""/wiki/"", whereas certain links start with ""./"". I expanded the link
parsing to support this case, as well.

In addition, the Wiktionary dialog couldn't handle links that have a
fragment in them. We'll simply ignore fragments for now.

Bug: T132397
Change-Id: I13daccdc26802f435d07b416a46154c55933dcf0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461074521,1461074521,b4f005c3dbc9e1807fefc451f837dfd54507360d
b4f005c3dbc9e1807fefc451f837dfd54507360d,b4f005c3,Fix bug when entering Edit activity without highlighting text.,"Fix bug when entering Edit activity without highlighting text.

Right now, tapping the ""edit"" pencil launches the Edit activity and shows
an error and ""retry"" button overlaid onto the wikitext. This is due to an
exception thrown from the auto-highlighting code, trying to highlight a
null string.

The issue is that the isGraphic() function itself doesn't check for null.

Change-Id: I8bcce5ee8b9a7a9e9a065ac91733b06b5196feac
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461071399,1461071399,af3265fdc8f5dc6cb364f9c5fcac89d9cef772a3
af3265fdc8f5dc6cb364f9c5fcac89d9cef772a3,af3265fd,Update Support Library to 23.3.0.,"Update Support Library to 23.3.0.

No functional changes intended.

Release notes:
http://developer.android.com/tools/support-library/index.html
https://plus.google.com/+AndroidDevelopers/posts/iTDmFiGrVne

Change-Id: I3944bdd1c517b75b3e28c9f50678120f9d3459df
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1461070460,1461071102,4f15dc4feb462fb7067c1eb8ba1da08c239f2d73
4f15dc4feb462fb7067c1eb8ba1da08c239f2d73,4f15dc4f,"Revert ""Flavorize test apk package ID""","Revert ""Flavorize test apk package ID""

This reverts commit 0b40f11962d66ff3affe6a8cd636c97ec99e2827. Android
test Java resource imports are currently flavored but shouldn't be[0].

[0] https://code.google.com/p/android/issues/detail?id=207407

Change-Id: Idca5e2ae5058b4c43c8ff1af08e24383d07636a1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461047784,1461049439,0b40f11962d66ff3affe6a8cd636c97ec99e2827
0b40f11962d66ff3affe6a8cd636c97ec99e2827,0b40f119,Flavorize test apk package ID,"Flavorize test apk package ID

The test apk package ID should be different for each flavor. It wasn't
and this caused the Spoon Gradle plugin to fail in a confusing way when
testing different flavors on the same device. For each package ID, we
now use a distinct test package ID.

Change-Id: I105bc5e4bb4a72deffd68c0887597c1a68555882
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1461004710,1461004710,4306fb17bb1c6e6543cc96bc78b0561b04b00e5e
4306fb17bb1c6e6543cc96bc78b0561b04b00e5e,4306fb17,"Merge ""Eventlogging for Reading Lists.""","Merge ""Eventlogging for Reading Lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460997206,1460997206,"595aefd12046d742cb7ae34801559d11f446af2f,b5292bdd76a8445207c76a8f6ce0404d441a22a9"
b5292bdd76a8445207c76a8f6ce0404d441a22a9,b5292bdd,Eventlogging for Reading Lists.,"Eventlogging for Reading Lists.

https://meta.wikimedia.org/wiki/Schema:MobileWikiAppReadingLists

This is still intended to coexist with saved pages, until the final patch
that tears them out.

Bug: T132735
Change-Id: I58b5cfdb21c8de66c339182e663b24d5712f8da3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1460565075,1460995579,fabdb01b155cc47516a9cff3f00cdf6db46f0467
595aefd12046d742cb7ae34801559d11f446af2f,595aefd1,"Merge ""Add filename to Reading List page disk table""","Merge ""Add filename to Reading List page disk table""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460995498,1460995498,"2499252c946d045af662d9c28bc37a49ccef996c,d046614fca11c87ca9db3f48ac7f2ec66e7d9138"
2499252c946d045af662d9c28bc37a49ccef996c,2499252c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id7003e264c6729367ac4f0cc8e784754c92a847f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1460989612,1460993440,fabdb01b155cc47516a9cff3f00cdf6db46f0467
d046614fca11c87ca9db3f48ac7f2ec66e7d9138,d046614f,Add filename to Reading List page disk table,"Add filename to Reading List page disk table

Add a filename column to the Reading List page disk database table. This
column is necessary to remember where files were stored.

The previous database schema has not been published through official
channels yet so the effort to upgrade from the previous to the new
has not been made. If you have installed a dev build with the current
schema, this change will cause a crash or undefined behavior. Please
clear your data.

Change-Id: I0e2c72e1b1d632b6be75bbd870d1b03ebcb690a7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1460743006,1460754164,fabdb01b155cc47516a9cff3f00cdf6db46f0467
fabdb01b155cc47516a9cff3f00cdf6db46f0467,fabdb01b,"Merge ""[Hackathon] ""Edit here"" context button.""","Merge ""[Hackathon] ""Edit here"" context button.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460666798,1460666798,"1b246c217e81b1e436efa59ff03c1fa11ce5abea,f545900f6605626ccb7fc03cce96fec16a133c0a"
f545900f6605626ccb7fc03cce96fec16a133c0a,f545900f,"[Hackathon] ""Edit here"" context button.","[Hackathon] ""Edit here"" context button.

Bug: T119887
Change-Id: I54a2c68741851d81f4aa5ac25f7f91d4be309c31
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1459497993,1460665280,fe68ac27e65bf196b3a0aa56dc09570d90960b12
1b246c217e81b1e436efa59ff03c1fa11ce5abea,1b246c21,Hygiene: remove unused code,"Hygiene: remove unused code

This integration is too big. Remove nice to have but unnecessary code so
that we can focus on only what's functionally needed.

Change-Id: I83efd7783306636acbe44ce94039b286a81d5255
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1460481199,1460665035,0ca5470a2c102f19fe4a97e3c04f02f295e1b782
0ca5470a2c102f19fe4a97e3c04f02f295e1b782,0ca5470a,Hygiene: fix a couple overrides,"Hygiene: fix a couple overrides

Change-Id: Idda75ce8edfe003156242a9c566bd9dbe4669752
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1460480183,1460664528,5de896314c6bbe107f895e0fd306513305ee1caf
5de896314c6bbe107f895e0fd306513305ee1caf,5de89631,"Separate Reading List ""list"" and ""page"" interfaces","Separate Reading List ""list"" and ""page"" interfaces

Change-Id: I53790674dc421682f121c8c264c68aa4d33adee4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1460479650,1460663484,bba41f0361e5528176d9c2864b40ccc0c9381ece
bba41f0361e5528176d9c2864b40ccc0c9381ece,bba41f03,"Merge ""Add MW gallery styles""","Merge ""Add MW gallery styles""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460663446,1460663446,"d1fea7cc01ff8240aa90fdae63a2319a3695ce2c,8438dc085acedb028b6a4c1aafc73850e0d7a3f3"
d1fea7cc01ff8240aa90fdae63a2319a3695ce2c,d1fea7cc,"Merge ""Onboarding for Reading Lists.""","Merge ""Onboarding for Reading Lists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460662920,1460662920,"3709f523c5b78d9d4db3ef4f3c610b89e8672650,e8a8c2bf5619f1782e35a74fbb3f62c7f5c01d94"
e8a8c2bf5619f1782e35a74fbb3f62c7f5c01d94,e8a8c2bf,Onboarding for Reading Lists.,"Onboarding for Reading Lists.

Bug: T129606
Change-Id: Ia492483e69ef47b79e6372f05f53d5fca158dfaf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1458852919,1460662500,fdd4588cdc1b0f0d2d2d39431223a72148253068
3709f523c5b78d9d4db3ef4f3c610b89e8672650,3709f523,"Merge ""User experience for Reading Lists, part 2.""","Merge ""User experience for Reading Lists, part 2.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460662053,1460662053,"8781aa67d48d7f4c67a2fae51378fa57c941e335,fdd4588cdc1b0f0d2d2d39431223a72148253068"
8781aa67d48d7f4c67a2fae51378fa57c941e335,8781aa67,"Merge ""User experience for Reading Lists, part 1.""","Merge ""User experience for Reading Lists, part 1.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460661632,1460661632,"7ac0b472cdd2e141fd420d7b588b433277f6cd72,a6c4a2e7d7a5a077c583187d42cf7609ae7ce66a"
fdd4588cdc1b0f0d2d2d39431223a72148253068,fdd4588c,"User experience for Reading Lists, part 2.","User experience for Reading Lists, part 2.

- Integrate ""add to list"" into context menus and link preview menu.

The menu items still coexist with the existing ""Save Page"" items. These
will be removed in the final patch that seals the fate of saved pages.

Change-Id: I04147d3b3f5939d7fb4d4b02a0a8d1899f23b98f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1458847834,1460661031,a6c4a2e7d7a5a077c583187d42cf7609ae7ce66a
7ac0b472cdd2e141fd420d7b588b433277f6cd72,7ac0b472,"Merge ""Add Reading List page tables and DAO""","Merge ""Add Reading List page tables and DAO""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460659748,1460659748,"fe68ac27e65bf196b3a0aa56dc09570d90960b12,e84840aefffff605bdabcf476966bda2152f81cd"
a6c4a2e7d7a5a077c583187d42cf7609ae7ce66a,a6c4a2e7,"User experience for Reading Lists, part 1.","User experience for Reading Lists, part 1.

- Implements the UI for viewing and managing Reading Lists, accessible
from the Nav menu.

- Implements the UI for adding an article to a reading list, by
pressing the ""bookmark"" icon below the lead image.

The business logic of dealing with the actual collection of reading lists
is handled by an interface called ReadingListData. In this patch, the
interface is implemented by a static hard-coded list. In the final
implementation, it should be handled by actual DB interactions.
Additionally, in the final implementation, certain elements will probably
need to be converted to asynchronous operation.

Note: the ""Reading Lists"" nav menu item will coexist with the ""Saved
Pages"" item, and is feature-flagged for non-production builds. Saved Pages
will be completely removed when reading lists are fully implemented.

Bug: T127711
Bug: T129590
Change-Id: I1d8d2fd59c944522781c3bd606bacc7b49ecd820
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1458247164,1460659298,e84840aefffff605bdabcf476966bda2152f81cd
fe68ac27e65bf196b3a0aa56dc09570d90960b12,fe68ac27,"Merge ""Add Apache Commons Lang v3.4 and CsvColumn""","Merge ""Add Apache Commons Lang v3.4 and CsvColumn""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460580010,1460580010,"78a42b4cab60fcce9b9fe552abb5ad350e7cdc80,ebd227177f96a218c8ffbf83ec6b684c5b474b7c"
78a42b4cab60fcce9b9fe552abb5ad350e7cdc80,78a42b4c,"Merge ""scripts/convert-icons.py clean-up""","Merge ""scripts/convert-icons.py clean-up""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460572110,1460572110,"070a33c4d372be15a0a5e4d404f21c54c36676f0,f7f8a4e24c5c2e10c30331d137302e160b5f2101"
e84840aefffff605bdabcf476966bda2152f81cd,e84840ae,Add Reading List page tables and DAO,"Add Reading List page tables and DAO

Bug: T127708, T127704

Change-Id: Ia9cbfb5d872e63818f3afcdcc944a3af19d48c74
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1460222200,1460565099,ebd227177f96a218c8ffbf83ec6b684c5b474b7c
ebd227177f96a218c8ffbf83ec6b684c5b474b7c,ebd22717,Add Apache Commons Lang v3.4 and CsvColumn,"Add Apache Commons Lang v3.4 and CsvColumn

• Add the Commons Lang library for CSV parsing. With this commit, the
  production apk increases in size by ~21 KiB, from 19 604 432 B to
  19 625 967 B.

• Add a CSV database column which abstracts the parsing needed to and
  from CSV strings. Databases tables should prefer to normalize their
  data but our database layers are too rigid to accomplish this well
  without a signficant refactor. We will have to iterate this
  shortcoming away another day.

Change-Id: I5b071c1abbf734c6d4b33038d0faac68932f01dc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1460563574,1460564469,070a33c4d372be15a0a5e4d404f21c54c36676f0
070a33c4d372be15a0a5e4d404f21c54c36676f0,070a33c4,Hygiene: replace method with clearer equivalent,"Hygiene: replace method with clearer equivalent

Replace call to SQLiteDatabase.replaceOrThrow(...,
SQLiteDatabase.CONFLICT_REPLACE) with replaceOrThrow(). These statements
are functionally equivalent.

Change-Id: I84da5eb598984b3cd7e899c9ad10eff74c4d1ea3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1460171044,1460496463,633a502cfe00b337c3a54e50813d5d461e8cbc61
633a502cfe00b337c3a54e50813d5d461e8cbc61,633a502c,Break user option HTTP status into separate table,"Break user option HTTP status into separate table

Change-Id: I6732ac7379e2520bb5b3771141d1216b72385150
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459874947,1460496463,1243e978f4f888f655b7eb11a3ba3124d176f449
1243e978f4f888f655b7eb11a3ba3124d176f449,1243e978,Always log SaneAsyncTask Exceptions,"Always log SaneAsyncTask Exceptions

The SaneAsyncTask.onCatch() default implementation makes it too easy to
silently consume errors. Whether an exception ocurrs in the background
or in onFinish(), always print the error.

Change-Id: I2c02792f78324bbd28b2b67cf871c18da1a69fb5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1460496241,1460496241,d86393d23759580a90a9f8c2e56068eeaf317d9b
d86393d23759580a90a9f8c2e56068eeaf317d9b,d86393d2,"Merge ""Hygiene: mark ApiUtil as deprecated""","Merge ""Hygiene: mark ApiUtil as deprecated""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460478651,1460478651,"175d4c7b5e1dd43c011712548983efb9f04415b4,5f608a1ced927320b099c30db11ec696db82ff23"
f7f8a4e24c5c2e10c30331d137302e160b5f2101,f7f8a4e2,scripts/convert-icons.py clean-up,"scripts/convert-icons.py clean-up

Change-Id: I290f233a0bb9cc49d793f63f3401adef87dbb892
",,,,Marco Ippolito,maroloccio@gmail.com,Marco Ippolito,maroloccio@gmail.com,1460440222,1460440222,175d4c7b5e1dd43c011712548983efb9f04415b4
8438dc085acedb028b6a4c1aafc73850e0d7a3f3,8438dc08,Add MW gallery styles,"Add MW gallery styles

This adds a gallery stylesheet module that improves presentation of
in-article image galleries, and removes some special-case CSS in
MobileApp that the gallery styles from MediaWiki render unnecessary.

To see the difference compare the images in the article 'Picasso's Blue
Period' before and after.

Depends-On: Ibbcd5abb94ce58b9a45113d3b488facac3efe2fa
Change-Id: Id043c42d8191ec8a548e2e353b3cf728321dac32
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1460153589,1460398695,f17f389915a460bfa82e4a28213b1504e2fe233d
175d4c7b5e1dd43c011712548983efb9f04415b4,175d4c7b,"Merge ""Fix launching URLs in external browser for API 23.""","Merge ""Fix launching URLs in external browser for API 23.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460393970,1460393970,"f17f389915a460bfa82e4a28213b1504e2fe233d,3a4395aa1ff8ad081bd2ccd6345d0a1f053a2446"
f17f389915a460bfa82e4a28213b1504e2fe233d,f17f3899,"Merge ""Hygiene: add parameters to raw types""","Merge ""Hygiene: add parameters to raw types""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460386242,1460386242,"e3b132729b8a7d8a18c16c0433cedfe785ffa1fd,869349ff7a443c65531226e49f582dedb35f9e7c"
e3b132729b8a7d8a18c16c0433cedfe785ffa1fd,e3b13272,"Merge ""Clean up CursorLoader on Fragment destruction""","Merge ""Clean up CursorLoader on Fragment destruction""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460384784,1460384784,"aaabbe764147e900e235a58c39094095a42e2d07,328b5eaa400b637956a7f2ef93e5605382c90629"
aaabbe764147e900e235a58c39094095a42e2d07,aaabbe76,"Merge ""Update Mapbox to 4.0.0""","Merge ""Update Mapbox to 4.0.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460384339,1460384339,"2d50751a0d9b508545197682a09720b0275114bc,b3970efbc56ec02f66be540b90503d04e3468240"
2d50751a0d9b508545197682a09720b0275114bc,2d50751a,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I7debbc7a8f818e0db81afdcb1d8c87029b82b394
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1460345474,1460348240,d4a81d6bd8bff5a974162e20b0b6ae4650e76c54
869349ff7a443c65531226e49f582dedb35f9e7c,869349ff,Hygiene: add parameters to raw types,"Hygiene: add parameters to raw types

Change-Id: If5c595e6c30dbe4ce32aae4e0cc8466f9d20a1d7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1460221191,1460221191,d4a81d6bd8bff5a974162e20b0b6ae4650e76c54
d4a81d6bd8bff5a974162e20b0b6ae4650e76c54,d4a81d6b,Replace erroneously removed cite styles,"Replace erroneously removed cite styles

Generating these requires the 'cite' role in mw-vagrant, which I didn't
have before (leading to an error generating the CSS).

Thus, I removed the reference from the CSS generation script.

This puts back the needed styles.  I'll update the mobileapp role in a
follow-up patch to require the cite role.

Bug: T132253
Change-Id: I7a9c8ef804301bc81932886a2aec74fe96ba3f84
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1460217593,1460219373,9d05c5cf9b372d2490af16515ea4237de0d2bbfa
328b5eaa400b637956a7f2ef93e5605382c90629,328b5eaa,Clean up CursorLoader on Fragment destruction,"Clean up CursorLoader on Fragment destruction

Change-Id: I20e8997dc5353434675200b72352dd582226041b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1460172142,1460172142,9d05c5cf9b372d2490af16515ea4237de0d2bbfa
5f608a1ced927320b099c30db11ec696db82ff23,5f608a1c,Hygiene: mark ApiUtil as deprecated,"Hygiene: mark ApiUtil as deprecated

Change-Id: Icd5ffbd7db7d7518bdbe981cc307a6264125aca5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1460171932,1460171932,9d05c5cf9b372d2490af16515ea4237de0d2bbfa
3a4395aa1ff8ad081bd2ccd6345d0a1f053a2446,3a4395aa,Fix launching URLs in external browser for API 23.,"Fix launching URLs in external browser for API 23.

In API 23, once an app is set as the ""default"" for handing a certain Uri,
then the app will be the only one returned by the queryIntentActivities()
function, which breaks the expected behavior of this function in previous
APIs.

We fix this issue by explicitly setting a temporary Uri when querying
intent activities, to ensure that we get the default system browser
activities.

Bug: T132192
Change-Id: Ic7f2deccf6f327bf69bd240d9ceb8356cdd959c4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1460141998,1460142365,9d05c5cf9b372d2490af16515ea4237de0d2bbfa
9d05c5cf9b372d2490af16515ea4237de0d2bbfa,9d05c5cf,Upgrade Gradle plugin to 2.0,"Upgrade Gradle plugin to 2.0

Implies upgrading to Android Studio 2.0.

Change-Id: I0358ecc93f53ad026aaed6bd1513f815658f4f93
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1460129815,1460129815,393c1ebc67d20c8ef2992e5b24b229e197f04973
393c1ebc67d20c8ef2992e5b24b229e197f04973,393c1ebc,"Merge ""Improve documentation in TitleSearchTask""","Merge ""Improve documentation in TitleSearchTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460123055,1460123055,"38e5d84b548fd7e12afc41e3f617a1b9432a45b0,ebe598b6ae53e5136d757e90c36f8e2042856fd9"
38e5d84b548fd7e12afc41e3f617a1b9432a45b0,38e5d84b,"Merge ""Narrow grunt jshint scope to js development folders""","Merge ""Narrow grunt jshint scope to js development folders""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460122735,1460122735,"3d59241ed6e377e9941566ec098b7a2603c9907d,6f1e2fd5748f81a58cdc6b7b1790f2f3d9283229"
3d59241ed6e377e9941566ec098b7a2603c9907d,3d59241e,"Merge ""Update bundled CSS""","Merge ""Update bundled CSS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460122707,1460122707,"99757bdbcb7d3215f8f23b2e418c66fc584c8fff,ab8e9fca45a3639222a3794b5f5c8d14f2e7be79"
ebe598b6ae53e5136d757e90c36f8e2042856fd9,ebe598b6,Improve documentation in TitleSearchTask,"Improve documentation in TitleSearchTask

This patch slightly improves the documentation that handles an edge-case of a
redirect which points to a particular section of an article. The documentation
in that code right now doesn't really explain what's happening, so if you're
unfamiliar with the API then it's very confusing.

Change-Id: If8b219bdaf965d1277564a8ec64d6a87a3ab5e5b
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1460055678,1460058259,99757bdbcb7d3215f8f23b2e418c66fc584c8fff
6f1e2fd5748f81a58cdc6b7b1790f2f3d9283229,6f1e2fd5,Narrow grunt jshint scope to js development folders,"Narrow grunt jshint scope to js development folders

Currently, when running grunt, the jshint step chokes on the Grunt-
generated JavaScript in app/src/main/assets.  The check should be
confined to the folders where we actually do our JS development.

Change-Id: I8939e1b9e3b53eb084fdac18aee858e9c87805df
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1459954634,1460051151,ab8e9fca45a3639222a3794b5f5c8d14f2e7be79
ab8e9fca45a3639222a3794b5f5c8d14f2e7be79,ab8e9fca,Update bundled CSS,"Update bundled CSS

Updates bundled CSS with the latest from MobileFrontend, via
scripts/make-css-assets.bash

Change-Id: Ic6bcd344566c99b91b6a644e92cc16646fd6f950
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1459977804,1460050724,dc08f3020b0e53fe33299674edd2226b61b98fd1
99757bdbcb7d3215f8f23b2e418c66fc584c8fff,99757bdb,Hygiene: refactor history screen's LoaderCallbacks,"Hygiene: refactor history screen's LoaderCallbacks

Refactor the HistoryFragment's LoaderCallbacks to subclass
CursorAdapterLoaderCallback.

Change-Id: I4e1bb029770ce2b2c3218124b82c95956b141747
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459746067,1460041804,771204155543cd3e1ff1a8d784ac0cb4cc9da8f3
771204155543cd3e1ff1a8d784ac0cb4cc9da8f3,77120415,Hygiene: move constants from model to utility,"Hygiene: move constants from model to utility

Change-Id: Ia37baf0bec3edec46017ec3f96479992907e3e4d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459734430,1460041804,af7bac87399fbc358a6943f623c2192033df8931
af7bac87399fbc358a6943f623c2192033df8931,af7bac87,Add namespace and database column,"Add namespace and database column

Change-Id: I7836fc9ce9a0ab12104ad45ade7f714b67b82d06
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1458242124,1460039561,2334447e9f612b69ab51e4205d68fd2534369251
b3970efbc56ec02f66be540b90503d04e3468240,b3970efb,Update Mapbox to 4.0.0,"Update Mapbox to 4.0.0

• Lots of API changes[0].
• I believe I've disabled Telemetry.

[0] https://github.com/mapbox/mapbox-gl-native/blob/master/platform/android/CHANGELOG.md#400

Bug: T126102
Change-Id: I5ab68630a716455e2798291bd48c9708b72d9814
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1455645409,1460039130,0bdc388e5b31cccc5f5ef43e69eaa97ff3d0a793
2334447e9f612b69ab51e4205d68fd2534369251,2334447e,Create the first db table and upgrade,"Create the first db table and upgrade

When creating or upgrading the database and a table does not exist,
create the initial table version and upgrade it instead of
short circuiting to creating the last version. Database upgrades should
always follow the same path.

See also: af070d5

Change-Id: Ia8f132ab1809a781152716f5bd607de8b2515482
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1459731606,1460038824,0bdc388e5b31cccc5f5ef43e69eaa97ff3d0a793
0bdc388e5b31cccc5f5ef43e69eaa97ff3d0a793,0bdc388e,Hygiene: remove dead code,"Hygiene: remove dead code

• Remove dead code.
• Remedy a couple raw types.
• Add a couple Android resource annotations.
• Update a tools:context reference.

Change-Id: I34c8b9394915a700e2ef35f26b3b89fe75c0d63c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1459645771,1460038032,e537feb49732ef828c44a8300088dea4dfe384f7
e537feb49732ef828c44a8300088dea4dfe384f7,e537feb4,Close HTTP connection when downloading saved pages,"Close HTTP connection when downloading saved pages

Close the HTTP client connection after downloading an image. This fixes
the following scenario:

  1 Tap random until a page with a lead image is shown.
  2 Tap save.
  3 Quickly tap random. The following message is logged:

    OkHttpClient W A connection to https://upload.wikimedia.org/ was leaked. Did you forget to close a response body?

Change-Id: I300fc1e6d278356d5c28e0152a65fc69a3a8075d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1459726220,1460037430,ba38dab8ca008f44df2542cd3b3c1638a540a5a0
ba38dab8ca008f44df2542cd3b3c1638a540a5a0,ba38dab8,"Merge ""Update the Python interpreter to 2 for old scripts""","Merge ""Update the Python interpreter to 2 for old scripts""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1460036055,1460036055,"dc08f3020b0e53fe33299674edd2226b61b98fd1,5d5c9fad5ed79fd3335cbfeed09dc50759e73c8c"
dc08f3020b0e53fe33299674edd2226b61b98fd1,dc08f302,Remove old content provider,"Remove old content provider

Change-Id: I61bde1d07c8a283b9aee3fc6316351322818e90b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459726982,1459959871,43eac584b03cb247251a3be3615609047879116c
43eac584b03cb247251a3be3615609047879116c,43eac584,Consolidate user option ContentProvider,"Consolidate user option ContentProvider

Change-Id: I3712ea14c1bce0c6f32c52c7453d6bed67e62420
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459723320,1459959871,7100baf590cf820ae540e01f90f9112cd95feb1b
7100baf590cf820ae540e01f90f9112cd95feb1b,7100baf5,Consolidate saved page ContentProvider,"Consolidate saved page ContentProvider

Change-Id: I209e29666c7611217929f833ddf70d28283be94e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459707574,1459959871,b941ec65223ed293f930fe85023761f0ec2e8151
b941ec65223ed293f930fe85023761f0ec2e8151,b941ec65,Consolidate recent search ContentProvider,"Consolidate recent search ContentProvider

Change-Id: I01e418af1676460953862255d7eb821a5840909e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459644206,1459959871,815f5347c9ac34717ec457e5cec980b4679a1cfc
815f5347c9ac34717ec457e5cec980b4679a1cfc,815f5347,Consolidate edit summary ContentProvider,"Consolidate edit summary ContentProvider

Change-Id: I890120ad903cffea0633f8b86f054e761040fab3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459643068,1459959871,1da78fad6e0ecb1186235edd5cba999afa90dc9f
1da78fad6e0ecb1186235edd5cba999afa90dc9f,1da78fad,Consolidate page image ContentProvider,"Consolidate page image ContentProvider

Change-Id: I1b5939294edd93fd1386f95bcc4cdaf47ae5a09d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459640687,1459959871,c1e35b27b271f950f15abb655e0dd813833b6367
c1e35b27b271f950f15abb655e0dd813833b6367,c1e35b27,Consolidate page history ContentProvider,"Consolidate page history ContentProvider

Change-Id: Iaffc8fa8456312e1db6a357cf7ccf36275439744
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459554505,1459959871,73ebd8a06ce7a60565b6097f8cbf3cf5caef3a55
73ebd8a06ce7a60565b6097f8cbf3cf5caef3a55,73ebd8a0,"Merge ""Add empty app content provider""","Merge ""Add empty app content provider""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1459959651,1459959651,"bea82480dd79619c982bcfc076c04e9c3b350066,6db220fa9cded67469de77be3dc6974cff1ae870"
6db220fa9cded67469de77be3dc6974cff1ae870,6db220fa,Add empty app content provider,"Add empty app content provider

Create an empty ContentProvider to consolidate all other providers into.
The current implementation is unnecessarily sprawling and will benefit
from reduction. This patch just makes an empty ContentProvider skeleton.
Subsequent patches will merge all preexisting providers into the new app
provider.

Change-Id: I6fcdd27395eb57619b830c8d68cea26e08293c93
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459468532,1459923965,c5ff657f3bd3003ff3b53232739a685c6b79d092
bea82480dd79619c982bcfc076c04e9c3b350066,bea82480,"Merge ""Hygiene: replace ... (three dots) with … (ellipsis)""","Merge ""Hygiene: replace ... (three dots) with … (ellipsis)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1459892226,1459892226,"42fb79649dfcd5b0a9d07ce3f57118da71168252,a4a4113cfeddf0d094d79a29921f3b5c29a44137"
42fb79649dfcd5b0a9d07ce3f57118da71168252,42fb7964,"Merge ""Hygiene: add missing generic type""","Merge ""Hygiene: add missing generic type""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1459881544,1459881544,"605fa357086a364e18a25f4983da9a947ef10362,76025c12956416af1c60d4d4b66cb4082b7ccfaa"
a4a4113cfeddf0d094d79a29921f3b5c29a44137,a4a4113c,Hygiene: replace ... (three dots) with … (ellipsis),"Hygiene: replace ... (three dots) with … (ellipsis)

Change-Id: I5d09b4760056b530ca4b63c6599cb2f99b011a42
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459881036,1459881036,ca28bf548876f208a7a1df8825b75832ff03d1c4
605fa357086a364e18a25f4983da9a947ef10362,605fa357,"Merge ""Make getMobileUri() return the mobile URI""","Merge ""Make getMobileUri() return the mobile URI""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1459880527,1459880527,"ca28bf548876f208a7a1df8825b75832ff03d1c4,6d1eec2dfb95a9a6f9ad23e22fc525495df608f6"
76025c12956416af1c60d4d4b66cb4082b7ccfaa,76025c12,Hygiene: add missing generic type,"Hygiene: add missing generic type

Change-Id: Id2a338f185cd44cf6cc2f9621def1596df839ec8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459880511,1459880511,ca28bf548876f208a7a1df8825b75832ff03d1c4
6d1eec2dfb95a9a6f9ad23e22fc525495df608f6,6d1eec2d,Make getMobileUri() return the mobile URI,"Make getMobileUri() return the mobile URI

Sometimes we actually want the mobile URI, for instance when sending to
a browser to view externally.  So this updages getMobileUri() to return
it rather than duplicate getCanonicalUri().

Bug: T129266
Change-Id: I8d306301d29fb42bd4d18e135254160245cc9f7f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1459800521,1459877747,c5ff657f3bd3003ff3b53232739a685c6b79d092
ca28bf548876f208a7a1df8825b75832ff03d1c4,ca28bf54,"Merge ""Hygiene: remove unnecessary Checkstyle suppression""","Merge ""Hygiene: remove unnecessary Checkstyle suppression""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1459876133,1459876133,"87a7695a085be7673a4d970c0d7f0566c2fc7634,0960c0d477d84187f3b2b64af2344f2778c17785"
0960c0d477d84187f3b2b64af2344f2778c17785,0960c0d4,Hygiene: remove unnecessary Checkstyle suppression,"Hygiene: remove unnecessary Checkstyle suppression

Change-Id: I007fa5b8abce72e4cea0ac7d4416301e9919c8a6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459554577,1459870687,c5ff657f3bd3003ff3b53232739a685c6b79d092
87a7695a085be7673a4d970c0d7f0566c2fc7634,87a7695a,"Merge ""[Hackathon] Improve transition between gallery images.""","Merge ""[Hackathon] Improve transition between gallery images.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1459785007,1459785007,"5c71a625e71fda3db9d8098742c4634d8a08890c,a6a1c6306523471b021a3d7c078c76e48d78d5e1"
5c71a625e71fda3db9d8098742c4634d8a08890c,5c71a625,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ic381cddbf40fc4741b5a3d2b9a0d21670b7d15f9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459782844,1459784629,c5ff657f3bd3003ff3b53232739a685c6b79d092
a6a1c6306523471b021a3d7c078c76e48d78d5e1,a6a1c630,[Hackathon] Improve transition between gallery images.,"[Hackathon] Improve transition between gallery images.

Change-Id: I2edb2195e507d20b31e49637dc19bc751aaee40f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1459588926,1459686872,c5ff657f3bd3003ff3b53232739a685c6b79d092
c5ff657f3bd3003ff3b53232739a685c6b79d092,c5ff657f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I19f634d68d58af235491d36f1afa2a836f2ea177
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1459178862,1459183771,298762123ee1732b2ebdb037e45917d273b74742
298762123ee1732b2ebdb037e45917d273b74742,29876212,Transition Wiktionary dialog to a bottom sheet.,"Transition Wiktionary dialog to a bottom sheet.

This introduces ExtendedBottomSheetDialogFragment, which provides
functionality for optionally disabling dimming of the dialog background,
as well as setting a custom maximum width of the dialog, and whether to
start the dialog fully expanded.

Also a bit of renaming of dimens, to reflect bottom sheet nomenclature.

Change-Id: Ic1a58ff8af65f9ca8be3bd957f23871b680465f4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1458156357,1458849655,ccc2873e7440ef3a65869c9d09233e34b042eec7
ccc2873e7440ef3a65869c9d09233e34b042eec7,ccc2873e,"Merge ""Fail all outstanding sync transactions on error""","Merge ""Fail all outstanding sync transactions on error""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458849599,1458849599,"f36ec8e15a2d47d2dc706b8f84abb45534269eba,9e64be136289f38ca9396f9a39a6054e076cef27"
f36ec8e15a2d47d2dc706b8f84abb45534269eba,f36ec8e1,Hygiene: add missing @Override annotations,"Hygiene: add missing @Override annotations

Change-Id: I8a909c5a9c579cb1c8da3598d5c14883d7fb4ee1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458846576,1458846576,0e242fe86c00f325aa7995e5afc4902af6a774e1
9e64be136289f38ca9396f9a39a6054e076cef27,9e64be13,Fail all outstanding sync transactions on error,"Fail all outstanding sync transactions on error

• Reset outstanding sync transactions on error. Previously, only the
  the active transaction was closed.

• Add helper method for the special case of failing transactions.
  Previously, the client called resetTransaction().

• Fix typo in interface method.

Change-Id: I0fe21b82b055bfda3d8be46c5deb9f08b368a1df
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458845483,1458845483,0e242fe86c00f325aa7995e5afc4902af6a774e1
0e242fe86c00f325aa7995e5afc4902af6a774e1,0e242fe8,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ib47412e11f970677b4851f47cf58f82a144b04ff
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458661138,1458661218,3b78b6e076d904fa674328917b9e4085bbce7b5b
3b78b6e076d904fa674328917b9e4085bbce7b5b,3b78b6e0,"Merge ""Groundwork for bottom sheets, part 2.""","Merge ""Groundwork for bottom sheets, part 2.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458324188,1458324188,"eb6a78b35fc0a51ff0cdb1af2c3f357200f3a637,9edbfdd176235549215d9648c6268c49f3bf0b20"
9edbfdd176235549215d9648c6268c49f3bf0b20,9edbfdd1,"Groundwork for bottom sheets, part 2.","Groundwork for bottom sheets, part 2.

- Expanded our ExclusiveBottomSheetHandler to be able to support regular
  Dialogs, not just DialogFragments (although Dialogs won't be saved in
  the activity's savedInstanceState, but that's alright).

- Made a simple descendant of BottomSheetDialog that automatically
  disables dimming of the background when it's shown, which we need for
  some of our bottom sheets.

- Transitioned the ReferenceDialog, PageInfoDialog, and
  ShareDialog to be BottomSheetDialogs, some without dimming.

- Goodbye, old ""BottomDialog"" class.

Change-Id: I444f42fa021b16b2b1112173d4934eb10b08f57d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1458153236,1458320931,f159a0beea4ae6decd6e1dec33ecbd2b51161317
eb6a78b35fc0a51ff0cdb1af2c3f357200f3a637,eb6a78b3,Hygiene: remove FixedViewPager workaround,"Hygiene: remove FixedViewPager workaround

We don't think the bug[0] this workaround hid is occurring any more,
probably due to Fresco. Remove the workaround.

[0] https://github.com/chrisbanes/PhotoView/issues/206

Change-Id: I798b80eff5c203d59769810fafefef45d0249049
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458318696,1458318696,65d580730e4c8946357baa6dafc86c39af56e3a2
65d580730e4c8946357baa6dafc86c39af56e3a2,65d58073,"Merge ""Consolidate long-press handlers for button tooltips.""","Merge ""Consolidate long-press handlers for button tooltips.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458314914,1458314914,"f159a0beea4ae6decd6e1dec33ecbd2b51161317,3c23bcdd58c753064dcfc41adfd9131fbf50955f"
f159a0beea4ae6decd6e1dec33ecbd2b51161317,f159a0be,"Merge ""Hygiene: add DbUtil.namesCsv""","Merge ""Hygiene: add DbUtil.namesCsv""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458313037,1458313037,"f2f9652f2c94ede19730dc040e7a1851c075b6bc,c09c70255727ae5d4bc1be7a9e6e5957f1a2730a"
f2f9652f2c94ede19730dc040e7a1851c075b6bc,f2f9652f,"Merge ""Hygiene: add AsyncColumns.val() for unmarshalling""","Merge ""Hygiene: add AsyncColumns.val() for unmarshalling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458312772,1458312772,"631cdb31a12cdc2f47db7096008b4c4d47b1ebab,4a0a2ed9eab9957f1d160996690a72607223be2b"
631cdb31a12cdc2f47db7096008b4c4d47b1ebab,631cdb31,"Merge ""Upgrade Gson to v2.6.2""","Merge ""Upgrade Gson to v2.6.2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458312389,1458312389,"2099b0f9c2ba497cac4957e008eda60bc95653bb,de8300761bd242311639bd813ed370d850f1917d"
2099b0f9c2ba497cac4957e008eda60bc95653bb,2099b0f9,"Merge ""Upgrade Spoon client to v1.3.2""","Merge ""Upgrade Spoon client to v1.3.2""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458312110,1458312110,"d7d78811bc8dbbcb95884ef407bd5cb0529ff631,7eb3266d02468b225f21ae719ccb338aff519764"
3c23bcdd58c753064dcfc41adfd9131fbf50955f,3c23bcdd,Consolidate long-press handlers for button tooltips.,"Consolidate long-press handlers for button tooltips.

Also add a tooltip to the Language button in the search bar.
(Therefore not precisely a ""hygiene"" patch, but no other functional
changes intended.)

Change-Id: I16698d3cb795e0ad165b6270be5bc99bf459136e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1458262765,1458311189,c0802284217b1dce42b729bdfd3e0dc2499f6d08
7eb3266d02468b225f21ae719ccb338aff519764,7eb3266d,Upgrade Spoon client to v1.3.2,"Upgrade Spoon client to v1.3.2

https://github.com/square/spoon/blob/master/CHANGELOG.md#version-132-2016-02-09

Change-Id: I8d9160022391435fc055171b2eafd0b8dcff9811
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458263520,1458263520,c0802284217b1dce42b729bdfd3e0dc2499f6d08
de8300761bd242311639bd813ed370d850f1917d,de830076,Upgrade Gson to v2.6.2,"Upgrade Gson to v2.6.2

https://github.com/google/gson/blob/master/CHANGELOG.md#version-262

Change-Id: I91b244c4f986d3cc20aece295fbc37204bf8b42d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458260934,1458260934,c0802284217b1dce42b729bdfd3e0dc2499f6d08
d7d78811bc8dbbcb95884ef407bd5cb0529ff631,d7d78811,Upgrade Gradle to v2.12,"Upgrade Gradle to v2.12

https://docs.gradle.org/2.12/release-notes

Change-Id: I1e17e6b3c8be71a92789f0102af9e73e693cc6ed
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458256606,1458257556,c0802284217b1dce42b729bdfd3e0dc2499f6d08
c0802284217b1dce42b729bdfd3e0dc2499f6d08,c0802284,"Merge ""Add ability to specify device to pullfiles.bash""","Merge ""Add ability to specify device to pullfiles.bash""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458256383,1458256383,"7b72295a884d466e83dcfb7731dbb0b0dcb5d614,42f44defed1bc094a3064fa33b59b030c0c3c1ec"
5d5c9fad5ed79fd3335cbfeed09dc50759e73c8c,5d5c9fad,Update the Python interpreter to 2 for old scripts,"Update the Python interpreter to 2 for old scripts

Update the Python version for the last of the old scripts.

Change-Id: I3a4ca7283c494fcac9a08b6c4039c0b7b9ddeca3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458255584,1458255839,42f44defed1bc094a3064fa33b59b030c0c3c1ec
c09c70255727ae5d4bc1be7a9e6e5957f1a2730a,c09c7025,Hygiene: add DbUtil.namesCsv,"Hygiene: add DbUtil.namesCsv

Change-Id: Ia8b5be3d3e2ae6c0710c89d7b09bd2c00b169b55
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458072956,1458242651,4a0a2ed9eab9957f1d160996690a72607223be2b
4a0a2ed9eab9957f1d160996690a72607223be2b,4a0a2ed9,Hygiene: add AsyncColumns.val() for unmarshalling,"Hygiene: add AsyncColumns.val() for unmarshalling

Change-Id: Ibf7ce425d64d938096fa640981b9f2b7ee392d84
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458071997,1458242645,7b72295a884d466e83dcfb7731dbb0b0dcb5d614
7b72295a884d466e83dcfb7731dbb0b0dcb5d614,7b72295a,"Merge ""Add requirements.txt to scripts""","Merge ""Add requirements.txt to scripts""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458241176,1458241176,"8a9ce5c1edee74a1fd50a544b722802183096fdf,32e53d5566c29c6b82bd18fea1e6b6070970f6e0"
32e53d5566c29c6b82bd18fea1e6b6070970f6e0,32e53d55,Add requirements.txt to scripts,"Add requirements.txt to scripts

The Python scripts depend on several packages. Specify dependencies in
requirements.txt as is expected.

Change-Id: I564718a8fd2a3e3728293d1947829b1164b69306
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458234000,1458234000,a7e1f7ff579cc2c46260deba2878bf4d71b344c0
8a9ce5c1edee74a1fd50a544b722802183096fdf,8a9ce5c1,"Merge ""Groundwork for bottom sheets, part 1.""","Merge ""Groundwork for bottom sheets, part 1.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458229155,1458229155,"a770f77cb0b0ea831586f311abe863a0d163978b,fa106f1a357b2d646964953bea429efac5db9991"
a770f77cb0b0ea831586f311abe863a0d163978b,a770f77c,"Merge ""Update Wikipedia app license link""","Merge ""Update Wikipedia app license link""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458225986,1458225986,"7b51a6d9efb5149ace1b2c0408cc0f38a0d198e2,efdf59d3932f2fe9c71491ecf8ef7cf2731f6e40"
7b51a6d9efb5149ace1b2c0408cc0f38a0d198e2,7b51a6d9,Bump versionCode,"Bump versionCode

Change-Id: I4568fbb397fb8a589abaf3d3e89f1e8a6a25fd76
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458163198,1458163198,b3c9ec26503fcc5109fbcc9bb45b9a158caa7c67
b3c9ec26503fcc5109fbcc9bb45b9a158caa7c67,b3c9ec26,"Merge ""Update copyright year in COPYING to 2016""","Merge ""Update copyright year in COPYING to 2016""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458157745,1458157745,"1d3d0bebeb0a8b6059d6d6405164811effdfb0b6,747ece41f58e0c907b34893d9ec3067a34415b61"
747ece41f58e0c907b34893d9ec3067a34415b61,747ece41,Update copyright year in COPYING to 2016,"Update copyright year in COPYING to 2016

Becuase we're living in the year 2016, right? :-)

Change-Id: Iaa4f1c755c7285563b7dd44ca6a8cf931af074c2
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1458154584,1458154584,b43c8497006dda3203da4c7e975a25879ca1b8e5
fa106f1a357b2d646964953bea429efac5db9991,fa106f1a,"Groundwork for bottom sheets, part 1.","Groundwork for bottom sheets, part 1.

This is the first patch of the ""bottom sheets"" series. This does the
following:

- Create an ""ExclusiveBottomSheetPresenter"" class that is bound to
  PageActivity, and is responsible for ensuring that only a single modal
  bottom sheet can be shown at a time. It handles the work of placing
  a DialogFragment onto the activity's fragment manager, and making sure
  that any previous DialogFragments are dismissed.

- Start feeding the LinkPreviewDialog into the bottom sheet presenter, which
  simplifies the code for launching link previews. (this does not yet
  transition the LinkPreviewDialog to be an actual BottomSheetDialog)

- Transition the ThemeChooserDialog to be a BottomSheetDialogFragment, as
  an introduction to the power of the new bottom sheets functionality.
  We also now feed the ThemeChooserDialog into the exclusive bottom sheet
  presenter. Since the theme chooser is now a DialogFragment, and lives in
  the activity's fragment manager, its instanceState is automatically
  saved, so we no longer have to maintain its state manually (a
  significant benefit and simplification)!

- This also fixes one other possible leak cause in LinkPreviewDialog.

To come: transition the References dialog and the PageIssues/Disambig
dialog to be bottom sheets. And later -- make a new bottom sheet dialog:
Add to Category.

Change-Id: I510afa1e88783fcd960f8097e317cb0ff497e50b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1457999900,1458153908,1d3d0bebeb0a8b6059d6d6405164811effdfb0b6
1d3d0bebeb0a8b6059d6d6405164811effdfb0b6,1d3d0beb,"Merge ""Always make sure to close Cursors.""","Merge ""Always make sure to close Cursors.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458152060,1458152060,"b43c8497006dda3203da4c7e975a25879ca1b8e5,cc5e454790b1808656c4cc4b1be97fda5c320625"
cc5e454790b1808656c4cc4b1be97fda5c320625,cc5e4547,Always make sure to close Cursors.,"Always make sure to close Cursors.

Change-Id: I8350cade4550adb4b4afb6be5e2fe61037f2e335
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1458149404,1458149404,a8273e3b95a19d42ee517087bdc8214785bc583f
b43c8497006dda3203da4c7e975a25879ca1b8e5,b43c8497,Clean up scripts/generate_wiki_languages.py,"Clean up scripts/generate_wiki_languages.py

Change-Id: I9d26f658bdedc9a1fdbc103fe5499b24b4ef751a
",,,,Marco Ippolito,maroloccio@gmail.com,BearND,bsitzmann@wikimedia.org,1457906248,1458148443,a8273e3b95a19d42ee517087bdc8214785bc583f
efdf59d3932f2fe9c71491ecf8ef7cf2731f6e40,efdf59d3,Update Wikipedia app license link,"Update Wikipedia app license link

Since we're an open source company, we should prefer Diffusion over
GitHub.

Change-Id: Id1651bfad991d600fe1368ea608da09f16770961
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458144585,1458147760,66548bc7b78b9ddb3956c431d35da5e843ec7b2b
a8273e3b95a19d42ee517087bdc8214785bc583f,a8273e3b,"Merge ""Don't lazy-init db column indices.""","Merge ""Don't lazy-init db column indices.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458145293,1458145293,"66548bc7b78b9ddb3956c431d35da5e843ec7b2b,2d9a7c15c0aa73b59c4a2b448dcf5ae4e7d23481"
66548bc7b78b9ddb3956c431d35da5e843ec7b2b,66548bc7,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I3d1f5ffc84e99a7b1d68b1e821df87ef8dd2e570
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1458142529,1458143104,d15f234936caf30fb70f382ace774fa492a67dde
2d9a7c15c0aa73b59c4a2b448dcf5ae4e7d23481,2d9a7c15,Don't lazy-init db column indices.,"Don't lazy-init db column indices.

Column indices can vary between different tables.
In a subsequent patch, we can lazy-init the indices on a per-table basis.
In the meantime, this fixes the current bug. Fortunately, there's no issue
with the integrity of our db itself.

Bug: T130086
Change-Id: Ied03ebdbe6986217b2838d82a6fdfc0d03b5baba
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1458094972,1458095130,d15f234936caf30fb70f382ace774fa492a67dde
42f44defed1bc094a3064fa33b59b030c0c3c1ec,42f44def,Add ability to specify device to pullfiles.bash,"Add ability to specify device to pullfiles.bash

Change-Id: I9e25d7ff6a65c07b280a88ecdfb0a4bb823b3614
",,,,Marco Ippolito,maroloccio@gmail.com,Marco Ippolito,maroloccio@gmail.com,1457875804,1458066341,9646f0574beb97bb81050675d6a7e62c628d6da8
d15f234936caf30fb70f382ace774fa492a67dde,d15f2349,Prevent WebView loading spinner from persisting inappropriately,"Prevent WebView loading spinner from persisting inappropriately

In certain cases (namely, for very short pages), the call to
bridge.sendMessage at the end of the displayLeadSection listener callback
could trigger the execution of a pending JavaScript callback related to
the remaining sections, with the practical effect that the loading spinner
would be removed before being added.  This changes the order of execution
so that doesn't happen.

Bug: T123940
Change-Id: I404d2d1580021de45e3590bf0d15a44ee5811acc
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1458061434,1458061434,a7e1f7ff579cc2c46260deba2878bf4d71b344c0
a7e1f7ff579cc2c46260deba2878bf4d71b344c0,a7e1f7ff,"Merge ""Hygiene: collapse platform and compat Fragments""","Merge ""Hygiene: collapse platform and compat Fragments""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1458054233,1458054233,"795677548b682097588a176ed4630e9b3d04bf26,8cc0c5b9bfef30b5be404f025c320f964447c6ea"
795677548b682097588a176ed4630e9b3d04bf26,79567754,Hygiene: consolidate queries for display density to a single source.,"Hygiene: consolidate queries for display density to a single source.

This also consolidates queries for display width and height.

Change-Id: Ie3804727b4617492b594472eec62ae4f97889787
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1457980353,1458001862,3ae4134195ce98874c9eaa67153f29b47d6d003a
3ae4134195ce98874c9eaa67153f29b47d6d003a,3ae41341,Add tooltips to UI buttons,"Add tooltips to UI buttons

Change-Id: I67a8804db9c206e6146274266e85e45c37168579
Task: T104094
",,,,Marco Ippolito,maroloccio@gmail.com,Stephen Niedzielski,stephen@niedzielski.com,1457660224,1458000087,8574da397c181ee1923f5846d0211092d374b3d2
8574da397c181ee1923f5846d0211092d374b3d2,8574da39,"Merge ""Improve link preview thumbnail gallery alignment.""","Merge ""Improve link preview thumbnail gallery alignment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457999840,1457999840,"850605abd3e139bcffd6fb217e68ff8caa53dfed,bdf540f4d6c90820c23f5b82e0285a9a1e50dfb9"
8cc0c5b9bfef30b5be404f025c320f964447c6ea,8cc0c5b9,Hygiene: collapse platform and compat Fragments,"Hygiene: collapse platform and compat Fragments

Consolidate platform and compatibility Fragments. No functional changes
intended.

Change-Id: Ib8a5740a8b10bd8f13d6fa18d5f06ded9b68d653
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457999066,1457999066,850605abd3e139bcffd6fb217e68ff8caa53dfed
850605abd3e139bcffd6fb217e68ff8caa53dfed,850605ab,"Start using Support Preference library, and use SwitchPreference.","Start using Support Preference library, and use SwitchPreference.

This transitions our Settings (and Developer settings) screen to use the
Support Preference (v14) library, so that the appearance of the settings
is consistent across APIs.  No functional changes expected, in that sense.

This also now uses SwitchPreference instead of CheckboxPreference, which
looks a lot more Materialy!

Change-Id: I89ecdd4ced3df959380b3147cf67775a0b434bb4
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1457905455,1457985165,7b364cf072cabeec7a9d6cdcf2e64eb172fd9f5a
bdf540f4d6c90820c23f5b82e0285a9a1e50dfb9,bdf540f4,Improve link preview thumbnail gallery alignment.,"Improve link preview thumbnail gallery alignment.

The new version of the Support library allows RecyclerViews to have
""wrap_content"" dimensions. In our link preview window, this means that we
can now center-align the thumbnail gallery when there are fewer images
than the width of the dialog.

I'm therefore removing the minimum number of images shown in the thumbnail
gallery.

To test: go to the [[Earth]] article, and click on the [[Greek]] link in
the first sentence.  Thumbnail galleries with three or more images should
not be affected.

Change-Id: I89b2e55eedc5e4b5380d8f159ee2abf9fd9b151e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1457966058,1457984392,7b364cf072cabeec7a9d6cdcf2e64eb172fd9f5a
7b364cf072cabeec7a9d6cdcf2e64eb172fd9f5a,7b364cf0,"Merge ""Update SDK manager to 1d07987""","Merge ""Update SDK manager to 1d07987""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457983778,1457983778,"be73d36d04e5b6bf4f69d12fc46b3098d489cb35,86898714a0c92ba67e15d168feb3d5a10c009e3c"
be73d36d04e5b6bf4f69d12fc46b3098d489cb35,be73d36d,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457981384,1457981384,"ac05384ba34f8b1c83be9c2187ded01531c6e873,855d6d7fcbefa904e6fab6fcbfc6c34e85401a96"
ac05384ba34f8b1c83be9c2187ded01531c6e873,ac05384b,"Merge ""Upgrade to Support 23.2.1, without functional changes.""","Merge ""Upgrade to Support 23.2.1, without functional changes.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457980184,1457980184,"9646f0574beb97bb81050675d6a7e62c628d6da8,c0a4c2b164f087829275da0c722aad6e42b35cd4"
86898714a0c92ba67e15d168feb3d5a10c009e3c,86898714,Update SDK manager to 1d07987,"Update SDK manager to 1d07987

Change-Id: I68144f5407bbae1dd47fd4d2f6adb72d6c5bdbed
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457978296,1457978296,9646f0574beb97bb81050675d6a7e62c628d6da8
c0a4c2b164f087829275da0c722aad6e42b35cd4,c0a4c2b1,"Upgrade to Support 23.2.1, without functional changes.","Upgrade to Support 23.2.1, without functional changes.

The only necessary workarounds I had to make have to do with the system
bar, and the inability to set its flags via styles. It looks like the
""windowTranslucentStatus"" and ""windowFullScreen"" flags no longer work when
set via an inherited theme, so I'm setting them in the code.

Also, the ""save page"" icon in the toolbar wasn't getting the proper tint
(possibly a bug with tinting state drawables?), so I changed the bookmark
drawable itself to be explicitly white, since it's not used anywhere else.

Also, the new version seems to have broken the
getResources().getDisplayMetrics() function, where it fails to update the
metrics upon screen rotation. I made a workaround for this, as well.
https://code.google.com/p/android/issues/detail?id=201928

Bug: T128126
Change-Id: I5d231a113e36d8acec973fc4a9f0ece2eaa58d7e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1457885557,1457974690,6b449ce08a2a8755ac953f23a3ca88b04f13e282
855d6d7fcbefa904e6fab6fcbfc6c34e85401a96,855d6d7f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I334d87ad37d4130028f2cbe61204bf1b863a48b3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457972049,1457972049,9646f0574beb97bb81050675d6a7e62c628d6da8
9646f0574beb97bb81050675d6a7e62c628d6da8,9646f057,"Merge ""Update npm configuations to be able to run npm install""","Merge ""Update npm configuations to be able to run npm install""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457722578,1457722578,"76cbe8d993ff808162f35e2c657202d962f5f542,f38dfa3d0e0df6421f92c8caee95a1e87b6111e2"
76cbe8d993ff808162f35e2c657202d962f5f542,76cbe8d9,"Merge ""Hygiene: consolidate SparseArray code to enum""","Merge ""Hygiene: consolidate SparseArray code to enum""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457717770,1457717770,"19c9c8807a03a227d0296196dce507dc3b48cc65,fc5990512f1f9f316c79949aa4397eaff28fa978"
19c9c8807a03a227d0296196dce507dc3b48cc65,19c9c880,bump-version-code clean-up,"bump-version-code clean-up

Change-Id: I473f630072f7a9b293e7e86b9acb5c7b4de3064f
",,,,Marco Ippolito,maroloccio@gmail.com,BearND,bsitzmann@wikimedia.org,1457664718,1457714850,3009f48e7fc6a8a130d03a95cee1b9396cbbd104
3009f48e7fc6a8a130d03a95cee1b9396cbbd104,3009f48e,"Merge ""Cache column index""","Merge ""Cache column index""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457714433,1457714433,"10fc7da745dcc4a78e0278be7ab2ee82adadb115,809f425db5bdf09333dd44d1d25583c79b153eb4"
10fc7da745dcc4a78e0278be7ab2ee82adadb115,10fc7da7,"Merge ""Hygiene: abstract asynchronous operation from sync""","Merge ""Hygiene: abstract asynchronous operation from sync""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457713512,1457713512,"ade9cb9881e1e96f46dab9b1bfb4f39170d4d3b5,fe19c019ef753161eff289effc51f97e7d38c0ec"
ade9cb9881e1e96f46dab9b1bfb4f39170d4d3b5,ade9cb98,"Merge ""Hygiene: rename ""sync"" classes to ""http""""","Merge ""Hygiene: rename ""sync"" classes to ""http""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457712718,1457712718,"52840310a9a964445ef35b845c80d740976ec523,f2a6ce55a14a0a2591c5bedccd112b3f76fac218"
52840310a9a964445ef35b845c80d740976ec523,52840310,"Merge ""Hygiene: do not allow bad code to enum conversion""","Merge ""Hygiene: do not allow bad code to enum conversion""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457711268,1457711268,"60b95df2e8e1bdb805e3ba97678d09ab1ce1ac97,a2495069cd9e10c45e31ed2662905aa29446bd7f"
f38dfa3d0e0df6421f92c8caee95a1e87b6111e2,f38dfa3d,Update npm configuations to be able to run npm install,"Update npm configuations to be able to run npm install

This allows us to run grunt from inside www/ instead of having to move it
to parent directory.

Also update packages

Update grunt to 0.4.5

Update grunt-contrib-copy to 1.0.0

Update grunt-contrib-jshint to 1.0.0

Update browserify to 13.0.0

Add package grunt-jsonlint for linting json files.

Change-Id: Iaf286b1dc4af2948896d2dbd37697f06b440850d
",,,,Paladox,thomasmulhall410@yahoo.com,Paladox,thomasmulhall410@yahoo.com,1456514948,1457649982,15e7eca12c9c3a47f6ea463869081b474454ff1b
60b95df2e8e1bdb805e3ba97678d09ab1ce1ac97,60b95df2,Use siteinfo rather than allmessages API call to get wiki Main Page names,"Use siteinfo rather than allmessages API call to get wiki Main Page names

This is a better source for this information as what's exposed here
is the actual default namespace/main page name.

Bug: T129530
Change-Id: I1c9a8956551e68205bbd572dece32906e63243bd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1457649069,1457649069,15e7eca12c9c3a47f6ea463869081b474454ff1b
fc5990512f1f9f316c79949aa4397eaff28fa978,fc599051,Hygiene: consolidate SparseArray code to enum,"Hygiene: consolidate SparseArray code to enum

Keeping enumerations and ordinal values distinct makes refactoring safe.
This patch adds a new interface type, EnumCode, which formally separates
the concern and adds a new helper class, EnumCodeMap, which contains all
the SparseArray logic common to enums that replace integers.

Change-Id: Id9ed41f8d79741a6526eea065ae7dcd9afaaceb2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457639059,1457642559,809f425db5bdf09333dd44d1d25583c79b153eb4
809f425db5bdf09333dd44d1d25583c79b153eb4,809f425d,Cache column index,"Cache column index

No performance measurements were made but this seems like a good thing
to optimize considering how little code it is.

Change-Id: I1aacc9555d33b01f8dffbb68a885dd0c31b6f485
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457572728,1457642559,fe19c019ef753161eff289effc51f97e7d38c0ec
fe19c019ef753161eff289effc51f97e7d38c0ec,fe19c019,Hygiene: abstract asynchronous operation from sync,"Hygiene: abstract asynchronous operation from sync

""Sync"" previously referred to HTTP operations to be synchronized. Now
they're called just ""http"". Abstract non-HTTP, asynchronous concepts
into new classes. No functional changes intended.

Change-Id: Ia3124adbe1218e027dccf68dd04182ab8a78a2b4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457570513,1457642559,f2a6ce55a14a0a2591c5bedccd112b3f76fac218
f2a6ce55a14a0a2591c5bedccd112b3f76fac218,f2a6ce55,"Hygiene: rename ""sync"" classes to ""http""","Hygiene: rename ""sync"" classes to ""http""

The concept of a sync row really deals with HTTP synchronization
specifically. As we need to support additional types of synchronization,
rename to ""http"". No functional changes intended.

Change-Id: I3eb86a3eef7b39c785f3d32e9b0a00d981cada92
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457570816,1457642559,a2495069cd9e10c45e31ed2662905aa29446bd7f
a2495069cd9e10c45e31ed2662905aa29446bd7f,a2495069,Hygiene: do not allow bad code to enum conversion,"Hygiene: do not allow bad code to enum conversion

Although the app could likely run with a default value, perhaps it is
better to fail early if the conversion of an invalid status code is
attempted.

Change-Id: I34e3a1e04107ef9bc3a7d80682b6286c579edbdc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457569827,1457642559,15e7eca12c9c3a47f6ea463869081b474454ff1b
15e7eca12c9c3a47f6ea463869081b474454ff1b,15e7eca1,"Merge ""Upgrade database versions sequentially""","Merge ""Upgrade database versions sequentially""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457642458,1457642458,"8d3b91b95ba4e6515718bd2d4361fd4606f936e3,af070d5914d3614b91be6b033961e39372241a92"
8d3b91b95ba4e6515718bd2d4361fd4606f936e3,8d3b91b9,Reduce Read More thumbnail size,"Reduce Read More thumbnail size

Previously, we had an A/B test, which had a bigger thumbnail size for
entries in the ""Read more"" section of a page. This A/B test has been
removed from the code base but the thumbnail size was not reduced
to its original value. This patch corrects that.

Change-Id: I875e80a400e0261dd1049545a86a09ea068a2966
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1457545851,1457545851,a2aef4e605402fe176f9cf13a67d768da1df2fee
a2aef4e605402fe176f9cf13a67d768da1df2fee,a2aef4e6,"Merge ""Fix possible NPE when exiting Edit activity.""","Merge ""Fix possible NPE when exiting Edit activity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457540990,1457540990,"17dbac43a058c9dea6e2efdfa2624c0d237969f4,91b0c5d3fc7afe04a5cfcca8d5082a5fff637a5a"
af070d5914d3614b91be6b033961e39372241a92,af070d59,Upgrade database versions sequentially,"Upgrade database versions sequentially

Database upgrades are exceptional. Upgrading differently based on
originating version is a small performance gain for a large liability
and test matrix. This patch changes upgrades to always follow the same
path with each version upgraded sequentially until the current db
version is met. This means that if an upgrade on the oldest version of
the app works, all the upgrades in between should too. Additionally,
table upgrade logic was pushed from the abstract super into the subclass
implementation to keep responsibilities separate.

Upgrades between each version work prior to this patch so testing was
performed from each of the following versions directly to this patch:

  • 2.0 (2014-06-25)
  • 2.0 (2015-03-23)
  • 2.0.102 (2015-05-14)
  • 2.0.107 (2015-08-03)
  • 2.0.110 (2015-08-31)
  • 2.1.136 (2015-12-09)
  • 2.1.140 (2016-02-04)
  • 2.1.141 (2016-02-10)
  • 2.1.142 (2016-03-07)

Change-Id: Id540478abf4d110840d92e43a13bd7fc0441caad
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457472771,1457473720,17dbac43a058c9dea6e2efdfa2624c0d237969f4
17dbac43a058c9dea6e2efdfa2624c0d237969f4,17dbac43,Fix database upgrade path,"Fix database upgrade path

Fix database upgrade path from post-namespace and pre-normalized titles
to post-lang. This issue is reproducible when upgrading from  v2.0.110
(2015-08-31) to 2.1.142 (2016-03-07).

Bug: T129232
Change-Id: I9c980feef5d5a0ea2494d5f3b4ba0dd1b0c110c4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457463061,1457463061,f5cba7194e69b535e6769dab1c22af5847e515a8
f5cba7194e69b535e6769dab1c22af5847e515a8,f5cba719,Include database version in upgrade crash reports,"Include database version in upgrade crash reports

Improve the ability to diagnose crashes during database upgrades by
including the version upgraded from in the report.

https://rink.hockeyapp.net/manage/apps/226649/app_versions/15/crashes/6006003581

Change-Id: I0915ef7cd2d1133ff7855f977a5f3421ee70a52c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457454414,1457462989,6b449ce08a2a8755ac953f23a3ca88b04f13e282
91b0c5d3fc7afe04a5cfcca8d5082a5fff637a5a,91b0c5d3,Fix possible NPE when exiting Edit activity.,"Fix possible NPE when exiting Edit activity.

Bug: T129233
Change-Id: I7ade833e9d78a2119a4d80bb7cc7640e502bacf2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1457457060,1457457060,6b449ce08a2a8755ac953f23a3ca88b04f13e282
6b449ce08a2a8755ac953f23a3ca88b04f13e282,6b449ce0,"Merge ""Add license information for the app itself.""","Merge ""Add license information for the app itself.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457455806,1457455806,"c630fa238dbd886fd44784d2e8cd66e7e0baed72,2ef9f31242367b014cddd29e38e699b433f63b82"
2ef9f31242367b014cddd29e38e699b433f63b82,2ef9f312,Add license information for the app itself.,"Add license information for the app itself.

Bug: T116498
Change-Id: I6cca5d3245b288101d35ce26d661a1ffd56e9a70
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1457385470,1457385470,7bd246d15591565617923ecf18266b1acd9a8e19
c630fa238dbd886fd44784d2e8cd66e7e0baed72,c630fa23,Bump versionCode,"Bump versionCode

Change-Id: I2d369c1beefc021c03694eb1be080070072fe95b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457383363,1457383363,7bd246d15591565617923ecf18266b1acd9a8e19
7bd246d15591565617923ecf18266b1acd9a8e19,7bd246d1,Change RB remote config key for production app,"Change RB remote config key for production app

This is to ensure that for the production app only the latest app version, which
sends the correct x-analytics: pageview=1 header, gets to use RESTBase and
the Mobile Content Service.

Bug: T126934
Bug: T128612
Change-Id: Ie49d02141402ede6c292244d223531ee2ef76575
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1457049934,1457382332,c9c4c8d536e9d39c44e24b0692a8c14886f21320
c9c4c8d536e9d39c44e24b0692a8c14886f21320,c9c4c8d5,"Merge ""API client for reading lists, part 1""","Merge ""API client for reading lists, part 1""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457378386,1457378386,"44c930bb10cd6e721eb58cbbf76a90e95783e036,c5a888f02df0d12052c5f43acbc17ff18bf4bf3e"
44c930bb10cd6e721eb58cbbf76a90e95783e036,44c930bb,"Merge ""Move option sync from app to PageActivite.onCreate""","Merge ""Move option sync from app to PageActivite.onCreate""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457377644,1457377644,"741464c8022625978e86a63a40023d898f123e3a,7dfd94e4e0c3efb4225d242757cf28b6ffb1e375"
741464c8022625978e86a63a40023d898f123e3a,741464c8,"End A/B test of morelike ""opening_text"" query.","End A/B test of morelike ""opening_text"" query.

Change-Id: I372c46a03910125edac3d99caf295e7554eab323
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1457376828,1457376828,2008e0508faac08c8b2d365629f302843fc25aeb
2008e0508faac08c8b2d365629f302843fc25aeb,2008e050,"Merge ""Add user options database to dev settings""","Merge ""Add user options database to dev settings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457376356,1457376356,"2805e1c65b1d3d4f44c143df58921ffb6ed4fc3f,e0b16ac1ad0ac94f2623248b71b20d0a74453754"
7dfd94e4e0c3efb4225d242757cf28b6ffb1e375,7dfd94e4,Move option sync from app to PageActivite.onCreate,"Move option sync from app to PageActivite.onCreate

Synchronization of user options should occur at least as often as the
page Activity is created. Move synchronization from
WikipediaApp.onCreate to PageActivity.onCreate.

Change-Id: I2812e7150cfa039cd1f4eaa53753c75e17ae3e59
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457376311,1457376311,e0b16ac1ad0ac94f2623248b71b20d0a74453754
c5a888f02df0d12052c5f43acbc17ff18bf4bf3e,c5a888f0,"API client for reading lists, part 1","API client for reading lists, part 1

read only operations:
* get lists
* get pages in a list

Bug: T126750
Change-Id: Ie0b719351e9eaa08716cbfc131fb2e0b5a057b01
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1455864464,1457376053,13ea2e4c1ac13613a6744f2f0cf91bbf5e5d5143
2805e1c65b1d3d4f44c143df58921ffb6ed4fc3f,2805e1c6,"Merge ""Add user option sync adapter""","Merge ""Add user option sync adapter""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457376024,1457376024,"9b17528e88becd87d7920f44ab2030abd18ffe04,d026cc1789642fb5b3069ec23701a65280664b25"
9b17528e88becd87d7920f44ab2030abd18ffe04,9b17528e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I86cf393fc68716630466b9b67f78acec1be87193
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457367561,1457367561,16f63090636de36c33841d5fe2b2decb4b2520ba
e0b16ac1ad0ac94f2623248b71b20d0a74453754,e0b16ac1,Add user options database to dev settings,"Add user options database to dev settings

Change-Id: I11f8955aebd4e2f7d725a4860033dd80cf3b78b6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456255928,1457110534,d026cc1789642fb5b3069ec23701a65280664b25
d026cc1789642fb5b3069ec23701a65280664b25,d026cc17,Add user option sync adapter,"Add user option sync adapter

Bug: T124350
Change-Id: Ibb3428ac4b35e114b3f753488f5dbc38ab029095
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456255790,1457110099,16f63090636de36c33841d5fe2b2decb4b2520ba
16f63090636de36c33841d5fe2b2decb4b2520ba,16f63090,"Merge ""Fix database upgrades for multiple column changes""","Merge ""Fix database upgrades for multiple column changes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457109971,1457109971,"6bb9950df74bbfd878a5c083f762c010d921371a,43186ee63815796535324e64347ff7fcf0fe943c"
6bb9950df74bbfd878a5c083f762c010d921371a,6bb9950d,"Merge ""Fix regression when upgrading database table""","Merge ""Fix regression when upgrading database table""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457105394,1457105394,"bf33e61e36c9a046155b2abbbea4237c68f7a916,3ab839fa154a211ed1649e5a3f6f28ceea34479b"
bf33e61e36c9a046155b2abbbea4237c68f7a916,bf33e61e,"Merge ""Hygiene: replace hardcoded table and column names""","Merge ""Hygiene: replace hardcoded table and column names""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457104683,1457104683,"3d74cda0bc468a5f5da2c98009e79199e21b817a,1eb6fd36f073b28fe485833a40bac267fe8a7afc"
3d74cda0bc468a5f5da2c98009e79199e21b817a,3d74cda0,"Merge ""Hygiene: use Columns instead of Strings""","Merge ""Hygiene: use Columns instead of Strings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457103195,1457103195,"4833fd46ff7f4563c7e38c755a55d73eabb9ff03,11e23e800d6914e82ec920ad04b2b3ea0a3e3561"
4833fd46ff7f4563c7e38c755a55d73eabb9ff03,4833fd46,"Merge ""Hygiene: tidy up XML""","Merge ""Hygiene: tidy up XML""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457051655,1457051655,"30140c84f35a74bc36dc4a8d09bb021c0a4b3994,5ff2e06c115a198d55891fcf65c78f0cefbd4808"
43186ee63815796535324e64347ff7fcf0fe943c,43186ee6,Fix database upgrades for multiple column changes,"Fix database upgrades for multiple column changes

Multiple columns cannot be added in a single alter table statement[0].
Add columns one at a time. Upgrade path tested in prod v2.0 (2015-03-23)
to this patch (database versions 5 - 10).

[0] http://www.sqlite.org/lang_altertable.html

Change-Id: I173556958c23968f33d6c62ec8eb0fb998747c52
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457047296,1457047296,3ab839fa154a211ed1649e5a3f6f28ceea34479b
3ab839fa154a211ed1649e5a3f6f28ceea34479b,3ab839fa,Fix regression when upgrading database table,"Fix regression when upgrading database table

Pre-namespace tables do not have a language column. Derive language from
the wiki site during db upgrade.

Change-Id: Ic4d70b90adedaf418917c8a1ced392f9560feac6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457047173,1457047173,1eb6fd36f073b28fe485833a40bac267fe8a7afc
1eb6fd36f073b28fe485833a40bac267fe8a7afc,1eb6fd36,Hygiene: replace hardcoded table and column names,"Hygiene: replace hardcoded table and column names

• Replace hardcoded table and column names with symbols. This could be
  better yet but using symbolics is an improvement.

• Generate symbols for database table constants in build.gradle.

• Move DatabaseTable table name dependency to constructor instead of
  override.

• Remove DatabaseTable column name helpers now in Column.

No functional changes intended.

Change-Id: I3bc07699a7b3758cc42ef6bc06cb71a4202e0f4f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1457044157,1457047099,11e23e800d6914e82ec920ad04b2b3ea0a3e3561
11e23e800d6914e82ec920ad04b2b3ea0a3e3561,11e23e80,Hygiene: use Columns instead of Strings,"Hygiene: use Columns instead of Strings

• Encapsulate column SQLite as Column types.

• Add DateColumn for timestamps that are always converted to Dates.

Change-Id: I8d99b0fcd4470abb6027806c0bad80d9b9f75bc5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456966259,1457044963,30140c84f35a74bc36dc4a8d09bb021c0a4b3994
30140c84f35a74bc36dc4a8d09bb021c0a4b3994,30140c84,Hygiene: use getDBVersionIntroducedAt on upgrade,"Hygiene: use getDBVersionIntroducedAt on upgrade

DB upgrades invoke DatabaseTable.getColumnsAdded() which should use the
value of getDBVersionIntroducedAt() for its initial case. Change
SavedPageDatabaseTable to use this value and replace the hardcoded
initial version with a symbol in HistoryEntryDatabaseTable and
PageImageDatabaseTable.

Change-Id: I02104b294d19a69d7d737e1e023ba4d691bee4ff
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456947328,1457029339,ac821bb0881b1759282a0b8b2339e1c6367c18a9
ac821bb0881b1759282a0b8b2339e1c6367c18a9,ac821bb0,Hygiene: add missing type parameters,"Hygiene: add missing type parameters

• Add missing type parameters.

• Use DatabaseTable.getColumnsAdded() for unhandled database versions.

• Make Column.val abstract.

No functional changes intended.

Change-Id: Ia5a2d11ada3823206b16123c7bdcf7cc0eb0d653
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456946495,1457029339,fa63baf997ace395bd9b14466df8502d925e1e77
fa63baf997ace395bd9b14466df8502d925e1e77,fa63baf9,Hygiene: move DatabaseTable.Column to new file,"Hygiene: move DatabaseTable.Column to new file

• Move DatabaseTable.Column to org.wikipedia.database.column.Column.

• Replace anonymous Column subclasses with IntColumn, LongColumn,
  StrColumn, and IdColumn.

• Fix a couple type parameters.

No functional changes intended.

Change-Id: Id00e093d2ab2476259c4fadb3e2ec59760051ff1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456940193,1457029339,740837cbc115ce3b91fc9aa471571d2a32eb7283
5ff2e06c115a198d55891fcf65c78f0cefbd4808,5ff2e06c,Hygiene: tidy up XML,"Hygiene: tidy up XML

• Close empty tags as reported by Android Lint.

• Remove redundant rectangle shape attribute for shape tags.

• Fix indentation on some files that had none.

• Remove unused namespace.

No functional changes intended.

Change-Id: If4996c3e225d211fc877a7a55829cf2693d4fe17
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456958678,1457029307,740837cbc115ce3b91fc9aa471571d2a32eb7283
740837cbc115ce3b91fc9aa471571d2a32eb7283,740837cb,"Merge ""Add X-Analytics request headers for previews and pageviews""","Merge ""Add X-Analytics request headers for previews and pageviews""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457028416,1457028416,"f8100ee5b391d3139847f21826fbe9f6b03fe489,dc8c31f5d34cc3d7bc59b22d118a6dd986be57a2"
f8100ee5b391d3139847f21826fbe9f6b03fe489,f8100ee5,"Merge ""Hygiene: replace while loop with for-each""","Merge ""Hygiene: replace while loop with for-each""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457026276,1457026276,"7a9cac91a44d047a371081f9d158430624124363,16f9cabd8a45211b49e8bb02b26828145abbabd0"
7a9cac91a44d047a371081f9d158430624124363,7a9cac91,"Merge ""Revert ""Hygiene: remove unused code""""","Merge ""Revert ""Hygiene: remove unused code""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1457025755,1457025755,"5dea194f5fc6c1795bf7fdbb280273dc7c0b899f,636c02deaf3e8a437a7338d2e045f2491c5ef5fe"
5dea194f5fc6c1795bf7fdbb280273dc7c0b899f,5dea194f,Use URL authority instead of host,"Use URL authority instead of host

Bug: T120415
Depends-On: Iffe3cf1a0ebc75da22362706cc743b69ba8b9755
Change-Id: I23516ad1c2239f5fee6f2c0e7bd163dc220f8bb7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456793556,1457019402,8f829e3c324f778fa83af59ee6d0657fe50a8eba
dc8c31f5d34cc3d7bc59b22d118a6dd986be57a2,dc8c31f5,Add X-Analytics request headers for previews and pageviews,"Add X-Analytics request headers for previews and pageviews

preview=1 is set whenever the summary endpoints are used
pageview=1 is set whenever the lead section requests are used

This is done for both MW API and RESTBase endpoints.
For the MW API we need to add it to the lead section request since the
Analytics Refinery uses the legacy lead section requests.
(We don't want to count both the lead section request and the remaining
section request as separate pageviews.)
For consistency sake I did the same for the RESTBase case, even though
there it's not strictly required.

Bug: T128612
Change-Id: I497691fed1ab30d62a7f3359503bc099e0be0f02
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1456991722,1456991722,8f829e3c324f778fa83af59ee6d0657fe50a8eba
16f9cabd8a45211b49e8bb02b26828145abbabd0,16f9cabd,Hygiene: replace while loop with for-each,"Hygiene: replace while loop with for-each

No functional changes intended.

Change-Id: Ife56504fecb2e71e39c8a91bd6584f09707fb843
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456958757,1456958803,8f829e3c324f778fa83af59ee6d0657fe50a8eba
636c02deaf3e8a437a7338d2e045f2491c5ef5fe,636c02de,"Revert ""Hygiene: remove unused code""","Revert ""Hygiene: remove unused code""

This reverts commit 2256ef1 as the code that needed it hadn't been
merged.

Change-Id: I9ad639dc29e5f113f67cf2d0234b5081f82814cd
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456957702,1456957757,8f829e3c324f778fa83af59ee6d0657fe50a8eba
8f829e3c324f778fa83af59ee6d0657fe50a8eba,8f829e3c,"Merge ""Avoid deriving language from URL""","Merge ""Avoid deriving language from URL""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456949810,1456949810,"39dad3df4bba69291bd4051a0dcda7733bdeeb39,57b643c5b52ce54045db77ec18cdbbc75dcf430c"
39dad3df4bba69291bd4051a0dcda7733bdeeb39,39dad3df,"Merge ""Hygiene: remove unused code""","Merge ""Hygiene: remove unused code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456947606,1456947606,"6c1c2ab745d5d07b170bc5b1d633093fefbd5fae,2256ef11e0d3f05a8d0d20374a47f7e987399994"
6c1c2ab745d5d07b170bc5b1d633093fefbd5fae,6c1c2ab7,"Merge ""Update language list and templates""","Merge ""Update language list and templates""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456946956,1456946956,"cf550550c0d4dfbe6057029d1aa9d7e2b0efa176,d37b360190b588fe00a4e9beded19bad1f90c14b"
2256ef11e0d3f05a8d0d20374a47f7e987399994,2256ef11,Hygiene: remove unused code,"Hygiene: remove unused code

Change-Id: I3964aa07457dc3f0ea6b03bb493eb0d90a87e6d6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456940394,1456940394,b5e089e4e64e39e5e711c764c40805abde680f82
57b643c5b52ce54045db77ec18cdbbc75dcf430c,57b643c5,Avoid deriving language from URL,"Avoid deriving language from URL

For certain dialects, deriving the language code from the wiki site may
not be possible. Upgrade the database with a language code column and
use the URL + language code constructor wherever possible.

Change-Id: I0ff30395b8dae58f5d7e26326274c3db79996177
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456791070,1456849682,cf550550c0d4dfbe6057029d1aa9d7e2b0efa176
cf550550c0d4dfbe6057029d1aa9d7e2b0efa176,cf550550,Add support for no language wikis,"Add support for no language wikis

• Don't assume nonempty language code.
• Add empty language for development to the end of the language list.
• Fix comparison of a null and an empty string in StringUtil.equals.

Change-Id: I1ba833d8ae5b049233683c3bf3e10ebae9304d74
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456781680,1456849663,1fdc79585e9f2fc5eaf0075e38a5924cccc367db
1fdc79585e9f2fc5eaf0075e38a5924cccc367db,1fdc7958,Convert Site implementation to URI,"Convert Site implementation to URI

• Change the site backend to use the URI class to encapsulate scheme,
  host, and eventually port.

• Add MediaWiki base URI to developer settings for testing custom
  installations. Port is not yet respected.

Change-Id: Iab6eeb6843d406b616c6e7689520af4d909d7e8d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456506695,1456849645,b5e089e4e64e39e5e711c764c40805abde680f82
b5e089e4e64e39e5e711c764c40805abde680f82,b5e089e4,Hygiene: move URL scheme from WikipediaApp to Site,"Hygiene: move URL scheme from WikipediaApp to Site

Move WikipediaApp.getNetworkProtocol() to Site.scheme(). Since
getNetworkProtocol() always returned ""https"" and Site.secureScheme is
always true, this change should have no effect.

Change-Id: Ie26251537dfca08fa881d2b16170e1b5dbbacdc9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456442252,1456849631,33284ceaf2d079c6238e6097175ad791e899c649
33284ceaf2d079c6238e6097175ad791e899c649,33284cea,Convert Site HTTPS constant to variable,"Convert Site HTTPS constant to variable

Replace the Site HTTPS constant, true, with a variable defaulting to
true. No functional change intended.

Change-Id: Iac42f127b4083247f79de6554c35363e8ff282b8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456440864,1456849613,4e45ce301ecb9a79f1afe092d9214003567b497d
4e45ce301ecb9a79f1afe092d9214003567b497d,4e45ce30,"Merge ""Hygine: infer nullity in Site""","Merge ""Hygine: infer nullity in Site""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456779565,1456779565,"373e7bd069f57f31447cf907378987e6182fe394,75318929cbe14b2a7e8feeb81efee232f29862f5"
373e7bd069f57f31447cf907378987e6182fe394,373e7bd0,"Merge ""Hygiene: reorder Site members by client interest""","Merge ""Hygiene: reorder Site members by client interest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456769444,1456769444,"6f51717e636e2388a28cdb90f843327211f974ac,d53e6bcea3d3f9e01eba3f593dfbfd1dc3b06d78"
6f51717e636e2388a28cdb90f843327211f974ac,6f51717e,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456765751,1456765751,"3222420261fc1658a146eccaa13eb17543daf4d3,d75aa012bb66fd087d492f21b70751f574f15d44"
d75aa012bb66fd087d492f21b70751f574f15d44,d75aa012,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I5f1927bd9bbe28eee8e4cb280380714db4a9893c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456729581,1456729581,13ea2e4c1ac13613a6744f2f0cf91bbf5e5d5143
d37b360190b588fe00a4e9beded19bad1f90c14b,d37b3601,Update language list and templates,"Update language list and templates

Run generate_wiki_languages.py and make-templates.py.

Change-Id: I9825317fed0a433feac6d9024b2b05bc5d7e9bfe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456530967,1456530967,13ea2e4c1ac13613a6744f2f0cf91bbf5e5d5143
75318929cbe14b2a7e8feeb81efee232f29862f5,75318929,Hygine: infer nullity in Site,"Hygine: infer nullity in Site

Change-Id: I71fe13eacf35fb9c8a9d8f7c04ce39dfaf81febe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456439776,1456439776,d53e6bcea3d3f9e01eba3f593dfbfd1dc3b06d78
d53e6bcea3d3f9e01eba3f593dfbfd1dc3b06d78,d53e6bce,Hygiene: reorder Site members by client interest,"Hygiene: reorder Site members by client interest

Reorder Site members:

• Member variables on top, public first.
• Public static methods.
• Public constructors.
• Public methods.
• Overrides.
• Privates.

No functional changes intended.

Change-Id: I628bfb5d40e8b928730a8c0f6457a3f30daf8c38
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456437579,1456439520,3222420261fc1658a146eccaa13eb17543daf4d3
3222420261fc1658a146eccaa13eb17543daf4d3,32224202,Hygiene: update Site member names to URL syntax,"Hygiene: update Site member names to URL syntax

No functional changes intended. Update Site:

• Reduce ambiguity by renaming members to match URL syntax
  terminology[0].

• Reduce verbosity by renaming members to leverage type information,
  like dropping the little m on member variables.

[0] https://en.wikipedia.org/wiki/Uniform_Resource_Locator#Syntax

Change-Id: Ib43051785969d78d35690b4bdd337c80ce9550ac
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456437096,1456439459,0aff7de8391174589cac485ea7b4b215b8be7a78
0aff7de8391174589cac485ea7b4b215b8be7a78,0aff7de8,Hygiene: update Site Javadocs,"Hygiene: update Site Javadocs

Add and update the Site Javadocs using URL syntax terminology[0]. No
functional changes intended.

[0] https://en.wikipedia.org/wiki/Uniform_Resource_Locator#Syntax

Change-Id: I40d652ff07d25775299d20c31ace2baa78ea8435
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456435720,1456435720,13ea2e4c1ac13613a6744f2f0cf91bbf5e5d5143
13ea2e4c1ac13613a6744f2f0cf91bbf5e5d5143,13ea2e4c,"Merge ""Finish harmonizing RESTBase and MW API server classes""","Merge ""Finish harmonizing RESTBase and MW API server classes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456417962,1456417962,"c0a12b5c76fca7d6a3161b91aa59c52451dd62c6,bca4dd406ccb12f23406445c29b4864aed2f4c03"
c0a12b5c76fca7d6a3161b91aa59c52451dd62c6,c0a12b5c,"Merge ""Prevent leak of EditSectionActivity.""","Merge ""Prevent leak of EditSectionActivity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456417910,1456417910,"50e93b21d04cf74587bfde50f8cb0d714bf52d47,709c1b2a12420c8b19477724b8afa5a58bbbbb5b"
50e93b21d04cf74587bfde50f8cb0d714bf52d47,50e93b21,Add user option database,"Add user option database

Bug: T124350
Bug: T103903
Change-Id: Ib891604ad757429a5282d3c44578c3237de916db
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1455987951,1456410565,45e0e165675c9f0501522ca730d0a3b57082c3ff
709c1b2a12420c8b19477724b8afa5a58bbbbb5b,709c1b2a,Prevent leak of EditSectionActivity.,"Prevent leak of EditSectionActivity.

Again, set a few things to null, and don't use a ""final"" context that is
used by anonymous classes.

Change-Id: Idd08e41e4b6ce833d8d2ed1f5f4b8d9e5ab739da
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1456409844,1456409844,45e0e165675c9f0501522ca730d0a3b57082c3ff
bca4dd406ccb12f23406445c29b4864aed2f4c03,bca4dd40,Finish harmonizing RESTBase and MW API server classes,"Finish harmonizing RESTBase and MW API server classes

Completes the work begun in https://gerrit.wikimedia.org/r/#/c/272853/.

Change-Id: Ifd9f155604eea7e1709094a5e0ed56760b49db37
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1456343385,1456343760,45e0e165675c9f0501522ca730d0a3b57082c3ff
45e0e165675c9f0501522ca730d0a3b57082c3ff,45e0e165,"Share cookies with meta, fix meta language header","Share cookies with meta, fix meta language header

• Share Wikipedia and Wikimedia site cookies. This will allow us to
  use meta.wikimedia.org with the login cookies from en.wikipedia.org,
  for example.

• Note that meta is not a language and don't send it in the
  Accept-Language header.

Change-Id: I13f5efb0a1bf9fbfe0e9798ef0fa3ec3010175f2
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1455314958,1456337551,bb8856b1e53db948f54d7d0241c4bc3671bc1466
bb8856b1e53db948f54d7d0241c4bc3671bc1466,bb8856b1,Add user option data client,"Add user option data client

No functional changes intended at this time. This code is exercised by a
subsequent patch.

Change-Id: I7a3f3663dcd9c383d84bf2ca16eafb8a1469e491
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1455263162,1456337209,235c78cdb43bd90dd0790f6a2bd173f4bf5155b3
235c78cdb43bd90dd0790f6a2bd173f4bf5155b3,235c78cd,"Merge ""Hygiene: Rename Restbase server classes to match MW API server classes""","Merge ""Hygiene: Rename Restbase server classes to match MW API server classes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456332908,1456332908,"4f25a3e3c4b51045c872d503a89ae6b4abfb5ec9,584f6a034fb6c92808d95fa5991278aab0f926c6"
4f25a3e3c4b51045c872d503a89ae6b4abfb5ec9,4f25a3e3,Prevent leaks of PageFragment.,"Prevent leaks of PageFragment.

This prevents leakage of PageFragment by explicitly setting a couple
things to null -- the tabsProviderListener and searchBarHideHandler, both
of which maintain references to the current fragment beyond its lifetime.

This also adds a method to our custom WebView to clear all of its
listeners.

Change-Id: I3d710f2476a0c5bdd79a853721f0992d9ca037bb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1455836750,1456272551,c3edc5897887e7ae26a18d431d4d9609a519e10d
584f6a034fb6c92808d95fa5991278aab0f926c6,584f6a03,Hygiene: Rename Restbase server classes to match MW API server classes,"Hygiene: Rename Restbase server classes to match MW API server classes

While writing the Wiktionary definition endpoint I had the idea that a
definition for our purposes was notionally separate from a page, and so
I renamed these.  But this doesn't reflect the endpoint structure (which
still contains /page/) and ruins the correspondence with the MW API server
classes.  So it's better to change them back.

Change-Id: Icc848f4fddc56b400efdf7214bd058d574836bda
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1456262976,1456262976,c3edc5897887e7ae26a18d431d4d9609a519e10d
c3edc5897887e7ae26a18d431d4d9609a519e10d,c3edc589,"Merge ""De/register event bus in onDestroy/Create""","Merge ""De/register event bus in onDestroy/Create""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456261265,1456261265,"134cb3e244ac96a526f516b17b4bdf1d474350d6,f267f91126e93d938e6f90a727336f9295c678eb"
f267f91126e93d938e6f90a727336f9295c678eb,f267f911,De/register event bus in onDestroy/Create,"De/register event bus in onDestroy/Create

Registering and deregistering the event bus in onStart / onStop is too
aggressive and may cause events to be lost. The previous implementation
also registered in onCreate but deregistered in onStop.

Change-Id: Ie6bb004696cc0d77e8db32e40a52074435fd1a94
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456256634,1456256634,de53f8dfe36ab78545a988e43d912eb5caf15e49
134cb3e244ac96a526f516b17b4bdf1d474350d6,134cb3e2,Throw exception on failed insertion,"Throw exception on failed insertion

Change-Id: I0fd6a12c30075605147738653ea3925e6834c18e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456256576,1456256576,de53f8dfe36ab78545a988e43d912eb5caf15e49
de53f8dfe36ab78545a988e43d912eb5caf15e49,de53f8df,"Merge ""Prevent leak of GalleryItemFragment.""","Merge ""Prevent leak of GalleryItemFragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456247820,1456247820,"04ffd3e718e3854b808234ce4d5f68a330103dd2,87a1302d966208fb4a7efd5a72e5f14009cbae34"
04ffd3e718e3854b808234ce4d5f68a330103dd2,04ffd3e7,"Merge ""Fix memory leaks (for real!), part 1.""","Merge ""Fix memory leaks (for real!), part 1.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1456247281,1456247281,"82d5024ca07fa5e6e57be7d23e985fdafc3497dd,7adea3809b62940b388fb9ef5a7edc6fbf7b26eb"
87a1302d966208fb4a7efd5a72e5f14009cbae34,87a1302d,Prevent leak of GalleryItemFragment.,"Prevent leak of GalleryItemFragment.

Once again, the leak is prevented by clearing out several listeners that
hold references to the fragment.

Change-Id: I6127b983a87c379ebd66d210103bbd83a6134b95
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1456243110,1456243235,be0be0f77ae705b6afab0e4339c7adfabc2cd6c9
82d5024ca07fa5e6e57be7d23e985fdafc3497dd,82d5024c,Prevent leaks of link preview dialog.,"Prevent leaks of link preview dialog.

Explicitly set a few listeners to null, which were holding references to
LinkPreviewDialog beyond its lifetime. For some reason, this leak was only
manifesting itself in API <20.

Change-Id: I3d9e84a9fc4b19af029b007ab15d31c18db4a495
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1455837413,1456180231,be0be0f77ae705b6afab0e4339c7adfabc2cd6c9
7adea3809b62940b388fb9ef5a7edc6fbf7b26eb,7adea380,"Fix memory leaks (for real!), part 1.","Fix memory leaks (for real!), part 1.

My ongoing search has finally yielded some tangible nuggets.
Exhibit A: Adding a TextWatcher to a TextView, but never removing it! (The
TextWatcher holds a reference to the fragment, thereby leaking it)

Also, now explicitly removing the onItemClick and onItemLongClick
listeners from the ListView, since this seems to lead to a leak in
API <20.

Change-Id: I497ebd37f3059b420622416a66ee5b87a15a2d0c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1455814524,1456178564,be0be0f77ae705b6afab0e4339c7adfabc2cd6c9
be0be0f77ae705b6afab0e4339c7adfabc2cd6c9,be0be0f7,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I88f335396dc1cb8ac6752a65356a569113edee6e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1456158872,1456158872,f1a50adf0bcb550114cf0df42283d206ed7e45d7
f1a50adf0bcb550114cf0df42283d206ed7e45d7,f1a50adf,Work around empty Retrofit POST request bodies,"Work around empty Retrofit POST request bodies

https://github.com/square/retrofit/issues/854#issuecomment-159750494

Change-Id: I738c1d739e8bc871e4392b64050e7083ab72c40f
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1455261900,1455909009,6663ac765d2e9023727309b79c6d3900d46bffb2
6663ac765d2e9023727309b79c6d3900d46bffb2,6663ac76,Hygiene: consolidate RestAdapter factory,"Hygiene: consolidate RestAdapter factory

No functional changes intended.

Change-Id: I06fcca965a8aef09d7d7a646aeffb2cd44edf42e
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1455261408,1455908379,2b41f72bcb237a65c690b92a9b4fbee468d9ac97
2b41f72bcb237a65c690b92a9b4fbee468d9ac97,2b41f72b,Add stub authenticator,"Add stub authenticator

The sync adapter's account is user visible even if the sync adapter
itself is not. This means users can add or remove a Wikimedia account
from the system account settings screen. This patch enables that
functionality but doesn't provide an account that is usable by other
apps, including other app flavors (dev, alpha, beta, prod), which is a
future improvement.

Change-Id: I0b562771d89787b589a1273bed87505c88cbd29c
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1455219429,1455907416,c1cb7aa32555bcaea40a50f4eef53e131a996e63
c1cb7aa32555bcaea40a50f4eef53e131a996e63,c1cb7aa3,"Merge ""Hygiene: move a couple SharedPreferences to Prefs""","Merge ""Hygiene: move a couple SharedPreferences to Prefs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455907366,1455907366,"5f5dda7d6a5c0c7c330bf79aa18fd9528088a0e1,8ebf91d65271e54c7e9431d8f5246709f9d1f169"
8ebf91d65271e54c7e9431d8f5246709f9d1f169,8ebf91d6,Hygiene: move a couple SharedPreferences to Prefs,"Hygiene: move a couple SharedPreferences to Prefs

• Move a couple SharedPreferences to Prefs.

• Use color constants instead of Color.parseColor.

Change-Id: I2a06f89911eb1a1fb5fb07e6f8ec64fb574500bc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455802046,1455905796,433dc0bd90ef42e29ee9a06ee260ce0416a12d3c
5f5dda7d6a5c0c7c330bf79aa18fd9528088a0e1,5f5dda7d,Remove boot permission from F-Droid builds,"Remove boot permission from F-Droid builds

Bug: T127479
Change-Id: Iba5d03b2425e0f407f3e32ecf80aaf750757d96b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455901432,1455901432,cdf36c69915574a3cf9d3c6082231cb9dd4ef454
cdf36c69915574a3cf9d3c6082231cb9dd4ef454,cdf36c69,"Merge ""Hygiene: centralize loader IDs""","Merge ""Hygiene: centralize loader IDs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455897125,1455897125,"2e6f7f8b880440196f2411ff59c2ebe2bd402d42,5eed6f9c774934fe34402f92e278f678378ea3ce"
2e6f7f8b880440196f2411ff59c2ebe2bd402d42,2e6f7f8b,"Merge ""Implement A/B test for beta search autocomplete feature""","Merge ""Implement A/B test for beta search autocomplete feature""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455896556,1455896556,"18e23c27ec1a48713002f77ce38e32ea6bb5a6fc,d0f1f5d3575dfc5375d1c05374ca0f08b6a52cd5"
18e23c27ec1a48713002f77ce38e32ea6bb5a6fc,18e23c27,Don't hide database column programmer errors,"Don't hide database column programmer errors

• Replace a couple missed Cursor.getColumnIndex() invocations with
  getColumnIndexOrThrow().

• Remove superfluous constructor.

Change-Id: I2fce45f2452aba2a42d71ca144336e84264bfd56
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455801851,1455801851,433dc0bd90ef42e29ee9a06ee260ce0416a12d3c
d0f1f5d3575dfc5375d1c05374ca0f08b6a52cd5,d0f1f5d3,Implement A/B test for beta search autocomplete feature,"Implement A/B test for beta search autocomplete feature

This will test the user engagement of the new beta autocomplete search
generator against our existing prefix search.

Note that this will make an undocumented (but permitted by the server)
change to add a third 'autocomplete' value for the typeOfSearch field.

Bug: T125984
Change-Id: I19571459f09e260415f2f53fdb1d7a96b6af13d3
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1455729452,1455736839,bcc6b23c6d8d037731c61d73d56523ff1026a0d0
433dc0bd90ef42e29ee9a06ee260ce0416a12d3c,433dc0bd,"Merge ""Log extlink action when appropriate""","Merge ""Log extlink action when appropriate""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455735544,1455735544,"462a06c37ef77fc2796b3d4ed8bd00d0c8720bf7,4c63de1ed2e2336f6d3336dea0c35507bdcaeb7e"
462a06c37ef77fc2796b3d4ed8bd00d0c8720bf7,462a06c3,"Merge ""Log action extlink-always when user switches off Zero exit warnings""","Merge ""Log action extlink-always when user switches off Zero exit warnings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455730769,1455730769,"bf057fb08fbd407b376d88197ebe734f02ccb655,fd4838378a7e4fb2fe7173573a97a4b4e7a31982"
bf057fb08fbd407b376d88197ebe734f02ccb655,bf057fb0,"Merge ""Implement custom strings and EventLogging for Wikipedia Zero""","Merge ""Implement custom strings and EventLogging for Wikipedia Zero""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455729854,1455729854,"ea1aaea2c2fa28e7599ffd7df29c8d5e2b29312a,adf959c0a90d76c6ba9ec48c2989abb1e03bddff"
5eed6f9c774934fe34402f92e278f678378ea3ce,5eed6f9c,Hygiene: centralize loader IDs,"Hygiene: centralize loader IDs

Centralize loader IDs which must be distinct. No functional changes
intended.

Change-Id: Ie216476db99fc1efc6e601676a76d59d5958803c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455728711,1455728711,ea1aaea2c2fa28e7599ffd7df29c8d5e2b29312a
ea1aaea2c2fa28e7599ffd7df29c8d5e2b29312a,ea1aaea2,Hygiene: Don't rely on hard-coded image db column index.,"Hygiene: Don't rely on hard-coded image db column index.

No functional changes intended.

Change-Id: Ib1bfca108b76b758b5e76799420e60770616a8c3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1455676941,1455725321,28df9e01d9f6123e160963267bdd3a7efff3ee97
28df9e01d9f6123e160963267bdd3a7efff3ee97,28df9e01,"Merge ""Never return a null CursorLoader""","Merge ""Never return a null CursorLoader""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455724999,1455724999,"3f96145aed135af65a9c132cc3677454948eeeb9,25551d79c3d05af2b01aceee1c8e303fbe375ede"
3f96145aed135af65a9c132cc3677454948eeeb9,3f96145a,"Merge ""Don't hide database column programmer errors""","Merge ""Don't hide database column programmer errors""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455724694,1455724694,"d4747d96eb2e8a01a3ae99e9b1b64436e0c4d4a4,eaeccd52bfaa19d10da448b313b93ed8c53a6b0e"
d4747d96eb2e8a01a3ae99e9b1b64436e0c4d4a4,d4747d96,"Merge ""Hygiene: add missing @Nullable annotation""","Merge ""Hygiene: add missing @Nullable annotation""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455721090,1455721090,"b01d76c1afdba23571620991746e0b85b1c67a64,57e273e4b76a578f746d3d45748498f2d7f71f94"
25551d79c3d05af2b01aceee1c8e303fbe375ede,25551d79,Never return a null CursorLoader,"Never return a null CursorLoader

The Activity lifecycle limits when Fragment.getActivity() will return
nonnull. A CursorLoader just calls getApplicationContext() on the passed
in Context and does not require an Activity. Decouple the CursorLoader
constructor from the Activity lifecycle by using getContext() instead of
getActivity().

Change-Id: I7f07a704fbe96450ab7660e9fc28fa0bfcb4d9b1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455687431,1455687431,bcc6b23c6d8d037731c61d73d56523ff1026a0d0
eaeccd52bfaa19d10da448b313b93ed8c53a6b0e,eaeccd52,Don't hide database column programmer errors,"Don't hide database column programmer errors

• Use Cursor.getColumnIndexOrThrow() instead of getColumnIndex(). From
  the Javadoc:

  > If you expect the column to exist use getColumnIndexOrThrow()
    instead, which will make the error more clear.

  This should have no functional effect if there were no preexisting
  bugs.

• Add some getInt/Long/String helper methods to DatabaseTable and make
  use of them where possible.

• Refactor DatabaseClient to use helper methods for readability and
  reuse in a forthcoming patch.

Change-Id: Ic47287eb5f18a76ae07f479e5b251fd3f2b998a5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455685643,1455685643,bcc6b23c6d8d037731c61d73d56523ff1026a0d0
57e273e4b76a578f746d3d45748498f2d7f71f94,57e273e4,Hygiene: add missing @Nullable annotation,"Hygiene: add missing @Nullable annotation

No functional change intended.

Change-Id: Ifd1aefbfdd02392d37908e244c72d50879f2ad94
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455684673,1455684673,bcc6b23c6d8d037731c61d73d56523ff1026a0d0
b01d76c1afdba23571620991746e0b85b1c67a64,b01d76c1,Hygiene: add missing type parameter,"Hygiene: add missing type parameter

No functional change intended.

Change-Id: I525042f04149c770b69f7eab2f606ee61afdfabf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455684346,1455684420,bcc6b23c6d8d037731c61d73d56523ff1026a0d0
bcc6b23c6d8d037731c61d73d56523ff1026a0d0,bcc6b23c,Replace Picasso with Fresco in credits,"Replace Picasso with Fresco in credits

Replace Picasso with Fresco, add Fresco license, remove Picasso license

Bug: T126749
Change-Id: I9e54fc2be2158263867f2ecaaab417a9114f56f7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1455656301,1455656826,0aeafc950d487d3434de5b634014207771c40d5d
fd4838378a7e4fb2fe7173573a97a4b4e7a31982,fd483837,Log action extlink-always when user switches off Zero exit warnings,"Log action extlink-always when user switches off Zero exit warnings

This is a tentative implementation of the extlink-always action in
https://meta.wikimedia.org/wiki/Schema:WikipediaZeroUsage.

Apparently, in the exit intertitial dialog on the mobile web, there was
once an option to suppress further warnings and always continue.  I think
this is what Yuri had in mind when creating the schema.  But I can't
replicate that behavior.

If we decide to include such an option in our exit warning dialog, we can
log this action there, too, but manually switching off the warnings in the
settings also seems like an action that meets the criteria for logging
extlink-always.

Bug: T123748
Change-Id: I69ef8cf7dacf0266a4f51d5bf81c706434d6fb40
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1455313880,1455636700,adf959c0a90d76c6ba9ec48c2989abb1e03bddff
4c63de1ed2e2336f6d3336dea0c35507bdcaeb7e,4c63de1e,Log extlink action when appropriate,"Log extlink action when appropriate

A small number of Zero operators whitelist only certain language wikis.
This action logs when a user is not shown an exit interstitial despite
being potentially zero-rated based on IP address because the specific wiki
the user was on was in a non-zero-rated language.

An example of this is when a user is on a network owned by a provider that
zero-rates only English and French Wikipedias, and is browsing German
Wikipedia and clicks an external link.

Bug: T123748
Change-Id: Ia09b03c9e435303240e1ffe5a6e124827bcda582
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1455636421,1455636545,adf959c0a90d76c6ba9ec48c2989abb1e03bddff
adf959c0a90d76c6ba9ec48c2989abb1e03bddff,adf959c0,Implement custom strings and EventLogging for Wikipedia Zero,"Implement custom strings and EventLogging for Wikipedia Zero

Requested by the partnerships team for program compliance and better
analytics.

Other changes to Zero functionality:
-Removed redundant dialog when zero-rated connection is lost
-Reduced zero banner size/text size
-Add link to banner when bannerUrl setting is present

Also includes substantial refactoring of the Zero-related code for
easier ongoing maintenance.

Note: EL as implemented here deviates slightly from schema in returning
times for all actions, rather than only a subset, as a result of
subclassing TimedFunnel.  Additionally, I a few fields will be under
discussion in the task.

Bug: T123748
Change-Id: I993e8c4f99c766c7bd3ced3f8bb9c2ac14a49cb1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1455147343,1455577257,ac502f0894be991a6aef945719dff75f0b16ff6c
0aeafc950d487d3434de5b634014207771c40d5d,0aeafc95,"Merge ""Fix Wikipedia logo on About page""","Merge ""Fix Wikipedia logo on About page""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455547029,1455547029,"84d06b57f1b6a7c300f926545ad44fb17d8bfcad,09d66b6fbfcddf678eb54cd4ec3affdfcdfa60d2"
84d06b57f1b6a7c300f926545ad44fb17d8bfcad,84d06b57,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I3e1d5477f889ff525ef972714df3f4d1355f71fc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455504272,1455504272,3913195d951b053f9de19023bb7aa0488f373cdd
09d66b6fbfcddf678eb54cd4ec3affdfcdfa60d2,09d66b6f,Fix Wikipedia logo on About page,"Fix Wikipedia logo on About page

Bug: T104491
Change-Id: I9991619a30ca7108cd26e3de6b54f7d23ba31572
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1453310684,1455310650,3913195d951b053f9de19023bb7aa0488f373cdd
3913195d951b053f9de19023bb7aa0488f373cdd,3913195d,Change order of text highlight CAB actions,"Change order of text highlight CAB actions

The tooltip now points to the wrong CAB action since we introduced
the new Wiktionary definition action. This patch simply changes the
order of the actions and now the tooltip points to the correct one.

Bug: T124836
Change-Id: I17a24c3dae4ace4e758bcc2c2400ee80a3d6ad00
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1455249998,1455249998,ac502f0894be991a6aef945719dff75f0b16ff6c
ac502f0894be991a6aef945719dff75f0b16ff6c,ac502f08,"Merge ""Hygiene: add missing @Nullable annotation""","Merge ""Hygiene: add missing @Nullable annotation""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455239765,1455239765,"33a9bfb22b894f78fcafab812f93592992610e2f,6c1ae74c1eea5082488b594aab60cbfb37f7fc2b"
33a9bfb22b894f78fcafab812f93592992610e2f,33a9bfb2,"Merge ""Upgrade Gradle to v2.11""","Merge ""Upgrade Gradle to v2.11""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455230579,1455230579,"4436c784b6bfcd3dfd66862a607d7dc1c5304da9,d590d7e3d5587f07bfaf9b690efd6c646c3b8e9b"
6c1ae74c1eea5082488b594aab60cbfb37f7fc2b,6c1ae74c,Hygiene: add missing @Nullable annotation,"Hygiene: add missing @Nullable annotation

Change-Id: Ie5ff7828b184e029b18a049adee821effe9bc2ed
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455228595,1455228595,28743ff5fb1178837bef0c463c259d148ba30f4a
4436c784b6bfcd3dfd66862a607d7dc1c5304da9,4436c784,"Merge ""Ensure lead image has white background.""","Merge ""Ensure lead image has white background.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455228490,1455228490,"28743ff5fb1178837bef0c463c259d148ba30f4a,c4e5c4f4cbdcfd6d329cb944cbb612fadc00830c"
28743ff5fb1178837bef0c463c259d148ba30f4a,28743ff5,"Merge ""In gallery, fall back on sharing URL if sharing image fails.""","Merge ""In gallery, fall back on sharing URL if sharing image fails.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455227352,1455227352,"d6897ac12a0263dabe03250d773423d17cc29caa,a1a2247863f4fbe58364470defda4ea0e684fdd4"
c4e5c4f4cbdcfd6d329cb944cbb612fadc00830c,c4e5c4f4,Ensure lead image has white background.,"Ensure lead image has white background.

Modified the lead image postprocessor to explicitly set the bitmap
background to white. In other places where we load images, we set the View
background to white in XML, but this is not practical for the lead image
because it would ruin the fade + Ken Burns effect.

Bug: T126657
Change-Id: I6dc79030aab6fa16d0f8c3fdcf9994a29b27aa0f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1455226609,1455226609,441a8eac4b876a504a00fc614612be47b9da368e
d6897ac12a0263dabe03250d773423d17cc29caa,d6897ac1,"Merge ""Bring back pinch-to-zoom in gallery.""","Merge ""Bring back pinch-to-zoom in gallery.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455225720,1455225720,"6b3f7470b719b7d3a45909e465dd1b8587cd25ad,59c16c49f3671e9f258547fddc2615ddc0d1b8c0"
6b3f7470b719b7d3a45909e465dd1b8587cd25ad,6b3f7470,"Merge ""Preserve gallery activity on screen rotation.""","Merge ""Preserve gallery activity on screen rotation.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1455224203,1455224203,"441a8eac4b876a504a00fc614612be47b9da368e,7c8027086b395b667ce83cc938fe970d0dbfed56"
a1a2247863f4fbe58364470defda4ea0e684fdd4,a1a22478,"In gallery, fall back on sharing URL if sharing image fails.","In gallery, fall back on sharing URL if sharing image fails.

Bug: T125270
Change-Id: I19ae97b3c134f02b9226c1f696c1b2c2f3ebaba5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1455223395,1455223488,441a8eac4b876a504a00fc614612be47b9da368e
7c8027086b395b667ce83cc938fe970d0dbfed56,7c802708,Preserve gallery activity on screen rotation.,"Preserve gallery activity on screen rotation.

Sorry <3 but this fixes quite a few issues, and keeps the gallery nice and
responsive upon rotation. When viewing a video, the video even keeps
playing!

Bug: T117054
Bug: T107773
Bug: T102168
Change-Id: I83f406407c578406170ce79c65dd0c40ebf735fa
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1455208053,1455208053,9762ccfb4f969835292ae57088ee998de842ef5f
59c16c49f3671e9f258547fddc2615ddc0d1b8c0,59c16c49,Bring back pinch-to-zoom in gallery.,"Bring back pinch-to-zoom in gallery.

So, it looks like the Fresco repo contains a ""samples"" directory that
contains a ""ZoomableDraweeView"" that precisely suits our needs.
https://github.com/facebook/fresco/tree/master/samples/zoomable

Unfortunately, this is not yet part of the packaged distribution of
Fresco, so we need to package it ourselves for now, and keep an eye out
for updates.

Bug: T126164
Change-Id: I764a81e904f889318744a985fa197d4c1373c971
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1455138633,1455157160,9eeedcf4fa4ea5e37586012f0855c2f53422fa8b
441a8eac4b876a504a00fc614612be47b9da368e,441a8eac,Bump versionCode,"Bump versionCode

Change-Id: I33518596ec3bc1334d265ff07764b29e126b0da1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455140151,1455140151,9762ccfb4f969835292ae57088ee998de842ef5f
9762ccfb4f969835292ae57088ee998de842ef5f,9762ccfb,Add support for custom carrier exit interstitial messages,"Add support for custom carrier exit interstitial messages

Needed for Wikipedia Zero program compliance.  Further implementation
of exit interstitial messages needed after design consult with Kaity.

With this patch, Zero behavior prior to the change to desktop domains
is restored.

Bug: T119126
Change-Id: Ie616be2c87f2e70fd27248e0bbfc82bfffc51527
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1454701510,1455137504,0d8eeb6f85017e338cefd85f08dbaf78b7e9efd0
d590d7e3d5587f07bfaf9b690efd6c646c3b8e9b,d590d7e3,Upgrade Gradle to v2.11,"Upgrade Gradle to v2.11

https://docs.gradle.org/2.11/release-notes

Change-Id: Id6f8f9a6effa1afc5d7e92a840fc1570e80c1aed
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1455126644,1455126675,0d8eeb6f85017e338cefd85f08dbaf78b7e9efd0
0d8eeb6f85017e338cefd85f08dbaf78b7e9efd0,0d8eeb6f,Return to using mobile domain for zeroconfig requests,"Return to using mobile domain for zeroconfig requests

Needed for correct server-side behavior.

Change-Id: Ia5c01b62e7076e781a260835a67190e80ccc1586
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1455033823,1455033823,0a0dc05efce875da35a75e7bdc3c8cd530ff3311
0a0dc05efce875da35a75e7bdc3c8cd530ff3311,0a0dc05e,Remove MCC-MNC header enrichment,"Remove MCC-MNC header enrichment

Since 2014, we've been logging a sample of IP addresses and MCC-MNC
codes on the server side in order to remediate the drift of operator
exit IP addresses.[0]

Per Adam B. (with Dan Foy's blessing), nobody looks at this anymore, so
let's take it out.

[0] https://lists.wikimedia.org/pipermail/mobile-l/2014-April/006884.html

Change-Id: I16292968666bb61c4112909d218eba754f1fa085
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1455029421,1455032703,9eeedcf4fa4ea5e37586012f0855c2f53422fa8b
9eeedcf4fa4ea5e37586012f0855c2f53422fa8b,9eeedcf4,Prevent possible NPE when preparing options menu.,"Prevent possible NPE when preparing options menu.

https://rink.hockeyapp.net/manage/apps/226650/app_versions/11/crash_reasons/110289892

Change-Id: Ib5c88595bd8c2d9a6a38ad909ed438f3aa47bb23
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454950463,1454950554,d8cc8ac5e6ca322177aed2e5375ff11672acfdfb
d8cc8ac5e6ca322177aed2e5375ff11672acfdfb,d8cc8ac5,"Merge ""Fix possible NPE when showing retryable error.""","Merge ""Fix possible NPE when showing retryable error.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454949081,1454949081,"32dd5b437b9542fbabadb4a649f8436e45574fa9,c1d1a118f7cbd551411dc737dd3b863dde13dc68"
32dd5b437b9542fbabadb4a649f8436e45574fa9,32dd5b43,"Merge ""Fix possible crash when laying out tab list.""","Merge ""Fix possible crash when laying out tab list.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454948635,1454948635,"00a1c690c715516b251bc04f11c9e364fc5289be,e517dad676cbd11c8a9e7fdbb6c6285e8cb34775"
e517dad676cbd11c8a9e7fdbb6c6285e8cb34775,e517dad6,Fix possible crash when laying out tab list.,"Fix possible crash when laying out tab list.

Whenever we add or remove items in the list of tabs, we're required to
notify the tab list adapter, otherwise it can misbehave.

Bug: T126224
Change-Id: Iebb2b28b6e35f4ab56b267f1ca8b2cb62bd5b3eb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454946992,1454946992,90b935b656ac54df7224db6cdacdcf31da4b76c7
00a1c690c715516b251bc04f11c9e364fc5289be,00a1c690,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I9e882214d624dc3bc5d9cf550f93b5e57995bf52
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454909776,1454909776,90b935b656ac54df7224db6cdacdcf31da4b76c7
c1d1a118f7cbd551411dc737dd3b863dde13dc68,c1d1a118,Fix possible NPE when showing retryable error.,"Fix possible NPE when showing retryable error.

https://rink.hockeyapp.net/manage/apps/226650/app_versions/11/crash_reasons/110303802

Change-Id: I28a8cc7ae0ac510a0175f18848e8bc30b0f760bd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454700825,1454700825,90b935b656ac54df7224db6cdacdcf31da4b76c7
90b935b656ac54df7224db6cdacdcf31da4b76c7,90b935b6,"Merge ""Fix behavior of article toolbar in landscape mode.""","Merge ""Fix behavior of article toolbar in landscape mode.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454696336,1454696336,"86bd6f2ec35f57dffafd18f15cac4f4d8db34b63,1957aa1a10f7a3f03f134519bd676bd00550bc69"
1957aa1a10f7a3f03f134519bd676bd00550bc69,1957aa1a,Fix behavior of article toolbar in landscape mode.,"Fix behavior of article toolbar in landscape mode.

This is now done the following way:

- When the lead image is shown, we constrain the height of the TextView
  that holds the title+description, to fill the space between the top
  toolbar and the bottom menu bar.

- When the lead image is not shown, we *unconstrain* the TextView height,
  so that it's allowed to overflow the limit of some predefined fraction
  of the screen height. The menu bar then naturally follows after the end
  of the TextView. This is now also independent of landscape vs. portrait,
  so I removed the landscape-specific dimen.

- Previously, we had some rather complicated code that automatically
  resized the page title to fit within the lead image container. The thing
  is, in all my time of using the app, I've never stumbled on an article
  whose title needed to be resized this way (except deliberately). It
  would make the code much less fragile to remove this part entirely, and
  simply put a ""maxLines"" limit on the page title.

Bug: T125881
Change-Id: I021814582a8e4c3a1bbfdeebf2a3776c0aeed689
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454624258,1454692408,ed0a18d67d0cb4e1a1a7f8d0377c64804ce3e70b
86bd6f2ec35f57dffafd18f15cac4f4d8db34b63,86bd6f2e,"Merge ""Prevent possible crash when getting image via pipeline.""","Merge ""Prevent possible crash when getting image via pipeline.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454690309,1454690309,"816d381b44383f409c4c80ecfa4ae8208be3b962,31dabbdd627e61786d711ad26b637230b4ab0d89"
31dabbdd627e61786d711ad26b637230b4ab0d89,31dabbdd,Prevent possible crash when getting image via pipeline.,"Prevent possible crash when getting image via pipeline.

The exception will be fed to HockeyApp, but the user will just see a
toast.

T114658

Change-Id: Idc289beca38b61731e15cfff18995749a508b6de
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454642447,1454688575,ed0a18d67d0cb4e1a1a7f8d0377c64804ce3e70b
816d381b44383f409c4c80ecfa4ae8208be3b962,816d381b,"Merge ""Prevent crash in Wiktionary dialog.""","Merge ""Prevent crash in Wiktionary dialog.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454688415,1454688415,"a3b7980ea33450def33784a37a3a3e17398271ed,1ba47e7de4d478ee8bca6435ef1a2cb06b0068ee"
1ba47e7de4d478ee8bca6435ef1a2cb06b0068ee,1ba47e7d,Prevent crash in Wiktionary dialog.,"Prevent crash in Wiktionary dialog.

https://rink.hockeyapp.net/manage/apps/226650/app_versions/11/crash_reasons/110284431

Change-Id: I005f8d52517787d4155188aeef01ec3b026dddcb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454687515,1454687759,ed0a18d67d0cb4e1a1a7f8d0377c64804ce3e70b
a3b7980ea33450def33784a37a3a3e17398271ed,a3b7980e,Bump versionCode,"Bump versionCode

Change-Id: Ifc51f433776b495a20e59534ec3bb713fd6bb79d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454613790,1454613790,ed0a18d67d0cb4e1a1a7f8d0377c64804ce3e70b
ed0a18d67d0cb4e1a1a7f8d0377c64804ce3e70b,ed0a18d6,Hygiene: consolidate duplicate database URI logic,"Hygiene: consolidate duplicate database URI logic

No functional changes intended.

• Consolidate duplicate URI logic in DatabaseTable. In some cases, a
  database client was acquired by URI, in others, by authority. However,
  the underlying call to
  Context.getContentResolver().acquireContentProviderClient(Uri) makes
  an equivalent call to acquireContentProviderClient(String authority).
• Replace lazy initialization of DatabaseTable.baseContentURI with
  initialization in the constructor.
• Replace Uri.parse() with Uri.Builder; use content protocol symbol.

Change-Id: I61bd2376bfb12168bffa002ed91444a7ab600d61
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454608925,1454608925,7edfd233c9943dcbb9bde458f73668647daf4b64
7edfd233c9943dcbb9bde458f73668647daf4b64,7edfd233,"Merge ""Hygiene: remove needless type parameterization""","Merge ""Hygiene: remove needless type parameterization""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454597722,1454597722,"32278040577a223d658ddba2529c2b9dda37ed49,3053829c21615566195a8cf94d7d26a01d74b4c1"
32278040577a223d658ddba2529c2b9dda37ed49,32278040,"Merge ""Hygiene: update database and JSON Java packaging""","Merge ""Hygiene: update database and JSON Java packaging""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454597016,1454597016,"79d6fc79605f9e8f5c91ef87da7c45fd10cbce55,ef85dbc65da3a0df4b13b51760f07d30c7d744ee"
79d6fc79605f9e8f5c91ef87da7c45fd10cbce55,79d6fc79,"Merge ""Hygiene: rename ContentPersister to DatabaseClient""","Merge ""Hygiene: rename ContentPersister to DatabaseClient""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454596518,1454596518,"078a3188fc032abab53fa205b381479de4e9b227,91d422767bb2066a021e6806b5d92467c9f1191b"
078a3188fc032abab53fa205b381479de4e9b227,078a3188,"Merge ""Hygiene: rename PersistenceHelper to DatabaseTable""","Merge ""Hygiene: rename PersistenceHelper to DatabaseTable""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454596027,1454596027,"3849f07703ea6349e091a286945b960b14317188,66845a283f52ae29db3e2de3e7feca0f00dc7358"
3053829c21615566195a8cf94d7d26a01d74b4c1,3053829c,Hygiene: remove needless type parameterization,"Hygiene: remove needless type parameterization

Remove the type parameter on SQLiteContentProvider and replace usages
with wildcards. No specialization was necessary. No functional changes
intended.

Change-Id: I781f449ac6218b8c459af6047870320a9cf75ce9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454595083,1454595083,ef85dbc65da3a0df4b13b51760f07d30c7d744ee
3849f07703ea6349e091a286945b960b14317188,3849f077,Bring back testing of testwiki page,"Bring back testing of testwiki page

Follow up of Ic5c6aa391e47df1f0707281d0966eeb134a3fd57
Bug: T124124

Change-Id: I1de4b8bfb3f39a9fe6b0cf8769c972cfcfa524e2
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1454544705,1454544705,8432bc39bca70c58b5e6482f9e275352fd7e1fba
8432bc39bca70c58b5e6482f9e275352fd7e1fba,8432bc39,"Merge ""Hygiene: remove ContentPersister subclasses""","Merge ""Hygiene: remove ContentPersister subclasses""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454542583,1454542583,"e97d14d76b02f850f4cb31f2fc431aa11ad921b8,799f91b6a889a95cd0431da6371cc96b6023e8d7"
ef85dbc65da3a0df4b13b51760f07d30c7d744ee,ef85dbc6,Hygiene: update database and JSON Java packaging,"Hygiene: update database and JSON Java packaging

No functional changes.

• Move Database, DatabaseTable, DatabaseClient, and
  SQLiteContentProvider from org.wikipedia.data to
  org.wikipedia.database.
• Move GsonMarshaller, GsonUnmarshaller, GsonUtil,
  SessionUnmarshaller, and TabUnmarshaller from org.wikipedia.data to
  org.wikipedia.json.

Change-Id: I1e3e10d742bda36e70a31877ee5c07d3d2b6823b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454541804,1454542092,91d422767bb2066a021e6806b5d92467c9f1191b
e97d14d76b02f850f4cb31f2fc431aa11ad921b8,e97d14d7,"Merge ""Hygiene: make db feature version callback abstract""","Merge ""Hygiene: make db feature version callback abstract""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454541891,1454541891,"61530088b5904dfa5920cb75bc229196e06b49fb,c496995078f514b9a579808029b05517a18abbe7"
91d422767bb2066a021e6806b5d92467c9f1191b,91d42276,Hygiene: rename ContentPersister to DatabaseClient,"Hygiene: rename ContentPersister to DatabaseClient

• The app interacts with the database's tables through clients of type
  ContentPersister. Rename ContentPersister to DatabaseClient.
• Rename DBOpenHelper to Database. DBOpenHelper is a subclass of
  SQLiteOpenHelper, however, ""Helper"" is too generic a term and
  ""Database"" makes it clear there should only be one instance, and that DatabaseTable and DatabaseClient are closely related.
• Change WikipediaApp.getDatabaseClient() to use classes themselves
  instead of Class.getCanonicalName() for the keys.

Change-Id: I0a6adbf067ff34248b1bab743e5eb8967c7b6e59
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454541358,1454541358,66845a283f52ae29db3e2de3e7feca0f00dc7358
66845a283f52ae29db3e2de3e7feca0f00dc7358,66845a28,Hygiene: rename PersistenceHelper to DatabaseTable,"Hygiene: rename PersistenceHelper to DatabaseTable

There's a clear line of distinction between a ContentPersister and a
PersistenceHelper. A ContentPersister uses a ContentProviderClient to
interact with the underlying database table. A PersistenceHelper
interacts directly with the database to, for example, create a specific
table, upgrade a specific table, operate on a specific table's rows and
columns, and defines a Column nested class and the version of the
database that the table was added. Rename PersistenceHelper to
DatabaseTable so it's clear it has a lot to do with a specific table in
the database. No functional changes intended.

Change-Id: If80d7ea792a907b278e0894cf23c9694b605037d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454537787,1454537787,799f91b6a889a95cd0431da6371cc96b6023e8d7
61530088b5904dfa5920cb75bc229196e06b49fb,61530088,"Merge ""End A/B test of showing vs. hiding tooltips for highlighting text.""","Merge ""End A/B test of showing vs. hiding tooltips for highlighting text.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454536397,1454536397,"6cb5e9d841ae851cad995442ad7e736f60a5944d,e034a23bc89ce93e46a49794e849a8ff712bda20"
e034a23bc89ce93e46a49794e849a8ff712bda20,e034a23b,End A/B test of showing vs. hiding tooltips for highlighting text.,"End A/B test of showing vs. hiding tooltips for highlighting text.

We've seen that our tooltips are effective at helping user engagement with
new features, such as share-a-fact. There's no further need to A/B test
this functionality.

Change-Id: I2e6c08b1c0807c618c94d718cd228a38e06293c9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454527288,1454535470,234d9839387c6a5256ba58323c10306b83109433
6cb5e9d841ae851cad995442ad7e736f60a5944d,6cb5e9d8,"Merge ""Hygiene: move common logic to super base class""","Merge ""Hygiene: move common logic to super base class""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454533990,1454533990,"d67e1a4d305920ace9e06811b42112cc26f8cfe1,ebaa1466bb1f3814252b6f06a8c5d6033214e405"
d67e1a4d305920ace9e06811b42112cc26f8cfe1,d67e1a4d,Fix jerky auto-hide behavior of the Search bar when scrolling quickly.,"Fix jerky auto-hide behavior of the Search bar when scrolling quickly.

Apparently, SearchBarHideHandler had its own definition of human
scrolling, and was never updated to support the ""isHumanScroll"" parameter
that's automatically given by ObservableWebView.

Bug: T124810
Change-Id: Iee41bafc63d564a66866a2f5f9be8812e7c3e6b5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454527686,1454527903,234d9839387c6a5256ba58323c10306b83109433
799f91b6a889a95cd0431da6371cc96b6023e8d7,799f91b6,Hygiene: remove ContentPersister subclasses,"Hygiene: remove ContentPersister subclasses

No functional changes intended.

• Move ContentProviderClient acquisition logic to PersistenceHelper.
• Remove ContentPersister subclasses. The only value these classes had
  was in their constructors but is now in the subclasses of
  PersistenceHelper.
• Replace duplicate
  context.getContentResolver().acquireContentProviderClient() logic with
  calls to the new PersistenceHelper.acquireClient() method.
• Replace raw types in Wikipedia.persisters and getPersister() with
  parameterized types.

Change-Id: Ibe3f9c9ca984c4ccb1f5055c64a4ff2f73a001cb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454525248,1454525248,c496995078f514b9a579808029b05517a18abbe7
c496995078f514b9a579808029b05517a18abbe7,c4969950,Hygiene: make db feature version callback abstract,"Hygiene: make db feature version callback abstract

PersistenceHelper.getDBVersionIntroducedAt() defaulted to 1. This was
used implicitly by two subclasses but could accidentally be used by new
subclasses. Make this method abstract. No functional changes intended.

Change-Id: Ie8e57c8a554e31860dd932aefae01b84e61b2ecf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454521494,1454521494,ebaa1466bb1f3814252b6f06a8c5d6033214e405
ebaa1466bb1f3814252b6f06a8c5d6033214e405,ebaa1466,Hygiene: move common logic to super base class,"Hygiene: move common logic to super base class

Move common logic for acquiring a ContentProviderClient into the super
abstract base class. No functional changes intended.

Change-Id: I04ec4fdb9e273a1e785dfafe59871fd7ee4436ff
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454519276,1454519276,234d9839387c6a5256ba58323c10306b83109433
234d9839387c6a5256ba58323c10306b83109433,234d9839,Indicate success in ContentProvider.onCreate(),"Indicate success in ContentProvider.onCreate()

• The docs for ContentProvider.onCreate()[0] say to return ""true if
  the provider was successfully loaded, false otherwise."" Change the
  returned value to unconditionally true.

• Add missing @NonNull annotations to ContentProvider and
  PersistenceHelper subclasses.

• In ContentProvider subclasses, replace calls to
  getContext().getContentResolver().notifyChange() with a new method,
  notifyChange(). The new method also null checks for the unlikely
  scenario of being called in onCreate() when getContext() will return
  null to inhibit potential NPE warnings.

[0] http://developer.android.com/reference/android/content/ContentProvider.html#onCreate()

Change-Id: Ifc15554be4db3b46451561f91fe6c5384e007a4d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454431318,1454518749,d049d60e00965f7fc852e91517675d074971a845
d049d60e00965f7fc852e91517675d074971a845,d049d60e,Rework and improve sharing and saving media in gallery.,"Rework and improve sharing and saving media in gallery.

Apologies for the size of this patch; it's larger than originally
envisioned. However, as I started to work on fixing the initial crash, I
saw an opportunity to improve the whole thing, in the following ways:

- When sharing an image, we're now using the Fresco image pipeline (per
  their guidelines), and making a copy of the resulting bitmap for the
  purpose of sharing. It might look like the code asks Fresco to download
  the image again, but it's extremely likely that Fresco will pull the
  image from cache instead of going to the network, so this is OK.

- When saving an item, we ask ourselves: ""Is the user's intention to
  save the scaled-down image shown in our gallery, or the *original*
  full-resolution image from Commons?"" It's highly likely to be the
  latter. And also, when saving videos or other types of media, it
  *must* be the latter. The app now handles all of this correctly. We
  now switch to using Android's aptly-named DownloadManager, which
  handles downloading of files automatically, and even gives us a
  Notification for free (with a progress bar)! We then intercept the
  download completion event, and notify the device's MediaStore to
  update its Gallery app, so that it shows the new media items.

Bug: T125270
Change-Id: Ie5e742f6be911d591071dca1d801d7e47eee908f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454449302,1454512235,33f26221002e3967844a087c9da9ede9a529b8ea
33f26221002e3967844a087c9da9ede9a529b8ea,33f26221,"Hygiene: remove ""never happens"" comments from RTEs","Hygiene: remove ""never happens"" comments from RTEs

Remove ""this shouldn't happen"" type comments where RuntimeExceptions are
thrown. RTE subclasses are used for unchecked Exceptions but generic
RTEs are not thrown casually and indicate in themselves that the program
is expected to crash. No functional change intended.

Change-Id: I27030102504f447947bd3c5d6797c136152f069a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Niedzielski,sniedzielski@wikimedia.org,1454444283,1454444799,85377f155f75734980147a989f55c69147f50891
85377f155f75734980147a989f55c69147f50891,85377f15,"Merge ""Implement A/B test to measure CirrusSearch ""opening_text"" performance.""","Merge ""Implement A/B test to measure CirrusSearch ""opening_text"" performance.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454355393,1454355393,"17f9666e11ffce12b1d5a008bb96423b024218c2,b3e761607b3cbdb8b9112d9c4312ea5323226953"
b3e761607b3cbdb8b9112d9c4312ea5323226953,b3e76160,"Implement A/B test to measure CirrusSearch ""opening_text"" performance.","Implement A/B test to measure CirrusSearch ""opening_text"" performance.

Bug: T125393
Change-Id: I27a3c196b0a9129e9e25d763df5a8d68beb5dc46
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454345159,1454345159,26c544b57f0606fb39c8cd1a9e79b4d413aaf53f
17f9666e11ffce12b1d5a008bb96423b024218c2,17f9666e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I012bacca795d674e61f7c9a25d8c2d3b94b951f8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1454343155,1454343155,3bef7a96121bea265a630d2c7e3acf472ee075b6
3bef7a96121bea265a630d2c7e3acf472ee075b6,3bef7a96,"Merge ""Put RECEIVE_BOOT_COMPLETED permission into custom channel builds only.""","Merge ""Put RECEIVE_BOOT_COMPLETED permission into custom channel builds only.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1454099678,1454099678,"26c544b57f0606fb39c8cd1a9e79b4d413aaf53f,2b18cea8108b074dcbb305258186c7abf6ca0c41"
26c544b57f0606fb39c8cd1a9e79b4d413aaf53f,26c544b5,Don't use javascript bridge for copying to clipboard.,"Don't use javascript bridge for copying to clipboard.

When passing the text selection from the WebView to the Java layer, we
limit the number of characters on the WebView side, which is not a bad
thing, because a large enough selection can lead to an OOM error.

However, for the purpose of copying the selection to the clipboard, it can
be a hindrance to limit the number of characters, and is confusing to the
user. This patch copies the selected text by simulating a ""Ctrl-C""
keyboard event, and dispatches it to the WebView, which causes it to copy
the selection to the clipboard natively.

Additionally, this allows the copied text to preserve any *formatting*
and/or links, instead of simply copying plain text.

Change-Id: I935cf1d9dc8ac78650b76c6e8cfb758114dea4ac
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454082988,1454083503,d18fc51af9bed4b26cd99cd6b874870546243d12
2b18cea8108b074dcbb305258186c7abf6ca0c41,2b18cea8,Put RECEIVE_BOOT_COMPLETED permission into custom channel builds only.,"Put RECEIVE_BOOT_COMPLETED permission into custom channel builds only.

This puts the RECEIVE_BOOT_COMPLETED permission into the ""custom"" and
""dev"" flavors of the build, and leaves it out of the main build.

The receiver and intent-filter remain in place, but it simply won't be
called if the permission isn't present.

Bug: T125110
Change-Id: I294fa223280a6a4a7cb2f24bd1204ddc16dbc06d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1454012916,1454012916,d18fc51af9bed4b26cd99cd6b874870546243d12
d18fc51af9bed4b26cd99cd6b874870546243d12,d18fc51a,Whoops: Fix video thumbnail in gallery.,"Whoops: Fix video thumbnail in gallery.

CopyPasteException: I was loading the image into the wrong view.

Change-Id: Id31b5985d8e1facf76b1fee16fefe56aa42d0eeb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1453938716,1453938811,6fb790b2f3a9e5de0c1e0617fbd981b6645d5374
6fb790b2f3a9e5de0c1e0617fbd981b6645d5374,6fb790b2,"Merge ""Restore CSS class for overflowing wide images.""","Merge ""Restore CSS class for overflowing wide images.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453938444,1453938444,"82adae810ba1e84321750730f8c997725677631d,807181e2c231ef77fd6577ca1588870ce42f9807"
82adae810ba1e84321750730f8c997725677631d,82adae81,"Merge ""Fix white background for GIFs in gallery.""","Merge ""Fix white background for GIFs in gallery.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453936190,1453936190,"c7f8a6fdfa742904bb8eecdd135f2fb6ffaad239,d5d07fdeeeadd52f6c1bb8815b1723d36f02b1a5"
c7f8a6fdfa742904bb8eecdd135f2fb6ffaad239,c7f8a6fd,Add Kaity to list of contributors.,"Add Kaity to list of contributors.

Change-Id: I1cfb7a518179915719f91df7c98312ea939e24e2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1453934204,1453934204,0532e036dfe94290a8857a058df12159649f38b3
d5d07fdeeeadd52f6c1bb8815b1723d36f02b1a5,d5d07fde,Fix white background for GIFs in gallery.,"Fix white background for GIFs in gallery.

Bug: T124790
Change-Id: Ieffda45eebce85aacdd2d37727da50cf533102f9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1453932456,1453932456,0532e036dfe94290a8857a058df12159649f38b3
0532e036dfe94290a8857a058df12159649f38b3,0532e036,Update adb-setup to use all attached devices,"Update adb-setup to use all attached devices

Spoon better enables us to support testing on multiple devices
simultaneously. This patch updates adb-setup to operate on all attached
devices.

Change-Id: Idfee8c3ef8f65277f8b6c068d240290b169fba00
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1452814481,1453928998,30e439f8c71dd4f08434133a7e4b8602ad63ba50
807181e2c231ef77fd6577ca1588870ce42f9807,807181e2,Restore CSS class for overflowing wide images.,"Restore CSS class for overflowing wide images.

Somehow this had mysteriously disappeared, and was causing wide images to
make pages scroll horizontally.

Corresponding MobileApp patch:
https://gerrit.wikimedia.org/r/266910

Bug: T124961
Change-Id: I1371c9b23d7922f207e0691c1682426a50d5713e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1453928356,1453928356,30e439f8c71dd4f08434133a7e4b8602ad63ba50
30e439f8c71dd4f08434133a7e4b8602ad63ba50,30e439f8,"Merge ""Kickin' it with Fresco.""","Merge ""Kickin' it with Fresco.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453921324,1453921324,"e6f76a17065df6e35d273f02e9cc210da730708d,828730418ba3adb77351c796de1ecfe69bcd1ac3"
e6f76a17065df6e35d273f02e9cc210da730708d,e6f76a17,"Merge ""Remove @Expose Gson annotations""","Merge ""Remove @Expose Gson annotations""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453915270,1453915270,"5c6bc7ca7bb41b1484e97ecbfd17471e34b9f153,7a5dba4a09d42bd666de3608070817362047e49f"
828730418ba3adb77351c796de1ecfe69bcd1ac3,82873041,Kickin' it with Fresco.,"Kickin' it with Fresco.

NB1: This removes Picasso as well as PhotoView, because PhotoView does
not support Fresco-based views, so it can no longer provide the pinch-to-zoom
functionality that we so crave.
In a subsequent patch we'll restore pinch-to-zoom in the Gallery using a
different means.

NB2: This also restricts the native ABIs that get packaged into the APK,
since Mapbox doesn't come with arm64 libs, which causes link errors. Once
Mapbox is updated for arm64, we should remove the restriction.

Bug: T124733
Change-Id: I1edf132ee8a3ee50321bd5ab4c8ded9f1b1daad1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1452707376,1453912731,05bed48ae8b0a11b526eeba0315a840ab91ec1c2
5c6bc7ca7bb41b1484e97ecbfd17471e34b9f153,5c6bc7ca,"Merge ""Work around service failure on test wiki""","Merge ""Work around service failure on test wiki""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453909595,1453909595,"9623ed7ce05cd5c0d210864d8b441c504090692a,548ab53e459ad0f636ddaeb82a1a6206a904594a"
9623ed7ce05cd5c0d210864d8b441c504090692a,9623ed7c,"Merge ""Fail on page load error""","Merge ""Fail on page load error""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453909190,1453909190,"a4a316c3af7ce0adf4e134d376cff17c52a444de,3bada809eef895b446a6431504a1f5ad194331cd"
7a5dba4a09d42bd666de3608070817362047e49f,7a5dba4a,Remove @Expose Gson annotations,"Remove @Expose Gson annotations

Bug: T124375
Change-Id: Ie3c19fd26f99a989272a0db22a8b79e0e0ed55ae
",,,,Justin Du,justin.d128@gmail.com,Justin Du,justin.d128@gmail.com,1453842070,1453867930,a4a316c3af7ce0adf4e134d376cff17c52a444de
548ab53e459ad0f636ddaeb82a1a6206a904594a,548ab53e,Work around service failure on test wiki,"Work around service failure on test wiki

• Work around service failure on test wiki by using an equivalent page
  on English wiki for PageLoadTest.testPageFetchWithAmpersand().
• Make micro clean up in PageLoadTest.testPageFetch() to use implied
  test wiki.

Bug: T124124
Change-Id: Ic5c6aa391e47df1f0707281d0966eeb134a3fd57
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453760034,1453760034,a4a316c3af7ce0adf4e134d376cff17c52a444de
a4a316c3af7ce0adf4e134d376cff17c52a444de,a4a316c3,Fix validation of optional email field.,"Fix validation of optional email field.

This fixes things by creating a custom annotation.
Ideally we should switch to the @Optional annotation that should be
available in the next version of Saripaar. (It's technically exposed in
the current version, but not functional)
https://github.com/ragunathjawahar/android-saripaar/issues/102

Bug: T124240
Change-Id: Iecea7351eb884c975391678377e28d7c92849975
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1453754424,1453757521,05bed48ae8b0a11b526eeba0315a840ab91ec1c2
3bada809eef895b446a6431504a1f5ad194331cd,3bada809,Fail on page load error,"Fail on page load error

• Rename PageFragment.commonSectionFetchOnCatch() to onPageLoadError()
  for parity with onPageLoadComplete().
• Fail tests on page load error instead of timeout (currently 5
  minutes).

Change-Id: I9b240744576bbd17698267146c692a6e5245bf7f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453757158,1453757158,05bed48ae8b0a11b526eeba0315a840ab91ec1c2
05bed48ae8b0a11b526eeba0315a840ab91ec1c2,05bed48a,"Merge ""Respect ANDROID_SERIAL when executing Spoon tests""","Merge ""Respect ANDROID_SERIAL when executing Spoon tests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453753338,1453753338,"1935eb19011f46339449c2cfdd67205bd4d11d69,6104ae3a273722c78035a6e7a37ccc43c25d7e83"
1935eb19011f46339449c2cfdd67205bd4d11d69,1935eb19,Show cookies and edit tokens in dev settings,"Show cookies and edit tokens in dev settings

Change-Id: I3a8d3bd01cf33fcdd1a81d58b5871a5dc0a20d67
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1453684410,1453752580,52324d25a55cdddb516f594932739ed7dae08ecf
52324d25a55cdddb516f594932739ed7dae08ecf,52324d25,Fix cookie removal,"Fix cookie removal

• Check for expired cookies and remove them.
• Fix remove cookie logic to use name not value. Deleted cookies from
  old logins should not be retained when logging out and back in.

Change-Id: I1602b2fb5100722a982a2ca8a7c10da5c4a671bc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453683834,1453751878,ede66592fa949f0a7aac42bc17e7bf93d12af187
ede66592fa949f0a7aac42bc17e7bf93d12af187,ede66592,Hygiene: PreviewTaskTests to EditPreviewTaskTest,"Hygiene: PreviewTaskTests to EditPreviewTaskTest

Rename PreviewTaskTests test to ""ClassTest"" convention,
EditPreviewTaskTest.

Change-Id: Iead7b8e2776470683d150905721849f6c044a4a9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453749144,1453749144,67ea349f97f245efbd47c5f59b2931284b5c51a7
67ea349f97f245efbd47c5f59b2931284b5c51a7,67ea349f,Fix PreviewTaskTests,"Fix PreviewTaskTests

The service's HTML output has changed. Make the test a little less exact
and a little less fragile by just checking that the response contains
the input.

Change-Id: I6bc82f9fdcd7bd2b6362575ae159fe8ef819836c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453748943,1453748943,7895e4b17cb559b055f5b90700ccab0eb67f6f34
7895e4b17cb559b055f5b90700ccab0eb67f6f34,7895e4b1,Hygiene: refactor PreviewTaskTests,"Hygiene: refactor PreviewTaskTests

• Extracting subject usage to a private subclass that owns threading.
  This concern obscured the intent of the test with copious boilerplate.
• Upgrade test to JUnit 4.

Change-Id: Ic9dfafac39122c3ce209600a596e5f69f51f9989
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453748594,1453748882,014eaf6f92cae5fc03ce0852ad1547d5e2d91a91
014eaf6f92cae5fc03ce0852ad1547d5e2d91a91,014eaf6f,Hygiene: refer to interfaces not implementations,"Hygiene: refer to interfaces not implementations

No functional changes intended. Prefer interfaces to concrete
implementations for APIs and reference holding.

Depends-On: I1c564fa24cafe9ec68a96e263dfa3568a7c4509a
Change-Id: I73f5b8c6a1b42ee481c320168ae61708289dc9ab
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452188544,1453744590,487cbc97c3226d10706527da0c1b2fc842131234
487cbc97c3226d10706527da0c1b2fc842131234,487cbc97,"Merge ""Improve documentation of getEventLogSamplingID method in WikipediaApp""","Merge ""Improve documentation of getEventLogSamplingID method in WikipediaApp""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453743925,1453743925,"10bbe2535cf4c3fbafdb6ad1658e7ea7eccd7713,444cd3df6023081218ec001c133bf24e70f5f745"
6104ae3a273722c78035a6e7a37ccc43c25d7e83,6104ae3a,Respect ANDROID_SERIAL when executing Spoon tests,"Respect ANDROID_SERIAL when executing Spoon tests

Spoon does not respect ANDROID_SERIAL by default[0]. This can cause the
wrong devices to be tested.

[0] https://github.com/stanfy/spoon-gradle-plugin/issues/49

Change-Id: I9a480f301b4075690f171a96718d5c446870621b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453741552,1453742097,10bbe2535cf4c3fbafdb6ad1658e7ea7eccd7713
10bbe2535cf4c3fbafdb6ad1658e7ea7eccd7713,10bbe253,"Merge ""Hygiene: update to Gradle v2.10""","Merge ""Hygiene: update to Gradle v2.10""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453741194,1453741194,"9c1c4275898fe39fa7c5cee41986094d2a191476,c2b489ad24b0edb245661f853b34d6edb21b6766"
9c1c4275898fe39fa7c5cee41986094d2a191476,9c1c4275,Add provenance parameter when sharing text.,"Add provenance parameter when sharing text.

A bit late to the party, but still a nice thing to have.

Bug: T112146
Change-Id: I7a544551774e10d264d9250d1e045724b8612a99
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1453738748,1453740706,b5c7b0da95cd720a8aff72e57721f2f994486df7
b5c7b0da95cd720a8aff72e57721f2f994486df7,b5c7b0da,"Merge ""Hygiene: remove duplicate method""","Merge ""Hygiene: remove duplicate method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453740573,1453740573,"5b22d067a0de91b036d1f70c233f92f2e611e3a9,e8cc03c3aec1a92bb65a64a24671d4859a8610a5"
5b22d067a0de91b036d1f70c233f92f2e611e3a9,5b22d067,"Merge ""Hygiene: remove PageLoadUtil""","Merge ""Hygiene: remove PageLoadUtil""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453740306,1453740306,"f862f5f5d43f35000d9b3c671d5a02ad50a4a463,108d6353a4c9c7f1b3854d682560908fa58a2ad9"
f862f5f5d43f35000d9b3c671d5a02ad50a4a463,f862f5f5,"Merge ""Hygiene: rename Site usage from ""primary"" to ""app""""","Merge ""Hygiene: rename Site usage from ""primary"" to ""app""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453739859,1453739859,"6cf610772d70a217d61ce51bede1fbea875e596c,1692682eb82f90a3896e01c35a53db4c58421b31"
6cf610772d70a217d61ce51bede1fbea875e596c,6cf61077,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I09b3514d0b89d41a50aa3011933362e950577170
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453737636,1453737636,06c0614028c0750174b78bcf519e5a0298fefdf9
e8cc03c3aec1a92bb65a64a24671d4859a8610a5,e8cc03c3,Hygiene: remove duplicate method,"Hygiene: remove duplicate method

Change-Id: Ied63c835fad388443f99648f4fe1d2b7cba60747
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453672518,1453672518,06c0614028c0750174b78bcf519e5a0298fefdf9
c2b489ad24b0edb245661f853b34d6edb21b6766,c2b489ad,Hygiene: update to Gradle v2.10,"Hygiene: update to Gradle v2.10

https://docs.gradle.org/2.10/release-notes

Change-Id: I38fc712a44cbf067970e8c4166a151db49ef997e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453671800,1453671800,06c0614028c0750174b78bcf519e5a0298fefdf9
06c0614028c0750174b78bcf519e5a0298fefdf9,06c06140,Bump versionCode,"Bump versionCode

Change-Id: Iacedba80755cf337bc11b747e872b1ac53f9e8f6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453502792,1453502792,36d439851fa6f4f7120f678fd16c7988ba3f3912
36d439851fa6f4f7120f678fd16c7988ba3f3912,36d43985,"Use canonical MediaWiki & RESTBase API, not mobile","Use canonical MediaWiki & RESTBase API, not mobile

Remove the m. part from MW and RB endpoints.

Change-Id: I97db3c2da3d8ac42cfddd94f929bf30adb4196b2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453500475,1453501174,be46b29acf47b57b6bf251d705bd0f80e414c1ed
be46b29acf47b57b6bf251d705bd0f80e414c1ed,be46b29a,"Merge ""Update RbDefinition to reflect Wiktionary endpoint response changes""","Merge ""Update RbDefinition to reflect Wiktionary endpoint response changes""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453501150,1453501150,"5d5819c42f9ee6bfbdd46689ebae9f55403e8492,4f99cc1d1e8aac66d3c883f5e4d29c469f9d124f"
4f99cc1d1e8aac66d3c883f5e4d29c469f9d124f,4f99cc1d,Update RbDefinition to reflect Wiktionary endpoint response changes,"Update RbDefinition to reflect Wiktionary endpoint response changes

Needed to accommodate changes to the Wiktionary endpoint in
https://gerrit.wikimedia.org/r/#/c/265655/

Bug: T124321
Change-Id: Ib75d28585e1b520840eaf44d6e2a7e89b8b2d189
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1453482785,1453497606,50037ff167aedde52d18e7b15041a8f47317d321
5d5819c42f9ee6bfbdd46689ebae9f55403e8492,5d5819c4,Hygiene: consolidate duplicate code,"Hygiene: consolidate duplicate code

No functional changes intended.

Change-Id: I25dc3eeef9481542eb5db9756c8eea2b99865024
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1453408129,1453488954,bdebefab2ed24ad2dac5f3a7ccb4d85cb2ddcb19
444cd3df6023081218ec001c133bf24e70f5f745,444cd3df,Improve documentation of getEventLogSamplingID method in WikipediaApp,"Improve documentation of getEventLogSamplingID method in WikipediaApp

This patch improves the documentation of the getEventLogSamplingID method in
WikipediaApp, to make it clearer what it can and cannot be used for. This
should remove some ambiguity for any new contributors to the code base.

Change-Id: I03ba747cb123a6881b148c565bfbb487dd867662
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1453488079,1453488193,bdebefab2ed24ad2dac5f3a7ccb4d85cb2ddcb19
bdebefab2ed24ad2dac5f3a7ccb4d85cb2ddcb19,bdebefab,"Merge ""Hygiene: remove Hugo""","Merge ""Hygiene: remove Hugo""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453486453,1453486453,"bb93b03c4fcd2eacb0c37d5e37e65e6ea8b665d3,9b31400cdc31bcbfb8ce05537ab54c8cad9f797e"
bb93b03c4fcd2eacb0c37d5e37e65e6ea8b665d3,bb93b03c,Add Spoon and update page load tests,"Add Spoon and update page load tests

• Add Spoon and the Gradle plugin. These run like
  `gradlew spoonAlphaReleaseAndroidTest`.

• Update the page load tests with a few common cases. Currently,
  articles with images, without images, and RTL language. There's a lot
  more we can do but it's overwhelming for a single patch. This patch
  focuses on a few essentials.

Bug: T118099
Change-Id: I1ae94d279003efeb629d24cfc7c2b585036029db
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1445539105,1453485099,46cacf34ffc726fefd6afcf5f32c9c9cb503e3c4
46cacf34ffc726fefd6afcf5f32c9c9cb503e3c4,46cacf34,Bump versionCode,"Bump versionCode

Depends-On: Iaca32853b4b546364bac369b452b1caba5b05db7
Change-Id: I357ce345dc1501b1966e6fb6aafa94e258991639
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453442783,1453444158,d6c3805e0ce8f3fe7af4e66b9739cbf51b334f26
d6c3805e0ce8f3fe7af4e66b9739cbf51b334f26,d6c3805e,Remove expired cookies,"Remove expired cookies

Bug: T124252
Change-Id: Iaca32853b4b546364bac369b452b1caba5b05db7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453442373,1453444125,50037ff167aedde52d18e7b15041a8f47317d321
50037ff167aedde52d18e7b15041a8f47317d321,50037ff1,"Merge ""Upgrade to HockeyApp v3.7.0""","Merge ""Upgrade to HockeyApp v3.7.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453415678,1453415678,"1237aa2a0b10e5ed8df1e236d3c61b4acff57ce5,ffc31de0a54447d1562400865e3cfa32c5b01314"
108d6353a4c9c7f1b3854d682560908fa58a2ad9,108d6353,Hygiene: remove PageLoadUtil,"Hygiene: remove PageLoadUtil

PageLoadUtil is a middleman utility that's not carrying its weight.
Invoke ContentServiceFactory.create() directly and remove PageLoadUtil.
No functional changes intended.

Change-Id: I99e009fbdb4cbc439ba422a45e09539a8e841f70
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453410691,1453410691,1237aa2a0b10e5ed8df1e236d3c61b4acff57ce5
1692682eb82f90a3896e01c35a53db4c58421b31,1692682e,"Hygiene: rename Site usage from ""primary"" to ""app""","Hygiene: rename Site usage from ""primary"" to ""app""

""Primary"" is unclear. We have an app language (which still has some ties
to the system language) and an article language. Similarly, we have an
app site and an article site. Remove ""primary"" terminology and just use
""site"" when communicating with WikipediaApp. No functional changes
intended.

Change-Id: I1ca807abe0b90c9288ce3e9a8ee5145f49e21387
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453409240,1453409400,1237aa2a0b10e5ed8df1e236d3c61b4acff57ce5
1237aa2a0b10e5ed8df1e236d3c61b4acff57ce5,1237aa2a,Hygiene: consolidate ViewUtils,"Hygiene: consolidate ViewUtils

A second ViewUtil was unintentionally added. This patch merges them into
one.

Change-Id: I291428c55849a1517b286b992d40b52d66508c70
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453400908,1453400908,452a8132dfa38e3c676069bf62cebe9e282413b6
452a8132dfa38e3c676069bf62cebe9e282413b6,452a8132,"Merge ""Don't update the article header for the error page""","Merge ""Don't update the article header for the error page""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453310102,1453310102,"d68746dd9c545b2afa6b43c71c6d7054930b1b92,5fd80e45a1c59739a65bc9350fb6ba5fec292891"
d68746dd9c545b2afa6b43c71c6d7054930b1b92,d68746dd,"Merge ""Hide table of contents button when loading / error""","Merge ""Hide table of contents button when loading / error""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453310046,1453310046,"d6a9bb142e23524b06e52a2f77010c9dea25ee7b,4f1bb0f761ce527e2bb8c2525a73dee96cc3d399"
d6a9bb142e23524b06e52a2f77010c9dea25ee7b,d6a9bb14,"Merge ""Hygiene: replace attribute with style""","Merge ""Hygiene: replace attribute with style""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453309084,1453309084,"4c5bab2c0071a22bcdfccd767d5c9adb53bd383a,3c43d2530845f1732b6e47f472bf0069c20d672a"
4c5bab2c0071a22bcdfccd767d5c9adb53bd383a,4c5bab2c,"Merge ""Use production RESTBase URI for empty dev inputs""","Merge ""Use production RESTBase URI for empty dev inputs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453308796,1453308796,"7bebb1f8e03c521edd46a4cbd1bff4723d56421b,3037655893daf655fdb5639c1255328bc096b54e"
7bebb1f8e03c521edd46a4cbd1bff4723d56421b,7bebb1f8,"Merge ""Hide pull to refresh for 404 pages""","Merge ""Hide pull to refresh for 404 pages""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453308309,1453308309,"65aaa1d39d0f3d12a17729b720313e768798328a,f2bffcb95a76868721511cd53d2e6fac1ee7424a"
65aaa1d39d0f3d12a17729b720313e768798328a,65aaa1d3,"Merge ""Don't show the retry button for 404 errors""","Merge ""Don't show the retry button for 404 errors""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453307338,1453307338,"a9e2277cb9887ee06ef00be0e9889a15006ab7d6,cd483822f7baabc64c54541eefef716eb852310b"
ffc31de0a54447d1562400865e3cfa32c5b01314,ffc31de0,Upgrade to HockeyApp v3.7.0,"Upgrade to HockeyApp v3.7.0

Upgrade HockeyApp to v3.7.0[0]. Also, rename the activity_login.xml
layout file to work around a resource conflict in the new aar[1]. This
patch was tested for crash logging, crash report preference, remote
logging, and locale changes on the production release build variant.

[0] https://github.com/bitstadium/HockeySDK-Android/releases/3.7.0
[1] https://github.com/bitstadium/HockeySDK-Android/issues/121

Bug: T123579
Change-Id: Ia73343357adbea92480dace7a2a5c9a6f16093ff
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452836012,1453247203,1b5e5c43b778965c65e65061920ad45b73941edd
3c43d2530845f1732b6e47f472bf0069c20d672a,3c43d253,Hygiene: replace attribute with style,"Hygiene: replace attribute with style

Replace android:inputType=""textVisiblePassword"" attributes with new
style, DataStringPreference, for magic strings in the dev settings.

Change-Id: I68dd928fbef9e673c564fa4fa49bfedf4a3e81f2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453239412,1453239412,a9e2277cb9887ee06ef00be0e9889a15006ab7d6
3037655893daf655fdb5639c1255328bc096b54e,30376558,Use production RESTBase URI for empty dev inputs,"Use production RESTBase URI for empty dev inputs

It's very inconvenient to type the production Content Service URI if
previously testing with a different instance. Previously, if an empty
URI was specified, the app would crash. Now we check for a blank input
and use the production value in that case.

Change-Id: I06a87481cf7d1b4eac8e06f33927ee180e806881
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453234853,1453234853,ca895746ea149ab391ecf25a1e04f80c1c8fefc2
a9e2277cb9887ee06ef00be0e9889a15006ab7d6,a9e2277c,"Merge ""Hygiene: remove unused funnel""","Merge ""Hygiene: remove unused funnel""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453225924,1453225924,"ca895746ea149ab391ecf25a1e04f80c1c8fefc2,86a45a7a723e6eb77ded176c16d4f865c083fa8b"
5fd80e45a1c59739a65bc9350fb6ba5fec292891,5fd80e45,Don't update the article header for the error page,"Don't update the article header for the error page

The article header should not be shown for the error page. The header
was mistakenly updated on configuration change which caused the page to
display as an odd hybrid of error page and the previous wiki page
visited. This patch amends that behavior to only update when not on the
error page.

Bug: T120279
Change-Id: I2b35a6880aca9eda6805d0af1824497b855e22ef
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453220051,1453220051,4f1bb0f761ce527e2bb8c2525a73dee96cc3d399
ca895746ea149ab391ecf25a1e04f80c1c8fefc2,ca895746,Prevent crash after requesting empty definition from prod content service,"Prevent crash after requesting empty definition from prod content service

Sending an empty string to the production content service to request
a Wiktionary definition causes the app to crash (though oddly enough this
does not happen when running locally).  This adds a check to immediately
fire a ""no definitions found"" dialog rather than sending the request when
selectedText.trim() is empty.

Also added a minor fix to hide the progress bar consistently when the ""no
definitions found"" message is displayed.

Bug: T123783
Change-Id: Iba04e02e16ca5cd1d7d8723999f618c8995fa761
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1453218066,1453219260,0efbca87c6aeca943d45fdf53e1ef8b640d870a2
4f1bb0f761ce527e2bb8c2525a73dee96cc3d399,4f1bb0f7,Hide table of contents button when loading / error,"Hide table of contents button when loading / error

• The table of contents button was intentionally disabled while page
  contents loads. Now hide the button itself during page loads.

• Only show the table of contents button when page load completes
  successfully.

• Workaround FloatingActionButton.show() / hide() race condition.

Bug: T120391
Change-Id: Ib5e180e218322e45cad2396549340cdb12ef8ab4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453163751,1453217597,f2bffcb95a76868721511cd53d2e6fac1ee7424a
f2bffcb95a76868721511cd53d2e6fac1ee7424a,f2bffcb9,Hide pull to refresh for 404 pages,"Hide pull to refresh for 404 pages

• DRY up refresh article method. Refreshes are now always permitted for
  the page load error state but UI is only exposed when the error is not
  a 404.

• Error state is now reset on page refresh.

• Show error for refresh failures.

Bug: T120282
Bug: T120393
Change-Id: I7d48195ff3fd647fca6dfa56f2d39cc8066f34d2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453154181,1453217568,cd483822f7baabc64c54541eefef716eb852310b
cd483822f7baabc64c54541eefef716eb852310b,cd483822,Don't show the retry button for 404 errors,"Don't show the retry button for 404 errors

Replace the retry button with a ""go back"" button for HTTP errors that
are unrecoverable by retrying. The ticket only describes removing the
retry button but the dead end experience of an error with no obvious
way out feels overwhelming.

Bug: T120280
Bug: T120393
Change-Id: I44145e1a521e1d5f4de9793b1b22f8903ac9fdd8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453149639,1453217297,55014be4ec441184ea6f8423242089f3da9125b5
0efbca87c6aeca943d45fdf53e1ef8b640d870a2,0efbca87,"Merge ""Send DNT header if opted out of event logging.""","Merge ""Send DNT header if opted out of event logging.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453216206,1453216206,"77fa0b0cbfbe899d2b1f4d1a8f86ed6d2a44b44b,4ea68bc3f4f2b7cabda3e5f5fa236320dc95bf71"
4ea68bc3f4f2b7cabda3e5f5fa236320dc95bf71,4ea68bc3,Send DNT header if opted out of event logging.,"Send DNT header if opted out of event logging.

Bug: T108955
Change-Id: I473158b5f71ef63749d380c3b9cc4aa73ede0c40
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1453209747,1453212453,026b8ed03996d0683c62ff4d301a7181055d19b1
77fa0b0cbfbe899d2b1f4d1a8f86ed6d2a44b44b,77fa0b0c,"Merge ""Only define testAll* tasks for active build type""","Merge ""Only define testAll* tasks for active build type""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453210465,1453210465,"026b8ed03996d0683c62ff4d301a7181055d19b1,12f9c151b26ff4290cdcd319c4532300929850a4"
86a45a7a723e6eb77ded176c16d4f865c083fa8b,86a45a7a,Hygiene: remove unused funnel,"Hygiene: remove unused funnel

Remove ConnectionIssueFunnel (Schema:MobileWikiAppStuffHappens) which is
now unused.

Change-Id: Ie412dc6536897514d61f2924ccd24e5a1966921f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453154813,1453154813,55014be4ec441184ea6f8423242089f3da9125b5
026b8ed03996d0683c62ff4d301a7181055d19b1,026b8ed0,Retain preload channel ID,"Retain preload channel ID

We now keep the same package ID for OEM installs as the Play Store. This
is good for users and developers because everyone gets the same apk when
updates are made. This is bad for trackers because the preload channel
ID, a property of the original preloaded apk and different for upgraded
apks, was lost as soon as the phone was connected to the internet and
upgrades are downloaded. We now record the channel ID on first boot.

Bug: T115396
Change-Id: Iec363ee4b011dd70e457dcea733fc21551244def
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452900182,1453146056,55014be4ec441184ea6f8423242089f3da9125b5
55014be4ec441184ea6f8423242089f3da9125b5,55014be4,"Merge ""Remove code that falls back to HTTP""","Merge ""Remove code that falls back to HTTP""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1453134213,1453134213,"31c3c4fc141bdaf876ff972b398e35b471b17c76,cdbbefb3d378819a6c4d3a549ff503d159c6815b"
cdbbefb3d378819a6c4d3a549ff503d159c6815b,cdbbefb3,Remove code that falls back to HTTP,"Remove code that falls back to HTTP

Wikimedia is HTTPS only now, has no HTTP support

Bug: T123853
Change-Id: Ifb8abacdfd6e51ab63157f8eb64731c6cb4552a6
",,,,YuviPanda,yuvipanda@gmail.com,Stephen Niedzielski,stephen@niedzielski.com,1453006516,1453133935,1b5e5c43b778965c65e65061920ad45b73941edd
31c3c4fc141bdaf876ff972b398e35b471b17c76,31c3c4fc,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I9f65dadde1bda4c1229aefbc723d795fc97c7a2b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1453132295,1453132295,1b5e5c43b778965c65e65061920ad45b73941edd
12f9c151b26ff4290cdcd319c4532300929850a4,12f9c151,Only define testAll* tasks for active build type,"Only define testAll* tasks for active build type

testAll* Gradle tasks were defined for both debug and release build
types. These tasks have dependencies on connected*AndroidTest but these
exist only for one build type. This patch limits the creation of
testAll* tasks to the active build type.

Bug: T109616
Change-Id: I274a4f1a7140bf044ca6bd574ffa58886f706a7a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452986772,1452987030,1b5e5c43b778965c65e65061920ad45b73941edd
1b5e5c43b778965c65e65061920ad45b73941edd,1b5e5c43,"Merge ""Fix possible race condition when augmenting remaining sections with RB.""","Merge ""Fix possible race condition when augmenting remaining sections with RB.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452807170,1452807170,"9985f8c08c36d9c948557ee29a689b437832513b,2219da4f426dc49026e30c475797d7b761ec00e0"
9985f8c08c36d9c948557ee29a689b437832513b,9985f8c0,"Merge ""Fix implicit token usage in EditTaskTest""","Merge ""Fix implicit token usage in EditTaskTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452802615,1452802615,"3a96b378fa7a7a86325fab92a545d257845f9070,eea3a3671e417ac2e6ff84a4734eb807d50d8be6"
3a96b378fa7a7a86325fab92a545d257845f9070,3a96b378,"Merge ""Refactor and fix EditTaskTest""","Merge ""Refactor and fix EditTaskTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452801915,1452801915,"e68866c81f39202b68d86a497e3f4241a2c44a78,7fda6a4e4c4d1a40c9badbc61c01e77e7a83d564"
e68866c81f39202b68d86a497e3f4241a2c44a78,e68866c8,Add event logging for Wiktionary popup,"Add event logging for Wiktionary popup

Schema: https://meta.wikimedia.org/wiki/Schema:MobileWikiAppWiktionaryPopup

Bug: T121909
Change-Id: I20ee5380d6c6c784d440a720f923a9a63bd89153
",,,,Michael Holloway,mholloway@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1450892301,1452800851,bc75cb155735945e842571db6f6638ffcc339bec
bc75cb155735945e842571db6f6638ffcc339bec,bc75cb15,Implement Wiktionary definition dialog,"Implement Wiktionary definition dialog

An implementation of Wiktionary popups based on the existing
SwipeableBottomDialog component. Adds a ""define"" option to the CAB menu
that triggers a definition dialog containing definition(s) from
Wiktionary.

Currently limited to English Wiktionary -- other languages to be added
later.

Bug: T118737
Depends-On: Ie9bcaf3d6af9eadd92d04d999ed52315c7b3bfd3
Change-Id: I461d84ab241c26d4c34649afd09eafea6f8b11e2
",,,,Michael Holloway,mholloway@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1449081985,1452800481,4e59f412a7a6da22ce9111b17747b19bd8887dec
2219da4f426dc49026e30c475797d7b761ec00e0,2219da4f,Fix possible race condition when augmenting remaining sections with RB.,"Fix possible race condition when augmenting remaining sections with RB.

https://rink.hockeyapp.net/manage/apps/226650/app_versions/8/crash_reasons/98351549

Change-Id: I16ddd95cea47f5488423ab4ba496a2b9e67b4592
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1452791573,1452791573,4e59f412a7a6da22ce9111b17747b19bd8887dec
4e59f412a7a6da22ce9111b17747b19bd8887dec,4e59f412,Prevent possible NPE.,"Prevent possible NPE.

https://rink.hockeyapp.net/manage/apps/226650/app_versions/8/crash_reasons/99184406

Change-Id: I5e3a0ee49b3ebe77ff8511b67580d7c60a5c7ee2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1452789600,1452789600,5f77bce0ed4db1c0d4ca9da9a899c932bb708ce6
eea3a3671e417ac2e6ff84a4734eb807d50d8be6,eea3a367,Fix implicit token usage in EditTaskTest,"Fix implicit token usage in EditTaskTest

• Don't mix login and anonymous edit tokens in EditTaskTest. Since
  cookies are merged across domains, each test case now just clears all
  cookies. This was the behavior of the test last year. However, it was
  modified to be more exact by limiting the domain which introduced the
  subtle bug of including the login session token.

• Fix SharedPreferenceCookieManager.clearCookiesForDomain() to clear in
  memory cookies for the given domain. Previously this only updated
  nonvolatile storage.

Change-Id: I58b046d9b81313d2fb00a6546438f8990b2000dd
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452784825,1452785040,7fda6a4e4c4d1a40c9badbc61c01e77e7a83d564
7fda6a4e4c4d1a40c9badbc61c01e77e7a83d564,7fda6a4e,Refactor and fix EditTaskTest,"Refactor and fix EditTaskTest

EditTaskTest
• Fix testAbuseFilterTriggerWarn(). This requests exercises a warning,
  not an error. A second request will succeed or stimulate the warning.
  Now the test makes a second request as needed.
• There appears to still be one lingering and very rare bug around
  tokens in testAbuseFilterTriggerStopOnArbitraryErrorCode(), possibly
  T89702. The error message is, ""badtoken: Invalid token"". This may be
  addressed when more information is available.
• Remove token storage interaction. testEdit() was the only client
  actually using the token from storage and that token was cleared
  before access so the anonymous user token (+\) was always returned.
  Tokens are a separate concern and should be tested elsewhere.
• Improve the testing DSL by extracting subject usage to a private
  subclass that owns threading. This concern obscured the intent of the
  tests with copious boilerplate. Additionally, move common default
  values into the subclass.
• Require that the response of testCaptcha() be a CaptchaResult, not a
  SuccessEditResult. This test always seems to produce CaptchaResult
  responses.
• In testEdit(), verify edit success by checking the instanceof result
  instead of the result code magic string.
• In testEdit(), when the service indicates success, don't re-fetch the
  wikitext and verify the result. This is the concern of the service.
• In testEdit(), don't try to handle the exceptional case of the test
  running at the same time elsewhere. None of EditTaskTest tests play
  nicely when run in parallel.

EditTokenStorage
• Replace reference to implementation with reference to interface.

Change-Id: I75fe88ca71a7cbd3fcafed31d022e37bf1103c65
",,,,Stephen Niedzielski,stephen@niedzielski.com,Niedzielski,sniedzielski@wikimedia.org,1452634772,1452721980,5f77bce0ed4db1c0d4ca9da9a899c932bb708ce6
5f77bce0ed4db1c0d4ca9da9a899c932bb708ce6,5f77bce0,Fix share-a-fact cards when lead image scrolled away.,"Fix share-a-fact cards when lead image scrolled away.

Share-a-fact cards were no longer showing the background image correctly
because the underlying ImageView is now using a Matrix transform to
achieve the parallax effect, and it becomes incorrectly applied to the
share-a-fact card.

This patch simplifies things by letting the share-a-fact card access the
underlying Bitmap of the ImageView, instead of making the ImageView draw
itself onto a new Bitmap.

In the previous implementation, I see there was some concern regarding a
possible exception due to using a recycled bitmap, but I don't see how
this can happen, given our current way of drawing the card.

Bug: T123283
Change-Id: Iff4731499fe324f632c42543eeaa1b1ff157fddb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1452689988,1452689988,e937ee1e8245e556816183de14d278a05c3157af
e937ee1e8245e556816183de14d278a05c3157af,e937ee1e,Update event logging for intents.,"Update event logging for intents.

This adds event logging for the new ACTION_PROCESS_TEXT intent. It also
rolls widget-based launch events into the same schema, and also adds event
logging for the SEND intent, which we weren't logging previously.

https://meta.wikimedia.org/wiki/Schema:MobileWikiAppIntents

Bug: T121910
Change-Id: I318bf591d5b7a68023948464c656e35d09f0b6a5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1452652973,1452652973,861a238fa5ec7a3ef74a24d40fbfb7d76de29eb8
861a238fa5ec7a3ef74a24d40fbfb7d76de29eb8,861a238f,"Merge ""Hygiene: update CreateAccountTaskTest to JUnit 4""","Merge ""Hygiene: update CreateAccountTaskTest to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452620158,1452620158,"0340f65013e42be9b032535f25bb261f7325b204,4e77f9c277dbac10405c0b41bca1142290dcd96f"
0340f65013e42be9b032535f25bb261f7325b204,0340f650,"Merge ""Hygiene: misc EditTaskTest micro clean ups""","Merge ""Hygiene: misc EditTaskTest micro clean ups""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452619156,1452619156,"47a6efda8406761b569be063384e70c72df7775a,d7e18b5b0f3dbad70537152e15d5106b82b1d8ee"
47a6efda8406761b569be063384e70c72df7775a,47a6efda,"Merge ""Hygiene: rename test to ""ClassTest"" convention""","Merge ""Hygiene: rename test to ""ClassTest"" convention""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452618817,1452618817,"8f43712a30fa999a1164af6077443dbfe91eac2e,abab50729ffe46992d32ff39b15d3f3462282d81"
d7e18b5b0f3dbad70537152e15d5106b82b1d8ee,d7e18b5b,Hygiene: misc EditTaskTest micro clean ups,"Hygiene: misc EditTaskTest micro clean ups

- Consistently use test context.
- Replace +\ magic string with symbol.
- Replace Context state with method.

Change-Id: Ib0a5b30517619415fde9fbc5fa5f503b8f574726
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452548942,1452548942,8af03b88860eb886a3108ecb87b405abcdd0a933
8f43712a30fa999a1164af6077443dbfe91eac2e,8f43712a,Bump versionCode,"Bump versionCode

Change-Id: I8ad336c806e694ac755210b9a968a33d533577b8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452548194,1452548194,e630e886f4f61b9c6616e98158f1beaee385db9b
e630e886f4f61b9c6616e98158f1beaee385db9b,e630e886,"Merge ""Fix article header landscape height for short devs""","Merge ""Fix article header landscape height for short devs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452547907,1452547907,"8af03b88860eb886a3108ecb87b405abcdd0a933,c8120e60be7de4154668a83e70e3c5e30d12f9a4"
4e77f9c277dbac10405c0b41bca1142290dcd96f,4e77f9c2,Hygiene: update CreateAccountTaskTest to JUnit 4,"Hygiene: update CreateAccountTaskTest to JUnit 4

- Replace ActivityUnitTestCase super with JUnit 4.
- Extract subject usage to a private subclass that owns threading.

Change-Id: Ib4493387f9d46a597bb720da0446dc16522b943e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452535850,1452547435,abab50729ffe46992d32ff39b15d3f3462282d81
abab50729ffe46992d32ff39b15d3f3462282d81,abab5072,"Hygiene: rename test to ""ClassTest"" convention","Hygiene: rename test to ""ClassTest"" convention

Rename CreateAccountTokenTest to CreateAccountTaskTest since the test
subject is CreateAccountTask.

Change-Id: I24f7502af909d8aabfdb7ae3538bc6e55f5dcf95
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452534204,1452547339,8af03b88860eb886a3108ecb87b405abcdd0a933
8af03b88860eb886a3108ecb87b405abcdd0a933,8af03b88,"Merge ""Hygiene: use unchecked Exception for test timeout""","Merge ""Hygiene: use unchecked Exception for test timeout""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452544657,1452544657,"264aa7e4e08788e863597896d8fe2df87dcb1375,01f349e8511468d4a5944f0fd111f2b330354588"
c8120e60be7de4154668a83e70e3c5e30d12f9a4,c8120e60,Fix article header landscape height for short devs,"Fix article header landscape height for short devs

The article header height is calculated as a ratio. In landscape
orientation on short devices, this height was insufficent for the
page title, subtitle, and menu bar. This patch blanket increases the
ratio for landscape orientation.

Change-Id: Ibb17a2756d1761315d6975b5a0a72a76dc85cf38
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452544471,1452544471,ccc8153ad4225a32a0fa4f865d260b1633054a9c
264aa7e4e08788e863597896d8fe2df87dcb1375,264aa7e4,"Merge ""Hygiene: DRY up Espresso dependency versions""","Merge ""Hygiene: DRY up Espresso dependency versions""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452543807,1452543807,"b26de4f6f7fe85dc877eda411266244dda27da85,4449f5dc3818970bdc7ce11c22238061c0b703d5"
b26de4f6f7fe85dc877eda411266244dda27da85,b26de4f6,"Merge ""Make it possible to enable RESTBase for production""","Merge ""Make it possible to enable RESTBase for production""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452538216,1452538216,"be67919f383ed8791398b60f79e014e2381af30f,86c0d44668ab0c183c16445421f5c637893b2789"
be67919f383ed8791398b60f79e014e2381af30f,be67919f,"Merge ""Fix NPE in PageFragment.updateMenuPageInfo""","Merge ""Fix NPE in PageFragment.updateMenuPageInfo""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452537245,1452537245,"6f80e77e22b1561c47c3d22d36ffa825c382656a,c6acd622cc442be1d836e3ba398c6339616f3c9c"
86c0d44668ab0c183c16445421f5c637893b2789,86c0d446,Make it possible to enable RESTBase for production,"Make it possible to enable RESTBase for production

To actually enable RB we still need to add the config restbasePercent.

Change-Id: Icd4cea69ddc5a77b8ce2980e6b8fc4b4a9dda41e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1452534988,1452534988,6f80e77e22b1561c47c3d22d36ffa825c382656a
6f80e77e22b1561c47c3d22d36ffa825c382656a,6f80e77e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: If981ab97ecd8d590093b1ff85d65f63d2ae0d79a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452532287,1452532287,ccc8153ad4225a32a0fa4f865d260b1633054a9c
01f349e8511468d4a5944f0fd111f2b330354588,01f349e8,Hygiene: use unchecked Exception for test timeout,"Hygiene: use unchecked Exception for test timeout

Most of the time, the desired behavior for a TestLatch timeout is to
crash. Change the Exception type from checked to unchecked.

Change-Id: I7e55546f3ad3e4986fb8d4f2cf1a2dc42f7e5047
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452531403,1452531403,ccc8153ad4225a32a0fa4f865d260b1633054a9c
4449f5dc3818970bdc7ce11c22238061c0b703d5,4449f5dc,Hygiene: DRY up Espresso dependency versions,"Hygiene: DRY up Espresso dependency versions

Several Espresso dependencies should be versioned together. Consolidate
the version in a variable and reference appropriately.

Change-Id: I3463d5d1388b77279d37b80cbba13e4683b2d2cc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452530736,1452530736,ccc8153ad4225a32a0fa4f865d260b1633054a9c
c6acd622cc442be1d836e3ba398c6339616f3c9c,c6acd622,Fix NPE in PageFragment.updateMenuPageInfo,"Fix NPE in PageFragment.updateMenuPageInfo

Repro steps:

  1 Go to the Barack Obama article.
  2 Tap search and enter ""dog s"".
  3 Select the second entry while the results are loading.

Change-Id: Ieadd9d6ad2f980b0b2456ee7ceba551c0c9c6c60
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450289127,1452530343,ccc8153ad4225a32a0fa4f865d260b1633054a9c
ccc8153ad4225a32a0fa4f865d260b1633054a9c,ccc8153a,Remove unused method.,"Remove unused method.

Slipped by me in the previous patch.

Change-Id: Id1236f8e7923d7166a3ce72d1a704f1c9efae0ff
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1452276632,1452276632,b1d662ed33a1560795b7bfca608b130b2b19a1eb
b1d662ed33a1560795b7bfca608b130b2b19a1eb,b1d662ed,Hygiene: add @NonNull annotations to derivations,"Hygiene: add @NonNull annotations to derivations

Infer @NonNull annotations from super classes and usage.

Change-Id: I5258e2654ef679c10e504abe1118c1913df1e62f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1452189008,1452189008,06c389ecc8718bc812dbc0b55ea79e17922d2cff
06c389ecc8718bc812dbc0b55ea79e17922d2cff,06c389ec,"Merge ""Fix memory issues when switching between different Fragments.""","Merge ""Fix memory issues when switching between different Fragments.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452186950,1452186950,"e02f8998a84bb6411ab1d98ac74cf88ea9ec3d55,2a261dc2c2664707f63ad726d505d8a27b928c7c"
e02f8998a84bb6411ab1d98ac74cf88ea9ec3d55,e02f8998,"Merge ""Directly reference static field in persistence helpers without instances""","Merge ""Directly reference static field in persistence helpers without instances""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452129860,1452129860,"393fec4f984fe78854bce6baff114c50c0fabffa,65512fbd4a4fc8ed7d019567b2ee12cabe596a4b"
2a261dc2c2664707f63ad726d505d8a27b928c7c,2a261dc2,Fix memory issues when switching between different Fragments.,"Fix memory issues when switching between different Fragments.

...In which I slightly modify (simplify?) the way we place and exchange our various
fragments inside the container view in our Activity.

This seems to stabilize memory usage when changing back and forth between PageFragment
and other fragments, which is the leading cause of OOM errors at the moment.

This shouldn't change any UX behavior (e.g. back button logic, etc).

Bug: T121759
Change-Id: I745a31f23030b60575cd1b071eabc49c092a1b30
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1452126287,1452126723,393fec4f984fe78854bce6baff114c50c0fabffa
393fec4f984fe78854bce6baff114c50c0fabffa,393fec4f,"Merge ""Prevent app from inserting HTML tags into edit summaries""","Merge ""Prevent app from inserting HTML tags into edit summaries""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1452106600,1452106600,"488506d8fe5c737560b63c23c1be1c84953efa8d,f01919fbdf753892b1cd66659b5b52f7f70a54c5"
488506d8fe5c737560b63c23c1be1c84953efa8d,488506d8,Fix Javadoc errors in MccMncStateHandler class,"Fix Javadoc errors in MccMncStateHandler class

This patch fixes a few Javadoc errors in the MccMncStateHandler class.

Change-Id: I5b7659f215875e87a1c4f117eacf52f7f3ac3a83
",,,,Dan Garry,dgarry@wikimedia.org,Dan Garry,dgarry@wikimedia.org,1451883701,1451883701,2ecbf5662a1565c55ad5aca1ad1fe5757fd932fc
65512fbd4a4fc8ed7d019567b2ee12cabe596a4b,65512fbd,Directly reference static field in persistence helpers without instances,"Directly reference static field in persistence helpers without instances

I'm unsure whether or not this will improve performance, but I think it
improves code readability since it's more clear at a glance what it is
actually happening.

Change-Id: I1285205fb00803492375740dd6a69ff088b7d65e
",,,,Dan Garry,dgarry@wikimedia.org,Dan Garry,dgarry@wikimedia.org,1451626066,1451626330,2ecbf5662a1565c55ad5aca1ad1fe5757fd932fc
f01919fbdf753892b1cd66659b5b52f7f70a54c5,f01919fb,Prevent app from inserting HTML tags into edit summaries,"Prevent app from inserting HTML tags into edit summaries

Presently, in some circumstances, the app can insert HTML tags into edit
summaries, which doesn't make much sense since edit summaries are
plaintext. This patch prevents that from occurring by stripping any HTML
in the edit summary at the last minute.

Bug: T122714
Change-Id: I339794acdd9cc28650058283aa3789e43429074b
",,,,Dan Garry,dgarry@wikimedia.org,Dan Garry,dgarry@wikimedia.org,1451625254,1451625254,2ecbf5662a1565c55ad5aca1ad1fe5757fd932fc
2ecbf5662a1565c55ad5aca1ad1fe5757fd932fc,2ecbf566,Hygiene: fix SyntaxHighlighter/Test,"Hygiene: fix SyntaxHighlighter/Test

• Fix always false instanceof test assertions:

  ✗ assertThat(result.getClass(), instanceOf(Expected.class))
  ✓ assertThat(result, instanceOf(Expected.class));

• Move callback invocation to main thread. In general, UI callbacks are
  expected to be invoked on the main thread.

• Move test's anonymous inline callback to a static nested class that
  just exposes a latch interface. Inline creation blows the method
  count and increases the indentation level which decreases readability
  and often discourage DRYness.

• Use test's new latched callback to just wait until the AsyncTask is
  done and then perform assertions on the data in the test thread.
  Assertion failures in AsyncTasks seem to actually kill the runner
  instead of just failing a single test. I'm not 100% sure on this.

• Add @VisibleForTesting to OnSyntaxHighlightListener so the reader
  knows this is test-only code. Bubble the interface to the top of the
  class so it's better delineated from the data.

• Replace Activity parameter with ContextThemeWrapper. CTW is needed to
  get themed attributes but Activities are heavy to test.

• Initialize handler member prior to setting a listener that could
  invoke it.

• Drop onCatch logging and isCancelled check. These are already done in
  SaneAsyncTask.

Change-Id: I8ba3c2d014e6a1afa021d17fb40d2c9ad8775d2a
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1450398879,1450462039,49e0de7bd59e2cd108bb95abc34afa9a54f97128
49e0de7bd59e2cd108bb95abc34afa9a54f97128,49e0de7b,Hygiene: refactor common page load test code,"Hygiene: refactor common page load test code

- Move code common to page load tests from PageActivityTests to abstract
  BasePageLoadTest. Move page load tests from PageActivityTests to
  PageLoadTest and convert them from JUnit 3 to 4.
- Move latched PageLoadCallbacks from PageActivityTests and
  PageLoadPerformanceTests to PageLoadLatchCallback.
- Reparent PageLoadPerformanceTests to BasePageLoadTest and use common
  code.

Change-Id: I26844deabef522d8f04e562183c505474fb12ca6
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1450373028,1450457915,5ebcdf75b9005225a6c2ac8584f2df408feaceff
5ebcdf75b9005225a6c2ac8584f2df408feaceff,5ebcdf75,Reset Android emulator clock before running tests,"Reset Android emulator clock before running tests

The Android emulator clock is often significantly out of sync. This
causes network failures like:

  java.lang.RuntimeException: org.mediawiki.api.json.ApiException: javax.net.ssl.SSLHandshakeException: com.android.org.bouncycastle.jce.exception.ExtCertPathValidatorException: Could not validate certificate: current time: Fri Sep 04 09:18:17 GMT+00:00 2015, validation time: Thu Dec 10 23:22:05 GMT+00:00 2015

This patch resets the clock to the current time.

[0] https://integration.wikimedia.org/ci/job/apps-android-wikipedia-periodic-test/263/console

Change-Id: I37a6a0b48aa7df902975b9522d63a1fb54e8234a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450369809,1450369809,ef3e04e6c8ba67c5c218c60f1bf526f07b9a7461
ef3e04e6c8ba67c5c218c60f1bf526f07b9a7461,ef3e04e6,"Merge ""Hygiene: move lead views to leadimages package""","Merge ""Hygiene: move lead views to leadimages package""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450364575,1450364575,"fa5c8d2e7e60fc5cbe4f4af71696cea686fc2f59,8fb7f925b96505a7f68b088e7e63e3d755edc185"
fa5c8d2e7e60fc5cbe4f4af71696cea686fc2f59,fa5c8d2e,"Merge ""Show Norwegian when device language is Norwegian""","Merge ""Show Norwegian when device language is Norwegian""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450300311,1450300311,"a7685074590062047a735ba7da54062626f22557,8e9125be725e25ad580d4bcd0b033455d409e53c"
8e9125be725e25ad580d4bcd0b033455d409e53c,8e9125be,Show Norwegian when device language is Norwegian,"Show Norwegian when device language is Norwegian

Was falling back to English before.

Bug: T114042
Change-Id: I08cb4c3a073709d334d8450e450a11c09bcb685e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1450298900,1450298900,43e845443102d54eeb6462a7534482bcbdb15b76
9b31400cdc31bcbfb8ce05537ab54c8cad9f797e,9b31400c,Hygiene: remove Hugo,"Hygiene: remove Hugo

I haven't used this plugin in a long while. I don't think anyone else is
either.

Change-Id: Ic7c9b2e0e9583b1e3044da3eb30bab2ab8854332
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450294786,1450294814,a7685074590062047a735ba7da54062626f22557
a7685074590062047a735ba7da54062626f22557,a7685074,Remove configurable concurrency from SaneAsyncTask.,"Remove configurable concurrency from SaneAsyncTask.

Change-Id: I343fa6dfe4419fe1b72d1ce1e0da9e706092b448
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1450197409,1450291682,43e845443102d54eeb6462a7534482bcbdb15b76
43e845443102d54eeb6462a7534482bcbdb15b76,43e84544,Fix display of thumbnails in Disambig list.,"Fix display of thumbnails in Disambig list.

Just noticed that the thumbnails were no longer showing.
e.g. see the similar pages list in [[Barack Obama]]

Change-Id: I53ccf67421ac1db6570d69f38501fa4f80f3767b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1450278711,1450278816,c176f448c0f79c76080b54ca6ba54110f5aaf2ce
c176f448c0f79c76080b54ca6ba54110f5aaf2ce,c176f448,"Merge ""Display proper title when saving page from menu.""","Merge ""Display proper title when saving page from menu.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450278441,1450278441,"b8989fcc6b09d87e3bf3b828164b18edd7fa3e7c,de17d1a5428572a4f7f54c77ba1a867a918f7d76"
b8989fcc6b09d87e3bf3b828164b18edd7fa3e7c,b8989fcc,Upgrade Saripaar to v2.0.3,"Upgrade Saripaar to v2.0.3

- Upgrade Saripaar to v2.0.3[0].
- Update annotations and API usage in CreateAccountActivity.

[0] https://github.com/ragunathjawahar/android-saripaar/compare/android-saripaar-1.0.3...android-saripaar-2.0.3

Change-Id: I4ce376606050a3970fe1f0216d674f2b39bcc68e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1450207215,1450277377,f7509396ac45d7cc39e970ef7da874a212711bc9
f7509396ac45d7cc39e970ef7da874a212711bc9,f7509396,Fix saved page status bugs,"Fix saved page status bugs

Change-Id: I595a19b722ad7a7764a3fe865bf232e91351f4df
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1450201054,1450276694,4d9925e3db4b3792e6b39bc1a1973670765b77be
4d9925e3db4b3792e6b39bc1a1973670765b77be,4d9925e3,Hygiene: rename page loading methods,"Hygiene: rename page loading methods

Rename verbose page loading methods where the class responsibility
implies function.

- Rename PageActivity/Fragment.displayNewPage and friends to loadPage.
  These classes are primarily responsible for loading and displaying
  pages. The client should expect that pages need to be loaded to be
  displayed but that the class is responsible for any page load request
  from inception to displaying. ""Page"" may be dropped in the future, but
  currently these classes have many responsibilities so the distinction
  is still useful.
- Rename Json/PageLoadStrategy.onDisplayNewPage to load. From the
  perspective of the strategy, this method actually initiates a loading
  sequence and is not a callback terminus. ""load"" was chosen because a
  page load strategy should only load one thing, pages. Similarly,
  rename loadPageFromBackStack to loadFromBackStack and a couple helper
  methods in JPLS.
- Rename Json/PageLoadStrategy.onBackPressed to popBackStack since
  popping the back stack is its primary responsibility and it is a
  sequence initiator not a terminus. It may be called from a Fragment's
  onBackPressed, but that's not its concern nor its limitation.
  Additionally, consolidate a private JPLS helper method.
- Group Json/PageLoadStrategy methods in the interface and
  implementation according to function.

No functional changes intended.

Change-Id: Ie8279bbd8624694bc9ab247d18a0a3dd421ea6f5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1450138457,1450276033,c2b57fe101af4ef0972c3f8dba3ecf3d1f530543
de17d1a5428572a4f7f54c77ba1a867a918f7d76,de17d1a5,Display proper title when saving page from menu.,"Display proper title when saving page from menu.

Bug: T121471
Change-Id: Ia9a442139a7315cf8f2e255f846a64233825d5b1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1450274939,1450274939,c2b57fe101af4ef0972c3f8dba3ecf3d1f530543
8fb7f925b96505a7f68b088e7e63e3d755edc185,8fb7f925,Hygiene: move lead views to leadimages package,"Hygiene: move lead views to leadimages package

These views weren't meant to be generic and are more appropriate under
the leadimages package where they're used.

Change-Id: I9086c2a78b4ae9ef2dced7b23ccd9319860851d9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450218261,1450227478,c2b57fe101af4ef0972c3f8dba3ecf3d1f530543
c2b57fe101af4ef0972c3f8dba3ecf3d1f530543,c2b57fe1,"Merge ""Hygiene: update language list and templates""","Merge ""Hygiene: update language list and templates""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450216328,1450216328,"fefd4fab4c45e193de460e2d2d42f11a9218c018,baa4189907bbdd07f820ed8c93e4ac01e1fca7ed"
baa4189907bbdd07f820ed8c93e4ac01e1fca7ed,baa41899,Hygiene: update language list and templates,"Hygiene: update language list and templates

Run generate_wiki_languages.py and make-templates.py.

Change-Id: Ibb98fbce846fce9c2a5b24c6f6976d3aeebba91a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1450202612,1450215266,df7edb617718c34527f6023b85722214240adeb4
fefd4fab4c45e193de460e2d2d42f11a9218c018,fefd4fab,Hygiene: upgrade OkHttp to v2.7.0,"Hygiene: upgrade OkHttp to v2.7.0

- Upgrade OkHttp to v2.7.0[0] and centralize library version strings.
- Also centralize Android Support library version strings.

[0] https://github.com/square/okhttp/blob/master/CHANGELOG.md#version-270

Change-Id: I87265a956d69f93e8f849ea7328b69a8aa11f579
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450209151,1450215218,df7edb617718c34527f6023b85722214240adeb4
df7edb617718c34527f6023b85722214240adeb4,df7edb61,"Merge ""Hygiene: upgrade Gson to v2.5""","Merge ""Hygiene: upgrade Gson to v2.5""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450215067,1450215067,"64594d201ff77d6a5c814d820cd8f0ca322fedef,c4d2fbe3d8d4e18d533aa1f97f60011565de7e98"
c4d2fbe3d8d4e18d533aa1f97f60011565de7e98,c4d2fbe3,Hygiene: upgrade Gson to v2.5,"Hygiene: upgrade Gson to v2.5

We should have upgraded[0] this sooner:

> Improved Date Deserialization by accepting many date formats

[0] https://github.com/google/gson/blob/master/CHANGELOG.md#version-25

Change-Id: I8cd9ddfb1ca6c244a51ca688f2b51b945ad657ef
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450209365,1450213205,adc2f844bdc1cdba664e51a8e87ebd57310293d9
64594d201ff77d6a5c814d820cd8f0ca322fedef,64594d20,Hygiene: upgrade Picasso to v2.5.2,"Hygiene: upgrade Picasso to v2.5.2

https://github.com/square/picasso/blob/master/CHANGELOG.md#version-252-2015-03-20

Change-Id: If5f0d3ce01e0d7c9d6e1f168ac0fade47bfe1fd0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450207495,1450213073,adc2f844bdc1cdba664e51a8e87ebd57310293d9
adc2f844bdc1cdba664e51a8e87ebd57310293d9,adc2f844,"Merge ""Hygiene: upgrade Otto to v1.3.8""","Merge ""Hygiene: upgrade Otto to v1.3.8""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450211997,1450211997,"b6343def511f2b0a8b580478707c11fc8095ab3f,50288f86182549b10412504db0419dd99a1b88d3"
b6343def511f2b0a8b580478707c11fc8095ab3f,b6343def,"Merge ""Upgrade to PhotoView v1.2.4""","Merge ""Upgrade to PhotoView v1.2.4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450211495,1450211495,"0592e45595dc22eccb64d5839ff07cae101a13a9,8cc5c401ebfbf3bc2379fec34cfb05533dc37cfd"
0592e45595dc22eccb64d5839ff07cae101a13a9,0592e455,"Merge ""Fix initial keyboard focus of app language picker""","Merge ""Fix initial keyboard focus of app language picker""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450211114,1450211114,"a3e19805257e2906392b6ad85755abb12022a821,436f525b4af38c94e1b36314af7a9fb482c09316"
a3e19805257e2906392b6ad85755abb12022a821,a3e19805,"Merge ""Set menu color to the dominant color of the lead image.""","Merge ""Set menu color to the dominant color of the lead image.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450209994,1450209994,"8b5d8507e891db909420ff0f5bee58a2f33ece99,f7d2df0034a2c61e9cd60774db3e339241548eee"
f7d2df0034a2c61e9cd60774db3e339241548eee,f7d2df00,Set menu color to the dominant color of the lead image.,"Set menu color to the dominant color of the lead image.

Change-Id: I46f4436631fcf6403fbea876ea3611b7becca13a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1450137430,1450209149,7ed68bb55a259b2afd0ac9b2b9e819d9289850c1
50288f86182549b10412504db0419dd99a1b88d3,50288f86,Hygiene: upgrade Otto to v1.3.8,"Hygiene: upgrade Otto to v1.3.8

https://github.com/square/otto/blob/master/CHANGELOG.md#version-138-2015-06-17

Change-Id: I79997137a730227fdaa43300aea1c679cb86ccb5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450208181,1450208181,8b5d8507e891db909420ff0f5bee58a2f33ece99
8cc5c401ebfbf3bc2379fec34cfb05533dc37cfd,8cc5c401,Upgrade to PhotoView v1.2.4,"Upgrade to PhotoView v1.2.4

- Upgrade to PhotoView v1.2.4[0].
- Add a crash if not fixed line to FixedViewPager. The bug this class
  worked around is marked for the v1.2.4 milestone but the discourse in
  the issue[1] is conflicting.

[0] https://github.com/chrisbanes/PhotoView/compare/v1.2.3...v1.2.4
[1] https://github.com/chrisbanes/PhotoView/issues/206

Change-Id: I8b37cf5ab746288eb548a9c2343681f7f16c45e8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450206987,1450206987,436f525b4af38c94e1b36314af7a9fb482c09316
436f525b4af38c94e1b36314af7a9fb482c09316,436f525b,Fix initial keyboard focus of app language picker,"Fix initial keyboard focus of app language picker

Change-Id: I5732ce966c7a2f5c3029502dad52e77f94250e11
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450205384,1450205384,8b5d8507e891db909420ff0f5bee58a2f33ece99
8b5d8507e891db909420ff0f5bee58a2f33ece99,8b5d8507,"Merge ""Wiktionary definition icon""","Merge ""Wiktionary definition icon""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450191325,1450191325,"7ed68bb55a259b2afd0ac9b2b9e819d9289850c1,d0b78a990adfa3dce357c023dc37d6b12e1d018e"
d0b78a990adfa3dce357c023dc37d6b12e1d018e,d0b78a99,Wiktionary definition icon,"Wiktionary definition icon

Bug: T114949
Change-Id: Ie2ec62e1b4663e6c2d14a9abc4e974746791319e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1450133627,1450133627,bfc96ad0dc2d1a8da9136252ad566a2375c72fce
7ed68bb55a259b2afd0ac9b2b9e819d9289850c1,7ed68bb5,Add long-press hints for article menu buttons.,"Add long-press hints for article menu buttons.

Also tweak the background style of the buttons to look more like standard
toolbar buttons.

Change-Id: I315a9bdc2e0fc840674fd9a8c1ddb53c8afec67d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1450126004,1450130374,463089a8aa12c4c9ed10626884307c698071e1d1
463089a8aa12c4c9ed10626884307c698071e1d1,463089a8,"Merge ""Hygiene: consolidate PageLoadStrategy init methods""","Merge ""Hygiene: consolidate PageLoadStrategy init methods""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450128191,1450128191,"bfc96ad0dc2d1a8da9136252ad566a2375c72fce,585cddcc72f577e2c909ab27e4fbeb51d9c69a5a"
bfc96ad0dc2d1a8da9136252ad566a2375c72fce,bfc96ad0,"Merge ""Make EditTaskTest more reliable""","Merge ""Make EditTaskTest more reliable""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450127837,1450127837,"461f25f28b538cb6ad54702ef88ab59b81a5c830,8ca4e88961c535d43f815c5aaf46c703b18fba4a"
461f25f28b538cb6ad54702ef88ab59b81a5c830,461f25f2,"Merge ""Hygiene: reorder methods to match interface""","Merge ""Hygiene: reorder methods to match interface""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450127581,1450127581,"4eb1a5a63e1b7e30613827078443e4ca5e6a9f56,74bf353b50835f8dbbf070b07501bd4646fdc617"
4eb1a5a63e1b7e30613827078443e4ca5e6a9f56,4eb1a5a6,Fix article and menu bar padding on tablets.,"Fix article and menu bar padding on tablets.

On a tablet screen, the article top-padding was too much, since it was
using the *horizontal* padding dimen, which grows to 128dp for a tablet
screen. It should always be a fixed 16dp from the top.

Conversely, the padding to the left and right of the new native menu bar
should in fact be equal to the dimen for the horizontal activity margin.

Here's a ""before"" shot:
https://veuwer.com/i/3g2p

And after:
https://veuwer.com/i/3g2q

Change-Id: I32a8177d5bfdbd39076e0ecf6a85aca5d10e3fa5
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1450124522,1450125342,0bf69e7c4fb568da9363568cec5f652fff4ac4dc
0bf69e7c4fb568da9363568cec5f652fff4ac4dc,0bf69e7c,"Merge ""Add article geo-location navigation button""","Merge ""Add article geo-location navigation button""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450124010,1450124010,"4f2ebfa55843ee188c7634228832ca8ee6f1e0d3,ae3187f1e88a8675d0ed82171804478d256ef47e"
8ca4e88961c535d43f815c5aaf46c703b18fba4a,8ca4e889,Make EditTaskTest more reliable,"Make EditTaskTest more reliable

Sometime we run this test at the same time, then the expected section text is overwritten again.

Bug: T120035
Change-Id: Ie195ec76d0c08b743188762d73e4d6977132dc09
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1450120901,1450120901,3aa56d089080724d259fb98d132342fa7fd566b0
4f2ebfa55843ee188c7634228832ca8ee6f1e0d3,4f2ebfa5,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I1bf08020c215b6498938c0c25012565bb7e2e4f0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450120440,1450120440,3aa56d089080724d259fb98d132342fa7fd566b0
585cddcc72f577e2c909ab27e4fbeb51d9c69a5a,585cddcc,Hygiene: consolidate PageLoadStrategy init methods,"Hygiene: consolidate PageLoadStrategy init methods

No functional changes intended.

- Consolidate setup and onActivityCreated to setup. These methods were
  always called together and had similar responsibilities to partially
  set up the strategy. The new method has too many parameters but this
  is not a regression.
- Rename setup to the verb, setUp.
- Rename JsonPageLoadStrategy.setupSpecificMessageHandlers to
  setUpBridgeListeners and move the BottomContentHandler initialization
  up.
- Add some @NonNull annotations.

Change-Id: I449d1230c460e45ec103a154515a78c08935bc8a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1450111865,1450118931,74bf353b50835f8dbbf070b07501bd4646fdc617
74bf353b50835f8dbbf070b07501bd4646fdc617,74bf353b,Hygiene: reorder methods to match interface,"Hygiene: reorder methods to match interface

Light refactoring of JsonPageLoadStrategy and PageLoadStrategy:

- Reorder implementation methods to match ordering in interface.
- Consolidate @VisibleForTesting API below overridden and public
  methods.
- Replace Log and TAG with L.
- Make JsonPageLoadStrategy.loadSavedPage and STATE_* private.
- Move Javadocs from implementation to interface.

No other functional changes intended.

Change-Id: I8c5abc3e855c33d55d592ae572b538e56539c6a5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449874997,1450118904,ae3187f1e88a8675d0ed82171804478d256ef47e
ae3187f1e88a8675d0ed82171804478d256ef47e,ae3187f1,Add article geo-location navigation button,"Add article geo-location navigation button

Display a geo-location navigation button when the article subject has a
known location and a mapping app is available

Bug: T114523
Change-Id: I0b2522aa1b68abd8f7a3b19fb3e5cfde940a84c2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449869884,1450116814,3aa56d089080724d259fb98d132342fa7fd566b0
3aa56d089080724d259fb98d132342fa7fd566b0,3aa56d08,Move content issues and disambiguations to menu,"Move content issues and disambiguations to menu

Move content issues and similar titles to page menu and move save pages
and share a link to the article toolbar.

* Keep the JavaScript issue and disambiguation parsing logic but send
  the issues and disambiguations payload when available instead of on
  link click.

* Extract ""PageInfo"" unmarshaller from PageInfoHandler, where info is
  issues and disambiguations, into a single responsibility class.
  ""Handlers"" often have nebulous responsibilities, as was the case for
  PageInfoHandler. Move the remainder of the logic to another handler,
  LeadImagesHandler, and delete PageInfoHandler.

* DRY up leadImagesHandler.beginLayout() logic. This required adding an
  inappropriate method to the PageLoadStrategy which has been marked for
  removal, and will be easier to do so in subsequent refactors.

* Annotate PageInfo with @NonNull where appropriate and add a couple
  helper methods.

* Move the lead image and lead image placeholder to
  ArticleHeaderImageView. Improve encapsulation but there are some
  obvious candidates for future improvement.

* Add a new toolbar class, ArticleMenuBarView for saved pages, link
  sharing, and other buttons. The saved pages button does not update
  appropriately. This appears to be a preexisting bug.

* Replace LeadImagesHandler.leadImagesEnabled state with method.

* Minor adjustments to padding offsets in LeadImagesHandler.

* Move intToHexStr() logic from MediaPlayerImplementation to StringUtil
  so it can be used elsewhere.

* Adjust WebView content top margin.

* Remove the last programmatic change to article lead LayoutParams.

* Fix a couple layout bugs in lead layout including top offset
  differences across API versions and some incorrect layouts on
  orientation change.

* Reorder page issues and disambiguations in their dialog.

Bug: T116122 T120400
Change-Id: I2d716fa5d64386b587d730378c7e28913fcd9221
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447917186,1450109683,c9b11bda7ec3c9821143b128e8f6bd3c556ff70b
c9b11bda7ec3c9821143b128e8f6bd3c556ff70b,c9b11bda,"Merge ""Hygiene: move intent creation to target Activity""","Merge ""Hygiene: move intent creation to target Activity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1450107672,1450107672,"d219a65881c5686f91d241316f87d39be56540af,23dd27c02bcbcc9b00176162e39a1f82b2f8ecfd"
d219a65881c5686f91d241316f87d39be56540af,d219a658,Remove IndexOutOfBounds bug check.,"Remove IndexOutOfBounds bug check.

Looks like the fix was genuine.

Change-Id: I552e576ad604f41e6b1649ced9276384629c1773
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1450103756,1450103756,1bae506bdcc734b36ac60ecce7f7f008a6fcbbea
23dd27c02bcbcc9b00176162e39a1f82b2f8ecfd,23dd27c0,Hygiene: move intent creation to target Activity,"Hygiene: move intent creation to target Activity

Change-Id: I869ccea27bd66c823b971388332bc425c57e1cfe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449870089,1449870089,1bae506bdcc734b36ac60ecce7f7f008a6fcbbea
1bae506bdcc734b36ac60ecce7f7f008a6fcbbea,1bae506b,"Merge ""Tweak title pronunciation icon appearance""","Merge ""Tweak title pronunciation icon appearance""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449852986,1449852986,"2fe7fad51d433713a860ae8ca1be4106a98952b7,dbf26c54edb0ad021ef5bc657677dda6943d74ba"
2fe7fad51d433713a860ae8ca1be4106a98952b7,2fe7fad5,Hygiene: upgrade OkHttp libs to v2.6.0,"Hygiene: upgrade OkHttp libs to v2.6.0

From the release notes[0]:

> Fix: Don't throw when converting an HttpUrl to a java.net.URI.
  Previously URLs with special characters like | and [ would break when
  subjected to URI’s overly-strict validation.
This fix may ease T120415.

[0] https://github.com/square/okhttp/blob/master/CHANGELOG.md#version-260

Change-Id: I0342d813d0fd52ffcb2986195a97d3143840bc68
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449783470,1449783470,334cbd3640f943348a88f33df138d4b4fa1f8a1f
dbf26c54edb0ad021ef5bc657677dda6943d74ba,dbf26c54,Tweak title pronunciation icon appearance,"Tweak title pronunciation icon appearance

* Reduce the size of the icon[0] and increase the hit area.
* Seperate the view and collision concerns.

[0] https://veuwer.com/i/3e7s,3e7t

Bug: T114524
Change-Id: I5d506c96069584bc861441fd6612e04d17d58067
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1448326446,1449774636,334cbd3640f943348a88f33df138d4b4fa1f8a1f
334cbd3640f943348a88f33df138d4b4fa1f8a1f,334cbd36,Bump versionCode,"Bump versionCode

Change-Id: I27704ab52c423512fcdfc294dd310f618fa34b8c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449688710,1449688710,43ad2a90dd94c866575f6dced4ad9e2065256154
43ad2a90dd94c866575f6dced4ad9e2065256154,43ad2a90,"Merge ""Prevent crash due to non-lead-section index mismatch.""","Merge ""Prevent crash due to non-lead-section index mismatch.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449683849,1449683849,"1b63b3b2c2a36de230294d79b0511d248bf98074,fd65366c273706e78704a79d154d131f2b2a6af7"
fd65366c273706e78704a79d154d131f2b2a6af7,fd65366c,Prevent crash due to non-lead-section index mismatch.,"Prevent crash due to non-lead-section index mismatch.

1) This fixes an actual possible condition where this crash occurs:
- A saved page is loaded, and the LoadSavedPageTask takes an abnormally
  long time
- The user presses Back, with the previous page having *more* sections
  than the saved page
- The LoadSavedPageTask completes in the middle of the WebView being
  populated with the previous page, replacing the current Page object with
  a Page that has fewer sections than the current sequence chain expects.

2) This also explicitly patches up the crash, by verifying that the index
is within the size of the current page sections.

Bug: T112519
Change-Id: Ifd168f7babc246a465762c98bc651ce716a0a4b1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449669944,1449682874,b8b157028b3f7330ea81900fb3bf1a4ce6e376db
1b63b3b2c2a36de230294d79b0511d248bf98074,1b63b3b2,Improve thread safety of some more lazy-initialized stuff.,"Improve thread safety of some more lazy-initialized stuff.

1) No longer lazily initialize things that aren't expensive to
initialize.
2) Store ContentPersisters in a synchronizedMap.

Change-Id: I6a93f27deff324eb2c26c0129799f4f43fb080a3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449675281,1449681217,b8b157028b3f7330ea81900fb3bf1a4ce6e376db
b8b157028b3f7330ea81900fb3bf1a4ce6e376db,b8b15702,"Merge ""Hygiene: refactor JPLS sequence state & DRY checks""","Merge ""Hygiene: refactor JPLS sequence state & DRY checks""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449606693,1449606693,"cce4c8fce7ae6047c05dba894ac68d397e794a54,1ee083eeb2984a23cc67a94899e9150597a67082"
cce4c8fce7ae6047c05dba894ac68d397e794a54,cce4c8fc,"Merge ""Prevent possible NPE when deleting history items.""","Merge ""Prevent possible NPE when deleting history items.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449606248,1449606248,"c4e1b54bc77ae3eb840dd8bb5ce59abcb969bc45,a801f9b9ee5442e4b5ec47ee54f9ff3b1b8d9b9f"
a801f9b9ee5442e4b5ec47ee54f9ff3b1b8d9b9f,a801f9b9,Prevent possible NPE when deleting history items.,"Prevent possible NPE when deleting history items.

Change-Id: I46b698c7010cf396b793df9b9d7c7cf492959311
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449604475,1449605337,952400bee9bc3da0adb40224e135d7b147aa7167
c4e1b54bc77ae3eb840dd8bb5ce59abcb969bc45,c4e1b54b,Prevent possible NPE when a section doesn't have a heading.,"Prevent possible NPE when a section doesn't have a heading.

Technically this points to a malformation of the Json structure of the
Section, but it still shouldn't produce a crash.

https://rink.hockeyapp.net/manage/apps/226649/app_versions/6/crash_reasons/57894753

Change-Id: Ic5f5ee6dd84d7ad87179c3b3920fbceb509c7793
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449603977,1449604755,952400bee9bc3da0adb40224e135d7b147aa7167
1ee083eeb2984a23cc67a94899e9150597a67082,1ee083ee,Hygiene: refactor JPLS sequence state & DRY checks,"Hygiene: refactor JPLS sequence state & DRY checks

Refactor JsonPageLoadStrategy's sequence state and DRY up some
JavaScript event listeners:
* Remove sequence reset in onActivityCreated() method. The sequence
  number is not preserved after app death so an int is practically
  infinite and does not need to be reset. The sequence is incremented
  indirectly as needed by an internal call to fragment.displayNewPage().
  Guaranteeing a monotonically increasing sequence number reduces the
  potential for nonunique sequence number bugs.
* Encapsulate sequence and reconciliation behavior. This allows one tiny
  class to be responsible for the data. Presently, only that the
  sequence is always increasing. This isn't immediately useful beyond
  that but does make future mishaps less casual than --ing an int.
* Replace common Fragment lifecycle and sequence checks in
  JSEventListeners with abstract SynchronousBridgeListener class.
* Replace ""sequence"" String constant with symbol.

Bug: T112519
Change-Id: I3f8622c0c5064c7d3b7413ff14e2ef07c889a9f6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449525980,1449604588,952400bee9bc3da0adb40224e135d7b147aa7167
952400bee9bc3da0adb40224e135d7b147aa7167,952400be,"Merge ""Prevent possible NPE when rotating screen with link preview.""","Merge ""Prevent possible NPE when rotating screen with link preview.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449603414,1449603414,"3449d1e381625be4a7578ad9ef19b4c18fd3f16f,5b437739e2e73123a057a5e92f1a91657a45fe82"
3449d1e381625be4a7578ad9ef19b4c18fd3f16f,3449d1e3,"Merge ""Prevent possible NPE when finding-in-page.""","Merge ""Prevent possible NPE when finding-in-page.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449602948,1449602948,"9b70e6dc82e0a0ab665654372b2ed19c0388847d,5af3db7c337ffe4e4a9fc7ff85673ca7a910e984"
9b70e6dc82e0a0ab665654372b2ed19c0388847d,9b70e6dc,"Merge ""Prevent multiple instances of DBOpenHelper.""","Merge ""Prevent multiple instances of DBOpenHelper.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449602946,1449602946,"c127d3de4f369e9892f568bc0bf1a6433b149b98,f198e0ce1cf654dc77f5542e85adff73ff73f191"
5af3db7c337ffe4e4a9fc7ff85673ca7a910e984,5af3db7c,Prevent possible NPE when finding-in-page.,"Prevent possible NPE when finding-in-page.

https://rink.hockeyapp.net/manage/apps/226649/app_versions/6/crash_reasons/58434226

Change-Id: Idb53015df531b3b8669ae1e4dc6f0b6561111007
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449601836,1449601836,fcb93eba737159fba7d1a3261fe18bd25809a9a5
5b437739e2e73123a057a5e92f1a91657a45fe82,5b437739,Prevent possible NPE when rotating screen with link preview.,"Prevent possible NPE when rotating screen with link preview.

https://rink.hockeyapp.net/manage/apps/226649/app_versions/6/crash_reasons/57590605

Change-Id: Ifebc435ec9ec981521b0c5c665487a088fd6d6c8
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449601647,1449601647,fcb93eba737159fba7d1a3261fe18bd25809a9a5
c127d3de4f369e9892f568bc0bf1a6433b149b98,c127d3de,"Merge ""Improve handling of fragments in redirected search results.""","Merge ""Improve handling of fragments in redirected search results.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449601357,1449601357,"ba900d20b9845f049c3c873a2fb33cb10e87f7f3,6ab940645b98f1775507c532b419b85a95cf0cfe"
ba900d20b9845f049c3c873a2fb33cb10e87f7f3,ba900d20,"Merge ""Prevent mismatched search results when typing quickly.""","Merge ""Prevent mismatched search results when typing quickly.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449598114,1449598114,"b98803c1b0ae05d6d74cf14f09a7757634532140,252db51b76536b25ff3ce06cf928abe664d31aec"
b98803c1b0ae05d6d74cf14f09a7757634532140,b98803c1,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449592405,1449592405,"62ef90871bf8899fc038694bd240eea84283f5e2,9d9937d043754c388c13204f2f101cf7daa8e78d"
252db51b76536b25ff3ce06cf928abe664d31aec,252db51b,Prevent mismatched search results when typing quickly.,"Prevent mismatched search results when typing quickly.

The actual AsyncTask that fetches search results was not being cancelled
properly upon changing the search term.

Bug: T111890
Change-Id: I19f76aded70945c8d81cb994dc16fbe9b4a67a26
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449591750,1449592134,fcb93eba737159fba7d1a3261fe18bd25809a9a5
f198e0ce1cf654dc77f5542e85adff73ff73f191,f198e0ce,Prevent multiple instances of DBOpenHelper.,"Prevent multiple instances of DBOpenHelper.

Couldn't repro this crash, but this seems like the only way it could
happen.

Bug: T120835
Change-Id: I4f1002cb498d52607eb18a164403ddfce0d0fdb1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449589934,1449590356,fcb93eba737159fba7d1a3261fe18bd25809a9a5
62ef90871bf8899fc038694bd240eea84283f5e2,62ef9087,"Merge ""Fix saved pages database crash""","Merge ""Fix saved pages database crash""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449587508,1449587508,"fcb93eba737159fba7d1a3261fe18bd25809a9a5,e53381bc735dc6e2b0d25b6a9e6ef1573ab56ca0"
6ab940645b98f1775507c532b419b85a95cf0cfe,6ab94064,Improve handling of fragments in redirected search results.,"Improve handling of fragments in redirected search results.

1) We no longer need to correlate the ""index"" property between the
redirected results and the main result list, so I took that out.
2) However, the redirected results can sometimes contain a ""tofragment""
property (which we were totally ignoring) that represents the specific
section to which the result should jump upon loading.

Bug: T67496
Change-Id: I9417f569811f622af7c30cbb001095bdeebd6705
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449586446,1449586446,fcb93eba737159fba7d1a3261fe18bd25809a9a5
fcb93eba737159fba7d1a3261fe18bd25809a9a5,fcb93eba,"Merge ""Temporarily lessen tab unmarshal failure penalty""","Merge ""Temporarily lessen tab unmarshal failure penalty""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449524365,1449524365,"9ff06ce09c5ad9a04aa162702cf607e5a57ea89e,10c0202c96fca890f3e35ec93436d10149e6dfed"
10c0202c96fca890f3e35ec93436d10149e6dfed,10c0202c,Temporarily lessen tab unmarshal failure penalty,"Temporarily lessen tab unmarshal failure penalty

For nonproduction builds, temporarily allow problematic tabs to be
discarded and tabs in the new 6191e5e format to be written.

Per 59dce5f, in nonproduction builds the penalty for remote logging
should be death. The thinking was that if it's worth burning user data
and engineering parsing time, it's worth crashing on everything but
prod. A TODO has been added to revert this patch when the next beta,
2.1.135 is published.

Change-Id: I86d08d4a48c591b7a2a415ab92b0b6bcfe46f069
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449521917,1449521917,af252765b5066eaa65d720efd3c647e8a868a6d1
e53381bc735dc6e2b0d25b6a9e6ef1573ab56ca0,e53381bc,Fix saved pages database crash,"Fix saved pages database crash

The page namespace column is unavailable prior to app database v6. This
patch checks the database version and uses the namespace if available,
null (mainspace) otherwise.

One method of reproducing the bug is to save pages with spaces on
r/2.0-r-2014-08-13 and upgrading to master.

Bug: T120663
Change-Id: Ia57de63911c2204b4814a376e874a8aa38ffcd61
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449516673,1449516673,0cff9c280c9f70bd2154aebf3ce96faa345883d0
9ff06ce09c5ad9a04aa162702cf607e5a57ea89e,9ff06ce0,"Merge ""Guard against NPE""","Merge ""Guard against NPE""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449514474,1449514474,"ac67176c264bf50610f0b457468deba64a7fcb36,0cff9c280c9f70bd2154aebf3ce96faa345883d0"
9d9937d043754c388c13204f2f101cf7daa8e78d,9d9937d0,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I1e2677bd64482724c1b57c7b2ee5aa628b0dac71
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449508191,1449508191,ac67176c264bf50610f0b457468deba64a7fcb36
ac67176c264bf50610f0b457468deba64a7fcb36,ac67176c,"Merge ""Hygiene: upgrade Mapbox SDK to v2.3.0""","Merge ""Hygiene: upgrade Mapbox SDK to v2.3.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449507207,1449507207,"4ae823a068b8952f54ac053dd6b7c81c96e8943e,61c1306d9881509b3c448fb5c9c33273371bf116"
4ae823a068b8952f54ac053dd6b7c81c96e8943e,4ae823a0,"Merge ""Workaround Mapbox View ProGuard rules""","Merge ""Workaround Mapbox View ProGuard rules""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449506782,1449506782,"db5a2395cd0de6aa8a33cf605c407c9431949526,e074552b12e547a998811f87e2349151da6c90d3"
0cff9c280c9f70bd2154aebf3ce96faa345883d0,0cff9c28,Guard against NPE,"Guard against NPE

Check for a null page in LeadImagesHandler.beginLayout().

Bug: T120389
Change-Id: I9497186a01273d569f5d43ad1eb2dc8596e38657
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449506701,1449506701,db5a2395cd0de6aa8a33cf605c407c9431949526
db5a2395cd0de6aa8a33cf605c407c9431949526,db5a2395,"Merge ""Fix possible crash(es) in link preview AsyncTasks.""","Merge ""Fix possible crash(es) in link preview AsyncTasks.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449505012,1449505012,"570cebf8ebef0c2a532f398c8649346f34292b49,af252765b5066eaa65d720efd3c647e8a868a6d1"
61c1306d9881509b3c448fb5c9c33273371bf116,61c1306d,Hygiene: upgrade Mapbox SDK to v2.3.0,"Hygiene: upgrade Mapbox SDK to v2.3.0

https://github.com/mapbox/mapbox-gl-native/releases/tag/android-v2.3.0

Change-Id: I29134129ba91c1509fb2ed2776c7a551217f1806
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449289530,1449289530,e074552b12e547a998811f87e2349151da6c90d3
e074552b12e547a998811f87e2349151da6c90d3,e074552b,Workaround Mapbox View ProGuard rules,"Workaround Mapbox View ProGuard rules

Untested.

Bug: T120388
Change-Id: I95192d0e79787479f9d5d77ca84b67cbd00929d6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449287078,1449289476,4f11c295fcb8fb32bbad01cb63bf2891e06d82b8
af252765b5066eaa65d720efd3c647e8a868a6d1,af252765,Fix possible crash(es) in link preview AsyncTasks.,"Fix possible crash(es) in link preview AsyncTasks.

Bug: T120392
Change-Id: Icfbb7ca8728d7f606c3a71883ef9e7d737cebb66
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449260624,1449260624,4f11c295fcb8fb32bbad01cb63bf2891e06d82b8
570cebf8ebef0c2a532f398c8649346f34292b49,570cebf8,"Merge ""Hygiene: update bump version script to Python 3""","Merge ""Hygiene: update bump version script to Python 3""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449252778,1449252778,"4f11c295fcb8fb32bbad01cb63bf2891e06d82b8,3d054e26ff1d6819a3ffe698d02237f28938cc2d"
3d054e26ff1d6819a3ffe698d02237f28938cc2d,3d054e26,Hygiene: update bump version script to Python 3,"Hygiene: update bump version script to Python 3

Easy fix. Just change one missed print keyword to functional notation.
This change appears to be backwards compatible with Python 2 without
future imports.

Change-Id: I7f6d6fadca53a36748f99f0c0b398b9d17f552e5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449183651,1449183651,6f329c8138d6f6c8b96f967041bc3f71ad9b0243
4f11c295fcb8fb32bbad01cb63bf2891e06d82b8,4f11c295,Bump versionCode,"Bump versionCode

Change-Id: I6741691ef2c6c9dc2420cf1134783517c6f268ca
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449180024,1449180024,6f329c8138d6f6c8b96f967041bc3f71ad9b0243
6f329c8138d6f6c8b96f967041bc3f71ad9b0243,6f329c81,"Merge ""Fix infinite search loop""","Merge ""Fix infinite search loop""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449178813,1449178813,"31f9ff7ac409da512a83d827339b51a31fccb497,5678852639157f9d18982ebf77b24dca93540d5c"
5678852639157f9d18982ebf77b24dca93540d5c,56788526,Fix infinite search loop,"Fix infinite search loop

- Only clear results when the query changes and the new result set is
  received.
- Add @Nullable / @NonNull annotations where obvious.

The search results Fragment has several sources of input including:

1 Prefix search
2 Full text search
3 Search suggestion
4 Cache

There are special cases but the primary flow intents for starting a new
search (whenever query changes) appear to be:

1 Search term is identical: do nothing.
2 Search term is empty: clear results.
3 Cache is nonempty: clear old results and show new.
4 Cache is empty: perform a prefix and suggestion search.
5 Prefix and suggestions search was nonempty: clear old results and show
  new, clear or show the search suggestion too.
6 Prefix and suggestions search was empty: clear or show suggestion and
  perform a full text search.
7 Full text search completed: clear old results and show any new.

Additionally, when the end of the results list is scrolled to, full text
searches are performed and the results are appended. This seems to have
been the source of the issue as results were being cleared instead of
appended, so the user was always at the bottom of the list and always
triggering another search.

Bug: T120148
Change-Id: Iee4107261a572f2e20943eca92f43ff290190520
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449165210,1449165210,eb941b44aa14da56afd60671f0c016d9a0394475
31f9ff7ac409da512a83d827339b51a31fccb497,31f9ff7a,Fix NPE in link preview,"Fix NPE in link preview

No repro steps were recorded but the following crash log was obtained:

ncTask$BackingAsyncTask  D  doInBackground():100:
                         D  org.json.JSONException: No value for query
                         D      at org.json.JSONObject.get(JSONObject.java:389)
                         D      at org.json.JSONObject.getJSONObject(JSONObject.java:609)
                         D      at org.wikipedia.page.PageQueryTask.processResult(PageQueryTask.java:47)
                         D      at org.wikipedia.page.PageQueryTask.processResult(PageQueryTask.java:17)
                         D      at org.wikipedia.ApiTask.performTask(ApiTask.java:44)
                         D      at org.wikipedia.concurrency.SaneAsyncTask$BackingAsyncTask.doInBackground(SaneAsyncTask.java:98)
                         D      at org.wikipedia.concurrency.SaneAsyncTask$BackingAsyncTask.doInBackground(SaneAsyncTask.java:92)
                         D      at android.os.AsyncTask$2.call(AsyncTask.java:295)
                         D      at java.util.concurrent.FutureTask.run(FutureTask.java:237)
                         D      at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)
                         D      at java.util.concurrent.FutureTask.run(FutureTask.java:237)
                         D      at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:269)
                         D      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)
                         D      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)
                         D      at java.lang.Thread.run(Thread.java:818)
      LinkPreviewDialog  W  Failed to fetch gallery collection.
                         W  org.json.JSONException: No value for query
                         W      at org.json.JSONObject.get(JSONObject.java:389)
                         W      at org.json.JSONObject.getJSONObject(JSONObject.java:609)
                         W      at org.wikipedia.page.PageQueryTask.processResult(PageQueryTask.java:47)
                         W      at org.wikipedia.page.PageQueryTask.processResult(PageQueryTask.java:17)
                         W      at org.wikipedia.ApiTask.performTask(ApiTask.java:44)
                         W      at org.wikipedia.concurrency.SaneAsyncTask$BackingAsyncTask.doInBackground(SaneAsyncTask.java:98)
                         W      at org.wikipedia.concurrency.SaneAsyncTask$BackingAsyncTask.doInBackground(SaneAsyncTask.java:92)
                         W      at android.os.AsyncTask$2.call(AsyncTask.java:295)
                         W      at java.util.concurrent.FutureTask.run(FutureTask.java:237)
                         W      at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)
                         W      at java.util.concurrent.FutureTask.run(FutureTask.java:237)
                         W      at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:269)
                         W      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)
                         W      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)
                         W      at java.lang.Thread.run(Thread.java:818)
                         V  https://ca.m.wikipedia.org/w/api.php?action=query&format=json&formatversion=2&prop=extracts%7Cpageimages&redirects=true&exsentences=5&explaintext=true&piprop=thumbnail%7Cname&pithumbsize=320&titles=List_of_the_largest_information_technology_companies
         AndroidRuntime  D  Shutting down VM
ckeyAppExceptionHandler  E  java.lang.NullPointerException: Attempt to invoke virtual method 'int java.lang.String.length()' on a null object reference
                         E      at org.wikipedia.page.linkpreview.LinkPreviewContents.removeParens(LinkPreviewContents.java:50)
                         E      at org.wikipedia.page.linkpreview.LinkPreviewContents.<init>(LinkPreviewContents.java:32)
                         E      at org.wikipedia.page.linkpreview.LinkPreviewDialog$7.success(LinkPreviewDialog.java:281)
                         E      at org.wikipedia.server.mwapi.MwPageService$1.success(MwPageService.java:37)
                         E      at org.wikipedia.server.mwapi.MwPageService$1.success(MwPageService.java:33)
                         E      at retrofit.CallbackRunnable$1.run(CallbackRunnable.java:45)
                         E      at android.os.Handler.handleCallback(Handler.java:739)
                         E      at android.os.Handler.dispatchMessage(Handler.java:95)
                         E      at android.os.Looper.loop(Looper.java:148)
                         E      at android.app.ActivityThread.main(ActivityThread.java:5417)
                         E      at java.lang.reflect.Method.invoke(Native Method)
                         E      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)
                         E      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)

Change-Id: I04de6ffb1f4a4e69c8fd747b22d51e584119bef2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449092618,1449097755,eeb236af4bfa2e7c22961a4cae927d825c04275c
eeb236af4bfa2e7c22961a4cae927d825c04275c,eeb236af,Promote maps to production,"Promote maps to production

Promote Mapbox maps to production and remove the previous Nearby
implementation.

Change-Id: Ic779547c27dbf291f0a726973a560a650f010ab0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1448392096,1449083357,c90042572d1183362c7ee910bb50fc1e3ca7e05f
c90042572d1183362c7ee910bb50fc1e3ca7e05f,c9004257,"Merge ""Location-aware link previews.""","Merge ""Location-aware link previews.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449082636,1449082636,"8797731f5d39898bf953df8c110e5e3d588daf4b,d468665f4efc51788471651e622d7267a16cfe11"
8797731f5d39898bf953df8c110e5e3d588daf4b,8797731f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I14d1c468297b5738288d639e198f7b915688d086
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1449080058,1449080058,be9d080770058b240d33f66565b6f8f0aea52927
d468665f4efc51788471651e622d7267a16cfe11,d468665f,Location-aware link previews.,"Location-aware link previews.

This adds a button to ""Get directions"" to the link preview that pops up
when tapping on a map marker. The button fires an Intent with a ""geo:"" Uri
that should be picked up by the default Maps app installed on the device.

Note: this patch does not implement the ""Get directions"" menu item in the
link preview's overflow menu (to be shown when the link preview is invoked
from a regular link in an article that has a location). This will be done
in a subsequent patch.

Bug: T119215
Change-Id: I9d59321e89982d79c8255960a01325259d1b3d9b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1448995260,1449078190,be9d080770058b240d33f66565b6f8f0aea52927
be9d080770058b240d33f66565b6f8f0aea52927,be9d0807,"Merge ""Clear all tabs when clearing history.""","Merge ""Clear all tabs when clearing history.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449077622,1449077622,"ebd805799dccd3141a1cbdd9280b3c38ab3987d7,1b36bfd6ba5a082b26328cdd8b691a013e8808cf"
1b36bfd6ba5a082b26328cdd8b691a013e8808cf,1b36bfd6,Clear all tabs when clearing history.,"Clear all tabs when clearing history.

When pressing the Delete button in the History fragment, we now also clear
the tab list by simply deleting the corresponding Preference that contains
the serialized tabs, and reinitialize the fragment backstack in the main
activity.

Bug: T117371
Change-Id: Ic0753214ba1dae2cb0f99a94cd0affd514b06f17
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449002606,1449077012,6bd06bc5a6333e42079cd30b3d0992da86cc9a0d
ebd805799dccd3141a1cbdd9280b3c38ab3987d7,ebd80579,"Merge ""End link preview a/b test.""","Merge ""End link preview a/b test.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449076324,1449076324,"77c8f8f781e883825654a8dd22d841f62fa463ef,349442d47e9cde36b35ac14cb28f39d766529e47"
77c8f8f781e883825654a8dd22d841f62fa463ef,77c8f8f7,"Merge ""Add thumbnail to link preview.""","Merge ""Add thumbnail to link preview.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1449074310,1449074310,"ded76dac03fcfd83dc2a67412a1ffd64bbfc9700,d7423a0d730c5ec7f34715733ffd0e84ea76b604"
349442d47e9cde36b35ac14cb28f39d766529e47,349442d4,End link preview a/b test.,"End link preview a/b test.

Change-Id: I0a61af33bca9a4149c468aee085d92b5b9ffe6a1
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1449005241,1449005241,6bd06bc5a6333e42079cd30b3d0992da86cc9a0d
ded76dac03fcfd83dc2a67412a1ffd64bbfc9700,ded76dac,Update roll out config for RB usage in beta app,"Update roll out config for RB usage in beta app

So older versions don't get RB since we change a lot of stuff.
This should be merged before we cut the final beta release
before initial roll-out.

Bug: T118965
Change-Id: I083b887fb7c38da6d3ec7683f6fe57b3bc1743dc
",,,,bearND,bsitzmann@wikimedia.org,Mholloway,mholloway@wikimedia.org,1447989444,1449004933,6bd06bc5a6333e42079cd30b3d0992da86cc9a0d
d7423a0d730c5ec7f34715733ffd0e84ea76b604,d7423a0d,Add thumbnail to link preview.,"Add thumbnail to link preview.

This adds a thumbnail to the default link preview layout, to make it
consistent with other instances where we have a page title and a
thumbnail. Also a few minor design tweaks:
- Added a subtle gray divider between the title and extract text.
- Sightly reduced the font size of the title text, now that there's less
  horizontal space because of the thumbnail.
- Increased the maximum lines for the title text to 3.

Bug: T119214
Change-Id: Ifbc38fe20328e7b3237e03d8f8923183783c0e32
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1448988446,1448988446,6bd06bc5a6333e42079cd30b3d0992da86cc9a0d
6bd06bc5a6333e42079cd30b3d0992da86cc9a0d,6bd06bc5,Hygiene: update missing-qq script to Python 3,"Hygiene: update missing-qq script to Python 3

Easy fix. Just change print from keyword to functional notation. This
change appears to be backwards compatible with Python 2 without future
imports.

Change-Id: Iac62e7e6346ac06a4c8aa3e0dc72fe9fdbadfd46
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1448906024,1448906024,0080c82426835aba582c8ff95475c4acab04a8f2
0080c82426835aba582c8ff95475c4acab04a8f2,0080c824,"Merge ""Hide MapBox logo in Nearby.""","Merge ""Hide MapBox logo in Nearby.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448905240,1448905240,"97328a0afa5e5c217e449455234180de107c985a,87c1161a4b5b715dc52a3707b503df9e0567a90a"
87c1161a4b5b715dc52a3707b503df9e0567a90a,87c1161a,Hide MapBox logo in Nearby.,"Hide MapBox logo in Nearby.

Change-Id: I84e82eb00cdb50e1173e2dea22f8574f6a4e0f56
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1448901643,1448901643,1d74dfd0c88a9ff38780457e904383ff28b0317a
97328a0afa5e5c217e449455234180de107c985a,97328a0a,"Merge ""Specify Python version required""","Merge ""Specify Python version required""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448900854,1448900854,"1d74dfd0c88a9ff38780457e904383ff28b0317a,349862ac1eec2243812cccf1d607799771b385ba"
1d74dfd0c88a9ff38780457e904383ff28b0317a,1d74dfd0,"Merge ""Fix issue with Accept-Language header for certain system languages.""","Merge ""Fix issue with Accept-Language header for certain system languages.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448900094,1448900094,"fcfde76824d0d89876861456a246aee344be09ea,61a14eaff3979b4c43363e897642188346a683bf"
fcfde76824d0d89876861456a246aee344be09ea,fcfde768,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I5844e34044f996dc2f1e5ebcb049e5faee46dce9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1448894773,1448894773,f601ffd782d62602aa01c8387c48a874537c73be
349862ac1eec2243812cccf1d607799771b385ba,349862ac,Specify Python version required,"Specify Python version required

make-release is incompatible with Python 3. Specify Python 2 explicitly.

Change-Id: I22148614471fe2ba4ba22bf460425bfed1373474
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1448480701,1448480801,f601ffd782d62602aa01c8387c48a874537c73be
f601ffd782d62602aa01c8387c48a874537c73be,f601ffd7,"Merge ""Use common RB endpoint for link previews""","Merge ""Use common RB endpoint for link previews""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448478870,1448478870,"e71c364f793db52c17b2c699f75791030f24d902,fd85ef8caf35777b7f12f3e0c4b4d71db2416c9b"
61a14eaff3979b4c43363e897642188346a683bf,61a14eaf,Fix issue with Accept-Language header for certain system languages.,"Fix issue with Accept-Language header for certain system languages.

The proper Locale was not being used when calling String.format(), which
was causing the resulting HTTP requests to fail.

Bug: T118910
Change-Id: I09e8c57d92eb969de816ed5025ad17f66aec386c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1448471272,1448471272,e71c364f793db52c17b2c699f75791030f24d902
e71c364f793db52c17b2c699f75791030f24d902,e71c364f,Constrain link preview extract to two sentences.,"Constrain link preview extract to two sentences.

Not sure how it regressed to showing the unabridged extract retrieved
from the server...

Change-Id: Id675333e241208f684ccd9d05f374f7afd17f75d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1448382402,1448382402,076c288bf979bc5c9f19b72a80d958e61a7e7589
076c288bf979bc5c9f19b72a80d958e61a7e7589,076c288b,"Merge ""Fix clipped text in alpha and beta ""About"" page""","Merge ""Fix clipped text in alpha and beta ""About"" page""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448317621,1448317621,"8e8e2085fdc850273569669fd8ed79209032e189,500e32c33a92ee5c7f3ea6e0fc3668f2048f95fe"
8e8e2085fdc850273569669fd8ed79209032e189,8e8e2085,"Merge ""Hygiene: Update grunt dependencies""","Merge ""Hygiene: Update grunt dependencies""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448296053,1448296053,"8fbb5fe99ae3ef7b2151c9ebfb32ea9b85f0ca66,dc4332b3c1d7bd90e0c12d059a05bddc70420bd7"
8fbb5fe99ae3ef7b2151c9ebfb32ea9b85f0ca66,8fbb5fe9,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448295606,1448295606,"842538723dbc0ac085a60bf2e7df4889df6bf68d,34e87e527e98524f4e2fe143e35bf952ba0fbfc0"
842538723dbc0ac085a60bf2e7df4889df6bf68d,84253872,"Merge ""Replace search results on query result, not query request""","Merge ""Replace search results on query result, not query request""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448294270,1448294270,"9b9f224f7dcebc1e31f60ef9a83dad59a16bd4cb,eb941b44aa14da56afd60671f0c016d9a0394475"
34e87e527e98524f4e2fe143e35bf952ba0fbfc0,34e87e52,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I57544bc62439ae5a2207608d25e294c1b3d5a1ca
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1448294268,1448294268,9b9f224f7dcebc1e31f60ef9a83dad59a16bd4cb
eb941b44aa14da56afd60671f0c016d9a0394475,eb941b44,"Replace search results on query result, not query request","Replace search results on query result, not query request

Wait until query results are returned before updating the UI in order
to provide a smoother user experience.

Bug: T113967
Change-Id: I7d84e276df00b9efd1449305d90945c467936347
",,,,Loaner494,loaner494@wmf494.local,Michael Holloway,mholloway@wikimedia.org,1448289440,1448289870,3f6776e5ef92aff6a8f009a5a34812cba11e6c50
9b9f224f7dcebc1e31f60ef9a83dad59a16bd4cb,9b9f224f,Convert some fields to local variables,"Convert some fields to local variables

This patch converts some fields to local variables where appropriate, as this
generally improves performance and helps code style and readability.

Change-Id: Ibda77087b2d349c2e1f63450afe6d71c61521cf5
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1448254026,1448254026,3f6776e5ef92aff6a8f009a5a34812cba11e6c50
500e32c33a92ee5c7f3ea6e0fc3668f2048f95fe,500e32c3,"Fix clipped text in alpha and beta ""About"" page","Fix clipped text in alpha and beta ""About"" page

Presently, in the alpha and beta apps, the title of the app is changed in
the ""About"" page, but since the height of the TextView and LinearLayout are
defined absolutely, the text gets clipped on narrow devices (like most
phones). This patch changes this by letting the TextView and LinearLayout
height wrap the content, but specificies a minimum size the same as the old
actual size in order to preserve layout.

Bug: T119359
Change-Id: I4079a0a842a8b3394a42082aebdf4006503fc77c
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1448251956,1448251956,3f6776e5ef92aff6a8f009a5a34812cba11e6c50
dc4332b3c1d7bd90e0c12d059a05bddc70420bd7,dc4332b3,Hygiene: Update grunt dependencies,"Hygiene: Update grunt dependencies

npm install -g npm-check-updates
ncu -u

Change-Id: I2a71d53bdab2cb84dfa9d09bdd6b14bb24e180cc
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1448057571,1448057571,3f6776e5ef92aff6a8f009a5a34812cba11e6c50
3f6776e5ef92aff6a8f009a5a34812cba11e6c50,3f6776e5,"Merge ""Set date format when building default Gson to prevent crash""","Merge ""Set date format when building default Gson to prevent crash""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448056743,1448056743,"27b437137c0bfebffb15ee4ca5000b5627a87ce2,6191e5ee67301a59de36f9eda1a19e5d9d749b6d"
27b437137c0bfebffb15ee4ca5000b5627a87ce2,27b43713,"Merge ""Update SDK Manager Plugin to d0c113b snapshot""","Merge ""Update SDK Manager Plugin to d0c113b snapshot""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448056159,1448056159,"bd85da9ed83d13de8970795cabce23ab9e20a404,dce76e91cea1b30318bb93ade5118b26e4e32c9b"
bd85da9ed83d13de8970795cabce23ab9e20a404,bd85da9e,"Merge ""Hygiene: upgrade Android Plugin for Gradle, v1.5.0""","Merge ""Hygiene: upgrade Android Plugin for Gradle, v1.5.0""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448055595,1448055595,"71bf91e7ed3ca7466c1667cb0f520c2c37fc9bff,9daec4969051d1f9b21a11876c9b946256c0d732"
71bf91e7ed3ca7466c1667cb0f520c2c37fc9bff,71bf91e7,"Merge ""Upgrade to Mapbox GL SDK.""","Merge ""Upgrade to Mapbox GL SDK.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1448055030,1448055030,"bb70a800c21dde9e974e65ceb095185465411700,2aedb3bd21177a238b2f27dca05c2480034d4f82"
2aedb3bd21177a238b2f27dca05c2480034d4f82,2aedb3bd,Upgrade to Mapbox GL SDK.,"Upgrade to Mapbox GL SDK.

The good news: This brings the app up to date with the latest SDK from
Mapbox.

The bad news: This brings our APK size from 4.1MB to 14.4MB (!)
A sign of the times :(

This patch includes somewhat of a redesign, or more accurately a bit of a
stripdown of the interface, compared with the previous design. This will
now be a simple full-screen map with markers. Clicking on a marker brings
up a link preview for the given article. Nice and simple.
This means that the ""list"" interface with accelerometer-based arrows has
been removed, pending some new designs for a location-aware link preview.

Also updated the marker image that pinpoints to articles on the map.

Bug: T117803
Change-Id: I3dc224b02cbbb894ee263525e081fcfe38f9e1d3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1447416974,1448053252,9773a148e98c5fda0235bba8086652525bd39e9f
fd85ef8caf35777b7f12f3e0c4b4d71db2416c9b,fd85ef8c,Use common RB endpoint for link previews,"Use common RB endpoint for link previews

The RESTBase team is going to provide a new endpoint /page/summary,
which should behave similarly to our /page/mobile-summary endpoint.

This needs to be tested when the endpoint has actually been deployed.

Bug: T119237
Change-Id: I0647cfc6aa89ecc8ad927dc4d0bab3c86699b3c0
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1448052234,1448052234,30d18929949b43dac51bf589552392d51808cc59
dce76e91cea1b30318bb93ade5118b26e4e32c9b,dce76e91,Update SDK Manager Plugin to d0c113b snapshot,"Update SDK Manager Plugin to d0c113b snapshot

There hasn't been a release of the SDK Manager Plugin for a while. The
latest release does not properly download ProGuard dependencies[0] which
requires us to use the Jenkins Android Emulator Plugin to download them
for CI. Since the Android Emulator CI server is very slow, a dependency
on it is impractical for jobs that otherwise would not need it. Use
JitPack to grab the SDK Manager Plugin's master HEAD, d0c113b.

[0] https://github.com/JakeWharton/sdk-manager-plugin/issues/57

Change-Id: Ia0f5f8dc64a676bdead0bd79b36b8071d45cb516
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447976002,1448051431,9daec4969051d1f9b21a11876c9b946256c0d732
bb70a800c21dde9e974e65ceb095185465411700,bb70a800,Avoid RB usage when image download is disabled,"Avoid RB usage when image download is disabled

Bug: T119161
Change-Id: Ib66544b19dcb5b7a71551898890d92e415507317
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1447988578,1448051361,30d18929949b43dac51bf589552392d51808cc59
9daec4969051d1f9b21a11876c9b946256c0d732,9daec496,"Hygiene: upgrade Android Plugin for Gradle, v1.5.0","Hygiene: upgrade Android Plugin for Gradle, v1.5.0

Lots of improvements[0] but release notes forthcoming[1]. An amendment
to packaging options for Espresso testing libs was necessary for unknown
reasons[2].

[0] http://tools.android.com/tech-docs/new-build-system
[1] http://developer.android.com/tools/revisions/gradle-plugin.html
[2] http://stackoverflow.com/q/33800924/970346

Change-Id: I611d164f7fba4dd8d8c2b23d7ba9096074aaec37
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447974905,1448051308,30d18929949b43dac51bf589552392d51808cc59
6191e5ee67301a59de36f9eda1a19e5d9d749b6d,6191e5ee,Set date format when building default Gson to prevent crash,"Set date format when building default Gson to prevent crash

I have not been able to reproduce this crash, but it seems Gson has a
problem parsing date strings when unmarshalling tab data.

From the info I've looked at online, explicitly defining a date format
will prevent ParseExceptions here:

https://stackoverflow.com/questions/7816586/gson-java-text-
parseexception-unparseable-date

https://stackoverflow.com/questions/33408620/java-gson-java-text-
parseexception-unparseable-date

Bug: T118575
Change-Id: I516e7352f4997703d250980b3e94e5aa88f7ad46
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1447963569,1447963569,30d18929949b43dac51bf589552392d51808cc59
30d18929949b43dac51bf589552392d51808cc59,30d18929,"Merge ""Avoid using RB routes on zhwiki""","Merge ""Avoid using RB routes on zhwiki""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447950405,1447950405,"9773a148e98c5fda0235bba8086652525bd39e9f,b18b0aac32c3b6c1dca9c998b4e48ccde19d59ea"
9773a148e98c5fda0235bba8086652525bd39e9f,9773a148,"Merge ""Add Wikipedia to system text selection menu""","Merge ""Add Wikipedia to system text selection menu""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447897092,1447897092,"5906437bf51a1e0edbe6436e6b5538da71d9e629,c153b94915177279c6c8d9cb628fb45f4fd9ae7a"
5906437bf51a1e0edbe6436e6b5538da71d9e629,5906437b,Upgrade Gradle to v2.9,"Upgrade Gradle to v2.9

Upgrade Gradle to v2.9[0] and regenerate the Gradle wrapper files.

[0] https://docs.gradle.org/2.9/release-notes

Change-Id: I242e35970dc4b5d98ddcabae2b9d63e023ca4cd2
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1447821308,1447888923,2b0ea5f89034e4ddfe2743397bd2f361f1bfda2e
b18b0aac32c3b6c1dca9c998b4e48ccde19d59ea,b18b0aac,Avoid using RB routes on zhwiki,"Avoid using RB routes on zhwiki

Language variants make it harder for RB to have cacheable content.
Let's avoid it on zhwiki for now until those issues are solved.

Bug: T118905
Change-Id: Ie2c408e104baf2356583990237b18a1b3db874ec
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1447880008,1447880008,2b0ea5f89034e4ddfe2743397bd2f361f1bfda2e
2b0ea5f89034e4ddfe2743397bd2f361f1bfda2e,2b0ea5f8,"Merge ""Fix saved pages with spaces in their title not being recognized as saved""","Merge ""Fix saved pages with spaces in their title not being recognized as saved""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447872041,1447872041,"bf386eb5fbb860357b610cb44f845e2b1985af4e,11c50597407a66abec769643a0a90213ceb106dc"
bf386eb5fbb860357b610cb44f845e2b1985af4e,bf386eb5,"Merge ""Further update login activity title""","Merge ""Further update login activity title""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447869978,1447869978,"441a2be00be0f2d9846193ebab4a95667e18548a,ffefde394d37e7419405d9c6b6e675d9b61c81e5"
441a2be00be0f2d9846193ebab4a95667e18548a,441a2be0,"Merge ""Retrofit link preview requests""","Merge ""Retrofit link preview requests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447868657,1447868657,"56d52c37b83ed58c3621b8db8cddaee0fc691494,d945afc63d8025a2ae1198987f0b8cf95dc74efa"
ffefde394d37e7419405d9c6b6e675d9b61c81e5,ffefde39,Further update login activity title,"Further update login activity title

After giving it some more thought, the login activity title should be
changed to ""Log in to Wikipedia"" rather than ""Log into Wikipedia,"" for
the reason Dmitry mentioned on my earlier patch[0] and those given
here[1], and because we already have ""Log in to Wikipedia"" in the nav
menu!

[0] https://gerrit.wikimedia.org/r/#/c/253928/
[1] https://english.stackexchange.com/questions/5302/log-in-to-or-log-into-or-login-to

Change-Id: I0b3882f088c8ec8bea9f17c6e8828ceae61bcca7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1447868322,1447868322,56d52c37b83ed58c3621b8db8cddaee0fc691494
56d52c37b83ed58c3621b8db8cddaee0fc691494,56d52c37,"Merge ""Offload IPA transform""","Merge ""Offload IPA transform""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447868088,1447868088,"7be161f33eda4818ae24f410d20ae7a1a3912ef3,9a0023478aff1e2a1db7f6b026ed2177aaa8811b"
7be161f33eda4818ae24f410d20ae7a1a3912ef3,7be161f3,"Merge ""Hygiene: Correct login activity title""","Merge ""Hygiene: Correct login activity title""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447867649,1447867649,"3ee088e86c8dd37f8ec0e372e87c1835258fe8cb,d719de5da4f38b3d44dd7386192c865080d57810"
c153b94915177279c6c8d9cb628fb45f4fd9ae7a,c153b949,Add Wikipedia to system text selection menu,"Add Wikipedia to system text selection menu

- Add Wikipedia as an available text selection option for all other apps. The text selection menu entry will appear as ""Search Wikipedia"".
- Feature is supported on devices with API level 23 (Marshmallow) and above.

Change-Id: I66210ece4267dcd59f94d66d6df0f67af691c76a
",,,,Ondrej Kroupa,ondra@seal.io,Ondrej Kroupa,ondra@seal.io,1447811149,1447867591,fd5e780b20a383f84c2c07c09ba99020d7ddc2e2
3ee088e86c8dd37f8ec0e372e87c1835258fe8cb,3ee088e8,"Merge ""Version saved pages""","Merge ""Version saved pages""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447867157,1447867157,"fd5e780b20a383f84c2c07c09ba99020d7ddc2e2,218eb018602e1d75ef301e3255a78637ae4804f4"
d719de5da4f38b3d44dd7386192c865080d57810,d719de5d,Hygiene: Correct login activity title,"Hygiene: Correct login activity title

http://loginisnotaverb.com/

Change-Id: Ie360d20d975b0a6bf92132f20cbd2412c81215ae
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1447864798,1447864798,fd5e780b20a383f84c2c07c09ba99020d7ddc2e2
fd5e780b20a383f84c2c07c09ba99020d7ddc2e2,fd5e780b,"Merge ""Hygiene: move lead parallax to Drawable matrix""","Merge ""Hygiene: move lead parallax to Drawable matrix""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447862834,1447862834,"4ea7767943067befc5b3997bccde0fc75c67d6dc,b8c1aa921590b950d43d7be664db03a9dfe1158e"
4ea7767943067befc5b3997bccde0fc75c67d6dc,4ea77679,"Merge ""Consolidate Captcha and abuse filter tests in EditTaskTests""","Merge ""Consolidate Captcha and abuse filter tests in EditTaskTests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447861580,1447861580,"eb58e60e402d10095a38f0568c30b5b35585266b,a87f7898d56821fc0aad159243ff37e7d48fed91"
eb58e60e402d10095a38f0568c30b5b35585266b,eb58e60e,"Merge ""Add null check to prevent NPE when requesting leadImageUrl""","Merge ""Add null check to prevent NPE when requesting leadImageUrl""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447861127,1447861127,"73bde898585b3c992042df1c439a886007816f98,c7cace7fb19b24abc18ccf4b28cb0a619b99199a"
9a0023478aff1e2a1db7f6b026ed2177aaa8811b,9a002347,Offload IPA transform,"Offload IPA transform

Had to switch the ipa_button div to a span since using a div caused
layout issues (an ugly line break) right after the assignment of the
HTML section text (pre-transformed by the service).
Not entirely sure why it didn't when we introduced the ipa_button
div during the DOM transformation phase.

Depends: I7c79548c9ea8c9cdc22551dfdc77f8455a514f8c
Change-Id: Iead9d28e55c5e9bcccdd471eba59aa1a3d00a719
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1447552736,1447796249,bc94e74e895e0d97a5d62bab477c5bef5111c63a
d945afc63d8025a2ae1198987f0b8cf95dc74efa,d945afc6,Retrofit link preview requests,"Retrofit link preview requests

RESTBase requests use temporary route /page/mobile-summary.
Once deployed we should switch to the common /page/summary (no ""mobile-"")
route since currently the mobile-summary route is not exposed via the public RB API.

Also converted the MW API request to Retrofit.

Bug: T118147
Bug: T118821
Change-Id: I1656019953a0a602e9568cde4f4b4f1e977a9c9e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1447745589,1447777699,7be7f59b98862092d8a7c441122cd690df115add
c7cace7fb19b24abc18ccf4b28cb0a619b99199a,c7cace7f,Add null check to prevent NPE when requesting leadImageUrl,"Add null check to prevent NPE when requesting leadImageUrl

Bug: T118576
Change-Id: Iea6f782bd397840fff7885e4d791f71d4398b2bd
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1447777160,1447777160,7be7f59b98862092d8a7c441122cd690df115add
73bde898585b3c992042df1c439a886007816f98,73bde898,Update www dependencies,"Update www dependencies

* Add Grunt CLI v0.1.13 development dependency as described by
  documentation. All tools should be present after ""npm i"".
* Add old Browserify development dependency as required by
  grunt-browserify. v3.46.1 is the latest supported version.
* Reorder dependencies alphabetically as performed by NPM.

Change-Id: I9efba385475439cc75673eac81cc46d70ba7b72b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447776419,1447776419,7be7f59b98862092d8a7c441122cd690df115add
7be7f59b98862092d8a7c441122cd690df115add,7be7f59b,Rename RESTBase routes to mobile-sections*,"Rename RESTBase routes to mobile-sections*

The service has dropped the ""html"" from the name of the
mobile-html-section* routes.

Bug: T118187
Change-Id: I452e168343cda0c63244ea19514b511c49bcc8de
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1447737301,1447746177,bc94e74e895e0d97a5d62bab477c5bef5111c63a
a87f7898d56821fc0aad159243ff37e7d48fed91,a87f7898,Consolidate Captcha and abuse filter tests in EditTaskTests,"Consolidate Captcha and abuse filter tests in EditTaskTests

Refactored tests to use JUnit 4 and improve readability, and consolidated
into EditTaskTests since they all center on the EditTask.

No functional changes to tests intended.

Bug: T115903
Change-Id: Ibeb03a8410ddf3985b795d28da6bf83ccfc31535
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1447452748,1447710999,e16cd22c2c38369c4e3eef2227269c85320de89f
b8c1aa921590b950d43d7be664db03a9dfe1158e,b8c1aa92,Hygiene: move lead parallax to Drawable matrix,"Hygiene: move lead parallax to Drawable matrix

The parallax effect used by the lead image was accomplished by sizing
its housing ImageView to the full dimensions of the image and then
translating the View itself to achieve a parallax effect. This was nice
because it avoided math and translations are cheap but poor because it
changed layout parameters without concern for adjacent Views. This
unusual behavior made it difficult to visualize the View hierarchy.

This patch moves the parallax effect from raw View resizing and
translations to the ImageView's Drawable matrix. The math is a little
intimidating in some parts, but it's mostly pure (free of implementation
details), and the View is now boring and predictable. This change will
make it easy to add or remove Views without surprising things happening.

Bug: T116122
Change-Id: I17ae6c24f876a37b1c86180daf4794dfaa2696bd
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447466970,1447708335,bc94e74e895e0d97a5d62bab477c5bef5111c63a
bc94e74e895e0d97a5d62bab477c5bef5111c63a,bc94e74e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ibb216877321b4727ad0fa2cd24162c3a8ef5d840
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447687872,1447687872,e16cd22c2c38369c4e3eef2227269c85320de89f
e16cd22c2c38369c4e3eef2227269c85320de89f,e16cd22c,"Merge ""Don't ProGuard debug builds""","Merge ""Don't ProGuard debug builds""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447451992,1447451992,"d24ea2a592b072142cc45dcf7f8ecd84a2b034d1,601c6639e507c8d84241d5f43d4aa68f1a941fba"
601c6639e507c8d84241d5f43d4aa68f1a941fba,601c6639,Don't ProGuard debug builds,"Don't ProGuard debug builds

This patch removes the ProGuard step from debug builds. ProGuarding
scratch debug builds some how runs faster than not[0]. However, it
greatly increases incremental build times which is the most common use
case.

[0] https://gerrit.wikimedia.org/r/#/c/251981/1/app/build.gradle

Change-Id: I935d5e7ec54f40896cb199b3c859d70eccf03563
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447450844,1447450844,5a876a1f0f8f96c8cadfb9ceff25f241d17278c3
d24ea2a592b072142cc45dcf7f8ecd84a2b034d1,d24ea2a5,Hygiene: remove NavigationView header workaround,"Hygiene: remove NavigationView header workaround

v23.1.1 of the Support libraries has exposed
NavigationView.getHeaderView(). Replace the previous workaround with a
call to the new method.

Change-Id: Iba3834d03432445bedbb578fcd81f4eec945a6e0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Niedzielski,sniedzielski@wikimedia.org,1447447859,1447448192,5a876a1f0f8f96c8cadfb9ceff25f241d17278c3
5a876a1f0f8f96c8cadfb9ceff25f241d17278c3,5a876a1f,"Merge ""Hygiene: Refactor DoEditTaskTests -> EditTaskTest""","Merge ""Hygiene: Refactor DoEditTaskTests -> EditTaskTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447441459,1447441459,"d5607bde62fd28b9ddf531f8260f81cfadeb264e,300a00614cf50fd728753cdf2ec141ff84ecc17a"
300a00614cf50fd728753cdf2ec141ff84ecc17a,300a0061,Hygiene: Refactor DoEditTaskTests -> EditTaskTest,"Hygiene: Refactor DoEditTaskTests -> EditTaskTest

-Decomposed the test code for readability.
-Removed the code to automatically clear the session, log in, and reattempt
 the edit.  An edit should fail if the user's token has expired, we already
 have login tests, and if we're going to test for this specific scenario
 it should be in a test of its own.

Bug: T115903
Change-Id: I94b9b91599cc242879f96a250658d74138d5638c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1446593098,1447436020,1705c971caa43bcd0283621566e5c53ff064e2d2
d5607bde62fd28b9ddf531f8260f81cfadeb264e,d5607bde,"Merge ""Hygiene: Refactor LoginTaskTest""","Merge ""Hygiene: Refactor LoginTaskTest""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447435195,1447435195,"1705c971caa43bcd0283621566e5c53ff064e2d2,0ae9846f8e442c236bd387239a0ebc65528a0390"
1705c971caa43bcd0283621566e5c53ff064e2d2,1705c971,"Merge ""Update Support libs, and disable obfuscation.""","Merge ""Update Support libs, and disable obfuscation.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447434836,1447434836,"222554eab8e3a29a121a1ac790e97977f3a1da85,883a2a1a6f3ed391f760c9ab4ff8ed51f1c437c5"
222554eab8e3a29a121a1ac790e97977f3a1da85,222554ea,"Merge ""Hygiene: Refactor BridgeTests""","Merge ""Hygiene: Refactor BridgeTests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447434468,1447434468,"9a0e1e47f287b682e60ff755fc5f81640ff12e3b,83ad557fc72b7cc8a0494d5e3e100ec26b03b3e2"
9a0e1e47f287b682e60ff755fc5f81640ff12e3b,9a0e1e47,"Merge ""Hygiene: Remove 'Do' from DoEditTask & DoEditTaskTests""","Merge ""Hygiene: Remove 'Do' from DoEditTask & DoEditTaskTests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447433406,1447433406,"ee2f09adc5c0b44746c150631c5bb9c1e6ef6263,6f9b4b2130c063292dd5bcd4f00b5a62e6f57667"
883a2a1a6f3ed391f760c9ab4ff8ed51f1c437c5,883a2a1a,"Update Support libs, and disable obfuscation.","Update Support libs, and disable obfuscation.

The newly-updated Support libraries contain a genuine fix for the
OEM-related crashes we were seeing previously (by renaming some internal
classes).

We can now, yet again, disable obfuscation in our release build, and
remove the specific Proguard rules that we were using as a Band-Aid(R)
for this issue.

Bug: T117049
Change-Id: I7585fa89b2d4f5d3395934941d7e8795a1133454
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1447418447,1447433023,c2bf18e05d48551bf381d3ee35add93b057e4489
ee2f09adc5c0b44746c150631c5bb9c1e6ef6263,ee2f09ad,"Merge ""Disable some DOM transformations for RESTBase users""","Merge ""Disable some DOM transformations for RESTBase users""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447428091,1447428091,"1fc4be15e799d0cc3ba6a54c3aa04063e9905f51,0839b39b533f4dfce22ebb6a4ce3dc8d8e9edc16"
1fc4be15e799d0cc3ba6a54c3aa04063e9905f51,1fc4be15,"Merge ""Use protocol relative pronunciation URLs""","Merge ""Use protocol relative pronunciation URLs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447427816,1447427816,"c2bf18e05d48551bf381d3ee35add93b057e4489,7147f2f8bbdcb672c801e86d1f82f26b8642a313"
6f9b4b2130c063292dd5bcd4f00b5a62e6f57667,6f9b4b21,Hygiene: Remove 'Do' from DoEditTask & DoEditTaskTests,"Hygiene: Remove 'Do' from DoEditTask & DoEditTaskTests

Change-Id: I616feed19f518c5ab9ea7863493cf272d3bfa959
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1447372539,1447373237,c2bf18e05d48551bf381d3ee35add93b057e4489
83ad557fc72b7cc8a0494d5e3e100ec26b03b3e2,83ad557f,Hygiene: Refactor BridgeTests,"Hygiene: Refactor BridgeTests

Updated to use JUnit 4 and improve readability.  No functional changes
intended.

Bug: T115903
Change-Id: I61f8c44f44591bb0233afd6477695f6b1d4fe481
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1447365957,1447368707,3442049996233cea4a324b0a9be62d8fcebbff0a
0ae9846f8e442c236bd387239a0ebc65528a0390,0ae9846f,Hygiene: Refactor LoginTaskTest,"Hygiene: Refactor LoginTaskTest

Updated test to use JUnit 4 and improve readability.  No functional
changes intended.

Bug: T115903
Change-Id: I304128c5438428671832ee9465bbe96a24d12792
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1447361167,1447367637,f1918ec1ba7ac5c2c5f7742ca479fa87f2f134a0
c2bf18e05d48551bf381d3ee35add93b057e4489,c2bf18e0,Bump versionCode,"Bump versionCode

Change-Id: I263abd1fbcf75dbe8ffb8c5217135cb1db414ccb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447364810,1447364810,3442049996233cea4a324b0a9be62d8fcebbff0a
7147f2f8bbdcb672c801e86d1f82f26b8642a313,7147f2f8,Use protocol relative pronunciation URLs,"Use protocol relative pronunciation URLs

The Content Service was updated to use protocol relative URLs so it may
be used with any MediaWiki. This patch adds the relevant protocol
(HTTPS) on the app side.

Change-Id: Icca1a1f9bd246d562a6936b5ff6ae8927712b7b7
Depends: Ie8bcd2fbd1d649d5f2c402662398244b42dde061
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447361994,1447361994,3442049996233cea4a324b0a9be62d8fcebbff0a
3442049996233cea4a324b0a9be62d8fcebbff0a,34420499,Add article title pronunciations,"Add article title pronunciations

* Unpack the article title pronunciation URL from the lead Content
  Service response and allow it to be played.
* Fix a bug where the lead subtitle was not cleared when transitioning
  from an article with a displayable subtitle to one without.

Depends: Ie8bcd2fbd1d649d5f2c402662398244b42dde061
Bug: T114524
Change-Id: Icf96e6f0d92f55f28dca8793aa6d17cdf3bc851a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447201819,1447356122,f1918ec1ba7ac5c2c5f7742ca479fa87f2f134a0
f1918ec1ba7ac5c2c5f7742ca479fa87f2f134a0,f1918ec1,"Merge ""Add event logging to Find-in-page.""","Merge ""Add event logging to Find-in-page.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447349598,1447349598,"2368df7a6a367f8e89bc5c269d2ab01ac389510a,f03ffb45abdda3ba05740a740d7c78b228ba5b91"
2368df7a6a367f8e89bc5c269d2ab01ac389510a,2368df7a,Implement event logging for page scrolling.,"Implement event logging for page scrolling.

This implements a new funnel to log how far the user scrolls through any
given article. It logs the total ""flux"" of scrolling done by the user in
the up or down direction, as well as the total depth that the user reached
into the article.

This also updates the ToC funnel to include additional data for free, such
as the page ID, and the index and title of the selected section.

Bug: T116352
Change-Id: Id8f6246b9c063af3cd7e32e0a0f9d79eb9878577
",,,,Dmitry Brant,dbrant@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1446754107,1447348442,c1a87b341c0a26e70507a8605d4e379e183a4fd9
c1a87b341c0a26e70507a8605d4e379e183a4fd9,c1a87b34,"Merge ""Hygiene: refactor lead image parallax scrolling""","Merge ""Hygiene: refactor lead image parallax scrolling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447342737,1447342737,"677bd77281d789775a059977ed6bd1f937b0c37c,81195752d15c51569e1763375fb076e2a47585a2"
81195752d15c51569e1763375fb076e2a47585a2,81195752,Hygiene: refactor lead image parallax scrolling,"Hygiene: refactor lead image parallax scrolling

The parallax effect used in the lead image requires the coordination of
views internal to ArticleHeaderView. Move this logic from
LeadImagesHandler into ArticleHeaderView and replace MarginLayoutParams
offsetting with translations which are simpler and available in all
ViewGroups.

Possible tangential fix for T116006.

Bug: T116122
Bug: T116006
Change-Id: I4dead75193f80d1355848aba15e187f73cd301bc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447280010,1447280010,ea214ab468a2568e4012db0fe245c8cb69ce1f05
677bd77281d789775a059977ed6bd1f937b0c37c,677bd772,Navigate to target URL specified in Install Referrer.,"Navigate to target URL specified in Install Referrer.

This allows the app to automatically open the referring URL specified in
the INSTALL_REFERRER intent. This makes it possible to show a banner in
mobile web that takes the user to the Play Store to install the app, and
then for the app to automatically go to the page that the user was
browsing in mobile web.

Bug: T117219
Change-Id: I5fdf38ee6f0c3ea4cf787a38ec9bfa981fed88cf
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1447268828,1447268828,ea214ab468a2568e4012db0fe245c8cb69ce1f05
f03ffb45abdda3ba05740a740d7c78b228ba5b91,f03ffb45,Add event logging to Find-in-page.,"Add event logging to Find-in-page.

This adds basic eventlogging to the find-in-page context. Only a single
event is actually sent (when the context is closed) that contains a record
of the actions performed during the context.

Bug: T116412
Change-Id: I31f5f5b1c26a54b71df46ced982c3d338355880a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1447266654,1447266654,ea214ab468a2568e4012db0fe245c8cb69ce1f05
218eb018602e1d75ef301e3255a78637ae4804f4,218eb018,Version saved pages,"Version saved pages

Pages saved that were downloaded from MW API still need all the original DOM transformations,
irrespective of the current ""useRestBase"" setting.
At the very least, we wouldn't want to move the first paragraph in the lead section up twice.
Then the content would be displayed in the wrong order. We want this to happen exactly once.

Conversely, pages saved which were downloaded from the Mobile Content Service should
only get some of the DOM transformations.

Change-Id: Iadc31079e54c83488c7bf74d792b5b70e06c102f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1446855246,1447201466,0839b39b533f4dfce22ebb6a4ce3dc8d8e9edc16
0839b39b533f4dfce22ebb6a4ce3dc8d8e9edc16,0839b39b,Disable some DOM transformations for RESTBase users,"Disable some DOM transformations for RESTBase users

The DOM transformations that can be handled by the service
are handled by it (I9437791ba8f5953be98546f76a6d15437cb58fc2).
Thus these don't need to be run again on the client.
Esp. moving the first paragraph around twice would be undesirable.

So we can better keep track what has been moved to the service
I moved the file that implement these transformations to a service
sub-folder.

I've added small notes at the end of the call to the respective DOM
transformations which have not been moved to the service (yet),
indicating the category of the reason why that has not yet been done.
Theses reasons are:
* we need to add a clickHandler,
* it's a dynamic client setting (dark mode), or
* the transformation depends on the device width.

 I think the clickHandler transformations could
 potentially be split up into two parts. The pure DOM transformation
 and the addition of the clickHandler. We then could move the first
 part tot he service, too.

Bug: T111443
Change-Id: Ibf76222d0ba10520797397fdbd95205c9f7d995b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1446681808,1447199137,ea214ab468a2568e4012db0fe245c8cb69ce1f05
ea214ab468a2568e4012db0fe245c8cb69ce1f05,ea214ab4,"Merge ""More Parsoid styles""","Merge ""More Parsoid styles""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447197068,1447197068,"448de18e6bb9e3217f392fbf05a960389202fcda,a89f6b7d86ec2e0689b7d9caafd8c925e1935d13"
448de18e6bb9e3217f392fbf05a960389202fcda,448de18e,"Merge ""Drop description from preview request""","Merge ""Drop description from preview request""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447194921,1447194921,"b6457c036398cba3264e5fd48f18ea2273505491,297ef0b59997df21fee13c04f10656c4ec7d8e1c"
b6457c036398cba3264e5fd48f18ea2273505491,b6457c03,Add pronounciation media player logic,"Add pronounciation media player logic

Add logic for playing media. The initial network request will come in a
later patch.

Bug: T114524
Change-Id: I4cf7b0be940085aad1a6931d5eee3215de80488c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446606838,1447190708,95806979cbc76eee0f534c39e663bb54c8f8a5f1
95806979cbc76eee0f534c39e663bb54c8f8a5f1,95806979,Add pronunciation span click listener logic,"Add pronunciation span click listener logic

Add logic for responding to click events in spans without obscuring
events out of span bounds. The audio player portion will come in a later
patch so showing pronunciations is always disabled in this patch.

Bug: T114524
Change-Id: Icfb00a4f0453a10fc3b492f777f5d9e52404f0dd
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446511474,1447190646,2ea3d99060892c5edbb10b84aaef3db02d9694c2
2ea3d99060892c5edbb10b84aaef3db02d9694c2,2ea3d990,"Merge ""Add pronunciation icon lead image logic""","Merge ""Add pronunciation icon lead image logic""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447188673,1447188673,"9a41871e548628e62ba380ddc382dad658503601,433ff1a6dd6d9fbca6dcb1fc0155b38f8a2a0def"
9a41871e548628e62ba380ddc382dad658503601,9a41871e,"Merge ""Fix various bugs to improve the offline browsing experience""","Merge ""Fix various bugs to improve the offline browsing experience""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447188310,1447188310,"14f4a7b9c728412e43c6a74ce9e3e6bfe36e914e,5cfcc2e5ae09a003fc1b33ef5174c6cef0bb05d6"
5cfcc2e5ae09a003fc1b33ef5174c6cef0bb05d6,5cfcc2e5,Fix various bugs to improve the offline browsing experience,"Fix various bugs to improve the offline browsing experience

Fix the logic so the app always tries to load the requested page
by all means possible, so if the network connection is not
available it will try to fetch it from the cache or from the saved
pages storage. This patch changes a lot of code from the
JsonPageLoadStrategy, including the ""reload"" logic.
The Link Previews are also modified so that if the preview
couldn't be retrieved from the network but there is a
cached version of the page in the device, the link preview
will be constructed from the page contents.

Bug: T85065
Change-Id: Ie335dc94b3d0ee3f94d190900d885746aa118465
",,,,Daniel Rey,daniel.rey.lopez@gmail.com,Daniel Rey,daniel.rey.lopez@gmail.com,1445454424,1447144596,522eb473bac091c33518b43003793e644d7dcea2
14f4a7b9c728412e43c6a74ce9e3e6bfe36e914e,14f4a7b9,"Revert ""Remove ProGuard map archival from release script""","Revert ""Remove ProGuard map archival from release script""

This reverts commit 34493076bb18a403a46ffe4e4c3637ec24d709a4.

We've reenabled ProGuard obfuscation and need to preserve mappings.

Change-Id: I1661058a9f6dd4e0b6753c7ab02fd91b09c797ba
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447095580,1447096193,fb8e38787963acca1260f58fab6617c1fa77347f
fb8e38787963acca1260f58fab6617c1fa77347f,fb8e3878,"Merge ""Fix OEM-specific crash involving MenuBuilder and NavigationMenu.""","Merge ""Fix OEM-specific crash involving MenuBuilder and NavigationMenu.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447095838,1447095838,"cb71076b73069502a9277056e1d0e165f02d4a06,9f7c1d996b697ca3f20cef4208b834936e054a3a"
9f7c1d996b697ca3f20cef4208b834936e054a3a,9f7c1d99,Fix OEM-specific crash involving MenuBuilder and NavigationMenu.,"Fix OEM-specific crash involving MenuBuilder and NavigationMenu.

This patch brings back obfuscation into our ProGuard configuration, since
this appears to be the only way to ensure that the offending class, namely
MenuBuilder, is renamed in the support.v7 library.

The library will soon be updated with MenuBuilder renamed internally, as
mentioned in the original Android bug:

https://code.google.com/p/android/issues/detail?id=78377

...and we can investigate disabling obfuscation again at that juncture.

Bug: T117049
Change-Id: I3cb4b31ee3c12bc4ab646fb834a7547791346af2
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1447084531,1447094241,48d08f951ad44bdd1dab559e21f7f63cfd5e6955
cb71076b73069502a9277056e1d0e165f02d4a06,cb71076b,"Merge ""Make share icon background transparent""","Merge ""Make share icon background transparent""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447093919,1447093919,"00cdd26cf4f75cd338c1260375b560dcc9101167,4602af8185abd8238ba08b7f2d590a4c486b57f6"
00cdd26cf4f75cd338c1260375b560dcc9101167,00cdd26c,"Merge ""Fix possible crash when using link preview with RESTBase.""","Merge ""Fix possible crash when using link preview with RESTBase.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447093572,1447093572,"4c71e4449baddadf98faf212f5b4a336d6dfb998,3faf2552a26c82aea17db96c1cc69fe54e2922e0"
4602af8185abd8238ba08b7f2d590a4c486b57f6,4602af81,Make share icon background transparent,"Make share icon background transparent

The change in 9e91af8 appeared correct initially on my device. However,
after uninstalling and reinstalling the app, the share icons had an
opaque black background, probably due to an old PNGCRUSH version. This
patch simply recuts the assets.

Change-Id: Ibf44910645e8cef189404ce4a5e7a01c98ab00c4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447092720,1447092720,4c71e4449baddadf98faf212f5b4a336d6dfb998
4c71e4449baddadf98faf212f5b4a336d6dfb998,4c71e444,"Merge ""Update verbiage of message when no nearby pages are found.""","Merge ""Update verbiage of message when no nearby pages are found.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447088912,1447088912,"81cdd3f2a8d16474eac5502e0d6d3976931c5f14,908e9be624acab1641c063a57a00c601d8f00cf0"
3faf2552a26c82aea17db96c1cc69fe54e2922e0,3faf2552,Fix possible crash when using link preview with RESTBase.,"Fix possible crash when using link preview with RESTBase.

The RESTBase callback functions don't check whether the link preview
fragment is still attached to the activity, which might cause undesirable
behavior if the functions take a long time to call back.

Change-Id: Ib1faa549f927638c2e029669535e249b0c3f1611
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1447087739,1447087909,81cdd3f2a8d16474eac5502e0d6d3976931c5f14
81cdd3f2a8d16474eac5502e0d6d3976931c5f14,81cdd3f2,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1447087732,1447087732,"9e91af8f6b72a408bd2de019b503b3d4ecc5f140,6d11acdf3b97373fdbf46b8ef2bf2714d40025b7"
6d11acdf3b97373fdbf46b8ef2bf2714d40025b7,6d11acdf,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Iffc3226f2bd8c6b048298bce16bb2376b8051090
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1447086953,1447086953,48d08f951ad44bdd1dab559e21f7f63cfd5e6955
908e9be624acab1641c063a57a00c601d8f00cf0,908e9be6,Update verbiage of message when no nearby pages are found.,"Update verbiage of message when no nearby pages are found.

Bug: T114217
Change-Id: Iaf98ccd64408df1aeb67fed13c76070910079a0b
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1447085458,1447085458,48d08f951ad44bdd1dab559e21f7f63cfd5e6955
9e91af8f6b72a408bd2de019b503b3d4ecc5f140,9e91af8f,Make CAB share icon fully opaque.,"Make CAB share icon fully opaque.

Bug: T117377
Change-Id: I2f380fe0ce3e611687ec8121feeeb0266153c32e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1447085224,1447085224,48d08f951ad44bdd1dab559e21f7f63cfd5e6955
297ef0b59997df21fee13c04f10656c4ec7d8e1c,297ef0b5,Drop description from preview request,"Drop description from preview request

We're not using the Wikidata description field in link previews anymore.
Also reduced the amount of requested sentences to 5, as mentioned in T117082.

Change-Id: I458e6afb175ba36864de7e8c6edddd2f529e2d4c
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1447045929,1447051698,48d08f951ad44bdd1dab559e21f7f63cfd5e6955
48d08f951ad44bdd1dab559e21f7f63cfd5e6955,48d08f95,"Put ""Support Wikipedia"" in the same Nav group as ""Settings""","Put ""Support Wikipedia"" in the same Nav group as ""Settings""

Per Design request, there should only be a single divider above Settings,
not below.

Bug: T116591
Change-Id: Iccbef6c3c699eb78e137a1e596f0da17932e5cfc
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1446849151,1446953533,522eb473bac091c33518b43003793e644d7dcea2
a89f6b7d86ec2e0689b7d9caafd8c925e1935d13,a89f6b7d,More Parsoid styles,"More Parsoid styles

Thumbnail captions did not look right before this patch.
See also I9549e611ec88299f30c73f7dd668ebb5e93705cd

Change-Id: I627d1e207ac32bea62f78847ba39fe5e6723b0e6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1446680025,1446833465,522eb473bac091c33518b43003793e644d7dcea2
522eb473bac091c33518b43003793e644d7dcea2,522eb473,"Merge ""Add share-a-fact support on 6.0 Marshmallow""","Merge ""Add share-a-fact support on 6.0 Marshmallow""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446832406,1446832406,"fb2bbe5883798a02953cc05ef06b922bd9f1ecde,a445af5a8d3031b00131bfb63a2ec04d807bf59d"
a445af5a8d3031b00131bfb63a2ec04d807bf59d,a445af5a,Add share-a-fact support on 6.0 Marshmallow,"Add share-a-fact support on 6.0 Marshmallow

-Adds support for injecting our custom CAB menu via onActionModeStarted/
Finished on 6.0+, since onSupportActionModeStarted/Finished are no longer
called.

-This required finding a way to prevent the custom CAB menu from
being injected during a long press in the search bar.  It turns out this
can happen because of new custom insertion action mode functionality
introduced in Marshmallow.  Unfortunately, the insertion/selection logic
is hidden entirely in private fields in the TextView class, and the
ActionMode API does not provide a way of finding the source view or action
triggering the action mode, nor whether the action mode is a selection
action mode or an insertion action mode.  So, (h/t @dbrant) I added a
getOriginatingView utility method to obtain the originating view of the
action mode by reflection.

-Additionally, updated the share-a-fact functionality to go through the
content provider framework on Marshmallow and above to prevent
permissions-related errors when sharing a fact as an image.[0]

[0] See https://stackoverflow.com/questions/32981194/android-6-cannot-share-files-anymore

Bug: T116120
Change-Id: I48f5a99d5c14a4a53d7f12abec01abb291268fee
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1445893730,1446825699,3c51884c63d3f8c67492a606faf63809a69315a8
fb2bbe5883798a02953cc05ef06b922bd9f1ecde,fb2bbe58,"Merge ""Hygiene: remove HtmlPageLoadStrategy""","Merge ""Hygiene: remove HtmlPageLoadStrategy""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446825362,1446825362,"4c0933c98d09bc1306c6f148407924beaa26a0b1,161619c4402f06eddd8f43dcfbdc81920e6a3135"
4c0933c98d09bc1306c6f148407924beaa26a0b1,4c0933c9,"Merge ""Reduce ProGuard-ing of testing apk""","Merge ""Reduce ProGuard-ing of testing apk""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446824677,1446824677,"40c0195586ed45907b2cef51930de0edca97592d,7944fabffea918aac69fbb532e7fd8cf102125c4"
40c0195586ed45907b2cef51930de0edca97592d,40c01955,"Merge ""Hygiene: remove unused string resource""","Merge ""Hygiene: remove unused string resource""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446823453,1446823453,"3c51884c63d3f8c67492a606faf63809a69315a8,598ad13fd2c2ae7ffa49836fb2472beb0f989126"
7944fabffea918aac69fbb532e7fd8cf102125c4,7944fabf,Reduce ProGuard-ing of testing apk,"Reduce ProGuard-ing of testing apk

Disable ProGuard as much as possible on the testing apk.

Change-Id: I30d44b9b91f6dc820a2787f80466261f910f8719
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1446482985,1446822738,3c51884c63d3f8c67492a606faf63809a69315a8
11c50597407a66abec769643a0a90213ceb106dc,11c50597,Fix saved pages with spaces in their title not being recognized as saved,"Fix saved pages with spaces in their title not being recognized as saved

When following a link from a page to another, it's checked if that page
is saved in disk. The problem was, it was stored with the ""Display title""
(with spaces) and the table was queried with the ""Normal_Title"", with
underscores. The fix is to make sure that the PageTitle.getText
method *allways* returns the title with underscores.
Included in this change is also a database migration which
enforces all the titles stored in the DB to use the unserscore
format.

Bug: T108885
Change-Id: I22928abc7dec3bfecceea22c3f6c7387dfbc927e
",,,,Daniel Rey,daniel.rey.lopez@gmail.com,Daniel Rey,daniel.rey.lopez@gmail.com,1445879598,1446805311,3c51884c63d3f8c67492a606faf63809a69315a8
598ad13fd2c2ae7ffa49836fb2472beb0f989126,598ad13f,Hygiene: remove unused string resource,"Hygiene: remove unused string resource

Remove unused string resource, gallery_save_error_mediastore, as
reported by Android Lint.

Change-Id: I448a06c4bfef805844af4c38da762ff8387b3ab1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446757815,1446757815,ebe4c187699649a2228b13766b40faf321dfb94b
161619c4402f06eddd8f43dcfbdc81920e6a3135,161619c4,Hygiene: remove HtmlPageLoadStrategy,"Hygiene: remove HtmlPageLoadStrategy

Remove HtmlPageLoadStrategy since it's no longer supported by Content
Service.

Change-Id: I58b1fa0a87747c029cba2ecd0ac1f73de31517c5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446757642,1446757783,ebe4c187699649a2228b13766b40faf321dfb94b
3c51884c63d3f8c67492a606faf63809a69315a8,3c51884c,A/B test of two link preview designs.,"A/B test of two link preview designs.

This implements an a/b test of two designs for the link preview dialog:
A) The current design.
B) The original ""prototype 1"" design, which includes an excerpt of text
with the lead image side by side, and no overflow menu (and no thumbnail
gallery).

The hope is to gauge user response to a trimmed-down, back-to-basics
design, and see how it affects engagement.

Bug: T117065
Change-Id: Ic65ac96106b3949ce121ba7c86d4dda68bf2ea8f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1446576954,1446757298,ae64f5a2630572612a89ed5e9efc030a61f46405
ae64f5a2630572612a89ed5e9efc030a61f46405,ae64f5a2,Use edit pencil icon from local assets.,"Use edit pencil icon from local assets.

This brings in a change from MobileApp where we introduce some
Android-specific CSS for using the edit pencil icon from local Android
assets, instead of the icon that is embedded in the CSS.

This effectively splits off the appearance of the pencil from the Android
and iOS apps.

Bug: T114582
Change-Id: I163d62fff2d22e8ea9d095754767bae123a4b80e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1446755979,1446756229,ebe4c187699649a2228b13766b40faf321dfb94b
ebe4c187699649a2228b13766b40faf321dfb94b,ebe4c187,"Merge ""Hygiene: move PageLoadPerformanceTests to JUnit 4""","Merge ""Hygiene: move PageLoadPerformanceTests to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446754758,1446754758,"75155b506995b5acf283fce6e4cd17bd18d51afd,191dc40af4d414a9446e603eef89049455023d5d"
433ff1a6dd6d9fbca6dcb1fc0155b38f8a2a0def,433ff1a6,Add pronunciation icon lead image logic,"Add pronunciation icon lead image logic

Add logic for showing the pronunciation icon. The audio player portion
will come in a later patch so showing pronunciations is always disabled
in this patch.

Bug: T114524
Change-Id: I5390238adb1edc1521889e14c81285b1a5b04fe2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445988979,1446754450,75155b506995b5acf283fce6e4cd17bd18d51afd
75155b506995b5acf283fce6e4cd17bd18d51afd,75155b50,"Merge ""Hygiene: update SyntaxHighlighterTest to JUnit 4""","Merge ""Hygiene: update SyntaxHighlighterTest to JUnit 4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446754248,1446754248,"ecf5f59aff06aed5354e6faf98b2b25ea4dc77d6,c81e2d5a31855a525c5712140fb7ea3d274f957e"
191dc40af4d414a9446e603eef89049455023d5d,191dc40a,Hygiene: move PageLoadPerformanceTests to JUnit 4,"Hygiene: move PageLoadPerformanceTests to JUnit 4

* Replace ActivityInstrumentationTestCase2 with @ActivityTestRule and
  JUnit 4.
* Replace assertEquals calls with assertThat.

Change-Id: Ice8ffa34a9e37dd80094ca0aa47522fda5adc27a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446743933,1446752352,5c59bcbf4885d90e654b7384702badc91bf54553
c81e2d5a31855a525c5712140fb7ea3d274f957e,c81e2d5a,Hygiene: update SyntaxHighlighterTest to JUnit 4,"Hygiene: update SyntaxHighlighterTest to JUnit 4

* Replace ActivityInstrumentationTestCase2 with @ActivityTestRule and
  JUnit 4.
* Replace assertEquals calls with assertThat.

Change-Id: I64d73bbd9baa5e2cc5f717493a8136e8a2630117
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446743422,1446752325,5c59bcbf4885d90e654b7384702badc91bf54553
ecf5f59aff06aed5354e6faf98b2b25ea4dc77d6,ecf5f59a,Hygiene: upgrade OkHttp and MockWebServer to 2.5.0,"Hygiene: upgrade OkHttp and MockWebServer to 2.5.0

https://github.com/square/okhttp/blob/master/CHANGELOG.md#version-250

Change-Id: I9f2e354f555916a5676e3c96528dd37892080724
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446752249,1446752249,5c59bcbf4885d90e654b7384702badc91bf54553
5c59bcbf4885d90e654b7384702badc91bf54553,5c59bcbf,"Merge ""Hygiene: upgrade Gson to v2.4""","Merge ""Hygiene: upgrade Gson to v2.4""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446751838,1446751838,"ff957b478ca10259718b2a99bf2b142cf72fc990,778540a5bedf62df353787d3d80d327bd3a84254"
ff957b478ca10259718b2a99bf2b142cf72fc990,ff957b47,"Merge ""Hygiene: upgrade testing libraries""","Merge ""Hygiene: upgrade testing libraries""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446751235,1446751235,"424e6eb2b8c6f6ac5a0b843a3be1f22edca349cb,b2f951b8ab0344e6fde40e7c3b4c44e743f84cc5"
b2f951b8ab0344e6fde40e7c3b4c44e743f84cc5,b2f951b8,Hygiene: upgrade testing libraries,"Hygiene: upgrade testing libraries

* Add Espresso and recommended Android instrumentation test
  dependencies[0]:
  * Upgrade Android JUnit Runner to v0.4.1.
  * Add JUnit Rules v0.4.1.
  * Add Espresso-core, Espresso-contrib[1], Espresso-idling-resource,
    and Espresso-web v2.2.1.
* Upgrade Robolectric to v3.0.
[0] https://google.github.io/android-testing-support-library/downloads/
[1] The Google testing libraries often have dependency issues. I used
    the workarounds mentioned here:
    http://stackoverflow.com/questions/30578243/why-would-adding-espresso-contrib-cause-an-inflateexception

Change-Id: I282162bb9872b9b06afcaf784e163c6a8633538b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446742602,1446747687,09a90be7cc9ec8db1e852beae2f7dcdbe9f9cf7a
778540a5bedf62df353787d3d80d327bd3a84254,778540a5,Hygiene: upgrade Gson to v2.4,"Hygiene: upgrade Gson to v2.4

https://github.com/google/gson/blob/gson-2.4/CHANGELOG.md

Change-Id: I32f8f13984347b8e086cfe28a18912646257d86d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446747554,1446747554,613df9e8e731dd143ed7b12e07b520dc341de0bc
424e6eb2b8c6f6ac5a0b843a3be1f22edca349cb,424e6eb2,Hygiene: upgrade SDK Builds Tools to v23.0.2,"Hygiene: upgrade SDK Builds Tools to v23.0.2

Change-Id: I39fb2db48ea592f2087551adff437a6ddbf2d8a9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446747074,1446747074,613df9e8e731dd143ed7b12e07b520dc341de0bc
613df9e8e731dd143ed7b12e07b520dc341de0bc,613df9e8,"Merge ""Hygiene: rename SyntaxHighlightTests""","Merge ""Hygiene: rename SyntaxHighlightTests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446746026,1446746026,"86058e8c0e165b33e8bdf4537f1d0766b35b851b,09a90be7cc9ec8db1e852beae2f7dcdbe9f9cf7a"
86058e8c0e165b33e8bdf4537f1d0766b35b851b,86058e8c,"Merge ""Add ""Support Wikipedia"" option to Nav menu.""","Merge ""Add ""Support Wikipedia"" option to Nav menu.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446745634,1446745634,"40d8eb8d93d431f1085655bf5a23b9282ad46d50,2e0f6e9cc1a8d0f3d673e48041a99eea80fbca10"
40d8eb8d93d431f1085655bf5a23b9282ad46d50,40d8eb8d,"Merge ""Hygiene: update Checkstyle ignored annotations""","Merge ""Hygiene: update Checkstyle ignored annotations""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446745297,1446745297,"5738b79e36c41851409ae257356f249131f173a5,1f7f3d02e0f91fe4558bf1498fd7300aca03b8e4"
2e0f6e9cc1a8d0f3d673e48041a99eea80fbca10,2e0f6e9c,"Add ""Support Wikipedia"" option to Nav menu.","Add ""Support Wikipedia"" option to Nav menu.

This adds a simple item in the Nav list to take the user to an external
web page where they may make a donation. The app version and system
language are encoded into the URL.

This uses the ""ic_favorite"" icon from the Material set.

Bug: T116591
Change-Id: I817db20687d0538c3eeada04de17154f29a9c8d3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1446580711,1446744583,5738b79e36c41851409ae257356f249131f173a5
5738b79e36c41851409ae257356f249131f173a5,5738b79e,"Merge ""Hygiene: refactor utilities""","Merge ""Hygiene: refactor utilities""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446744187,1446744187,"5b0ec04c6f86b64bc78db382b04ee975f5105c15,fe34db29dab904a80e99f4b46717c5691de78e38"
5b0ec04c6f86b64bc78db382b04ee975f5105c15,5b0ec04c,"Merge ""Update edit icon with Material style.""","Merge ""Update edit icon with Material style.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446743845,1446743845,"53dc8f5073bdf2722b1fa372d8e837400dbaf9c6,6a99b3ea38cd4c9269c9b640da702c900efecd4f"
09a90be7cc9ec8db1e852beae2f7dcdbe9f9cf7a,09a90be7,Hygiene: rename SyntaxHighlightTests,"Hygiene: rename SyntaxHighlightTests

* Rename SyntaxHighlightTests to SyntaxHighlighterTest because it tests
  SyntaxHighlighter.
* Repackage SyntaxHighlighterTest to match SyntaxHighlighter.

Change-Id: I07c812f771493981ee91e2d913aacf7ebf8f72eb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446742064,1446742064,53dc8f5073bdf2722b1fa372d8e837400dbaf9c6
53dc8f5073bdf2722b1fa372d8e837400dbaf9c6,53dc8f50,Hygiene: increase test timeout,"Hygiene: increase test timeout

After disabling hardware acceleration on the app's WebView[0], test
execution time increased by about a minute. This patch increases the
timeout duration from one to five minutes and updates PageLoadTests to
use TestLatch which has the appropriate constant built in.

[0] https://gerrit.wikimedia.org/r/#/c/250366/
[1] https://integration.wikimedia.org/ci/job/apps-android-wikipedia-test/buildTimeTrend

Change-Id: I62923003ed12a6972567290809ec088d093f76dc
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446740904,1446740904,3d5b4416f708f5e95a7c36a01f6bbd529deb0a68
1f7f3d02e0f91fe4558bf1498fd7300aca03b8e4,1f7f3d02,Hygiene: update Checkstyle ignored annotations,"Hygiene: update Checkstyle ignored annotations

Checkstyle enforces private member variables. This patch makes
exceptions to the rule for specific annotations requiring non-public
access.

* Update Butter Knife annotations to be complete.
* Add JUnit @Rule for ActivityTestRule.

Change-Id: I10579f5ee41f12a303c8da6524dcae100729db09
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446672551,1446672551,3d5b4416f708f5e95a7c36a01f6bbd529deb0a68
6a99b3ea38cd4c9269c9b640da702c900efecd4f,6a99b3ea,Update edit icon with Material style.,"Update edit icon with Material style.

Pulled changes from corresponding MobileApp patch:
https://gerrit.wikimedia.org/r/249750

This specifically targets only the edit pencil change. No other CSS
changes were pulled in (i.e. from MFE).

Also removed unused edit icon in assets.

Bug: T114582
Change-Id: I0ef9a83f79b5aff968058db993930f2b8a221efa
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1446130785,1446585334,348d40492483512cd9132c448876e54272306743
3d5b4416f708f5e95a7c36a01f6bbd529deb0a68,3d5b4416,Disable WebView hardware acceleration,"Disable WebView hardware acceleration

Enabling hardware acceleration is causing a variety of Exceptions across
API levels, mostly KitKat, v4.4.4, API 19. Since enabling acceleration
was originally intended to fix T109983 but didn't, this removes the
setting, restoring the default behavior of software rendering. An
alternative solution might be to catch any Throwable emitted when
enabling acceleration but this might put the object in a bad state:

  @Override
  public void setLayerType(int layerType, Paint paint) {
    if (ApiUtil.hasLollipop()) {
      try {
        super.setLayerType(layerType, paint);
      } catch (Throwable e) {
        L.w(e);
      }
    }
  }

Change-Id: Ib5f812ed847e7dcf1905a95133db42d4de2a448f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1446428960,1446485770,43d9b78c73abc6e4d4e39c669220463691eb500e
43d9b78c73abc6e4d4e39c669220463691eb500e,43d9b78c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I0c249aedd3e39a477648315f6b53df024995af54
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1446484689,1446484689,e989b3e66feb0b289a3041323f0377aafd548ed8
e989b3e66feb0b289a3041323f0377aafd548ed8,e989b3e6,"Merge ""Save images to Wikipedia Images folder""","Merge ""Save images to Wikipedia Images folder""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446240040,1446240040,"234a0f5497b654002599402c07271f5f192b8f8c,9a174e69eac295df79327b86ebf4b0e23100a728"
fe34db29dab904a80e99f4b46717c5691de78e38,fe34db29,Hygiene: refactor utilities,"Hygiene: refactor utilities

-Delete generic Utils.java and move functions to specific utility classes
-Standardize class names to singular *Util.java

No functional changes intended.

Change-Id: I5a52125c30486cc58fdb959c0b0c2414f2d1d8b0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1445643298,1446233449,9a174e69eac295df79327b86ebf4b0e23100a728
234a0f5497b654002599402c07271f5f192b8f8c,234a0f54,"Merge ""Make status bar color consistent across activities.""","Merge ""Make status bar color consistent across activities.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446233415,1446233415,"3ebb814f93542e4ceaaf6852c893f9c8deb2a8ac,d2b653bccfb3c12f81b9fd6a0ff847fb381d2a8a"
9a174e69eac295df79327b86ebf4b0e23100a728,9a174e69,Save images to Wikipedia Images folder,"Save images to Wikipedia Images folder

Previously, images saved from the gallery appeared in the Camera folder
in the Gallery app (on older Androids) or under a generic Pictures heading
in the new photos app.  This puts them in a dedicated Wikipedia Images
folder.

Also created a new FileUtil class and did some minor refactoring.

Bug: T115875
Change-Id: I9881453e16b3a1535d16cdbb3080f54a05bd9288
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1445554661,1446233352,3ebb814f93542e4ceaaf6852c893f9c8deb2a8ac
3ebb814f93542e4ceaaf6852c893f9c8deb2a8ac,3ebb814f,"Merge ""6.0 disable backup + bump target SDK to 23""","Merge ""6.0 disable backup + bump target SDK to 23""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446232408,1446232408,"9c582e27ea8382b62c4f4d6d15913c4f4d88919b,a71b91f6f55a1818cd8c77f65e715b14c59d529d"
9c582e27ea8382b62c4f4d6d15913c4f4d88919b,9c582e27,"Merge ""6.0 runtime permission for save image from gallery""","Merge ""6.0 runtime permission for save image from gallery""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446232106,1446232106,"a0ae3699adefad71c463c5e4a2173007f37d98fc,f4b04e656b8c7deff123fa021de47448aee22fdf"
a0ae3699adefad71c463c5e4a2173007f37d98fc,a0ae3699,"Merge ""6.0 runtime permission for location""","Merge ""6.0 runtime permission for location""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446231809,1446231809,"eff10814a5609e1efd5ea095638e80640a6db419,df10afd5efb0c794fde8dd70b9979a683f49d853"
eff10814a5609e1efd5ea095638e80640a6db419,eff10814,"Merge ""Fix possible unnecessary tab creation.""","Merge ""Fix possible unnecessary tab creation.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446231506,1446231506,"6d9e523f35c801a369cc29bbdf35e7b002451ebf,eb5ccae545e80b456cb73346979607a537a23dcf"
a71b91f6f55a1818cd8c77f65e715b14c59d529d,a71b91f6,6.0 disable backup + bump target SDK to 23,"6.0 disable backup + bump target SDK to 23

Had issues testing the backup and restore of app data.
So, I'm disabling it for now. (See earlier PatchSet for details.)

Also bumping target SDK level to 23 since this should be the
last step to get ready for Marshmallow. (The runtime permission
code for share-a-fact should come when that gets re-enabled
for 6.0 devices).

Bug: T116232
Change-Id: I12bbf6dea7b366b3da7a6d3707d642e241812169
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1445572407,1446230555,f4b04e656b8c7deff123fa021de47448aee22fdf
f4b04e656b8c7deff123fa021de47448aee22fdf,f4b04e65,6.0 runtime permission for save image from gallery,"6.0 runtime permission for save image from gallery

Added runtime permission checks before trying to write to
external storage in gallery.

Note this patch does not address the share a fact functionality since
it doesn't currently work, see T116120.

The runtime checks are used once target SDK level is set to 23.
I'll let a later patch change this value, once we're done with all the
permission checks and the backup check.

Bug: T113750
Change-Id: I356a736a0d84c99e05e0a6ae1784f99c1c59779e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1445388289,1446230554,df10afd5efb0c794fde8dd70b9979a683f49d853
df10afd5efb0c794fde8dd70b9979a683f49d853,df10afd5,6.0 runtime permission for location,"6.0 runtime permission for location

Added runtime permission checks for location in both NearbyFragments
(old and new one).

The runtime check are used once target SDK level is set to 23.
I'll let a later patch change this value, once we're done with all the
permission checks and the backup check.

Added @StringRes annotation in certain FeedbackUtil methods.

Bug: T113749
Change-Id: I8569f19dbcb98c2fe09c2b093c17130a47c4ab29
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1445380248,1446230551,6d9e523f35c801a369cc29bbdf35e7b002451ebf
6d9e523f35c801a369cc29bbdf35e7b002451ebf,6d9e523f,"Merge ""Restrict WebView debug enabled call to debug APKs only""","Merge ""Restrict WebView debug enabled call to debug APKs only""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446222872,1446222872,"348d40492483512cd9132c448876e54272306743,669df98e7a01c9c334b8e40d57044e4cb8ac6721"
eb5ccae545e80b456cb73346979607a537a23dcf,eb5ccae5,Fix possible unnecessary tab creation.,"Fix possible unnecessary tab creation.

When the app is launched via a VIEW intent (e.g. from an external
Browser), and it didn't have any tabs open from previous sessions, the app
unconditionally creates a new tab for the Main Page *and* a new tab for
the page requested in the VIEW intent, resulting in a puzzling appearance
of a new tab on top of a ""blank"" tab.

This patch makes it so that the app creates a new tab only if the topmost
tab's backstack is nonempty. This successfully handles the case described
above.

Bug: T116502
Change-Id: I6557678d11e965fd28f63c76e835aa85317c5075
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1446215633,1446215633,348d40492483512cd9132c448876e54272306743
669df98e7a01c9c334b8e40d57044e4cb8ac6721,669df98e,Restrict WebView debug enabled call to debug APKs only,"Restrict WebView debug enabled call to debug APKs only

Only call WebView.setWebContentsDebuggingEnabled
if app is built in debug mode. No need to call this for release
builds since the default is false.

This patch may or may not fix T113052 but it will change the kind
of outer stack traces we get for this issue (the inner most part, though,
should stay the same). It will postpone the missing WebView issue
until later. The call happens very early when the Application object is created.

Bug: T113052
Change-Id: Ia9bd9869f7f5fc8004782d996cb4d379e69d8b24
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1446184887,1446184887,e4be0cbc9d1cdf3313015acfc7c097a88bfe3617
d2b653bccfb3c12f81b9fd6a0ff847fb381d2a8a,d2b653bc,Make status bar color consistent across activities.,"Make status bar color consistent across activities.

Currently, our PageActivity uses a translucent status bar, which appears
slightly darker than the toolbar color (which is correct). However, in our
other activities (Login, Edit, etc), the status bar color looks much
lighter than the toolbar, and is inconsistent.

This patch provides a color for the status bar that is set via styles.
Note: only relevant for Lollipop+.

Change-Id: Ia5da4de8a42dbcf8810eb47f836471fc8dff73e9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1446137818,1446138034,348d40492483512cd9132c448876e54272306743
348d40492483512cd9132c448876e54272306743,348d4049,"Merge ""Hygiene: move View concerns to ArticleHeaderView""","Merge ""Hygiene: move View concerns to ArticleHeaderView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1446128126,1446128126,"6c45d3abd84f4debcad130bebd3a548b03c065a3,285e4bfc2ca2b61bb758a60e35039450658fed32"
6c45d3abd84f4debcad130bebd3a548b03c065a3,6c45d3ab,Suppress delete button icon on empty search history page,"Suppress delete button icon on empty search history page

Bug: T116449
Change-Id: I2aff03ccb90dba61202aece6fad49ad320f23874
",,,,Wikinaut,mail@wikinaut.de,Wikinaut,mail@wikinaut.de,1445641339,1446101971,011a540356f72a573ef733451ff9fff158987d7c
285e4bfc2ca2b61bb758a60e35039450658fed32,285e4bfc,Hygiene: move View concerns to ArticleHeaderView,"Hygiene: move View concerns to ArticleHeaderView

Continue to prune the LeadImagesHandler class by moving some View
concerns to ArticleHeaderView and encapsulating some of the presentation
logic in ArticleHeaderView by hiding internal View implementation
details.

Change-Id: I12341a8fa7b6fd75c5c443dd609d4a11f755209f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445530283,1445973032,cbae7061d315dd3df7937ddc0d859ea60cd8857b
011a540356f72a573ef733451ff9fff158987d7c,011a5403,introducing DeleteAllHistoryTask,"introducing DeleteAllHistoryTask

broken out from Change I92ec34150a37e37de18770c52abf8fd266512ab8

Change-Id: I0a96dde1ec8fc5f2aa1558ec2489854e14402ada
",,,,Wikinaut,mail@wikinaut.de,Wikinaut,mail@wikinaut.de,1445970442,1445970442,cbae7061d315dd3df7937ddc0d859ea60cd8857b
cbae7061d315dd3df7937ddc0d859ea60cd8857b,cbae7061,Use Testing Support Library test runner,"Use Testing Support Library test runner

* Use AndroidJUnitRunner for all Android instrumentation tests and add
  androidTestCompile dependency[0]. This dependency includes JUnit 4,
  among many other nice things.
* Remove dummy test calls to startActivity(). I believe these were added
  as a workaround for using Activity test cases to exercise non-Activity
  functionality. They are no longer needed with the new test runner and
  actually cause it to fail assertions in
  android.test.ActivityUnitTestCase.startActivity.

[0] https://developer.android.com/tools/testing-support-library/index.html
[1] https://integration.wikimedia.org/ci/job/apps-android-wikipedia-test/20/artifact/logcat.txt/*view*/

Change-Id: I6e0d99fb7da075135b7a9ce248b959825bf4d00c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1445533549,1445959941,e302d877011e4af55fbdf91bf5637d8143524fb8
e302d877011e4af55fbdf91bf5637d8143524fb8,e302d877,"Merge ""Add Butter Knife and upgrade Checkstyle""","Merge ""Add Butter Knife and upgrade Checkstyle""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445959781,1445959781,"b4d8ab9e3e8341ad84561da2f83cabdfdb0b3836,371f03261dc359ef0d04fbcc5445b86f012d7482"
b4d8ab9e3e8341ad84561da2f83cabdfdb0b3836,b4d8ab9e,"Merge ""Suppress delete button (icon) if history is empty""","Merge ""Suppress delete button (icon) if history is empty""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445959183,1445959183,"a3a19022345e86831a84d888dfca36c67419a7df,3d5fc7d78fcd9f2be06d5f834fbb8f90b6d7218e"
a3a19022345e86831a84d888dfca36c67419a7df,a3a19022,"Merge ""Hygiene: replace Views with custom View""","Merge ""Hygiene: replace Views with custom View""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445958727,1445958727,"4ee179d6deecb592e0bcc8c98c7058b6bd927ed4,d8857b7dbfa74dee1659aeb78ed097e9c2baab78"
4ee179d6deecb592e0bcc8c98c7058b6bd927ed4,4ee179d6,"Merge ""Upgrade to Gradle v2.8""","Merge ""Upgrade to Gradle v2.8""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445958210,1445958210,"e4be0cbc9d1cdf3313015acfc7c097a88bfe3617,a51d088937fa8e7b967d99de9958b8f2449cf691"
e4be0cbc9d1cdf3313015acfc7c097a88bfe3617,e4be0cbc,Bump versionCode,"Bump versionCode

Change-Id: Iacb7d9c396078325a64943bd344055596119b4f4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445878673,1445878673,0751eea4cf0005519e5e0bfc7c250577d26a7711
0751eea4cf0005519e5e0bfc7c250577d26a7711,0751eea4,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id36ae1868b5345e2b34b6cfbf9cdf4340764a5f2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445877482,1445877482,18df60b8c2a3be2b89384dc26d756dddd644f056
18df60b8c2a3be2b89384dc26d756dddd644f056,18df60b8,"Merge ""Fix top padding in Nearby fragment.""","Merge ""Fix top padding in Nearby fragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445877128,1445877128,"b8baaab6711ccb7a42ab7ab84898c8685b969e28,5117aab50f8273423b6339a468147b45c36129f9"
b8baaab6711ccb7a42ab7ab84898c8685b969e28,b8baaab6,"Merge ""Open new tabs from Nearby Pages in foreground""","Merge ""Open new tabs from Nearby Pages in foreground""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445876568,1445876568,"18ed101ce8532131faa12fd5f6fbf7ba8c3b3baa,c05925342abc7cd3015d74182825419eeb140f32"
5117aab50f8273423b6339a468147b45c36129f9,5117aab5,Fix top padding in Nearby fragment.,"Fix top padding in Nearby fragment.

Bug: T116081
Change-Id: I54d48cfac5ec21c3442820b78898b8465dbd1005
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1445875531,1445875583,18ed101ce8532131faa12fd5f6fbf7ba8c3b3baa
18ed101ce8532131faa12fd5f6fbf7ba8c3b3baa,18ed101c,"Merge ""Include CSS styles for Parsoid Cite extension""","Merge ""Include CSS styles for Parsoid Cite extension""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445875342,1445875342,"ad4524c4733235707250e227ad83b6f139199909,c03e59e395118819ff046e34becd703056e81114"
ad4524c4733235707250e227ad83b6f139199909,ad4524c4,"Merge ""Remove ProGuard map archival from release script""","Merge ""Remove ProGuard map archival from release script""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445875035,1445875035,"3e516ac20304c7bddb4516be5eeda16b92445914,34493076bb18a403a46ffe4e4c3637ec24d709a4"
3e516ac20304c7bddb4516be5eeda16b92445914,3e516ac2,"Merge ""Fix HockeyApp ProGuard rules""","Merge ""Fix HockeyApp ProGuard rules""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445874605,1445874605,"7e01930d60d15787171727126ba04fdfe970bc42,e884419ebfb5fa6c39f6dd623cc6585e4c3c6d9a"
e884419ebfb5fa6c39f6dd623cc6585e4c3c6d9a,e884419e,Fix HockeyApp ProGuard rules,"Fix HockeyApp ProGuard rules

* Fix HockeyApp ProGuard rules. The old rules don't seem to work any
  more. Blanket keep all in the HockeyApp package.
* Check for crashes in PageActivity. When transmission of the crash
  report fails in CrashReportActivity, the report lingers until the next
  check. Always check in PageActivity so we get reports as soon as
  possible.

Change-Id: I3450136cb849b647169de1cbe06a7127026dff2e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445730585,1445730585,1b3ba78888533bdfc9599dbced0498aee5dfe229
34493076bb18a403a46ffe4e4c3637ec24d709a4,34493076,Remove ProGuard map archival from release script,"Remove ProGuard map archival from release script

ProGuard'd builds are no longer obfuscated so mapping.txt is no longer
generated. Remove the mapping archival step from make-release.py.

Change-Id: Ibfd40251a37548853d81e63dc906d1663b31103f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445717155,1445717155,7e01930d60d15787171727126ba04fdfe970bc42
c05925342abc7cd3015d74182825419eeb140f32,c0592534,Open new tabs from Nearby Pages in foreground,"Open new tabs from Nearby Pages in foreground

Overrode onOpenInNewTab() method in LongPressHandler in NearbyFragment
to use PageActivity's displayPageInForegroundTab() method.

Bug: T107891
Change-Id: Id2c3232baef33adee389a46e42d0da981d646614
",,,,Asad Salman,me@asad.co,Asadsalman,me@asad.co,1445628788,1445679828,3643e8423449df4b35ac6b3783184b0c305a7e09
3d5fc7d78fcd9f2be06d5f834fbb8f90b6d7218e,3d5fc7d7,Suppress delete button (icon) if history is empty,"Suppress delete button (icon) if history is empty

Bug: T116431
Change-Id: I71e0437fb92497e1c7c12e1c5faa84e0eff58ba0
",,,,Wikinaut,mail@wikinaut.de,Wikinaut,mail@wikinaut.de,1445631993,1445632435,3643e8423449df4b35ac6b3783184b0c305a7e09
c03e59e395118819ff046e34becd703056e81114,c03e59e3,Include CSS styles for Parsoid Cite extension,"Include CSS styles for Parsoid Cite extension

The HTML for references has changed to use a different CSS rule with Parsoid: <span class=""mw-ref""> vs. <sup> in mobileview.
I found the CSS rules through:
view-source:https://en.wikipedia.org/api/rest_v1/page/html/Cat
<link rel=""stylesheet"" href=""//en.wikipedia.org/w/load.php?modules=mediawiki.legacy.commonPrint,shared|mediawiki.skinning.elements|mediawiki.skinning.content|mediawiki.skinning.interface|skins.vector.styles|site|mediawiki.skinning.content.parsoid|ext.cite.style&amp;only=styles&amp;skin=vector""/>
--> https://en.wikipedia.org/w/load.php?debug=true&modules=ext.cite.style&amp;only=styles&amp;skin=vector
--> https://en.wikipedia.org/static/1.27.0-wmf.3/extensions/Cite/modules/ext.cite.style.css
So, I had to add ""ext.cite.style"" to the list of modules to be loaded.
Will see if we can make that an automatic dependency in mw-vagrant.
In the meantime you should enabled the role ""cite"" as well.

Bug: T116390
Change-Id: I5f01e8c1aeb129e2aa4bd42211f36d329ca4aac7
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1445631023,1445631023,3643e8423449df4b35ac6b3783184b0c305a7e09
7e01930d60d15787171727126ba04fdfe970bc42,7e01930d,Bump versionCode,"Bump versionCode

Change-Id: Ib82b2b8ae7cd6b04dfb489732c668c3091f66552
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445628356,1445628356,3643e8423449df4b35ac6b3783184b0c305a7e09
3643e8423449df4b35ac6b3783184b0c305a7e09,3643e842,"Merge ""Add ""Privacy"" section header to Preferences screen""","Merge ""Add ""Privacy"" section header to Preferences screen""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445616889,1445616889,"5ebdc52953843a6ea17261a9f2434f3250903825,eebe57ce0733b0cdd15366cfe116f9f76fb8b2fa"
5ebdc52953843a6ea17261a9f2434f3250903825,5ebdc529,"Merge ""Make link preview button highlight more opaque for API <20.""","Merge ""Make link preview button highlight more opaque for API <20.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445616491,1445616491,"336d55c1d7a7b2c10e7491f038dfd9e27792750f,855d68149fd792dcf33a299b1256f34de9d34c56"
855d68149fd792dcf33a299b1256f34de9d34c56,855d6814,Make link preview button highlight more opaque for API <20.,"Make link preview button highlight more opaque for API <20.

Bug: T116324
Change-Id: I4f93d0c80bdff3eff24a095247361f010039ab3c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1445615163,1445615163,1b3ba78888533bdfc9599dbced0498aee5dfe229
eebe57ce0733b0cdd15366cfe116f9f76fb8b2fa,eebe57ce,"Add ""Privacy"" section header to Preferences screen","Add ""Privacy"" section header to Preferences screen

Bug: T116360
Change-Id: I4bb245436113418c14f71238d82ad7382ecc684e
",,,,Wikinaut,mail@wikinaut.de,Wikinaut,mail@wikinaut.de,1445584966,1445615050,1b3ba78888533bdfc9599dbced0498aee5dfe229
336d55c1d7a7b2c10e7491f038dfd9e27792750f,336d55c1,Restore FixedViewPager,"Restore FixedViewPager

Revert FixedViewPager removal in 3fc5c0a.

Bug: T116384
Change-Id: I7c4a207288a0f227150f82e902a01fad3483ff16
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445614040,1445614040,1b3ba78888533bdfc9599dbced0498aee5dfe229
1b3ba78888533bdfc9599dbced0498aee5dfe229,1b3ba788,"Merge ""Increase title line-height""","Merge ""Increase title line-height""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445539875,1445539875,"bcb4948ec5eab40f5f36a4e5dc12888ce8d09cf3,7a7a3be29ba4ad46cecd81ab85064bb17589d7d7"
bcb4948ec5eab40f5f36a4e5dc12888ce8d09cf3,bcb4948e,"Merge ""Promote lead image animation to production.""","Merge ""Promote lead image animation to production.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445536178,1445536178,"3bb10d57d75908c4f882a9ee6e2714f99b736ffd,e52c34d10694c386bce6e892584db5a641163f6c"
a51d088937fa8e7b967d99de9958b8f2449cf691,a51d0889,Upgrade to Gradle v2.8,"Upgrade to Gradle v2.8

Upgradle to v2.8[0] and regenerate the wrapper jar and script.

[0] https://docs.gradle.org/2.8/release-notes

Change-Id: Ifffad89f0eb07c924b621063e9eec9a8c484c6ff
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445534905,1445534905,3040cd4e3b1a565712f9ea3c5174f5391e87db49
371f03261dc359ef0d04fbcc5445b86f012d7482,371f0326,Add Butter Knife and upgrade Checkstyle,"Add Butter Knife and upgrade Checkstyle

The Android app wants to do more with native Views. In this interest,
Butter Knife v7.0.1 is added, a tool that is helpful in eliminating some
of the boilerplate of native Views.

BK increases the size of the dev release apk from 4201830B to 4220733B,
about ~18KiB.

To verify that the library is working properly, one usage of BK is made
in ArticleHeaderView.

BK uses annotations and requires annotated fields to be non-private
which violates Checkstyle rules. The implicit Checkstyle version was
v5.9[0] which does not support the ignoreAnnotationCanonicalNames
property of the VisibilityModifier module. This patch upgrades
Checkstyle to the latest, v6.11.2, adds the BK @Bind annotated property
exception, and fixes all new violations of type ""Redundant 'public'
modifier"".

[0] https://github.com/gradle/gradle/blob/master/subprojects/code-quality/src/main/groovy/org/gradle/api/plugins/quality/CheckstylePlugin.groovy#L21

Change-Id: I08af3779dba038f4e349a68f1e600782cda1fc52
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445529673,1445529673,d8857b7dbfa74dee1659aeb78ed097e9c2baab78
3bb10d57d75908c4f882a9ee6e2714f99b736ffd,3bb10d57,Add a little more padding at the bottom of link previews.,"Add a little more padding at the bottom of link previews.

...to make sure there's 16dp of space between the images and the
""Continue"" button when the preview is pulled up fully.

Change-Id: I86f2828a2f271a8b27906f4798d47941cfab7339
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1445522609,1445529279,3040cd4e3b1a565712f9ea3c5174f5391e87db49
d8857b7dbfa74dee1659aeb78ed097e9c2baab78,d8857b7d,Hygiene: replace Views with custom View,"Hygiene: replace Views with custom View

Replace Views associated with the lead image and article title with a
custom View, ArticleHeaderView. Additional patches forthcoming to keep
the diffs small and intelligible.

Change-Id: Ide61249cad6a1a2522d2a315dfb7c58e4ce46408
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445372425,1445529278,3040cd4e3b1a565712f9ea3c5174f5391e87db49
7a7a3be29ba4ad46cecd81ab85064bb17589d7d7,7a7a3be2,Increase title line-height,"Increase title line-height

Give titles a little more space to breathe.

Interestingly, the default value, which is undocumented, seems to vary
by platform, getting smaller as API level increases, and be less than 1.0.

Bug: T113003
Change-Id: Ic5c7761f605affd718b5ba39b372064d073b489c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1445528836,1445528836,1d36231a15d3203e6c0f978ca159b5cb22937c24
3040cd4e3b1a565712f9ea3c5174f5391e87db49,3040cd4e,Hygiene: make inner class static,"Hygiene: make inner class static

Convert inner class, CabSearchView.PlainTextInputFilter, to a static
nested class and update comments. No functional changes intended.

Change-Id: Id77751d543f2c7b4483f98d6da04420e1d57ebaa
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1445463622,1445528180,ac7dcd60d0cb0d13d02c8779241118b8a3b238c6
e52c34d10694c386bce6e892584db5a641163f6c,e52c34d1,Promote lead image animation to production.,"Promote lead image animation to production.

(facepalm...)
Also, fillAfter is unnecessary for this animation.

Change-Id: I90c90b3b19c5294cf89bdbb8dbc0e80f01d708cd
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1445525939,1445528142,ac7dcd60d0cb0d13d02c8779241118b8a3b238c6
ac7dcd60d0cb0d13d02c8779241118b8a3b238c6,ac7dcd60,Fix translation test,"Fix translation test

Fix a bad format specifier.

Change-Id: Ia626f238dc80dc6519e014de769bbfed25d0f298
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445526485,1445526485,1d36231a15d3203e6c0f978ca159b5cb22937c24
1d36231a15d3203e6c0f978ca159b5cb22937c24,1d36231a,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia25af7f77a1ae8de35143230597ad54c151394d3
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1445506704,1445506704,6c7a556bf9abcde8ccee0bcd4c0f44422329482a
6c7a556bf9abcde8ccee0bcd4c0f44422329482a,6c7a556b,"Merge ""Make separate list item colors for Light/Dark mode.""","Merge ""Make separate list item colors for Light/Dark mode.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445466643,1445466643,"6f3d0bcb5fe8cd86982bdbc96e13a4ec03d349ac,c1b2845d6b1c2b07bdb42a5dddec78c42a92cca0"
6f3d0bcb5fe8cd86982bdbc96e13a4ec03d349ac,6f3d0bcb,"Merge ""Make ""continue to article"" button overlay link preview (once again)""","Merge ""Make ""continue to article"" button overlay link preview (once again)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445466340,1445466340,"350b894097b573efe137c41903502aa67e376d39,7b140c255f346d59302151234a04e235ad5bc1ba"
c1b2845d6b1c2b07bdb42a5dddec78c42a92cca0,c1b2845d,Make separate list item colors for Light/Dark mode.,"Make separate list item colors for Light/Dark mode.

In Dark mode, the default color of page titles was making them invisible
against the dark background.

Also, made the page title be ellipsize=end, since ellipsize=middle was not
working.

Bug: T116098
Bug: T114957
Change-Id: I6a451860d4f9dc857d670a433e4fb70d84be6886
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1445437062,1445465852,079533a58589ac1e9db85b324becbf835d81cf97
7b140c255f346d59302151234a04e235ad5bc1ba,7b140c25,"Make ""continue to article"" button overlay link preview (once again)","Make ""continue to article"" button overlay link preview (once again)

Reverts the link preview to previous behavior in which the ""continue to
article"" button persists at the bottom of the screen while the link
preview is open.

Bug: T112997
Change-Id: Ib52d6d6cc9435a8d6f1a45996c1c0bd3a6f17843
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1445282500,1445465705,079533a58589ac1e9db85b324becbf835d81cf97
350b894097b573efe137c41903502aa67e376d39,350b8940,"Merge ""Fix ""add tab"" icon for xxxhdpi.""","Merge ""Fix ""add tab"" icon for xxxhdpi.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445463060,1445463060,"e9ddd8854ff15cde791a2e6fb7754a5450d6f7cf,52a1b30b37a1b93be7d73626afcfd54d7a1b9615"
e9ddd8854ff15cde791a2e6fb7754a5450d6f7cf,e9ddd885,"Merge ""Fix infinite loop in the webview's widen images logic""","Merge ""Fix infinite loop in the webview's widen images logic""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445458255,1445458255,"dc496e2545597aba4614bfaf25d48fcf11e28368,4a526486dd3a5738508bf45d7b1cdd36dfb92d13"
52a1b30b37a1b93be7d73626afcfd54d7a1b9615,52a1b30b,"Fix ""add tab"" icon for xxxhdpi.","Fix ""add tab"" icon for xxxhdpi.

This icon was not generated correctly by the rsvg tool, and looked weird.
We've observed this behavior before, where certain SVG images would not
render correctly by rsvg. Therefore I'm deleting the SVG file for this
icon, and instead using the pre-generated PNG files provided directly from
the Material icon set.

We should probably do this for other Material icons that we use, as well,
although the others look correctly-generated.

Change-Id: I87972f62f943a379a20928405fddf76408d310bb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1445455851,1445457129,079533a58589ac1e9db85b324becbf835d81cf97
dc496e2545597aba4614bfaf25d48fcf11e28368,dc496e25,Fix character repeating in search box,"Fix character repeating in search box

Filtering out rich text from the search box mistakenly always replaced
the current input, often a character, with the entire text field's
string and removed compositional hints provided by some soft keyboards.
This patch replaces the appropriate field subsequence and preserves all
virtual keyboard hints.

Bug: T116091
Change-Id: I7223914005916adf2b97469cb779eb776a934377
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445381518,1445455522,079533a58589ac1e9db85b324becbf835d81cf97
4a526486dd3a5738508bf45d7b1cdd36dfb92d13,4a526486,Fix infinite loop in the webview's widen images logic,"Fix infinite loop in the webview's widen images logic

In the webview's Javascript code, the images from a page are stretched to
fit in the device's screen. When widening an image, a image URL of greater
resolution can be used instead to fit better with the new computed dimensions.
With this change, we make sure that after this logic takes place, it won't be called
again for the same image, which was provoking an infinite loop causing high
CPU usage.

Bug: T109983
Change-Id: I759297334cb7e0c32dc00cd71b300c9783ebf2af
",,,,Daniel Rey,daniel.rey.lopez@gmail.com,Daniel Rey,daniel.rey.lopez@gmail.com,1445449494,1445449557,079533a58589ac1e9db85b324becbf835d81cf97
079533a58589ac1e9db85b324becbf835d81cf97,079533a5,"Merge ""Add xxxhdpi icons""","Merge ""Add xxxhdpi icons""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445373178,1445373178,"ed302b6af73c032804a91fd6159f7cd72109ee33,b39b2563f70b7af68b41d72e984918ed395b0897"
ed302b6af73c032804a91fd6159f7cd72109ee33,ed302b6a,"Merge ""Search input field no longer accepts pasted rich text""","Merge ""Search input field no longer accepts pasted rich text""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445372561,1445372561,"3fc5c0abab991b4d2f66150f5f54567a890f9db1,c2ef25a2af5108fb0e305e0650806b6577805403"
3fc5c0abab991b4d2f66150f5f54567a890f9db1,3fc5c0ab,Upgrade Support libraries to v23.1.0,"Upgrade Support libraries to v23.1.0

* Upgrade Support libraries to v23.1.0.
* Upgrade compiler and build tools to v23 and v23.0.1 as required by
  libraries. Upgrading the target SDK should be a separate card as
  additional work is necessary[0] although it is now permitted to
  ship[1].
* Upgrade HockeyApp to v3.6.2 which supports API 23.
* Upgrade the Gradle plugin to v1.3.1 which supports useLibrary, needed
  by HockeyApp.
* Side effect fix to disable misleading active state when tapping on the
  navigation drawer header logo.
* Update JVM JUnit and Android instrumentation test tasks. These seem to
  have unexpectedly changed.
* Remove WikipediaApp.getColor() which is now available in API 23 but is
  regrettably marked final.
* Update ThemedActionBarActivity to allow for toolbar Activities as
  related Window features appears to be unchangeable once set. Also,
  move the gallery's full screen request to a theme where it should have
  been. Finally, move the ContextThemeWrapper on
  LanguagePreferenceDialog to the constructor and update the themes used
  as the previous fix does not appear to work.
* Apply a workaround fix for NavigationView bug[2] introduced in the new
  Design library.
* Update ProGuard rules to exclude the v7 Support libraries based on
  experimentation.
* Update translation tests to exclude a new format string internal to
  the Support library. In a future patch, it would be better to figure
  out how to prune all library resources from the test.
* Remove FixedViewPager as the original appears to be fixed now.
* Add FloatMath as the original appears to have been removed from the
  platform and is required by Mapbox.

Tested on the following devices:
- AOSP API 23 Nexus 5 emulator
- AOSP API 15 Nexus One emulator

[0] https://www.mediawiki.org/wiki/Notes_from_Google_I/O_15#Action_Items
[1] https://developer.android.com/preview/api-overview.html
[2] https://code.google.com/p/android/issues/detail?id=190226

Bug: T107890
Bug: T112310
Change-Id: Id6b73497eb6b15466cb3acc62567f48c09a358b3
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1445034074,1445371390,1c4508521807b404a3940d32d69e3642af90b59e
c2ef25a2af5108fb0e305e0650806b6577805403,c2ef25a2,Search input field no longer accepts pasted rich text,"Search input field no longer accepts pasted rich text

The search input field (both the ""search page"" and ""search in page"") no longer shows
styled text when is pasted (for example, the hyperlinks underlined and so on).

Bug: T97962
Change-Id: I43e6084c4b153564086599a442535073f50f07d4
",,,,Daniel Rey,daniel.rey.lopez@gmail.com,Daniel Rey,daniel.rey.lopez@gmail.com,1445366931,1445367011,8dccafc57cf61adf1e68422dfae28f56c6339a7d
1c4508521807b404a3940d32d69e3642af90b59e,1c450852,Move the app launcher icons to the mipmap-{density} folder structure,"Move the app launcher icons to the mipmap-{density} folder structure

The new convention to store the launcher icon of an android app is to use
the res/mipmap-{...} folders (for example, res/mipmap-xhdpi/launcher.png,
res/mipmap-xxhdpi/launcher.png, and so on). The images in those directories
won't be erased by the most common APK optimization tools (those tools usually
generate a different APK for each display density, and so they remove all the
images under res/drawable-{...} with a density different than the specified).
Since launcher icons can be displayed at a different density than the
device density, it's best practice to put them into the mipmap directories.

Bug: T97239
Change-Id: Iac1bff9e808a41a6b82eb6d97968365c2842a3f0
",,,,Daniel Rey,daniel.rey.lopez@gmail.com,Daniel Rey,daniel.rey.lopez@gmail.com,1445086920,1445366523,8dccafc57cf61adf1e68422dfae28f56c6339a7d
b39b2563f70b7af68b41d72e984918ed395b0897,b39b2563,Add xxxhdpi icons,"Add xxxhdpi icons

Update convert-icons.py to produce xxxhdpi density assets and add them.
These assets increase the dev release apk from 4291780B to 4407296B,
about 113KiB.

Bug: T97239
Change-Id: Ia74610c2339807130bba8700e8e7b55f84778f52
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445287873,1445287873,8dccafc57cf61adf1e68422dfae28f56c6339a7d
8dccafc57cf61adf1e68422dfae28f56c6339a7d,8dccafc5,"Merge ""Update license description handling""","Merge ""Update license description handling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445285491,1445285491,"b5ebcdbb0be32aad22709f27a9157ecef5f52c3e,0fc62bf6a34920a04a6d8cc6aa2692ccc54000f9"
0fc62bf6a34920a04a6d8cc6aa2692ccc54000f9,0fc62bf6,Update license description handling,"Update license description handling

-Added a showMessageAsPlainText function to FeedbackUtil to strip HTML
 markup from string before displaying to the user

-Show license description in a Snackbar instead of a Toast

-Invert the behavior so that a regular click shows the license description
 summary in a snackbar, and a long click fires a chooser to visit the
 license info page in an external browser

Bug: T110946
Change-Id: Ic81704892e677af03ef01fd9dabdfd6fa54c329b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1445011883,1445284211,06d529bbcd677ea12a953e717aa21988586cd43a
b5ebcdbb0be32aad22709f27a9157ecef5f52c3e,b5ebcdbb,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id68f654ce1262850f1b0961b869c4ea23753b828
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1445271984,1445271984,7ae70d55745b60ad6cfcd1d04ac5a2a5c5df5874
7ae70d55745b60ad6cfcd1d04ac5a2a5c5df5874,7ae70d55,"Merge ""Tweak list items to adhere to material design""","Merge ""Tweak list items to adhere to material design""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445267586,1445267586,"878305b36c933701adf52961986f2d4ecb616ea2,e11f5dd0e1c21110bad11a41c02a4c7194723551"
878305b36c933701adf52961986f2d4ecb616ea2,878305b3,Don't obfuscate release builds,"Don't obfuscate release builds

Disable ProGuard code obfuscation[0] (but not minification). We do not
care about making the apk code unreadable[1].

[0] http://proguard.sourceforge.net/manual/usage.html#obfuscationoptions
[1] https://gerrit.wikimedia.org/r/#/c/227393/

Change-Id: I1e9b9122828c8325fbe34e3b7554d4aa185e29dd
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444934943,1445265967,ea4e88cca5589636cab656c8d0ce939f8fc16af7
e11f5dd0e1c21110bad11a41c02a4c7194723551,e11f5dd0,Tweak list items to adhere to material design,"Tweak list items to adhere to material design

As described in...

Bug: T114842
Change-Id: Id8096b8b499a1a5061a7d0348968b34fd20c5f68
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1444764742,1445265781,06d529bbcd677ea12a953e717aa21988586cd43a
ea4e88cca5589636cab656c8d0ce939f8fc16af7,ea4e88cc,"Merge ""Replace ACRA with HockeyApp""","Merge ""Replace ACRA with HockeyApp""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445027401,1445027401,"83b0d8199591f5b731e7973f4ca06180996a2845,59dce5f696264b99ce05a26068b38398af7e02a7"
83b0d8199591f5b731e7973f4ca06180996a2845,83b0d819,"Merge ""Activate progress bar while fetching random article""","Merge ""Activate progress bar while fetching random article""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445014725,1445014725,"003bb6f0096c64ddb8ba18e65bfebd7951a35276,123862242aa4ef1599df7d46117474e4f7cfc317"
59dce5f696264b99ce05a26068b38398af7e02a7,59dce5f6,Replace ACRA with HockeyApp,"Replace ACRA with HockeyApp

* Replace ACRA with HockeyApp v3.5.0. This change was made as ACRA
  doesn't offer in itself a freestanding backend or quiet automatic
  reporting, and doesn't support Marshmallow yet[0]. However, we will
  investigate a self-hosted Acralyzer installation in the future.

  HockeyApp doesn't seem to offer custom properties, so these are
  bundled as JSON in the report description. Since these properties are
  not associated with a crash instance and not preserved across
  application death, and crashes may enqueue, it's possible they may be
  inaccurate. However, these properties are used in one place presently
  and the current implementation _should_ be adequate.

  The ProGuard rules were updated for HockeyApp from this document[1]
  and a little guesswork.

  HockeyApp v3.5.0 seems to be incompatible with Marshmallow just like
  ACRA. v3.6.0-b.1 appears to work fine. The upgrade will be made in a
  subsequent patch with related changes.

  The change in APK size is ~13 KiB. More specifically, the release
  application was 3825548 B previously and 3838973 B after, increasing
  by 13425 B.

  Crash reporting was verified on dev debug, and alpha, beta, and prod
  release configurations on API 15:

  gradlew clean installDevDebug installAlphaRelease installBetaRelease installProdRelease

  Smoke test crash reporting was verified with HockeyApp v3.6.0-b.1 on
  Marshamallow (with changes coming in a subsequent patch).

  A future patch may replace alpha distribution with HockeyApp.

* Add remote logger to L in the form of logRemoteErrorIfProd(Throwable).
  This is meant to coincide with cludge fixes where the error path is
  not understood. This is done via a helper Exception,
  RemoteLogException, which supplies an accurate stacktrace by forcing
  creation at the point of logging. In the event that a build is non-
  production, L will throw the Throwable, causing the app to crash. The
  thinking was that if it's worth burning user data and engineering
  parsing time, it's worth crashing on everything but prod. A new UI was
  added to dev settings to test this functionality, save the non-prod
  crash bit.

  Also replace Exception logging functions with Throwables and fix no
  message overloads to print an empty string instead of null for their
  messages.

* Rename acra_report_dialog_title and acra_report_dialog_text to
  crash_report_dialog_title and crash_report_dialog_text. Remove
  acra_report_dialog_comment Strings as in-app feedback was removed:

  find -name strings.xml|
  xargs -rd\\n sed -ri '/<string name=""acra_report_dialog_comment""[^>]*>[^<]*<\/string>/d'

* Extremely light refactoring of PreferenceLoader and related classes to
  expose the host Activity, needed by HockeyApp, and a
  findPreference(int) overload that accepts a key String resource ID.

* Replace the crash test NullPointerException with a dummy
  TestException.

[0] https://github.com/ACRA/acra/issues/287
[1] http://support.hockeyapp.net/kb/client-integration-android/hockeyapp-and-proguard

Bug: T108420
Change-Id: Ia3b687daf5d5273520569ca60b6b04237cf7fd8d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444940781,1445012666,003bb6f0096c64ddb8ba18e65bfebd7951a35276
003bb6f0096c64ddb8ba18e65bfebd7951a35276,003bb6f0,"Merge ""Hygiene: remove unnecessary cruft from JavaScript bridge.""","Merge ""Hygiene: remove unnecessary cruft from JavaScript bridge.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445009790,1445009791,"06d529bbcd677ea12a953e717aa21988586cd43a,bdc49340f140c83070bcd894d6cfc4325cc942f5"
06d529bbcd677ea12a953e717aa21988586cd43a,06d529bb,"Merge ""Hygiene: consolidate no-translate strings""","Merge ""Hygiene: consolidate no-translate strings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445007955,1445007955,"ce07b1892b7906be9c03359c2ca594fa8cffb516,813742ead27226e77128bbb0750372c2ee3973b8"
bdc49340f140c83070bcd894d6cfc4325cc942f5,bdc49340,Hygiene: remove unnecessary cruft from JavaScript bridge.,"Hygiene: remove unnecessary cruft from JavaScript bridge.

- Removed API 10-specific file.
- Removed test-specific functions from the main Bundle.

Change-Id: I5213841eb4e26117cb0099434a86f3ac2cd4c383
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1445005378,1445006732,ce07b1892b7906be9c03359c2ca594fa8cffb516
ce07b1892b7906be9c03359c2ca594fa8cffb516,ce07b189,"Merge ""Replace contextual action bar menu on text select""","Merge ""Replace contextual action bar menu on text select""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445004516,1445004516,"f21fd9cad42a4495b95e3cfb8db3b572d7f788ab,8e8289b23210766e9dc263be34fc82fafe893c28"
f21fd9cad42a4495b95e3cfb8db3b572d7f788ab,f21fd9ca,"Merge ""Hygiene: refactor displayLeadSection()""","Merge ""Hygiene: refactor displayLeadSection()""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1445003281,1445003281,"1f4783a559fa0c9f045d844a97f10a47ef9fae23,76c847bc10e43afa90dda4dcb8536a402324f275"
8e8289b23210766e9dc263be34fc82fafe893c28,8e8289b2,Replace contextual action bar menu on text select,"Replace contextual action bar menu on text select

The contextual action bar menu (CAB) appears differently across devices.
We think it's probably simplest to replace it with our menu every time,
no matter the device, for a consistent experience.

This patch does not address API 23 concerns[0] around the new floaty
CAB nor the text selection bug[1] on API 15.

[0] https://www.mediawiki.org/wiki/Notes_from_Google_I/O_15#Soon
[1] https://phabricator.wikimedia.org/T115516

Bug: T107298
Bug: T109346
Change-Id: Ib0a80cfe80a1baa57a3dfb370f49b442ddefae81
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444855455,1444944997,46a5fdfbbe0061791686449553c1e9c1ede8fec2
1f4783a559fa0c9f045d844a97f10a47ef9fae23,1f4783a5,No longer do the spinny-arrow animation on the hamburger icon.,"No longer do the spinny-arrow animation on the hamburger icon.

This is no longer done in Google apps, and will make us more consistent
with their design guidelines.

Bug: T97465
Change-Id: Ie230c74ce8839e341f6b65af7724cee2cbe15b7c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1444940712,1444940712,488b463d982bd5b46969c6bbe281dbe2aee2143f
123862242aa4ef1599df7d46117474e4f7cfc317,12386224,Activate progress bar while fetching random article,"Activate progress bar while fetching random article

-Added updateProgressBar() method to RandomHandler

-Refactored RandomHandler.setState() (which sets menu item enabled state)
 to more descriptive and straightforward setMenuItemEnabled()

-Removed unused items from RandomHandler

Bug: T107791
Change-Id: Ia87b40cf9f07f3d9e605ce28aa18337accb221a1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1444846036,1444940377,2775d426aa31be14a0946c39e10394b2e4e6cbb9
813742ead27226e77128bbb0750372c2ee3973b8,813742ea,Hygiene: consolidate no-translate strings,"Hygiene: consolidate no-translate strings

* Rename strings-no-translate.xml to strings_no_translate.xml.
  snake_case is used for all other resources.
* Replace app_name.xml and channel.xml with strings_no_translate.xml.
  These files came before strings_no_translate.xml and are unworthy of
  the distinction.

Change-Id: I23b5fc44e0703aab1b8b0f709f8608e286cbf071
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444936976,1444936976,488b463d982bd5b46969c6bbe281dbe2aee2143f
488b463d982bd5b46969c6bbe281dbe2aee2143f,488b463d,"Merge ""Update icon for use in notifications.""","Merge ""Update icon for use in notifications.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444928273,1444928273,"4f7fa7b57dcba0ee20e6337a5711d599614f53a1,8cc79009e4f661c0b850d213c78e81639995c93a"
4f7fa7b57dcba0ee20e6337a5711d599614f53a1,4f7fa7b5,"Merge ""Fix page thumbnail caching, for real.""","Merge ""Fix page thumbnail caching, for real.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444922033,1444922033,"d2e8b08fc7fc0b181e22715c0cba5e8be0c61f3c,c97a7e9e5f7a1eec52ef1513314a1ae10be6cd2b"
c97a7e9e5f7a1eec52ef1513314a1ae10be6cd2b,c97a7e9e,"Fix page thumbnail caching, for real.","Fix page thumbnail caching, for real.

The PageTitle object in the ""model"" variable wasn't being updated
correctly after the PageLead interface constructs the Page.

Bug: T115412
Change-Id: I82b8ce1e1dfaaa1eab3d1b1a26e03c63a87b85a9
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1444920193,1444920193,46a5fdfbbe0061791686449553c1e9c1ede8fec2
8cc79009e4f661c0b850d213c78e81639995c93a,8cc79009,Update icon for use in notifications.,"Update icon for use in notifications.

The icon is now a white square with a transparent W cut out of it, which
is compliant with the visual requirements of notifications under Lollipop
and higher.

Bug: T114890
Change-Id: I191e4690e818c79c16b4c34269ba5048ccc400ff
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1444869762,1444869762,46a5fdfbbe0061791686449553c1e9c1ede8fec2
76c847bc10e43afa90dda4dcb8536a402324f275,76c847bc,Hygiene: refactor displayLeadSection(),"Hygiene: refactor displayLeadSection()

JsonPageLoadStrategy.displayLeadSection() was large and cumbersome. This
patch divides the method into several concerned methods. No functional
changes intended.

Change-Id: I58f8f6ab3922d56d6d0f13ea8b9153a7e898caac
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444861123,1444861123,46a5fdfbbe0061791686449553c1e9c1ede8fec2
d2e8b08fc7fc0b181e22715c0cba5e8be0c61f3c,d2e8b08f,Hygiene: remove unused string resource,"Hygiene: remove unused string resource

Remove unused string resource as reported by Android Lint.

Change-Id: I97e02917d75f4ab6833e9c87b253068bb764946a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444856072,1444856072,46a5fdfbbe0061791686449553c1e9c1ede8fec2
46a5fdfbbe0061791686449553c1e9c1ede8fec2,46a5fdfb,"Merge ""Revive the session funnel.""","Merge ""Revive the session funnel.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444846991,1444846991,"cae718ae729b26fdc84d9d9a4c940750ad7794bf,c97f297852cca30ab53736ac96ff4489df15293d"
cae718ae729b26fdc84d9d9a4c940750ad7794bf,cae718ae,"Merge ""Prevent lead paragraph shifting from leaving connected content behind""","Merge ""Prevent lead paragraph shifting from leaving connected content behind""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444846694,1444846694,"2775d426aa31be14a0946c39e10394b2e4e6cbb9,fa87e0ab5b20cef7c6f5744aaebc984d6d3cbe64"
c97f297852cca30ab53736ac96ff4489df15293d,c97f2978,Revive the session funnel.,"Revive the session funnel.

- Re-enabled the session funnel, to be sampled at 1:100 in production and
  1:1 in non-production.
- Updated the funnel to record the number of pages viewed during a
  session, categorized by source.
- Added a new source, to represent pages viewed from the disambiguation
  list (Similar pages).
- The funnel now also records the average latency of the lead section
  request and the rest-of-sections request over the network. It also
  records whether the request is done via the MediaWiki API, or the new
  content service.
- Added a developer preference to set the length of a session for testing
  purposes (default is 30 minutes).

Bug: T111541
Change-Id: I600b00c2868a6922c1a0e02c86826e146a8dc2cb
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1444403759,1444844579,052f2c0cbd2bb79d2cd4cef84d23d6ac28117f22
2775d426aa31be14a0946c39e10394b2e4e6cbb9,2775d426,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia9edc472fa84a7a1410efecb4645a0b4b05d9371
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1444820450,1444820450,052f2c0cbd2bb79d2cd4cef84d23d6ac28117f22
fa87e0ab5b20cef7c6f5744aaebc984d6d3cbe64,fa87e0ab,Prevent lead paragraph shifting from leaving connected content behind,"Prevent lead paragraph shifting from leaving connected content behind

This patch updates the lead paragraph shifting logic to create a span
consisting of the first qualifying <p> element encountered and any
subsequent non-<p> elements until the next <p> is encountered.

Simply moving the first <p> element up, as we did before,  may result in
elements appearing between the first paragraph as designated by
<p></p> tags and other elements (such as an unnumbered list) that may be
intended as part of the first display paragraph.

Bug: T111958
Change-Id: I41f2b16f9b5d8fcac7bef156a3f3726d7bfe36d0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1444679285,1444768200,1ac5f06410aba77045ffe47819aaba3ce0483ac9
052f2c0cbd2bb79d2cd4cef84d23d6ac28117f22,052f2c0c,"Merge ""L10npalooza! Make various UI elements consistent with the article language""","Merge ""L10npalooza! Make various UI elements consistent with the article language""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444761072,1444761072,"3018f601a51ecc7d62959da4d2b7b7dcd542274c,cb9b679b3352d82a36fd4f726f6776d13ce09183"
3018f601a51ecc7d62959da4d2b7b7dcd542274c,3018f601,"Merge ""Resolve protocol-relative license URLs before passing for external handling""","Merge ""Resolve protocol-relative license URLs before passing for external handling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444754369,1444754369,"8b9fed2c8fc40026586aecf003c2ade861a00f15,d61f20d25b8778237bf4647fdf206f864c9e164d"
8b9fed2c8fc40026586aecf003c2ade861a00f15,8b9fed2c,"Merge ""Add preference to show link previews.""","Merge ""Add preference to show link previews.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444753969,1444753969,"455e04293ead7d46a28b2c3df782c3d45504d97d,0df11bdd9422497736d21e4e3351d0f62074d63a"
455e04293ead7d46a28b2c3df782c3d45504d97d,455e0429,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Iaf9d75a4e34a80135b1aedd2dd1bde4abc326c80
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444752528,1444752528,1ac5f06410aba77045ffe47819aaba3ce0483ac9
0df11bdd9422497736d21e4e3351d0f62074d63a,0df11bdd,Add preference to show link previews.,"Add preference to show link previews.

- Added a preference.
- Updated the schema to have an additional ""action"" that represents
  clicking links in a disabled state.
  https://meta.wikimedia.org/wiki/Schema:MobileWikiAppLinkPreview

Bug: T114495
Change-Id: I625ea7155b2fa0245ded762046219ed9d9e9e40f
",,,,dbrant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1442411104,1444750480,1ac5f06410aba77045ffe47819aaba3ce0483ac9
d61f20d25b8778237bf4647fdf206f864c9e164d,d61f20d2,Resolve protocol-relative license URLs before passing for external handling,"Resolve protocol-relative license URLs before passing for external handling

A file's license URL field will sometimes contain a protocol-relative
URL pointing to an on-wiki File: page describing the terms of our use,
particularly in the case of copyrighted media presented under terms of
fair use.

This adds a call to NetworkUtils.resolveProtocolRelativeUrl before
passing them to the system so that it knows how to handle them.

Also refactored the external link handler in GalleryActivity to use
NetworkUtils.resolveProtocolRelativeUrl rather than repeating ourselves.

Bug: T110946
Change-Id: Icfe96b39ddd7e80a37d31626e03949e064fe1f0c
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1444748135,1444748427,1ac5f06410aba77045ffe47819aaba3ce0483ac9
cb9b679b3352d82a36fd4f726f6776d13ce09183,cb9b679b,L10npalooza! Make various UI elements consistent with the article language,"L10npalooza! Make various UI elements consistent with the article language

* Localize the 'Read More' section header and TOC entry to match the
  article language when setting them on their respective components.

* Localize 'Similar pages', 'Page issues', 'Quick facts' and 'More
  information' to the article language before sending them over the
  bridge.

* Correctly align page titles and descriptions based on language.

* Correctly align the table of contents based on language.

* Correctly align and localize link preview contents based on language.

* Create new RtlAwareTextView and RtlAwareListView classes to assist in
  the above.

* Move L10n utils from Utils to L10nUtils (there may be room for
  for additional refactoring in this area in a separate patch; there
  seem to be unwarranted assumptions in play about text in native
  components matching the default locale for the device).

Bug: T109385
Bug: T111585
Change-Id: I24af0963b3c34fb4a5def426ae1eaec611c2407d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1443635989,1444421133,3bf1b720e066404960ea41ad40aaca855e80777c
1ac5f06410aba77045ffe47819aaba3ce0483ac9,1ac5f064,"Merge ""Beta: turn on/off RB service remotely plus fallback""","Merge ""Beta: turn on/off RB service remotely plus fallback""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444404011,1444404011,"b4431c280968fce1d75260bbf0aac697074705c7,18153e00a0340266361670ae554bcf5eda46690e"
b4431c280968fce1d75260bbf0aac697074705c7,b4431c28,"Merge ""Improve appearance and consistency of language selection interfaces.""","Merge ""Improve appearance and consistency of language selection interfaces.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444402912,1444402912,"8b1c161d00b9c506b1f2046d28566397f3320431,0c60e30322223a66b2e00a14cef96eb799bac312"
8b1c161d00b9c506b1f2046d28566397f3320431,8b1c161d,Fix toolbar background,"Fix toolbar background

Fix regression in 3e91f1d where the toolbar background was incorrect for
many articles. The fix was to simplify the state of
SearchBarHideHandler.

Bug: T114800

Change-Id: I7c7d0e7718c91a74cc9570fd1ebdb06a768d6625
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444174663,1444334184,3bf1b720e066404960ea41ad40aaca855e80777c
0c60e30322223a66b2e00a14cef96eb799bac312,0c60e303,Improve appearance and consistency of language selection interfaces.,"Improve appearance and consistency of language selection interfaces.

- Now using the same list item layout for wiki language selection and
  article language selection. Deleted the now-unused layout
  ""simple_list_item_activated_2"", which was using the deprecated
  TwoLineListItem anyway.
- Use TextInputLayout for the ""search"" fields, which looks more Material
  and consistent with other places where we have text input.
- In the interlanguage activity, use our generic WikiErrorView, which
  encapsulates showing of any errors encountered when fetching article
  titles.

Bug: T114844
Change-Id: I3e880463c698e76c1725f52c359cbaf1dacd653e
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1444325911,1444326388,3bf1b720e066404960ea41ad40aaca855e80777c
18153e00a0340266361670ae554bcf5eda46690e,18153e00,Beta: turn on/off RB service remotely plus fallback,"Beta: turn on/off RB service remotely plus fallback

You can still manually turn on/off RESTBase usage via developer settings.
The roll-out is initially only for the beta app.
The remote config has a percentage of beta app installs which
get to use our RESTBase endpoints for loading page content automatically.

If there is a significant failure it will fall back to using MW API
for the next 100 page loads.
After that it tries again to use RB until there is another RB failure and so on.

Change-Id: Ic189223ebb47f944e8bb80a6b1ec4d6aa98eaed5
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1443761271,1444319904,0e33179cec04923de3c43677bb52458b02623c43
3bf1b720e066404960ea41ad40aaca855e80777c,3bf1b720,"Merge ""Display notification on image save""","Merge ""Display notification on image save""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444317974,1444317974,"a4db8588d0df00d3503e947b22721970cf2667d9,2ea5f3240957f59598e4b94a438457cae69e0761"
2ea5f3240957f59598e4b94a438457cae69e0761,2ea5f324,Display notification on image save,"Display notification on image save

This patch adds a system notification displayed to the user when an
image is saved from the gallery.  When the main body of the notification
is clicked, it opens the image in the default image viewing application.
When the 'share' button attached to the notification is clicked, a chooser
is displayed for the user to choose an application for sharing.

The Intent to share the image is sent with the image's filename and a link
to a file page with extended information on the image, including license
information.

Bug: T104529
Change-Id: Iea2f133f21190cc2142186df5ad7722383ad473a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1444067496,1444256513,d8cee7f1217e5c9552b5cf7d3c0c321745249c96
a4db8588d0df00d3503e947b22721970cf2667d9,a4db8588,"Make ""use system language"" implied","Make ""use system language"" implied

In the interest of avoiding extra finger work and more sophisticated UI,
remove the system language switch and implicitly enable or disable ""use
system language"" according to the app language entry selected and
the actual system language.

This change might cause confusion for a very small percentage of use
cases. For example, if the user picks Japanese and that language happens
to be the system language, the app language will be implicitly set to
follow the system language, indicated by the special language key value
of null. If the user then leaves the app and changes the system language
to Russian and reenters the app, they're either pleased to see that the
app language automatically updated to Russian without having to wonder
what ""system language"" meant in the first place OR they're confused and
reset the app language to Japanese again. Thereafter, they never have to
reset the app language even if they change the system language. The
first step is actually unnecessary to arrive at this dilemma since the
initial language is the system language. Despite this potential
confusion, we believe this change will provide the best experience for
most users.

Additional related changes:
* Always return the English language canonical name in
  AppLanguageState.getAppLanguageCanonicalName(). It was a bug to return
  a localized form.
* Add StringUtil.equals() for safe comparison of null Strings.
* Add some missing @NonNull / @Nullable annotations.
* Remove unused string resources.
* Remove some unused methods.
* Update some comments.

Bug: T113097
Bug: T112978
Change-Id: Ia86010b30a7a0976ba9f4a8349616ba495bbf287
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444168318,1444250804,0f871668ea0750ee88e77afacaca5cda6b6060f9
0f871668ea0750ee88e77afacaca5cda6b6060f9,0f871668,"Merge ""Enable hardware accelerated rendering for WebView""","Merge ""Enable hardware accelerated rendering for WebView""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444233298,1444233298,"c8e2ccb079fa6995c6f8706c9e7f64f3a8b3e529,1ed8483664800087b21ff14e8079e3f02307f759"
c8e2ccb079fa6995c6f8706c9e7f64f3a8b3e529,c8e2ccb0,"Merge ""Fix Exception when sharing a fact""","Merge ""Fix Exception when sharing a fact""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444232114,1444232114,"e4265b5f06770af5acc90d1a6358aeba699bfce2,e936a1c75117a0b53d72d6ef0659b1d00de088c2"
e4265b5f06770af5acc90d1a6358aeba699bfce2,e4265b5f,"Merge ""Hygiene: clean up color code hex syntax""","Merge ""Hygiene: clean up color code hex syntax""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444222953,1444222953,"d3750e5ce45046d8739b34d4c52109bf5a485446,8b6fca20bb4f49c702afb11e1496c9a6d88017ef"
d3750e5ce45046d8739b34d4c52109bf5a485446,d3750e5c,"Merge ""Fix tab overview animations on orientation change""","Merge ""Fix tab overview animations on orientation change""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444221859,1444221859,"5ebf65da0e0feb4c551d0cfd9733655f48df2565,a1d8f3d64ad54800ef6c1f2ea8af62bba9c3f37a"
1ed8483664800087b21ff14e8079e3f02307f759,1ed84836,Enable hardware accelerated rendering for WebView,"Enable hardware accelerated rendering for WebView

Improve animation performance of the WebView by enabling hardware
acceleration[0]. This is not enabled for the app as a whole, as it is an
optimization that may cause rendering issues[1].

[0] https://developer.android.com/reference/android/view/View.html#LAYER_TYPE_HARDWARE
[1] http://developer.android.com/guide/topics/graphics/hardware-accel.html

Bug: T114373
Change-Id: I95f01f2b61ee5a247e8ca27c16b91d9b4e184d8a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444160611,1444160611,e936a1c75117a0b53d72d6ef0659b1d00de088c2
e936a1c75117a0b53d72d6ef0659b1d00de088c2,e936a1c7,Fix Exception when sharing a fact,"Fix Exception when sharing a fact

This patch is a partial revert of 3235488. ImageView may recycle its
Drawable. A reference cannot be held so a deep copy is needed.

Bug: T114658
Change-Id: I0a8802e2c6d9b81a85a4f7bdd7506067c4ab88e2
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444156175,1444156175,c4ae17b07e788bc7aeca9ff3e93c96b4075d30b7
8b6fca20bb4f49c702afb11e1496c9a6d88017ef,8b6fca20,Hygiene: clean up color code hex syntax,"Hygiene: clean up color code hex syntax

* Remove redundant explicit full alpha values.
* Unify the casing to lowercase:

  sed -ri 's%(#[0-9A-F]+)%\L\1%' app/src/main/res/values/colors.xml

* Replace colors with short form where possible.

Change-Id: I6f1a26e640bb4a598b9f12e973de6be0cc875d54
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444153640,1444153807,c4ae17b07e788bc7aeca9ff3e93c96b4075d30b7
5ebf65da0e0feb4c551d0cfd9733655f48df2565,5ebf65da,Disable link preview invisible spacer highlight,"Disable link preview invisible spacer highlight

Link previews use a ListView and some invisible spacer views which
shouldn't be selectable. Prior to this patch, the selector Drawable was
set to @null which seems like it should work. However, on the AOSP API
15 Nexus One emulator, they don't. Opening link previews and pressing
carriage return makes the whole screen orange. This patch just replaces
@null with a completely transparent ColorDrawable.

Change-Id: Ib56926ae0e48f44b2f4f4c4f69503be70c09d870
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444152131,1444152131,c4ae17b07e788bc7aeca9ff3e93c96b4075d30b7
a1d8f3d64ad54800ef6c1f2ea8af62bba9c3f37a,a1d8f3d6,Fix tab overview animations on orientation change,"Fix tab overview animations on orientation change

* Add TabsProvider.onConfigurationChanged() method like View. Set a
  layout listener to recalculate and invalidate animations on
  orientation change.
* Add utility function, ViewUtil.setAnimationMatrix().
* TabsProvider refactoring (no functional changes intended):
  * Move public interface, TabsProviderListener, to the top of the class
    so clients can find it quickly.
  * Name tabActionMode != null expression as method, isTabMode().
  * Extract methods from AnimationUtils.loadAnimation() calls to
    loadPageContentViewAnimation() and loadTabListViewAnimation().
  * Extract method, setTabListViewLayoutParams(), from layoutTabList().

Bug: T112975
Change-Id: I0298effec4bfb3ced4ce0a8466c56a2206cd5f09
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444150729,1444151254,c4ae17b07e788bc7aeca9ff3e93c96b4075d30b7
c4ae17b07e788bc7aeca9ff3e93c96b4075d30b7,c4ae17b0,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I81a4839b4c9fe6230ec68cbcf2d309f7ef7390c4
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444086581,1444086581,c6fbbddfed56874608b967f13c16ad931f498a35
c6fbbddfed56874608b967f13c16ad931f498a35,c6fbbddf,"Rename nav menu ""More"" item to ""Settings""","Rename nav menu ""More"" item to ""Settings""

Bug: T108532
Change-Id: I9f1cc1cd47518a835c4a121ed35e306ed3df0ff1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1444071458,1444071458,d8cee7f1217e5c9552b5cf7d3c0c321745249c96
d8cee7f1217e5c9552b5cf7d3c0c321745249c96,d8cee7f1,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I1f986d8e45a7104905dea91dc47fe75bfe25b931
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444064556,1444064556,0e33179cec04923de3c43677bb52458b02623c43
0e33179cec04923de3c43677bb52458b02623c43,0e33179c,"Merge ""Hygiene: remove unused resources""","Merge ""Hygiene: remove unused resources""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444062355,1444062355,"75180c2a890ad3a13cee789149582e10596e8c84,517661f831d37d00ec461ba7d7ec2a61f4765c59"
75180c2a890ad3a13cee789149582e10596e8c84,75180c2a,"Merge ""Update link preview dimensions on rotation""","Merge ""Update link preview dimensions on rotation""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444060597,1444060597,"52914ec7d4c7a3cd2662b5b4dc985449c2773d19,d58a4d167e54253896c7f5cd3546f3ddd9ef5635"
517661f831d37d00ec461ba7d7ec2a61f4765c59,517661f8,Hygiene: remove unused resources,"Hygiene: remove unused resources

Remove unused resources and, where applicable, their originals, as
identified by Android Lint.

Change-Id: Idb393ebd5e01d3e1091fa6722134fb462144c875
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443631690,1444059337,52914ec7d4c7a3cd2662b5b4dc985449c2773d19
52914ec7d4c7a3cd2662b5b4dc985449c2773d19,52914ec7,"Merge ""Hygiene: remove code for unsupported old devices""","Merge ""Hygiene: remove code for unsupported old devices""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1444057603,1444057603,"d04c9690cc3e12d01b7154a239ea3510f46fdef0,a0f679ce03a2a445f86358b7af005c6e33057b8c"
d04c9690cc3e12d01b7154a239ea3510f46fdef0,d04c9690,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Iecdb130611fc1e1104431988a81cdd0f1d95775f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1444055812,1444055812,97cf31d94ef143cf8bdefd80d20b727a82dd87d0
a0f679ce03a2a445f86358b7af005c6e33057b8c,a0f679ce,Hygiene: remove code for unsupported old devices,"Hygiene: remove code for unsupported old devices

minSdkVersion was recently advanced to 15 which left a lot of dead code
for legacy devices. This patch removes all code, libraries, and
resources targeting API 14- that are no longer used.
Id6b73497eb6b15466cb3acc62567f48c09a358b3 upgrades library dependencies.

Bug: T112310
Change-Id: Id494b7fa3a11ae14a62503b5645dc7e745ea0cf0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443639896,1443810455,97cf31d94ef143cf8bdefd80d20b727a82dd87d0
97cf31d94ef143cf8bdefd80d20b727a82dd87d0,97cf31d9,"Merge ""Hygiene: make a couple margins RTL aware""","Merge ""Hygiene: make a couple margins RTL aware""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443805621,1443805621,"3e91f1d3c8aca9354afca5bb7b54413209d6eb9f,5d114724341c820a4510b9713843ae67e7098c52"
3e91f1d3c8aca9354afca5bb7b54413209d6eb9f,3e91f1d3,Create unique Drawables for mutants,"Create unique Drawables for mutants

Drawables may be shared unless mutate() is called. When changing
Drawable state, it is safer to create a unique instance by calling
mutate().

This change fixes a bug seen on the AOSP API 23 Nexus 5 and API 15 Nexus
One emulators. I was able to capture repro steps for 23 but not 15:

1 Go the United States article.
2 Set the dark theme.
3 Open a link preview.

Note that the link preview is translucent like the status bar.

SearchBarHideHandler.java
* Call mutate() on stateful Drawables.
* Add missing nullness annotations and final keywords.
* Hold Drawable references instead of Views.
* Remove explicit default values for member variables.
* Add a couple helper methods for getting Resources and colors.
* Replace member variable state, toolbarColor, with stateless method.

GradientUtil.java
* Extract function, setCubicGradient(), from getCubicGradient().

colors.xml
* Update comments.

Change-Id: I6786803bc34f50a88e5a6c267fbd24de238de86f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443717013,1443717013,5ac56365768d03987ee2c91e94eb41916c99f3f2
5d114724341c820a4510b9713843ae67e7098c52,5d114724,Hygiene: make a couple margins RTL aware,"Hygiene: make a couple margins RTL aware

Add missing layout_marginEnd to layout_marginRight attributes as
identified by Android Lint.

Change-Id: I4f8d18b68c5a120835edc7f2bcb880a3c398b80e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443654273,1443654273,5ac56365768d03987ee2c91e94eb41916c99f3f2
5ac56365768d03987ee2c91e94eb41916c99f3f2,5ac56365,"Merge ""Convert icons has option to convert only specified icons""","Merge ""Convert icons has option to convert only specified icons""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443626006,1443626006,"2ddfb5e41b0e234207d01a8cbaf7b973c76cc69d,db4fbebebb7e54ad7bbb77fa80466828051e1c9d"
d58a4d167e54253896c7f5cd3546f3ddd9ef5635,d58a4d16,Update link preview dimensions on rotation,"Update link preview dimensions on rotation

We now handle our own configuration changes which requires manual layout
adjustments in certain places. This patch updates the link preview
dialog on device rotation. Additional minor improvements to link preview
layout animations and a minor refactoring of SwipeableBottomDialog.

Bug: T109879
Change-Id: I24ae219884bfa1bab3fd5a990c6a706fe1c75b9c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443567662,1443625033,a013bf0355e306c6c48a7515743dbdc4e316b338
2ddfb5e41b0e234207d01a8cbaf7b973c76cc69d,2ddfb5e4,"Merge ""Fix possible crash when returning to Nearby fragment.""","Merge ""Fix possible crash when returning to Nearby fragment.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443624368,1443624368,"f8d206217d1cbbaee1df4501e23cc20835dc7395,01fd5f17c81b1e641af171c37ba24ca902d56a07"
01fd5f17c81b1e641af171c37ba24ca902d56a07,01fd5f17,Fix possible crash when returning to Nearby fragment.,"Fix possible crash when returning to Nearby fragment.

The icon bitmap that represents the nearby markers wasn't being created
soon enough. (There are cases when showNearbyPages() gets called before
the icons are created, thus causing a NPE)

Bug: T114244
Change-Id: I5a09eeae05137d48f9ae2e71e1a78273b399a561
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1443622270,1443622270,4a78c31d46c1a99211e071119c1eecbf1a2c0ea4
f8d206217d1cbbaee1df4501e23cc20835dc7395,f8d20621,"Add ""open in new tab"" to previews","Add ""open in new tab"" to previews

Bug: T111862
Change-Id: I4651f145089a55e16e3d86a8d3cb23aba8c848c6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1443585046,1443585046,4a78c31d46c1a99211e071119c1eecbf1a2c0ea4
db4fbebebb7e54ad7bbb77fa80466828051e1c9d,db4fbebe,Convert icons has option to convert only specified icons,"Convert icons has option to convert only specified icons

When svg file names are provided as command line arguments
then it will only convert the give files. Otherwise it'll convert all files.

Note that you should specify only the file name, not the whole path.

Bug: T107686
Change-Id: I98ae762004ad2d5de9f07de1ef170d1df206e436
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1443478586,1443569046,8ae8f4cbb94f0aae0c0ffd6c0ecf2f8dd57b131b
4a78c31d46c1a99211e071119c1eecbf1a2c0ea4,4a78c31d,Prevent TextExtracts from possibly returning wikitext (workaround).,"Prevent TextExtracts from possibly returning wikitext (workaround).

The TextExtracts extension returns content from the lead section of the
requested article. It allows the caller to specify a certain number of
sentences, or a certain number of characters, to retrieve from the lead
section.  But what if the caller requests more data than is present in the
lead section?

Well, in the case of ""sentences"", the extension correctly returns the
maximum number of available sentences in the lead section, and no more.
However, in the case of ""characters"", it actually goes beyond the lead
section, and appends content from subsequent sections, which might include
unparsed wikitext (e.g. section headings, edit link, etc).

Previously, we were requesting 512 characters, so that we can parse them
ourselves into two intelligible sentences based on the user's Locale.
This patch changes it to use ""sentences"": We ask for 10 sentences, and
then re-parse the text using our sentence parsing logic to end up with 2
sentences.

Why do we trust our sentence parsing logic more than TextExtracts? Because
it's better-tailored to the user's Locale on the client side. For example,
in the case of English, the TextExtracts extension incorrectly treats
abbreviations like ""i.e."", ""B.C."", ""Jr."", etc. as separate sentences,
whereas our parser will leave those alone.

Bug: T101153
Change-Id: Id227e82e058debf3efb1fb9aea8f8187b52b2645
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1443536432,1443560678,95a57303d7baa2e5ded9cb61baff713c7da15102
95a57303d7baa2e5ded9cb61baff713c7da15102,95a57303,"Merge ""Enable a few more syntax highlighting rules when editing.""","Merge ""Enable a few more syntax highlighting rules when editing.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443559931,1443559931,"a013bf0355e306c6c48a7515743dbdc4e316b338,b52df10b77e20b073a6a0a59e4b728d0722d7b32"
a013bf0355e306c6c48a7515743dbdc4e316b338,a013bf03,"Merge ""Bump make-release version glob""","Merge ""Bump make-release version glob""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443540165,1443540165,"d420680bc7220bc82ce68af73d17da944e7fb5de,f89343388f18fec686310f5675d05dda34d5beb0"
f89343388f18fec686310f5675d05dda34d5beb0,f8934338,Bump make-release version glob,"Bump make-release version glob

Change-Id: I9617634ababc48ec3a68560ece0f12d77b8e8e50
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443538764,1443538764,8ae8f4cbb94f0aae0c0ffd6c0ecf2f8dd57b131b
b52df10b77e20b073a6a0a59e4b728d0722d7b32,b52df10b,Enable a few more syntax highlighting rules when editing.,"Enable a few more syntax highlighting rules when editing.

Syntax highlighting when editing wikitext in the app has been available
for over a year, but has so far been disabled, in the hopes of coming up
with an entirely transformative editing experience in the app. Since we
haven't created such an experience just yet, presenting the user with
modestly highlighted wikitext is better than a solid wall of unhighlighted
wikitext.

Change-Id: I03065408d8b01d82ff262a65c0b957637fbeaafc
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1443537955,1443537955,8ae8f4cbb94f0aae0c0ffd6c0ecf2f8dd57b131b
d420680bc7220bc82ce68af73d17da944e7fb5de,d420680b,No longer strip parenthetical content from first sentence.,"No longer strip parenthetical content from first sentence.

This was an experiment to try to improve the readability of the first
sentence of the article, which often contains information in parentheses.
But, since the (relatively naive) algorithm for removing parentheses also
affects links that have parentheses in them, this was doing more harm than
good by breaking these links.

Note: we are still stripping parenthetical content from link previews, but
that's because we don't enable links within the preview. If we end up
enabling links in the preview, then we'll need to revisit this issue.

Bug: T96871
Change-Id: Ic01e82cdf088f6acb42b80f2c355d300907e3950
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1443535743,1443535743,8ae8f4cbb94f0aae0c0ffd6c0ecf2f8dd57b131b
8ae8f4cbb94f0aae0c0ffd6c0ecf2f8dd57b131b,8ae8f4cb,Fix lead title offset regression,"Fix lead title offset regression

The lead title and subtitle now share a single TextView and should be
measured together.

Change-Id: Id9927ee0cd14c119c7b015acf19c6d8ad81b3790
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443477885,1443477885,14452b9859a89019c0e34c886ca02f34b31ebc82
14452b9859a89019c0e34c886ca02f34b31ebc82,14452b98,"Merge ""Simplify checking of whether saved page exists.""","Merge ""Simplify checking of whether saved page exists.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443468082,1443468082,"638e0f04748cb296f59bc967db557c84797fac04,a66a8f3f342b1247ed697c45ec7f9108048f666e"
638e0f04748cb296f59bc967db557c84797fac04,638e0f04,"Merge ""Fix possible crash when showing link preview.""","Merge ""Fix possible crash when showing link preview.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443464477,1443464477,"52337640633b6203a595a6e8162f66991702c526,8358b316349a65d5ab1371019747f785a58d71ab"
52337640633b6203a595a6e8162f66991702c526,52337640,"Merge ""Make link preview title blue.""","Merge ""Make link preview title blue.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443462551,1443462551,"d2c2059e6320e7757469655d27adbb62f08714c6,3f3a39c529ec481f8867dc72dbdabf33bdf5678e"
a66a8f3f342b1247ed697c45ec7f9108048f666e,a66a8f3f,Simplify checking of whether saved page exists.,"Simplify checking of whether saved page exists.

Of the two bugs listed below, this *may* fix the first, and *will* fix the
second.

Bug: T113601
Bug: T113766
Change-Id: I8107fdb3ae66dfc68f73651e6179c19a75067a79
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1443151049,1443459141,d2c2059e6320e7757469655d27adbb62f08714c6
8358b316349a65d5ab1371019747f785a58d71ab,8358b316,Fix possible crash when showing link preview.,"Fix possible crash when showing link preview.

...in which I use the isResumed() check instead of isAdded(), which seems
to be more appropriate for checking whether the fragment is truly ""active""
(i.e. whether onSaveInstanceState has been called yet).

Bug: T113966
Change-Id: I9e9dedc9b93d740b77c37372701c2bfa317c31a9
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1443457928,1443457928,d2c2059e6320e7757469655d27adbb62f08714c6
3f3a39c529ec481f8867dc72dbdabf33bdf5678e,3f3a39c5,Make link preview title blue.,"Make link preview title blue.

Bug: T112997
Change-Id: I0cf531bbe7166ebdb668c01e6ba46ded4f7c8e9d
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1443456847,1443456847,2ee91f78dcddbab736a063ef6cc7afa3298bdab4
d2c2059e6320e7757469655d27adbb62f08714c6,d2c2059e,Hygiene: mark icon as RTL identical,"Hygiene: mark icon as RTL identical

Rename icon to "".noflip"" indicating that it doesn't not requiring
mirroring in RTL languages.

Change-Id: I803102ba6e9e4dc9e093c539d21427b20ee1fe88
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443394720,1443454491,e8635245012c88aa7cf685741b17a9883b99b589
e8635245012c88aa7cf685741b17a9883b99b589,e8635245,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ife6d5ae34f067227ced1e7edbab58177948dcd67
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443453102,1443453102,2ee91f78dcddbab736a063ef6cc7afa3298bdab4
2ee91f78dcddbab736a063ef6cc7afa3298bdab4,2ee91f78,Remove ListView dividers and adjust margins,"Remove ListView dividers and adjust margins

* Remove ListView dividers in search results, saved pages, nearby
  places, history records, and read more results.
* Numerous tweaks to padding and margins per card and Material
  requirements[0], notably in the previously mentioned ListViews. Minor
  additional tweaks to toolbar search hint and link preview.
* Calculate fully expanded ""read more"" ListView height by inflating and
  measuring one item instead of expecting no padding and no margin. This
  code should probably ultimately be replaced but this change will make
  it less fragile.
* Replace needless LinearLayout in fragment_page with FrameLayout.

[0] http://www.google.com/design/spec/layout/metrics-and-keylines.html#metrics-and-keylines-keylines-and-spacing

Bug: T110685
Bug: T111474
Change-Id: I7551662d1b6da99422e242b8b0ac59786d5e4125
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1441773108,1443209415,ccebd4d88fef046a3b564b09513583db6c340da6
ccebd4d88fef046a3b564b09513583db6c340da6,ccebd4d8,Fix image widening on xxhdpi+ devices,"Fix image widening on xxhdpi+ devices

Applies the CSS changes in https://gerrit.wikimedia.org/r/#/c/240374/
to prevent xxhdpi+ phones (such as the Samsung Galaxy S4) from getting
incorrectly evaluated as tablets in our CSS logic and having their
images widened only to 60% rather than 100%, as intended, in portrait
mode.

Bug: T113434
Change-Id: I672e45ffad82d797d30d5a0505bc9d0f249f324f
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1443024558,1443202313,cc4f3bd08ead94f4e0ec97d67690ef6cbe6c0189
cc4f3bd08ead94f4e0ec97d67690ef6cbe6c0189,cc4f3bd0,"Merge ""Always capitalize Wikidata descriptions.""","Merge ""Always capitalize Wikidata descriptions.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443199716,1443199716,"6094186b86cf7095aaa5059da97b010f822993c5,803e65454ceafd2974624375d759b4a84c1c1a1f"
6094186b86cf7095aaa5059da97b010f822993c5,6094186b,Hygiene: remove AsyncTask.java from our code.,"Hygiene: remove AsyncTask.java from our code.

It looks like we were using a straight-up copy of AsyncTask.java from
AOSP, for the sole purpose of providing the executeOnExecutor() function
for API 10...
I don't think so!

As a side effect, this fixes the remaining checkstyle errors under Windows.

Bug: T110105
Change-Id: I2d586368f11bd7524d4de23ea396581de13f9196
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1440591958,1443194127,54c075b949b04da1f6a820ba6aaaa2cf837047a6
54c075b949b04da1f6a820ba6aaaa2cf837047a6,54c075b9,Maps in Nearby: TNG,"Maps in Nearby: TNG

Highlights:
- Using MapBox SDK to retrieve tiles from our server. This sdk adds about
  234 KiB to our APK size.
- Using built-in functionality to display user's location as a marker,
  with a translucent circle representing accuracy.
- Panning and zooming the map refreshes the collection of markers.
- Display of markers is independent of whether we know the user's
  location. This allows the user to randomly ""explore"" arbitrary areas of
  the map.
- Feature-flagged for non-production only. Since this is nearly a rewrite
  of NearbyFragment, I simply created ""NearbyFragmentOld.java"" which has
  the old code, and we'll remove it when the time is right.

Bug: T100315
Change-Id: I423745164ce8694d14099ea9aa0b2a05a141c8c3
",,,,aude,aude.wiki@gmail.com,dbrant,dbrant@wikimedia.org,1432389087,1443193026,723ea06e4f5f61d5c16480f0fde629436e9f6ef9
723ea06e4f5f61d5c16480f0fde629436e9f6ef9,723ea06e,"Merge ""Bump minSdkVersion, versionCode, and versionName.""","Merge ""Bump minSdkVersion, versionCode, and versionName.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443192682,1443192682,"e61caeaa4e0c1990c32568ffd0db13c0775b7e1a,acd59944c0a771eec89a9e31036fa1e89f1b797b"
e61caeaa4e0c1990c32568ffd0db13c0775b7e1a,e61caeaa,"Merge ""Fix vertical truncation of title and subtitle""","Merge ""Fix vertical truncation of title and subtitle""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443190584,1443190584,"118b1161c6852ffb009fd92898923b25caebafb4,81f3f5b9b1f65ae91ca58383ebbaac5eaa4f9e44"
118b1161c6852ffb009fd92898923b25caebafb4,118b1161,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,Translation updater bot,l10n-bot@translatewiki.net,Gerrit Code Review,gerrit@wikimedia.org,1443190448,1443190448,"d3ae8523ad9004ba5038a91d9c94ee532dc0eea8,c3813e7d63f692e1818f8bf85e1fd70e090fe85f"
c3813e7d63f692e1818f8bf85e1fd70e090fe85f,c3813e7d,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I248cf2e13e3f7e7dd8e2c9c2467425be2ae51836
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1443190451,1443190451,69de8d725393adae6ecf8e3f9ef620daf51b4b66
d3ae8523ad9004ba5038a91d9c94ee532dc0eea8,d3ae8523,"Merge ""Add CI script for testing emulator readiness""","Merge ""Add CI script for testing emulator readiness""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443189935,1443189935,"69de8d725393adae6ecf8e3f9ef620daf51b4b66,4cadfa0b3b4f20d38e1c7557176b4da114dc7a3e"
69de8d725393adae6ecf8e3f9ef620daf51b4b66,69de8d72,"Merge ""Hygiene: remove unused function""","Merge ""Hygiene: remove unused function""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443189469,1443189469,"b9fd642bee87867bf371886b664ee5dd168132c4,e927adba85b413e4f6c8c5cd1449ffd8e496e858"
b9fd642bee87867bf371886b664ee5dd168132c4,b9fd642b,"Merge ""Hygiene: remove UserContribsActivity and friends""","Merge ""Hygiene: remove UserContribsActivity and friends""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443189101,1443189101,"2d820c122bff49bc28406c5b7612efbf4eb83b4a,f81f99e85e3999103699a762f43b119652c2300a"
e927adba85b413e4f6c8c5cd1449ffd8e496e858,e927adba,Hygiene: remove unused function,"Hygiene: remove unused function

Change-Id: Iaee29780b21dacf9161b25b55a033135029f3b16
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443138377,1443138377,edf5374d43f7eebdc66215522d9c536c2bb798a9
2d820c122bff49bc28406c5b7612efbf4eb83b4a,2d820c12,Initialize status bar color to match toolbar,"Initialize status bar color to match toolbar

On app launch the status bar was transparent but the toolbar was not.
This patch initializes the status bar color to be consistent with the
toolbar.

Change-Id: I9d1e3221d0fae12fe6373d9f5ca656a2b138a185
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443138226,1443138331,edf5374d43f7eebdc66215522d9c536c2bb798a9
f81f99e85e3999103699a762f43b119652c2300a,f81f99e8,Hygiene: remove UserContribsActivity and friends,"Hygiene: remove UserContribsActivity and friends

Remove dead code and resources.

Change-Id: I3fc315fa1de9cc61725047199ffe889dce670c1a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443137247,1443137402,edf5374d43f7eebdc66215522d9c536c2bb798a9
81f3f5b9b1f65ae91ca58383ebbaac5eaa4f9e44,81f3f5b9,Fix vertical truncation of title and subtitle,"Fix vertical truncation of title and subtitle

* Move subtitle from distinct TextView to title TextView with spans.
* Add AppTextView, a TextView subclass that measures it self properly
  even when the line spacing is changed. Since other TextView amendments
  may need to be made, it has a generic name.
* Inline LeadImagesHandler.findViewsById().

Bug: T111208
Change-Id: Ib253c84d706e492eb71ea71e589a2063fcbdaa65
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442587286,1443128877,edf5374d43f7eebdc66215522d9c536c2bb798a9
4cadfa0b3b4f20d38e1c7557176b4da114dc7a3e,4cadfa0b,Add CI script for testing emulator readiness,"Add CI script for testing emulator readiness

The Android instrumentation tests are failing in a strange way after
upgrading the Android Support libraries[0]:

com.android.builder.testing.api.TestException: com.android.builder.testing.api.DeviceException: com.android.ddmlib.ShellCommandUnresponsiveException

This script performs some device readiness checks and waits as needed
before returning which allows the tests to run successfully again. This
script will be used by CI[1] once merged.

[0] https://gerrit.wikimedia.org/r/#/c/235859/
[1] https://gerrit.wikimedia.org/r/#/c/239902/

Change-Id: Ib8a04d12ec48fe03c508fcacd355daa20a92b34d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442860254,1443128122,48508b110f1a1e917afbe3a71dc93424aea75dd2
803e65454ceafd2974624375d759b4a84c1c1a1f,803e6545,Always capitalize Wikidata descriptions.,"Always capitalize Wikidata descriptions.

Change-Id: I1221c2a0ebb2c2714c71dfebc649478a6c41aef6
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1443115186,1443115760,edf5374d43f7eebdc66215522d9c536c2bb798a9
edf5374d43f7eebdc66215522d9c536c2bb798a9,edf5374d,"Merge ""Fix retrieval of Wikidata description from Retrofit responses.""","Merge ""Fix retrieval of Wikidata description from Retrofit responses.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1443115083,1443115083,"a9c6e5acb84027b816467e34701806191bdf4644,29090f26bf2a0d7b4c8eaa02cc31d78c00e17ab8"
a9c6e5acb84027b816467e34701806191bdf4644,a9c6e5ac,Make the status bar translucent,"Make the status bar translucent

* Make the status translucent on API 19+. The navigation drawer is drawn
  between the status bar and the toolbar per mock. For a preview of the
  proposed toolbar coloring, change @color/actionbar_background to
  @color/preview_header_background.

  Status bar translucency was used over color to support API 19+ instead
  of 21+.

  Instead of setting android:fitsSystemWindows, status bar height
  offsets were added to the preexisting action bar offsets. This allows
  coloring of the dummy view, ""StatusBarBlankView"", on API 19 as well as
  sandwiching the navigation drawer between the status bar and dummy
  view per mock. There is some noticeable DRYness refactoring needed
  between the saved pages, history, and nearby Fragments but this was
  a preexisting condition.

  This patch moves the toolbar gradient initialization from PageActivity
  to SearchBarHideHandler which is a more appropriate place given the
  opacity changes made. The gradient was also expanded to include the
  status bar when translucent as it otherwise clashed with the status
  bar creating a weird, almost magnifying glass effect. It may benefit
  further from additional adjustments.

* Add StatusBarBlankView which encapsulates weird logic to set a minimum
  height matching the status bar instead of dumping it in PageActivity.
  It's just a contained, dumb View you don't have to worry about it
  much.

* Send window decor (status bar + toolbar) height across JavaScript
  bridge to apply the appropriate offset. The WebView is intentionally
  full screen, but has no knowledge of the status bar and toolbar. This
  value was previously hardcoded and not tied to the actual dimensions of
  the toolbar.

* Add ArgbEvaluatorCompat which fixes an alpha tweening bug not yet
  merged in NineOldAndroids.

Diffing notes:
* The Gerrit diffs of activity_page and fragment_page are terrible. I
  recommend diffing these files locally.
* No changes intended in SearchBarHideHandler.calculateScrollOpacity().

Bug: T110682

Change-Id: I26cc244311f44c59902afec1be0e62c9a60e4f48
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1443027687,1443104070,3e283cfee8baf0122d4b0e91797e45666890a39d
29090f26bf2a0d7b4c8eaa02cc31d78c00e17ab8,29090f26,Fix retrieval of Wikidata description from Retrofit responses.,"Fix retrieval of Wikidata description from Retrofit responses.

This also reverts https://gerrit.wikimedia.org/r/239905 which was causing
a potential crash.

Bug: T113015
Change-Id: I53d7115f6ecd9d239185ce9ee41e00e7d1ad3912
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1442933656,1442966236,3e283cfee8baf0122d4b0e91797e45666890a39d
acd59944c0a771eec89a9e31036fa1e89f1b797b,acd59944,"Bump minSdkVersion, versionCode, and versionName.","Bump minSdkVersion, versionCode, and versionName.

Any patches merged beyond this point shall no longer work in API <15.
This opens the floodgates to the arduous (but extremely pleasant) task
of exfoliating the app of all API-10-specific code.

The minor version number has been bumped by 1, to celebrate the
significance of this occasion.

The versionCode has been bumped by 20, to provide a sufficient gap for
future backporting of features to the Gingerbread version of the app, the
tag for which is located at b97d0cd00f4c4fb932e9fc087334dfe779c59be3.

Change-Id: I06127568bf939585e6f758f5616f418a96d66ff4
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1442961366,1442961366,3e283cfee8baf0122d4b0e91797e45666890a39d
3e283cfee8baf0122d4b0e91797e45666890a39d,3e283cfe,"Merge ""Add navigation drawer shadow""","Merge ""Add navigation drawer shadow""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442931349,1442931349,"3a8e50bcc84e864251ef008fade6de8b38e57e7d,cccedeb9e92f077803355bb38bd3e44a2ab25cdd"
3a8e50bcc84e864251ef008fade6de8b38e57e7d,3a8e50bc,"Merge ""Show page description when loading page from link preview""","Merge ""Show page description when loading page from link preview""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442930938,1442930938,"9130145b9b87a839d9e9c535d71c59611c480e66,dbabedaf46f354d4d27f745a6e133c8c13f065e4"
cccedeb9e92f077803355bb38bd3e44a2ab25cdd,cccedeb9,Add navigation drawer shadow,"Add navigation drawer shadow

Add a soft subtle shadow to the navigation drawer for consistent
appearance on API 15 and 23. No changes to scrim.

Bug: T107338
Change-Id: Ib58c20fcca821fe1afe450cb2c8d0ffd60af4440
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442617700,1442868428,9130145b9b87a839d9e9c535d71c59611c480e66
dbabedaf46f354d4d27f745a6e133c8c13f065e4,dbabedaf,Show page description when loading page from link preview,"Show page description when loading page from link preview

Fixes a bug in which page headers did not include Wikidata descriptions
when navigated to from a link preview.

Bug: T113015
Change-Id: I4cad9d5e639abd3d90fda00718a0ae1739f9cb59
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1442861916,1442864049,540437dedfa72824e40e846d920a3bd5d89578a8
9130145b9b87a839d9e9c535d71c59611c480e66,9130145b,Hygiene: Remove unused constructor,"Hygiene: Remove unused constructor

I mistakenly included this in the merged patch set for
https://gerrit.wikimedia.org/r/#/c/238823/ after some attempted
and abandoned refactoring.

Change-Id: Ice0366e20ca1a525f4222e8dbfaa3d7d7fa450a0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1442857393,1442857708,540437dedfa72824e40e846d920a3bd5d89578a8
540437dedfa72824e40e846d920a3bd5d89578a8,540437de,"Merge ""NavigationView: reloaded.""","Merge ""NavigationView: reloaded.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442857009,1442857009,"48508b110f1a1e917afbe3a71dc93424aea75dd2,0cb36a848c16420167ca8c8e99c3fb18bf89b0f2"
48508b110f1a1e917afbe3a71dc93424aea75dd2,48508b11,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ie0b30d552d4ffb538637a8eaabe9e686b624a4df
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442847107,1442847107,aed74353771f53d5383f770082331cefd70a6c09
aed74353771f53d5383f770082331cefd70a6c09,aed74353,"Merge ""Add support for loading link preview content via RESTBase""","Merge ""Add support for loading link preview content via RESTBase""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442613283,1442613283,"3235488d1824ba947d177d2f7c2e4fab7dc2e683,83d7bec309402db0ceadf088b10c6ef6b9f1e458"
0cb36a848c16420167ca8c8e99c3fb18bf89b0f2,0cb36a84,NavigationView: reloaded.,"NavigationView: reloaded.

- Updated colors and icons for NavigationView.
- Most of the new icons come directly from the Material Design set.
  Therefore I didn't add the SVG for those icons, since they come
  pre-generated from Google. I also kept the names of the icons, so that
  we can easily reference them in the Material set.
- Moved the Login action into the header view.
- Moved the Logout action into a secondary menu group inside the
NavigationView. Moving it out of the More menu will make the More menu
more easily renameable to Settings.

Bug: T110684
Change-Id: I6326e50e978e42fd9a41024ad361afbbeb2f5b63
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1442238108,1442610878,c0e0d197dcc4bccbfafe4c82c9b0129b4bd64c05
83d7bec309402db0ceadf088b10c6ef6b9f1e458,83d7bec3,Add support for loading link preview content via RESTBase,"Add support for loading link preview content via RESTBase

Obtains link preview content from a RESTBase lead section request, if the
article is on English Wikipedia and RESTBase content loading is enabled.

A forthcoming patch will add a feature flag to push this to a small
portion of our beta users.

Also eliminates some unused variables and adds a null check to both
versions of *PageLead.getDescription().

Bug: T111126
Change-Id: I7bb5335639f720fe2fb62422ff2a3cafa93fadfc
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1442430145,1442604426,5603ba1b6143f3b039dbc3ae59e731460e114230
3235488d1824ba947d177d2f7c2e4fab7dc2e683,3235488d,Reduce Share A Fact memory and fix lead font face,"Reduce Share A Fact memory and fix lead font face

* Replace LeadImagesHandler.getBitmapFromView() with
  ImageViewWithFace.getImageBitmap(). This method returns a previously
  set Bitmap or null to reduce the number of images in memory. It is
  used indirectly by Share A Fact.
* Replace lead title and subtitle android:fontFamily attribute with
  Java. This gives more consistent appearance and leading on API 15
  which doesn't support the attribute.
* Move large Runnable.run() implementation to private method,
  LeadImagesHandler.detectFace(). This translation likely requires diff
  stitching. No other changes intended other than those mentioned in the
  bullets.
* Move anonymous inline SaneAsyncTask from
  ImageViewWithFace.onBitmapLoaded() to private nested class,
  FaceDetectionTask.
* Change OnImageLoadListener.onImageLoaded() face detection failure
  value from negative to null.
* Rename anonymous ImageViewWithFace SaneAsyncTask subclass local
  variable from tempbmp to testBmp; extract method for generating test
  bitmap, new565ScaledBitmap(); move face detection eligibility check
  before spawning the task.
* Minor reordering of ImageViewWithFace members.
* Replace nullable OnImageLoadListener with null pattern.
* Replace ImageViewWithFace Log.* calls with L.*.
* Add helper method for setting lead image layout parameters, setImageLayoutParams().
* Add IDE hint annotations.
* Move ""faceBoost"", the y-axis offset to the nose, to face_detection_nose_y_offset.

Change-Id: Ibc793ab778691b9a2d182527e14a6b9fb2703ef3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442533084,1442584368,c0e0d197dcc4bccbfafe4c82c9b0129b4bd64c05
c0e0d197dcc4bccbfafe4c82c9b0129b4bd64c05,c0e0d197,"Merge ""Hygiene: break up methods in LeadImagesHandler""","Merge ""Hygiene: break up methods in LeadImagesHandler""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442513570,1442513570,"42684e904dc03af98c97e80b28bc2d0ed8c778e9,d000e12594b1e652a2aa4b29394f6399ce31520d"
d000e12594b1e652a2aa4b29394f6399ce31520d,d000e125,Hygiene: break up methods in LeadImagesHandler,"Hygiene: break up methods in LeadImagesHandler

Decompose methods and minor refactoring of LeadImagesHandler; no
functional changes intended. This work is necessary to my understanding
of, and confidence in, the code to fix T111208. Additional work may be
required, but further tweaks will ruin the diff. As it was, I found a
manual diff (moving the two listener overrides back into place) useful.

In the interest of small methods and readability, this patch makes the
following changes:
* Rename PageFragment.imagesContainer to leadSectionContainer. This
  variable refers to the whole lead section, not just the image.
* Remove pluralization of page_images_container and rename
  LeadImagesHandler.image1 to image. There is only one lead image.
* Add ViewUtil.findView() Butter Knife[0] inspired utilities to avoid
  casting by hand.
* Add and remove miscellaneous annotations and comments as appropriate.
* Reorder LeadImagesHandler class members to be client centric. I've
  tried to move the more public, and therefore more interesting, code to
  the top. I've also grouped the member variables so you the reader can
  see at a glance what state the class maintains. Finally, I've moved
  the most mundane code, simple helper methods, usually just good names
  for common operations, to the bottom.
* Remove unnecessary explicit initialization of LeadImagesHandler member
  variables equal to the default initialization. Why write what we can
  assume?
* Don't claim to implement OnScrollChangeListener and
  OnImageLoadListener. This class is responsible for setting itself as a
  listener and probably wouldn't work right if the client tried to use
  the API. Move the listener methods to private classes and keep the
  implementation private.
* Add several trivial helper methods that are easy to read and do what
  you think: getActivity(), getResources(), getColor(), getDimension(),
  etc. This implementation of each does add some lines to the file but
  better here than in more complicated methods. The implementation of
  each is no more surprising nor interesting which is good.
* Replace LeadImagesHandler.imageBaseYOffset conditionals with
  Math.min() and max().
* Move LeadImagesHandler findViewById() boilerplate from constructor to
  method, findViewsById().

Regardless of the implementation, small methods are important. When you
write methods that do exactly one thing, you reap many benefits,
including:

* Small methods are easy to unit test. The best you can hope for with a
  100+ line method is usually an integration test.
* Methods that do one thing are less likely to have side-effects. I
  couldn't be happier to know this when having to reuse code, especially
  code I didn't author or wrote long ago.
* Code becomes self documenting for well named methods. It's hard to
  name methods that do more than one thing.
* Small methods encourages decomposition into the smallest subproblems.
  For example, when I'm doing a patch review, it's easier for me to say
  whether or not a method accomplishes what it claims to.
* A method becomes the equivalent of a sentence. For example, an
  initImage() may include padding calculation and setting among other
  things. I don't know and, in the context of this calling method, I
  don't care and sincerely hope I don't have to care.
* Slightly improved stacktrace narrative.

There are many proponents of small methods. A popular and well written
one is Martin Fowler who mentions the topic in his book, Refactoring:
Improving the design of existing code, Chapter 3: bad smells in code:

> Long Method
  The object programs that live best and longest are those with short
  methods. Programmers new to objects often feel that no computation
  ever takes place, that object programs are endless sequences of
  delegation. When you have lived with such a program for a few years,
  however, you learn just how valuable all those little methods are. All
  of the payoffs of indirection—explanation, sharing, and choosing—are
  supported by little methods (see Indirection and Refactoring on page
  61).

  Since the early days of programming people have realized that the
  longer a procedure is, the more difficult it is to understand. Older
  languages carried an overhead in subroutine calls, which deterred
  people from small methods. Modern OO languages have pretty much
  eliminated that overhead for in-process calls. There is still an
  overhead to the reader of the code because you have to switch context
  to see what the subprocedure does. Development environments that allow
  you to see two methods at once help to eliminate this step, but the
  real key to making it easy to understand small methods is good naming.
  If you have a good name for a method you don’t need to look at the
  body.

  The net effect is that you should be much more aggressive about
  decomposing methods. A heuristic we follow is that whenever we feel
  the need to comment something, we write a method instead. Such a
  method contains the code that was commented but is named after the
  intention of the code rather than how it does it. We may do this on a
  group of lines or on as little as a single line of code. We do this
  even if the method call is longer than the code it replaces, provided
  the method name explains the purpose of the code. The key here is not
  method length but the semantic distance between what the method does
  and how it does it.

Whether an implementation is made with lots of workarounds for weird
Android quirks, or is somehow perfect, let's do whatever we can to
always write small methods and readable code. While I welcome
constructive discourse, I feel so impassioned about this that, in the
future, I hope our tools can flag long methods as a programmer error
unless explicitly waived.

[0] http://jakewharton.github.io/butterknife/javadoc/butterknife/ButterKnife.html#findById-android.view.View-int-

Bug: T111208
Change-Id: Id4252c93c25eabc8021149ae4b8de5543847c850
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442449646,1442449984,53caca54972ea7cf1f2562448ddf1951e01e047b
42684e904dc03af98c97e80b28bc2d0ed8c778e9,42684e90,Fix link preview button color on pre-21 devices,"Fix link preview button color on pre-21 devices

ripple_material_light is too light on Lollipop so a darker color is specified.
This patch simply sets that color for API 21 only.

Bug: T109875
Change-Id: I8cb3818cf52f6512714d5bfe7a2971989060caf9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442436446,1442436446,53caca54972ea7cf1f2562448ddf1951e01e047b
53caca54972ea7cf1f2562448ddf1951e01e047b,53caca54,"Merge ""Bump versionCode""","Merge ""Bump versionCode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442425722,1442425722,"1079b83d511445696c47e7c1d1e2a103c1b1fd82,b97d0cd00f4c4fb932e9fc087334dfe779c59be3"
1079b83d511445696c47e7c1d1e2a103c1b1fd82,1079b83d,Use English wiki site to work around test failure,"Use English wiki site to work around test failure

Change-Id: Iacd9827a3409f8c918e77393d244d828563c3ba9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442424361,1442424603,5603ba1b6143f3b039dbc3ae59e731460e114230
b97d0cd00f4c4fb932e9fc087334dfe779c59be3,b97d0cd0,Bump versionCode,"Bump versionCode

Change-Id: I59804a3b3ee6c856cd45d9cdbc5b0bc1ed5ef0d0
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442414762,1442414762,5603ba1b6143f3b039dbc3ae59e731460e114230
5603ba1b6143f3b039dbc3ae59e731460e114230,5603ba1b,"Merge ""End a/b test and feature flag for link previews.""","Merge ""End a/b test and feature flag for link previews.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442412227,1442412227,"a157b5c1fe5f9ace4675ba5d0c762174d4a031a1,dc81521738746c77c4f4fa1af461bf45660c9ef6"
a157b5c1fe5f9ace4675ba5d0c762174d4a031a1,a157b5c1,"Merge ""Fix possible crash due to race condition in page loading.""","Merge ""Fix possible crash due to race condition in page loading.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442411997,1442411997,"c1d17ca929faabffb3f789802c1628b07f2aa60e,afe1ef6a6653216b15d84ade6105d6d24abbfcd4"
dc81521738746c77c4f4fa1af461bf45660c9ef6,dc815217,End a/b test and feature flag for link previews.,"End a/b test and feature flag for link previews.

Change-Id: I2f9bfede0a809c3cbf49d481876a1008e281545a
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1442406356,1442411203,816d8d52063bbf0b60c82749b484b7164f5dd143
c1d17ca929faabffb3f789802c1628b07f2aa60e,c1d17ca9,"Merge ""Allow scrolling when dragging across lead text""","Merge ""Allow scrolling when dragging across lead text""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442407672,1442407672,"01695c1fa1173d309c602f2bd8278ad6bbc8fe78,d79f5f455198bd7013d5e7321d00d7f38309a896"
afe1ef6a6653216b15d84ade6105d6d24abbfcd4,afe1ef6a,Fix possible crash due to race condition in page loading.,"Fix possible crash due to race condition in page loading.

Since we exchange data with the WebView asynchronously, our page loading
logic uses a ""sequence"" number that our callback functions use to
determine if something is out of sync (e.g. when a new page is loaded
while the previous page hasn't yet finished loading), and this all works
correctly.

...except we also have an asynchronous method of laying out our lead image
container, including the page title and description. The callback for this
functionality did NOT take the sequence number into account, which allowed
for a small window of time where a new page could be loaded while the
layout was in progress, which would throw the loading process out of
whack.

This patch intertwines the sequence number into the lead image layout
callback mechanism, and hopefully closes this remaining gap.

Bug: T112519
Change-Id: I5fcbe1316a5fecad90e1c97ee582df4c082dc063
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1442362928,1442363587,816d8d52063bbf0b60c82749b484b7164f5dd143
01695c1fa1173d309c602f2bd8278ad6bbc8fe78,01695c1f,"Merge ""Refine handling of transparent image backgrounds in dark mode""","Merge ""Refine handling of transparent image backgrounds in dark mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442348849,1442348849,"b7c2d930217c9ecf13bc3f70ba07ed14d6d6a8aa,c0ac396178ae15f48c5aea3d33fc84dfc675cae6"
b7c2d930217c9ecf13bc3f70ba07ed14d6d6a8aa,b7c2d930,"Merge ""Make references expand/collapse again""","Merge ""Make references expand/collapse again""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442347834,1442347834,"1a6ec503c45b6e43ef55881616534831f533f7f2,d04cd2d6024c74749a15eee18fb7a8b3af44ef0e"
1a6ec503c45b6e43ef55881616534831f533f7f2,1a6ec503,"Merge ""Share code between instrumentation and unit tests""","Merge ""Share code between instrumentation and unit tests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442344918,1442344918,"215e785377f359201f05f43057731ff0f2b89c06,cdc1d27437c8cc1b7fb6b9082ab829e091830ea3"
215e785377f359201f05f43057731ff0f2b89c06,215e7853,"Merge ""Hygiene: upgrade Gradle to v2.7""","Merge ""Hygiene: upgrade Gradle to v2.7""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442342983,1442342983,"814954b1f6cc863f6537abfcdfb97dc15ec9b86a,46ff83144677265f9c237a4d17527e82d64a6b93"
d04cd2d6024c74749a15eee18fb7a8b3af44ef0e,d04cd2d6,Make references expand/collapse again,"Make references expand/collapse again

An omitted export in collapseTables.js made the function that handles
table collapsing/expanding unavailable to hideRefs.js.  This fixes that.

Also, that function is renamed to describe itself in more accurate, non-
Java-like terms.

There's a further DRY opportunity here in collapseTables/hideRefs but
I'll save that for a follow-up.

Bug: T112208
Change-Id: I7310075defb6bf50c8e81c6ac624efe086665dae
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1442339193,1442339648,814954b1f6cc863f6537abfcdfb97dc15ec9b86a
d79f5f455198bd7013d5e7321d00d7f38309a896,d79f5f45,Allow scrolling when dragging across lead text,"Allow scrolling when dragging across lead text

TLDR: Disable text selection of title and subtitle TextViews so the
WebView can handle the touch events.

The lead title and subtitle TextViews allowed text selections. Text
selection was desirable but had the side effect of stealing the scroll
touch events from the WebView.

As a work around, I tried always returning false in
TextView.onTouchEvent() but while this allowed both text selection and
scrolling, it more often than not allowed both to occur simultaneously
which was a poor experience.

The proper implementation seems to be to put the title container within
the WebView (a ViewGroup, after all), or to create a reusable ""TouchFilter""
ViewGroup and wrap the WebView and title container, and implement
ScrollView-like functionality. I tried this approach from a couple tacts
but it proved nontrivial to implement natural scrolling robustly.

In one approach, I used SimpleOnGestureListener in
ViewGroup.onInterceptTouchEvent() to listen for scroll and fling events.
Since the TextViews don't scroll or fling, I would manually route these
to the appropriate scrollBy() / flingBy() methods on the WebView and
then intercept subsequent ACTION_MOVE events. This sort of worked but
just didn't feel right. The scrolling felt off because it happened once
in the OnGestureListener callback with any remaining scrolling happening
in ViewGroup.onTouchEvent().

In another approach, I recorded the y position on down events in
ViewGroup.onInterceptTouch(). In subsequent move events, I checked the y
against a scaled touch slop to determine if it was jitter or a scroll,
with the latter returning true. This sort of worked but suffered the
same unnatural feeling as the first.

Bug: T97504
Change-Id: I9e545c9a811840382ab11a022375bbcaf60825fd
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442339411,1442339411,816d8d52063bbf0b60c82749b484b7164f5dd143
c0ac396178ae15f48c5aea3d33fc84dfc675cae6,c0ac3961,Refine handling of transparent image backgrounds in dark mode,"Refine handling of transparent image backgrounds in dark mode

The previous patch submitted on this issue (see
https://gerrit.wikimedia.org/r/#/c/235507/) left at least one instance
in which image colors were being improperly stripped; see Manchester
United F.C. > Kit Evolution.

Hence, just checking the image node and all ancestors for a background-color
style element isn't sufficient.  So with this patch, a white background is
added to each img element that:

(1) Is not nested in a table, unless that table is the infobox and the
element has the class name 'image'; or

(2) Does not have the style property 'background-color' or an ancestor with
it.

And with this, you may examine soccer jersey colors in dark mode to your
heart's content.

Bug: T108333
Change-Id: I350a71d51dd5a452f85c28ef7ef45807455119b1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1441838217,1442337853,fe27a31550980fc1ac56ee689d3fc4a81dfc2764
814954b1f6cc863f6537abfcdfb97dc15ec9b86a,814954b1,"Merge ""Don't hide tables on the main page""","Merge ""Don't hide tables on the main page""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442334515,1442334515,"816d8d52063bbf0b60c82749b484b7164f5dd143,5eb86330b6c97cf21eef4e4025eff22bcf5d3024"
5eb86330b6c97cf21eef4e4025eff22bcf5d3024,5eb86330,Don't hide tables on the main page,"Don't hide tables on the main page

As a result of previous refactoring, the hideTables transform was
mistakenly added outside the check to ensure the current page was not
a project main page.  In fact, the transform should only happen off the
main page since main pages often include special, project specific
content and formatting.

This rectifies that.

Change-Id: Ie0ec21dafd3947b55d6b9199981c164a5819e75a
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1442005351,1442332246,cfd1395d6c7a8f6933b9f8a4a0502fd14110d590
46ff83144677265f9c237a4d17527e82d64a6b93,46ff8314,Hygiene: upgrade Gradle to v2.7,"Hygiene: upgrade Gradle to v2.7

Upgrade Gradle to 2.7 and regenerate the wrapper and wrapper jar[0]:

> If you generated your Gradle wrapper with Gradle 2.6, we strongly
  recommend you regenerate your gradle-wrapper.jar with Gradle 2.7. The
  new checksum validation feature added in 2.6 introduced a serious
  performance degradation in the Gradle wrapper. This issue affects the
  startup time for any gradle execution via this wrapper. This issue has
  been fixed in 2.7.

[0] https://docs.gradle.org/current/release-notes

Change-Id: Ic11bd962abd0ee944cce5b70f18887137f4bff17
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442329045,1442329045,816d8d52063bbf0b60c82749b484b7164f5dd143
816d8d52063bbf0b60c82749b484b7164f5dd143,816d8d52,"Merge ""Hygiene: remove old migration logic.""","Merge ""Hygiene: remove old migration logic.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442266863,1442266863,"6e9a4503cfb15fccad1b27afbf9c618f1036fdae,c9b8476de8453cf448105c15007fa3444da80513"
6e9a4503cfb15fccad1b27afbf9c618f1036fdae,6e9a4503,"Merge ""Fix possible crash when dismissing link preview when activity closed.""","Merge ""Fix possible crash when dismissing link preview when activity closed.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442266070,1442266070,"68c440515dbed76ee3ef33cd1d117fe023e1f123,b39da07c96fe6dbea5899cde87db56d63391db48"
c9b8476de8453cf448105c15007fa3444da80513,c9b8476d,Hygiene: remove old migration logic.,"Hygiene: remove old migration logic.

Bug: T109196
Change-Id: I376406c312bda1c8eca96232a25a80e186a6b8b8
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1442262037,1442265902,c6f1959e596e521473f0720e19fc0296d65ac518
68c440515dbed76ee3ef33cd1d117fe023e1f123,68c44051,"Replacing ""internet"" with ""Internet""","Replacing ""internet"" with ""Internet""

Typo fixing.

Bug: T112584
Change-Id: I060e06dbb6f08ee0742e5e2c976b2435748d82fd
",,,,maurelio,strigiwm@gmail.com,maurelio,strigiwm@gmail.com,1442264952,1442265013,c6f1959e596e521473f0720e19fc0296d65ac518
b39da07c96fe6dbea5899cde87db56d63391db48,b39da07c,Fix possible crash when dismissing link preview when activity closed.,"Fix possible crash when dismissing link preview when activity closed.

We call dismiss() as a possible result of an AsyncTask, so if the task
takes a long time, then dismiss() might get called after
onSaveInstanceState() has already been called, which would produce an
exception.  The AsyncTask tries to handle this by checking for isAdded(),
but this seems to keep returning true even after onSaveInstanceState().

This patch overrides the dismiss() function and adds a check for
isResumed(), which actually checks whether this fragment is within the
""live"" state (between onResume and onPause).

It may be worthwhile to see if isResumed() should be used instead of
isAdded() in other places, as well.

Bug: T112518
Change-Id: I27cf59b5ccb017600b4b4e9289d94f8c5862aeee
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1442247603,1442260986,c6f1959e596e521473f0720e19fc0296d65ac518
c6f1959e596e521473f0720e19fc0296d65ac518,c6f1959e,"Merge ""Hide floating action button whilst using find in page""","Merge ""Hide floating action button whilst using find in page""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442256180,1442256180,"694f0718ff46728511f236ffefd87919ac03bb82,b2b547bf5bf625e3794e6cb0812e1b85351d080a"
694f0718ff46728511f236ffefd87919ac03bb82,694f0718,"Merge ""Fix sharing of links in Gingerbread.""","Merge ""Fix sharing of links in Gingerbread.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442253657,1442253657,"bdb1c75a439bdc06c660b419a70442b61d6bd7bc,19e6d23f99f1a47b01130756fc4c388bd944e3ad"
bdb1c75a439bdc06c660b419a70442b61d6bd7bc,bdb1c75a,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1442253361,1442253361,"f7167243c36131b05f4c91910c026e1d018054f1,a7f5129613b5f7d21604f4d09c0784326e30f7f1"
19e6d23f99f1a47b01130756fc4c388bd944e3ad,19e6d23f,Fix sharing of links in Gingerbread.,"Fix sharing of links in Gingerbread.

Our method of removing ""blacklisted"" intents from the system-provided
intent chooser doesn't seem to work in GB. It's supposed to work by
initializing the chooser with one of the actual intents that will handle
the link sharing, and then adding the rest of the intents using the
EXTRA_INITIAL_INTENTS parameter. Neither of these things seems to have any
effect in GB.

Therefore, in GB, we'll just show the chooser with the blacklisted intents
included (a tradeoff we can live with).

Bug: T111583
Change-Id: Idaedfcbe1f9e576f8a79c3a44bfe78a6034dc8fb
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1442241325,1442252524,e237196b3485705179c6d85e092f5856afa71396
f7167243c36131b05f4c91910c026e1d018054f1,f7167243,Fix sequencing of logged session events in ShareHandler.,"Fix sequencing of logged session events in ShareHandler.

In looking at the data from ShareAFactFunnel, I noticed that the session
ID always changes between the ""highlight"" and ""sharetap"" events, which
breaks the expected continuity between these events.

This fixes it so that the session ID remains constant between the
""highlight"" and ""sharetap"" events.

Change-Id: I78e1ec3e2ba021037811385295f546b7f029c303
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1442235254,1442250426,e237196b3485705179c6d85e092f5856afa71396
b2b547bf5bf625e3794e6cb0812e1b85351d080a,b2b547bf,Hide floating action button whilst using find in page,"Hide floating action button whilst using find in page

Currently the floating action button remains visible when using find in page.
If the user has activated find in page they've displayed a clear intent such
that the floating action button is redundant. This patch hide the floating
action button whilst the user is using find in page, and makes it visible
again afterwards.

Bug: T111859
Change-Id: Iebfb82e8fd48d33c7707d603204a62b7bb7f0858
",,,,Deskana,dgarry@wikimedia.org,Stephen Niedzielski,stephen@niedzielski.com,1442030608,1442250126,e237196b3485705179c6d85e092f5856afa71396
a7f5129613b5f7d21604f4d09c0784326e30f7f1,a7f51296,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia59aa6bd62ca8e92b00c834be90e68da18cb4ff1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442241052,1442249724,e237196b3485705179c6d85e092f5856afa71396
cdc1d27437c8cc1b7fb6b9082ab829e091830ea3,cdc1d274,Share code between instrumentation and unit tests,"Share code between instrumentation and unit tests

* Add new shared sources directory, testlib. Both JVM JUnit tests and
  Android instrumentation tests can import from testlib but no non-test
  code can. Update Checkstyle configuration.
* Move TestConstants and TestLatch to testlib. Update Java imports.
* Bump test timeout duration out to 60s for slow Jenkins.
* Use TestLatch in PageLoadPerformanceTests.

Change-Id: I90ba29d9b4236174de9e0b32f0ecb8ad31e66c02
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442249652,1442249652,e237196b3485705179c6d85e092f5856afa71396
e237196b3485705179c6d85e092f5856afa71396,e237196b,Fix NPE in PageLoadPerformanceTests,"Fix NPE in PageLoadPerformanceTests

Minor refactoring of PageLoadPerformanceTests to replace member
variables with locals. CI reported a rare test failure[0] I hope the new
nonnullness guarantees fix.

[0] https://integration.wikimedia.org/ci/job/apps-android-wikipedia-test/20/artifact/logcat.txt/*view*/

Change-Id: I28aa725812e895d808628df8235fa05a76c336a7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1442246438,1442247835,cfd1395d6c7a8f6933b9f8a4a0502fd14110d590
cfd1395d6c7a8f6933b9f8a4a0502fd14110d590,cfd1395d,"Merge ""Fix possible crash in install referrer handler.""","Merge ""Fix possible crash in install referrer handler.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441985123,1441985123,"deeea3e9593a13758c12d2bd18ae03517b61e764,b8f67de607a154ca9802f07702f8fb14f7d54930"
deeea3e9593a13758c12d2bd18ae03517b61e764,deeea3e9,"Merge ""Hygiene: change if statement to switch statement""","Merge ""Hygiene: change if statement to switch statement""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441984813,1441984813,"96dca983c8c34f65ecb3c3ec1f1058b1ac0629c2,800a4be359c787cc1c437c97215b893181effe47"
b8f67de607a154ca9802f07702f8fb14f7d54930,b8f67de6,Fix possible crash in install referrer handler.,"Fix possible crash in install referrer handler.

This fixes a possible crash when receiving the install referrer intent
after the app gets installed, and also modifies the logic slightly, so
that the event gets logged only if there's at least one nonempty parameter
passed to the receiver.

Based on the data collected so far, it looks like the Play Store often
issues the referrer intent with an empty referrer (i.e. even if the user
hadn't reached the Play Store through a referrer link), so we don't need
to log those events.

Bug: T112101
Change-Id: I1e793b00126a4e6b9c4989fa130fcf0f17c74fbf
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1441895958,1441984007,b106356fc652d7aade86701a9dc3f403c0a070a9
96dca983c8c34f65ecb3c3ec1f1058b1ac0629c2,96dca983,"Merge ""Hygiene: remove field that's assigned to but never read from""","Merge ""Hygiene: remove field that's assigned to but never read from""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441983263,1441983263,"076286fd6ec720a2ec62944bc46f8de67efc1a14,aff9388dcc036d32230580e0d3ecc87ceebe9715"
076286fd6ec720a2ec62944bc46f8de67efc1a14,076286fd,"Merge ""Hygiene: upgrade Gradle to v2.6""","Merge ""Hygiene: upgrade Gradle to v2.6""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441982839,1441982839,"96b843a19f0263695c3835b83704fe3e0defec7b,eaf7469f913ab117283a172132da8129b54b7435"
96b843a19f0263695c3835b83704fe3e0defec7b,96b843a1,"Merge ""Always use white background for tab icons""","Merge ""Always use white background for tab icons""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441980980,1441980980,"ce86326663637faad86b8b2d7ad2ab45a621f332,e1bf3706c321add4baf782ac62b548f1e2ba4f14"
ce86326663637faad86b8b2d7ad2ab45a621f332,ce863266,"Merge ""Network error message updated""","Merge ""Network error message updated""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441980273,1441980273,"b106356fc652d7aade86701a9dc3f403c0a070a9,17367e9652e2e53b803b588770a7b7d6353baf92"
aff9388dcc036d32230580e0d3ecc87ceebe9715,aff9388d,Hygiene: remove field that's assigned to but never read from,"Hygiene: remove field that's assigned to but never read from

The openedViaSwipe field to is assigned to in a few different places but the
value is never read, so its presence is redundant. This patch removes it to
reduce code clutter.

Change-Id: I7b3a6ab77e7e9ac6566de264c403f8d5aa657976
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1441945622,1441945622,b106356fc652d7aade86701a9dc3f403c0a070a9
800a4be359c787cc1c437c97215b893181effe47,800a4be3,Hygiene: change if statement to switch statement,"Hygiene: change if statement to switch statement

This patch changes an if statement to a switch. Switch statements on strings
are supported on JDK 7+ (which we now use), and can generally be optimised by
the compiler for performance, so this change should improve performance
marginally as well as increasing code readability.

Change-Id: Ie6b9dc8aa272a43231b4cc4466485ba175a8af60
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1441945373,1441945373,b106356fc652d7aade86701a9dc3f403c0a070a9
17367e9652e2e53b803b588770a7b7d6353baf92,17367e96,Network error message updated,"Network error message updated

Change-Id: I28d74dee7b947b0e58c86332afbb8e21836f18db
",,,,Anmol Kalia,anmol.kalia731@gmail.com,Anmol Kalia,anmol.kalia731@gmail.com,1441860733,1441913931,fe27a31550980fc1ac56ee689d3fc4a81dfc2764
b106356fc652d7aade86701a9dc3f403c0a070a9,b106356f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia8ce7f191a300caa94471cae73f5d4192c510bf6
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1441874424,1441874424,fe27a31550980fc1ac56ee689d3fc4a81dfc2764
fe27a31550980fc1ac56ee689d3fc4a81dfc2764,fe27a315,"Merge ""Safer RbService error handling""","Merge ""Safer RbService error handling""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441818945,1441818945,"e9aed1af074e13abd51b26532ce025a1997a7bbe,6e9703c3dd14d34ac983a1f44b86bd4baa0afaa0"
e9aed1af074e13abd51b26532ce025a1997a7bbe,e9aed1af,"Merge ""Hygiene: Rename invertNightModeElements to addDarkModeStyles""","Merge ""Hygiene: Rename invertNightModeElements to addDarkModeStyles""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441817216,1441817216,"a3171c238672f2cf217447e1a287a142887ef356,ece03413a5ecf93125c8c8255855102be841b7bb"
a3171c238672f2cf217447e1a287a142887ef356,a3171c23,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I5056112156f20aca994b38d888c041c6047dda62
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1441809980,1441809980,a5464b473e6d82e635552c6ff2f40b0ba75b847a
e1bf3706c321add4baf782ac62b548f1e2ba4f14,e1bf3706,Always use white background for tab icons,"Always use white background for tab icons

Tab icons are sometimes transparent. In these cases, they often appear
best on white backgrounds. In night mode, a white background color must
explicitly be set. We've made similar changes for other images.

Change-Id: Iadc06862d45c043ed1ce61918ffa50b80f0d9b1b
Example: National Assembly of Pakistan
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1441774055,1441774055,a5464b473e6d82e635552c6ff2f40b0ba75b847a
eaf7469f913ab117283a172132da8129b54b7435,eaf7469f,Hygiene: upgrade Gradle to v2.6,"Hygiene: upgrade Gradle to v2.6

Change-Id: I6b096abdcb1fc549aa712d2fabc56bd9f1d667bb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1441773918,1441773918,a5464b473e6d82e635552c6ff2f40b0ba75b847a
ece03413a5ecf93125c8c8255855102be841b7bb,ece03413,Hygiene: Rename invertNightModeElements to addDarkModeStyles,"Hygiene: Rename invertNightModeElements to addDarkModeStyles

Updates the file name to reflect what's actually happening.

Change-Id: I236f7f029ee5862606c8bf7bd033904f040c3b4b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1441744050,1441744050,a5464b473e6d82e635552c6ff2f40b0ba75b847a
a5464b473e6d82e635552c6ff2f40b0ba75b847a,a5464b47,Refactor JavaScript transforms,"Refactor JavaScript transforms

This patch restructures our JavaScript transforms to separate them out
into individual files under /transforms.  This is for ease of analysis and
to mirror the structure followed by iOS, facilitating future code sharing.

Bug: T104722
Change-Id: I4286ca41393789ce6e241d699310af90a8ad08c5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1439330989,1441741812,014e911cc1834921ce428e35ba1abc1b23187a1f
014e911cc1834921ce428e35ba1abc1b23187a1f,014e911c,"Merge ""Preserve background colors of compound images in dark mode""","Merge ""Preserve background colors of compound images in dark mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441740257,1441740257,"517eb0fa9f4a7eec74c7c338a63c2adc085e1a4b,c60ed9521b22e3314438b77f642e8d11e5c9d43a"
517eb0fa9f4a7eec74c7c338a63c2adc085e1a4b,517eb0fa,Don't let find-in-page IME action dismiss the find context.,"Don't let find-in-page IME action dismiss the find context.

Previously, when inside the find-in-page context, the keyboard IME action
was ""Done"", and had the effect of exiting out of find-in-page. This patch
changes the IME action to ""Search"", and no longer closes the context when
the action is pressed (it just dismisses the keyboard).

Bug: T109034
Change-Id: I830f90aa50b1be699744106e472a138920d33659
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1441733701,1441733701,e61ae2a3e8f015dc537a13691e859be4798639f6
c60ed9521b22e3314438b77f642e8d11e5c9d43a,c60ed952,Preserve background colors of compound images in dark mode,"Preserve background colors of compound images in dark mode

This patch eliminates the CSS rule setting all image backgrounds to #fff
in dark mode, which improperly cleared out some background colors.  With
this patch, the background is instead set to white using JavaScript if and
only if another background color is not specified for the image (or an
ancestor).

This patch ceases the recently introduced (see T104101) halving of
RGB values for background colors in night mode to avoid introducing
undesired shading.

Finally, this patch removes a substantial amount of color inversion
logic from night.js to no apparent ill effect.

Depends on MobileApp patch at https://gerrit.wikimedia.org/r/#/c/235505/.

Bug: T85646 T108333
Change-Id: I442a5555580cfd5537d6a258808deeb1d712efb2
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1441144750,1441640185,f1c2e2bb0eb11d051a9d73cab48aefd6984805f6
e61ae2a3e8f015dc537a13691e859be4798639f6,e61ae2a3,"Merge ""Suppress link previews for non-mainspace links""","Merge ""Suppress link previews for non-mainspace links""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441400600,1441400601,"50d40e245ddc43bd064cc1f40b78c4a86cca44ec,69ada7109003f3757b5244143e9b3a7e20426180"
50d40e245ddc43bd064cc1f40b78c4a86cca44ec,50d40e24,"Merge ""Check if page is saved in DB when preparing 'save page' options menu item""","Merge ""Check if page is saved in DB when preparing 'save page' options menu item""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441398893,1441398893,"c8e8fbc64033e5007041e8f67c627713cfb7dc6a,b33231d11f7176a7f89b727d9c6735f5a6e2fafd"
b33231d11f7176a7f89b727d9c6735f5a6e2fafd,b33231d1,Check if page is saved in DB when preparing 'save page' options menu item,"Check if page is saved in DB when preparing 'save page' options menu item

Currently, the app doesn't reliably know when it's on a saved page. To fix
this, I removed the existing code dealing with page save state[1] and
implemented a check over the saved pages in the database when the options
menu is prepared to determine whether the current page is in fact a saved
page.

[1] This previous code did not actually keep track of page save state but
set it as saved when navigating from the saved pages fragment or when
refreshing after saving a page. As such, it failed to detect when the user
navigated to a saved page from other sources, e.g., an ordinary search.

Bug: T102293
Change-Id: I95ae9c11f1b29b16320359c8f0f0de52ecb3abc0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1438811666,1441398034,f797afad1477820f2977da05d6afa8c7f41c6284
6e9703c3dd14d34ac983a1f44b86bd4baa0afaa0,6e9703c3,Safer RbService error handling,"Safer RbService error handling

When we open an invalid page it was crashing before,
with exceptions in multiple places.

Also added a few missing @Nullable annotations.

Removed unused constant in Page class.

Change-Id: I2cce8be6aab3c4ea61778b525ebeac09be76691c
",,,,bearND,bsitzmann@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1441242078,1441392234,c8e8fbc64033e5007041e8f67c627713cfb7dc6a
c8e8fbc64033e5007041e8f67c627713cfb7dc6a,c8e8fbc6,Developer preference for RESTBase base URI,"Developer preference for RESTBase base URI

Now you can change the base URI for the request done using the RESTBase service.
This is useful when you want to test the latest Mobile Content Service
changes on your local machine, i.e. changes that have not been published to production yet.

For production RESTBase it uses %1$s://%2$s/api/rest_v1 by default
Lab machine (merged code): http://appservice.wmflabs.org/%2$s/v1
Local dev env for Mobile Content service: http://host:6927/%2$s/v1

Change-Id: I9dd21070886cdc59a576deb25c45941658a62cf4
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1441218541,1441238367,09d5dc372e5c1a398552168aa11e7d1ae05e72cf
09d5dc372e5c1a398552168aa11e7d1ae05e72cf,09d5dc37,Developer preference for Retrofit log level,"Developer preference for Retrofit log level

Now you can change the log level without having to change code.
After you've changed the log level for Retrofit in the Developer settings
and restarted the app, requests and responses will be logged with the given
LogLevel.

See retrofit.RestAdapter.LogLevel for details about the different settings.

Change-Id: I546f1cca8b4c2ce75e4a550280fa3ad9fc09bbc9
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1441000459,1441235023,0199711dacaf22bfc4834e0c00e679d7891e50e0
0199711dacaf22bfc4834e0c00e679d7891e50e0,0199711d,Use RESTBase Mobile Content Service to load page content,"Use RESTBase Mobile Content Service to load page content

This is for full page content using lead/remaining requests, as well
as for loading a full page in a single request for saved pages.

Refactored the unit test for PageLead so most of the code can be
reused by both variants.

Bug: T102274
Change-Id: I78fda5c997e960b0871cff66fd7e3220d80e16e8
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1441151797,1441235013,59ca2ac9468b929175b57757273877bc4e8ffb22
59ca2ac9468b929175b57757273877bc4e8ffb22,59ca2ac9,Use Retrofit for direct mobileview page load,"Use Retrofit for direct mobileview page load

* Added new library + license info + ProGuard rules
  devRelease apk size difference:
  before: 3,812,413 bytes
  after:  3,852,942 bytes
  = +40KB
* Implemented PhpApi Retrofit service endpoint
* JsonPageLoadStrategy ApiTasks converted to use Retrofit callbacks
* New Gson POJOs for PageLead and PageRemaining
* PageLead Gson parsing had an issue with the protection field
  --> had to use custom JSON deserializer for the protection field
  due to T69054.
* pageLead request uses formatversion=2 to make handling boolean values easier.
 pageRemaining doesn't have any booleans, so not needed there yet (but probably wouldn't hurt).
* section: ArrayList -> List
* new Section(json) -> Section.fromJson(json)
* Retrofitted RefreshSavedPageTask functionality
* Get Main page for widget (also added slight optimization)
* SectionsFetchTaskTests -> PageLoadTests
* Removed SectionFetchTask
* Add noimages flag (have to skip sending the parameter when false
  since the MW API takes the mere presence of the parameter as a true value)
* Add W0 mcc-mnc enrichment header
* Add other custom headers
* Get W0 X-CS header
* Use OkHttpClient cookie handler and cache
* Cache the RestAdapter's output the service object since this is a memory intensive object.
  See http://stackoverflow.com/questions/20579185/is-there-a-way-to-reuse-builder-code-for-retrofit#answer-20627010

I started most of the POJO files using jsonschema2pojo.org. But manually updated them to
introduce the static inner classes, added some convenience methods; and, of course,
last but not least add the custom deserializer for the MwPageLead.Protection object.

The parts I don't like are the extra de-/serialization steps in Section.java. I think it's probably better to leave that
to use org.json.JSONObject parsing instead of using Gson since we pass the former over to the JS bridge.
Now toJSON() builds a new JSONObject just for that. Oh well.

The code is already structured so that it's easy to plug in a new way of loading page content through RESTBase.
It was a bit rough to genericize regular Retrofit interfaces which are used to generate the Retrofit endpoint functionality.
If it wasn't for that this code would have been quite a bit simpler and more standard Retrofit. Sorry, Jake.

Change-Id: I0ea27355780f8d1550b743714454b5fe701d4490
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1440049946,1441232129,6996a9569f8e3eff5e1cf5038b3d01636589faac
6996a9569f8e3eff5e1cf5038b3d01636589faac,6996a956,Add exceptions to TranslationTests,"Add exceptions to TranslationTests

* Exclude snackbar_saved_page_format app_store_description from
  translation tests.

TranslationTests.testAllTranslations() failed because a format specifier
was added to one string, snackbar_saved_page_format. This failure is a
false positive as it is always safe to add a format specifier, but not
usually safe to remove one without updating all translations since the
argument would not be supplied in the Java code. As a workaround, the
string has been excluded from the tests until T110243 is fixed properly.

Additionally, app_store_description should not be tested and is excluded
until T91971 is fixed properly.

Change-Id: I489f7a2b93485283847a1f3893ab499d70d07f42
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1441228398,1441230775,f529b1acb9e53acb14196d5da0c288f3d9e40e7f
69ada7109003f3757b5244143e9b3a7e20426180,69ada710,Suppress link previews for non-mainspace links,"Suppress link previews for non-mainspace links

Currently, link previews are shown for non-mainspace pages (including
File, Wikipedia, and Portal), which isn't the behavior we want.  This
patch adds a check for null namespace (i.e., mainspace) before showing
a link preview.

Bug: T108377
Change-Id: Ic6f29c2f25762d004f32bcbd8cc9142b1f3cd0fc
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1441131884,1441216927,f1c2e2bb0eb11d051a9d73cab48aefd6984805f6
f529b1acb9e53acb14196d5da0c288f3d9e40e7f,f529b1ac,"Merge ""Remove LDPI assets""","Merge ""Remove LDPI assets""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441216126,1441216126,"34221c8cf2c6f66ab70ed6c1a4cd2c23668ae556,0a9290ede1671e06a4468392c6a20f9d52236506"
0a9290ede1671e06a4468392c6a20f9d52236506,0a9290ed,Remove LDPI assets,"Remove LDPI assets

* Remove all LDPI assets.
* Remove LDPI support from convert-icons.py.

It's hard to find LDPI devices these days. The actual LDPI usage metrics
for the app aren't in the Play console but the global Dashboard[0] shows
that the density comprises 3.9% of devices across all versions of
Android. This patch removes LDPI targeted asset cuts and saves our users
some bandwidth.

[0] https://developer.android.com/about/dashboards/index.html#Screens

Bug: T108861
Change-Id: I0db83a94f6dfe9baa9696a952168ad91852c9104
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1441208345,1441208345,f1c2e2bb0eb11d051a9d73cab48aefd6984805f6
34221c8cf2c6f66ab70ed6c1a4cd2c23668ae556,34221c8c,Hygiene: move variable outside for loop in SavedPagesFragment,"Hygiene: move variable outside for loop in SavedPagesFragment

This patch moves a variable which doesn't depend on the loop counter outside
of the for loop. This was recommended by BearND in the patch that implemented
this functionality.

Change-Id: I51c51140c9efe9a01c518c6060d5a4e7e7f1758e
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1441175750,1441175894,f1c2e2bb0eb11d051a9d73cab48aefd6984805f6
f1c2e2bb0eb11d051a9d73cab48aefd6984805f6,f1c2e2bb,"Merge ""Force LTR layout in English-based elements of About activity.""","Merge ""Force LTR layout in English-based elements of About activity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1441120316,1441120316,"f797afad1477820f2977da05d6afa8c7f41c6284,807936ade7a095de3a00bf7e8fca04284dfafdae"
f797afad1477820f2977da05d6afa8c7f41c6284,f797afad,Add Matanya Moses to credits.,"Add Matanya Moses to credits.

Matanya's made a lot of contributions to the app, manning OTRS queues,
performing user research on the link preview feature, filing tasks relating
both to the app generally and also its handling of RTL languages. He deserves
the recognition.

Bug: T110914
Change-Id: I4f525d537e751a97c271abd79df8994612b54457
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1441080823,1441080823,a68abb8dc162fd662ff64bee83565e8a8ac069c0
807936ade7a095de3a00bf7e8fca04284dfafdae,807936ad,Force LTR layout in English-based elements of About activity.,"Force LTR layout in English-based elements of About activity.

Per Matanya's rationale in T110914, elements of the UI which are exclusively
in English, even when the app is in an RTL language, should be hardcoded to
LTR directionality. This patch does so.

Bug: T110914
Change-Id: I59883a71d88fc24d7eab37b466deb8b11986adc5
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1441080364,1441080364,a68abb8dc162fd662ff64bee83565e8a8ac069c0
a68abb8dc162fd662ff64bee83565e8a8ac069c0,a68abb8d,Bump versionCode,"Bump versionCode

Change-Id: If467693267aa86bbc59a640f70893925606edf32
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1441055134,1441055134,03dfeecd2834646a8890e2e6d2dbc75c961b9834
03dfeecd2834646a8890e2e6d2dbc75c961b9834,03dfeecd,Fix search result ordering based on latest API.,"Fix search result ordering based on latest API.

The latest prefix search API now includes an ""index"" property with each
redirected result, as well as with normal results. This isn't an ""optimal""
solution (see the discussion in T110231 ), but it works, and we should use
it until an even more complete solution is presented.

Bug: T104746
Change-Id: If3593349fc04a703d4eec5aed01459fe056a24ce
",,,,dbrant,dbrant@wikimedia.org,berndsi,besitzus@gmail.com,1440979505,1441054170,3f9bcd8bece5ad6ce1ac3b4a03483b560b663565
3f9bcd8bece5ad6ce1ac3b4a03483b560b663565,3f9bcd8b,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

TranslationTests.testAllTranslations() failed because a format specifier
was added to one string (T110243). This failure is a false positive as
it is always safe to add a format specifier, but not usually safe to
remove one without updating all translations since the argument would
not be supplied in the Java code. As a workaround, the tests pass after
running:

  find -name strings.xml|
  grep -Ev ""values/|-qq/""|
  xargs -rd\\n sed -ri '/<string name=""snackbar_saved_page_format""[^>]*>[^<]*<\/string>/d'

Change-Id: I38875b1d87b6cdc9a0373cacf8bd99e7678354bf
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1441036338,1441037031,6c2e41c0a318c319acb373602e6963f571c78846
6c2e41c0a318c319acb373602e6963f571c78846,6c2e41c0,Remove redundant field from LinkPreviewFunnel,"Remove redundant field from LinkPreviewFunnel

A page title was being passed to the constructor for LinkPreviewFunnel,
which was then never actually used for anything. I assume this was used
for something in the past. Either way, it's not being used at all now.
This patch removes the field and alters all the calls to the constructor
so that it's not passed any more, to optimise performance and improve
code tidiness.

Change-Id: Ie99666ec6a9f4f0f34a1dc56f7a2e9387b72df4f
",,,,Dan Garry,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1440816887,1440820367,e5c01122b95c566d7fa87735b6ab576ed881a477
e5c01122b95c566d7fa87735b6ab576ed881a477,e5c01122,Convert some fields to local variables.,"Convert some fields to local variables.

This patch converts some fields that are only used in a single method to
local variables, to optimise performance and maintain code tidiness.

Change-Id: Ia38f84ecdc87c66a3924b06b43d19e31f7131691
",,,,Dan Garry,dgarry@wikimedia.org,Dan Garry,dgarry@wikimedia.org,1440816615,1440816721,7f6d27fc9abddce0f7ea802e902fc71aa76eaf8e
7f6d27fc9abddce0f7ea802e902fc71aa76eaf8e,7f6d27fc,Revert temporary string renames,"Revert temporary string renames

This patch reverts commit 88430f07d8fee23d9ad12746a7f01c17350430fd which
was necessary to synchronize TWN string content changes. Now TWN is
ready for name-only changes.

  menu_page_save                     <- menu_save_page
  menu_page_share                    <- menu_share_page
  snackbar_saving_page               <- toast_saving_page
  snackbar_saved_page_format         <- toast_saved_page
  snackbar_saved_page_missing_images <- toast_saved_page_missing_images
  snackbar_refresh_saved_page        <- toast_refresh_saved_page
  snackbar_saved_page_deleted        <- toast_saved_page_deleted
  menu_page_other_languages          <- menu_other_languages
  menu_page_find_in_page             <- find_in_page
  menu_page_font_and_theme           <- menu_themechooser
  menu_page_show_tabs                <- menu_show_tabs
  menu_long_press_open_page          <- menu_open_link
  menu_long_press_open_in_new_tab    <- menu_open_in_new_tab

Old names were verified to be eliminated by grepping for them:

  find -type f|
  xargs -rd\\n grep -E 'menu_save_page|menu_share_page|toast_saving_page|toast_saved_page|toast_saved_page_missing_images|toast_refresh_saved_page
|toast_saved_page_deleted|menu_other_languages|find_in_page|menu_themechooser|menu_show_tabs|menu_open_link|menu_open_in_new_tab'|grep -Ev 'menu_page_find_in_p
age|find_in_page_|group_find_in_page'

Change-Id: I5ca8534e318fbafed5aa818f56d066c2e6afbffe
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1440792564,1440792564,1e6d9f6e8b9896821606af236622659c98cc9e78
1e6d9f6e8b9896821606af236622659c98cc9e78,1e6d9f6e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

A bug in HHVM, T109402, causes most of the line endings to disappear in
translations. After exporting from TWN, the following commands were
executed to printy print the XML:

  find -name strings.xml|
  grep -Ev values/strings.xml|
  xargs -rd\\n -I{} sh -c 'xmllint --format ""$1"" -o ""$1""' -- '{}'

TranslationTests.testAllTranslations() failed because a format specifier
was added to one string (T110243). This failure is a false positive as
it is always safe to add a format specifier, but not usually safe to
remove one without updating all translations since the argument would
not be supplied in the Java code. As a workaround, the tests pass after
running:

  find -name strings.xml|
  grep -Ev ""values/|-qq/""|
  xargs -rd\\n sed -ri '/<string name=""toast_saved_page""[^>]*>[^<]*<\/string>/d'

Change-Id: I0da2b7f9aaf580d2983315361cfac3e132b73425
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1440790177,1440790850,0cbc805dde0db805a474e658f0413de363c8c2f8
0cbc805dde0db805a474e658f0413de363c8c2f8,0cbc805d,"Merge ""Fix image URL replacement for saved pages""","Merge ""Fix image URL replacement for saved pages""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440786160,1440786160,"d081179243259c7137c1159e83076c06df8d71cf,f26c8e25e0cd95dbeb3d2c6b4fcefb7e3a49b59f"
f26c8e25e0cd95dbeb3d2c6b4fcefb7e3a49b59f,f26c8e25,Fix image URL replacement for saved pages,"Fix image URL replacement for saved pages

* Remove srcsets for remote images.
* Map remote URLs to local files only after all sections are loaded.

The image srcsets attribute should only be specified for remote images
downloaded from the network. For saved pages, only one image is kept
locally and that should be the only image considered. For this reason,
srcsets are now removed when remapping the remote image URLs to local
files. Additionally, this transformation is now performed after all
sections are loaded to avoid a race condition prevalent in long
articles.

Bug: T110487
Change-Id: If2b4642d7507a57085ed0a2185df0d04c1d8432e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1440708598,1440716163,f412bdcd434f3df6c64320c9730425cf58a04bd7
d081179243259c7137c1159e83076c06df8d71cf,d0811792,Fix crash when saving a page via context menu with no network.,"Fix crash when saving a page via context menu with no network.

Bug: T110589
Change-Id: I5fc7f3f71d8b7fdd39b69fd42013bf33f476f1cf
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1440707467,1440707467,f412bdcd434f3df6c64320c9730425cf58a04bd7
f412bdcd434f3df6c64320c9730425cf58a04bd7,f412bdcd,"Merge ""Fix possible crash upon screen rotation.""","Merge ""Fix possible crash upon screen rotation.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440606965,1440606965,"d6c4fc1db3b45d627dd74c1fcf8540f4dfa9735b,8a9a902b95008c694b29d096a1f7679d93997d1e"
d6c4fc1db3b45d627dd74c1fcf8540f4dfa9735b,d6c4fc1d,"Merge ""Scroll to an URL-Fragment of a redirected title""","Merge ""Scroll to an URL-Fragment of a redirected title""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440606907,1440606907,"cdc7d930d6b02eb9d46ac2806a070830ac7fc5d7,b73e0e506f7ddb295f7798c8e9b94cd2948b7268"
cdc7d930d6b02eb9d46ac2806a070830ac7fc5d7,cdc7d930,"Merge ""Fix possible crash when browsing a Random page.""","Merge ""Fix possible crash when browsing a Random page.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440606134,1440606134,"c5940a72781f0801bcb6d68722ee114074d7f16f,7af793a4a33f8afd2eaf018e384a3ea70ae3bd9d"
7af793a4a33f8afd2eaf018e384a3ea70ae3bd9d,7af793a4,Fix possible crash when browsing a Random page.,"Fix possible crash when browsing a Random page.

This can potentially happen when the task that fetches a Random title
takes a long time, and the PageActivity is stopped in the meantime (this
can be reproduced by adding a delay to RandomArticleIdTask, and checking
""Don't keep activities"" in Settings).

Since the task to retrieve a Random title is asynchronous, it means that
the PageActivity might become closed before the task is finished. However,
upon finishing the task, we unconditionally call displayNewPage(),
expecting the activity to be active all the time.

In API 17+ there is a function called Activity.isDestroyed() that can be
used for this purpose, but there's no equivalent function for earlier
APIs... Therefore I added our own isDestroyed() method to our base
Activity class, ThemedActionBarActivity.

Bug: T109281
Change-Id: I8dd624788cdfb14124bb0028d45dfb1352dc0482
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1440600680,1440605635,795b7371e6d842af0549bb91292cd74fe9b7582e
c5940a72781f0801bcb6d68722ee114074d7f16f,c5940a72,"Merge ""Fix possible crash involving Zero banner.""","Merge ""Fix possible crash involving Zero banner.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440605503,1440605503,"8f89e8073887f625b6532f5c606948dafa5f4ba1,77390718a6190a85a06cf2c4bb65b71ce8c8d4dc"
8f89e8073887f625b6532f5c606948dafa5f4ba1,8f89e807,Fix possible crash when closing tabs.,"Fix possible crash when closing tabs.

This protects against a possible IndexOutOfBounds exception when closing a
tab. Even though I haven't been able to reproduce it, a few users have
reported it when ""closing tabs quickly.""

Bug: T109998
Change-Id: Ia9938506fe9c8f97f4ac3803541bdb68639f3fd6
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1440593017,1440603893,795b7371e6d842af0549bb91292cd74fe9b7582e
8a9a902b95008c694b29d096a1f7679d93997d1e,8a9a902b,Fix possible crash upon screen rotation.,"Fix possible crash upon screen rotation.

This fixes a NPE when the user rotates the screen before the lead section
of the page is fetched (and it's the first page in the backstack), by
leveraging the isLoading() function of PageLoadStrategy.

Bug: T109966
Change-Id: I795c5a212f1c800abd70d3906dae560033ef2ac0
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1440596781,1440596781,795b7371e6d842af0549bb91292cd74fe9b7582e
77390718a6190a85a06cf2c4bb65b71ce8c8d4dc,77390718,Fix possible crash involving Zero banner.,"Fix possible crash involving Zero banner.

When showing the Wikipedia Zero banner from PageActivity, we were
anchoring the SnackBar to a View that's only available when a PageFragment
is active. Therefore, when a different fragment is active (e.g. History),
the view doesn't exist, and thus causes a crash.

This updates the code to use a more generic View from the current Activity
for displaying the banner.

Bug: T110241
Change-Id: I5852b59dd706e428381d8e7b5d39cf414236fe18
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1440591176,1440591176,795b7371e6d842af0549bb91292cd74fe9b7582e
795b7371e6d842af0549bb91292cd74fe9b7582e,795b7371,Hygiene: Add page load performance test,"Hygiene: Add page load performance test

We can't improve what we don't measure.
I'm adding some performance tests to see how long loading a few pages
on testwiki takes. It's good to have those tests added before we significantly
change the page load code further.
For serious testing increase the NUM_RUNS to a higher value.
Also to compare apples to apples it's imperative to test on the same devices,
ideally with the same network condition.
(Ok, the latter is not really exactly controlled. But as long as we're talking
about a stable broadband connection it should be good enough.
The alternative would be mocking responses from a Mock MediaWiki server
and injecting code to use that instead of the real servers.)

Introduced a callback for page load completion which is currently only
used for this performance test but could be used for other things in the future.

Renamed another test to make it clearer that it's testing SectionFetchTask directly.

Bug: T109246
Change-Id: Ie5f8494da952cfdaa753a5e4e7a9f826599a1409
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1439785109,1440487901,1ba0f7604d0c71e5dc0f84553b9a1051208a1073
1ba0f7604d0c71e5dc0f84553b9a1051208a1073,1ba0f760,"Merge ""Move link preview tag to private static final.""","Merge ""Move link preview tag to private static final.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440454428,1440454428,"76c9c7ec76e21daa401a33755f2279409cfe84f4,eb18071b84857fddc9e86e16c21cf37c5b3c68d5"
76c9c7ec76e21daa401a33755f2279409cfe84f4,76c9c7ec,"Merge ""Ensure link preview is closed when navigating to new page.""","Merge ""Ensure link preview is closed when navigating to new page.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440454409,1440454409,"1341de14287691fa811e2ffa921c5cfcc9225353,0561fca2f3919c0c9b44b52dd219d13fa6df44f1"
1341de14287691fa811e2ffa921c5cfcc9225353,1341de14,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440452384,1440452384,"b4e6b79907624aa8caeb78e2381b9924d9315252,378ab6cd40ab881c13a9136af6a9dc86cc2120e8"
eb18071b84857fddc9e86e16c21cf37c5b3c68d5,eb18071b,Move link preview tag to private static final.,"Move link preview tag to private static final.

The LinkPreviewDialog fragment was being found by its tag in several places
in PageActivity. This patch moves it to a private static final variable in the
class to avoid duplication.

Change-Id: I0d08ab2d1beffc650a9a49a92d346b9bf3c6ea91
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1440434582,1440451187,0561fca2f3919c0c9b44b52dd219d13fa6df44f1
b4e6b79907624aa8caeb78e2381b9924d9315252,b4e6b799,"Merge ""Hide saved pages buttons when none exist""","Merge ""Hide saved pages buttons when none exist""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440435619,1440435619,"fde676e7f20c20926940953c88ed58d066627aa3,5bd7fe8c57fe2b3680ddd969f94e95ade2e1c710"
0561fca2f3919c0c9b44b52dd219d13fa6df44f1,0561fca2,Ensure link preview is closed when navigating to new page.,"Ensure link preview is closed when navigating to new page.

Currently, it's possible to navigate to a new page without the link preview
closing (see T109895 for reproduction steps). This patch fixes that, by trying
to close the link preview (if there is one) whenever the user navigates to a
new page.

Bug: T109895
Change-Id: I29c48a4136d1ae4cd2c829d94d4b07ce94d93de8
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1440216475,1440434150,cda9a7cb20342be144780e4d20876e2293fc33ab
378ab6cd40ab881c13a9136af6a9dc86cc2120e8,378ab6cd,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

A bug in HHVM, T109402, causes most of the line endings to disappear in
translations. After exporting from TWN, the following commands were
executed to printy print the XML:

  find -name strings.xml|
  grep -Ev values/strings.xml|
  xargs -rd\\n -I{} sh -c 'xmllint --format ""$1"" -o ""$1""' -- '{}'

TranslationTests.testAllTranslations() failed because a format specifier
was added to one string. This failure is a false positive as it is
always safe to add a format specifier, but not usually safe to remove
one without updating all translations since the argument would not be
supplied in the Java code. As a workaround, the tests pass after
running:

  find -name strings.xml|
  grep -Ev ""values/|-qq/""|
  xargs -rd\\n  sed -ri 's%<string name=""toast_saved_page""[^>]*>[^<]*</string>%%'

Change-Id: Ic46d2be21ff97730f06d9d9eb36125482bf19e0c
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1440431943,1440432488,fde676e7f20c20926940953c88ed58d066627aa3
5bd7fe8c57fe2b3680ddd969f94e95ade2e1c710,5bd7fe8c,Hide saved pages buttons when none exist,"Hide saved pages buttons when none exist

Fixed Save All/Clear All Actions MenuItem that would be visible even if
nothing is in savedPageList

Added if-condition in onPrepareOptionsMenu() method and setVisible(false)
for the MenuItem if nothing is in savedPageList

Bug: T104528

Change-Id: I169d6e3638ea47a418eeedccc774b5059974f7cd
",,,,Asad Salman,me@asad.co,Asad Salman,me@asad.co,1439599368,1440334284,17b6cd56def9ef19433d0168dcfdcbf40aa2b816
fde676e7f20c20926940953c88ed58d066627aa3,fde676e7,"Remove RTL icons for social networks, mark SVGs as noflip.","Remove RTL icons for social networks, mark SVGs as noflip.

Currently we flip the icons for Twitter, Facebook, and Messaging. As noted
in T109209, this does not make sense. This patch deletes the RTL icons for
those social networks, so that the same, standard icon is used in both LTR
and RTL, and marks the SVGs that generate those icons as noflip, so that RTL
versions are never generated.

Bug: T109209
Change-Id: I6426c69231868212ae7876bd3eea8e51419918cc
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1440219745,1440219745,cda9a7cb20342be144780e4d20876e2293fc33ab
cda9a7cb20342be144780e4d20876e2293fc33ab,cda9a7cb,Bump versionCode,"Bump versionCode

Change-Id: I456ef9c1e6f82bff540b6fded81a4816af1d146d
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1440197170,1440197170,93b8efef1bf62ea6e8737e1d3a60e59f68f57411
93b8efef1bf62ea6e8737e1d3a60e59f68f57411,93b8efef,Add Beta A/B test for scrolling the link preview to different heights.,"Add Beta A/B test for scrolling the link preview to different heights.

- Brought back the LinkPreviewVersion generator.
- The split is now as follows: 50% of users will see no preview, 25% will
  see the preview scrolled up a short amount, and 25% will see it scrolled
  up a medium amount.
- The test only applies to Beta. The production app will have link
  previews for everyone, and no height a/b split.

Change-Id: I219ac0ba1e3889146a2de626b3fbf15a61b0c15f
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1440188773,1440193146,7cfe989d7c1af68bdda43d89b8f05894ffe6fc55
7cfe989d7c1af68bdda43d89b8f05894ffe6fc55,7cfe989d,Preserve descenders in link preview title,"Preserve descenders in link preview title

The stems of gs and ys in the link preview title were cut off because
the line height was too trim.

Bug: T109892
Change-Id: I9cb6aa61e78ede0fe0b69617360ab5d0f34ae4f3
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1440186855,1440192852,9cc63f234ea5445f3ae70e798af121b4181b1a3c
9cc63f234ea5445f3ae70e798af121b4181b1a3c,9cc63f23,"Merge ""Revert ""Hygiene: Split off page content loading into two variants""""","Merge ""Revert ""Hygiene: Split off page content loading into two variants""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440192667,1440192667,"c8af3e755f1c6ef485cfc41befea19150190f7de,2200cf7c01740bc869460c38f2864c73b961ee5d"
c8af3e755f1c6ef485cfc41befea19150190f7de,c8af3e75,"Merge ""Localisation updates from https://translatewiki.net.""","Merge ""Localisation updates from https://translatewiki.net.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440177445,1440177445,"29d1cb2d76675f59de73c5b2a83fcef5ca02c289,a5b3d4954a2a786f6581b62b1ac187217f6b250f"
a5b3d4954a2a786f6581b62b1ac187217f6b250f,a5b3d495,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

A bug in HHVM, T109402, causes most of the line endings to disappear in
translations. After exporting from TWN, the following approximate
commands were executed to printy print the XML:

  find -name strings.xml|
  grep -Ev values/strings.xml|
  xargs -rd\\n -I{} sh -c 'xmllint --format ""$1"" -o ""$1""' -- '{}'

TranslationTests.testAllTranslations() failed because a format specifier
was added to one string. This failure is a false positive as it is
always safe to add a format specifier, but not usually safe to remove
one without updating all translations since the argument would not be
supplied in the Java code. As a workaround, the tests pass after
running:

  find -name strings.xml|
  grep -Ev ""values/|-qq/""|
  xargs -rd\\n  sed -ri 's%<string name=""toast_saved_page""[^>]*>[^<]*</string>%%'

Change-Id: Ia94b879f1c85befca8c3e4114fded504a808eba3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1440174500,1440175776,d9143756adcc5851575f12ab9e56fdb9c7d5d314
29d1cb2d76675f59de73c5b2a83fcef5ca02c289,29d1cb2d,Stage link previews for production.,"Stage link previews for production.

- All users get link previews.
- Removed the LinkPreviewVersion randomizer, and bumped the version number
  in the Funnel to 3, to distinguish the new events from the previous
  events, which had version 0, 1, or 2. (Also removed the link preview
  version preference)
- Some final (really) padding/margin tweaks in the xml layout.
- Removed the subtle zoom animation that gets applied to the background
  activity when the link preview is shown. On two of my devices (API 18
  and 19), and on API 19 in the emulator, the link preview seemed to
  consume a nontrivial amount of CPU (even when idle!) when displayed on
  top of a zoomed-out activity. When the activity is not zoomed out, CPU
  consumption is normal. Until we figure out why this happens, let's just
  not do the animation.

Change-Id: Ieeaf9ed26c058c26556475d5026d498e9532651e
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1440165827,1440175137,dc0f670d0efd5fb3239192b38d0201b5c1bc54a2
dc0f670d0efd5fb3239192b38d0201b5c1bc54a2,dc0f670d,Give the Search bar (gasp) a Material highlight.,"Give the Search bar (gasp) a Material highlight.

Change-Id: I54393cd4d6c046415dca552ee7e8dcc0e98b9f03
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1440121258,1440121258,d9143756adcc5851575f12ab9e56fdb9c7d5d314
b73e0e506f7ddb295f7798c8e9b94cd2948b7268,b73e0e50,Scroll to an URL-Fragment of a redirected title,"Scroll to an URL-Fragment of a redirected title

If a link is a redirect, the app shouldn't rely only on the URL-Fragment
of the original title. If there was no URL-Fragment so far, check, if the
new, redirected title has one and use this instead.

Depends on: I0e886b723664f0f221e

Bug: T109782
Change-Id: I1fabc81fa42f7c7296a06efef9893cd0b4810e1e
",,,,Florian,florian.schmidt.stargatewissen@gmail.com,Florianschmidtwelzow,florian.schmidt.stargatewissen@gmail.com,1440108753,1440120770,360c5b2b0cc204303636cd895500863624e10a9b
d9143756adcc5851575f12ab9e56fdb9c7d5d314,d9143756,Clean up list highlight colors.,"Clean up list highlight colors.

- Removed the explicit background declaration from list item layouts,
  which will allow any ListView to use the default selection effect
  naturally.
- ...except in History and Saved Pages, where we need to explicitly apply
  the background selector to the items, so that the ""activated"" state can
  be applied (we use the activated state to indicate multiple selections).
- Updated the colors in the custom selectable_item_background selector to
  match the default AppCompat colors.

Bug: T107249
Change-Id: I5c0f1623f4b8dc3fd7ab89ef249cd8ac3256afe4
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1439950595,1440083703,10f381139fcf312f677e50cc27c315c0820f83c4
10f381139fcf312f677e50cc27c315c0820f83c4,10f38113,Use default Material button selector in a couple more places.,"Use default Material button selector in a couple more places.

- License icon in Gallery.
- ""x"" button in Tab list.
- Buttons in the Disambig dialog.

Change-Id: Ied751e4564bd55d1f54db0a50ff1c0de7ff1858e
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1439950034,1440081116,360c5b2b0cc204303636cd895500863624e10a9b
2200cf7c01740bc869460c38f2864c73b961ee5d,2200cf7c,"Revert ""Hygiene: Split off page content loading into two variants""","Revert ""Hygiene: Split off page content loading into two variants""

This reverts commit 1fe3e21d5efaa350e38722f3db15672f56bd99d7.

Looks like java-mwapi structure (Api, RequestBuilder, etc.) is not a good fit for dealing with REST endpoints. Looking into other options, like Retrofit instead.

Change-Id: I0a8e773d07242303e063cf35de642a1fa42c0608
",,,,BearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1439658029,1440050852,360c5b2b0cc204303636cd895500863624e10a9b
360c5b2b0cc204303636cd895500863624e10a9b,360c5b2b,"Merge ""Link preview tweaks.""","Merge ""Link preview tweaks.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1440041514,1440041514,"c2fc5205c28e7698ab791830247d3ca2006a3efc,8b8cbb6dfb371e7bd4d3ea98d8bd47fff3043533"
8b8cbb6dfb371e7bd4d3ea98d8bd47fff3043533,8b8cbb6d,Link preview tweaks.,"Link preview tweaks.

- The title is now clickable (Materially), and goes to the target article.
- Removed the thumbnail image next to the title.
- Removed dark background from title & overflow button.
- Removed the persistent button on top of the preview, and moved it to the
  bottom of the content, as it was originally. (And therefore removed the
  ""overlay"" view code)
- The bottom button is now Material-styled.
- Reduced the TextExtract length to 2 sentences, as it was before.
- Made the TextExtract receiver more fault-tolerant (optString instead of
  getString)
- Updated the image gallery Funnel to track whether it was entered via the
  link preview (in addition to Lead Image vs. non-lead image). (The schema
  already supports this generalization)
- Brought back client-side processing of sentences from the TextExtract.
  (Sorry to flip-flop on this, but additional testing of this
  functionality has convinced me that it really is better this way. Once
  we transition to the content service, we can take this out.)
- An executive decision to refer to articles as ""articles"" in this
  instance (Design and mgt. are in agreement).

Bug: T108374 T109342 T109340
Change-Id: Iec04b087d8864bf35181b9a6523cc2cca34ab7df
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1439611140,1440031735,b685a5497320581a8fddc886ed593e43dd26b9bd
c2fc5205c28e7698ab791830247d3ca2006a3efc,c2fc5205,Hygiene: Remove unused WikiListView component.,"Hygiene: Remove unused WikiListView component.

This component provides the ability to obtain the x-y coordinate
of long-press events, which we were using to display a context menu
located exactly at that point. However, this turned out to be an
unsustainable and inconsistent solution, so it was abandoned.

Change-Id: I2afd2128f0598a2e3c27aaba73e60f4cd6c60f27
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1439949797,1440002857,b685a5497320581a8fddc886ed593e43dd26b9bd
b685a5497320581a8fddc886ed593e43dd26b9bd,b685a549,"Merge ""Don't allow opening refs or Special pages in new tab.""","Merge ""Don't allow opening refs or Special pages in new tab.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1439914936,1439914936,"b2a614c68eabb2e6ba4ea3b6dac20209014e90ab,60fdafd90e838f9f77b075bb0d621278c3d09f97"
60fdafd90e838f9f77b075bb0d621278c3d09f97,60fdafd9,Don't allow opening refs or Special pages in new tab.,"Don't allow opening refs or Special pages in new tab.

Special pages are not supported by the mobileview API (that's
why we bounce them to an external browser in the app), and
References are external links by definition. Therefore, it's
meaningless to offer to open these links in a new tab.

Bug: T103992
Change-Id: Ib97e053363b098afbafd868aae71fe370a038654
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1439823504,1439913679,d3839a6e25f3ca225637282e5f37d6bdf492cdea
b2a614c68eabb2e6ba4ea3b6dac20209014e90ab,b2a614c6,"Merge ""Share only the page URL from the overflow menu.""","Merge ""Share only the page URL from the overflow menu.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1439912042,1439912042,"261cc1e1fc46d5395301bbd39cfa28f64e6e4d75,8eebabe06da2b151fc8e307785a694abcc826730"
261cc1e1fc46d5395301bbd39cfa28f64e6e4d75,261cc1e1,"Merge ""Hygiene: give link preview menu items less ambiguous IDs""","Merge ""Hygiene: give link preview menu items less ambiguous IDs""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1439911347,1439911347,"88430f07d8fee23d9ad12746a7f01c17350430fd,bb23f71b19eafe028215b4ae4c818f4fa15b9d64"
8eebabe06da2b151fc8e307785a694abcc826730,8eebabe0,Share only the page URL from the overflow menu.,"Share only the page URL from the overflow menu.

Prior to this patch, the behavior when selecting the Share option from the
overflow menu was to launch the Share-a-fact dialog with the first
paragraph of text. But in fact, all that users really want is to share the
URL of the page. At the time of this writing, this is one of the most
requested features to be brought back.

Bug: T108181
Change-Id: I371bff4bf5c2b3aeec6dfff708b4de5cba3306cf
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1439820961,1439908416,d3839a6e25f3ca225637282e5f37d6bdf492cdea
88430f07d8fee23d9ad12746a7f01c17350430fd,88430f07,Temporarily revert string renames,"Temporarily revert string renames

Temporarily revert string resource key names made in
aca6ca981dca276c0f57d17768085bde5583c052. String contents may change,
or strings added or removed, but string names must remain the same so
TWN diffs may be resolved safely.

Let this be a lesson in keeping patches small and a tale of caution that
our translation diffs aren't terribly sophisticated. Devs may
exclusively change string names or values in patch and in a day.

The following reverts were made according to strings.xml[0]:

menu_page_save                     -> menu_save_page
menu_page_share                    -> menu_share_page
snackbar_saving_page               -> toast_saving_page
snackbar_saved_page_format         -> toast_saved_page
snackbar_saved_page_missing_images -> toast_saved_page_missing_images
snackbar_refresh_saved_page        -> toast_refresh_saved_page
snackbar_saved_page_deleted        -> toast_saved_page_deleted
menu_page_other_languages          -> menu_other_languages
menu_page_find_in_page             -> find_in_page
menu_page_font_and_theme           -> menu_themechooser
menu_page_show_tabs                -> menu_show_tabs
menu_long_press_open_page          -> menu_open_link
menu_long_press_open_in_new_tab    -> menu_open_in_new_tab

[0] https://gerrit.wikimedia.org/r/#/c/229582/9/app/src/main/res/values/strings.xml

Change-Id: Id0294cc2b6035b61203ce8bbbeb13aa0cd50a914
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1439846506,1439846506,773994917d6c95909af949331f4ffad73c00550a
bb23f71b19eafe028215b4ae4c818f4fa15b9d64,bb23f71b,Hygiene: give link preview menu items less ambiguous IDs,"Hygiene: give link preview menu items less ambiguous IDs

These menu items should be more clearly identified with the link preview
dialog to prevent confusion with other, similarly ID'd items.

menu_save_page, in particular, is awfully close to menu_page_save (which
just cost me a short session in the debugger).

Change-Id: I5a41cba4f73714a136020e505a47df7ebde2b386
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1439839133,1439839133,773994917d6c95909af949331f4ffad73c00550a
773994917d6c95909af949331f4ffad73c00550a,77399491,Don't collapse tables on the Main Page.,"Don't collapse tables on the Main Page.

Bug: T104098
Change-Id: If2b503fc6d4c4f59c1a0105d03157b89f2b97fff
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1439821687,1439821687,d3839a6e25f3ca225637282e5f37d6bdf492cdea
d3839a6e25f3ca225637282e5f37d6bdf492cdea,d3839a6e,Whoops: bump DB version number!,"Whoops: bump DB version number!

One of our recent patches introduced a new column to one of our
persistence helpers (PageImagePersistenceHelper), which necessitates a
bump of our db version from 6 to 7. In fact, the updated persistence
helper explicitly asks for database version 7, but the actual database
version number wasn't updated.

This is causing the undesired side-effect of images not being saved for
any page (and thumbnails not showing up in History, Saved Pages, etc).

Change-Id: Ie69dee237a86752fe5fd924ce3a253f3b6b2deeb
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1439607904,1439607904,358654c973bc73ee6b1a3769bfaf905af7381608
358654c973bc73ee6b1a3769bfaf905af7381608,358654c9,Tweak long press menu order,"Tweak long press menu order

Order long press menu items by frequency of use.

Bug: T102541 T103957
Change-Id: I39d6d882bc50d4dba13ef55cfa156f6c040daf54
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1439584881,1439589485,3038d0d0a5a6fc638d64233a10f71f2ca576ab8b
3038d0d0a5a6fc638d64233a10f71f2ca576ab8b,3038d0d0,Link Previews: TNG,"Link Previews: TNG

Highlights:
- Created a SwipeableBottomDialog class that forms the basis for a Dialog
  that can be swiped vertically, and dismissed by swiping all the way
  down. It works by using a ListView with transparent ""items"" that fill
  the screen, and the last item contains the actual dialog xml layout.
- LinkPreviewDialog makes full use of SwipeableBottomDialog.
- Created a custom View called GalleryThumbnailScrollView, which inherits
  from RecyclerView (finally), and implements a horizontally-scrollable
  gallery of image thumbnails.
- Modified GalleryCollectionFetchTask to be able to fetch thumbnail URLs
  for each gallery item, which is specified conditionally. The full-size
  gallery works as before, while the thumbnail gallery uses the new
  modified fetching parameters.
- Clicking on any of the scrollable thumbnail images leads to the full
  Gallery with that image focused.
- Increased the global preferred thumbnail size to 320, which will
  increase the fidelity of thumbnail images shown in Search results,
  History, Saved Pages, Nearby, and Link Preview thumbnails.

Bug: T108374 T102166 T107785 T107912
Change-Id: I8326dba91d76b821d5c58550e20544c55d432808
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437625324,1439588193,2e405121bae121c2b0f1753b1374fd3cef617fa8
2e405121bae121c2b0f1753b1374fd3cef617fa8,2e405121,Fix page title position when Wikidata description is empty.,"Fix page title position when Wikidata description is empty.

The final piece of the puzzle in correctly laying out the page title and
the Wikidata description below it. This patch fixes the case when the
description is empty, which was causing the title to be totally flush with
the bottom of the lead image.

This also hides the page title until the description is fully laid out,
since the title was sometimes 'jumping' when the page is first loaded.

Change-Id: Ibd3991a8f3615670a697cdc09fdb2442936eddec
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1439569771,1439588054,a88975255d6476a5ca0b5580ca85a4b0d58a0774
a88975255d6476a5ca0b5580ca85a4b0d58a0774,a8897525,Update SQL query generation to handle mainspace and other null params,"Update SQL query generation to handle mainspace and other null params

This patch updates the generation of SQL query parameters to be passed
to the content provider by generating primaryKeySelection and
PrimaryKeySelectionArgs values based on the properties of a specific
object, handling null values for namespace (or any other field)
appropriately.

This eliminates the problems of duplicate history and saved page entries,
and allows deleting history and saved pages entries one at a time whether
the underlying pages are in mainspace (i.e., have a NULL value stored as
their namespace) or otherwise.

Bug: T102293 T105471 T105472 T107842
Change-Id: Ie715baefae7b76fb488e0910be5fcf4ad4593b4c
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1439476530,1439587415,bf8d268a4ef363bdffb148021657854b2c613181
bf8d268a4ef363bdffb148021657854b2c613181,bf8d268a,"Merge ""Speed up tab animation.""","Merge ""Speed up tab animation.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1439578230,1439578230,"48cd0badd4e69feabf6f7f0f328ebac5efdcd232,2c0ed1d17ac29dc72e6ce0db4fa3893649380ed0"
2c0ed1d17ac29dc72e6ce0db4fa3893649380ed0,2c0ed1d1,Speed up tab animation.,"Speed up tab animation.

This changes the animation time from ""medium"" to ""short"", making it more
consistent with other apps that have similar interactions.

Change-Id: I4baae900daaccb3dbcccb67ef056c7fabc6feacf
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1439571458,1439571458,7662379c6dce0882732ed4ecf4814cc6235f747a
48cd0badd4e69feabf6f7f0f328ebac5efdcd232,48cd0bad,"Hygiene: use repo keystore for debug, dev, & alpha","Hygiene: use repo keystore for debug, dev, & alpha

* Add a public keystore and properties to repo.

  The name ""repo"" is used to avoid confusion with build flavors, build
  types, and key types. i.e., the repo keystore is applicable to more
  than the dev flavor, so don't call it ""dev"", more than the debug build
  type, so don't call it ""debug"", and like any keystore, contains both
  public and private keys so don't call it ""public"".

  Properties could be hardcoded in Groovy, but a properties file allows
  for homogeneous handling of both repo and prod signing configurations.

* Change signing configurations:

  * Override signingConfigs.debug to use repo. It is a little confusing
    to call the repo signing configuration ""debug"" but we don't want the
    implicit debug configuration leaking in. The alternative is to have
    a dummy or redundant debig configuration, each of which is unhappy.

  * Always use repo keystore for debug build types, and dev and alpha
    flavors. Always use prod keystore for all other release flavors. For
    dev and alpha builds, that means signatures are tied to package
    names not build types. e.g., you can install a dev release build on
    top of a dev debug build without uninstalling.

    A dev keystore is recommend by Jake Wharton[0]. Using this keystore
    for alpha builds as well keeps security concerns out of our Jenkins
    alpha job.

    [0] https://twitter.com/jakewharton/status/554242089236828160

  * Dev and alpha builds have a new signature. Previously distributed
    dev and alpha builds must be uninstalled which will cause data loss.

  * Everyone can install each others' apps without uninstalling.

* Use lowercase.dot instead of UPPERCASE_SNAKE for keystore pre-dex properties.

  UPPERCASE_SNAKE seems unconventional[0].

  [0] https://android.googlesource.com/platform/build/+/master/tools/buildinfo.sh

TODOs once merged:

  * Send courtesy announcement alerting users that an alpha uninstall is
    necessary.

  * Update locale ~/.sign/signing.properties.

Notes on keystore generation

  # Create a new keystore. Note: some tools guard against usage of
  # keystores without passwords.
  keytool \
    -keystore repo.keystore \
    -keyalg RSA \
    -genkeypair \
    -alias repo \
    -keypass android \
    -storepass android \
    -dname 'CN=Wikimedia Foundation, OU=Mobile, O=Wikimedia Foundation, L=San Francisco, ST=California, C=US' \
    -validity 36524

Notes on keystore validation

  # Convert to intermediate PKCS12.
  keytool \
    -importkeystore \
    -srckeystore repo.keystore \
    -destkeystore repo.p12 \
    -deststoretype PKCS12 \
    -srcstorepass android \
    -storepass android \
    -keypass android

  # Convert to PEM for comparison with known good keys.
  openssl \
    pkcs12 \
    -in repo.p12 \
    -out repo.pem \
    -nodes \
    -passin pass:android

  # Do some diffs against a standard Android debug keystores like
  # Telecine[0] and the release keystore.

  # [0] https://github.com/JakeWharton/Telecine/blob/master/debug.keystore

Notes on signing configuration validation

  # Build all variants.
  ./gradlew -Ppre.dex=false clean assemble

  # Verify APK signature.
  # $1 keystore
  # $2 key alias
  # $3 apk
  verify() {
    jarsigner \
      -verify \
      -strict \
      -sigalg MD5withRSA \
      -digestalg SHA1 \
      -keystore ""$1"" \
      ""$3"" \
      ""$2""
  }
  alias verify-prod='verify prod.keystore prod'
  alias verify-repo='verify repo.keystore repo'

  # Verify all repo variants.
  ls -1 app/build/outputs/apk/{*-debug*,*-dev-*,*-alpha-*} |
  sort -u |
  while IFS= read -r -d $'\n' i; do
    echo ""$i"" &&
    verify-repo ""$i""
  done

  # Verify all prod variants.
  ls -1 app/build/outputs/apk/* |
  grep -Ev 'debug|dev|alpha' |
  while IFS= read -r -d $'\n' i; do
    echo ""$i"" &&
    verify-prod ""$i""
  done

  # Explicitly verify release prod variant.
  verify-prod app/build/outputs/apk/app-prod-release.apk &&
  ! verify-repo app/build/outputs/apk/app-prod-release.apk

  # Be paranoid. Download known good APK and verify.
  scp \
    caesium:/srv/org/wikimedia/releases/mobile/android/wikipedia/stable/wikipedia-2.0.108-releasesprod-2015-08-04.apk \
    . &&
  verify-prod wikipedia-2.0.108-releasesprod-2015-08-04.apk &&
  ! verify-repo wikipedia-2.0.108-releasesprod-2015-08-04.apk

  # Verify app installs and launches devDebyg variant from IDE.

  # Verify IDE respects repo key configuration.
  adb install -r app/build/outputs/apk/app-dev-release.apk

  # Test no prod keystore with dev and alpha debug and release.
  ./gradlew -Ppre.dex=false clean assembleDebug assemble{Dev,Alpha}Release &&
  ls app/build/outputs/apk

Change-Id: I7d562413e9f13be1ea514e47ffb8af94858e47aa
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1439317283,1439569674,7662379c6dce0882732ed4ecf4814cc6235f747a
7662379c6dce0882732ed4ecf4814cc6235f747a,7662379c,"Merge ""Hygiene: remove ""wiki"" from themed styles""","Merge ""Hygiene: remove ""wiki"" from themed styles""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1439557818,1439557818,"5b3742b6f49bbb2db94637f3d67e965d2b459119,ac13b97523d37a05920f424ec861531a7e2e1699"
5b3742b6f49bbb2db94637f3d67e965d2b459119,5b3742b6,Improve design of password entry input.,"Improve design of password entry input.

Created a custom PasswordTextInput component that has a ""show password""
checkbox built into it. The checkbox is actually one of those delightfully
creepy eyeball icons (pulled from the Material Design set) that stares at
you unblinkingly as you type your password.

Change-Id: I2ea1b965e57590aa4d629646a63274ef60cd8b10
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1439344514,1439530874,bb6a94051d9a1566e13bc837dcb401b0b99e73f1
bb6a94051d9a1566e13bc837dcb401b0b99e73f1,bb6a9405,Maintain PageActivity instance across screen rotation.,"Maintain PageActivity instance across screen rotation.

Added android:configChanges flags to PageActivity, so that it doesn't get
destroyed and recreated upon screen rotation. This is infinitely better
than our current arrangement, since we'll no longer need to reload all the
content into the WebView, and the WebView itself adjusts its contents to
screen rotation automatically, preserving scroll position.

Also, simplified the layout of the page title and description in the lead
image container. No longer doing the animation and the fade-in of the
description (it's a bit passé).

Bug: T108951
Change-Id: I0c9d0ec21d0ec327981e9d4e02b9c65cd3c3a871
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1439478029,1439498696,27a9b640b72c409285613d474f0ac3782694a393
27a9b640b72c409285613d474f0ac3782694a393,27a9b640,Add page image background color to item_page_list_entry.xml for night mode,"Add page image background color to item_page_list_entry.xml for night mode

Transparent page images looked bad against the default night mode
background.  This patch gives them a white background like they're
designed for.

Bug: T104102
Change-Id: I210b42bc1b4c433721bdef0e5d19df2467f6f48b
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1439237752,1439419028,aca6ca981dca276c0f57d17768085bde5583c052
aca6ca981dca276c0f57d17768085bde5583c052,aca6ca98,"Add copy & share link, save page, to context menu","Add copy & share link, save page, to context menu

* Add new ContextMenuListener interface methods, onCopyLink(),
  onShareLink(), and onSavePage().
* Extract common ContextMenuListener implementation to
  PageActivityLongPressHandler.
* Extract save page completion message to method,
  PageActivity.showPageSavedMessage().
* Add ClipboardUtil for abstracting platforming differences.
* Add SearchResultsFragment.getPageActivity() method where previously
  there were numerous casts.
* Replace redundant PlainPasteEditText.context member variable with
  calls to getContext().
* Create strings-no-translate.xml as a workaround for TWN integration of
  strings not to be translated. In the future, automatic detection of
  string references and the translatable attribute[0] may replace the
  current need for this file.
* Minimal and minor miscellaneous clean up.

Add copy link to clipboard, share link with another app, and save page
for later to the long press context menu.

Note: save pages does not preserve lead images.

[0] http://tools.android.com/recent/non-translatablestrings

Bug: T102541 T107478
Change-Id: I8b648e4221748dc27454e28a823330c1874a639d
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1438811839,1439418640,a79acb638a79178323f04d9b618aa9dfbddf6118
a79acb638a79178323f04d9b618aa9dfbddf6118,a79acb63,Apply correct Material background to some buttons.,"Apply correct Material background to some buttons.

There's a predefined background attribute that already happens to exist in
the library, which we can apply to our own buttons, which will make their
background behave just like the system buttons in the Toolbar.

I went ahead and applied this background to the Language selection button,
as well as the Clear History button, and the secondary action in Nearby
items. There may be additional candidates to receive this background, but
this should do for now.

Bug: T108381
Change-Id: I0e4366b0fba115e0ea5751797c4c9120a3035658
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1439345445,1439390347,17b6cd56def9ef19433d0168dcfdcbf40aa2b816
17b6cd56def9ef19433d0168dcfdcbf40aa2b816,17b6cd56,"Merge ""Improve marshalling of PageProperties when saving state.""","Merge ""Improve marshalling of PageProperties when saving state.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1439243092,1439243092,"c2b99d892070009fbd66904c43aa61d57f512e5e,75e9a70a5cc05b0b46c87ed1c92bfa47e5d1e75d"
75e9a70a5cc05b0b46c87ed1c92bfa47e5d1e75d,75e9a70a,Improve marshalling of PageProperties when saving state.,"Improve marshalling of PageProperties when saving state.

One of the latest crash reports relating to Gson unmarshalling has yielded
something revealing: the PageProperties object contains a private instance
of a SimpleDateFormat object which, when marshalled, takes up a *lot* of
unnecessary space, and may possibly be contributing to errors when it's
unmarshalled.

This patch removes the SimpleDateFormat object from PageProperties, and
moves it to WikipediaApp (into a method that returns a new instance of
SimpleDateFormat for every call, since SimpleDateFormat is not
thread-safe), making it accessible to any PageProperties instance, and
helps to optimize the marshalling of the app's tab/backstack state.

Bug: T108617
Change-Id: I9c16b554cbfa84213abd892232ac086a1f469e98
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1439234522,1439237203,4fd66a2784ae1e4da31f39ec52ea6da23091b030
c2b99d892070009fbd66904c43aa61d57f512e5e,c2b99d89,"Merge ""Improve duration/presentation of error Snackbars.""","Merge ""Improve duration/presentation of error Snackbars.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1439235747,1439235747,"f6474aed95bacb4f9828aa6c5c386511ba06fd63,12cafcbd8071c8f4c72fc022ba6d427b059aa450"
12cafcbd8071c8f4c72fc022ba6d427b059aa450,12cafcbd,Improve duration/presentation of error Snackbars.,"Improve duration/presentation of error Snackbars.

- Set the maximum number of lines in a Snackbar to 5, instead of the
  default 2.
- Set the default duration of error Snackbars to 5 seconds, instead of
  LENGTH_LONG, which is 2.5 seconds. (This also applies to the Wikipedia
  Zero banner)
- When handling errors during account creation, one case permits
  displaying the actual error string returned by the server. Since this
  string can contain HTML, we'll now pass it through Html.fromHtml()
  before showing it inside a Snackbar. This isn't ideal, since it removes
  any presentational HTML that might be present in certain errors, but
  it's better than showing actual HTML tags as part of the error message.

Bug: T107082
Change-Id: Ie0e2ce73787d0ff6ff650e5e6f5b7d8cf79de896
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1439213587,1439235243,4fd66a2784ae1e4da31f39ec52ea6da23091b030
f6474aed95bacb4f9828aa6c5c386511ba06fd63,f6474aed,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I9a9cf9a5ac3b2e1a7822d9700a638c2d91004782
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438982077,1438982077,fa442f5f480ca0b4f6f64d9709d9e5f518b4bca7
fa442f5f480ca0b4f6f64d9709d9e5f518b4bca7,fa442f5f,"Merge ""Halve RGB values of background colors in tables in night mode""","Merge ""Halve RGB values of background colors in tables in night mode""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438980300,1438980300,"61ff0fc2184f99215513fce6953f17bd70fd3600,fbf5448a25319e7a3534a9a07c04c89420aeab22"
61ff0fc2184f99215513fce6953f17bd70fd3600,61ff0fc2,"Merge ""Hygiene: Fix PageFragment MenuItem variable names""","Merge ""Hygiene: Fix PageFragment MenuItem variable names""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438979912,1438979912,"b06173c67a1215bae25bddb4ad63301e631b1c00,8596c0594904d8c72a0eea9db5490e56f7ae1a6f"
b06173c67a1215bae25bddb4ad63301e631b1c00,b06173c6,Set generous CI test device timeout,"Set generous CI test device timeout

CI is slower than a laptop and needs a lot of wiggle room on ADB
commands. This patch changes the DDM time out preference as described
here[0]. It is better to make this change using android.adbOptions[1]
but it doesn't seem to work[2].

[0] https://code.google.com/p/android/issues/detail?id=104305#c12
[1] https://code.google.com/p/android/issues/detail?id=104305#c8
[2] https://integration.wikimedia.org/ci/job/test-T62720-android-emulator/71/console

Bug: T107336
Change-Id: I373c049c2babc31e2702d79bfa3fe027a2a284a9
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1438901050,1438979741,a769a365c6b618d51370781d1b163303a333bca3
fbf5448a25319e7a3534a9a07c04c89420aeab22,fbf5448a,Halve RGB values of background colors in tables in night mode,"Halve RGB values of background colors in tables in night mode

Most colors are inverted in night mode.  However, the background colors
of some elements in tables  look strange when given this treatment, so
it was earlier decided to simply strip them as a temporary fix.  This
resulted, however, in a loss of useful information (see, e.g., the diagram
in the quick facts box for 'National Assembly of Pakistan').

This patch halves the RGB values of these elements rather than simply
stripping the colors in order to preserve necessary information.

Bug: T104101
Change-Id: I567089abf4d39ed1db562d51bd419f26d97d429d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1438797817,1438976124,76c6444cfb64e872b8b15688a8999d96af84a406
ac13b97523d37a05920f424ec861531a7e2e1699,ac13b975,"Hygiene: remove ""wiki"" from themed styles","Hygiene: remove ""wiki"" from themed styles

* Remove ""wiki"" from themed styles and their filenames.

No functional change. Remove needless ""wiki"" specifier in theme names.
In a subsequent patch, ""Theme"" will be renamed to ""AppTheme"". This would
alter style inheritance and require more than patch sized change and so
does not appear herein.

Change-Id: I2852dbd4f7c8b9ce669d4d44a448cf1298dcd8c7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438918305,1438918305,4fd66a2784ae1e4da31f39ec52ea6da23091b030
8596c0594904d8c72a0eea9db5490e56f7ae1a6f,8596c059,Hygiene: Fix PageFragment MenuItem variable names,"Hygiene: Fix PageFragment MenuItem variable names

They're menu items, not menus.

Change-Id: Idf8feaa06e08c30c3c8ea0cae1fc2c8e0ce3df10
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1438900504,1438904076,4fd66a2784ae1e4da31f39ec52ea6da23091b030
a769a365c6b618d51370781d1b163303a333bca3,a769a365,Fix test case runtime dependencies,"Fix test case runtime dependencies

NearbyUnitTests depends on Android Resources which requires Context. The
test was previously just a TestCase. This patch changes the superclass
to AndroidTestCase which is described as:

  ""Extend this if you need to access Resources or other things that
   depend on Activity Context.""

Change-Id: I476b9aaf1b133d79724394f0587969fd89924d31
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438900168,1438900690,4fd66a2784ae1e4da31f39ec52ea6da23091b030
4fd66a2784ae1e4da31f39ec52ea6da23091b030,4fd66a27,"Merge ""Hide the ""select all"" and ""web search"" CAB menu items""","Merge ""Hide the ""select all"" and ""web search"" CAB menu items""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438893079,1438893079,"4288244d644f232df4ab2818db43bc093d3230d0,5b14d649fc04f3a4d765bdee20f938427b79ae24"
4288244d644f232df4ab2818db43bc093d3230d0,4288244d,"Merge ""Fix search icon color in find-in-page.""","Merge ""Fix search icon color in find-in-page.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438869870,1438869870,"a4cac1fd3d07f7c717efe4abb1202dcec845b374,a291ced9c15610b633caf15f85ac08ac88584915"
5b14d649fc04f3a4d765bdee20f938427b79ae24,5b14d649,"Hide the ""select all"" and ""web search"" CAB menu items","Hide the ""select all"" and ""web search"" CAB menu items

...since we've determined these aren't useful in the context of our app.

However, we'll still leave them enabled to allow people to access them
by keyboard shortcut if this is possible and they want to do so.

Bug: T103948
Change-Id: Id7fae3a7cf732497845da78dcff1b54eccf28298
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1438791457,1438869271,76c6444cfb64e872b8b15688a8999d96af84a406
a4cac1fd3d07f7c717efe4abb1202dcec845b374,a4cac1fd,"Merge ""Add crash button to dev settings""","Merge ""Add crash button to dev settings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438865782,1438865782,"9d55fd5eabeee97d2cac6c92dc8ca2b723585776,b179c28fbd0f939aa2b34ed1a87a1a72010043e9"
a291ced9c15610b633caf15f85ac08ac88584915,a291ced9,Fix search icon color in find-in-page.,"Fix search icon color in find-in-page.

In API <20, the icon was appearing black, instead of white.
This is because an incorrect style attribute was being set.

Change-Id: I6c6c5328cce775881bbd433b9d0d9122e19eba83
",,,,Dmitry Brant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438810706,1438823693,76c6444cfb64e872b8b15688a8999d96af84a406
9d55fd5eabeee97d2cac6c92dc8ca2b723585776,9d55fd5e,"Merge ""Fix duplicate history entries when loading page from cache.""","Merge ""Fix duplicate history entries when loading page from cache.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438810182,1438810182,"743bd62272c37777a1824e0967f1cde87a72b3db,bbf6621429fa7c668487e72db309257ec17f8c4d"
b179c28fbd0f939aa2b34ed1a87a1a72010043e9,b179c28f,Add crash button to dev settings,"Add crash button to dev settings

Add button for intentionally crashing the app to the developer settings
screen. This button is used to test the crash handler.

Change-Id: I00b99a9b724acfe2d828b09a2e1e55f22886184f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438644084,1438798635,76c6444cfb64e872b8b15688a8999d96af84a406
bbf6621429fa7c668487e72db309257ec17f8c4d,bbf66214,Fix duplicate history entries when loading page from cache.,"Fix duplicate history entries when loading page from cache.

When loading a page from cache, we were forgetting to update our
HistoryEntry to reflect the page's normalized title, as recorded in the
Page object.

Bug: T108031
Change-Id: I443b17e149f2d42c1219904a15330fe7a06f75e9
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438786925,1438786970,76c6444cfb64e872b8b15688a8999d96af84a406
743bd62272c37777a1824e0967f1cde87a72b3db,743bd622,Migrate persistence helpers to use column name rather than column index,"Migrate persistence helpers to use column name rather than column index

Persistence helpers rely directly on column indices. This has caused some
nasty bugs, and represents poor abstraction. This patch migrates all remaining
persistence helpers to using column names rather than column indices, which
should reduce the future potential for bugs.

Bug: T107783
Change-Id: I55583e3ccdb88ed03442e2b36f6eb4b9b95e5ac3
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1438659792,1438747610,76c6444cfb64e872b8b15688a8999d96af84a406
76c6444cfb64e872b8b15688a8999d96af84a406,76c6444c,Hygiene: Use standard Gradle folder structure,"Hygiene: Use standard Gradle folder structure

It's probably a good idea to start with a fresh git clone of this repo.
(Don't forget to set git user and run git review -s)

* wikipedia -> app
** Rename wikipedia folder to app
** Update value in settings.gradle
** Update app/build.gradle; also remove the sourceSet overrides
The remaining block in sourceSet was originally from
http://tools.android.com/tech-docs/new-build-system/migrating-from-intellij-projects
I don't think we ever used that.

* Other changes:
cd app
mv assets src/main
mv AndroidManifest.xml src/main
mv res src/main

* Updated www/Gruntfile.js and .jshintignore to adjust for changes in assets folder
* Updated scripts to adjust for changes in assets folder and new location of app build.gradle
* Updated path to AndroidManifest in robolectric.properties

Change-Id: I60edfa89b9934c01087e716c0ed109a55de94bba
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1438661613,1438723105,1a2fc0f329e379f1f388707207dc3aed173783d1
1a2fc0f329e379f1f388707207dc3aed173783d1,1a2fc0f3,Bump versionCode,"Bump versionCode

Change-Id: I800b97fb10e67d93ebae761b091a8f2aa2a53199
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438710369,1438710369,4768892ac29166b20d3e711f19711f3c444487c7
4768892ac29166b20d3e711f19711f3c444487c7,4768892a,"Merge ""Hygiene: remove unused method""","Merge ""Hygiene: remove unused method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438710322,1438710322,"ede29b433bbf204dd3537f537f4c77838c07b0bd,49c12af214509b40d7726d009f9c3d87e5c8bf17"
ede29b433bbf204dd3537f537f4c77838c07b0bd,ede29b43,Hygiene: Remove unused member var and resource ID,"Hygiene: Remove unused member var and resource ID

Remove unused class member variable and layout resource identifier.

Change-Id: Ia4a67da3675194d01b5bffac958f533724fcbef1
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1438707376,1438708024,9e97fe2ce4e022f6ee2b1e768b7f22f17f07fee0
49c12af214509b40d7726d009f9c3d87e5c8bf17,49c12af2,Hygiene: remove unused method,"Hygiene: remove unused method

Change-Id: I21074be272e5378e6a507a736d021ec3d6a72f1a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438707548,1438707548,8e9fc1f2b501ef07c79024965201479d449ebbf9
9e97fe2ce4e022f6ee2b1e768b7f22f17f07fee0,9e97fe2c,Use standard ContextMenu for long-press actions.,"Use standard ContextMenu for long-press actions.

This patch standardizes the long-press action for our WebView and
ListViews to use a standard ContextMenu (which pops up in the center of
the screen), instead of a custom PopupMenu. This makes it consistent with
other apps that implement long-pressing within a WebView, as well as
significantly simplifies the overall logic. As a bonus, this also makes
long-pressing on links work correctly in ICS.

Bug: T107839
Change-Id: I7a86dd6d1fc934cd4d9f88dede5bfd83d9b1bb5e
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1438694930,1438707492,1ef959975c252704b572ff5908c192aea746cbec
1ef959975c252704b572ff5908c192aea746cbec,1ef95997,"Merge ""Show ""Display password"" check box on login screen""","Merge ""Show ""Display password"" check box on login screen""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438707329,1438707329,"8e9fc1f2b501ef07c79024965201479d449ebbf9,5a56101cc0eaf810e69e4cb786d243fe2ef26fb2"
8e9fc1f2b501ef07c79024965201479d449ebbf9,8e9fc1f2,"Merge ""Catch Gson unmarshalling errors and report them""","Merge ""Catch Gson unmarshalling errors and report them""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438707113,1438707113,"a9ac4d73623cd54fcb55824b3c6dad9dd2f256dc,b8e562a51e6dd876a90c4bac7787f2a79ad9bab9"
b8e562a51e6dd876a90c4bac7787f2a79ad9bab9,b8e562a5,Catch Gson unmarshalling errors and report them,"Catch Gson unmarshalling errors and report them

- Catch errors during tab unmarshalling and report them. For non-prod
  builds, the user is prompted via ACRA. For prod builds, exceptions are
  printed to logcat.
- Light clean up of Gson classes.

Gson can throw more than JsonSyntaxException. This patch adds a safety
mechanism for catching any Exception produce during unmarshalling of
tabs and reports it.

Change-Id: I06bf864e8e4dbd9d9c4ff4bc725edd81274ec120
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438636231,1438705130,d6db39f84c7ebccac43d00e66bb46c6bbd493f27
a9ac4d73623cd54fcb55824b3c6dad9dd2f256dc,a9ac4d73,Don't open interlanguage pages in new tab.,"Don't open interlanguage pages in new tab.

In my previous patch, I incorrectly made PageActivity open pages in a new
tab that came from the ACTION_PAGE_FOR_TITLE intent. This includes
interlanguage links, file page links invoked from GalleryActivity, and
EditActivity results.

This patch reverts that change, and corrects the behavior.

Bug: T107841
Change-Id: Ic93dd78f2f21d4a9d2d3c1e27667dc02528e1cf0
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438695889,1438695889,d6db39f84c7ebccac43d00e66bb46c6bbd493f27
5a56101cc0eaf810e69e4cb786d243fe2ef26fb2,5a56101c,"Show ""Display password"" check box on login screen","Show ""Display password"" check box on login screen

If you make a mistake when typing in your password, it's nice to have a ""Show
password"" check box so you don't have to retype your entire password (which
would be quite the inconvenience on a mobile device if you have a long
password). This patch implements that, and it was super simple to do due to a
provided convenience method in Utils! :-)

Bug: T99680
Change-Id: I40d1e7e91a641308f2066408742288373c5f194e
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1438661622,1438661830,3eec959922d7047f5de6e743a1021fe501c892fc
d6db39f84c7ebccac43d00e66bb46c6bbd493f27,d6db39f8,Update gitignore to accommodate memory profiling dumps.,"Update gitignore to accommodate memory profiling dumps.

The updated Android Studio saves HPROF dumps and allocation traces to a
directory called /captures, which should not be relevant for git.

Change-Id: Id752da849bda223ef6de535d2fd393d41fdbf59c
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438646213,1438646213,3eec959922d7047f5de6e743a1021fe501c892fc
3eec959922d7047f5de6e743a1021fe501c892fc,3eec9599,Bump versionCode,"Bump versionCode

Change-Id: I25174ee43a9aaabdbaa6f24a522c88880d199ccb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438626602,1438626602,99e423e5f402abad1f4d7e40260184380c9b9e73
99e423e5f402abad1f4d7e40260184380c9b9e73,99e423e5,"Merge ""Add event logging funnel for navigation menu interaction""","Merge ""Add event logging funnel for navigation menu interaction""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438624891,1438624891,"7aea70b53eac0b5b6e201cd492c2a0a730c23b74,d85eec946ac7110d171b392b79f9232a10038348"
7aea70b53eac0b5b6e201cd492c2a0a730c23b74,7aea70b5,"Merge ""Add support for release tests""","Merge ""Add support for release tests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438624799,1438624799,"2bd35e3f1ae19743dc02b6b4e25f78646c25cc28,56932f32c44e6d1ebd651e237e745ff1189fe0be"
2bd35e3f1ae19743dc02b6b4e25f78646c25cc28,2bd35e3f,"Merge ""Keep Wikipedia enums and constructors""","Merge ""Keep Wikipedia enums and constructors""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438624737,1438624737,"6cde7af03dda6b0019e49e51a2a94eecc55572b6,230e630cfadac76b72239261d11f547aeb579fba"
56932f32c44e6d1ebd651e237e745ff1189fe0be,56932f32,Add support for release tests,"Add support for release tests

* Flip testBuildType to debug or release depending on command line
  tasks. This change adds support for running tests against release
  builds. Previously, it was assumed that connectedAndroidTest*Release
  existed which caused certain tasks to fail to execute, namely the
  tasks task. This change fixes that too.
* Don't suppress LoginTaskTest. @Suppress is currently ProGuarded away
  and we can fix the test by specifying a dummy account. This patch
  accomplishes the latter.
* Publicize package protected method in ImageUrlMap to work around
  ProGuard stripping.

Change-Id: I1dd6e0b01012e28a87967ba7d215114cb83d0099
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1438047842,1438624709,6cde7af03dda6b0019e49e51a2a94eecc55572b6
d85eec946ac7110d171b392b79f9232a10038348,d85eec94,Add event logging funnel for navigation menu interaction,"Add event logging funnel for navigation menu interaction

Adds logging per the schema at
https://meta.wikimedia.org/wiki/Schema:MobileWikiAppNavMenu.

Logs opening of the nav menu, selection of an item, and cancellation,
i.e., the closing of the drawer without any item having been selected.

Bug: T104623
Change-Id: I9cf04cf9c2d258fc8b561d1dca99de40e22c78ab
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1438292810,1438624502,bed9e78008ba712ecdb4dd93e75d81a445fd6361
6cde7af03dda6b0019e49e51a2a94eecc55572b6,6cde7af0,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I471cf88f417dc71371955fb574aae1f7cc30469c
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1438624337,1438624337,bed9e78008ba712ecdb4dd93e75d81a445fd6361
230e630cfadac76b72239261d11f547aeb579fba,230e630c,Keep Wikipedia enums and constructors,"Keep Wikipedia enums and constructors

The previous ProGuard configuration specified that all Wikipedia classes
and interfaces should be kept but said nothing of enums. This patch
includes enums and also specifies that constructors be kept for all
three, as documentation[0] isn't clear if wildcards include constructors.

[0] http://proguard.sourceforge.net/manual/usage.html#classspecification

Change-Id: Ia286b74668a5d07b306772c43e34772709e5e632
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438197872,1438623183,bed9e78008ba712ecdb4dd93e75d81a445fd6361
bed9e78008ba712ecdb4dd93e75d81a445fd6361,bed9e780,Nail down tab behavior for pages coming from intents.,"Nail down tab behavior for pages coming from intents.

Will now open pages sent from intents in a new tab.

Modified Back behavior so that, when the backstack in the current tab is
empty, the activity finishes (instead of animating into the tab list).
This is consistent with other browser apps, and allows correct back
behavior for links coming from an intent (i.e. a single Back press should
take the user back to the previous activity, not the tab list).

Made PageActivity be singleTask. According to the documentation, this is
""not appropriate for most applications""... but we are not most
applications. The rationale for this is that, since we now store our tab
and backstack state in SharedPrefs, it no longer makes sense to allow
multiple instances of PageActivity, since one instance that modifies the
tab state would make it out of sync with the others. And in any case, a
single instance of PageActivity will benefit the user by providing a
single point of access to the user's ""state of research"" in the app.

Bug: T107487
Change-Id: I242748438b73c25fccd99e5bad64db33c697d48e
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438295359,1438620961,163aff7f29118f488481b4fe61e302c8a28e8069
163aff7f29118f488481b4fe61e302c8a28e8069,163aff7f,Hygiene: PageViewFragmentInternal to PageFragment,"Hygiene: PageViewFragmentInternal to PageFragment

Rename PageViewFragmentInternal to PageFragment. PVFI is clumsy and has
unnecessary qualifiers as there is no public facing page Fragment and
the Fragment is not a View.

Change-Id: Ibf0d18ae0f4412c4d0a68e0411bc0ed4220369a5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438494845,1438615072,58b38797d7e88bb0195671706356726a6a6688a0
58b38797d7e88bb0195671706356726a6a6688a0,58b38797,"Merge ""Hygiene: replace frequent casts with method""","Merge ""Hygiene: replace frequent casts with method""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438612870,1438612870,"cfc30d8cc36d69fc7c0653a4de971df93c7f23fd,4cdedd7a3ecf8141d8d2e51ecbd761e0139010a9"
cfc30d8cc36d69fc7c0653a4de971df93c7f23fd,cfc30d8c,Tweak navigation drawer check behavior,"Tweak navigation drawer check behavior

* Call PageViewFragmentInternal.onPageLoadComplete() even when loading
  from cache.
* Make the Random entry uncheckable.
* Update check state on Fragment back stack change.
* Don't check Today if it's not a main page currently shown.
* Add a couple missing annotations.

This patch fixes a couple states where the checked state of the
NavigationDrawer was incorrect.

Change-Id: If0f7cc24bc50c2fc752a349a9b8a179d0de38231
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1438305544,1438612296,c4f2bc4d89852faa58432fa3d02be7ed385f259d
c4f2bc4d89852faa58432fa3d02be7ed385f259d,c4f2bc4d,Don't rely on column indices when fetching history from db.,"Don't rely on column indices when fetching history from db.

This fixes a nasty bug where, because we were relying on hardcoded column
indices, we were sometimes returning a badly-formatted HistoryEntry from
the persistence helper. To wit, the MainPageReadMoreTopicTask was
receiving a HistoryEntry where the Namespace and Timestamp were switched
around, producing page titles that have a namespace of a Unix timestamp!
(e.g. ""1872489743554:Irataba"")

This patch changes the persistence helper to no longer use hardcoded
column indices, and instead looks up the column index by name.

Bug: T107727
Change-Id: Ifb1bd24d615c93a9b32bf85f3a5952efd40b574b
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438567532,1438567532,941655b04d66d000c786a5a29e81e1c63d35fb1b
4cdedd7a3ecf8141d8d2e51ecbd761e0139010a9,4cdedd7a,Hygiene: replace frequent casts with method,"Hygiene: replace frequent casts with method

Replace numerous casts of getActivity() to PageActivity with method,
getPageActivity(), which performs the cast on behalf of the client.

Change-Id: Ie049e0869298d493b6cb1edf55b4a6f4f55c66ad
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438551014,1438551210,941655b04d66d000c786a5a29e81e1c63d35fb1b
941655b04d66d000c786a5a29e81e1c63d35fb1b,941655b0,Remove FAB from recent searches fragment,"Remove FAB from recent searches fragment

Per Vibha, removes the floating action button from the recent searches
fragment and reverts to the previous design.

Bug: T105858
Change-Id: Ia9bb4f64370d71938fb33f8f028bb9727e659470
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1438386191,1438386403,a81270c1a6beaf05eb011eec8a716f89fff3e131
a81270c1a6beaf05eb011eec8a716f89fff3e131,a81270c1,"Merge ""Correctly show Snackbar when logging in and out.""","Merge ""Correctly show Snackbar when logging in and out.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438374789,1438374789,"2d7d128ed8078456392f9d1b1659b516181c8b59,1936e5bc9bb0f3af6d2d86a10920b034949349de"
1936e5bc9bb0f3af6d2d86a10920b034949349de,1936e5bc,Correctly show Snackbar when logging in and out.,"Correctly show Snackbar when logging in and out.

After the NavigationView patch, the app was no longer showing a Snackbar
upon successful login, and showing a Toast (not a Snackbar) upon logging
out.

Bug: T107577
Change-Id: I7c1685431c59fb6a85b490448a4210f108ec9874
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438351482,1438351482,ee1f1325ad1866bf304b6da449f68d5f034c42bd
2d7d128ed8078456392f9d1b1659b516181c8b59,2d7d128e,Improve appearance of swipe-refresh spinner.,"Improve appearance of swipe-refresh spinner.

It looks like the ""LARGE"" style is what's causing it to look all
weird-like in APIs earlier than Lollipop. This makes it nice and
consistent with other apps that use this component.

Change-Id: Ib7f47afe06faff64b2720d2295c9bc0105b977d6
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438308090,1438308090,ee1f1325ad1866bf304b6da449f68d5f034c42bd
ee1f1325ad1866bf304b6da449f68d5f034c42bd,ee1f1325,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ibf0f475500ab97fe5cff965192b94a9885882e08
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1438297887,1438297887,7c2e49f8583d43f1ce4d98c3c3a4a3e3dc8cdd9e
7c2e49f8583d43f1ce4d98c3c3a4a3e3dc8cdd9e,7c2e49f8,Show main page tapping featured page widget,"Show main page tapping featured page widget

Fix regression wherein tapping the featured article widget would not
spawn a new tab.

Change-Id: I1b55ae269befffc84e8d15b8abc9cc1f76509091
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438291257,1438292103,231f78c36b303f69889945e6ab42663a64927380
231f78c36b303f69889945e6ab42663a64927380,231f78c3,Use NavigationView from android.support.design library for nav drawer,"Use NavigationView from android.support.design library for nav drawer

This improves our Material design by using a specialized component for this
function from the most recent version of the Android design library.

As a bonus, it significantly simplifies our nav drawer code.

Bug: T101723
Change-Id: I4bd1b138065bfd0be7f35852881d374393013cb5
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437603013,1438290317,6a0cb04262652533d8bb314045bdab55639341d5
6a0cb04262652533d8bb314045bdab55639341d5,6a0cb042,Add active state to search bar language select button,"Add active state to search bar language select button

Bug: T104855
Change-Id: I7c7cb13e70e4a7bb6ea66b2a00c63a639aa479a6
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1438032922,1438289502,1f33fbb74bffa84c37e043639d28a3344632ea8d
1f33fbb74bffa84c37e043639d28a3344632ea8d,1f33fbb7,Make sure backstack is fully cleared when backing out.,"Make sure backstack is fully cleared when backing out.

Bug: T107458
Change-Id: Iab41d73b7140388d7e79ba4311298d45f217d94c
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438281349,1438287330,7cd7137d6254d95e59f96d7bd147b92e369733a0
7cd7137d6254d95e59f96d7bd147b92e369733a0,7cd7137d,"Open new tabs from ""+"" button in foreground.","Open new tabs from ""+"" button in foreground.

Bug: T107443
Change-Id: I93caece4b92582dce768bf08af55aa98222810ad
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438279935,1438283468,2178af9f273b0e71242ee0ee316f33948199bb57
2178af9f273b0e71242ee0ee316f33948199bb57,2178af9f,Promote Tabs to production.,"Promote Tabs to production.

almost forgot!

Change-Id: Id254296acfe2755c9aa59a1cb6a0069654beb0ea
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1438209450,1438277149,f4c4c73f6a15c9ef22a518d08841079a076a9ab2
f4c4c73f6a15c9ef22a518d08841079a076a9ab2,f4c4c73f,Preserve open tabs,"Preserve open tabs

* Always preserve tabs opened by the user.
* When changing languages, open a new main page tab in the foreground.
* Add Gson library and update ProGuard configuration. The new library
  increases the size of the release APK by ~50KiB.

Initial research in Phab T103954 suggested that the AOSP Browser
implementation was favorable. Upon further research, converting Bundles
to Parcels and writing them to disk is highly discouraged in the Parcel
API documentation:

> Parcel is not a general-purpose serialization mechanism. This class
  (and the corresponding Parcelable API for placing arbitrary objects
  into a Parcel) is designed as a high-performance IPC transport. As
  such, it is not appropriate to place any Parcel data in to persistent
  storage: changes in the underlying implementation of any of the data
  in the Parcel can render older data unreadable.

This made the Browser approach ultimately unfavorable. Alternatives
considered included Java serialization, databases, a custom file format,
and SharedPreferences.

It was unfortunate that Bundles could not be used as a large portion of
app state that is desirable to preserve has mixed responsibilities with
Bundles and Parcelable marshalling, which is encouraged in many official
examples. This influenced the consideration of alternatives. Additional
recording mechanisms leveraged in the app include databases and
SharedPreferences.

Java serialization is a classic choice. However, Effective Java
dedicates a chapter to the dangers and encourages very judicial usage of
the technique:

> Allowing a class's instances to be serialized can be as simple as
  adding the words ""implements Serializable"" to its declaration. Because
  this is so easy to do, there is a common misconception that
  serialization requires little effort on the part of the programmer.
  The truth is far more complex. While the immediate cost to make a
  class serializable can be negligible, the long-term costs are often
  substantial.

  A major cost of implementing Serializable is that it decreases the
  flexibility to change a class's implementation once it has been
  released. When a class implements Serializable, its byte-stream
  encoding (or serialized form) becomes part of its exported API. Once
  you distribute a class widely, you are generally required to support
  the serialized form forever, just as you are required to support all
  other parts of the exported API. If you do not make the effort to
  design a custom serialized form, but merely accept the default, the
  serialized form will forever be tied to the class's original internal
  representation. In other words, if you accept the default serialized
  form, the class's private and package-private instance fields become
  part of its exported API, and the practice of minimizing access to
  fields loses its effectiveness as a tool for information hiding.

In the interest of avoiding such an initial investment, as well as long
term costs, Java serialization was not chosen.

Although a scalable choice, most databases on Android have uncomfortable
lifecycles, even considering wrappers such as SQLiteOpenHelper, that
frequently introduce bugs, especially when used in conjunction with
Activity and Fragment lifecycles.

A custom file format was briefly considered, but it was immediately more
favorable to prefer established formats such as JSON.

SharedPreferences in themselves, support (all?) Java primitives, and
could be used. They're favorable because they supply an asynchronous
write mechanism which may be used from the main thread, i.e., no
worrying lifecycles, and are commonly used in general. However,
marshallers and unmarshallers would still need to be built.

Gson supports reflection based to and fro JSON serialization without the
need to write marshallers and unmarshallers. This is two edged sword in
that there are still the versioning concerns of Serializable, but Gson
supplies annotations to avoid these issues.

Gson used in conjunction with SharedPreferences supplies a full
solution.

Bug: T106709
Change-Id: I5eacc8c07844253974cba6eb479bbcc8c5a2fa4f
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1438125215,1438276943,1df0f1aa17a29285a64ea635123c73bbcb0e43b7
1df0f1aa17a29285a64ea635123c73bbcb0e43b7,1df0f1aa,"Merge ""Fix possible crash in History and Saved Pages.""","Merge ""Fix possible crash in History and Saved Pages.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438269986,1438269986,"f3c2b18fb55db1d4f7339490c0f9b6374a23176f,056cda24e32d9647f30b3a280742555e88b6c492"
056cda24e32d9647f30b3a280742555e88b6c492,056cda24,Fix possible crash in History and Saved Pages.,"Fix possible crash in History and Saved Pages.

Note: this fixes the crash, but doesn't quite answer the question of why
onLoadFinished() is sometimes called with a null Cursor...

Bug: T107355
Change-Id: I6a47bc587a0bebd2ba217511c5bcac03ec8d7600
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438208342,1438208342,1fe3e21d5efaa350e38722f3db15672f56bd99d7
f3c2b18fb55db1d4f7339490c0f9b6374a23176f,f3c2b18f,End the A/B test of morelike vs. full-text.,"End the A/B test of morelike vs. full-text.

Change-Id: I638f0d9b66da4845434601fe3878f1b4808658de
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1438200723,1438201117,1fe3e21d5efaa350e38722f3db15672f56bd99d7
1fe3e21d5efaa350e38722f3db15672f56bd99d7,1fe3e21d,Hygiene: Split off page content loading into two variants,"Hygiene: Split off page content loading into two variants

Currently they are using the same code. Will update in future patch to be different.

Bug: T104714
Change-Id: I3dfa7b0e964bf8cdd9fc93b891debd7a00c82776
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1437667924,1438098729,eff96a5e9b6691fcb122146a380988ece615eec2
eff96a5e9b6691fcb122146a380988ece615eec2,eff96a5e,Hygiene: Add new preference for experimental json page load,"Hygiene: Add new preference for experimental json page load

Renamed the methods for the old HTML preference.
Hide the HTML option in the dev settings to keep it simpler.

Bug: T104714
Change-Id: Ib166e24a63d2ceb7ce064bf7d1dfc683e2f22ef7
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437028119,1438097659,44a170ef59d3ddafd16847b101b84b52b4fc4b47
44a170ef59d3ddafd16847b101b84b52b4fc4b47,44a170ef,Hygiene: Extract calculating lead image width,"Hygiene: Extract calculating lead image width

And make metadata (mobileview) JSON object key more generic
in preparation of a simpler switch between mobileview and mobile content service.

Bug: T104714
Change-Id: I5d71dee14f1e5fa4e15b3a1c1c03c3319523d33a
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437450075,1438097535,c0030fab6b98f04a375819242365777eaae0d983
c0030fab6b98f04a375819242365777eaae0d983,c0030fab,"Merge ""Fix app picker on older devices""","Merge ""Fix app picker on older devices""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438095063,1438095063,"8cfce4586a2bf6d5a6669a01987f7e1432423107,0c64d73a56cce5a6773fe70443a1d0782415ff1a"
8cfce4586a2bf6d5a6669a01987f7e1432423107,8cfce458,Fix NPE in tabbed browsing,"Fix NPE in tabbed browsing

TabsProvider.enterTabMode(Runnable) was meant to handle a null parameter
as evidenced by the no parameter version which invokes it with null.
This patch adds null protection and specifies @Nullable on the
parameter.

No known repro steps at this time.

Change-Id: Ibdc58bf49cc5551fb00a9352a11486dd5390054f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438049693,1438049693,cb3723e4747d93289a970d32fdd6503ea485c147
0c64d73a56cce5a6773fe70443a1d0782415ff1a,0c64d73a,Fix app picker on older devices,"Fix app picker on older devices

- Specify appropriate resource package name.
- Set intent package name.
- Specify some function invariant annotations.

This patch was derived from behavior on actual devices rather than
documentation.

Bug: T106332
Change-Id: Ibbcc0f669f196e8e27c3e828a8305af969429596
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1438038531,1438038531,cb3723e4747d93289a970d32fdd6503ea485c147
cb3723e4747d93289a970d32fdd6503ea485c147,cb3723e4,"Merge ""Hygiene: Change SectionsFetchTask parameters""","Merge ""Hygiene: Change SectionsFetchTask parameters""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1438034283,1438034283,"2e2f97b4c87673e56033b2a02b9a82f41d69ddb5,de66f9edbacfd2792a2ed78ebe32ce5f0d267086"
de66f9edbacfd2792a2ed78ebe32ce5f0d267086,de66f9ed,Hygiene: Change SectionsFetchTask parameters,"Hygiene: Change SectionsFetchTask parameters

The first step of multiple refactors to get to swappable SectionsFetchTasks.
Pass in the app instead of a context.

Renamed pageSequenceNum to currentSequenceNum.
Renamed sequenceNum to startSequenceNum.

Extract method loadPageFromCache().

Change-Id: I227e6c28bcdc5572908022507e8f0a8782b331e6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1437025707,1438032974,1a02767668234b5f0e6e866a13523d81233d63e2
2e2f97b4c87673e56033b2a02b9a82f41d69ddb5,2e2f97b4,"Adjust sampling rate for new funnels, in preparation for production.","Adjust sampling rate for new funnels, in preparation for production.

Did a bit of refactoring of the sample rate logic. Funnels may now
pass their sampling rate directly into the super constructor. The base
Funnel class now does the job of fetching the sample rate from remote
config parameters. The name of the parameter for each funnel is now
derived from the actual name of the schema that the funnel uses, plus the
string ""_rate"". For example, the remote parameter for the SearchFunnel
would be ""MobileWikiAppSearch_rate"".

Since our current remote variables for the funnels either correspond
exactly to the hard-coded value, or don't exist, it's safe to rename them
in our code, and add them to the remote config file as needed.

- Added sample rate of 100 to GalleryFunnel.
- Added sample rate of 100 to AppLanguageSelectFunnel.
- Since LinkPreviewFunnel is still in Beta, gave it a sample rate of 10,
  since the number of these events from the previous Beta is a bit much
  (it wasn't being sampled at all). When this is ready for production,
  will increase it to 100, or even 1000.
- Added sample rate of 100 to SuggestedPagesFunnel.
- Added sample rate of 100 to TabFunnel.
- Added sample rate of 100 to DailyStatsFunnel.

Change-Id: I9b20f161abad228cb551a4e6805207907fbbc06c
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437750165,1438019962,9011539fbf9009aa8585135b16ba4ff515a42409
9011539fbf9009aa8585135b16ba4ff515a42409,9011539f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I20b51be465af87524c1a0aed2f3f3e78bf89c36a
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1438017202,1438019792,7e4ff9bfda058c160f49752576ae4f0367613356
7e4ff9bfda058c160f49752576ae4f0367613356,7e4ff9bf,Hygiene: disable incremental build optimize on CI,"Hygiene: disable incremental build optimize on CI

It is recommended[0] to disable pre-dexing when performing clean builds.
This patch provides a property hook for controlling pre-dex which when
unspecified defaults to disabled when executed from CI and true
otherwise.

An informal analysis was performed with this patch showing a nearly 2x
performance increase for clean builds:

1. <code>time for i in {1..10}; do time JENKINS_HOME=/home/stephen/tmp ./gradlew -q clean assembleDevDebug; done</code>
   4m38s total; 28s average iteration.
2. <code>time for i in {1..10}; do time ./gradlew -q clean assembleDevDebug; done</code>
   2m23s total; 14s average iteration.

Actual benefits when executed on the server may be more modest.

[0] Pro tip #4 from https://plus.google.com/+AndroidDevelopers/posts/ECrb9VQW9XP

Change-Id: I50f757ac2378c029fb47577b03c5dae49a0517c5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1437974365,1437974876,1a02767668234b5f0e6e866a13523d81233d63e2
1a02767668234b5f0e6e866a13523d81233d63e2,1a027676,"Merge ""Remove page section request debug logging""","Merge ""Remove page section request debug logging""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437775008,1437775008,"f433f38b901edc5d47c7f6b53da88aaf30b2f886,4625d2981f9d5264667ae0bb7b03395db952ac81"
f433f38b901edc5d47c7f6b53da88aaf30b2f886,f433f38b,"Merge ""Add long-press menu to Search, Nearby, Disambig, and Read More.""","Merge ""Add long-press menu to Search, Nearby, Disambig, and Read More.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437775004,1437775004,"5834964afd03670c799d39e7fb82cc95a2fa4ad3,182b3eaa276d3c817f796c319b071656386eb472"
182b3eaa276d3c817f796c319b071656386eb472,182b3eaa,"Add long-press menu to Search, Nearby, Disambig, and Read More.","Add long-press menu to Search, Nearby, Disambig, and Read More.

Generalized the PageLongPressHandler to be usable by a ListView in
addition to a generic View. In the case of a ListView, we automatically
give it an OnItemLongClickListener that handles the long-press event.

Because the standard ListView doesn't provide the x-y coordinates of the
long-press event, I created WikiListView where it records the last known
x-y position from monitoring touch events.

Made BottomDialog inherit from AppCompatDialog, and turned some of its
initialization code into styles.

Did NOT add the long-press menu to History and Saved Pages, since they
already have a long-press action (to select multiple items for deletion).
We'll need to think about that part a bit further (future patch).

Bug: T103957
Change-Id: Ibbf613bfb50435f643787430da590621181f1d1b
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437507032,1437774819,7d1b6d6e4c4232076dc6dd35c73c2ae042540748
5834964afd03670c799d39e7fb82cc95a2fa4ad3,5834964a,Increase page refresh spinner offset by 16dp,"Increase page refresh spinner offset by 16dp

Per Google UX review recommendations.

Bug: T105088
Change-Id: Id725672613c3166c7cd0a44cbc81c794048cca22
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1437769634,1437773591,7d1b6d6e4c4232076dc6dd35c73c2ae042540748
4625d2981f9d5264667ae0bb7b03395db952ac81,4625d298,Remove page section request debug logging,"Remove page section request debug logging

Logging each section request is excessive.  I added it while working on
something a while back, but it doesn't seem particularly useful.

Let's remove it.

Change-Id: Ie4e2ab316fbeacf6cd543b0b3a9052167835a2f1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1437768235,1437773382,7d1b6d6e4c4232076dc6dd35c73c2ae042540748
7d1b6d6e4c4232076dc6dd35c73c2ae042540748,7d1b6d6e,Fix possible crash involving the Share tooltip.,"Fix possible crash involving the Share tooltip.

This only seems to happen in 4.2.2, where it's possible that the system
returns null when we request the View for an ActionMode menu item.

Also removed an unnecessary parameter from showShareToolTip().

Bug: T106679
Change-Id: I8fd7cc1c0a7348b148a58cce838f207930e4da0a
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1437744890,1437745229,2e95f9671c768d17f10ac3f0a51930b965389d3e
2e95f9671c768d17f10ac3f0a51930b965389d3e,2e95f967,Replace Toast and Crouton with Snackbar.,"Replace Toast and Crouton with Snackbar.

Unified the display of errors and warnings using Snackbar in place of
Toast and/or Crouton, while utilizing the new methods for converting
Throwables to plain strings.

Turned the Wikipedia Zero banner from a Crouton into a Snackbar. Was able
to keep the exact same formatting as the Crouton implementation, except
the banner now pops up from the bottom, instead of the top. This is the
only change that the Partnership team will need to approve.

Note: this will need a LOT of testing.

Bug: T102548

Change-Id: I4314a8d219a90415636cfaca867152b9251e551d
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1437150380,1437686196,4857ae381570a30358cf1d2cfc94d035e19a8536
4857ae381570a30358cf1d2cfc94d035e19a8536,4857ae38,Make new tabs appear behind the current tab.,"Make new tabs appear behind the current tab.

Bug: T106707
Change-Id: I35ffd6647d4a2917b968ab244f28674e096a3b4b
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437680409,1437684061,cb56d27556959ec32e63eadc7d77aeae760ca1a9
cb56d27556959ec32e63eadc7d77aeae760ca1a9,cb56d275,Add neutral background splash screen,"Add neutral background splash screen

Dark mode users do not want to be blinded during app launch by a light
themed Activity. Unfortunately, Activity.setTheme() and
getWindow().setBackgroundDrawable() don't take effect soon enough. I can
find no other mechanism for changing the Activity theme dynamically.
This is a workaround patch that changes the launch screen theme to be a
neutral grey with a big W in it. The W keeps things interesting and
makes a promise to the user that good things come to those who wait.

Bug: T106392
Change-Id: I1539405fcf2ab097516e13ef38a6301bec58b77e
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1437594900,1437683034,516fcf415bcc6a507b3c6b4d890d40fe42c5cee8
516fcf415bcc6a507b3c6b4d890d40fe42c5cee8,516fcf41,"Merge ""Tweak the behavior of floating ToC button.""","Merge ""Tweak the behavior of floating ToC button.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437680747,1437680747,"892017e03eab71f13906636dede29af23221c605,f81ed92d591cf9ad62e1e564b7a7fd8c88031db9"
892017e03eab71f13906636dede29af23221c605,892017e0,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I23e2650a19a3cd98831beab5a243e63e7ea6ff1b
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1437671165,1437671165,5de219893c25d63bcaa81948b95682416214c06e
f81ed92d591cf9ad62e1e564b7a7fd8c88031db9,f81ed92d,Tweak the behavior of floating ToC button.,"Tweak the behavior of floating ToC button.

So now, the button works like this:

- When displaying the page for the first time (or whenever you're at the
  top of the page), the ToC button is always shown.
- When scrolling away from the top, any time the scrolling ends, the button
  disappears after a 2s delay.
- The button reappears only when you continually scroll with a certain
  velocity. (If you scroll at a normal reading speed, the button should
  not appear)

Change-Id: Iba055476a3f8b49683a6e1d80bc630906b023282
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1437535128,1437665627,5de219893c25d63bcaa81948b95682416214c06e
5de219893c25d63bcaa81948b95682416214c06e,5de21989,Use TextInputLayout in History and Saved Pages.,"Use TextInputLayout in History and Saved Pages.

They fixed the bug in the Design Support library that was incorrectly
hiding the hint text.

Change-Id: I17b1e7e1ba690dceb4a2138475c34ae47079373a
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1437513816,1437513816,e48ade9061033fe65295ec8586b3189c14b68418
e48ade9061033fe65295ec8586b3189c14b68418,e48ade90,Remove experimental page load checkbox from theme chooser.,"Remove experimental page load checkbox from theme chooser.

...since it's now part of Developer Settings.

Change-Id: I94d5117c6bd7451ae37246c854a7001a44119dce
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437427058,1437429130,4db1d360bbf47471555d70725daaf987eea4827d
4db1d360bbf47471555d70725daaf987eea4827d,4db1d360,Use WikiErrorView for displaying page load errors.,"Use WikiErrorView for displaying page load errors.

- Greatly simplified error logic in PageViewFragmentInternal, since a lot
  of it is now handled in java-mwapi.
- Removed SectionsFetchException.
- Removed duplicate exception parsing function from Utils.

Change-Id: If104cc5f3675b6bdb2a755d49b7cef057d3a0e2e
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437188481,1437428410,d3f2ebf5e9d88af27a119dae940a72fe67d4f8fa
d3f2ebf5e9d88af27a119dae940a72fe67d4f8fa,d3f2ebf5,Bump versionCode,"Bump versionCode

Change-Id: I57738a25e7c777a8bbe030c92df014c69c8e092a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1437169735,1437414690,017544e8ac13a5a6f05dbe06089b41dd3b2f4ecc
017544e8ac13a5a6f05dbe06089b41dd3b2f4ecc,017544e8,"Merge ""Refine design of search bar language selection button""","Merge ""Refine design of search bar language selection button""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437414438,1437414438,"8f6ba97197d1b80639931ff4265a7f67c2ca2052,a67d52fd0543830afb4734f0403953525aaca93e"
8f6ba97197d1b80639931ff4265a7f67c2ca2052,8f6ba971,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I51f2d772dcf08d8e695266a673d6916216d09f82
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1437412764,1437412764,e50a018b3364445bd2399a2ec1828dd3bdd14e93
e50a018b3364445bd2399a2ec1828dd3bdd14e93,e50a018b,Fix scrolling of floating ToC button in Gingerbread.,"Fix scrolling of floating ToC button in Gingerbread.

It seems we were anchoring on the wrong view inside the CoordinatorLayout.
Also updated to the latest Appcompat library.

Bug: T106197
Change-Id: Ia7678a544c38a778d96fb29ea3d277abaf39a76f
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1437275851,1437408736,b5e2421fb16f5de842b0515690f82a66022a5a86
a67d52fd0543830afb4734f0403953525aaca93e,a67d52fd,Refine design of search bar language selection button,"Refine design of search bar language selection button

Adjust size, make background solid grey, enlarge clickable area.

Bug: T73136
Change-Id: Ic016c5d67130d1636a5948df0bfc85709c4aef70
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1436821078,1437261109,b5e2421fb16f5de842b0515690f82a66022a5a86
b5e2421fb16f5de842b0515690f82a66022a5a86,b5e2421f,Share A Fact onboarding design tweaks,"Share A Fact onboarding design tweaks

- Update Share A Fact onboaring tip icons.
- Remove share icon onboarding animation.

SVGs supplied by design, recut at 48px square and centered.

Bug: T89985
Change-Id: Ic723ed6e94f234553e14d8544eaacc07076cd79c
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436827209,1437168773,c43eff51ed53c29327bd26c30b9bf16d02401efd
c43eff51ed53c29327bd26c30b9bf16d02401efd,c43eff51,Upgrade java-mwapi to v1.3.2,"Upgrade java-mwapi to v1.3.2

Upgrade java-mwapi to version 1.3.2. This new version should be
functionally identical to the previous. This upgrade ensures the latest
changes to the build scripts cause no harm.

Change-Id: I7348a2908d590471f1872c8eaaed33a0e630372e
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1437165814,1437167405,866528952a1a3c46c35fe490d12f2c2e8221ea7a
866528952a1a3c46c35fe490d12f2c2e8221ea7a,86652895,"Merge ""Fix edit pencil position when switching from RTL to LTR.""","Merge ""Fix edit pencil position when switching from RTL to LTR.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437167276,1437167276,"df429e452185327bdc554218355a014f9d4c71c4,0f77368cca8ac2d3b2626c866f80235a7bc1f5a0"
df429e452185327bdc554218355a014f9d4c71c4,df429e45,"Merge ""Fix build script path conversion""","Merge ""Fix build script path conversion""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437167189,1437167189,"7f5faa092f73c8678d5f5cc04369bf0a8aee9cd5,7a6dded90dcec984a043f14b2f487933e3db4d59"
0f77368cca8ac2d3b2626c866f80235a7bc1f5a0,0f77368c,Fix edit pencil position when switching from RTL to LTR.,"Fix edit pencil position when switching from RTL to LTR.

The content-rtl and content-ltr classes weren't being cleared prior to
setting the new class, causing the WebView to become confused.

Also, removed unnecessary call to setupDirectionality in our
PageLoadStrategy, since it already gets called in
loadPageOnWebViewReady().

Bug: T102046
Change-Id: I3d5c5e818fc304e94ef9dda4dcdf224cb29a9c98
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437146495,1437167183,7f5faa092f73c8678d5f5cc04369bf0a8aee9cd5
7f5faa092f73c8678d5f5cc04369bf0a8aee9cd5,7f5faa09,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I7779de063ff4ebd380e48b123f004a38342b4e60
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1437166164,1437166832,c98bb634e85614c78cbde0a1b682d95cf94a2ecc
7a6dded90dcec984a043f14b2f487933e3db4d59,7a6dded9,Fix build script path conversion,"Fix build script path conversion

* Fix build script path conversion bugs:
  ** Check module hierarchy length before indexing.
  ** Escape the file separator string.

Change-Id: I4fa03f09ae258c18c255c45897e84b4f72dd39b8
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1437154054,1437159049,c98bb634e85614c78cbde0a1b682d95cf94a2ecc
c98bb634e85614c78cbde0a1b682d95cf94a2ecc,c98bb634,"Merge ""Hygiene: remove some unused images""","Merge ""Hygiene: remove some unused images""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437152962,1437152962,"7c3907b3e8deeacfe9cb0e1b9e1d9dc27cb9e44b,3aa0032bbbe0e629db65229ffe3c51ea0a22f9d6"
7c3907b3e8deeacfe9cb0e1b9e1d9dc27cb9e44b,7c3907b3,Hygiene: upgrade Gradle to v2.5,"Hygiene: upgrade Gradle to v2.5

Change-Id: I04a78380eda6c12f484d09d9eb5e6699cc3303ec
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1437151604,1437151604,ad2db53bf5d89381814b521e1bd1a979cc807982
3aa0032bbbe0e629db65229ffe3c51ea0a22f9d6,3aa0032b,Hygiene: remove some unused images,"Hygiene: remove some unused images

Change-Id: I9dcea09cc7e523592db75011dfe55da30c08d60f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1437151042,1437151099,ad2db53bf5d89381814b521e1bd1a979cc807982
ad2db53bf5d89381814b521e1bd1a979cc807982,ad2db53b,Add test directory to Checkstyle,"Add test directory to Checkstyle

- Add test directory to sources checked.
- Fix violations in test.
- Move suppressions file to config.

Change-Id: I4cc43f7b38f902e357826fcb8bb686ea13b83f2e
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436990789,1437150547,23c3bc4b91e90045d2efef23cfee421b82e7f5a5
23c3bc4b91e90045d2efef23cfee421b82e7f5a5,23c3bc4b,Add fallback json Gradle project,"Add fallback json Gradle project

* Use java-mwapi Gradle project when available. Otherwise, use OSSHR
  module dependency.
* Require JDK7 compilation.

The Wikipedia Android app has transitioned from Maven to Gradle and
it's time for the json library to do the same. It has become too
burdensome to maintain a Maven repo and develop across multiple
projects. This patch replaces the Maven Gradle module dependency with a
Gradle Java project dependency, when present.

Json library dependency patch: https://gerrit.wikimedia.org/r/#/c/223718/

Bug: T105235, T103051
Change-Id: I1ea910bfb1200f37980c46b2d8ae8b51b4cfed90
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436415818,1437150032,826c28221e983adb2307bf02baaf21d35b72e222
826c28221e983adb2307bf02baaf21d35b72e222,826c2822,"Merge ""Standardise ""Could not reach the network"" message""","Merge ""Standardise ""Could not reach the network"" message""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437147506,1437147506,"c00b779d32e8246504d69e046ca29259b710d397,3170eb9b814f6e3e37404392df6931e45ac2bb3b"
3170eb9b814f6e3e37404392df6931e45ac2bb3b,3170eb9b,"Standardise ""Could not reach the network"" message","Standardise ""Could not reach the network"" message

Right now, the user gets different kinds of notifications for network errors.
This patch takes steps towards standardising this by making the ""Random""
button in the left nav use the standardised network error.

Bug: T74371
Change-Id: I9bf2af52d455bd9c2834827b0a07fdf9313ccd37
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1437074470,1437086409,ad0c58dfea0963f99f6cae121a05eb42298b266b
c00b779d32e8246504d69e046ca29259b710d397,c00b779d,Hygiene: Add more logging for SuggestionsTask,"Hygiene: Add more logging for SuggestionsTask

The SuggestionsTaskTests still seem quite flaky.
When I ran them in the debugger they always worked but
not when running the whole test suite normally.
Got only 2 out of expected 3 suggestions.
I'm adding some logging so we can see what the results were.

Change-Id: I33339c69881a4957b4bc4a68122add0cf18a5e77
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1437079898,1437080167,8d836fd0dffe4116064dc7b0216ddb5db883c859
8d836fd0dffe4116064dc7b0216ddb5db883c859,8d836fd0,Fix editing tests.,"Fix editing tests.

Change-Id: I73ca53eeab046e7ddda3d3032813c1e9a0d06f7b
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437067937,1437078039,654cf2264d4ef9c74a13d3323ae854cd763433b5
654cf2264d4ef9c74a13d3323ae854cd763433b5,654cf226,Fix width of share-a-fact dialog contents.,"Fix width of share-a-fact dialog contents.

Here's the problem:
The width of the ""share as..."" buttons is dictated by the width of the
preview image. The issue is that the preview image has a hard-coded width
in absolute pixels (not dp). Therefore, the image might appear larger on a
hdpi screen, or smaller on a xxhdpi screen.  When it appears smaller, it
causes the buttons to shrink, and thereby truncate the text of the
buttons, giving the user the impression that the buttons are identical.

This patch fixes the width and height of the ImageView used for displaying
the preview bitmap, so that it's displayed consistently on all display
densities, and makes the buttons sufficiently wide, as well.

Bug: T99966
Change-Id: Ibdecbfb8bccc31108c9fb8f3879ce6fb59985dca
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1437062947,1437077725,6637c5f2def55db5fc44b1d3b291f6f1eee0d9cf
6637c5f2def55db5fc44b1d3b291f6f1eee0d9cf,6637c5f2,"Merge ""Hygiene: Fix instrumentation tests""","Merge ""Hygiene: Fix instrumentation tests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437074065,1437074065,"5e349c6767b43cd062d2302e74dd098f1a166a7a,ba923f0d6d5eaf72e7cf7e3aa077c98f043c85f0"
5e349c6767b43cd062d2302e74dd098f1a166a7a,5e349c67,"Merge ""Fix share-a-fact behavior where lead image license has no license info""","Merge ""Fix share-a-fact behavior where lead image license has no license info""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437073491,1437073491,"ad0c58dfea0963f99f6cae121a05eb42298b266b,550c112d6a5b9f1e8ca96f937cee3cc166b5ae24"
ad0c58dfea0963f99f6cae121a05eb42298b266b,ad0c58df,"Merge ""Fix users erroneously receiving generic editing-related error messages.""","Merge ""Fix users erroneously receiving generic editing-related error messages.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1437067863,1437067863,"36f465ab82f0e3cde4a855f26b95b449b1ddffe6,57b28089d6629c6369c63c7982292708a62d6671"
57b28089d6629c6369c63c7982292708a62d6671,57b28089,Fix users erroneously receiving generic editing-related error messages.,"Fix users erroneously receiving generic editing-related error messages.

Changes in the API library mean that routine editing issues, such as blocks,
are now handled by throwing ApiExceptions. This caused users to receive
generic messages if they tried to edit while blocked, rather than a message
that told them they're blocked.

This patch updates the error handling by migrating checks for routine editing
issues to the onCatch method to handle them appropriately. Also removes the
EditingException class as it is no longer useful.

Bug: T105930
Change-Id: Id64ee4e34bd3ab168be84a88c8532b74db5e86ab
",,,,Deskana,dgarry@wikimedia.org,dbrant,dbrant@wikimedia.org,1436988498,1437067636,2606f5bf5744fd43c200e4e2f9ca191e6a607226
36f465ab82f0e3cde4a855f26b95b449b1ddffe6,36f465ab,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ib8b1a1f7852fb98667c26fa84819e44cf12fddbc
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1437066603,1437066603,2606f5bf5744fd43c200e4e2f9ca191e6a607226
ba923f0d6d5eaf72e7cf7e3aa077c98f043c85f0,ba923f0d,Hygiene: Fix instrumentation tests,"Hygiene: Fix instrumentation tests

Change-Id: Ic9942b098aeceadc2023def4a70384855f7fd701
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1437064253,1437064253,2606f5bf5744fd43c200e4e2f9ca191e6a607226
2606f5bf5744fd43c200e4e2f9ca191e6a607226,2606f5bf,Use appcompat for AlertDialogs (thereby giving them Material style),"Use appcompat for AlertDialogs (thereby giving them Material style)

Change-Id: Icb02835ffc1084b178d28537c1332b35c7f5e352
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1436988953,1436988953,7caf71565284ec332f4897bfe258a911adc27cf0
550c112d6a5b9f1e8ca96f937cee3cc166b5ae24,550c112d,Fix share-a-fact behavior where lead image license has no license info,"Fix share-a-fact behavior where lead image license has no license info

Currently, in the event license info is unavailable for the lead image, the
share-a-fact card will default to showing the fair use icon.  This isn't the
desired behavior.

After this patch, share-a-fact will treat a situation in which no license info is
available the same as when no lead image exists: the selected (or default) text will
appear against a black background, and a creative commons license covering the card
will be indicated.

Bug: T105726
Change-Id: I65760f1d6cd42cafeec4a4d706d26ba79150afbf
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1436827185,1436984679,9eab1fb5824914b6296e9c779f15a752a9042513
7caf71565284ec332f4897bfe258a911adc27cf0,7caf7156,Tweak appearance of tab list.,"Tweak appearance of tab list.

- Increase the height of tab list items.
- Update the ""add tab"" icon. (flattened ""plus"" sign, instead of layered)

Bug: T104263
Change-Id: I23981b8032fcf3720bf3b9f9102c1da8c31658d5
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1436971102,1436984299,d95a65150f42393df6dc266a9d6165ed8b91ef0b
d95a65150f42393df6dc266a9d6165ed8b91ef0b,d95a6515,Tweak layout of bottom content.,"Tweak layout of bottom content.

- Moved ""open article in browser"" link to the top.
- Fixed showing of last-updated time (it was remaining hidden after having
  browsed the main page).
- Fixed the padding between the items in the bottom content area.

Change-Id: I5970908f1ccb42227392b5b5b4df781c5a16f608
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1436967809,1436983943,8f7624be4893e5cad4a7534fd1e19691378fcc6a
8f7624be4893e5cad4a7534fd1e19691378fcc6a,8f7624be,Tweak appearance of tooltips.,"Tweak appearance of tooltips.

- Make the text-selection tooltip centered.
- Add separate default color for tooltips in light and dark mode.
- Refactored function to display a tooltip with the default color.

Bug: T105820
Change-Id: I81b78804d9d30831005d73e16fec9a5b2d410f65
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1436969397,1436982359,7add63e3e1bd1e1073039ed7d32b2ae24b44b3d5
7add63e3e1bd1e1073039ed7d32b2ae24b44b3d5,7add63e3,Design tweaks for floating action buttons.,"Design tweaks for floating action buttons.

- For the ToC button, added separate colors for light and dark mode.
- For the delete-recent-searches button, made it ""mini"". The color looks
  fine in light and dark mode.

Change-Id: I4a9fd307a90512fb45c6d9aa8d98ff36a031355b
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1436966821,1436982326,f51df4485370ccefc970ad66fd1ee03af50abd02
f51df4485370ccefc970ad66fd1ee03af50abd02,f51df448,Fix issue where lead image becomes white box in dark mode.,"Fix issue where lead image becomes white box in dark mode.

Bug: T104103
Change-Id: I653b2a0277833b24edf6c02583e21c3ffdd83bf0
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1436971453,1436979217,c530fe2644944c4f632f892a09e1749f8ce1391c
c530fe2644944c4f632f892a09e1749f8ce1391c,c530fe26,Fix appearance of Settings activity in dark mode.,"Fix appearance of Settings activity in dark mode.

It had a white background, which made the white text invisible.

Change-Id: Icaaa688105d8451f8a4a760a85483721ea9466ea
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1436965883,1436965883,2d845a393ca25b4d6272dc1f8a48e93912a25c9b
2d845a393ca25b4d6272dc1f8a48e93912a25c9b,2d845a39,Hygiene: reorder dev settings & suppress bad warns,"Hygiene: reorder dev settings & suppress bad warns

- Add A/B feature testing section and reorder developer settings.
- Ignore invalid style usage warnings in developer settings XML.

Change-Id: I11549e298eafae1ae5bd5f745c1421ba5eb1c584
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436937192,1436937192,e8bd25dd4950a643f527070567475f2ffd197646
e8bd25dd4950a643f527070567475f2ffd197646,e8bd25dd,Hygiene: upgrade OkHttp to v2.4.0,"Hygiene: upgrade OkHttp to v2.4.0

Change-Id: If44368a2510481ddf82ad1b9908bbb144d8156aa
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436893046,1436935239,b3d8b017012cd56e8829e9abd51ebf6708215891
b3d8b017012cd56e8829e9abd51ebf6708215891,b3d8b017,Hygiene: add missing @StringRes in PrefsIoUtil,"Hygiene: add missing @StringRes in PrefsIoUtil

Add missing @StringRes annotations throughout PrefsIoUtil and shorten
resource ID parameters to ""id"".

Change-Id: I5b165e63493f6344d3ae7fc1f480dedc7ca52305
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436486678,1436934866,edfb7b5e52a73c867e5ff1845e62e73947bfb1f9
edfb7b5e52a73c867e5ff1845e62e73947bfb1f9,edfb7b5e,Add daily stats funnel,"Add daily stats funnel

- Add event logging up to once a day on page load complete to report
  the app install lifetime in days.
- Add LongPreference and supporting code and refactor IntPreference.
- Fix default IntPreference max digit length for default radix.
- Reorder methods in RecurringTask and refactor to use Prefs.

It is valuable to know the distribution curve of the app installation
retention. A new funnel is made available to report this information up
to once a day. The funnel may later encompass additional reports at the
same frequency.

Bug: T103188
Change-Id: I9dcce02fe19954381521d81cc8ec4378af51bf86
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436481337,1436934770,47d0b2b7390cbd7a28de4166ce345d9e142ff116
47d0b2b7390cbd7a28de4166ce345d9e142ff116,47d0b2b7,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Idd881897a55d829aedb74aa54e6cdc07abc744db
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1436884041,1436884041,9eab1fb5824914b6296e9c779f15a752a9042513
9eab1fb5824914b6296e9c779f15a752a9042513,9eab1fb5,Split Android and iOS edit pencil changes,"Split Android and iOS edit pencil changes

iOS doesn't want all our Android-specific stylings. This change allows
for deviation in the edit pencil.

Depends on MobileApp extension patch: https://gerrit.wikimedia.org/r/#/c/219421/

Change-Id: I6325ac321fa38085db624f9d4f4c722ff2e32af6
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436234227,1436826782,2048206641fe6ec665dddf6f9977dec837bb4b60
2048206641fe6ec665dddf6f9977dec837bb4b60,20482066,Add article URL to share-as-text,"Add article URL to share-as-text

Share-a-fact used to share the article URL when no text was selected; this
is no longer the case since we default to sharing the first paragraph.
Since users commonly obtained the article URL this way, we need to put it
back.

This patch does that.

Additionally, it removes a redundant snippet length check.

Bug: T103951, T104704
Change-Id: I287c7270973ddf0e1fd752fbcef1f18c0a6ba745
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1436376675,1436825093,fc578ff16b8672f6fadf8f0da01d1897e3c3d5fc
fc578ff16b8672f6fadf8f0da01d1897e3c3d5fc,fc578ff1,Remove nondefault strings,"Remove nondefault strings

Remove a couple translated strings to fix release builds.

Change-Id: Ic647f7db8bedd4cec5a537a1a8ff2651d25d9d9e
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436561685,1436824313,2c5a3e442363fd421296ea2bc0c5381f20cb3f20
2c5a3e442363fd421296ea2bc0c5381f20cb3f20,2c5a3e44,Use TextInputLayout in Login and CreateAccount activities.,"Use TextInputLayout in Login and CreateAccount activities.

Wrapped EditText's in the Login and CreateAccount activities in
TextInputLayout, as well as the EditText in the Captcha entry view, and
the edit preview summary.

Also made PlainPasteEditText inherit from AppCompatEditText, to make sure
that any styling that we apply to EditText in the future will be applied
properly by AppCompat.

Note: did *not* modify the EditText in the History and Saved Pages
fragments, since they're being affected by a known bug in AppCompat:
https://code.google.com/p/android/issues/detail?id=175228
Once the above issue is fixed, we can finish those updates.

Bug: T102549
Change-Id: I72b1acd858c47ecb20dfc0b7b269c11aad5a99a9
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1436559723,1436821723,5efd7e919f4fac72e91c985550881dc1471e0f55
5efd7e919f4fac72e91c985550881dc1471e0f55,5efd7e91,Share a fact onboarding design tweaks,"Share a fact onboarding design tweaks

- Add one second delay to showing select text onboarding tip.
- Position the select text tip at (70%, 88%).
- Add Percent Support library. This causes a size increase of
  approximately 3.9 KiB. No known ProGuard requirements. Release builds
  appear to function proprerly.
- Resize share tip social networks to 24dp wide and proportionally tall
  from source. All densities compressed with Pngcrush.
- Vertically center share tip social network icons and add 16dp padding
  to the left and right of parent view.
- Add new color scheme entry, liberal blue, #3366bb.
- Recolor share tip and share icon highlight.

Design has specified additional acceptance criteria detail.

Bug: T89985
Change-Id: I586461ed6435ab3e019a460c1db6d58fbc00c8a5
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436560157,1436562554,fb68988eb14fd6a6844b662c5f915f92008462cf
fb68988eb14fd6a6844b662c5f915f92008462cf,fb68988e,"Merge ""Fix possible crash when clicking on link preview.""","Merge ""Fix possible crash when clicking on link preview.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436541283,1436541283,"6c4cadcbae21de6f7a4e4ef1b90f04772a2cc663,cb030da08a4f1326168df62ae744bdbe870d033f"
6c4cadcbae21de6f7a4e4ef1b90f04772a2cc663,6c4cadcb,"Merge ""Hygiene: cut duplicate onOptionsItemSelected code""","Merge ""Hygiene: cut duplicate onOptionsItemSelected code""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436540319,1436540319,"b67bfa6bb717b07c79674c3e846193b01072843f,84a5494bba5ba3b0ba73444fc2b755db319937a5"
cb030da08a4f1326168df62ae744bdbe870d033f,cb030da0,Fix possible crash when clicking on link preview.,"Fix possible crash when clicking on link preview.

Can't reproduce, but it looks like it's possible for the dialog to be
destroyed before the gesture handler delivers the touch event to us.

Bug: T105487
Change-Id: I0ab4c7e65572c0c8a62ce230043e788fe112f9cf
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1436538959,1436539796,2966a873f74e85d4bb56bd8193ea6df7b00c4286
b67bfa6bb717b07c79674c3e846193b01072843f,b67bfa6b,"Merge ""Fix empty tab list crash bug""","Merge ""Fix empty tab list crash bug""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436539505,1436539505,"2966a873f74e85d4bb56bd8193ea6df7b00c4286,1d00e88f8b4bed2db27506a479d121c30b593784"
2966a873f74e85d4bb56bd8193ea6df7b00c4286,2966a873,"Merge ""Fix InstallReferrerFunnel reporting""","Merge ""Fix InstallReferrerFunnel reporting""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436538701,1436538701,"f14374e95f47dbc7316e77c5eab6ca005b05a864,41a97cd2945c277a087b2cc006a3db7be5c432bc"
f14374e95f47dbc7316e77c5eab6ca005b05a864,f14374e9,"Merge ""Hygiene: refactor styles""","Merge ""Hygiene: refactor styles""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436538037,1436538037,"a976a2b9bffe9f0cdc1b4ce791aa9c339b5a4fb7,17b4c23c97fb20d4617b05712f1a0619860ed55e"
a976a2b9bffe9f0cdc1b4ce791aa9c339b5a4fb7,a976a2b9,"Merge ""Replace 'delete all searches' button on search bar with floating action button""","Merge ""Replace 'delete all searches' button on search bar with floating action button""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436538018,1436538018,"4d36d41ccb866980559443d52e770b34a54ebc0f,fad5e956311c93fd374fbbd09a7abcede72427ce"
84a5494bba5ba3b0ba73444fc2b755db319937a5,84a5494b,Hygiene: cut duplicate onOptionsItemSelected code,"Hygiene: cut duplicate onOptionsItemSelected code

Replace duplicate default Activity.onOptionsItemSelected() behavior with
ActivityUtil implementation in PageActivity. Also, call super
implementation instead of throwing an exception in some places.

Change-Id: Ib546a9976c6e4dffeeb69cbfae04090d29b7435b
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436487613,1436488766,5931ad2206f462ae5bad85a23fc5113b3357586d
41a97cd2945c277a087b2cc006a3db7be5c432bc,41a97cd2,Fix InstallReferrerFunnel reporting,"Fix InstallReferrerFunnel reporting

- Fix InstallReferrerFunnel and refactor for new Funnel functionality.

The previous Funnel refactor and InstallRefererFunnel merged at about
the same time and neither accounted for the other. This patch fixes
install referrer event logging and uses the default site whose value is
inconsequential.

Tested with (dev flavor):
adb shell am broadcast -a com.android.vending.INSTALL_REFERRER \
  -n org.wikipedia.dev/org.wikipedia.analytics.InstallReferrerReceiver \
  --es ""referrer"" ""referrer_url=foo&campaign_id=bar&install_id=buzz""

Change-Id: Idc4bda341d7440d93fb5daa36453047b21ba0e6e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436487141,1436487335,5931ad2206f462ae5bad85a23fc5113b3357586d
1d00e88f8b4bed2db27506a479d121c30b593784,1d00e88f,Fix empty tab list crash bug,"Fix empty tab list crash bug

I can't repro this bug but it seems like it might be possible to restore
an empty tab list. This patch adds a blank tab in this event.

Bug: T105390
Change-Id: Ie75eaa04bc06441b0ba04f3d854a5f5c855f75cb
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436485176,1436485176,5931ad2206f462ae5bad85a23fc5113b3357586d
4d36d41ccb866980559443d52e770b34a54ebc0f,4d36d41c,Add custom View for displaying errors consistently.,"Add custom View for displaying errors consistently.

Added a ThrowableUtil class that provides functions to get well-formed
error messages for any Throwable. These messages may be used in Toasts,
SnackBars, custom Views, etc.

Added a custom View that uses the above functions, and formats the
messages in a consistent way. This custom View may be used anywhere that
we want to display errors.

As an example, hooked up the new functionality into the Search fragment.
In subsequent patches, it should be used in additional places, too.

Note: this is dependent on the corresponding patch in java-mwapi:
https://gerrit.wikimedia.org/r/221813

Bug: T102464
Change-Id: Ie53a0c40309b043f8f59377032cbeb6d88e5e6ee
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1435630210,1436482801,5931ad2206f462ae5bad85a23fc5113b3357586d
17b4c23c97fb20d4617b05712f1a0619860ed55e,17b4c23c,Hygiene: refactor styles,"Hygiene: refactor styles

-Create ToolTip style inheriting from RtlAwareTextView
-Use consistent Pascal casing in styles.xml
-Add xml headers to styles files

Change-Id: I3e48e91452b7d658191a52bceb88be4a795c24d3
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1436475951,1436480324,fad5e956311c93fd374fbbd09a7abcede72427ce
5931ad2206f462ae5bad85a23fc5113b3357586d,5931ad22,Improve sequencing of ToC and Text-highlight tooltips.,"Improve sequencing of ToC and Text-highlight tooltips.

Previously, if the ToC tutorial was shown to the user, then the Highlight
tutorial wouldn't be shown until the app is destroyed and relaunched,
which is not a predictable interval.

This patch guarantees that the Highlight tutorial is shown after the ToC
tutorial, with a minimum time interval of 1 minute between the two
tutorials (so that the user isn't inundated).

Change-Id: I621d179f47c0b606ab24facec06a654e70373c83
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1436477079,1436478828,2d29d4ac2c30b9cfc3a776ca16ae3c9b6dd24c2a
fad5e956311c93fd374fbbd09a7abcede72427ce,fad5e956,Replace 'delete all searches' button on search bar with floating action button,"Replace 'delete all searches' button on search bar with floating action button

Does what it says on the tin

Bug: T101726
Change-Id: I9ba48eed5ffe2b4a60e58d1381cf9d21f77ca097
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1436471903,1436477435,2d29d4ac2c30b9cfc3a776ca16ae3c9b6dd24c2a
2d29d4ac2c30b9cfc3a776ca16ae3c9b6dd24c2a,2d29d4ac,"Merge ""Add TOC floating action button""","Merge ""Add TOC floating action button""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436477274,1436477274,"5f39488c42460ddaad79b6570e686f6ff37a02fd,8905412672b83aad1e637da5bf7ee8e27b5d5c4b"
8905412672b83aad1e637da5bf7ee8e27b5d5c4b,89054126,Add TOC floating action button,"Add TOC floating action button

This patch adds a floating action button for TOC interaction (and removes the
TOC button from the Toolbar).  This declutters the Toolbar and brings the app
more in line with Material Design.

Bug: T104654
Change-Id: I4b2d2db0366e28d6cc66858a859d4ec8b3b54191
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1436300690,1436468739,be632b063d95c80bea370a42eec9b2234d6b273d
5f39488c42460ddaad79b6570e686f6ff37a02fd,5f39488c,Add tabbed browsing logging,"Add tabbed browsing logging

- Add TabFunnel for logging significant tab interactions.
- Add TabsProviderListener.onEnterTabView() interface method.
  Instrument additional interface callbacks where appropriate.
- Replace TabsProvider.TabsProviderListener null checks with null
  object pattern.
- Set action mode bar as clickable instead of setting an empty click
  listener.
- Make TabsProvider.ViewHolder class static.

Bug: T104802
Change-Id: Ie74325a3283275f20ed5a641f595700381ca7e6a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436392725,1436466434,be632b063d95c80bea370a42eec9b2234d6b273d
be632b063d95c80bea370a42eec9b2234d6b273d,be632b06,Add developer settings to Gingerbread,"Add developer settings to Gingerbread

- Add developer setting support for Gingerbread devices.
- Add single Fragment Activity components and apply pattern to settings
  and developer settings.
- Fix invalidateOptionsMenu() crash bug in API 14 devices in
  SettingsFragment.
- Move ActivityUtil to activity package.
- Rename SettingsUI to SettingsPreferenceLoader.

Developer settings Gingerbread support added in response to initial
patch feedback.

Change-Id: Icf9a33bac98c5e39d54553b87634a521b9b833f7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436330824,1436419645,7776e15857c7a918272651411fa8de61242248ac
7776e15857c7a918272651411fa8de61242248ac,7776e158,Add app language selection event logging,"Add app language selection event logging

For measuring the success of the new language-switching feature in the
search bar as compared to the settings screen.

Bug: T104804
Change-Id: Ic09066ab2c0e06abf274a0d6ddce90bb902445a7
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1436312384,1436399566,2c0695a14149fd7028562ab81ccc45670145922e
2c0695a14149fd7028562ab81ccc45670145922e,2c0695a1,"Merge ""Hygiene: consolidate default funnel implementation""","Merge ""Hygiene: consolidate default funnel implementation""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436393088,1436393088,"1ce89c39e491b76364dae98321fab15bc7b28301,e80c5828440dab29d317d740a07977a9fad5078c"
1ce89c39e491b76364dae98321fab15bc7b28301,1ce89c39,Implement intent handler for Install Referrer.,"Implement intent handler for Install Referrer.

Bug: T103460
Change-Id: Ia771977a5ce43dfb8320a98ffa60aa566fd58d3b
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1435065773,1436379379,02804e9e386b917f1da7f1f17f788e0edc6d31d9
02804e9e386b917f1da7f1f17f788e0edc6d31d9,02804e9e,"Merge ""Add link preview and morelike to developer settings""","Merge ""Add link preview and morelike to developer settings""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436366645,1436366645,"10f6021342283c958953e5a0312d0f5fd61e0143,bcc804d2a1111c6895ea571b492f77e77c612e8f"
10f6021342283c958953e5a0312d0f5fd61e0143,10f60213,"Merge ""Don't show select and share tips on Gingerbread""","Merge ""Don't show select and share tips on Gingerbread""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436366405,1436366405,"dc319013e036a4c2b7e584adbf6940f9bbf30690,0563fd3ce72becc9f4e20480428790cf32d84847"
dc319013e036a4c2b7e584adbf6940f9bbf30690,dc319013,"Merge ""Hygiene: remove NonNull annotation on primitive""","Merge ""Hygiene: remove NonNull annotation on primitive""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436366233,1436366233,"5d3fe11e5b5fc844ec6395a6410ce3503543c44b,b4a331e0dc10068d822a94582070dc3b1545fb97"
5d3fe11e5b5fc844ec6395a6410ce3503543c44b,5d3fe11e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I23c2260117df504ec84c58ede27dd48747d29305
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1436336761,1436336761,4c5ddf4620194b83bdea0d26bdcfd3701b3bb640
bcc804d2a1111c6895ea571b492f77e77c612e8f,bcc804d2,Add link preview and morelike to developer settings,"Add link preview and morelike to developer settings

Change-Id: I3f7bd859c81dff5a83054215dcaa68960302d372
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436331341,1436331341,4c5ddf4620194b83bdea0d26bdcfd3701b3bb640
b4a331e0dc10068d822a94582070dc3b1545fb97,b4a331e0,Hygiene: remove NonNull annotation on primitive,"Hygiene: remove NonNull annotation on primitive

Change-Id: I51402ecd6d806d43465df97c73914ee53c7ca317
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436331180,1436331231,4c5ddf4620194b83bdea0d26bdcfd3701b3bb640
0563fd3ce72becc9f4e20480428790cf32d84847,0563fd3c,Don't show select and share tips on Gingerbread,"Don't show select and share tips on Gingerbread

Gingerbread doesn't support long press in its WebView. Don't show
impossible tips.

Change-Id: If094a95f8ac726f4918ba127d137d410cf70a057
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436331046,1436331046,4c5ddf4620194b83bdea0d26bdcfd3701b3bb640
e80c5828440dab29d317d740a07977a9fad5078c,e80c5828,Hygiene: consolidate default funnel implementation,"Hygiene: consolidate default funnel implementation

- Add canonical app install ID and session token implementation to
  Funnel.
- Use WikipediaApp.getPrimarySite() in Funnel when site is null.

The Funnel class hierarchy is one of the app's biggest DRY offenders
with many subclasses literally copying and pasting down to the
comments. As we have a sprint dedicated to event logging, it's long
overdue for refactoring.

Static analysis performed:
- Verify ""appInstallID"" field with a value of
  WikipediaApp.getAppInstallID(). If field has a different name,
  override getAppInstallIDField(). If field has a different value,
  override getAppInstallID(). If field does not exist, override
  preprocessAppInstallID().
- Verify ""sessionToken"" field with a value of
  UUID.randomUUID().toString(). If field has a different name,
  override getSessionTokenField(). If field has a different value,
  override getSessionToken(). If field does not exist, override
  preprocessSessionToken().
- Verify super.preprocessData(JSONObject) is called by Funnel
  subclasses.
- Verify preprocessData(JSONObject, String, T) is called instead of
  handling JSONExceptions.
- If Site is passed in the constructor, verify the super is invoked
  with it.
- Verify all Funnel subclasses accounted for including TimedFunnel
  descendents.
- Android Studio code inspection.

Functional analysis performed:
- All tests pass.
- Verify event logging on deployment-eventlogging02.eqiad.wmflabs for
  each funnel except SessionFunnel which is unused.

Change-Id: I7ac531207a38b9be9b97a2d5eb380658c9ef4418
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436308133,1436308133,4c5ddf4620194b83bdea0d26bdcfd3701b3bb640
4c5ddf4620194b83bdea0d26bdcfd3701b3bb640,4c5ddf46,"Merge ""Hygiene: Replace search button layout with TextView and compound drawable""","Merge ""Hygiene: Replace search button layout with TextView and compound drawable""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436304198,1436304198,"2abd1197e34d2a67686a7515c472a58dbc52e738,e17310e98bf322f0b1c0d26cc2da6ac6a3374472"
2abd1197e34d2a67686a7515c472a58dbc52e738,2abd1197,Add link to open current page in external browser.,"Add link to open current page in external browser.

...in the bottom content area.

Bug: T104705
Change-Id: I0b8800e582344e0bbdad627c8c0db99c5bd878d6
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1436234359,1436302963,30314e130fa173eef32c4cfa2f5d2d04f14c7db9
30314e130fa173eef32c4cfa2f5d2d04f14c7db9,30314e13,Updated gallery funnel to support Source and TimeSpent.,"Updated gallery funnel to support Source and TimeSpent.

Factored out funnel logic that requires timing into a TimedFunnel base
class.

Also moved GalleryPageChangeListener outside the onCreate function, since
the method length was starting to exceed 150 lines.

Bug: T104625
Change-Id: Id96e264b31c09084cf1e4958006091dc2e65b38d
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1436292597,1436302436,bf953488187779a3fb619d8d3ae45e791e154e19
e17310e98bf322f0b1c0d26cc2da6ac6a3374472,e17310e9,Hygiene: Replace search button layout with TextView and compound drawable,"Hygiene: Replace search button layout with TextView and compound drawable

Lint warning:
../../res/layout/activity_page.xml:74: This tag and its children can be
replaced by one <TextView/> and a compound drawable

Change-Id: Ie3fc706168b8cde9aea21766290ed8aef7aa13b5
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1436238773,1436301435,63e0d2c4227cd4b99f40ac6e0bcfb194518a2965
bf953488187779a3fb619d8d3ae45e791e154e19,bf953488,Hygiene: Refactor settings code,"Hygiene: Refactor settings code

Remove a lot of duplicated code between SettingsFragment and SettingsActivityGB.

This patch adds an abstraction layer over PreferenceActivity and PreferenceFragment,
called PreferenceHostCompat. This is unfortunately needed since, as of this writing,
there is no support-v4 variant of PreferenceFragment, or common base class for
preference related functionality provided by the Android support libraries.

Change-Id: If73081533326bcd5202b0e80a18567f7030c7201
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1436248677,1436248677,63e0d2c4227cd4b99f40ac6e0bcfb194518a2965
63e0d2c4227cd4b99f40ac6e0bcfb194518a2965,63e0d2c4,Add developer settings screen,"Add developer settings screen

* Add secret developer settings UI.
* Add EditTextAutoSummarizePreference and IntPreference.
* Move ThemedActionBarActivity to activity subpackage.

A developer settings screen is endlessly useful for changing otherwise
internal state on the fly without the use of a debugger or coding. It
also encourages dev culture.

This patch exposes the preference state for various shared preferences
used to A/B test layouts but further enhancements may yet be added.

Change-Id: I914a7e6d8600177860e252a8490b3d6ea6691216
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1436217057,1436227381,a5197073b1480d0710832b529907a9c3acfa5821
a5197073b1480d0710832b529907a9c3acfa5821,a5197073,Add Share A Fact onboarding properties to funnel,"Add Share A Fact onboarding properties to funnel

Report whether Share A Fact onboarding tips were enabled and which were
shown to the user. This reporting is used to measure the success of the
onboarding experience.

Rather than create a new schema, we leverage the existing
MobileWikiAppShareAFact schema with new properties for feature enabled,
and tips shown.

Logging verified on
deployment-eventlogging02.eqiad.wmflabs:/var/log/eventlogging/all-events.log.

Bug: T89989
Change-Id: I3d1d5d49c5619f8d6b1b4014079bab3e8336b5ac
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436208490,1436224944,4a6ad2e25605362859b2c9a85f02e3b6122b2cdc
4a6ad2e25605362859b2c9a85f02e3b6122b2cdc,4a6ad2e2,Add tool tip onboarding A/B testing,"Add tool tip onboarding A/B testing

Bug: T89985
Change-Id: I457fbad65f7db8a6985a992aa435eb6ad6ee3f8f
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436157676,1436216126,066b27334ac924ae342b54597cf8b61df42b820b
066b27334ac924ae342b54597cf8b61df42b820b,066b2733,Add tool tip onboarding state,"Add tool tip onboarding state

Bug: T89985
Change-Id: I00ee82e858eb519c9d71579837e2e9332cbf4c71
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1436157566,1436216066,bc8498959d2455f7eb2138a9fb2ee95f0085268e
bc8498959d2455f7eb2138a9fb2ee95f0085268e,bc849895,Add tool tip UI components for onboarding,"Add tool tip UI components for onboarding

- Integrate Onboarding v1.0.3 for tool tips.
- Add Wikipedia app styling to tool tips.
- Add (disabled) code to display tool tips.

Bug: T89985
Change-Id: I97e9565b4a5af4eaaa3176a59bf6c2ec4a98182e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1435787729,1436215871,3ff67e9d7f397e1694244fe1674e99731c85d942
3ff67e9d7f397e1694244fe1674e99731c85d942,3ff67e9d,Smooth gradients in Lead Image and Gallery.,"Smooth gradients in Lead Image and Gallery.

When viewed on top of especially light images, the gradients that we
display on top of the Lead Image, as well as the Gallery images, can have
a noticeably abrupt ""end"", because these gradients are linear.

This patch modifies the gradients to follow a cubic function, so that the
gradient trails off more smoothly than a linear function.

I've also removed the corresponding unused XML gradient drawables.

Bug: T104808
Change-Id: Ic66637ea649ea7945d9ffe688c5d03b20f47810d
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1435889335,1436212560,c6d2d0fcecb47896064f8294207daf56cce8ce96
c6d2d0fcecb47896064f8294207daf56cce8ce96,c6d2d0fc,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I90077479fd44f9074c2765fe8dab12b7cf71f197
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1436205109,1436205109,06b6011b69d8f0c203eb9b1532622fa284e51938
06b6011b69d8f0c203eb9b1532622fa284e51938,06b6011b,"Don't display ""no results found"" before running full text search","Don't display ""no results found"" before running full text search

Currently, we display the results of a prefix search (including ""no results found""
in the case of an empty result list) before falling back to a full text search.
If, as is frequently the case, the full text search yields results when the prefix
search didn't, this results in ""no results found"" flickering momentarily before
results are displayed.

This patch prevents this behavior by only calling displayResult() if the prefix
search results are non-empty before falling back to full text search.

Bug: T104647
Change-Id: Iaa4a5fbe2b7bdb16f32869175d6a4259f67b17df
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1436197458,1436199038,88cbc038c6c9e629dde1cfd9913e75cc5a367ca7
88cbc038c6c9e629dde1cfd9913e75cc5a367ca7,88cbc038,Add length cutoff for text snippets sent over JS bridge,"Add length cutoff for text snippets sent over JS bridge

Currently, if a user selects a very large text block and attempts to share it,
the share action will fail and/or hang or crash the app.

Example: Visit article ""Victor Rousseau Emanuel,"" select all text, and attempt
to share the selection.

This patch truncates the selection sent over the JS bridge at 250 characters
(which appears to be approximately the max that the share-a-fact card can display)
in order to eliminate out-of-memory issues.

Bug: T104527
Change-Id: I371a8df1261ca945b3ed32e9eaacaabb74ae43f5
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1436194373,1436194373,8fd94c58013c07fa0a4bebc696f3994b1ebd7167
8fd94c58013c07fa0a4bebc696f3994b1ebd7167,8fd94c58,"Merge ""Hygiene: Stop exporting ContentProviders""","Merge ""Hygiene: Stop exporting ContentProviders""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436191099,1436191099,"558b60dc27a9ca424d3a085a75ddfabff3048b9d,4f1b9cc9a0062b7888676f5275bbc3f2f70aeb57"
558b60dc27a9ca424d3a085a75ddfabff3048b9d,558b60dc,"Merge ""Hygiene: Remove unused icons""","Merge ""Hygiene: Remove unused icons""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1436190997,1436190997,"b02ec3f9d7af38023f931ca7d7c6cfca413ba324,05738da9ffc7499bc0d331d5070dcd2af1fd87ba"
05738da9ffc7499bc0d331d5070dcd2af1fd87ba,05738da9,Hygiene: Remove unused icons,"Hygiene: Remove unused icons

Lint warning: UnusedResources

Change-Id: I276ee6f8e1dfc23484a47e4c66529a52fafc6064
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1436056487,1436059416,51c73f10f1d92adecc6c46716029d8e84efcd7db
4f1b9cc9a0062b7888676f5275bbc3f2f70aeb57,4f1b9cc9,Hygiene: Stop exporting ContentProviders,"Hygiene: Stop exporting ContentProviders

Lint flagged that. And we don't really need to export our content providers.

Change-Id: I67b44e2c52479328fd5b173ce0cca53ee5a496cb
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1436055490,1436059378,51c73f10f1d92adecc6c46716029d8e84efcd7db
b02ec3f9d7af38023f931ca7d7c6cfca413ba324,b02ec3f9,Hygiene: Remove useless parent layout in featured page widget,"Hygiene: Remove useless parent layout in featured page widget

Lint warning:
../../res/layout/widget_featured_page.xml:25: This LinearLayout layout or its FrameLayout parent is useless; transfer the background attribute to the other view

Change-Id: Idc1f5c0864b1340b11735d059d21dfc35923379f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1436059308,1436059350,51c73f10f1d92adecc6c46716029d8e84efcd7db
51c73f10f1d92adecc6c46716029d8e84efcd7db,51c73f10,Add rawcontinue to FetchUserContribsTask,"Add rawcontinue to FetchUserContribsTask

Change-Id: I963496a11dd2613eec2f5d4e29f703b2af24d13b
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1435700101,1435983530,ebb37c665416c3fc79672e83b71e07e7692410b9
ebb37c665416c3fc79672e83b71e07e7692410b9,ebb37c66,Hygiene: add testAll* Gradle tasks,"Hygiene: add testAll* Gradle tasks

Add testAll* Gradle tasks that execute both JVM JUnit and Android
instrumentation tests per variant.

Change-Id: I75e660991225b6a09c7a94d61f51bf124e357f76
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1435729635,1435983320,3866a321e6b22bca1aff86a3dc45c41087851c9a
3866a321e6b22bca1aff86a3dc45c41087851c9a,3866a321,Add language selection button to search bar,"Add language selection button to search bar

Currently, switching the app language requires accessing the preferences screen
via the nav drawer and selecting the desired language from there.  That's
inconvenient when one is in the middle of something, a search for instance.

This patch puts a language selection button right on the search bar to make it
more convenient to change the app language on the fly.

Bug: T73136
Change-Id: I1b638ffe8909307aac9e4355a7fceca1631643c7
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1435022424,1435869417,530d791f7fa2fa449ae9f34d114b049b6bb3b168
530d791f7fa2fa449ae9f34d114b049b6bb3b168,530d791f,Bump versionCode,"Bump versionCode

Change-Id: I77131ea8f2fd55fb3020a3bfe07abf551f83c8ee
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1435700388,1435700465,7c2f01e8ba8ac10e1023b32eabada4d0151c4f0a
7c2f01e8ba8ac10e1023b32eabada4d0151c4f0a,7c2f01e8,"Merge ""Fix test compilation""","Merge ""Fix test compilation""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1435699621,1435699621,"ac551f52055705c03f5adc2cd915da6a98766373,93d2da8f8cc6a807e2efc5813372e00b092da73e"
93d2da8f8cc6a807e2efc5813372e00b092da73e,93d2da8f,Fix test compilation,"Fix test compilation

FullSearchTask signature was changed but not updated in tests.

Change-Id: I1a4ff426cb06b058a59d761af3667a49ccbbc5bf
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1435698906,1435699360,bfd1c4cea2e775f26280f4234bb361717572a725
ac551f52055705c03f5adc2cd915da6a98766373,ac551f52,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ic423bc399c8e206fbcc93a210ab776f9cfc1f303
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1435697712,1435698643,26deba89a31c4f135a4c0aae4352e692bc956c76
26deba89a31c4f135a4c0aae4352e692bc956c76,26deba89,Avoid NPE in JsonPageLoadStrategy.onSaveInstanceState,"Avoid NPE in JsonPageLoadStrategy.onSaveInstanceState

This cannot be easily reproduced but according to the stack trace this happens
when backStack == null during onSaveInstanceState.
This patch set the back stack to an empty list right in the JsonPageLoadStrategy constructor. While it seems a bit wasteful since it should get set later anyways it's probably the safer thing to do.

Bug: T104090
Change-Id: Ib359cce9a508f3d9640af5ae23c38aecf923d17a
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1435693306,1435697152,bfd1c4cea2e775f26280f4234bb361717572a725
bfd1c4cea2e775f26280f4234bb361717572a725,bfd1c4ce,Preserve full-text search results across screen rotation.,"Preserve full-text search results across screen rotation.

Bug: T104349
Change-Id: I69b15df656e229b5332ccf38746db07f6d1bd58f
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1435681706,1435681824,2a0ee365a6485c9ddb2e384ddafeefae79dc8792
2a0ee365a6485c9ddb2e384ddafeefae79dc8792,2a0ee365,Fix crash when rotating with highlighted text.,"Fix crash when rotating with highlighted text.

Bug: T103050 T97963
Change-Id: I13f762726d97bf550c1248d5eeb2268feddea846
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1435631790,1435681073,b1629e338142224c7d04c32cfbe3d338eba3a023
b1629e338142224c7d04c32cfbe3d338eba3a023,b1629e33,Fix full-text search in main Search bar.,"Fix full-text search in main Search bar.

The issue was that the addition of ""morelike"" searching didn't
differentiate between searching from the Search bar, and searching for
Read More suggestions. The ""morelike"" search, if enabled, should only
apply to Read More suggestions.

Therefore, this patch adds a parameter to the full-text search task to
specify whether to perform a ""morelike"" search, which the Search bar now
explicitly sets to false.

Bug: T104293
Change-Id: Ibfb795c575dead30d86e720ab91d7a1056a2bb57
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1435673234,1435680259,59f6dfe706a916309a19ebf11b4aad462b9450b2
59f6dfe706a916309a19ebf11b4aad462b9450b2,59f6dfe7,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I2c32f21a12f9eb78f1517067825c185a931179b3
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1435442040,1435442040,20816fec26ceb33a4f81bd0900e22a9661af47bf
20816fec26ceb33a4f81bd0900e22a9661af47bf,20816fec,Hygiene: fix Wikipedia Zero test,"Hygiene: fix Wikipedia Zero test

Change-Id: I26d92605e6f7d6cfe18e00c2ee1e06402ea4e304
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1435095474,1435359323,73cbd661dcd9d8cbf54de6abca94c310e3038b47
73cbd661dcd9d8cbf54de6abca94c310e3038b47,73cbd661,"Merge ""Hygiene: rename methods""","Merge ""Hygiene: rename methods""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1435337101,1435337101,"4fb9ab3980377836ff613547c555c8ea4b5ef436,19f55b2258350167d992e66a163c1e32572aeaab"
19f55b2258350167d992e66a163c1e32572aeaab,19f55b22,Hygiene: rename methods,"Hygiene: rename methods

Change-Id: Id2f6583fab358fd1289d8ff5e862c0a5581c4904
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1435113828,1435336501,8461d035a6b99623cd6a15614a1c7d03b899d1ac
4fb9ab3980377836ff613547c555c8ea4b5ef436,4fb9ab39,Hygiene: Automatically pick event logging endpoint,"Hygiene: Automatically pick event logging endpoint

Change-Id: I176a3e48561e9fadf7d44b5dc1763753b9a36552
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1435113567,1435336470,8461d035a6b99623cd6a15614a1c7d03b899d1ac
8461d035a6b99623cd6a15614a1c7d03b899d1ac,8461d035,"Merge ""Fix A/B test and event log distribution""","Merge ""Fix A/B test and event log distribution""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1435335605,1435335605,"4680a6a7858456af91ce6557f9f5bd215a5b3051,8c39a9a96874ba537713cd8325ef5c9af2bd915f"
4680a6a7858456af91ce6557f9f5bd215a5b3051,4680a6a7,Bump versionCode,"Bump versionCode

Change-Id: I58ccf9b3231bb2dad52a100373d344ad089ead43
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1435269590,1435269629,0af49dd0557fc8c20682b708b8b93ceb0d9c6065
0af49dd0557fc8c20682b708b8b93ceb0d9c6065,0af49dd0,Fix crash when removing the tabs icon more than once.,"Fix crash when removing the tabs icon more than once.

The tabsMenu button is removed upon the first call to
onPrepareOptionsMenu. When this function is called subsequent
times, the tabsMenu button is no longer there, and becomes
null, hence we have an NPE.

Change-Id: I41ae294e07cb659b5c8769257b0143a7d1ba71ce
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1435266908,1435266975,5cfe6f97ff9ba71ab688d2957876aeeb256987c8
5cfe6f97ff9ba71ab688d2957876aeeb256987c8,5cfe6f97,"Merge ""Fix edit pencil active state for RTL languages""","Merge ""Fix edit pencil active state for RTL languages""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1435264468,1435264468,"a2d74cea1e7f629984fa28a8fcb09729af0d0ff0,1b4a249330971064551d90c088c2b40dd2ebff9b"
1b4a249330971064551d90c088c2b40dd2ebff9b,1b4a2493,Fix edit pencil active state for RTL languages,"Fix edit pencil active state for RTL languages

Depends on: https://gerrit.wikimedia.org/r/219421

Bug: T103711
Change-Id: I31d92f199719bd30d1367b089d1e89b55d658f36
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1434738988,1435263869,68caa9c2388b13cafcdfca611a0b24e0f6a2fec9
a2d74cea1e7f629984fa28a8fcb09729af0d0ff0,a2d74cea,Remove strings not in default locale,"Remove strings not in default locale

Change-Id: Icda8ecc24739b6da9c7f5befad81f498e09c659f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1435256233,1435259728,68caa9c2388b13cafcdfca611a0b24e0f6a2fec9
68caa9c2388b13cafcdfca611a0b24e0f6a2fec9,68caa9c2,Fix string references in channel manifests,"Fix string references in channel manifests

Update string references in channel Android manifests that missed a previous rename.

Change-Id: Id5134efbfb278aa54258117cbb4fdf4dcf889557
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1435256398,1435256482,a4cd9e85f8f9ff3c64def7a191d02657301e6372
a4cd9e85f8f9ff3c64def7a191d02657301e6372,a4cd9e85,Hygiene: add Robolectric and MockWebServer,"Hygiene: add Robolectric and MockWebServer

- Enable Android-flavored JVM testing with Robolectric.
- Add MockWebServer for fast, stable network tests.
- Add RobolectricTestRunner subclass, TestRunner, that supports gradle.properties.
- Route logcat to stdout for JVM tests.
- Configure JVM tests for API 21.

Change-Id: I5f71592a5d3f187d632c44bf973e292b04b18cf5
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1435101188,1435120232,ffcc9f27c05e6b7af5e934edf74b907c5cda0a67
8c39a9a96874ba537713cd8325ef5c9af2bd915f,8c39a9a9,Fix A/B test and event log distribution,"Fix A/B test and event log distribution

- Replace generic A/B testing random number with feature specific random number.
- Improve event logging randomization. Logs sent are now evenly distributed across a given device and across all devices.
- Fix theme un/marshalling.

Change-Id: Iaf977a1e3eb422073fcf1e60c8043d6be7b3095e
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1435088328,1435112754,ffcc9f27c05e6b7af5e934edf74b907c5cda0a67
ffcc9f27c05e6b7af5e934edf74b907c5cda0a67,ffcc9f27,Enable morelike Cirrus search for half of users,"Enable morelike Cirrus search for half of users

- Enable 50% featurization of Cirrus ""morelike"" search of related articles.
- Add verbose logging of web requests on dev builds.
- Always events on dev builds.

Bug: T101041
Change-Id: Ifc464e6028f9526b1bd24939bb5e2a8584a989d0
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1434563684,1435104358,f8688b5524c4819334d96aea6a5cd96e7d628e90
f8688b5524c4819334d96aea6a5cd96e7d628e90,f8688b55,Fix image widening for images that intentionally overflow the column width,"Fix image widening for images that intentionally overflow the column width

Certain images intentionally overflow the column width.  See, e.g., the first
image in ""Counties of England.""  These should be left alone.

The image widening patch recently merged (see T94646) included an outdated js
bundle as well as js changes that, when included in a new bundle with grunt,
improperly resize these images.  This patch introduces an updated js bundle
including code to prevent the undesired resizing.

Change-Id: I031e459b42436cfebcc1eb91dd450e2902c3149b
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1434923787,1435103012,d2122439af101fcf5fff9ee9967de057142cfdd1
d2122439af101fcf5fff9ee9967de057142cfdd1,d2122439,Hygiene: accept throwable instead of exception,"Hygiene: accept throwable instead of exception

Change-Id: Iebde762ee7026b52cfe64af32c8917b6585f5724
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1435092851,1435100057,7428ed6b75fcab2f2646864180ae725e201fd7c3
7428ed6b75fcab2f2646864180ae725e201fd7c3,7428ed6b,Add link to privacy policy in Login and Create Account screens.,"Add link to privacy policy in Login and Create Account screens.

Bug: T103201
Change-Id: Ifef8a6a8e60d90ed851447b9f665dbacea0afa83
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1435067366,1435099773,82d35c0f1db8e184cc44d0de81adcb7769058acb
82d35c0f1db8e184cc44d0de81adcb7769058acb,82d35c0f,Fix translation,"Fix translation

Invalid parameter format caused a test failure.

Change-Id: I09759758397c8b85323c2ae3640d65370cde886e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1435096886,1435096886,656ae2460030e77ccd3933bd096ac8df7cd075a4
656ae2460030e77ccd3933bd096ac8df7cd075a4,656ae246,"Merge ""Remove initial login onboarding splash screen""","Merge ""Remove initial login onboarding splash screen""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1435066649,1435066649,"8f1c3a71ad8fcade66a1e4a2217320a84e024c82,eb90d43ea6008b086ddadb10f4bacf4c3fbd64f9"
8f1c3a71ad8fcade66a1e4a2217320a84e024c82,8f1c3a71,"Hygiene: Remove obsolete resource reference, make manifest whitespace consistent","Hygiene: Remove obsolete resource reference, make manifest whitespace consistent

Change-Id: I54dfdf903a11f0cd9b6985b4f330d8dd63a264c8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1435008822,1435008822,de3acc17468e9c97a67040c898f267661289552c
eb90d43ea6008b086ddadb10f4bacf4c3fbd64f9,eb90d43e,Remove initial login onboarding splash screen,"Remove initial login onboarding splash screen

Bug: T102482
Change-Id: I4ead606666bacb5b69af331926d1011ab5caf9db
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1435000118,1435008502,de3acc17468e9c97a67040c898f267661289552c
de3acc17468e9c97a67040c898f267661289552c,de3acc17,Move tests to default structure,"Move tests to default structure

- Move tests to default folder hierarchy. Remove unnecessary test manifest.
- Remove unnecessary test resources.
- Move checkstyle.xml to config.

Change-Id: Icc00dc3671f6dfcc3eb4a49461c48d88e9ae7b84
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1434665166,1435000926,4fdf995458e780844f4fef04a239bdf9c4588728
4fdf995458e780844f4fef04a239bdf9c4588728,4fdf9954,Hygiene: refactor shared preferences access,"Hygiene: refactor shared preferences access

- Move all shared preferences file IO to PrefsIoUtil. Add necessary get / set functions to Prefs. Roll PreferenceUtil and PrefKeys into Prefs and PrefsIoUtil.
- Move a couple string CSV and delimited string methods to StringUtil.
- Minor rename of some SP access methods in WikipediaApp.
- Rename shared preferences string resource key names to have consistent prefix. Very minor rename of some key names for clarity.
- Use GravityCompat.* instead of Gravity.* in PageActivity and ToCHandler.java.
- Expand some wildcard imports.

Change-Id: I5d2de61ae0adf163e6bbb39337236d1d8c592c84
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1434514642,1434997217,9a80b6f80d8db0f8b757c88b10be9807fd886ca8
9a80b6f80d8db0f8b757c88b10be9807fd886ca8,9a80b6f8,"Merge ""Hygiene: Use shared parsing code and get correct license info for GalleryItems""","Merge ""Hygiene: Use shared parsing code and get correct license info for GalleryItems""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1434992168,1434992168,"9a9c58847fdf071b0e42b07dc252857cd2dd8aad,20fe195ae02af596c1d8eeaf3ef450cbabbe70a5"
9a9c58847fdf071b0e42b07dc252857cd2dd8aad,9a9c5884,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I318989a94a5f6aead20bf654c35a873605cb40e4
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1434967157,1434967157,a1658435a6dbf8242e3879da963617557df35c17
20fe195ae02af596c1d8eeaf3ef450cbabbe70a5,20fe195a,Hygiene: Use shared parsing code and get correct license info for GalleryItems,"Hygiene: Use shared parsing code and get correct license info for GalleryItems

This patch updates the gallery code to use a image license metadata parsing function
shared with share-a-fact.

Change-Id: I76eca6a6f6baca09a1145cc8e5b34c8f13ac9fa8
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1434733736,1434753597,f129b773c210b4b93e4a72604d67ee52b94bf98b
a1658435a6dbf8242e3879da963617557df35c17,a1658435,Design tweak in History and Saved Pages.,"Design tweak in History and Saved Pages.

Added a bit of margin around the Search field in History and Saved Pages,
and made the text size consistent with the main Search bar text
(refactored it into a dimen).

Change-Id: I68d621aad7b2c68038eda00ac2980a382f6c54a3
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1434675921,1434734277,647a53d3ea896c3c66805fd65726852d126f48f5
647a53d3ea896c3c66805fd65726852d126f48f5,647a53d3,Redirect Special page links to external browser.,"Redirect Special page links to external browser.

Bug: T102543
Change-Id: I25310e061915d74b5af4dc28e3df0b4546334f63
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1434646509,1434733842,f129b773c210b4b93e4a72604d67ee52b94bf98b
f129b773c210b4b93e4a72604d67ee52b94bf98b,f129b773,Fetch and add underlying image license icon to Share-a-Fact cards,"Fetch and add underlying image license icon to Share-a-Fact cards

Bug: T101436
Change-Id: I51c7d627f4b00f260831c925d0177499ddbbee9a
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1433950953,1434733675,47e06182612fc5f0e0c30e3098373aa4f5291840
47e06182612fc5f0e0c30e3098373aa4f5291840,47e06182,Fix possible race condition in tabs.,"Fix possible race condition in tabs.

There is a brief window of time when the PageTitle within the
PageLoadStrategy was getting set to null (right before a new PageTitle is
fed into the PageLoadStrategy), which left a small chance where an event
coming from the WebView might be handled by a callback that accesses the
PageTitle, and produces an NPE.

This patch eliminates that possibility.

Change-Id: Ia6bea9c028d2777c3b220a7412c65a458d3eed0b
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1434660778,1434733399,d696d40614814cf7a24365e1803cd8d739495f82
d696d40614814cf7a24365e1803cd8d739495f82,d696d406,Use distribution with sources,"Use distribution with sources

Change-Id: I01d6fa14d7622832ca4cf853daa71d82fa9f96ef
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1434660874,1434688533,0aaf227160f17d8c3eed25d35feabb0570d5a9b6
0aaf227160f17d8c3eed25d35feabb0570d5a9b6,0aaf2271,"Make sure ""page does not exist"" error is hidden when loading new page.","Make sure ""page does not exist"" error is hidden when loading new page.

When the ""page does not exist"" label is shown (due to the user navigating
to a nonexistent page), it can never actually be dismissed. This patch
makes sure this error is hidden whenever a new page is loaded.

Change-Id: I8729ec7b59f4ac89aa6f92ecb4cd49390fdd9147
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1434674603,1434681348,727f014ce5f2aeca8bb7d784f7105dd03bf28ec4
727f014ce5f2aeca8bb7d784f7105dd03bf28ec4,727f014c,Fix erroneous description in articles without a description.,"Fix erroneous description in articles without a description.

This was happening because we're performing asynchronous animations on the
Page Title text view, and then fading in the Description when the Title
animation finishes. If we start loading a new page in the middle of the
title animation, the fade-in of the description will still happen, even if
the new page doesn't have a description.

This patch fixes the issue by explicitly canceling the animation whenever
a new page is loaded.

Bug: T100173
Change-Id: I9c2ece0a8292be080857ce5fc1864b8d04616f16
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1434644551,1434678568,2afcd33ded22bfe16df1dc4492e643370e64289f
2afcd33ded22bfe16df1dc4492e643370e64289f,2afcd33d,"Design tweak for tabs, and a bugfix.","Design tweak for tabs, and a bugfix.

- Made the shadow under tabs a bit more subtle, and made the rounded
  corners of the tabs have the correct color background behind them.
- Fixed minor issue where the incorrect HistoryEntry was being saved
  (probably an artifact from the PageLoadStrategy refactor)

Change-Id: I43cbbaac7428edc40abc6e710935dd0012e0455e
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1434576743,1434662762,0e07c114ac8d54f41f28c654349c273c10d8d47b
0e07c114ac8d54f41f28c654349c273c10d8d47b,0e07c114,"Merge ""Use Material-ish edit pencil background""","Merge ""Use Material-ish edit pencil background""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1434643507,1434643507,"4cb9fca82ef3b39735acd31a2c3ab6588fb32a65,4a6df00dbe071180e31fb0904d48b5f1fc952c8c"
4cb9fca82ef3b39735acd31a2c3ab6588fb32a65,4cb9fca8,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Iee824dc5e55c73d4a29264858345ee3654170bcc
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1434627415,1434627415,96d019896e316562c4319ac1bd31df24794dc7cb
96d019896e316562c4319ac1bd31df24794dc7cb,96d01989,Hygiene: Lint ignore string app_store_description,"Hygiene: Lint ignore string app_store_description

See if TWN sync preserves resource XML attributes.
I'm going to run a sync right after merging this to see if those will be preserved.

Change-Id: I0cbc3246c187131bf229275b3bb5e619b7c8fd3a
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1434600079,1434600079,f4dbea4da6a5e045cb3dec2322f4028826e5bca1
4a6df00dbe071180e31fb0904d48b5f1fc952c8c,4a6df00d,Use Material-ish edit pencil background,"Use Material-ish edit pencil background

Depends on corresponding backend change: https://gerrit.wikimedia.org/r/219083

Bug: T99678
Change-Id: Iadb5517f465fee8cc7eb5dc3fda162831881bde9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1434582160,1434597324,f4dbea4da6a5e045cb3dec2322f4028826e5bca1
f4dbea4da6a5e045cb3dec2322f4028826e5bca1,f4dbea4d,Tabbed browsing.,"Tabbed browsing.

- Implemented tabs, basically as a two-dimensional backstack of pages.
- Refactored the logic to update the current PageTitle's thumbnail.
  Previously, the thumbnail was only loaded upon fetching the page from
  the network (a separate request is made to fetch the thumbnail), and
  then persisted to sqlite. Whereas now, when we load the page from
  cache, the thumbnail is loaded from sqlite.
- Feature flagged for non-production only.

Bug: T69251
Change-Id: I00967dc2256fc2cb8c251cc5a6a0ebb83e144a6e
",,,,Dmitry Brant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1432754782,1434569544,48ad60399cf8ee878954d871726a1c93b90f85a3
48ad60399cf8ee878954d871726a1c93b90f85a3,48ad6039,"Merge ""Hygiene: use DimenUtil when calculating display height and density""","Merge ""Hygiene: use DimenUtil when calculating display height and density""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1434566364,1434566364,"b84b21de4431c542e072443fd1a57d8d83d1ca2f,98193742d9371090980a15ec4f5f55731778ccf6"
b84b21de4431c542e072443fd1a57d8d83d1ca2f,b84b21de,Consistent list design.,"Consistent list design.

- Reuse the same layout for search results, history, saved pages,
  disambiguation, and read more.
- Made a custom TextView style that contains some RTL-related tweaks to
  display RTL and mixed RTL-LTR content properly, and applied it to any
  TextView that contains dynamic content from the network (or any TextView
  that may potentially contain mixed RTL-LTR content.
- Removed the ""history source"" icons from the history list, and removed
  the corresponding resources.
- Removed alphabet header from saved pages list.

TODO in future patches:
- Create an actual custom View that represents a generic page list item,
  and use it where appropriate.
- Store wikidata descriptions in History and SavedPages persisters.

Bug: T97822
Change-Id: I40f0082cfcb887a57a70a25a024852bc57d44b17
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1432084427,1434564854,1ba787f77965c03551902d492c5a118017bda4ea
98193742d9371090980a15ec4f5f55731778ccf6,98193742,Hygiene: use DimenUtil when calculating display height and density,"Hygiene: use DimenUtil when calculating display height and density

Also renamed displayHeight to displayHeightDp since that value is in dp.

Change-Id: Ife84b0181f3ef729c0343ffec7ea721b0b75bd8b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1434411656,1434471379,6b52603ddba741cc001348396e08f32b6781cdf0
1ba787f77965c03551902d492c5a118017bda4ea,1ba787f7,Use larger and higher-quality images where appropriate,"Use larger and higher-quality images where appropriate

Enlarges in-article images as appropriate based on the device size and orientation.

Based largely on mhurd's code accomplishing the same on iOS; see https://gerrit.wikimedia.org/r/#/c/211068/.

Bug: T94646
Change-Id: Ic8360baff30c6c5ad36f8b405c96845e81c95837
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1430510868,1434409780,6b52603ddba741cc001348396e08f32b6781cdf0
6b52603ddba741cc001348396e08f32b6781cdf0,6b52603d,Set Edit preview canned summaries to page Locale,"Set Edit preview canned summaries to page Locale

Bug: T102559
Change-Id: I5a7bd0dc844598f6a74bb1baa04e0baae36e4cf1
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1434407654,1434407928,33b86def22fcfcb6847a84acc9510f41ed44bc69
33b86def22fcfcb6847a84acc9510f41ed44bc69,33b86def,Hygiene: Move displayHeight code to separate private method,"Hygiene: Move displayHeight code to separate private method

For editing descriptions, we need to put a little bit
of new code in the constructor.

To help avoid making the constructor overly complex,
some of the code should be split up, such as the code
that sets displayHeight.

Change-Id: Id750f98ee58103f51f0f47a9c31a2d18b6946830
",,,,aude,aude.wiki@gmail.com,BearND,bsitzmann@wikimedia.org,1434292989,1434407724,4471cb087eba041e1f28fe0a49028553f8301441
4471cb087eba041e1f28fe0a49028553f8301441,4471cb08,Upgrade Gradle and the Gradle Android plugin,"Upgrade Gradle and the Gradle Android plugin

- Upgrade Gradle to v2.4 and the Gradle Android plugin to v1.2.3.

Change-Id: I625cf4adce7bc440d8996512de0ffb87380e6e9c
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1434259265,1434407264,dbf4610cb521718a5723fce6529994841052bd73
dbf4610cb521718a5723fce6529994841052bd73,dbf4610c,Hygiene: refactor accept-language header logic,"Hygiene: refactor accept-language header logic

- Move accept-language header logic from WikipediaApp to AcceptLanguageUtil.
- Enable WebView debugging iff app is debuggable.
- Add missing @NonNulls from Android Lint.
- Very minor refactor of part of getAPIForSite() into buildCustomHeaders().

Change-Id: Ibc64f1fce5308faf5bd6b30fef62ba30d3c6d1b6
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1434149441,1434405480,f8a9425062e3faa65b4aedb75ced0470402a5379
f8a9425062e3faa65b4aedb75ced0470402a5379,f8a94250,Hygiene: refactor dialect from AppLanguageState,"Hygiene: refactor dialect from AppLanguageState

Change-Id: I8d437b3941d17ab00d0912595a967ec59b6aa43e
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1434153344,1434403487,e633775cbaae498e2afc24d417dc5f33dcb12f34
e633775cbaae498e2afc24d417dc5f33dcb12f34,e633775c,"Merge ""Improve memory profile of AppLanguageLookUpTable""","Merge ""Improve memory profile of AppLanguageLookUpTable""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1434398340,1434398340,"3f9dc35383c64f14507cc055eb42afae78ce91d0,a84f22aeee9b3368051b2d7f381999df22b201df"
3f9dc35383c64f14507cc055eb42afae78ce91d0,3f9dc353,Fix hardware overflow menu color,"Fix hardware overflow menu color

Bug: T102319
Change-Id: Ic9589af16a4eddf1381dace42478f5eaacb9c353
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1434389609,1434397006,90bf548a2d97b1e46619cc9be4604e3e7b37867a
90bf548a2d97b1e46619cc9be4604e3e7b37867a,90bf548a,"Merge ""Add Chinese dialects to template script""","Merge ""Add Chinese dialects to template script""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1434381558,1434381558,"3c3e976dbbd1b51b9ac10a7a211859b7360a4eed,b80cce4350672a72858423df7fdd034e95db6cd5"
3c3e976dbbd1b51b9ac10a7a211859b7360a4eed,3c3e976d,Remove dup. initialization of LeadImagesHandler displayDensity,"Remove dup. initialization of LeadImagesHandler displayDensity

looks unnecessary to me to have it twice.

Change-Id: I278cb934e8a105daf995c84fb45e106d6eb64596
",,,,aude,aude.wiki@gmail.com,aude,aude.wiki@gmail.com,1434292226,1434292226,d1b0e0f416ac8987cffb86bbae07b2928c549d3e
d1b0e0f416ac8987cffb86bbae07b2928c549d3e,d1b0e0f4,Make sure random feature flag ID is positive.,"Make sure random feature flag ID is positive.

We currently do a/b testing by taking the feature flag ID modulo a certain
number, and using the result to switch between features.

However, it's not immediately obvious that the feature flag ID can be a
*negative* number, and might produce a negative value after the modulo
operation.  This patch ensures that the feature flag ID will always be a
positive number.

Change-Id: I43f0af1e22b5f9a49db77ee6151821852021fb77
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1434117930,1434259062,dc55ddd57b12eb1c0eac52e2f26b3c5d918271cb
a84f22aeee9b3368051b2d7f381999df22b201df,a84f22ae,Improve memory profile of AppLanguageLookUpTable,"Improve memory profile of AppLanguageLookUpTable

Hold soft references to app language resources instead of hard.

Change-Id: Id12cce50ac0a3ff633a6edcd612e452fc8edc0c1
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1434141471,1434141471,dc55ddd57b12eb1c0eac52e2f26b3c5d918271cb
dc55ddd57b12eb1c0eac52e2f26b3c5d918271cb,dc55ddd5,"Merge ""Simplify and fix inconsistencies in share-a-fact handlers.""","Merge ""Simplify and fix inconsistencies in share-a-fact handlers.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1434134439,1434134439,"0216f2ffeab4e17a9fa8bef2c6a43eb91e14293a,556287280c37821402456da01b9b7995cb78ed4f"
556287280c37821402456da01b9b7995cb78ed4f,55628728,Simplify and fix inconsistencies in share-a-fact handlers.,"Simplify and fix inconsistencies in share-a-fact handlers.

This patch unifies the TextSelected and NoTextSelected handlers, since
both are now using the same call to the Bridge to retrieve selected text
inside the WebView.

In the case of no text highlighted, we switch to fetching the actual
content of the first <p> element from the WebView, instead of extracting
the HTML in Java. This also makes it consistent with iOS.

Bug: T99151 T99144 T96493 T98994
Change-Id: I5d5be3b025643e004402067099abe6d00621ce0c
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1434074626,1434127001,213f878793cd0364043d6f5144dda6eb64ec177d
0216f2ffeab4e17a9fa8bef2c6a43eb91e14293a,0216f2ff,"Merge ""Hygiene: remove Maven pom.xml files""","Merge ""Hygiene: remove Maven pom.xml files""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1434080553,1434080553,"586fef72e921e65a435d52acbd4f8478c67a0c83,f0bca995764ccca566fa4ccaada6d005103b2bfa"
586fef72e921e65a435d52acbd4f8478c67a0c83,586fef72,Hygiene: Migrate ToCInteractionFunnel to standard sampling logic,"Hygiene: Migrate ToCInteractionFunnel to standard sampling logic

Recently some more standardised sampling logic was added to the Funnel class,
so that child classes didn't have to reimplement it, which reduces code
duplication. Most classes were switched over to this, but ToCInteractionFunnel
still uses the old sampling method. It should be migrated to the new version.

Bug: T102212
Change-Id: I95fb587d15590147152bc72d9a8f058ee82a095c
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1434071993,1434072498,213f878793cd0364043d6f5144dda6eb64ec177d
b80cce4350672a72858423df7fdd034e95db6cd5,b80cce43,Add Chinese dialects to template script,"Add Chinese dialects to template script

- Add Simplified and Traditional dialects to template script.
- Update FileAlias, MainPageName, and SpecialAlias files with updated template script.

Change-Id: Ic2d351a93d0a26dce41d31b3b9f918b838331f26
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1434066204,1434066204,c7bc714de0b20cb1df8b5fd4c402748b6927b6a3
213f878793cd0364043d6f5144dda6eb64ec177d,213f8787,Bump versionCode,"Bump versionCode

Change-Id: I46580226ee38eb8ae36564ca77deb5c73eedff17
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1434042823,1434042823,c7bc714de0b20cb1df8b5fd4c402748b6927b6a3
c7bc714de0b20cb1df8b5fd4c402748b6927b6a3,c7bc714d,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I580f41297f6cf367ef712c50ee45986b64e93726
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1434040102,1434040102,c15a08ab4eb90469b03f8b1606f991642fae51d8
c15a08ab4eb90469b03f8b1606f991642fae51d8,c15a08ab,Fix issue where app goes to main page on device rotation,"Fix issue where app goes to main page on device rotation

When a config change occurred it saved a null value for the ""language"" in onSaveInstanceState.
Subsequently, when the activity was recreated, it used the null value and compared it with
app.getAppOrSystemLanguageCode(), which is always set to a non-null string (in my case ""en"").

Why is this affecting the page we're on? Because we use the language value to determine if
the language has changed and if we need to reset the site, which also goes to the sites main page.

Thus, it looks like we have to go back to Start, and don't collect our $400.

Bug: T102097
Change-Id: Ib2a4b8fcd66f601017ff486484ec3bcfdd5a27af
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1433993946,1433993946,44f58d62ae7eb1bd8af96c267ebf59487ebb97ce
44f58d62ae7eb1bd8af96c267ebf59487ebb97ce,44f58d62,Fix article language picker for Chinese,"Fix article language picker for Chinese

- Replace article language picker entry for Chinese with Simplified and Traditional Chinese entries.
- Decouple language from WikipediaApp.
- Decouple static app language support from app language state.
- Consider site in accept-language headers.
- Fix and refactor LanguageVariantTests.
- Misc refactoring.

Bug: T99965
Change-Id: I362e23ac2383d6ee81daf29d103ee8cc48c04bfd
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1433957323,1433982169,8bb3320f8207f03541bfb3db42e9dd038f8eaf2a
f0bca995764ccca566fa4ccaada6d005103b2bfa,f0bca995,Hygiene: remove Maven pom.xml files,"Hygiene: remove Maven pom.xml files

We've switched to Gradle builds on Jenkins, too. So, no need for pom.xml files anymore.
The extra pom.xml files also caused warnings when importing the project into AS.

Change-Id: If19aab7153c0cb9e202e93c872e5f65a3925f4bc
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1433950939,1433973648,8bb3320f8207f03541bfb3db42e9dd038f8eaf2a
8bb3320f8207f03541bfb3db42e9dd038f8eaf2a,8bb3320f,"Merge ""Fix thumbnails in saved pages list.""","Merge ""Fix thumbnails in saved pages list.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1433973043,1433973043,"7f2072778296646bf6562d56ad01260402a80d3c,d1b04db51f39be3847f3daf705877d25deeae7aa"
d1b04db51f39be3847f3daf705877d25deeae7aa,d1b04db5,Fix thumbnails in saved pages list.,"Fix thumbnails in saved pages list.

Bug: T102024
Change-Id: I818d129591020e26a03f02af81ddefea60f6b05d
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1433959999,1433959999,d8d5ee256692797f05be68a7934e1e50d7b53ea7
7f2072778296646bf6562d56ad01260402a80d3c,7f207277,Tweak local cache policy in app.,"Tweak local cache policy in app.

Presently, we load the cached version of a page regardless of how the page
was reached. This is a bit too aggressive, since some pages are expected
by users to be updated relatively frequently, and users don't want to use
(or aren't aware of) our pull-to-refresh feature.

This patch makes it so that pages are loaded from cache only when
navigating back through the current backstack of pages, or when coming
back from savedInstanceState. For ""forward"" navigation of pages, e.g.
clicking links, clicking history items, etc. will no longer use cache for
now.

This will be followed by a more comprehensive patch where we request the
current revision of the page from the network, and load the full page from
the network only if the revision is newer than what's cached.

Bug: T101845
Change-Id: Ide6c35cdedfa8c6ffc2ac3f4d89332270ecb0ef2
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1433950783,1433957776,8c5b11c4cb1a49b068bb5ab4bc6b0d100049d2e0
8c5b11c4cb1a49b068bb5ab4bc6b0d100049d2e0,8c5b11c4,Add more logging and error reporting to help diagnose page loading issues.,"Add more logging and error reporting to help diagnose page loading issues.

Bug: T95182
Change-Id: Ifbc2865ca40e2ae7e6c0454b53af222d76e8b73d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1432582360,1433877586,d8d5ee256692797f05be68a7934e1e50d7b53ea7
d8d5ee256692797f05be68a7934e1e50d7b53ea7,d8d5ee25,Remove sampling for link preview EL in Beta.,"Remove sampling for link preview EL in Beta.

Change-Id: I81ebbc7b4b36d84b4a75c9d4258464223d91aad8
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1433861187,1433870080,f37e5660caa2c0d41ebbe6b8e02659af05faa79e
f37e5660caa2c0d41ebbe6b8e02659af05faa79e,f37e5660,"Use separate random number for feature flagging, instead of appInstallID.","Use separate random number for feature flagging, instead of appInstallID.

Bug: T101833
Change-Id: Ifb4b09fa5787b6c552f36ebf9e8d22b667a8e6cd
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1433858140,1433870057,a4a9a6593f6ed0fb8e84efa27791c2bbe188525a
a4a9a6593f6ed0fb8e84efa27791c2bbe188525a,a4a9a659,Add active state to article edit pencil icons,"Add active state to article edit pencil icons

- Depends on MobileApp patches:
  - https://gerrit.wikimedia.org/r/213759
  - https://gerrit.wikimedia.org/r/216869

Bug: T99678
Change-Id: Ic61ca15aff7166dad72bf363a09b5bfd5de7af02
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1432589587,1433867743,50208e1c91c4b83b2b2d5447949a021f366f413f
50208e1c91c4b83b2b2d5447949a021f366f413f,50208e1c,"Add ""Search Wikipedia"" to system share options","Add ""Search Wikipedia"" to system share options

- Add Wikipedia as an available share option for all other apps. The
  share menu entry will appear as ""Search Wikipedia"".
- Display main page when pressing back after app entry from search
  widget.
- (Unrelated cleanup) Remove a couple unused functions and fix a
  Javadoc link in Utils.

Bug: T73234
Change-Id: I2d46ad08e14533fae3e35d3bdf636ef3e9b249b9
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1432319975,1433808207,6e8485cd72a02018b0300e3a7358e8a074c25baa
6e8485cd72a02018b0300e3a7358e8a074c25baa,6e8485cd,Move readme documentation to wiki,"Move readme documentation to wiki

Change-Id: Ia57bb2d5c28636685bbb8d6cd4af59b68e9df41c
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1433805045,1433806335,f5609c2e9ce19ece046039ee76604326a2ed97a1
f5609c2e9ce19ece046039ee76604326a2ed97a1,f5609c2e,"Merge ""Remove ""More information"" from image gallery menu""","Merge ""Remove ""More information"" from image gallery menu""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1433806315,1433806315,"901a5c28fb6a93ceb2a419947c804ab95eabce39,374e5ad9e6212c47725b3e7b49157f3eddc1c57b"
374e5ad9e6212c47725b3e7b49157f3eddc1c57b,374e5ad9,"Remove ""More information"" from image gallery menu","Remove ""More information"" from image gallery menu

Bug: T86810
Change-Id: Ida441e494cf11bcd7ba8155256011edb54e6fdd6
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1432159483,1433798274,118051eba1c7caf92ccec6a6a229579044bf0b5d
901a5c28fb6a93ceb2a419947c804ab95eabce39,901a5c28,Add dev launcher icon and name,"Add dev launcher icon and name

* Add dev launcher icons and app name.
* Move launcher icons, and app_name and channel strings into dev /
  alpha / beta folder structure.

Bug: T97238
Change-Id: I2c295cb0799c3dc0b945c5806015c753cb2ed4a9
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1431899304,1433797276,118051eba1c7caf92ccec6a6a229579044bf0b5d
118051eba1c7caf92ccec6a6a229579044bf0b5d,118051eb,"Merge ""Fix search bar text color after appcompat update.""","Merge ""Fix search bar text color after appcompat update.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1433775430,1433775430,"ccb059c459d98b9b1976092f889d7cfc83a1acfc,1d744ed3dabc399e1677d88ce760703626d0e2b4"
ccb059c459d98b9b1976092f889d7cfc83a1acfc,ccb059c4,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4fc116c4056fdda666d391b699ccad577cdc6552
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1433773396,1433773396,c3f665be6404a77b0b9b7845bdfaaef16944966e
1d744ed3dabc399e1677d88ce760703626d0e2b4,1d744ed3,Fix search bar text color after appcompat update.,"Fix search bar text color after appcompat update.

Bug: T101638
Change-Id: I98dada3d973c6d51a118a8964355545808919b86
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1433734121,1433734121,c3f665be6404a77b0b9b7845bdfaaef16944966e
c3f665be6404a77b0b9b7845bdfaaef16944966e,c3f665be,Fix possible crash when pulling out ToC (for real).,"Fix possible crash when pulling out ToC (for real).

Bug: T96358
Change-Id: If9738fd5352de3cfb337ff5ac63aa6d4bb8cea3c
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1433518734,1433534173,f0ad78c0ab5886846ae4c26e3eb0d7336be0816b
f0ad78c0ab5886846ae4c26e3eb0d7336be0816b,f0ad78c0,Upgrade appcompat-v7 to 22.2.0,"Upgrade appcompat-v7 to 22.2.0

* Upgrade appcompat-v7 to 22.2.0
* Replace deprecated ActionBarActivity with AppCompatActivity
* Very light refactoring of PageActivity

Bug: T98108
Change-Id: I31c782d075838724309de53d81c1ad2b4032a3ef
",,,,Stephen Niedzielski,stephen@niedzielski.com,Dbrant,dbrant@wikimedia.org,1431372959,1433519361,6e54c8d032cadecc413cbb936b72edf19d3d6986
6e54c8d032cadecc413cbb936b72edf19d3d6986,6e54c8d0,"Merge ""Update style fetcher script to work with MobileApp extension update.""","Merge ""Update style fetcher script to work with MobileApp extension update.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1433514935,1433514935,"dfa10476b969329f01658e66f62d7f4b67f73175,6f17499d37b7277828fe5d3f49d4bc04c91aae72"
dfa10476b969329f01658e66f62d7f4b67f73175,dfa10476,"Merge ""Add link to Wikipedia App FAQ to preferences menu.""","Merge ""Add link to Wikipedia App FAQ to preferences menu.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1433514107,1433514107,"ec950b1b9fb81a9cbc724a840c222e4bce4171b3,c7176d5bb274e3d3f33ee50af0997eefa34452c9"
c7176d5bb274e3d3f33ee50af0997eefa34452c9,c7176d5b,Add link to Wikipedia App FAQ to preferences menu.,"Add link to Wikipedia App FAQ to preferences menu.

Bug: T99783
Change-Id: If9e1e66e882e873effb4015cb2b2836e02656037
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1433266163,1433513350,c1ee101c0167ca1e64aeefc5821122b10e094f8b
6f17499d37b7277828fe5d3f49d4bc04c91aae72,6f17499d,Update style fetcher script to work with MobileApp extension update.,"Update style fetcher script to work with MobileApp extension update.

Also includes a refresh of styles from upstream MFE.

Refer to https://gerrit.wikimedia.org/r/213431

Change-Id: I73735d2142faec11d90dc42251c1b35db558e7a1
",,,,Dmitry Brant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1432502348,1433511100,a36040cb8a61e7587e90c22d442ee58a81e16f58
ec950b1b9fb81a9cbc724a840c222e4bce4171b3,ec950b1b,Use the new isMainPage() and isFilePage() methods added to the Page class.,"Use the new isMainPage() and isFilePage() methods added to the Page class.

Bug: T90843
Change-Id: I0e1d9561e4a1b9b7d50ae37cbc8848abe9a12472
",,,,kittensofdoom,theyeppei@gmail.com,bearND,bsitzmann@wikimedia.org,1431803255,1433480603,6c52d38e44552f8b5160d66b3bb3e610ef4bbcab
6c52d38e44552f8b5160d66b3bb3e610ef4bbcab,6c52d38e,Fix tag naming in make-release,"Fix tag naming in make-release

Change-Id: I8c10304a51b465bc160e05ca1032622aae042460
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1432007950,1433479723,83e7f0ffac160453ec205393bf2a96659e44f368
83e7f0ffac160453ec205393bf2a96659e44f368,83e7f0ff,Fix backstack and editing issues from last patch,"Fix backstack and editing issues from last patch

Issue was caused by my earlier patch Ibf571c12f6d462f63cac1db52e30ad17a7215a59.

The backstack was not retained since it got moved to JsonPageLoadStrategy,
which was recreated during onActivityCreated.

Editing was busted since the previous patch did not call editHandlersetPage often enough.

The HtmlPageLoadStrategy still needs to use EditHandler.

Bug: T101363 T101361
Change-Id: I7f0b96e41486e6c225b925b8b32be1f3a9bcadee
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1433430882,1433432087,412182ac4229a3a651d7c1a566bb33620fc7e758
412182ac4229a3a651d7c1a566bb33620fc7e758,412182ac,Alpha: Allow using experimental page content service,"Alpha: Allow using experimental page content service

The main change is really a refactor/splitting up of PageViewFragmentInternal,
so we can easily switch between the two page load strategies:
the old one is JSON based,
the new one is HTML based via WebView.loadUrl().

You can switch between the page load strategies by checking the
CheckBox at the bottom of the Theme chooser dialog.
The transition between the two strategies is not ideal since it
doesn't automatically reload the page, but good enough for
occasional/experimental switching.
(The old strategy has an explicit backstack we maintain, the new one doesn't.)
A page refresh right after this will crash the app.
Better use load a new page instead (Today, Random,  search, ...)

Warning: there may still be some crashes while using the experimental mode.
Using the regular page load mode should behave as it did before.

Bug: T91798
Change-Id: Ibf571c12f6d462f63cac1db52e30ad17a7215a59
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1427778618,1433373223,c1ee101c0167ca1e64aeefc5821122b10e094f8b
c1ee101c0167ca1e64aeefc5821122b10e094f8b,c1ee101c,"Merge ""Fix margins on link preview dialog 2 (display correctly on tablets)""","Merge ""Fix margins on link preview dialog 2 (display correctly on tablets)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1433261980,1433261980,"cfb2d88b5672024acd050b974db37f139eb38d3c,b6c2a6eea6cfe93273ebb421e0257670ec5d9bd4"
cfb2d88b5672024acd050b974db37f139eb38d3c,cfb2d88b,Fix toolbar translucency when TOC closed,"Fix toolbar translucency when TOC closed

SimpleDrawerListener.onDrawerClosed is not called unless the DrawerLayout is
closed after reaching a fully open state (i.e., not when slightly opened and
closed again).

This patch fixes the toolbar translucency checks so that setForceNoFace is
reset to false whenever the drawer is out of sight rather than relying
on reaching onDrawerClosed.

Bug: T100382
Change-Id: Ia3507fb9391d64c553801cd46c06b383c88f8bba
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1432845919,1432907886,07f8a961fc20a8df429a45e827732ccc3ec46657
b6c2a6eea6cfe93273ebb421e0257670ec5d9bd4,b6c2a6ee,Fix margins on link preview dialog 2 (display correctly on tablets),"Fix margins on link preview dialog 2 (display correctly on tablets)

Bug: T100677
Change-Id: I540570cb54b93fcbfad35540d0901ed6f97d0307
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1432841597,1432841597,07f8a961fc20a8df429a45e827732ccc3ec46657
07f8a961fc20a8df429a45e827732ccc3ec46657,07f8a961,"Merge ""Fix TextView directionality issue for mixed LTR and RTL strings""","Merge ""Fix TextView directionality issue for mixed LTR and RTL strings""",,,,Mholloway,mholloway@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1432755817,1432755817,"3097e74c9204697f65cccb5f997a8e93e06f914b,e6a4ea69a89d5303f4bd1ad9ffe2e9c4a043f9c2"
3097e74c9204697f65cccb5f997a8e93e06f914b,3097e74c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I6918d222ad267adcbfa11db18da2fdb78b9e89fb
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1432552046,1432552046,a36040cb8a61e7587e90c22d442ee58a81e16f58
a36040cb8a61e7587e90c22d442ee58a81e16f58,a36040cb,"Merge ""Updates to README file""","Merge ""Updates to README file""",,,,Michael Holloway,mholloway@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1432246570,1432246570,"fce6d49b56479f2f7aa043e74050d64e62c8ef42,3df9c2c98db3e91c32c6ccba83a44470e69ff856"
3df9c2c98db3e91c32c6ccba83a44470e69ff856,3df9c2c9,Updates to README file,"Updates to README file

Change-Id: I6a795fcab7dd56a461d3e55b8d4c85f3c14e45e9
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1431727598,1432242422,2cd1f30b07e9b556ea19936e2efad6448e845f67
fce6d49b56479f2f7aa043e74050d64e62c8ef42,fce6d49b,"Merge ""Switch to System.nanoTime() for time measurements in SearchResultsFragment""","Merge ""Switch to System.nanoTime() for time measurements in SearchResultsFragment""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1432048819,1432048819,"a573a46466d4d2aee8022ec5588ee83f6a142798,8acf3380002d07170fe570627224ed316dc3e13c"
a573a46466d4d2aee8022ec5588ee83f6a142798,a573a464,Hygiene: convert field to local variable in CabSearchView,"Hygiene: convert field to local variable in CabSearchView

This patch converts a field in CabSearchView to a local variable, as the field
is only referenced within the context of a single method. This improves
performance, albeit in a miniscule manner.

Change-Id: I5366250b59b45190debb57831378bb0abd3a847f
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1431821046,1431988536,b9f1c6d817ec8ac95a520feb277a315a52e333f8
8acf3380002d07170fe570627224ed316dc3e13c,8acf3380,Switch to System.nanoTime() for time measurements in SearchResultsFragment,"Switch to System.nanoTime() for time measurements in SearchResultsFragment

Presently the app uses System.currentSystemMillis() to measure time
intervals. This method is subject to changes in the system clock, which can
throw off time measurements rather substantially. This patch changes
SearchResultsFragment to use System.nanoTime() instead, which is not subject
to changes in the system clock and actually has a higher level of precision
anyway. This should fix the issue where some search result sets were
allegedly being displayed many days before the user even typed the query in.

Bug: T99577
Change-Id: I843e63a0d96edcf6534c04c97cdaf5c4348bedc2
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1431987647,1431987970,b9f1c6d817ec8ac95a520feb277a315a52e333f8
b9f1c6d817ec8ac95a520feb277a315a52e333f8,b9f1c6d8,Add Simplified and Traditional Chinese dialects,"Add Simplified and Traditional Chinese dialects

* Add Simplified and Traditional Chinese dialect support (zh-hans and
  zh-hant).
* Replace Chinese with Simplified and Traditional Chinese in
  generate_wiki_languages. Additionally, some light refactoring.
* Clean up WikipediaApp.getAcceptLanguage().

Bug: T62743
Change-Id: I723db2a288684b7e8fa4fd26b50ff59317e5a354
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1431964825,1431964825,c08382c361a550250eb0072d1cb842a0e37b8017
c08382c361a550250eb0072d1cb842a0e37b8017,c08382c3,Add system language support,"Add system language support

- Add UI support for using system language and update the WebView when
  the system language changes out of app.
- Fix language generation script and update language ordering.
- Don't rely on Site domain to derive language. This will not always be
  possible. Update Site.equals(), hashCode(), and toString().
- Light refactoring in Site and WikipediaApp.
- Rename lang and primaryLanguage to language in several places.

Change-Id: I3903bdf6b70da560487206f35484af2ce2c677da
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1431040380,1431964402,de0b8b579f5030f6843e3bc63b044edc18b2a1a1
de0b8b579f5030f6843e3bc63b044edc18b2a1a1,de0b8b57,"Remove main and disambiguation pages from ""read more"" section","Remove main and disambiguation pages from ""read more"" section

Bug: T95365
Change-Id: Iacaa689e8f8760ea1609160c0fc5d568eff1ccb0
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1431376125,1431956103,12077a331acf1531629356cf90796b7628218981
12077a331acf1531629356cf90796b7628218981,12077a33,"Merge ""Refactor: Move PageTitle and PageQueryTask classes to package org.wikipedia.page""","Merge ""Refactor: Move PageTitle and PageQueryTask classes to package org.wikipedia.page""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1431954920,1431954920,"4bf74664da03b38f720a3aeb3964cfdcb10b4e92,428599af724c11f5da6567c321813641cc994eb6"
4bf74664da03b38f720a3aeb3964cfdcb10b4e92,4bf74664,Hygiene: remove unused field from NightModeHandler,"Hygiene: remove unused field from NightModeHandler

This patch removes an unused field from NightModeHandler, improving code
cleanliness and performance.

Change-Id: I9d9b13f35814115549386076454451f7bb5ba24e
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1431821308,1431821308,454ae2be5b43212c1fa64a90073b1301e2a92151
454ae2be5b43212c1fa64a90073b1301e2a92151,454ae2be,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4bace589a005d8bd05cc432b4640c8b2d905ac6f
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1431795961,1431795961,2cd1f30b07e9b556ea19936e2efad6448e845f67
2cd1f30b07e9b556ea19936e2efad6448e845f67,2cd1f30b,Bump versionCode,"Bump versionCode

Change-Id: Ia5d856e3f4ddfea2e3de7de9e6cc45f8ac34dae3
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1431636530,1431636530,eba3921ce6f5b3275dc1101d079541b7d0c993a6
eba3921ce6f5b3275dc1101d079541b7d0c993a6,eba3921c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ic5150ed2ea70d12c4c56b2da3d199985c3583c8f
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1431635219,1431635219,b316b11ba9f70d3adc8fc80825f931590f4e476a
b316b11ba9f70d3adc8fc80825f931590f4e476a,b316b11b,"Merge ""Remove app id from page view requests""","Merge ""Remove app id from page view requests""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1431547327,1431547327,"ce3b51b05fd8726db02a1cb94a50c91557c28ff9,276c86d09021c95d3aba7bf42e6e20859771e6ff"
ce3b51b05fd8726db02a1cb94a50c91557c28ff9,ce3b51b0,Add upside down mode,"Add upside down mode

* Add upside down mode for API 18+ devices
* Add JellyBean MR2 function to ApiUtil

Change-Id: Id88477b32c6db04c11cbc3e6ffbd58ae99a33d99
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1431214417,1431542099,8b318a2b1ae4d3681e42549e967d7981ab384a3d
276c86d09021c95d3aba7bf42e6e20859771e6ff,276c86d0,Remove app id from page view requests,"Remove app id from page view requests

Also avoid sending X-WMF-UUID header right after the opt-in to
send usage reports gets revoked.

Change-Id: I7cf23ab3779cc437e44a7922b236480ca3840d67
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1429736705,1431541068,8b318a2b1ae4d3681e42549e967d7981ab384a3d
428599af724c11f5da6567c321813641cc994eb6,428599af,Refactor: Move PageTitle and PageQueryTask classes to package org.wikipedia.page,"Refactor: Move PageTitle and PageQueryTask classes to package org.wikipedia.page

Change-Id: I5ed9770d7f68283e29fc6c067a2fd58f0db9c09d
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1431530349,1431530635,8b318a2b1ae4d3681e42549e967d7981ab384a3d
8b318a2b1ae4d3681e42549e967d7981ab384a3d,8b318a2b,LinkPreviewDialog: fix bug in EventLogging patch,"LinkPreviewDialog: fix bug in EventLogging patch

Change-Id: I92fd15450c4c4f615bb4a2c74b1af09df90cbfa1
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1431525473,1431525473,fcfce6bc1de68ae0b41c92c489ebcbdbba2470c1
fcfce6bc1de68ae0b41c92c489ebcbdbba2470c1,fcfce6bc,Add event logging for link preview,"Add event logging for link preview

Bug: T95726
Change-Id: I07e7338b8beff162129f0d0c90c46e683f779cef
",,,,Michael Holloway,mholloway@wikimedia.org,Dbrant,dbrant@wikimedia.org,1431091232,1431522822,b2d46b5316f1ee2c7709f66087cd70b1366a874a
b2d46b5316f1ee2c7709f66087cd70b1366a874a,b2d46b53,Prepare for death of bits.wikimedia.org,"Prepare for death of bits.wikimedia.org

- Moves static asset checking to metawiki, since this is done
  in a language neutral way and so does not matter which wiki
  it is done in.
- Moved eventlogging beacon endpoint to metawiki. Again, this
  is also in a language neutral way and it doesn't matter which
  wiki this is done in
- The CSS styles updater now hits the language wiki for the
  appropriate language directly

Bug: T98404
Bug: T95448
Change-Id: I032623862ff4ac2eb4afa3c38ac0a793c806dc0b
",,,,YuviPanda,yuvipanda@gmail.com,BearND,bsitzmann@wikimedia.org,1430526207,1431472349,215f1c4a53453cbabaaaca566c2364f5f58dcd27
215f1c4a53453cbabaaaca566c2364f5f58dcd27,215f1c4a,Handle image map links in-app,"Handle image map links in-app

Bug: T87066
Change-Id: I79be02fa6e0bced25e47b0ea6100c9460be8ea7e
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1431106375,1431471818,3adbf8695060fc7bdb2707af6292572c1c672288
3adbf8695060fc7bdb2707af6292572c1c672288,3adbf869,No longer download CSS from the app.,"No longer download CSS from the app.

Bug: T98601
Change-Id: Ie59ed60a0cffed653cb216c6e1e9b96641ea7951
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1431358641,1431456137,2f448772539358be3db83ca091c5637743f79310
2f448772539358be3db83ca091c5637743f79310,2f448772,Enhance debug logging capabilities,"Enhance debug logging capabilities

* Add Hugo plugin
* Add L logger
* Extremely minor and unrelated whitespace adjustment in AndroidManifest.xml.

Change-Id: I5a6364eb04a2d55555aa9ed9057b58ee03b0864a
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1431223594,1431223868,24a394a4056bfabca9745e9ec02e35334ed10a91
24a394a4056bfabca9745e9ec02e35334ed10a91,24a394a4,Make sure Share button works on all devices.,"Make sure Share button works on all devices.

Also improves and simplifies the sharing logic.
I moved the ShareAdapters into the PageViewFragment instead of
PageActivity. It's also no longer using the clipboard for retrieving
selected text, but a Javascript interaction instead.

For devices in which we can't hook into the default Share button provided
by the WebView's context menu, we now inject our own Share button. So, on
those devices, the user might see two share buttons, but it's better than
not exposing our Share functionality at all.

Bug: T96144
Change-Id: Icfe1fbb97575e8174a647d6c86b4eb9120332d5f
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1430932674,1431034519,6bfa321f74011d81789022470e6166827bcbb9f9
6bfa321f74011d81789022470e6166827bcbb9f9,6bfa321f,Minor WikipediaApp clean up,"Minor WikipediaApp clean up

- Miscellaneous minor clean up changes in WikipediaApp, mostly around
  languages.

Change-Id: I1352eaa40b4c759921c556335da7648e3474fe38
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1430874760,1430959443,d48a15c36a5a1be1a761d42ea026153f005f29dd
d48a15c36a5a1be1a761d42ea026153f005f29dd,d48a15c3,Add Stephen to credits,"Add Stephen to credits

Change-Id: I3e39c9e752406b5a926395d3b508929b9a2d8951
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1430860861,1430860861,8cc0c6d5751df47e70652304f7bed33575dd9311
8cc0c6d5751df47e70652304f7bed33575dd9311,8cc0c6d5,Fix sharing of images to Facebook app.,"Fix sharing of images to Facebook app.

The Facebook app requires us to explicitly specify a mimetype of
image/jpeg when sharing an image, whereas we were previously specifying
""*/*"".

I simply modified the shareImage() function to always specify
""image/jpeg"", since that's all it can ever be.

Note that the Facebook app still doesn't seem to do anything with the
EXTRA_TEXT that we pass into the share intent, but we can't do much about
it, since it's up to the receiving app to handle the text correctly.

Bug: T97858
Change-Id: Ie9d333d7105c3acfa7004df86a8a17dbd6e78c1e
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1430758177,1430855356,c732768f5e7f81d1b50db125d0b364879c114655
c732768f5e7f81d1b50db125d0b364879c114655,c732768f,"Merge ""Replace Android version checks with calls to ApiUtil""","Merge ""Replace Android version checks with calls to ApiUtil""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430843251,1430843251,"9b12484643f2002cd41c62c399aa54b6ccc39fb0,2915305ecadb0dd475eba442ca02bb2d5773c586"
9b12484643f2002cd41c62c399aa54b6ccc39fb0,9b124846,"Merge ""Change version number format to include versionCode as subminor number""","Merge ""Change version number format to include versionCode as subminor number""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430838091,1430838091,"86183aaf6985a5dc5366022820eb8745b656428e,954656a373514d55807e3c12f9cb13beee715abb"
e6a4ea69a89d5303f4bd1ad9ffe2e9c4a043f9c2,e6a4ea69,Fix TextView directionality issue for mixed LTR and RTL strings,"Fix TextView directionality issue for mixed LTR and RTL strings

Some TextViews are displaying mixed LTR and RTL text incorrectly, formatting
it as if it's an LTR string, which results in incorrect display. This patch
fixes those TextViews to display as appropriate. Note: the fix was confirmed
to be the correct way of displying mixed text by a Hebrew speaker (Matanya
on the Phabricator task.

Bug: T97958
Change-Id: Idec520cbc9ee8db8d691c2f487d2bfd0042f7bae
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1430684582,1430797846,f90adeeadf816b5747db673c4bb4c191c991cee1
2915305ecadb0dd475eba442ca02bb2d5773c586,2915305e,Replace Android version checks with calls to ApiUtil,"Replace Android version checks with calls to ApiUtil

Change-Id: I40d360997a0b4f07429d02f3f2604135efbb385f
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1430787731,1430787731,86183aaf6985a5dc5366022820eb8745b656428e
86183aaf6985a5dc5366022820eb8745b656428e,86183aaf,"Merge ""Prohibit context action bar and fix rotation bugs""","Merge ""Prohibit context action bar and fix rotation bugs""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430785941,1430785941,"2699448b7a085e6eaa8b67b162d81fc4aaf763de,e8d7b1c6442b510b88c2e173729b7505ffda7b2e"
e8d7b1c6442b510b88c2e173729b7505ffda7b2e,e8d7b1c6,Prohibit context action bar and fix rotation bugs,"Prohibit context action bar and fix rotation bugs

- Prohibit CAB in toolbar fields, ""search Wikipedia"" and ""find in
  page"". Add ""CabSearchView"" which exposes this functionality.
- Permit CAB in non-toolbar fields including the article, history
  search, and saved pages search.
- Don't extract EditText input field UI everywhere.  This change
  effects landscape mode only.
- Fix bug wherein the search box disappeared on rotation with nonempty
  query text yielding no results. This was caused by successfully
  preserving UI state but not Fragment state.
- Fix bug wherein the ""find in page"" search box did not fill the
  available space. This was caused by an obscure option on the poorly
  conceived SearchView.
- Add ""ApiUtil"".
- Be more precise about the source of action bar mode.
- Specify soft keyboard done button for edit preview, create account,
  create account captcha, and find in page.
- Fix comments around action bar mode.
- Rename activity_main.xml layout to activity_page.xml layout to match
  Java structure.
- Minor adjustment to use Map instead of HashMap in
  CommunicationBridge.
- Add missing Java override annotation on method.

Bug: T88768
Change-Id: Ia25dbfbd7cbc2e72e0da7c136fb3124a6196fb80
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1430259473,1430776427,9e5eb93e5b643c02006a5687f9ee76003ca36c68
2699448b7a085e6eaa8b67b162d81fc4aaf763de,2699448b,Fix possible NPE when pulling out ToC.,"Fix possible NPE when pulling out ToC.

Also improves consistency of when it's possible to pull out the ToC.

Bug: T96358
Change-Id: Id7c45a3a9cc8ecf202c7622039ba76f2a59e0090
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1430756726,1430758243,9e5eb93e5b643c02006a5687f9ee76003ca36c68
9e5eb93e5b643c02006a5687f9ee76003ca36c68,9e5eb93e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I2203a5bfaec62c0f90077fe7906a00cc49865d20
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1430754823,1430754823,ac4ab66e4c4c216aad58fb73c56f9dc3e84ebdaa
ac4ab66e4c4c216aad58fb73c56f9dc3e84ebdaa,ac4ab66e,"Merge ""Increase ""tap to expand"" click area""","Merge ""Increase ""tap to expand"" click area""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430747784,1430747784,"da0ddb1fd467701f33ba4356347e65c1199a41d8,af886ef1acc4d9ae645d785f9b4c7a6a52a87509"
da0ddb1fd467701f33ba4356347e65c1199a41d8,da0ddb1f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I9fbe09809a459e4172d131e5f595cf49295c08e1
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1430730618,1430730618,f90adeeadf816b5747db673c4bb4c191c991cee1
af886ef1acc4d9ae645d785f9b4c7a6a52a87509,af886ef1,"Increase ""tap to expand"" click area","Increase ""tap to expand"" click area

- Make the click area for open and close states identical by adjusting
  visibility.

Bug: T86860
Change-Id: If8b09c76a34af7ff306ae09196ff62f1bc2552b3
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1430549626,1430549626,f90adeeadf816b5747db673c4bb4c191c991cee1
f90adeeadf816b5747db673c4bb4c191c991cee1,f90adeea,Link previews (prototype 2),"Link previews (prototype 2)

* A single preview panel with text overlaid directly onto the
lead image of the target article.
* Also includes Wikidata description underneath the title.

Bug: T95723
Change-Id: I89ad1d8b4be7b8d1967129cf8c0d4dfbbb71cf18
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1428709823,1430431051,5b9db6e227732f17b488e141cd4f6cf2a875ab8e
5b9db6e227732f17b488e141cd4f6cf2a875ab8e,5b9db6e2,Link previews (prototype 1 + feature flags),"Link previews (prototype 1 + feature flags)

Display a ""preview"" version of a target article in a native component.

* 60/40 proportion for page text extract vs. image
* Tapping anywhere within the card (including title link) takes you to the page
* Added rudimentary gesture detector:
** Fling up: go to page
** Fling down: dismiss
* Improved splitting of sentences by using client-side BreakIterator.
* Displaying a single sentence by default, and two sentences if the first
sentence is shorter than four lines.
* Added three-way feature flag:
** 50% of users (and the production app) will see the original behavior (no preview)
** 25% of users will see prototype 1 (this patch)
** 25% of users will see prototype 2 (the next patch)
* Refactored feature-flagging code a bit.

Note: In the first few revisions of this patch, I added support for ""long-press""
handlers to our ObservableWebView, but ended up not using it in the final version.
However, I left it in there anyway, since it will surely come in handy later.

Bug: T95030 T96068
Change-Id: I599c9948184e478dc8b377499680621af3e1caf0
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1428319317,1430430772,0b958ee87b7179c28d1e6946b3eaeedf73ae5570
0b958ee87b7179c28d1e6946b3eaeedf73ae5570,0b958ee8,Make some PersistenceHelpers set the namespace of pages as appropriate,"Make some PersistenceHelpers set the namespace of pages as appropriate

Currently, SavedPagePersistenceHelper and HistoryEntryPersistenceHelper do
not set the namespace of a page appropriate, setting it to null. I'm not sure
why it was implemented that way.

This patch makes SavedPagePersistenceHelper and HistoryEntryPersistenceHelper
set the namespaces of pages appropriately.

Fortunately, the method in which the database is upgraded ensures the old
entries are still compatible with the new system. They'll continue to suffer
the same problem where the pages are constructed with null namespaces, but
otherwise they'll work as intended without any tweaking.

Bug: T96944
Change-Id: I64b6ae2d72caa9c535f6a2a5627dc7a23eb2f6f7
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1430368737,1430411765,abad08e8c9c0dd1266ca93892bf5e577e83355c4
abad08e8c9c0dd1266ca93892bf5e577e83355c4,abad08e8,Fix language picker word wrap,"Fix language picker word wrap

* Fix word wrap case where language header text is shorter than
  subtitle text. For example, 中文 / Chinese would cause the
  ""Chinese"" subtitle to break at the final e and span onto a second
  line.

Change-Id: Ifff97b451b2fdc2a6bec6cb8bbaa929b20d634d3
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1430337620,1430397544,e784beef8076ed7a3356e4edebc9e64fbf836faf
954656a373514d55807e3c12f9cb13beee715abb,954656a3,Change version number format to include versionCode as subminor number,"Change version number format to include versionCode as subminor number

I'm proposing to include the versionCode into the version name format.
This will make version names more distinct, albeit for now there's a bit of redundancy.

Example:
2.0-beta-2015-04-09 becomes
2.0.100-beta-2015-04-09

I think eventually we could even consider getting rid of the date portion but
I'll keep it for now to make the transition smoother.

Had to also change the make-release.py script since it generated the version
name itself based on the date the command was run.
I'd like to get away from that and use the apk file to derive the version name.
It uses the versionCode from the build.gradle file.

To be able to extract the versionName from the apk it needs to know the location
of the aapt tool, which is under $ANDROID_HOME/build-tools/<build_tools_version>.
Again, the build_tools_version is retrieved from the build.gradle file.

Bug: T95584
Change-Id: Icb6a076181bb1e696be5b646a6891c442d4d6d69
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1428594553,1430396249,e784beef8076ed7a3356e4edebc9e64fbf836faf
e784beef8076ed7a3356e4edebc9e64fbf836faf,e784beef,"Merge ""Eliminate ""read next.""""","Merge ""Eliminate ""read next.""""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430351125,1430351125,"d4bc133d09ba40839c35b93afc7ac540ba7da782,4eadf0905aacbd1fe1843c03d4ae8d2de13fb3fe"
4eadf0905aacbd1fe1843c03d4ae8d2de13fb3fe,4eadf090,"Eliminate ""read next.""","Eliminate ""read next.""

Bug: T96709
Change-Id: I0aa1df3fcc5bd3f030ad8575d343330c13b37fd2
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1430294904,1430350858,16fdd730a566a3af88127eb53213e6694340a0d5
d4bc133d09ba40839c35b93afc7ac540ba7da782,d4bc133d,Fix text directionality consistency in Nearby.,"Fix text directionality consistency in Nearby.

Also fix description capitalization in Nearby items.

Bug: T74554
Change-Id: I7078e171f0a9224705ea6afa0627399275304f6d
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1430345843,1430345843,16fdd730a566a3af88127eb53213e6694340a0d5
16fdd730a566a3af88127eb53213e6694340a0d5,16fdd730,"Merge ""Hygiene: fix preview test""","Merge ""Hygiene: fix preview test""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430340114,1430340114,"3c0a7d298e58ba52854a170bb4897b884d31e2c3,5f32dde323f2bd4e324baeaed71502ce8124eaff"
3c0a7d298e58ba52854a170bb4897b884d31e2c3,3c0a7d29,"Show ""Read in other languages"" only if article exists in other languages","Show ""Read in other languages"" only if article exists in other languages

Currently, the app shows ""Read in other languages"" indiscriminately,
regardless of whether the article exists in other languages or not.
Fortunately, mobileview provides a ""languagecount"" property which can be
retrieved when the article is fetched, so this menu item can be
displayed conditionally.

This patch changes ""Read in other languages"" to only be visible if there
are other languages to read it in.

Bug: T68198
Change-Id: I3a8b36ff3c0304d93c373c6579656b5510545bd2
",,,,Dan Garry,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1430024417,1430336736,ad55d104c899a64a4ca000a3c6992294a7d7b5cb
ad55d104c899a64a4ca000a3c6992294a7d7b5cb,ad55d104,"Hide caption on ""tap to expand"" table when open","Hide caption on ""tap to expand"" table when open

Bug: T86860
Change-Id: I2321817aa5b3b13a5a7807c3b0f30fefb75fe162
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1430249277,1430336590,2844b0eb1419491e1d688cd3ea107b09b7223eec
5f32dde323f2bd4e324baeaed71502ce8124eaff,5f32dde3,Hygiene: fix preview test,"Hygiene: fix preview test

Change-Id: Ibd9ac35082d5824dce33d56eafde97101414c8a1
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1430336300,1430336300,2844b0eb1419491e1d688cd3ea107b09b7223eec
2844b0eb1419491e1d688cd3ea107b09b7223eec,2844b0eb,"Merge ""Minor improvements to readme""","Merge ""Minor improvements to readme""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430320636,1430320636,"7936a8349a34aaf6cb6e09d52703e3f80f2a0c04,c0bfbc62da9de2f070e2df78dfb911310b304462"
c0bfbc62da9de2f070e2df78dfb911310b304462,c0bfbc62,Minor improvements to readme,"Minor improvements to readme

* Use Pip instead of EasyInstall.
* Add note on Vagrant / emulator conflict.
* Add note on code, commit, and doc conventions.
* Fix some capitalizations.

Change-Id: I0d5e7e39f057635758fbfc601aa20aed8b79e1c5
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1429403649,1430320332,95fc234d6eff35ceaf22135ca49b82375023bfa1
7936a8349a34aaf6cb6e09d52703e3f80f2a0c04,7936a834,Tighten Up Drawer Drag Margins,"Tighten Up Drawer Drag Margins

- Set drawer drag margins at 16 dp, the minimum content margin. This
  differs from the canonical Android size of 20 dp but appears to be
  the ideal size for the Wikipedia Android app, and is constant for all
  display configurations.
- Rename DisableableDrawerLayout, which offers more than it claimed, to
  WikiDrawerLayout, a generic Wikipedia-extended drawer. Expose
  setDragEdgeWidth(), remove hardcoded margin, call this() instead of
  super() where possible, and reorder methods.
- Add new dimension, content_margin, which is currently identical to
  activity_horizontal_margin.
- Add DimenUtil and apply where obviously functionally identical.

Bug: T96341
Change-Id: Ie10cfb60ac1937dfb6b4e232c5f10f8817350c0c
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1429588846,1430320216,95fc234d6eff35ceaf22135ca49b82375023bfa1
95fc234d6eff35ceaf22135ca49b82375023bfa1,95fc234d,"Merge ""Fix for some pages incorrectly showing as protected""","Merge ""Fix for some pages incorrectly showing as protected""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430271579,1430271579,"9b6a7e05ec14a131112e13ef0286a9fe987cdd13,99b3747820d2c9ace1404cd49d705b6affb44483"
9b6a7e05ec14a131112e13ef0286a9fe987cdd13,9b6a7e05,"Merge ""Hygiene: add some documentation to OnboardingActivity""","Merge ""Hygiene: add some documentation to OnboardingActivity""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430267784,1430267784,"601a0e2c73d1c3f6a08c01e35403d485a6d30f0d,0449a824222a95cc92b6fb3c2d09921393cd3152"
601a0e2c73d1c3f6a08c01e35403d485a6d30f0d,601a0e2c,"Merge ""Avoid requesting unused information from API in NearbyFetchTask""","Merge ""Avoid requesting unused information from API in NearbyFetchTask""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430267304,1430267304,"f3ec2fba5efbefb94ef9513bcfdb3dbde9bd511a,6b17b8ce1ec2eb24bd2cd36d4becf3907da8806a"
99b3747820d2c9ace1404cd49d705b6affb44483,99b37478,Fix for some pages incorrectly showing as protected,"Fix for some pages incorrectly showing as protected

Unfortunately, the ""editable"" key in the mobileview response does not behave
as you would expect. See the task for more info. This solution to the problem
is incredibly stupid, but it does result in the correct behaviour.

Bug: T97483
Change-Id: I35e4e96f3c4e1453c026a6ea56460853f5a04e2c
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1430264763,1430265593,d613ad25295e25c583db2dbf6b094dea83d09d69
f3ec2fba5efbefb94ef9513bcfdb3dbde9bd511a,f3ec2fba,Handle some more login API errors.,"Handle some more login API errors.

This patch handles two additional errors in the login workflow, ""Illegal"" and
""WrongPluginPass"". The API returns ""Illegal"" if the username the user tried
to log in with is invalid, and returns ""WrongPluginPass"" if an authentication
extension like CentralAuth blocked the login. Our API experts advised us that
API consumers should treat WrongPluginPass and WrongPass as the same, so this
patch does that.

Bug: T97477
Change-Id: Ib5a45fb6f02a4d0889455f45bb713f4213443aa8
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1430257859,1430260101,d613ad25295e25c583db2dbf6b094dea83d09d69
0449a824222a95cc92b6fb3c2d09921393cd3152,0449a824,Hygiene: add some documentation to OnboardingActivity,"Hygiene: add some documentation to OnboardingActivity

OnboardingActivity was a bit sparse, documentation-wise. This patch adds some
documentation to the class so that it's more accessible and understandable
what's happening.

Change-Id: I95f0f1e7443334ba85109e540a18cd55e39aa363
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1430200556,1430200556,d613ad25295e25c583db2dbf6b094dea83d09d69
6b17b8ce1ec2eb24bd2cd36d4becf3907da8806a,6b17b8ce,Avoid requesting unused information from API in NearbyFetchTask,"Avoid requesting unused information from API in NearbyFetchTask

NearbyFetchTask currently requests a pageimage property that it doesn't use.
This changes NearbyFetchTask to explicitly not request that property, which
will slightly reduce data usage for the user with no UI changes.

Change-Id: I92a758975915e50f0c02e998161ff2e5a014d4b5
Task: T97276
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1430199452,1430199452,d613ad25295e25c583db2dbf6b094dea83d09d69
d613ad25295e25c583db2dbf6b094dea83d09d69,d613ad25,"Hygiene: create decodeURL method in Utils, and use it everywhere.","Hygiene: create decodeURL method in Utils, and use it everywhere.

This patch implements a decodeURL method in Utils that uses URLDecoder to
decode a URL-encoded string into its UTF-8 equivalent, and then uses that
everywhere instead of directly using URLDecoder. This reduces code redundancy
and increases code cleanliness.

Change-Id: If2ca604eee35ec9158eb5e7317193122b16bb9f0
",,,,Deskana,dgarry@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1430176126,1430178563,159b5dc7eab63ea626738cdc1bbb5c139ab16f22
159b5dc7eab63ea626738cdc1bbb5c139ab16f22,159b5dc7,"Merge ""Run disambiguation links through URLDecoder""","Merge ""Run disambiguation links through URLDecoder""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430178298,1430178298,"71b138f877e2fc93da9a681cd238c8a3ece04b3a,2af7a66c5347e369f406ec18fdff473e12ea825d"
71b138f877e2fc93da9a681cd238c8a3ece04b3a,71b138f8,"Merge ""Fix DoEditTask related tests""","Merge ""Fix DoEditTask related tests""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1430170259,1430170259,"22150805c322f4e94343cf6aaae9e038ee6406aa,35fe9be50677fc9dfeca3afcaf49535eef25420b"
2af7a66c5347e369f406ec18fdff473e12ea825d,2af7a66c,Run disambiguation links through URLDecoder,"Run disambiguation links through URLDecoder

This patch changes the app to run disambiguation links through a URL decoder,
and falls back to using the old system of displaying the encoded URL if
there's some problem with the decoding.

In some cases URL encoded links were shown to the user, which in the best
case just looks bad and is confusing, but in the worst case actually causes
the links to be incorrect and navigation to fail. This patch fixes that.

Bug: T97200
Change-Id: I4ed27184ad5ebb5bfe8ddfbea4b2fbc706c25918
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1430018105,1430018105,f5c7d3786c8ccf2f376f8af64259764d33b8ad05
22150805c322f4e94343cf6aaae9e038ee6406aa,22150805,Bump versionCode,"Bump versionCode

Change-Id: I12650359ed45817ca383c6a473aa2eb648babbd6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1429828858,1429828858,627c2982a0854dec1c421397a645d6778e20fb33
627c2982a0854dec1c421397a645d6778e20fb33,627c2982,Undo right-alignment of RTL languages in lists,"Undo right-alignment of RTL languages in lists

Change-Id: Ie48c94668baf7d9e4904600ee37762a578c1b0f7
Bugs: T95895, T95213
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1429827159,1429827362,3c6d583cd083f0953bc7bc9a6905a27e1d1d0142
35fe9be50677fc9dfeca3afcaf49535eef25420b,35fe9be5,Fix DoEditTask related tests,"Fix DoEditTask related tests

The constructor signature had changed.
Also updating the gradle-wrapper.

Change-Id: I2d51004d51da52e2705275b9f377048115532743
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1429825408,1429825408,3c6d583cd083f0953bc7bc9a6905a27e1d1d0142
3c6d583cd083f0953bc7bc9a6905a27e1d1d0142,3c6d583c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I9b17d10b6d2f5a37cb66c19e6101952873a89caa
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1429824401,1429824401,8665a0f22a9912ce649962f46174539595cdd5a5
8665a0f22a9912ce649962f46174539595cdd5a5,8665a0f2,"Don't display ""read more"" suggestions outside main namespace","Don't display ""read more"" suggestions outside main namespace

This patch changes the ""read more"" suggestions to not display outside the main
namespace, because the current method we use to generate them (hitting the
search API) doesn't generate meaningful results for things like talk pages and
user pages.

Bug: T92787
Change-Id: If6b9c638e2753c05b456f1acbd25b680b5583031
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1429746560,1429824074,70d38c4de6bf8c5761d5c3f41208f99a2d260a0a
70d38c4de6bf8c5761d5c3f41208f99a2d260a0a,70d38c4d,Hygiene: miscellaneous code quality fixes,"Hygiene: miscellaneous code quality fixes

* Removed unused variable from SuggestedPagesFunnel
* Removed overriden methods that do nothing except call their parent method
* Changed an assign/if/return code block into a return statement in ShareUtils

Change-Id: Ib95087718e78de6ae819ff445e1325d71c1f0829
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1429763215,1429823115,abde6f57f7b88d0309bb7f0a6af8080160049b82
abde6f57f7b88d0309bb7f0a6af8080160049b82,abde6f57,Fix Script Interpreters and Clean Up,"Fix Script Interpreters and Clean Up

Some light miscellaneous clean up of various scripts:

- Set Python and Bash interpreters to /usr/bin/env X as appropriate.
- Set executable bit on Python and Bash scripts.
- Update support library version to match target API level.
- Replace double with single quotes where possible in build.gradle.
- Include release signing properties path when not present in error output.
- Change Gradle wrapper distribution URL to reference ""all"" instead of ""bin"".

Change-Id: I5b4d9bf3e55fb07feaa80a8916ce2064aadb136d
",,,,Stephen Niedzielski,stephen@niedzielski.com,BearND,bsitzmann@wikimedia.org,1429408349,1429822469,f7c2aa84769d5428fd968e5a51a2331c688a0080
f7c2aa84769d5428fd968e5a51a2331c688a0080,f7c2aa84,Hygiene: Add documentation to namespace field in PageTitle class,"Hygiene: Add documentation to namespace field in PageTitle class

Bug: T96939
Change-Id: I245ff74fe03db314f0999ab83c5c3c7fe3771913
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1429749037,1429813733,f5c7d3786c8ccf2f376f8af64259764d33b8ad05
f5c7d3786c8ccf2f376f8af64259764d33b8ad05,f5c7d378,Slightly decrease minimum text size on Share a Fact cards.,"Slightly decrease minimum text size on Share a Fact cards.

This patch slightly decreases the minimum text size on Share a Fact cards.
This allows medium-length quotes to be fit on the cards.

Also increased the top padding to be similar to the left/right padding per Vibha's request.
It's not exactly the same value because there is some ascender height space above the cap height.

Bug: T96398
Change-Id: Ia090a6a4de50c653c3abc189a00ba0c30bb310b1
",,,,Deskana,dgarry@wikimedia.org,Mholloway,mholloway@wikimedia.org,1429294423,1429716344,25b480340beacfffd2e5e28e8dedf21b1e2e9f7c
25b480340beacfffd2e5e28e8dedf21b1e2e9f7c,25b48034,"Merge ""Add Event log URL for testing""","Merge ""Add Event log URL for testing""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1429664153,1429664153,"99809888f41bcbd08ebccdfe0ec491307d74d509,ac45f3c02c0e9e06528b5e03e78036f3510b9562"
99809888f41bcbd08ebccdfe0ec491307d74d509,99809888,Display server status code & message to user in case of error,"Display server status code & message to user in case of error

Bug: T95070
Change-Id: I76fad223497082034112567ee8ca4ed853b84482
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1429122761,1429634727,498364a067db6898fc7fa925d811065b63555805
498364a067db6898fc7fa925d811065b63555805,498364a0,Disable pulling of ToC before page has finished loading.,"Disable pulling of ToC before page has finished loading.

Bug: T96358
Change-Id: Ib360d4d74b1df5a1766d1b08848867a2db9172c4
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1429533180,1429578562,87f58ae8f3de47fdd7490fcd184ca0c76d5da454
ac45f3c02c0e9e06528b5e03e78036f3510b9562,ac45f3c0,Add Event log URL for testing,"Add Event log URL for testing

Commented out. Uncomment when testing.
(Comment out the other one, of course.)

Change-Id: Idc52bf5630179de9d5d54cffe49a7b69c59ad413
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1429555817,1429555817,70a1edc3b0b5e3b2be47c0bf86f1ad0d205a09d7
87f58ae8f3de47fdd7490fcd184ca0c76d5da454,87f58ae8,Fix possible crash on screen rotation.,"Fix possible crash on screen rotation.

Bug: T96532
Change-Id: Ic2bc17df16c9931a996cdff0cbd03cf7be3974a3
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1429531045,1429531045,70a1edc3b0b5e3b2be47c0bf86f1ad0d205a09d7
70a1edc3b0b5e3b2be47c0bf86f1ad0d205a09d7,70a1edc3,Right-align entries for RTL languages in Wikipedia language menu,"Right-align entries for RTL languages in Wikipedia language menu

Bug: T95895
Change-Id: I54d543bd5d73f02b32dc30678d0522dae55a3b20
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1428957794,1429290087,73f4b6327588aa5b9ce84f4390e7110ec27fec81
73f4b6327588aa5b9ce84f4390e7110ec27fec81,73f4b632,Prevent action bar from reverting to black on new page load if lead image is available,"Prevent action bar from reverting to black on new page load if lead image is available

Bug: T95067
Change-Id: If33f79b618226741115d559e653bda91c03e8c3c
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1429200300,1429222785,14d0cf49a9ce5088cdf35fafa6826760485393a7
14d0cf49a9ce5088cdf35fafa6826760485393a7,14d0cf49,Remove comma from collapsed table chrome,"Remove comma from collapsed table chrome

Bug: T96179
Change-Id: Iec4750028fc3b598d18b2f998863f023b64b9173
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1429130727,1429218978,65b2080635219618092b4c924bcdc2978b17030d
65b2080635219618092b4c924bcdc2978b17030d,65b20806,Avoid IP edits when user is logged in,"Avoid IP edits when user is logged in

Specify assert=user when submitting an edit.
This will ensure that the edit is saved under the user's account, instead
of an IP address, as has been reported by several users.

Bug: T75086
Change-Id: Ica13fa1af4865c325d4566e0c7936374e8e4e61f
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1427582826,1429038578,9bb743cf61066aecd391399ad97323f3f4d1beef
9bb743cf61066aecd391399ad97323f3f4d1beef,9bb743cf,Detect network connectivity and display appropriate error message to user,"Detect network connectivity and display appropriate error message to user

Bug: T95070
Change-Id: I5b02f977601ef73d7f57dce6964426795868578f
",,,,Michael Holloway,mholloway@wikimedia.org,Mholloway,mholloway@wikimedia.org,1428514692,1428947205,16505855f7b72e9071101a90190b1e2c8537262c
16505855f7b72e9071101a90190b1e2c8537262c,16505855,Bump versionCode,"Bump versionCode

Change-Id: I22d0a3d2e4a21912016efa0990d7be42f475458e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1428715083,1428715083,0d91bb7ff22c751189a47d85ab058195c684a545
0d91bb7ff22c751189a47d85ab058195c684a545,0d91bb7f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Iba86d2cb3f74f1d0fadfebad95ff68bc0becfb9d
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1428714732,1428714732,3929f1b155ab45383869626b0ac64c57801b02e2
3929f1b155ab45383869626b0ac64c57801b02e2,3929f1b1,Fix checkstyle (curly braces),"Fix checkstyle (curly braces)

Change-Id: Iafd75804cc0e85edd3eade98aaf86f9872c5931c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1428705563,1428705563,b03e7f521fb4a250e1ecf63d5383f0e3c40af443
b03e7f521fb4a250e1ecf63d5383f0e3c40af443,b03e7f52,Improve design of language list entries,"Improve design of language list entries

Bug: T95213
Change-Id: I159f227655037dbaba7f9641dd74deb307da2582
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1428619674,1428626199,d17ad20bc23abcaea39fcabeaeda0645aa906627
d17ad20bc23abcaea39fcabeaeda0645aa906627,d17ad20b,Fix missing period at the end of first sentence in some articles.,"Fix missing period at the end of first sentence in some articles.

Bug: T95236
Change-Id: I3eb08489075e34570349ed14301b62efe9f77b7f
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1428450227,1428450227,edc45390d4896016eb7d362391a082956ba33f17
edc45390d4896016eb7d362391a082956ba33f17,edc45390,ShareAFact: correctly align WP wordmark for RTL,"ShareAFact: correctly align WP wordmark for RTL

On RTL languages the location of the wordmark appeared at the wrong location or was even invisible.
E.g., if device was set to Hebrew and invoking ShareAFact on an English article the logo was invisible.

Bug: T95345
Change-Id: I4e539d571992cb44e9afe4aca77ace730adda17a
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1428081296,1428439771,e26611ae9a9b5b926002a83798ad5957a66ea609
e26611ae9a9b5b926002a83798ad5957a66ea609,e26611ae,Hygiene: reorder XML for views so that the android:id is on the first line,"Hygiene: reorder XML for views so that the android:id is on the first line

I needed something menial to do to relax, so here it is. I reordered a ton of
the XML so that the android:id is almost always on top, and separated out some
attributes so that they're on multiple lines. There should be no user-facing
changes as a result of this, but it lets new developers easier find the ID of
a view at a glance.

Change-Id: Idb61079339be45e366050c2ffa53fd12fd1fab8e
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1428430338,1428430338,999c29483d82a253737ba32dfec6bafc5395b2c4
999c29483d82a253737ba32dfec6bafc5395b2c4,999c2948,Fix issue with moving the first paragraph in some articles.,"Fix issue with moving the first paragraph in some articles.

The issue was that the article in question had a very short first paragraph,
which caused us to move the next-longest paragraph to the top, which made
the article look out-of-sequence.

We should make sure to further test whether our method still works for the
articles for which it's intended to work, as well as articles with a very
short first sentence,

Bug: T94853
Change-Id: I34a0aed1d6efbf5881419cbc43787fcf3f4116db
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1428356980,1428427951,22f19e245fe6b12ee16f8357b4ef82a5c0223d49
22f19e245fe6b12ee16f8357b4ef82a5c0223d49,22f19e24,Hide search bar on saved pages and history sections if none exist,"Hide search bar on saved pages and history sections if none exist

Bug: T94974
Change-Id: I91f9b6ebcd6ef226d7c26050c1c5d6b81999f18b
",,,,Michael Holloway,mholloway@wikimedia.org,BearND,bsitzmann@wikimedia.org,1428095526,1428427373,91f1ba9d35c2e547b3f9d26fdacf71e521457156
91f1ba9d35c2e547b3f9d26fdacf71e521457156,91f1ba9d,Make L10nUtils final,"Make L10nUtils final

Another thing checkstyle only seems to complain about in the
nodeservice patch. Go figure.

Change-Id: I09a519832760d355e23afee0fd743a76d92b8f33
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1428376335,1428376335,573e13d0f64520121846756556bba37e8c2bfc76
573e13d0f64520121846756556bba37e8c2bfc76,573e13d0,Add private L10nUtils constructor,"Add private L10nUtils constructor

to please checkstyle

Change-Id: I2fbc04d9368fa493d0f0af2267dc3efdb01f4135
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1428375620,1428375620,878f2259664cd2fae20fec7eb18cfb87f619bc86
878f2259664cd2fae20fec7eb18cfb87f619bc86,878f2259,More aggressively disable autocomplete suggestions for captcha,"More aggressively disable autocomplete suggestions for captcha

Use the same solution used to solve this as we did in the past. It's a
hack, but at least it works.

Change-Id: I50eb87d1e2701a0455a334fcdc602157fbe382e3
Task: T95146
",,,,Dan Garry,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1428290790,1428365812,3d390b281a1808e5f4a159f6abb6d56e297fed6f
3d390b281a1808e5f4a159f6abb6d56e297fed6f,3d390b28,Fix issue with ToC onboarding when visiting subsequent pages.,"Fix issue with ToC onboarding when visiting subsequent pages.

Bug: T95201
Change-Id: I53c354e955745193145ea0caac1ae6b722bb0c1c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1428356030,1428356030,746a4a1d870529e3655c1978301886a3d5a32117
746a4a1d870529e3655c1978301886a3d5a32117,746a4a1d,Make enter key submit request when the user is filling in a captcha.,"Make enter key submit request when the user is filling in a captcha.

Since the captcha form requires only a single input (i.e. the captcha),
this patch makes the enter key on the keyboard submit the form rather
than simply collapsing the keyboard.

This patch also slightly tweaks the ordering of the XML for the captcha
group, so that the android:id is at the top, which is our prevailing
style.

Bug: T95145
Change-Id: I68d37d8dd28a2a9c4741633cb646259b07c7cb6b
",,,,Dan Garry,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1428289563,1428342842,5d3d1a056850cfd64821e792f3ee831ab632a234
5d3d1a056850cfd64821e792f3ee831ab632a234,5d3d1a05,Bump versionCode,"Bump versionCode

Change-Id: I84afbc4f9ba865b7cd9319b3ed9d9c4a289f3128
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1428104815,1428104815,2a7c3e65a3cfdeafcc75b740f941bf8ec9d192dc
2a7c3e65a3cfdeafcc75b740f941bf8ec9d192dc,2a7c3e65,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id6edb941327fa608ee6287bde069a1401f8d3cda
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1428104320,1428104320,57be9044cbda70f756fb5a59354fd461a18a2afa
57be9044cbda70f756fb5a59354fd461a18a2afa,57be9044,"Merge ""ShareAFact: use static image for English WP wordmark""","Merge ""ShareAFact: use static image for English WP wordmark""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1428091018,1428091018,"d3e7406e67ae801885c71d5c19fc69967aa48ef4,7d5888de56b4702bf9a280fa3c2e52914cb83dd2"
d3e7406e67ae801885c71d5c19fc69967aa48ef4,d3e7406e,Reverse the Ken Burns effect on lead images.,"Reverse the Ken Burns effect on lead images.

(and make it more subtle)
(and speed it up a bit)

Bug: T94529
Change-Id: I2801bbe50c81aef90d772bbfd023610e1cab56c5
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1427836079,1428037101,56b0c9c0760321ae570ec932eb35f5a476b73b04
7d5888de56b4702bf9a280fa3c2e52914cb83dd2,7d5888de,ShareAFact: use static image for English WP wordmark,"ShareAFact: use static image for English WP wordmark

and for languages that have the same text for the wordmark.
Other languages still have the wordmark drawn using text,
meaning the type font is not correct.

Aligned bottom of wordmark with bottom of CC-BY-SA icons.
Adjusted the text variant to match better the image variant
(smaller font, stretch a bit horizontally).

Started L10nUtils, which I hope we can move more of the L10N
specific util methods from Utils to this new class.

Bug: T94760
Change-Id: I4b996a0908313a8eaad37eccb0c15d0d3ee9b320
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1428024765,1428034692,56b0c9c0760321ae570ec932eb35f5a476b73b04
56b0c9c0760321ae570ec932eb35f5a476b73b04,56b0c9c0,Fix a couple issues with single WebView.,"Fix a couple issues with single WebView.

- Properly remember the y-scroll offset of the previous page.
- Improve our WebView's custom onClick handler so that it gets
  consumed properly if it's handled by the Lead Image or Bottom
  Content container.

Change-Id: Iafcbfadb9fcfac6d86841e2094808adb6c662848
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1427471215,1428010099,8e6a483085490424f936e0b2347e600f7ffe0a82
8e6a483085490424f936e0b2347e600f7ffe0a82,8e6a4830,Reuse the same WebView for article navigation.,"Reuse the same WebView for article navigation.

The plan so far:
- PageViewFragmentInternal shall now become a true Fragment (and
  I've deleted the ""old"" PageViewFragment class).  Once this patch
  is merged, we can rename it back to PageViewFragment. I'm not
  renaming it yet, to better keep track of what is changing.
- The new fragment structure of the main activity shall be: a single
  PageViewFragment (to display n pages), and at most one other fragment
  on top of it (History, Saved Pages, Nearby) for selecting pages to
  navigate to.
- Added additional sequencing logic to async tasks that fetch page
  content, so that they correctly invalidate themselves when a new page is
  loaded.

TODO: Perform some additional profiling, and see if there are any
remaining resource leaks.

Change-Id: I40ac4c6f1a0351e7fec7b462d5b950c12fd09122
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1426607859,1428009782,4703ec3fd0b11a534bac1df3942cf8185b31aadc
4703ec3fd0b11a534bac1df3942cf8185b31aadc,4703ec3f,"Merge ""Reduce size of face detection image copies for performance""","Merge ""Reduce size of face detection image copies for performance""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1428007060,1428007060,"201aee2abdffafe602fcd5013eebe796b7e545c2,ea22fa9e6803ce3c106bb9ced034031bda979e1f"
ea22fa9e6803ce3c106bb9ced034031bda979e1f,ea22fa9e,Reduce size of face detection image copies for performance,"Reduce size of face detection image copies for performance

Bug: T94702
Change-Id: Ib152d4f1231fc64b0e3db2e20f3d9cd54967e6da
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1427982969,1428006276,a9d867a0f06074f407a5af46e7f3b01fac5ccdc0
201aee2abdffafe602fcd5013eebe796b7e545c2,201aee2a,Update Java MW API,"Update Java MW API

Bug: T94559
Change-Id: I9366350b8695c8860647e4e2bc528b11fe3a1c43
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1427936564,1427936564,95ebc7caa2cd4017682ae9e6753dcb868e40779d
95ebc7caa2cd4017682ae9e6753dcb868e40779d,95ebc7ca,Fix possible crash(es) when highlighting text to share.,"Fix possible crash(es) when highlighting text to share.

Bug: T94311
Change-Id: I9f45dc87c3971b42955216f12a57f3605e09fbe8
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1427898249,1427930265,f9e116e611659894c73e2658d2a29e52bcb14267
f9e116e611659894c73e2658d2a29e52bcb14267,f9e116e6,Update credits to include new team members.,"Update credits to include new team members.

Change-Id: I4d223afe6d82ee16ce473748cbd9a7a1f29669c4
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1427910186,1427910186,a9d867a0f06074f407a5af46e7f3b01fac5ccdc0
a9d867a0f06074f407a5af46e7f3b01fac5ccdc0,a9d867a0,Display local article name in 'Read in other languages' list,"Display local article name in 'Read in other languages' list

Bug: T68917
Change-Id: I1df15145cd3bf409d71be9d99be535c2e952891e
",,,,Michael Holloway,mholloway@wikimedia.org,Michael Holloway,mholloway@wikimedia.org,1427817480,1427836974,c166fd18d12e4fe42c8b4816ff6477bbcc37fc7d
c166fd18d12e4fe42c8b4816ff6477bbcc37fc7d,c166fd18,Add documentation to TriggerAbuseFilterTest class.,"Add documentation to TriggerAbuseFilterTest class.

This patch adds documentation to the TriggerAbuseFilterTest class, which
contains unit tests for how the app handles various responses from the abuse
filter.

Change-Id: I551f9d61601588ad4d9e1b4bc2e1d88712d57653
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1427682522,1427748972,01725bb791be2b674f12fc35ecc537f6bb0b2aa5
01725bb791be2b674f12fc35ecc537f6bb0b2aa5,01725bb7,Fix possible crash when failing to clear shared image folder.,"Fix possible crash when failing to clear shared image folder.

Bug: T94185
Change-Id: I2ef9153f6b7ba07eb13b5194a7714a86c3d2e812
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1427583501,1427737507,ef5b3695b42f61ee7427607cbba711b6fc7b07ee
ef5b3695b42f61ee7427607cbba711b6fc7b07ee,ef5b3695,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I432985106fa23aeb92eddb58f6edf03e2b7fd98c
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1427735341,1427735341,697788456107f0a83a2eb33e484a6c8453539604
697788456107f0a83a2eb33e484a6c8453539604,69778845,Fix possible crash when highlighting text to share.,"Fix possible crash when highlighting text to share.

Bug: T94311
Change-Id: I4b6a7daead430656d2e12a0bc375b92ecaa9fc0a
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1427583157,1427723993,0ab089d191493d776ff516acb95152b1d741e95a
0ab089d191493d776ff516acb95152b1d741e95a,0ab089d1,Remove parenthetical information from lead sentences.,"Remove parenthetical information from lead sentences.

Currently restricted to non-production builds, and to enwiki only.

Bug: T91792
Change-Id: I1252ee46410daf0d110c0dea9dc249de87ede848
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1426739552,1427300941,f25a9363861a2b5f45b79e11162325941ccfe9f9
f25a9363861a2b5f45b79e11162325941ccfe9f9,f25a9363,Fix transform of video links in pages.,"Fix transform of video links in pages.

The transformation of video links contained a bug that could potentially
throw an exception within JS that would stop the page from loading.
Example: [[Bill Clinton]]

Change-Id: Ic9f617518bbb62e0e28a57bfd210b963cca1a237
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1427212591,1427299715,847d87aa636ff7e1af39edccd68efdb54381f38a
847d87aa636ff7e1af39edccd68efdb54381f38a,847d87aa,Resolve redirects when doing prefixsearch.,"Resolve redirects when doing prefixsearch.

Our search experience provides the user with prefix-search and full-text
search results. However, in the case of prefix-search results, if the
result is a Redirect page, it may be more useful to the user to see the
*target* of the redirect, rather than the redirect name itself.  In
addition, the redirect (source) page doesn't come with a thumbnail or
pageterms, which is even less useful to the user.

This patch enables automatic resolving of redirects for prefix-search,
whereby the target of the redirect will be shown, complete with thumbnail
and description. This is accomplished in a slightly roundabout way:
- The search API allows us to specify ""redirects=true"" to automatically
  resolve redirects. Simple enough...
- However, when we receive the results, any result that is a redirect
  target will no longer have the ""index"" property, which we use to sort
  the results in our list.
- However, the query response also contains a separate ""redirects"" array
  that contains a list of all the redirected results, apparently in the
  correct order.
- So first, I take all the results that have an ""index"" property, and
  make a list of the ""holes"" in the indices. I then fill the holes with
  the results that don't have an ""index"" property, in the order that they
  appear in the ""redirects"" list!

This can be vastly simplified, of course, if the API includes the ""index""
property with the redirected results. However, this may be difficult to do
on the API side, so this will have to be the solution for now.

Change-Id: I65e281fa83071a4dbf288ecdd7d3bf5ee39a0aee
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1426599557,1427217393,d49b39879cda0c9e1fa8b281dcd39ad1e77ef8b2
d49b39879cda0c9e1fa8b281dcd39ad1e77ef8b2,d49b3987,Avoid cache fragmenting URLs for Share a Fact shares,"Avoid cache fragmenting URLs for Share a Fact shares

Use wprov=sfia1 for image card sharing
The Android app doesn't use the URL when sharing as text.
So, nothing to do there.

Bug: T90606
Change-Id: If1c84c8b1380092817b0bfae2d62d93747da0d25
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1427148379,1427148379,e720d87faf11dbe75de6390f0eef9477af3e6c0b
e720d87faf11dbe75de6390f0eef9477af3e6c0b,e720d87f,Bump versionCode,"Bump versionCode

Change-Id: I87f3afeca93c42b63dceee8446a51c66f3df7628
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1427140464,1427140513,a65548f86e61babb218f6a351b7f4915c3d102da
a65548f86e61babb218f6a351b7f4915c3d102da,a65548f8,Promote share-a-fact to production.,"Promote share-a-fact to production.

Change-Id: Ie227cf08c41cb0d6b9e765424c00c0ffc85621f3
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1427135415,1427135415,89451fc56da4e500d8532ddc0ae6912c43152361
89451fc56da4e500d8532ddc0ae6912c43152361,89451fc5,Don't crash when the AbuseFilter emits an arbitrary error code.,"Don't crash when the AbuseFilter emits an arbitrary error code.

The abuse filter unfortunately allows admins to specify filters that
emit arbitrary codes. This is a nightmare to handle properly.

Right now, our lack of proper handling for these arbitrary codes is
causing the app to crash if one is received from the API. This patch
changes that behaviour to simply treat arbitrary codes as errors. That
sucks, but it's better than crashing.

Bug: T93539
Change-Id: Ib839d4104f4a51b344dc7b00faf7a8bcad069fe5
",,,,Dan Garry,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1427079586,1427133362,156a619e6018c59aeb3d03fb25bbe099a5e4f316
156a619e6018c59aeb3d03fb25bbe099a5e4f316,156a619e,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4767afe4fc98445e720e9a273d38a683b20fcd82
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1427131178,1427131178,43c813b3247714bdf0ff37b894826ded464a0fb2
43c813b3247714bdf0ff37b894826ded464a0fb2,43c813b3,"Don't load Main Page from cache, except on screen rotation.","Don't load Main Page from cache, except on screen rotation.

...since the Main Page is updated daily, and the app needs to show the
latest content automatically.

This isn't yet a totally optimal solution. Once we merge the
single-webview patch, we'll implement more comprehensive cache policies
for various types of pages, including the Main Page.

Bug: T93356
Change-Id: I773992aef1cfc05af84d273cd486ad5be38ba954
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1427125439,1427126860,4192cdb7e2a0eac3951e0c7203e95d0f51b5af75
4192cdb7e2a0eac3951e0c7203e95d0f51b5af75,4192cdb7,Hygiene: Add @NonNull annotation to two methods in LanguagePreference,"Hygiene: Add @NonNull annotation to two methods in LanguagePreference

Two overridden methods in LanguagePreference didn't have the @NonNull
annotation that is present in the overriden method. It stands to reason that
if the overridden method has a parameter that cannot be null, then the
overridden method does too. This patch add those annotations.

Change-Id: Ia865529710962b8ef47ef05b01c34573b4441d53
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1426884327,1426884327,e25ff5b77cb3ee4b3255e242e6c2c95d149e4a3e
e25ff5b77cb3ee4b3255e242e6c2c95d149e4a3e,e25ff5b7,Apply a Ken Burns effect to the lead image.,"Apply a Ken Burns effect to the lead image.

(only for non-production for now)

Change-Id: Ic4f9eadc173a16e5e1b25175874e783b13d60631
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1426798031,1426813777,8e99ecec265fb763535ebc3191fd0fe3c07c4d19
8e99ecec265fb763535ebc3191fd0fe3c07c4d19,8e99ecec,Make text in certain TextViews selectable (for copying),"Make text in certain TextViews selectable (for copying)

This allows the user to long-press text fields such as the page title or
description, gallery info text, etc. for copying the text to the clipboard
of the device.

Change-Id: Idbafb9e3fa06006c9922917ae798766ed0bc1120
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1426778469,1426785827,79dcc5fb10c86437a6df172efa2161c0eb7a6fd1
79dcc5fb10c86437a6df172efa2161c0eb7a6fd1,79dcc5fb,Remove executable bit on image file.,"Remove executable bit on image file.

Change-Id: I919c300b8e680b5eb04c3c24674b9425ee225361
",,,,Stephen Niedzielski,stephen@niedzielski.com,Stephen Niedzielski,stephen@niedzielski.com,1426468079,1426772832,792bcbfc5c122376fee537f4933f4d5a225e4e0e
792bcbfc5c122376fee537f4933f4d5a225e4e0e,792bcbfc,Cache pages on disk instead of ram.,"Cache pages on disk instead of ram.

- Added DiskLruCache library to project (with license/credits, etc)
- The cache directory will automatically go to external storage (if
  detected), or fall back to internal storage if no external card is
  available.
- Caching pages in key:value pairs where the key is an md5 of the page
  title, and the value is a json dump of the Page object.
- The json structure of the Page object now includes the list of Gallery
  items. However, this does not yet include the *full* set of information
  for each Gallery item. This still has to be fetched from the network
  when the user browses the Gallery activity. This will be addressed in a
  future patch.
- When launching the Gallery activity, we are now passing it the original
  page title (instead of the normalized title), since the original title
  is the one that gets cached. The Gallery activity can then use the
  cached page, based on the original title. However, this required a
  slight modification to the API call that retrieves the collection of
  images for the page, namely the inclusion of the ""redirects"" parameter,
  since generator=images doesn't work for page titles that are redirects,
  and the ""redirects"" parameter allows the API to automatically resolve
  the redirect.

Change-Id: I08cf2aa15895456013145ee5991ee52b0d780d3d
",,,,dbrant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1426368274,1426697073,eac9f6419d43acb73536a6277b5b91d322a512b6
eac9f6419d43acb73536a6277b5b91d322a512b6,eac9f641,Roll appcompat-v7 back to 21.0.3,"Roll appcompat-v7 back to 21.0.3

Too many issues on Gingerbread right now.
Want to see some comments on the upstream bug first.

Change-Id: I4a49df9681171bf43119867cec81be32df78b569
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1426616300,1426616300,bb31e47776b11393be87409a6671cc7d566f65cf
bb31e47776b11393be87409a6671cc7d566f65cf,bb31e477,Updated SquareUp libraries,"Updated SquareUp libraries

- Added missing credit for Picasso
- client.setCache does not throw IOException anymore

Highlights from https://github.com/square/picasso/blob/master/CHANGELOG.md:
* Memory and Network policy API controls reading and storing bitmaps in memory and/or disk cache.

TODO:
We may not need to use the OkUrlFactory shim in OkHttpConnectionFactory anymore, or even the whole class.
Updating acra would require code changes.

Change-Id: I44fd062e2d7c74c5b538146fa5a2fe637d2e9342
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1426615944,1426615944,50e4d6b9b4a15b1d640e9f3faec20081937048c5
50e4d6b9b4a15b1d640e9f3faec20081937048c5,50e4d6b9,"Merge ""Set text color in error popups for 2.3""","Merge ""Set text color in error popups for 2.3""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1426601305,1426601305,"eda31e774bc68441f85833fcda2e82ca6f40298b,b882a401ac1e6174d580a36b8bda4a10953108c9"
eda31e774bc68441f85833fcda2e82ca6f40298b,eda31e77,Remove (R) from wordmark in ShareAFact image,"Remove (R) from wordmark in ShareAFact image

Change-Id: I701e57bcffb67b8b3cc7f7214d74f6fd9393ccaa
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1426528803,1426528803,2b2d903780527257df82c760a54e73bdad5bcb40
b882a401ac1e6174d580a36b8bda4a10953108c9,b882a401,Set text color in error popups for 2.3,"Set text color in error popups for 2.3

In light mode on 2.3 the error popups were white on white,
and therefore not readable.
This patch is setting the text color to red.
Unfortunately, it's not easy to change the background of
the popups. We would have to roll our own.

Bug: T92851
Change-Id: I001db984192f8df722a375ce76abaf076e813305
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1426523381,1426526322,2b2d903780527257df82c760a54e73bdad5bcb40
2b2d903780527257df82c760a54e73bdad5bcb40,2b2d9037,"Merge ""Update store description string.""","Merge ""Update store description string.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1426466374,1426466374,"b6df0ee9c50371307b91ef423578f118d84a956c,d033f9eb1860481b3916903a85969280fdcb02ca"
b6df0ee9c50371307b91ef423578f118d84a956c,b6df0ee9,"Merge ""Light theme chooser button was not labelled on 2.3""","Merge ""Light theme chooser button was not labelled on 2.3""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1426466191,1426466191,"95300ff910f4c33b52629aa8d4a77d7fe6c7c705,da7d574d83973ae7459059fe198a8889e462899c"
95300ff910f4c33b52629aa8d4a77d7fe6c7c705,95300ff9,"Merge ""Fix issue where the bottom portion of About screen was white in dark mode""","Merge ""Fix issue where the bottom portion of About screen was white in dark mode""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1426466115,1426466115,"97febbe7c61528fffddfdd15ee8d1847ce88c39b,eaea4c44461b90a9ab6667ebd9641046e7643a02"
d033f9eb1860481b3916903a85969280fdcb02ca,d033f9eb,Update store description string.,"Update store description string.

This patch updates the string for the store description to reflect the current
store description.

We're in the process of deprecating putting this description in here, but for
now let's keep it in sync with the app store.

Change-Id: I192f8968be3f76412e6957770f3e22a2ea579436
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1426291394,1426291394,97febbe7c61528fffddfdd15ee8d1847ce88c39b
da7d574d83973ae7459059fe198a8889e462899c,da7d574d,Light theme chooser button was not labelled on 2.3,"Light theme chooser button was not labelled on 2.3

Another regression since moving to app compat 22.

Change-Id: I7dc69f39b726e3133bc17e2c609738101b1b3452
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1426287480,1426287480,97febbe7c61528fffddfdd15ee8d1847ce88c39b
97febbe7c61528fffddfdd15ee8d1847ce88c39b,97febbe7,Fix action mode menu item color.,"Fix action mode menu item color.

- Action mode text color fixed by using proper styles.
- Unfortunately, for API <21 the icon color has to be set
  programmatically.

Bug: T92510

Change-Id: I68438b6900bdcf653c192505e7ad35f652a11196
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1426261284,1426281049,3e4a407650b27f23ba765d90a6ae45a3a315dce0
3e4a407650b27f23ba765d90a6ae45a3a315dce0,3e4a4076,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ib4ec190ab3a30496226452505dac0b8f157d489e
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1426269893,1426269893,1483eaf00add7147d9b2accf1c48d2b0a7ad7e8f
eaea4c44461b90a9ab6667ebd9641046e7643a02,eaea4c44,Fix issue where the bottom portion of About screen was white in dark mode,"Fix issue where the bottom portion of About screen was white in dark mode

The main change is setting layout_height of the ScrollView to match_parent.
Also added design time value for version text.

Change-Id: I89e06e2e06d0648752bfaa506ffed2b80d90b756
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1426262606,1426262685,1483eaf00add7147d9b2accf1c48d2b0a7ad7e8f
1483eaf00add7147d9b2accf1c48d2b0a7ad7e8f,1483eaf0,"Merge ""Don't crash if the user clicks on an invalid URL.""","Merge ""Don't crash if the user clicks on an invalid URL.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1426259646,1426259646,"3d9503a08e90224c113fb48cbd2e15fb806a3fe2,4dfdcbecff7a558a281c4ebed98bccb7116a60d6"
3d9503a08e90224c113fb48cbd2e15fb806a3fe2,3d9503a0,Tweak layout for Share A Fact,"Tweak layout for Share A Fact

to be closer to what the iOS app has.

Text snippet:
- font is bold
- font can be bigger
- text is vertically centered over the allocated area
   (looking at the iOS project it doesn't center horizontally as the task claims)

Gradient:
- is darker

Bug: T91721
Change-Id: I9d44554b9bdfa6ade90c5e9c43e7b7448ca716a7
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1426139717,1426256912,0666751a41a56cdfe7b9b50b927b9f5e22211918
4dfdcbecff7a558a281c4ebed98bccb7116a60d6,4dfdcbec,Don't crash if the user clicks on an invalid URL.,"Don't crash if the user clicks on an invalid URL.

If the user clicks on a URL like http://en.wikipedia.org/% then the app
crashes. This patch simply catches the exception that's thrown and does
nothing, which is confusing for the user but doesn't suck as much as crashing.

Bug: T89156
Change-Id: Id7932b469397afcaf76071fa75b12afeb5fdb676
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1426222649,1426222949,0666751a41a56cdfe7b9b50b927b9f5e22211918
0666751a41a56cdfe7b9b50b927b9f5e22211918,0666751a,Fix list item background in 2.3.,"Fix list item background in 2.3.

Under 2.3, the list items (search results, history, etc) were showing up
with a solid blue (selected) background. It looks like the state_activated
property is having an effect on the background, even though it's not
supposed to apply to 2.3.  I've split off the list background selector for
API 11+, and modified the one for API 10 to no longer have
state_activated.

Change-Id: Ie3e29c151f9989e8c23ace09a188a84d00f660ca
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1426183345,1426183345,494e78765c7eb5805eb079ef8b142786a5140200
494e78765c7eb5805eb079ef8b142786a5140200,494e7876,Fix some items to comply with latest AppCompat library.,"Fix some items to comply with latest AppCompat library.

The latest AppCompat library seems to be a bit more strict about a few
things:

- Explicitly call setDisplayHomeAsUpEnabled() when setting the Toolbar in
  the main activity. Otherwise the hamburger icon is not shown.
- Fix an issue in EditSummaryHandler where it wasn't correctly finding the
  container view.

Change-Id: I578c624d04efdfeb67a9e69998505f6a09f81d67
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1426179987,1426180324,3b382603c7eb7ee1fbdb01ecabeef7d4bcdc9ed4
3b382603c7eb7ee1fbdb01ecabeef7d4bcdc9ed4,3b382603,"Merge ""Tackle some more inspection warnings""","Merge ""Tackle some more inspection warnings""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1426179993,1426179993,"5afcb4dddcab00bd25c72f7007ae4b3754145260,d73000d9bba2ceb16e81819aa28bab2c612ccaec"
5afcb4dddcab00bd25c72f7007ae4b3754145260,5afcb4dd,"Merge ""Replace explicit type with '<>'""","Merge ""Replace explicit type with '<>'""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1426173246,1426173246,"49eb214af16cb14827d43e19bbe7d6a6b32f68f4,5b90fe70911018f4ddb824d97af2c10c953d0d02"
49eb214af16cb14827d43e19bbe7d6a6b32f68f4,49eb214a,"Merge ""Hygiene: SpUsage: Using dp instead of sp for text sizes""","Merge ""Hygiene: SpUsage: Using dp instead of sp for text sizes""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1426172866,1426172866,"ed1ab874c00b732c27318d8bc05d12e6a6c5fd9c,efbce7d70c5f84651ece7d29ae857a03306a1fb2"
ed1ab874c00b732c27318d8bc05d12e6a6c5fd9c,ed1ab874,"Merge ""Use Gradle SDK Manager Plugin""","Merge ""Use Gradle SDK Manager Plugin""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1426172707,1426172707,"d4872a31da6ccc14b9b79f13bca886ba7a3da6ec,ff65e86f3863c8f28a612a00934b76704ae0dcc0"
d73000d9bba2ceb16e81819aa28bab2c612ccaec,d73000d9,Tackle some more inspection warnings,"Tackle some more inspection warnings

Change-Id: I39a0adc3d83e0ca8fdf00aa5e06ec83b5af66050
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1425791179,1426131072,5b90fe70911018f4ddb824d97af2c10c953d0d02
5b90fe70911018f4ddb824d97af2c10c953d0d02,5b90fe70,Replace explicit type with '<>',"Replace explicit type with '<>'

Change-Id: I7a88926d57d6c55ef123c99a781d46ffabd14798
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1425789709,1426131072,9159176cc76ef9dffc539c3d53e9cd229005d4ee
efbce7d70c5f84651ece7d29ae857a03306a1fb2,efbce7d7,Hygiene: SpUsage: Using dp instead of sp for text sizes,"Hygiene: SpUsage: Using dp instead of sp for text sizes

Let Lint ignore those specific instances as already mentioned
in the comments of the XML file.

Change-Id: I4b0d03c86c7cec781b96208056f73936473744fa
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424995497,1426131056,9159176cc76ef9dffc539c3d53e9cd229005d4ee
d4872a31da6ccc14b9b79f13bca886ba7a3da6ec,d4872a31,Move link to MW API to better place in README,"Move link to MW API to better place in README

It felt lost at the beginning of the readme and was out of context IMHO.

Change-Id: I70f766a00c73f076fe098bb6e371c4f4fd950c50
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1426130719,1426130719,9159176cc76ef9dffc539c3d53e9cd229005d4ee
ff65e86f3863c8f28a612a00934b76704ae0dcc0,ff65e86f,Use Gradle SDK Manager Plugin,"Use Gradle SDK Manager Plugin

This Gradle plugin by Jake Wharton automatically downloads
the necessary SDK components by looking at the build.gradle
file. Pretty nifty.

No more struggling with the command line, which seems to be hit
or miss, to get updated  SDK components updated on headless CI servers.

Read more:
https://github.com/JakeWharton/sdk-manager-plugin

Change-Id: I681800163577977ecacbe25b7df1c51bac46c07b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1426130613,1426130613,9159176cc76ef9dffc539c3d53e9cd229005d4ee
9159176cc76ef9dffc539c3d53e9cd229005d4ee,9159176c,Update target SDK and AppCompat versions.,"Update target SDK and AppCompat versions.

Change-Id: I1df97e716bcf1f6160e0d4073abd4db8c4b32416
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1426112723,1426112950,9ee0f18d2b7144d06dfe006988905eca5f8b5401
9ee0f18d2b7144d06dfe006988905eca5f8b5401,9ee0f18d,Tweaks to gallery license icon and text.,"Tweaks to gallery license icon and text.

- Align the license icon vertically with the description text.
- Default license to ""fair use"" when license metadata is empty.
- Default attribution to ""uploader unknown"" when uploader metadata is
  empty.

- Enable the translucent search bar in 2.3, since we're now using
  getBackground().setAlpha(), which is allowed in 2.3.

Change-Id: If11bf5675e82e43fd5e54711554938287aefe54c
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1426037965,1426110158,eaeea585726c6b810ad3e01111e764ac3ebdbd37
eaeea585726c6b810ad3e01111e764ac3ebdbd37,eaeea585,Patch support-v4 crash in SwipeRefreshLayout.,"Patch support-v4 crash in SwipeRefreshLayout.

This seems to have been fixed already in support-v4, but not released yet.

We're already extending SwipeRefreshLayout ourselves, so why not.

Bug: T88904
Change-Id: I9695741bc289e17c36ab7ba3fe97f27995859cf3
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1426040823,1426109502,27e7228a845be4d84aa764a1cb26a7ffff26053a
27e7228a845be4d84aa764a1cb26a7ffff26053a,27e7228a,Update launcher icon.,"Update launcher icon.

Also no longer generate the icon from SVG, since the new design of the
icon (done in Adobe Illustrator) uses SVG elements that don't seem to be
compatible with rsvg.

For the time being, the policy shall be to receive a 512x512 icon from
designers, and size it down to the desired resolutions.

Added 512x512 icons in a separate folder. May be beneficial to add a
script that creates the various sizes based on the originals, in the
future.

Change-Id: Ic943f410369fd0ff1e72296b702cdadb470aa38f
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1426013232,1426109462,82266bb0ddd0d167ff8e3ed609bb69e836d11723
82266bb0ddd0d167ff8e3ed609bb69e836d11723,82266bb0,Add wordmark to top of left nav menu.,"Add wordmark to top of left nav menu.

Also tweak sizes and padding around icons.

Change-Id: I5af66d2848b007a62604526ffe7e0068f0e48b42
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1425315424,1426108418,654010c918a457938865ed2634b039ddd92ec804
654010c918a457938865ed2634b039ddd92ec804,654010c9,Remove focus line from search views.,"Remove focus line from search views.

Change-Id: I4cd97105de0676b34ab42b48941ca50cb045cab4
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1426034698,1426034698,fb9730b19e2ef1ca51d48c8591a28e42f672ad77
fb9730b19e2ef1ca51d48c8591a28e42f672ad77,fb9730b1,Bump versionCode,"Bump versionCode

Change-Id: I27a467b7ae00080f6041af51077cf01db67f3460
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1425916898,1425916898,ab023f7304f18e25d5c737b3e4c80cea934be2ef
ab023f7304f18e25d5c737b3e4c80cea934be2ef,ab023f73,Update qq for read_next,"Update qq for read_next

because the de and lb translations were misleading.
I guess the string resource name lead some translators to believe that
this is about reading the next section, but it's really for reading the next page.

Marked de/lb string as fuzzy and fixed German translation.

Change-Id: Ide77f030e2e53508a8b31f795b70d481fe2ebf0a
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1425916309,1425916309,7b8b160b670dabe7e61c57e39bb69b8c0ced3ffd
7b8b160b670dabe7e61c57e39bb69b8c0ced3ffd,7b8b160b,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I8d8b8956c2e8a1d575d3b03ef70ac831af516e59
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1425914339,1425915516,834fe148e614e5e1e3bbe598022322a3bf3b99cb
834fe148e614e5e1e3bbe598022322a3bf3b99cb,834fe148,Just log the read next items actually shown,"Just log the read next items actually shown

Before it was logging up to 11 items when it only showed 1
for the new Read Next functionality.

Now callers of SuggestionsTask specify both the number
of items requested and the max number of items shown.

For the case where a lead image is required just one extra
item doesn't cut if since there could be items without
lead images in the result returned by the API.

Also fixed the test.

Change-Id: I26be484d9f98d51dadf96de5c4736fa292f387c2
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1425788573,1425788573,720390f6f9d146c945074c0eb4dc5528de69ab93
720390f6f9d146c945074c0eb4dc5528de69ab93,720390f6,Update event logging for Read Next.,"Update event logging for Read Next.

Added a ""version"" parameter to the schema to differentiate between
the old and new style.

Change-Id: I5092a8b7562ebaf543eec97b1db64921d58aa5c5
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1425419536,1425770034,0483c57482b244b794a9cfd13ee25d6eda646c6d
0483c57482b244b794a9cfd13ee25d6eda646c6d,0483c574,"Single ""read next"" item at the bottom of articles.","Single ""read next"" item at the bottom of articles.

- Includes A/B toggle based on app install ID. (Half of users will see the
  old ""read more"" section, and the other half will see the new one)
- Also feature-toggled only for non-production builds for now.
- The Read Next item is the result of a full-text search for the first
  item that has a lead image (and not the same as the original title).

Change-Id: Ifdc7080749c4a97c01b265c1586f287797fc0ab9
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1425335224,1425769982,ab203708c6792b09988107c442b98298210f7deb
ab203708c6792b09988107c442b98298210f7deb,ab203708,Fix crash when highlighting text for sharing.,"Fix crash when highlighting text for sharing.

Be more permissive when finding the ""copy"" and ""share"" context items
that the WebView provides. Should cover more API levels.

If we're unable to find the context items, then fail gracefully by
falling back on the default context actions.

Also fixed minor style issue for correctly setting text color for
action modes.

Bug: T91767
Change-Id: I6da051fc9f7274c99e5ba78a642431d28797b6ce
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1425678767,1425769330,1bbfbfc5bdcf0de4fb7016b36e152d95e9ed5690
1bbfbfc5bdcf0de4fb7016b36e152d95e9ed5690,1bbfbfc5,Bump versionCode,"Bump versionCode

Change-Id: I5b41a0b7b14dd71f5101366a4b1160bc030c834d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1425598303,1425598303,b50b1763f8ddf001d8864e5a38dac239b23edc49
b50b1763f8ddf001d8864e5a38dac239b23edc49,b50b1763,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I91e5b9d43e5e20e61e5b0545bae8be4d2094b765
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1425591723,1425591723,f997bec5bd3e0c2a46c384b5b06af15a3a1bc516
f997bec5bd3e0c2a46c384b5b06af15a3a1bc516,f997bec5,Use designtime layout attributes,"Use designtime layout attributes

The namespace prefixed with ""tools"" is stripped out by the compiler,
and only used for IDE and other tool support. So it's safe to leave this in
since it doesn't get included into the apk.

This is great for overriding or setting attributes just for the
IDE's layout preview/designer.

More at http://tools.android.com/tips/layout-designtime-attributes

Change-Id: Id942a78801648196b689d7571c4c6a34c11e46ae
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1425442378,1425442378,3130098a3d795da7ffce607f8662631b0140618f
3130098a3d795da7ffce607f8662631b0140618f,3130098a,Dark toolbar with white icons.,"Dark toolbar with white icons.

- Switch to a dark toolbar with white icons in both light and dark theme.
- Update theme styles to be more consistent and sane.
- Fade in the system statusbar color on 5.0+ devices in articles with a
  lead image, and make it the same as the toolbar color in articles with
  no lead image.
- Remove light bounding box from search text.
- Slightly decrease the height of the background gradient of the toolbar,
  and make the gradient less dark.
- Make the default window background color fully white, instead of
  slightly off-white.

Change-Id: I64a345ba43e47cc7e8d824b09752c8037a3462d8
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1423842125,1425409128,640d36777310cc81c7840a99bd2fbe037e2a925f
640d36777310cc81c7840a99bd2fbe037e2a925f,640d3677,Promote Share a Fact to all build flavours except production release.,"Promote Share a Fact to all build flavours except production release.

Change-Id: I1c5e387a8d7f21c81791361cf03b56c26b5e7ba6
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1425323245,1425323245,2650a58109130b3430c10dacabfcafb7c60d45f9
2650a58109130b3430c10dacabfcafb7c60d45f9,2650a581,Bump versionCode,"Bump versionCode

Change-Id: I535aae784cdbf5d4fbe1ae1136dd745b9c9437a0
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1425080074,1425080074,7cf4f1977e432c1d31186ce12709befb0dc4b4a8
7cf4f1977e432c1d31186ce12709befb0dc4b4a8,7cf4f197,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ic8644dca7f24bd046317c9972a7667935127568d
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1425079195,1425079195,b29f634d43feb9cd4458b3524048c276cc8ff4be
b29f634d43feb9cd4458b3524048c276cc8ff4be,b29f634d,Hygiene: Replace Ellipsis strings with Ellipsis character,"Hygiene: Replace Ellipsis strings with Ellipsis character

Yet another Lint warning.  This one has 230+ occurrences.
Fortunately, Android Studio can replace them all in one fell swoop.

Change-Id: Idd2195e6e0a6b66752bbf0da5372afd1d49e41df
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424994541,1425076903,e945a49a58690691314bcc2500815442192203a0
e945a49a58690691314bcc2500815442192203a0,e945a49a,Hygiene: Various Lint stuff,"Hygiene: Various Lint stuff

Some Android Log tags were too long (23 chars max).
Missed a few unused resources earlier.
Also ignoring (disabling) 'MissingTranslation' issue id.
Made 'NewApi' a warning until the fix for
https://code.google.com/p/android/issues/detail?id=137195 is released.

Ignore a few specific spelling errors since the translator responded to my marking it as fuzzy:
https://translatewiki.net/w/i.php?title=Wikimedia:Wikipedia-android-strings-create_account_email_hint/pt&action=history

Change-Id: Iec0867d98d86e5807b24ebbc5da53a13aa0a976f
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424991686,1425076893,d23e04c2420ee8b3c99dd2635f2c2d29a73381b1
d23e04c2420ee8b3c99dd2635f2c2d29a73381b1,d23e04c2,Video playback in Gallery.,"Video playback in Gallery.

Bug: T86558
Change-Id: I4f670d1056ba78aa3bc08d8e0c8c166a92705dc4
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1421083323,1425075897,b98c4078bffc0493741bd17338f08ac7f207c94b
b98c4078bffc0493741bd17338f08ac7f207c94b,b98c4078,ShareAFact: EL update,"ShareAFact: EL update

Also log share as text.
Added ""sharemode"" enum and new actions ""sharetap"" and ""abandoned"".

The new ""failure"" action is not feasible on Android for the same reason
as ""share"" is not.

Restrict the length of text to 99  (for now) to avoid events being dropped.
Dan, feel free to change as needed.

Moved setting and checking of currentActionMode around to avoid logging
the highlight event twice.

Change-Id: I5f0a88c33e3ef31f6d5e6e5e102468be5a6f72d1
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424756732,1425059516,0db7a871a68f29674cbbc37838039e84151ae694
0db7a871a68f29674cbbc37838039e84151ae694,0db7a871,Remove translations below the completion threshold,"Remove translations below the completion threshold

TWN does not export translations once they drop below the threshold of 35% completion.
Once those languages that got remove will get above that threshold they will be
added back automatically.

Change-Id: I3da915485ed9102de151ae3a643c93def9fc7b84
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424923854,1424983979,eb637202fee38dc474c6899332c1c98964ba8cdf
eb637202fee38dc474c6899332c1c98964ba8cdf,eb637202,Remove obsolete language folders,"Remove obsolete language folders

This is a follow-up to https://gerrit.wikimedia.org/r/#/c/191497/.

Change-Id: I669384022d6db99834290c35db1effc92970f73f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424923024,1424983979,6adc1a7f2563dab9e76abf48d6ca6106a5ac7ede
6adc1a7f2563dab9e76abf48d6ca6106a5ac7ede,6adc1a7f,Fix shadow for ToC and nav drawer in RTL.,"Fix shadow for ToC and nav drawer in RTL.

Change-Id: I151739c750e401798adf7111bd921d907fe719f3
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1424961236,1424961236,748c38b4e57a3108a00a47fde89f60d3f1641dbb
748c38b4e57a3108a00a47fde89f60d3f1641dbb,748c38b4,Unregister clipboard listener in onDestroy instead of onStop.,"Unregister clipboard listener in onDestroy instead of onStop.

The onStop event is too ""early"" for unregistering the clipboard listener.
It's possible to go to another activity (e.g. gallery), then come back,
and suddenly be unable to share highlighted text. This is because the
activity was stopped (onStop) and then resumed.

The onDestroy event is called when the activity will definitely not be
resumed. Dismissing the sharing dialogs inside this event is OK, too.

Change-Id: I89d2e0ded02929434dc3d55cb34afbaccb77c901
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424921921,1424925369,00a64e93883c895aef2c165c242e6df03d6405e5
00a64e93883c895aef2c165c242e6df03d6405e5,00a64e93,Tweak the size of gallery license icon.,"Tweak the size of gallery license icon.

Per Vibha's request.
The click area remains the same, and also added drawable for highlight on
press.

Change-Id: I433b2fcc9b48379d2ff2a5beb6f9d533ff71fb0c
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424921149,1424925165,ab8baeae71c42873b48d2e281668632b0ffa3308
ab8baeae71c42873b48d2e281668632b0ffa3308,ab8baeae,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4a734b29fc70dc90c3dce0eafa8862d16891b68c
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424913381,1424922442,7c9e0dfc2837290978faf0f3776a116000783ae0
7c9e0dfc2837290978faf0f3776a116000783ae0,7c9e0dfc,"Merge ""Update to Android Gradle build plugin to 1.1.0""","Merge ""Update to Android Gradle build plugin to 1.1.0""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424891931,1424891931,"83efa90def3d3c1c983e73ce90a0fef4c5760e84,4d7063f7c2abac275b38abd332abea867a9a88f0"
83efa90def3d3c1c983e73ce90a0fef4c5760e84,83efa90d,"Merge ""Remove unused resources""","Merge ""Remove unused resources""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424891905,1424891905,"b901969b80f30d7f5dcf675fc30820f0442b081a,121d799484a5c9d3ab9ef378ac51f4778a32735b"
b901969b80f30d7f5dcf675fc30820f0442b081a,b901969b,Improve moving of infoboxes to end of first paragraph.,"Improve moving of infoboxes to end of first paragraph.

Reusing transform code from iOS, where we search for the first <p> tag
that is nonempty, and move it up to the top, instead of moving tables and
images down.

Solves issues with some articles' infobox overlapping with the edit
pencil. (Examples for testing: [[Westham]], [[Sparta]], [[Russia]])
Mostly applies to articles with hidden geo coordinates.

Also solves issue where an infobox might become embedded into another
existing infobox. (as in [[Barack Obama]])

Also solves issue where text blocks were reordered (example: [[Snark
(graph theory)]].

Factored out some commonly used utility functions into a separate ""util""
module.

Bug: T77802
Change-Id: I39c038f09e7d807d4876cbcbb49c0fc2ea9093f2
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424725231,1424891576,025a97849d973527c400906b06a6cb094dd28f7e
121d799484a5c9d3ab9ef378ac51f4778a32735b,121d7994,Remove unused resources,"Remove unused resources

and a couple of Lint errors about Log tags being too long

Change-Id: Ife1f18c4c6c349f7590f35bef01f7c2abc4b707b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424888405,1424888405,025a97849d973527c400906b06a6cb094dd28f7e
4d7063f7c2abac275b38abd332abea867a9a88f0,4d7063f7,Update to Android Gradle build plugin to 1.1.0,"Update to Android Gradle build plugin to 1.1.0

Change-Id: I841357b2e400922b439c587b3958f8f79593c6b1
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424883126,1424883126,025a97849d973527c400906b06a6cb094dd28f7e
025a97849d973527c400906b06a6cb094dd28f7e,025a9784,Correctly release ContentProviderClient.,"Correctly release ContentProviderClient.

We also use ContentProviderClients in our Persister classes, but those
technically don't need to be released because we maintain them for the
lifetime of the app.

Change-Id: I0df90eb7e1ad52eff43effa81f7220f43106e200
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1424808460,1424808460,64d4cb658dbc448b39095178bef170885441c219
64d4cb658dbc448b39095178bef170885441c219,64d4cb65,"Merge ""Read more suggestions for main page""","Merge ""Read more suggestions for main page""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424807965,1424807965,"fb5de63b7d18b72bc10cf470177a08060c492f4e,00461caf3a0b70845c140b3d515a4a7b90d16820"
fb5de63b7d18b72bc10cf470177a08060c492f4e,fb5de63b,"Merge ""Fix disambiguation links that point to specific sections to work properly""","Merge ""Fix disambiguation links that point to specific sections to work properly""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424807464,1424807464,"1cca8078d7524efefd204ab5e139591e0338afd2,9b193de9bcb123dbe017b8a3a455b9222ee707bc"
00461caf3a0b70845c140b3d515a4a7b90d16820,00461caf,Read more suggestions for main page,"Read more suggestions for main page

On the main page, display three did you mean results based
on a single entry from the user's history.

We're looking at the last history entry that is not of source
main page or random.

Change-Id: Ia4568e6a1f3e350de05629af954ad8a5649b05cd
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424714677,1424796472,bb10ff94f7c094541d7d273e1917c7be54371b15
9b193de9bcb123dbe017b8a3a455b9222ee707bc,9b193de9,Fix disambiguation links that point to specific sections to work properly,"Fix disambiguation links that point to specific sections to work properly

This patch:
* Changes the JavaScript which passes disambiguation links to the Java to pass
  the href instead of the displayed HTML of a link.
* Changes the Java that receives disambiguation links to process the href
  instead using a method specially designed to do that.
* Modifies DisambigListAdapter to use display titles rather than ugly ones
* Modifies the task that fetches descriptions to also work with display titles

All in all, disambiguation links that point to a specific section now work.

Change-Id: Ia1aacfdac2747907c331c8b81100278a12d4c4fb
Task: T88636
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1424764003,1424793921,bb10ff94f7c094541d7d273e1917c7be54371b15
1cca8078d7524efefd204ab5e139591e0338afd2,1cca8078,"Merge ""Catch exceptions in SaneAsyncTask.onFinish""","Merge ""Catch exceptions in SaneAsyncTask.onFinish""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424782095,1424782095,"bb10ff94f7c094541d7d273e1917c7be54371b15,d44c46a231a1251e41da5c50f0d1892af520b522"
bb10ff94f7c094541d7d273e1917c7be54371b15,bb10ff94,Don't display last modified message on main page,"Don't display last modified message on main page

The last modified time is always wrong, because the contents of the main page
are contained inside another template. This patch simply hides the message. An
alternative would've been to hack it to always say that it was modified today,
but that could be wrong on wikis where the main page content isn't updated
daily.

This patch also adds isFilePage() and isMainPage() methods to the Page class
for convenience. It was quite clunky to remember that you needed to
getPageProperties().isMainPage() and getTitle.isFilePage(), so this alleviates
you having to do that if you have the Page object. A subsequent patch can
migrate places where the old way is used to the more convenient way.

Bug: T78005
Change-Id: Ib9e9ac8b99755785cd34bed535e23d5df4db69bc
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424673641,1424738339,a25fef8291a178c1f31e1ecb8935f664d2647f29
a25fef8291a178c1f31e1ecb8935f664d2647f29,a25fef82,Update app store description for translation.,"Update app store description for translation.

Change-Id: I0af9c4513864065cde588daab8b7fe3ee9b20eb2
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424661607,1424733650,e0b61afdb1af312668d413f072c82d56e7f11c0d
d44c46a231a1251e41da5c50f0d1892af520b522,d44c46a2,Catch exceptions in SaneAsyncTask.onFinish,"Catch exceptions in SaneAsyncTask.onFinish

Call onCatch() when exception occurs in onFinish as well.

Change-Id: I8c103cb3698b700307196054f89d28be69dcbdfe
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424725806,1424728421,e0b61afdb1af312668d413f072c82d56e7f11c0d
e0b61afdb1af312668d413f072c82d56e7f11c0d,e0b61afd,Use icons in Gallery license information.,"Use icons in Gallery license information.

Using logic loosely based on the current MultimediaViewer extension's
handling of license information.

If a media item explicitly licensed under CC (any variation), then show
the CC icon. If an item is explicitly licensed as PD, then show the PD
icon. In all other cases, show the ""cite"" icon.

Clicking on the icon will launch the associated license URL in the
external browser.

Long-pressing the icon will pop up a Toast with the UsageTerms for the
item.

Change-Id: I621b87b2ae1cc89189c7cf7d8e9d1cf030a881c2
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424453377,1424715256,447d3f9a9787590edab466f0a014e3f48b97175a
447d3f9a9787590edab466f0a014e3f48b97175a,447d3f9a,"Merge ""Fix button text incorrectly appearing in ALLCAPS.""","Merge ""Fix button text incorrectly appearing in ALLCAPS.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424708765,1424708765,"781222c20b76b0ba2e1ea44e01609d27357d2eb0,dc1a93f79659b1fc39078c91ebe7aeb93098cd19"
dc1a93f79659b1fc39078c91ebe7aeb93098cd19,dc1a93f7,Fix button text incorrectly appearing in ALLCAPS.,"Fix button text incorrectly appearing in ALLCAPS.

Bug: T87595
Change-Id: Icd84c42dcbb2ae5133bf01f7c03919eb36187a5e
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1424672620,1424705875,f748affea9d14afffd3c38912798e83c4966e558
781222c20b76b0ba2e1ea44e01609d27357d2eb0,781222c2,Promote widgets from alpha to production,"Promote widgets from alpha to production

Change-Id: Ie99156d866dfa87f4fa1bb70051c6c2b73f78d6f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424552312,1424552312,f748affea9d14afffd3c38912798e83c4966e558
f748affea9d14afffd3c38912798e83c4966e558,f748affe,Fix several Lint issues,"Fix several Lint issues

- xml: Unexpected namespace prefix ""xmlns"" found
- Assert: Assertions are unreliable. Use BuildConfig.DEBUG conditional checks instead.
- Invalid package reference in library; not included in Android: java.nio.file.
  Referenced from okio.Okio.
- IconLocation: Image defined in density-independent drawable folder
- ContentDescription: Image without contentDescription
+ Updated README

Change-Id: I0ac2c5704a4516f63ba8006be918f6bb2388e3af
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1424366358,1424460839,6c80ceb91980eba78e4253d3ac86d2dbc4afe695
6c80ceb91980eba78e4253d3ac86d2dbc4afe695,6c80ceb9,Fix ability to share text selection after screen rotation.,"Fix ability to share text selection after screen rotation.

Refactored the way we initialize and clean up our ShareAdapters (both the
TextSelected and NoTextSelected adapters).
They were being instantiated in-place, and were creating Dialog objects
that weren't being destroyed properly upon screen rotation (leaking the
window).  This was also causing an imbalance in the adding and removing of
the Clipboard Listener that receives the shared text from the WebView,
which was preventing the text from being shared after rotation.

I modified the ShareAdapters to inherit from the base ShareHandler, which
will maintain a reference to the Dialog that it instantiates, so that it
can be explicitly dismissed when necessary.  And the Clipboard listener
will now persist for the lifetime of the Activity.

Bug: T89979
Change-Id: Ib081a48ef342c0844fa996c94314d41b6ff9d298
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424380915,1424456045,ba835126e8e30533a3c4495a1de46671f639c8ab
ba835126e8e30533a3c4495a1de46671f639c8ab,ba835126,Bump versionCode,"Bump versionCode

Change-Id: Ie375ada75aa53b9718078c23bcab157258fa64ec
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424381323,1424381323,d84e0dbcf60bed0c1e23d20734d50a221ac0d9e9
d84e0dbcf60bed0c1e23d20734d50a221ac0d9e9,d84e0dbc,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia05410470a03149f0a96ef290acf3f4cceee912d
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1424380350,1424380350,e74ddb005de0b5539746bd87500dfbb4b87abc27
e74ddb005de0b5539746bd87500dfbb4b87abc27,e74ddb00,"Give lead image a white background, in case the image has transparency.","Give lead image a white background, in case the image has transparency.

Bug: T87250

Change-Id: I6cba6972f82d55fa6c8f47b8231e943a56ff6cf8
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1424372433,1424372986,ce4cadb3340795d7f5fbdbf3e2543f88b0cfbec9
ce4cadb3340795d7f5fbdbf3e2543f88b0cfbec9,ce4cadb3,"Merge ""Additional tweaks/fixes for share-a-fact.""","Merge ""Additional tweaks/fixes for share-a-fact.""",,,,dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424372329,1424372329,"ffe02ef87a09410392568f17c9e87a9f667ee476,806dd812924685a49d5366921267fb04a49b059c"
ffe02ef87a09410392568f17c9e87a9f667ee476,ffe02ef8,"In Gallery, provide a white background for images with transparency.","In Gallery, provide a white background for images with transparency.

Bug: T87250
Change-Id: I2181088796c871e13b96a585cd3812bb65d361a6
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1424363059,1424363059,e261798f3cc35a8e16f11c1811de576b3ffc4b3a
806dd812924685a49d5366921267fb04a49b059c,806dd812,Additional tweaks/fixes for share-a-fact.,"Additional tweaks/fixes for share-a-fact.

- Fixed face offset.
- Added dark gradient underneath text.
- Tweaked some margins and offsets.
- Put the share layout into a ScrollView, in case the display is too small
  for the generated image and buttons.
- Hiding description when sharing from Main page.
- Replaced registered-trademark character.
- Fixed unrelated checkstyle.

Bug: T86242
Change-Id: Ie3a89afcdc93844d82164836aef2b8632cdc992e
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1424293217,1424361284,e261798f3cc35a8e16f11c1811de576b3ffc4b3a
e261798f3cc35a8e16f11c1811de576b3ffc4b3a,e261798f,"Merge ""Add EventLogging for widget taps.""","Merge ""Add EventLogging for widget taps.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424358343,1424358343,"62ebbd375c0b18e51c22f474d41f7a429882b58d,5f9b5095fd45b974e76a8681e89720c37feb8257"
62ebbd375c0b18e51c22f474d41f7a429882b58d,62ebbd37,"Merge ""Correct misleading comment in handleIntent method in PageActivity""","Merge ""Correct misleading comment in handleIntent method in PageActivity""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424358036,1424358036,"dbbb85ae5e24d62032720c6f42cdaec7560aff34,a8d198c27ca7a29e98c1799f25c4d52b2573cc72"
dbbb85ae5e24d62032720c6f42cdaec7560aff34,dbbb85ae,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ib8aa768824723e99e3f850c9e233c11bce5c894e
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1424348353,1424348353,056a041110f383c41785fee4e64ef36b765e8041
5f9b5095fd45b974e76a8681e89720c37feb8257,5f9b5095,Add EventLogging for widget taps.,"Add EventLogging for widget taps.

This patch adds EventLogging for widget taps so that we can see how much users
are using them and know whether to invest further resources in improving them.

Change-Id: Ie71cb6726701a6a979f0267526c507d8822a1092
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1424321404,1424322055,056a041110f383c41785fee4e64ef36b765e8041
a8d198c27ca7a29e98c1799f25c4d52b2573cc72,a8d198c2,Correct misleading comment in handleIntent method in PageActivity,"Correct misleading comment in handleIntent method in PageActivity

This patch corrects a slightly misleading, but technically correct, comment in
the handleIntent method in PageActivity. The comment implies that the else
statement only executes when the app is handled an Intent it doesn't
recognise, which is not actually the case. Through doing some testing using
breakpoints, I've found out that this else statement is also triggered if the
user taps on the app from their home screen, which is far from out of the
ordinary!

This is a pretty subjective matter, so I intentionally made this change in a
separate commit from the other commit I just made that touches this area of
the code. Feel free to tell me I'm silly and that I should abandon this. :-)

Change-Id: If2b514d1f32a37a5baa46518251cc74c17bf726e
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1424321745,1424321745,056a041110f383c41785fee4e64ef36b765e8041
056a041110f383c41785fee4e64ef36b765e8041,056a0411,"Merge ""ShareAFact design changes""","Merge ""ShareAFact design changes""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424282773,1424282773,"dbe749d4ec0e6e9b45099f938162d15f54633328,58c719977cc9a08f66c0eda6b4f5edb38ec60972"
dbe749d4ec0e6e9b45099f938162d15f54633328,dbe749d4,Fix incorrectly closed <string> in qq/strings.xml,"Fix incorrectly closed <string> in qq/strings.xml

There is a <string> tag which was closed incorrectly, encasing the
documentation for three strings inside the documentation for another string.
This patch fixes that by closing the <string> tags correctly.

Change-Id: I6c2fcd0024983855beddec492ba5d47834f6f975
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424229001,1424231590,95d7dc82ff1a5dd10b52ee8a400e81c893b9fa6c
58c719977cc9a08f66c0eda6b4f5edb38ec60972,58c71997,ShareAFact design changes,"ShareAFact design changes

- Replace gray CC-BY-SA icon with white one.
- Make sure title, description, and license icons don't overlap.
- Adjust font size, top, and height for title, description, and text snippet.

Change-Id: I8ce1b3faed1e47459068d73183ea4028370baacd
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424199513,1424210679,95d7dc82ff1a5dd10b52ee8a400e81c893b9fa6c
95d7dc82ff1a5dd10b52ee8a400e81c893b9fa6c,95d7dc82,"Fix ""other"" edit summary in 2.3","Fix ""other"" edit summary in 2.3

- Fix text color (was white on white)
- Fix showing of persisted suggestions, and their background color

Change-Id: Ie30a6be537f55e1c69a09cb2acd5540768b991fb
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424191982,1424200437,00f259d9f1e3df49dd99434d3a0e088768140641
00f259d9f1e3df49dd99434d3a0e088768140641,00f259d9,Fix scrolling when tapping and dragging over lead image.,"Fix scrolling when tapping and dragging over lead image.

Added a custom OnClickListener (with coordinates) to the actual WebView.
Then, if we detect a click within the logical area of the lead image, then
we can assume that the user intended to click on the lead image. Otherwise
the touch/scroll/etc event will be passed on to the WebView.

Bug: T87128
Change-Id: Ie32524661c4d5408cc17489898074c5bceab33be
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424104397,1424200150,7434c9a054445156d3b439171680fcd577455824
7434c9a054445156d3b439171680fcd577455824,7434c9a0,"Once and for all, spell ""persistence"" correctly.","Once and for all, spell ""persistence"" correctly.

Change-Id: I69a4dc261af7dbeeb73e146f2845a931f300977a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1424193125,1424196703,297b49c4b003540979433a22da4417770b532a72
297b49c4b003540979433a22da4417770b532a72,297b49c4,"Merge changes I7298d089,I83edefae","Merge changes I7298d089,I83edefae

* changes:
  Share first paragraph when no text is selected
  ShareAFact refactoring
",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424194105,1424194105,"9442bf69b8bd158bf1a7b65b12a52c396af52c5e,85ca4374534adaf430f9ff94aea8ea3640a93290"
9442bf69b8bd158bf1a7b65b12a52c396af52c5e,9442bf69,"Merge ""Hygiene: Convert some fields to local variables""","Merge ""Hygiene: Convert some fields to local variables""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424191565,1424191565,"6de70f816173bd6191ce67aa24767d34577b05e4,d75796c85ab20db8c8cc2d427a395526132204e5"
6de70f816173bd6191ce67aa24767d34577b05e4,6de70f81,"Merge ""Hygiene: Remove unused visitSettings method from EditSectionActivity""","Merge ""Hygiene: Remove unused visitSettings method from EditSectionActivity""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1424191226,1424191226,"20f5650e82aa335415b0119365e231af45a87cc9,05c04c39197be6416ca46c3a831afccec116b6d5"
d75796c85ab20db8c8cc2d427a395526132204e5,d75796c8,Hygiene: Convert some fields to local variables,"Hygiene: Convert some fields to local variables

Change-Id: I48589b7cbcc9a336b00c36e1c50b0b002ccf4445
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1424154984,1424154984,b71461170a42bb3ffa04b942635b899229ec2c29
05c04c39197be6416ca46c3a831afccec116b6d5,05c04c39,Hygiene: Remove unused visitSettings method from EditSectionActivity,"Hygiene: Remove unused visitSettings method from EditSectionActivity

Change-Id: I41205b4a5a73ead592f67e16686ab4e0146cf76b
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1424154623,1424154623,b71461170a42bb3ffa04b942635b899229ec2c29
20f5650e82aa335415b0119365e231af45a87cc9,20f5650e,Force enable autocompletion in the edit summary AutoCompleteTextView,"Force enable autocompletion in the edit summary AutoCompleteTextView

AutoCompleteTextViews override and disable autocomplete. It's kind of ironic.
The patch force enables it. Unfortunately this needs to be done in the Java
for the fragment containing the text view, because if you set inputType to
textAutoComplete in the XML then nothing happens.

Bug: T89696
Change-Id: Id2308c47c1c54e7d7012b1b744e089f5250395f4
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1424153191,1424153191,b71461170a42bb3ffa04b942635b899229ec2c29
85ca4374534adaf430f9ff94aea8ea3640a93290,85ca4374,Share first paragraph when no text is selected,"Share first paragraph when no text is selected

This functionality is accessible from the Share overflow menu.
If ""Share as text"" is selected just share the URL.

For when text is selected:
If less than 2 characters are selected also just share the URL.

Added TODO for NoTextSelectedShareAdapter because
right now it's not clear if we want to have event logged
when no text was selected.

Change-Id: I7298d08904713ef0f27d042fea31e61a7672dfef
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424145355,1424145804,486a3b3ab5d842a2aac654d4af3f5f8c8df014b7
486a3b3ab5d842a2aac654d4af3f5f8c8df014b7,486a3b3a,ShareAFact refactoring,"ShareAFact refactoring

Moving code into more logical places.
- Create a new class, ShareHandler, in preparation for sharing without a text selection.
- Renamed SnippetShareAdapter to SelectedTextShareAdapter

Change-Id: I83edefaeeb3a58b98cc666dca6024ec28579c297
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1424119258,1424145634,b71461170a42bb3ffa04b942635b899229ec2c29
b71461170a42bb3ffa04b942635b899229ec2c29,b7146117,Update launcher icons.,"Update launcher icons.

Change-Id: Ifeba57207a31ff53df84b73c31f8e4c7a67e8b3f
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1423841233,1424108994,eb230c59ce257ac880dc43c773bdc0c92c49687d
eb230c59ce257ac880dc43c773bdc0c92c49687d,eb230c59,Make nav drawer overlap over search bar.,"Make nav drawer overlap over search bar.

Added some padding around the Login menu item to make the nav list not be
so close to the top.

Change-Id: I303e40618e3c96f21273f15d92af41e26c8305e4
",,,,Dmitry Brant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1422666500,1424101601,a5565c5050a136b062fece70eeabfd0484f88f78
a5565c5050a136b062fece70eeabfd0484f88f78,a5565c50,ShareAFact: add preview + redesign,"ShareAFact: add preview + redesign

- Use standard share action of WebView instead of our own.
- Removed old ic_message and ic_message_dark icons since we
   are now hooking into the standard share action from the WebView.
- Show a preview dialog that comes up from the bottom with
   two buttons: ""Share as image"", ""Share as text""
- Redesigned the layout. The lead image is not on top anymore
   but becomes the background picture if we have one.
   If we don't have a lead image then use a black background.
   The text snippet goes on top, followed by title, and description.
   CC-BY-SA icons below and Wikipedia wordmark to the right,
   with the registered trademark symbol (R).
- Added combined CC-BY-SA icon in drawable folder since
   we only need a fixed size for the generated bitmap (in pixels).
- The registered trademark symbol (R) on the Wikipedia
   wordmark is done as a Unicode character.
- RTL aware: the general layout is RTL based on the article language,
   the Wordmark + registered trademark is RTL aware based on the
   device language.

Bug: T86843
Change-Id: Ie6990b1ae38808574ad083e935ef75170c883af2
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1421079790,1423780431,7ab1312896d2a7992ab41acdad8dad0e1059976b
7ab1312896d2a7992ab41acdad8dad0e1059976b,7ab13128,Make sure that saved images are successfully saved before telling the user so,"Make sure that saved images are successfully saved before telling the user so

Bug: T89358
Change-Id: I42195643b4594e19554acc14e0281223c4401884
",,,,Mikael Ståldal,mikael@staldal.nu,dbrant,dbrant@wikimedia.org,1423761503,1423773027,459c3b6e31702ba4d6f157831617f355840eeb45
459c3b6e31702ba4d6f157831617f355840eeb45,459c3b6e,Widgets.,"Widgets.

- Created ""Wikipedia search"" widget that launches the app and goes
  directly to the search interface.
- Created ""Wikipedia featured page"" widget that shows today's
  featured page, and simply opens the app to the Main page when clicked.

Change-Id: If8c0dfbf12ffe064737c6352aef72d70faf4074b
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1413221454,1423680425,a795066d68e7c214a55e86a02272853a3999f23e
a795066d68e7c214a55e86a02272853a3999f23e,a795066d,"Translucent toolbar on top of lead image, fading with scroll.","Translucent toolbar on top of lead image, fading with scroll.

Change-Id: I59bb202cfa95c7e2d7c234d154ee99a39ec65540
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1423171682,1423680248,caba12a3593df07e8e2ce3b7ea5a31cb91e184c4
caba12a3593df07e8e2ce3b7ea5a31cb91e184c4,caba12a3,Nearby: secondary action instead of long-click to view on a map.,"Nearby: secondary action instead of long-click to view on a map.

- Added Material icon for nearby marker pin (removed old icon).
- Added button on the right (end) of Nearby items that launches a geo://
  uri on clicking (and removed the long-press action from the item
  itself).
- Long-pressing the button brings up a tool-tip, a la ActionBar.

Change-Id: I6f346df84fb7c59b16a796674c8f885ec54a8344
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1422908695,1423678160,1fafd9db098e8c84b435336159a04f467b12db10
1fafd9db098e8c84b435336159a04f467b12db10,1fafd9db,Fix bold-highlighting of search results.,"Fix bold-highlighting of search results.

Incorrect highlighting was causing some results to look weird.
e.g. search for ""schwarzenegger"" and scroll down a bit.

Bug: T89037
Change-Id: Ifd513ab5069a78a500a69074396cd34b3e4fb492
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1423516302,1423516302,1ee01b0ca5b8f2c7542455c317f433a2e5026304
1ee01b0ca5b8f2c7542455c317f433a2e5026304,1ee01b0c,Enable search suggestions in prefix search task,"Enable search suggestions in prefix search task

Using list=search with srlimit of 1. Would have used srlimit of 0
if the API allowed it. This makes suggestions show up some of
the times.

Originally I added it to full text search but then the suggestions
comes too late. The first request is the prefix search. The
full text search comes as a second request.

Also refactored the SearchResult class to be used by both
prefix and full text searches.

Bug: T86982
Change-Id: I43a53b52069378af3cb08bb564b5f99a0511e5bd
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1422343099,1423515640,3941d79be0ea081b5f83269a325efbf545008d83
3941d79be0ea081b5f83269a325efbf545008d83,3941d79b,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I4dff86e4fa2e3ac6c0382e90d1dd44a3ef0baf8e
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1423507070,1423507070,314763260da2f22924b938d1a80177930b39d25c
314763260da2f22924b938d1a80177930b39d25c,31476326,"Merge ""Use Gradle BuildConfig to replace getPackageName calls""","Merge ""Use Gradle BuildConfig to replace getPackageName calls""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1423100783,1423100783,"e3662dbc9684096c81b587a569e4b8ece2930fde,bb02d6451f0abff7a5cac99b5285f61b295885d0"
e3662dbc9684096c81b587a569e4b8ece2930fde,e3662dbc,"Crop images to crop off more off the bottom of images, rather than centreing.","Crop images to crop off more off the bottom of images, rather than centreing.

This patch changes the fallback logic where no face is detected to crop by
chopping more off the bottom of the image rather than cropping to centre the
image.

Bug: T87613
Change-Id: Ie1f64089f03d41198b18f30582f063a2c522ede3
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1422308387,1423098691,bd2e59a97ba4e440c94f93ee57a57fe2bd17af08
bb02d6451f0abff7a5cac99b5285f61b295885d0,bb02d645,Use Gradle BuildConfig to replace getPackageName calls,"Use Gradle BuildConfig to replace getPackageName calls

Gradle creates a few useful strings a in the BuildConfig class.
Those constant strings are way less expensive than calls to
getPackageName() and the like.

Also got rid of app.getAppVersionString() and replaced the
occurrences with the constant BuildConfig.VERSION_NAME.

Change-Id: If8f6b991046e80e885b64b4c8f0a0895e0676628
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1423010638,1423093394,bd2e59a97ba4e440c94f93ee57a57fe2bd17af08
bd2e59a97ba4e440c94f93ee57a57fe2bd17af08,bd2e59a9,"Styling tweaks: infobox color/shadow, disambig link padding.","Styling tweaks: infobox color/shadow, disambig link padding.

Corresponding MobileApp patch: https://gerrit.wikimedia.org/r/187842

Change-Id: I804c1b16edc6c5b54e6e541ae35c6f5a067e5154
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1422665151,1423001284,918d431377a25eac0eeea7927a08f39727a37271
918d431377a25eac0eeea7927a08f39727a37271,918d4313,Styling tweaks: toolbar/drawer shadows.,"Styling tweaks: toolbar/drawer shadows.

Made the shadow under the toolbar more subtle.
Added shadow to nav drawer and ToC drawer.

Change-Id: Ie4d00399cc03b75a92454169903507bcaee54afa
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1422663560,1422908841,02fc605a731552ea08821c5b0fb134aa8264e88b
02fc605a731552ea08821c5b0fb134aa8264e88b,02fc605a,Switch to using PreferenceFragment for settings.,"Switch to using PreferenceFragment for settings.

As of API 11, the proper way to present lists of settings is by using a
PreferenceFragment instead of PreferenceActivity.  And because the activity
that contains the new Fragment inherits from ActionBarActivity, it indirectly
fixes the rendering issues that we saw with checkboxes.

Unfortunately API 10 does not support PreferenceFragment, so we have to keep
the old PreferenceActivity specifically for compatibility with API 10.

Also reverted the previous fix for the checkbox rendering issue.

Bug: T85809
Change-Id: I61d93eade8d0f059411713898b816b89bb32b7a8
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1422562352,1422904311,f50c409c35b89efcdb9937cc674a4bf6059c4537
f50c409c35b89efcdb9937cc674a4bf6059c4537,f50c409c,"Don't keep History, Saved Pages, or Nearby fragment in the backstack.","Don't keep History, Saved Pages, or Nearby fragment in the backstack.

Change-Id: Ib8d59d3d23e8ef3af5ca426aa0a0a10f2c17e4bc
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1422888211,1422904049,3362a682a83a8bffff5d351dcf424b797da67b45
3362a682a83a8bffff5d351dcf424b797da67b45,3362a682,Ripple effect when highlighting Nav items.,"Ripple effect when highlighting Nav items.

(only applies to 5.0+)

Change-Id: Ieae712a429698757fd20694a4b693a2d5c41eaab
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1422902284,1422902284,268048733dd94a2a1ec9babdc26858ec2ea9e052
268048733dd94a2a1ec9babdc26858ec2ea9e052,26804873,Capitalise first character of descriptions returned by action=mobileview,"Capitalise first character of descriptions returned by action=mobileview

Change-Id: Ic67b787628c624dfd15547a17b0d06628e0eb9ff
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1422660266,1422660266,ee416aeaef48f890f2bfbff589713d4a4224c5f8
ee416aeaef48f890f2bfbff589713d4a4224c5f8,ee416aea,Avoid NPE crash from onPrepareOptionsMenu,"Avoid NPE crash from onPrepareOptionsMenu

Maybe related to https://github.com/Prototik/HoloEverywhere/issues/577
'In onPrepareOptionsMenu, calling menu.findItem returns null when pressing ""menu"" key'

Also refactored the findItem calls since they are potentially expensive
and savePageMenu is used multiple times.

I assume that if the first menu item is not null the others would not be
null as well. If that's not the case we should get more reports like this
with newer releases. But it think that's unlikely.

Bug: T87109
Change-Id: Ic956ce57ea8a440c7d887978b43acdd432af92f8
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1422518977,1422654920,ab61b1653d985b409b2662493ea9a7c438f25f1f
ab61b1653d985b409b2662493ea9a7c438f25f1f,ab61b165,Enable Checkstyle via Gradle,"Enable Checkstyle via Gradle

To run checkstyle from commandline:
./gradlew checkstyle

To run checkstyle from Android Studio:
Open Gradle tab (on right hand side)
Select the ""checkstyle"" task and run it.

Change-Id: I40044e1025f5d0c70cbef47199d684ddcad0560f
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1422515550,1422645191,102aaf567519b4d8449dd1bbf9a2e292eb0fab00
102aaf567519b4d8449dd1bbf9a2e292eb0fab00,102aaf56,More docs for make-templates script,"More docs for make-templates script

after chatting with Yuvi.

Change-Id: I2389da2ab6a8baddac7614984216dfc149d539bc
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1422558116,1422566873,f831d0f08c8e4f708c6e676238c21ad8bfcbb037
f831d0f08c8e4f708c6e676238c21ad8bfcbb037,f831d0f0,Update Android plugin for Gradle to version 1.0.1,"Update Android plugin for Gradle to version 1.0.1

Change-Id: Iac1cc0a087df01ce25a230b277f570db1641df3c
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1422433107,1422565914,0bf5cf527dfdd9ae8d219d976662236166d059e8
0bf5cf527dfdd9ae8d219d976662236166d059e8,0bf5cf52,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I5b70a75f785d039f08c02bde75f57ced42600a9a
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1422554307,1422554307,7cd4fd42c8730ceba8389296a8c9a73d884d5ac1
7cd4fd42c8730ceba8389296a8c9a73d884d5ac1,7cd4fd42,Bump versionCode,"Bump versionCode

Change-Id: I90f603870c31b70cb5615f70d3076a5bef1b3b44
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1422483687,1422483687,1fef095300a4f171e3a9b8a2e80dc941655591db
1fef095300a4f171e3a9b8a2e80dc941655591db,1fef0953,Remove extra translations,"Remove extra translations

to make the release build happy.

Change-Id: I9def12363f099b09cb24274c0f58571c95f91b04
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1422483484,1422483484,f529ae4eddf240a71c669949aa0ba5d491eb4dde
f529ae4eddf240a71c669949aa0ba5d491eb4dde,f529ae4e,Fix possible crash when backing out of Gallery activity.,"Fix possible crash when backing out of Gallery activity.

Bug: T87149
Change-Id: I29be538fe81e05b39cce5684dcd641ca9d636994
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1422474246,1422483145,61b90732761deb55aa21fa4b084e93a92ef9253d
61b90732761deb55aa21fa4b084e93a92ef9253d,61b90732,"Merge ""Make checkboxes visible in dark mode on 4.x""","Merge ""Make checkboxes visible in dark mode on 4.x""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1422483025,1422483025,"536ab5218c7f582cc6caf7e6b472be497f3dffdf,d672252f6f4d50dec7d395dc2e4adda56f89c6c0"
536ab5218c7f582cc6caf7e6b472be497f3dffdf,536ab521,"Merge ""Remove strings.xml files without real translations""","Merge ""Remove strings.xml files without real translations""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1422473244,1422473244,"28ee5bda2a66ff171ca7b648d0689aac193c3a5b,70e49770a696439635107c6c4873b803d698b1cc"
28ee5bda2a66ff171ca7b648d0689aac193c3a5b,28ee5bda,"Merge ""Fix infobox styles for night mode""","Merge ""Fix infobox styles for night mode""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1422473089,1422473089,"dbfa3302b7bed9a258db659e4b41867f505c7d0f,8823510239ea9a44610de4feef47447a7d61a1da"
70e49770a696439635107c6c4873b803d698b1cc,70e49770,Remove strings.xml files without real translations,"Remove strings.xml files without real translations

Change-Id: I70f9dd0908b75c82e733d01c73f4b4b7c5c20d4e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1422429449,1422429449,dbfa3302b7bed9a258db659e4b41867f505c7d0f
dbfa3302b7bed9a258db659e4b41867f505c7d0f,dbfa3302,Fix build/translations,"Fix build/translations

String values starting with @ are interpreted as references to other resources.
Escaped the @ in the Korean string.

Bug: T87628
Change-Id: I55cca57f290aad112b5b71cc2b996d413c869e84
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1422335791,1422343745,aaa7bbd7197927799478ec5e3d2aebd718b10158
aaa7bbd7197927799478ec5e3d2aebd718b10158,aaa7bbd7,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I6d41301cbdc69a3e0f4d80b5bd494feb1c7dd188
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1422309828,1422309828,53e70e21b35421aebe10c13f0e28d45700e90816
8823510239ea9a44610de4feef47447a7d61a1da,88235102,Fix infobox styles for night mode,"Fix infobox styles for night mode

When the latest styles from MFE got pulled
(https://gerrit.wikimedia.org/r/#/c/185564/4)
it introduced light background for infoboxes,
even in night mode.
This will fix it. The other issue was that the font size
inside infoboxes got smaller.

See also corresponding patch in MobileApp extension:
https://gerrit.wikimedia.org/r/186621

Change-Id: Ie51221432db6022d50351da034e72af50603339f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1422169228,1422169228,53e70e21b35421aebe10c13f0e28d45700e90816
53e70e21b35421aebe10c13f0e28d45700e90816,53e70e21,Fix improperly wrapping Wikidata descriptions in Nearby.,"Fix improperly wrapping Wikidata descriptions in Nearby.

The Wikidata description TextView was erroneiously using match_parent for its
layout_width, which caused it to wrap strangely in the case that the
description was particularly long. This patch changes that to wrap_content so
that it displays properly.

Bug: T87401
Change-Id: I8e46ee064226cb60687e3ca7f9906828f95d5bd4
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1421989317,1421989317,e517b86d5edbabe4dddbb339224d5d84bf4ffab7
e517b86d5edbabe4dddbb339224d5d84bf4ffab7,e517b86d,Fix crash when clicking images in Preview.,"Fix crash when clicking images in Preview.

Bug: T87110
Change-Id: I64edc5d340147dd9b582171f851ad84eb837f266
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1421795653,1421804084,729f48f554ba69ed6c6b552b70a51413bc68bbda
729f48f554ba69ed6c6b552b70a51413bc68bbda,729f48f5,Fix getting gallery image from non primary site.,"Fix getting gallery image from non primary site.

Bug: T87071
Change-Id: I3916d8fa79f7b74509e60c41bcd64e43df502a80
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1421783655,1421797993,9b4718a934108332826d736029a2caaada5cf6ac
9b4718a934108332826d736029a2caaada5cf6ac,9b4718a9,"Merge ""Add 1:100 sampling rate for table of contents interaction.""","Merge ""Add 1:100 sampling rate for table of contents interaction.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1421797929,1421797929,"4a9a27498157a9f95187de7e570de0fd4272bacd,d683ba8e01a60c23d31bb1fb8144b0178be38b62"
4a9a27498157a9f95187de7e570de0fd4272bacd,4a9a2749,"Merge ""Fix tests""","Merge ""Fix tests""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1421796963,1421796963,"8b3bd972e425b13aa154274ed87c40e64d44350a,da6f0556256d7fee80304eef257487e5dd270e90"
d683ba8e01a60c23d31bb1fb8144b0178be38b62,d683ba8e,Add 1:100 sampling rate for table of contents interaction.,"Add 1:100 sampling rate for table of contents interaction.

EventLogging has a pretty strict limit for how many events it can write to its
database per second. Since the ToC data isn't being actively used right now
and is one of our biggest schemas in event throughput, this patch adds 1:100
sampling to the ToC data to ease the load on EventLogging.

Change-Id: Ib4ca1f570fd18aa288ad003b5759b42541d8097f
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1421729583,1421729583,8b3bd972e425b13aa154274ed87c40e64d44350a
d672252f6f4d50dec7d395dc2e4adda56f89c6c0,d672252f,Make checkboxes visible in dark mode on 4.x,"Make checkboxes visible in dark mode on 4.x

Checkboxes in settings aren't visible in dark mode on 4.x (prob. also on 3.x).
So make background color a bit lighter. Not needed in GB and Lollipop.

Bug: T85809
Change-Id: I3344c3679e26739b5b4962b8c52a8b594e9c4702
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1421723099,1421723099,8b3bd972e425b13aa154274ed87c40e64d44350a
8b3bd972e425b13aa154274ed87c40e64d44350a,8b3bd972,"Add documentation for undocumented messages, and remove unused messages.","Add documentation for undocumented messages, and remove unused messages.

Change-Id: If5a3f64af15d764efe526f0475944b1659bb9b8a
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1421629556,1421715943,3a56380c377654ea9e2ed26dd5508ae3db8ed97a
3a56380c377654ea9e2ed26dd5508ae3db8ed97a,3a56380c,More aggressively disable autocorrect on username fields,"More aggressively disable autocorrect on username fields

Although we had already set the fields to not give suggestions, certain
classes of Android devices, such as some Samsung devices, ignore the
instruction and display suggestions anyway. Even devices that do not
(like my stock Nexus 5) still reserve space for the suggestions that
don't even appear.

This patch marks username fields as visible password fields as a
workaround to both of the above.

Bug: T87208
Change-Id: Ib8edee8e49f4a2b248112ac1e541c9ece9e776e9
",,,,Dan Garry,dgarry@wikimedia.org,Dan Garry,dgarry@wikimedia.org,1421712117,1421713803,c5caecc621107326813dc0193257810f530f7eb8
da6f0556256d7fee80304eef257487e5dd270e90,da6f0556,Fix tests,"Fix tests

* CreateAccountTokenTest and TriggerEditCaptchaTest failed when
  run several times withing a short period of time. Not sure why we sometimes
  get success results instead of CAPTCHAs.
* LoginTaskTest just needs cumbersome setup. Added @Suppress annotation
  so it doesn't run automatically. It still can be run individually.
* PreviewTaskTests needed a small adjustment for the number of \n in the expected result.
* PacelableTest had some unused/unclear code.
* Fixed some code inspection issues

Change-Id: If09a1f4a87414e914b3578f29b466b304c2e2493
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403038994,1421699269,c5caecc621107326813dc0193257810f530f7eb8
c5caecc621107326813dc0193257810f530f7eb8,c5caecc6,Add script to find undocumented translations.,"Add script to find undocumented translations.

To my knowledge there's no convenient way to find out if a string is missing a
translation into a particular language. For us this means that it's not easy
to check all of our strings and make sure they have documentation for our
translators. This patch adds a Python script that, when run, will tell you
what messages are undocumented.

Change-Id: I33b51f314aea841dda9f11bbcaf22158ee73960b
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1421627362,1421698202,01f1bdaf0df28d3f6e89bd2a8eff490c1beacae9
01f1bdaf0df28d3f6e89bd2a8eff490c1beacae9,01f1bdaf,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I0e0152d4349ca290c8aaf65acd732748d8d06795
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1421656585,1421656585,90c536db7f12354a907aa6202f3832f29648fde1
90c536db7f12354a907aa6202f3832f29648fde1,90c536db,Fix broken qq message.,"Fix broken qq message.

Change-Id: Ib522ae9755e168b5ec2b6ab1b2276154f65aca55
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1421628573,1421628573,1869d3d28b096c70904aa65e0495c175de2029d2
1869d3d28b096c70904aa65e0495c175de2029d2,1869d3d2,Clarify description for snippet_share_intro,"Clarify description for snippet_share_intro

Bug: T87139
Change-Id: I9a40981bc186a7ec24d3536100cb2f236e65c354
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1421602223,1421602223,6587aeab2a70d06fe0e248e3890f29a07b415849
6587aeab2a70d06fe0e248e3890f29a07b415849,6587aeab,Fix checkstyle (parameter count) in PageProperties.,"Fix checkstyle (parameter count) in PageProperties.

Simply got rid of the constructor with 9 parameters. Now only
constructable from a JSON object.

Change-Id: I52bdab5209c8b683d199da9714dd9484a69db934
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1421444687,1421455452,30f85167ba1da74ccda7c2f166ed8a0eab72479e
30f85167ba1da74ccda7c2f166ed8a0eab72479e,30f85167,Properly handle back button in long-press contexts.,"Properly handle back button in long-press contexts.

This fixes the back-button behavior when inside the long-press context
in the History and SavedPages fragments.

It also fixes a crashing bug when long-pressing items in History or SavedPages
because the PageActivity was getting its ActionModes mixed up. We're now
assigning a ""tag"" to each different ActionMode, and the PageActivity now knows
what to do, based on the tag.

Bug: T87052
Change-Id: Ibbba1330eae958432923fd0baee6b49f33918231
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1421439884,1421440344,9c91c7420666a509e24e4b80a3f8550ca4feb494
9c91c7420666a509e24e4b80a3f8550ca4feb494,9c91c742,Use Wikidata description returned by MobileView.,"Use Wikidata description returned by MobileView.

Removed the wikidata Cache and Feeder classes. However, we still need the
GetDescriptionsTask class, because the Disambiguation list uses it (that's
the only way to get descriptions for those items).
Yay for simplicity!

Change-Id: Ic62e884d5e24cb7e5f639bc209e04e8b05a85244
",,,,dbrant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1421262744,1421435529,900a4378fd295747635ba8a8d3b5ec2e3952c56a
900a4378fd295747635ba8a8d3b5ec2e3952c56a,900a4378,"Merge ""Combine title and full text search""","Merge ""Combine title and full text search""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1421434584,1421434584,"a27907a0b8f66bad00bd69a6b6e27ab7e6cad96c,160c9be20a2c49605c6106d6c498d2f2cd4ce442"
a27907a0b8f66bad00bd69a6b6e27ab7e6cad96c,a27907a0,Fix build,"Fix build

""Quote"" da single quote

Change-Id: Id0b2a9123ee7774670fcf3050b8ba8cf0a04962d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1421430138,1421430138,9b8eecbd4a8735f390dcf034de7cea868e0341ad
160c9be20a2c49605c6106d6c498d2f2cd4ce442,160c9be2,Combine title and full text search,"Combine title and full text search

No need to explicitly do an auto switch based on a minimum
number of title search results since it automatically does so
when the end of the list is reached, either by not having enough
results to fill the screen or by the user scrolling to the end.

Increased the batch size to 20 to avoid immediate full text
searches on large devices.

Change-Id: Ida613bd18716eef09149b41b0483127e77de07e2
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1421171302,1421426075,9b8eecbd4a8735f390dcf034de7cea868e0341ad
9b8eecbd4a8735f390dcf034de7cea868e0341ad,9b8eecbd,"Merge ""Add descriptions for some previously undocumented translations.""","Merge ""Add descriptions for some previously undocumented translations.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1421426044,1421426044,"c33b2fee6de41a0553ca6b9d1ef1935cfb383d61,0c04eb0693e0be9109a41d35af2914b8f8dcdb87"
0c04eb0693e0be9109a41d35af2914b8f8dcdb87,0c04eb06,Add descriptions for some previously undocumented translations.,"Add descriptions for some previously undocumented translations.

Change-Id: I53a117f9d4a27a6cbe89a3505256a2c321bf91d9
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1421343384,1421343384,64d8ad5fbab1e7522a43384f1e88acf2877345d0
c33b2fee6de41a0553ca6b9d1ef1935cfb383d61,c33b2fee,Update styles from vagrant,"Update styles from vagrant

Change-Id: Ic75a2399ba585498bc5149ec4f04786d705f0717
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1421269197,1421270180,0bca862cec466fc7a657c111dede03641dd7e306
0bca862cec466fc7a657c111dede03641dd7e306,0bca862c,"Set ""stable"" class to body tags","Set ""stable"" class to body tags

to make sure the table/infobox styles don't break
next time we update CSS files.

See also in iOS app:
https://gerrit.wikimedia.org/r/#/c/184726/

Change-Id: Iaf056d54727e52a61fbade441596675f9a078e2c
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1421269265,1421270090,64d8ad5fbab1e7522a43384f1e88acf2877345d0
64d8ad5fbab1e7522a43384f1e88acf2877345d0,64d8ad5f,Update COPYING file copyright year to 2015,"Update COPYING file copyright year to 2015

Change-Id: I764299a4daafd4d88bc78f004fc0e043607469a0
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1421268359,1421268359,8b183f1a67549df78359350af2e66282af7753bc
8b183f1a67549df78359350af2e66282af7753bc,8b183f1a,Bump versionCode,"Bump versionCode

Change-Id: Ia56cc674c5a34b16eaed4bbb6f2822e7958d0055
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1421184577,1421184577,631cff67b4508e1336f784fa956b16d14f817510
631cff67b4508e1336f784fa956b16d14f817510,631cff67,Manual import of Android string translations from TWN,"Manual import of Android string translations from TWN

Change-Id: I763b76741ef6c84bcc2203b21510c9148e73f194
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1421183918,1421184349,fdcdbcd0a08356c1d9d2e43aefa9db6e0ec7f986
fdcdbcd0a08356c1d9d2e43aefa9db6e0ec7f986,fdcdbcd0,Promote syntax highlighting to Production.,"Promote syntax highlighting to Production.

(This only affects the color of templates, to differentiate them from
ordinary text.)

Change-Id: I6a93465e4a3f2a3bf045c1a6fd57e45c98f86a4e
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1421178255,1421178255,923160521324c247ce406021b38b70e31417917b
923160521324c247ce406021b38b70e31417917b,92316052,Promote new search features to Production.,"Promote new search features to Production.

Change-Id: Ie039b4c31f034fabcf2634da45009d3a05bdbf18
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1421166568,1421166568,a182b4814b6f9a38dec2832e500e15d904b9938a
a182b4814b6f9a38dec2832e500e15d904b9938a,a182b481,Promote lead images to Production.,"Promote lead images to Production.

Change-Id: Ife65242a2bc0851547c2eaaebe70f79889044c61
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1421166335,1421166335,2ffe90d3fbe0d086177cb1349c1635bb3ce1edfe
2ffe90d3fbe0d086177cb1349c1635bb3ce1edfe,2ffe90d3,"Merge ""Make page-level sharing use the same strings as Share a Fact.""","Merge ""Make page-level sharing use the same strings as Share a Fact.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1421159844,1421159844,"18c91311215c76680ec5cb7e59564c164f7c3e9d,e28c599effa927c55f431ca7ee0ca4d2c5f6bcf3"
18c91311215c76680ec5cb7e59564c164f7c3e9d,18c91311,Add tests for two string parameters,"Add tests for two string parameters

Change-Id: I07662a650f3d0752cec00fde7c67022198e0f259
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1421089915,1421089915,ede3857c8208f706db7fb633a88a2ec8ba1d92d5
e28c599effa927c55f431ca7ee0ca4d2c5f6bcf3,e28c599e,Make page-level sharing use the same strings as Share a Fact.,"Make page-level sharing use the same strings as Share a Fact.

Currently our page-level sharing stuff just naively dumps a link into the
Intent. This patch changes that so that it uses the new message which was
introduced for Share a Fact, which makes the text shared a little bit more
relevant.

Change-Id: I6196c755e83ce84016cdc848aa6f5cd8c6f01c24
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1421089017,1421089017,3906c56393ee7c32e2f389d018793fe34a0aca99
ede3857c8208f706db7fb633a88a2ec8ba1d92d5,ede3857c,Manual import of Android string translations from TWN,"Manual import of Android string translations from TWN

Change-Id: I6d710088190f1b87fb8aa55ac2ef58bbad4d734d
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1421088211,1421088211,3906c56393ee7c32e2f389d018793fe34a0aca99
3906c56393ee7c32e2f389d018793fe34a0aca99,3906c563,"Merge ""Add gallerySessionToken to GalleryFunnel""","Merge ""Add gallerySessionToken to GalleryFunnel""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1421076449,1421076449,"cb56dc72097e8d34c3b6168686ad4e3acc87c773,9eb7207096591a52151b656d9c0067aeab00fbe7"
cb56dc72097e8d34c3b6168686ad4e3acc87c773,cb56dc72,Rework prose in Share a Fact slightly.,"Rework prose in Share a Fact slightly.

Moiz and I got together and tweaked the wording a bit until we were happy with
it. This patch implements that wording.

Change-Id: I52bf9e6903a9baf0220f2251847e7b135efaa2cd
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1420844930,1420852927,575eb3dc45bc509ca1ae533614bab984e0e27f8f
9eb7207096591a52151b656d9c0067aeab00fbe7,9eb72070,Add gallerySessionToken to GalleryFunnel,"Add gallerySessionToken to GalleryFunnel

This patch adds a gallerySessionToken to the GalleryFunnel so that it's easier
to link events from a single interaction session together.

Change-Id: I50b7a32159892b666687552981d4af8873d0f6d4
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1420842680,1420842680,575eb3dc45bc509ca1ae533614bab984e0e27f8f
575eb3dc45bc509ca1ae533614bab984e0e27f8f,575eb3dc,Fix a few issues in ToC,"Fix a few issues in ToC

- Update the currently-highlighted ToC section when *starting* to pull
  out the drawer, instead of after it's already pulled out.
- On the JS side, fix the detection of positioning in the Lead section.
- Fix highlighting of the correct section in the ToC when the article has
  subsections that are ""deeper"" than H3. Since we hide these subsections
  in the ToC, and we were previously using the sectionID returned by the
  WebView as an index into the ToC list, it was causing the incorrect
  section to be highlighted.

Bug: T68612
Change-Id: Ib1a8a730b04cae523d2068934407c3eedb588a49
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1420822387,1420823585,a3c27dfaab7777c9768132ef648ef4835cc4f8f6
a3c27dfaab7777c9768132ef648ef4835cc4f8f6,a3c27dfa,No longer hide hatnotes in non-lead sections.,"No longer hide hatnotes in non-lead sections.

Simple modification to CSS.

Bug: T85985
Change-Id: I808656bd770e1ffbd251e1db434e95c8b05c2f93
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1420741207,1420822923,1598635eb6370850739eba92155e1583f777c28e
1598635eb6370850739eba92155e1583f777c28e,1598635e,Handle the Search button on older devices.,"Handle the Search button on older devices.

This is done indirectly by implementing the onSearchRequested function.

Bug: T69324
Change-Id: I1859e831e0a4cd9890f173b28a978cbf1fa592f7
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1420749644,1420822726,c08449d9fbdf7b8c267d2f12adb56f0ca622a27b
c08449d9fbdf7b8c267d2f12adb56f0ca622a27b,c08449d9,Add back-button behavior to Share context.,"Add back-button behavior to Share context.

Also made the clipListener static, so that it doesn't get re-created and
re-added to the Clipboard service multiple times, and thus pop up multiple
share choosers for a single share event.

Change-Id: I3dc7df414a1646699f3f9e72dcab8c0e7c734433
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1420765634,1420786847,8317fba2dd588f029a5d14a57eabbd3cbff4e244
8317fba2dd588f029a5d14a57eabbd3cbff4e244,8317fba2,Don't show progress bar on top of ToC onboarding.,"Don't show progress bar on top of ToC onboarding.

Rearranged the layout so that the onboarding view covers the progress bar
opaquely.

Bug: T76932
Change-Id: Ia08da38cf4da692c433a31f0220df9c6fe8e442a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1420747619,1420786068,49c9509e42d7c46271050094dc18edcfb9edf523
49c9509e42d7c46271050094dc18edcfb9edf523,49c9509e,Change URLs to point to mobile version of sites specifically.,"Change URLs to point to mobile version of sites specifically.

Bug: T85062
Change-Id: I6caa9a959bb490c9627a635953649d13453e1fe8
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1420682612,1420785494,256de2e56379edcfb9be8d34ffcb2386d4790060
256de2e56379edcfb9be8d34ffcb2386d4790060,256de2e5,Improve list of media items shown in Gallery.,"Improve list of media items shown in Gallery.

No longer including SVG and PNG items in the Gallery by default. This
effectively gets rid of most, if not all, irrelevant presentational images
(featured star, wikimedia logo, etc).

Of course, if the user explicitly clicks on an SVG image in a page, it
will be shown in the gallery, in addition to the other default items.

Bug: T86073
Change-Id: I6013ed21c73ce48544c836366adb3b96df4dedca
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1420744799,1420784439,b2ec1c49394a60a4fed35d80e6488ad2ea174210
b2ec1c49394a60a4fed35d80e6488ad2ea174210,b2ec1c49,Enable ShareAFact only in alpha releases,"Enable ShareAFact only in alpha releases

Change-Id: I26d6be22ef1f58630f8c8eb7823ccb902f9d485b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1420758876,1420758876,37257a5b47d7d778387f11a0102be15dea25efe0
37257a5b47d7d778387f11a0102be15dea25efe0,37257a5b,Fix crash in Find in page,"Fix crash in Find in page

Find in page was crashing:
android.content.res.Resources$NotFoundException: Unable to find resource ID #0x0
at android.content.res.Resources.getResourceName(Resources.java:2026)
at org.wikipedia.page.snippet.SnippetShareAdapter.onTextSelected(SnippetShareAdapter.java:54)
at org.wikipedia.page.PageActivity.onSupportActionModeStarted(PageActivity.java:758)

Change-Id: Iabb304fc63a1941457a81db76215bbc779aece01
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1420758563,1420758563,85da5d2c5735dd37e84dd27169ada9e57ae3c945
85da5d2c5735dd37e84dd27169ada9e57ae3c945,85da5d2c,Event logging for ShareAFact,"Event logging for ShareAFact

https://meta.wikimedia.org/wiki/Schema:MobileWikiAppShareAFact

Also getting pageID and revisionId and saving in PageProperties.

Change-Id: I363b3db56e6e4151411c8ab3ba37f5bea51e73d8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1420755147,1420755147,65133bae7388eaf816972cc8f7072e8d335ece00
65133bae7388eaf816972cc8f7072e8d335ece00,65133bae,Event logging for Gallery.,"Event logging for Gallery.

Change-Id: Idb0a77280e85905a8f4b18db719b1f07bcfa1e47
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1420737561,1420740349,7daa716c7c3c4a3f39e363186965cc27ea691461
7daa716c7c3c4a3f39e363186965cc27ea691461,7daa716c,Catch SecurityException when requesting location,"Catch SecurityException when requesting location

Bug: T86198
Change-Id: Iafee01561e9cca830efb17ff3daa17b0c2333d0d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1420735646,1420736977,6a9d2d9a7ee9bf072d30cc65ee4e1c0b630c37b8
6a9d2d9a7ee9bf072d30cc65ee4e1c0b630c37b8,6a9d2d9a,Make references collapsible (and collapse by default),"Make references collapsible (and collapse by default)

- Uses the same logic and styling as collapsing of infoboxes.

Change-Id: I4d779aded8804398ea4134fad8cc90ce28b06849
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1417536491,1420736244,88a3f10cee60f8ed2b2c2b0efac4990b2c016281
88a3f10cee60f8ed2b2c2b0efac4990b2c016281,88a3f10c,"Merge ""Fix possible crash when pinch/zooming in gallery.""","Merge ""Fix possible crash when pinch/zooming in gallery.""",,,,Deskana,dgarry@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1420735870,1420735870,"76475b01c0122e23d3d364a2c57061cd183f46ef,67bff20c3cd2d6adc9f98709cd957374accfcd78"
76475b01c0122e23d3d364a2c57061cd183f46ef,76475b01,"Merge ""Remove old translation""","Merge ""Remove old translation""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1420732664,1420732664,"29e351dcb6cae4b32a68ed33c92e034ddd3ad8ea,63de69e06f3e4a272d4cc0f6d37d0d19b202aa43"
67bff20c3cd2d6adc9f98709cd957374accfcd78,67bff20c,Fix possible crash when pinch/zooming in gallery.,"Fix possible crash when pinch/zooming in gallery.

This is related to a bug in the Support library, and the way it's used by
the PhotoView component. According to this thread:
https://github.com/chrisbanes/PhotoView/issues/206

...the solution seems to be to enclose the offending method in the
ViewPager in a try-catch, and wait until it's fixed properly in the
support library.

Bug: T86166

Change-Id: I7abe2cd29662ff82090120bc1bf0d191dae0200a
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1420686205,1420728505,6b2b14b93b9da387e109a7fb04067adcda754a23
29e351dcb6cae4b32a68ed33c92e034ddd3ad8ea,29e351dc,Image share improvements,"Image share improvements

Share image using actual file name in folder with fixed name
Well, not completely the same name. The file name goes through a bit
of transformation to remove unknown characters. But it's way more
useful than using tmpShareImage.jpg.

By having a fixed folder we can delete its files before
sharing another image.
Staying frugal with storage space, though, and make an effort to remove
any shared files once a day with a recurring task.

Now using Context.getExternalCacheDir() since
this folder would get automatically removed if the app is uninstalled.

Plus, checking first if ext. storage is writable before trying to write the file.

Change-Id: I85c9e564d2cf57630bef8c65bc0b7716b39a3850
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1420689622,1420701860,6b2b14b93b9da387e109a7fb04067adcda754a23
63de69e06f3e4a272d4cc0f6d37d0d19b202aa43,63de69e0,Remove old translation,"Remove old translation

Keeping it causes issues with the release build.

Change-Id: I01ac645c07790e2b974d3c8fb688f1f62d7faf73
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1420701624,1420701624,6b2b14b93b9da387e109a7fb04067adcda754a23
6b2b14b93b9da387e109a7fb04067adcda754a23,6b2b14b9,No longer emit log message when the app install ID is accessed.,"No longer emit log message when the app install ID is accessed.

This patch removes the logcat message which is emitted every time the app's
install ID is accessed. If the install ID is still needed for some reason, you
can just set a breakpoint and inspect the return value directly without having
to rely on the log.

Change-Id: I9a83ea6da65cc1bbbf628cccd1ea96dc89c100c7
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1420675815,1420676102,adc2e9c24ec2c8485d1ea7270e7abfc994ec39cd
adc2e9c24ec2c8485d1ea7270e7abfc994ec39cd,adc2e9c2,"Add ""?source=app"" to the end of all share a fact URLs per Analytics.","Add ""?source=app"" to the end of all share a fact URLs per Analytics.

Our EventLogging infrastructure captures the generation and sharing of facts,
but Analytics would like the ability to track how much the links are clicked,
and the best way to do that is to add a URL parameter tracking the source.
This patch adds such a parameter, conforming to the spec given to me by the
Analytics team.

Change-Id: Ie43d02653c00f40c4e1a95bcd7b05ac32f33da56
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1420659385,1420675956,21fc3315a87274dc0d087a28d2b56937703912f9
21fc3315a87274dc0d087a28d2b56937703912f9,21fc3315,"Don't duplicate history entries; instead, move them to top.","Don't duplicate history entries; instead, move them to top.

Note: Old duplicate history entries will remain duplicated until they're
visited again.

Bug: T76951
Change-Id: I75aa566f332fbce322f4621e8fed9c5e855251b7
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1420568777,1420675696,78144287425a89a3cdb1c5528883b35d67c95f4a
78144287425a89a3cdb1c5528883b35d67c95f4a,78144287,Full swipeable image gallery.,"Full swipeable image gallery.

- Refactored the Gallery activity into a Fragment that loads a single
  media item individually.
- The Gallery activity now has a ViewPager that hosts multiple fragments
  of media content.
- Moved PageCache to Wikipedia app, so that it's accesible by
  GalleryActivity as well as PageActivity.
- The first time GalleryActivity is launched for a certain article, we
  fetch a complete list of media items for the page. This list is then
  cached, in case we launch the gallery again for the same page later.
- The ViewPager automatically pre-loads items to the immediate left and
  right of the current item. This allows smooth swipes between adjacent
  media items.
- The panning & zooming of the media items will still work. When the user
  swipes the item past its edge, the swiping is passed to the ViewPager.

TODO: profile memory usage!

Change-Id: I18e0cacfc656f39e7eee9eb0742088de3a7261d8
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1420609900,1420669494,fe6c0c63c0cc2ddeb6469355af16c2d9ef63cb94
fe6c0c63c0cc2ddeb6469355af16c2d9ef63cb94,fe6c0c63,Use ic_message icon for share a fact,"Use ic_message icon for share a fact

Removed ic_share icon since it's not used anymore.

Change-Id: If8060cb0a95807dd5edd5e82663579fca601f6e8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1420651931,1420651931,4660b167dac42f103f6cc8746df789f071954277
4660b167dac42f103f6cc8746df789f071954277,4660b167,Create image using text snippet,"Create image using text snippet

To create an image to be shared we create a new fixed size
Bitmap that is a bit taller than what we need.
We manually keep track of the vertical space (y) we draw on.
Once we're done drawing we adjust the height of the bitmap.

If we have a lead image, it goes on top,
followed by the title, an opening double quote sign,
then the text, and lastly the Wikipedia wordmark.

The lead image portion gets clipped and scaled to fit the width
of the screen. It's reusing the imageBaseYOffset for the face detection
adjustment and the Bitmap from LeadImageHandler.

The text goes through some minor regex replacements to get rid
of foot notes[1], remnants of IPAs, and spaces at beginning and end (trim).

If less than 6 characters remain then we don't do anything.
It is assumed that this rather arbitrary number is the absolute
minimum length of text in any language/character set to convey an idea/fact.

If the title or text is too long we first reduce the
font size. If that is not enough it gets ellipsized.

Change-Id: I4ee56a6b396734ce182bf75d38a6b318138d0dc5
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1420066850,1420613627,df9a5c300a3d631335c207edfdccfab1181b1db8
df9a5c300a3d631335c207edfdccfab1181b1db8,df9a5c30,Share a fact,"Share a fact

- Refactored the GalleryActivity's image sharing code to be reusable.
- Reused it for Share a fact
- Currently it uses the lead image as the image to be share,
   plus the mainly static teaser text.

Change-Id: Ib78821dcb772c9b5811f1c8f2bbdefb77a826844
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1419037689,1420600898,e9c5c09bfb90dca2910268848645ed86c1f68cce
e9c5c09bfb90dca2910268848645ed86c1f68cce,e9c5c09b,Get selected text from the WebView.,"Get selected text from the WebView.

Sort-of hacky method that works by programmatically copying the selected
text to the clipboard, then peeking at the clipboard contents. (The actual
WebView provides no way of getting selected text)

Only works with API >10, which is fine since API 10 doesn't provide
long-press context functionality for the WebView anyway.

Also moved Bus-related methods into an inner class, because of this issue:
https://github.com/square/otto/issues/37

When the Bus registers a class for event notifications, it uses reflection
on all of the class's methods and fields. If a field does not exist in the
current API, it crashes.  Therefore, it's suggested to use an inner class
that only contains methods specific to the Bus.

Change-Id: I6c29eff4d9930bd218a9f686493cbcbc67d78691
",,,,dbrant,dbrant@wikimedia.org,bearND,bsitzmann@wikimedia.org,1419094359,1420600897,e341e323a30f5ccf112783b56af4ebcc2850bdf6
e341e323a30f5ccf112783b56af4ebcc2850bdf6,e341e323,Add custom menu item to WebView context mode.,"Add custom menu item to WebView context mode.

Precursor to sharing images with a quote.

Change-Id: I8e5ace83216c390bbab903ac12cb5f67a2fe38fc
",,,,dbrant,dbrant@wikimedia.org,bearND,bsitzmann@wikimedia.org,1419005338,1420600897,a44333444b8e8f312214cfcfce297574cb56918d
a44333444b8e8f312214cfcfce297574cb56918d,a4433344,Don't show lead image if it's a .GIF,"Don't show lead image if it's a .GIF

If the API returns a GIF image as the lead image for an article, then
simply don't show it.  GIF images are usually used for mathematical or
engineering diagrams, and don't look good as ""lead"" images. Moreover, GIFs
are very likely to be animated, which also isn't good (and doesn't work)
for a lead image.

Change-Id: Ie91c59403d9747dcb85e7d8b4fba1ff3973dc6ef
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1420489418,1420489418,d58fa85d0282ec35c6f20f54f07995d08ca72c41
d58fa85d0282ec35c6f20f54f07995d08ca72c41,d58fa85d,Fix parallax scrolling when lead image is thinner than viewport.,"Fix parallax scrolling when lead image is thinner than viewport.

Bug: T85832
Change-Id: Idfc776a0d8511ffcd2818d4dc1659da6c00c73e8
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1420488104,1420488594,7194d8e88a64277a2b822d2a092e2f73b858fc75
7194d8e88a64277a2b822d2a092e2f73b858fc75,7194d8e8,Manual import of Android string translations from TWN,"Manual import of Android string translations from TWN

Change-Id: I3a8355ee2dafca4683a81cdaad69bffcd665aa8c
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1420480445,1420480445,5c5ddc7dc7e918db35f72b2be68d7a82627723be
5c5ddc7dc7e918db35f72b2be68d7a82627723be,5c5ddc7d,Fix possible crash when typing search text.,"Fix possible crash when typing search text.

When a character is typed into the search field, the app sends a message
that triggers the search after a predefined delay. If the search fragment
was detached during that delay period, the app would crash. This patch
will prevent any execution after receiving the message, if the fragment is
no longer attached.

Bug: T85429
Change-Id: I2cb8be69c776d32a6b29bfab68640a850f99cf8c
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1420470415,1420472269,e3e54fdcb4ab18007346c0437b0e775be5b42c9e
e3e54fdcb4ab18007346c0437b0e775be5b42c9e,e3e54fdc,"Merge ""Refactor: replace all usages of ""Persistance"" with ""Persistence"".""","Merge ""Refactor: replace all usages of ""Persistance"" with ""Persistence"".""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1420471715,1420471715,"5b8f00eab49ac3709d7f673acbbb81ef2c99ee26,39d4ef46a99dbe802924cefa4fe3aac992551b9e"
5b8f00eab49ac3709d7f673acbbb81ef2c99ee26,5b8f00ea,"Merge ""Update pom.xml to have fixed version of MW API""","Merge ""Update pom.xml to have fixed version of MW API""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1420471092,1420471092,"8ce67bf0e510db2b5d09310845274c64db1627bb,9aa8921040dd3d3ea2a53ba47e66757e6aa88174"
8ce67bf0e510db2b5d09310845274c64db1627bb,8ce67bf0,"Merge ""Don't export activities (except PageActivity)""","Merge ""Don't export activities (except PageActivity)""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1420471056,1420471056,"35e376ff292145314c61c016e6f2ca24817fe5f3,8ca9fbeefb758164eac4b044ee173d73b61add82"
39d4ef46a99dbe802924cefa4fe3aac992551b9e,39d4ef46,"Refactor: replace all usages of ""Persistance"" with ""Persistence"".","Refactor: replace all usages of ""Persistance"" with ""Persistence"".

Change-Id: Iba43739e6bf658ebf4e35afe03ff63bda8aed57f
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1420401002,1420406423,35e376ff292145314c61c016e6f2ca24817fe5f3
35e376ff292145314c61c016e6f2ca24817fe5f3,35e376ff,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I6eb59312933bed49483ab69d3873d83dec68ec96
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1420193011,1420193011,8b43e6c9d90eab7c90e33dd3d7e8dd28286aab73
9aa8921040dd3d3ea2a53ba47e66757e6aa88174,9aa89210,Update pom.xml to have fixed version of MW API,"Update pom.xml to have fixed version of MW API

so Jenkins doesn't have to talk to the Maven repo for every build.

Change-Id: I296e8dbc77966de1c288d31538be1c2e2d63a5a8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1419966159,1419966159,8b43e6c9d90eab7c90e33dd3d7e8dd28286aab73
8b43e6c9d90eab7c90e33dd3d7e8dd28286aab73,8b43e6c9,Checkstyle: switch without default clause,"Checkstyle: switch without default clause

Change-Id: I9488f806cfd6cf6d1a3ce7e844352713e3ed23e5
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1419921754,1419921754,a983c90166849d34bab5b4804897aeeb3f64d238
8ca9fbeefb758164eac4b044ee173d73b61add82,8ca9fbee,Don't export activities (except PageActivity),"Don't export activities (except PageActivity)

For the below mentioned it looks like another app was able
to start one of our activities using an implicit intent.
By not exporting the activity this should not be possible anymore.
In the future we may chose to export some activities but this should
be done intentionally.

Bug: T85510
Change-Id: Idaf2564e07866150a12beaecafed6eed3fd981af
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1419918638,1419918638,a983c90166849d34bab5b4804897aeeb3f64d238
a983c90166849d34bab5b4804897aeeb3f64d238,a983c901,Remove unused string,"Remove unused string

Was confusing translators.
https://translatewiki.net/wiki/Thread:Support/About_Wikimedia:Wikipedia-android-strings-edit_section_abusefilter_back_text/en

Bug: T69981
Change-Id: Ibc34465e9128d5258d4fc28cb02c60e1771357a2
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1419887826,1419887833,a645b0d323782f8c7c997c33751213b27b58069a
a645b0d323782f8c7c997c33751213b27b58069a,a645b0d3,Hygeine: use String instead of StringBuilder where appropriate.,"Hygeine: use String instead of StringBuilder where appropriate.

This patch switches to using String concatenation instead of StringBuilder
appending in places where a single throwaway string is built without using a
loop, because in these cases there is no performance difference to using
concatenation and it gives more readable code.

Change-Id: Ieebdff4ff363be4ee2503860e6df260b4a3e974a
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1419299097,1419885355,8e19e3cfc3d3434b473b23b6795a822ae716cfed
8e19e3cfc3d3434b473b23b6795a822ae716cfed,8e19e3cf,Fix string parameter format error,"Fix string parameter format error

Would have caused a crash in the ""lb"" locale.

Change-Id: I770a204a452569e90213c2a4be359d1b95720d06
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1419885225,1419885225,ac35e55a184e50a4b7876a3dafbd87390cc6c38f
ac35e55a184e50a4b7876a3dafbd87390cc6c38f,ac35e55a,Manual import of Android string translations from TWN,"Manual import of Android string translations from TWN

Change-Id: I2fabfd50368be646c1a371a559504de150aa93b5
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1419879213,1419879213,90859c886d1c70a1dcdc0e3de80dbd6ce0cab249
90859c886d1c70a1dcdc0e3de80dbd6ce0cab249,90859c88,Hygiene: change some if statements to switch statements.,"Hygiene: change some if statements to switch statements.

JDK 7 added the ability to do switch statements on Strings. Since we're now
using JDK 7, this patch changes some particularly convoluted if statements
which operate on Strings to use switch statements instead, improving code
readability and probably slightly improving performance.

Change-Id: I36202c34f48b21347fa761e358dc0014ef3e9ca6
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1419374474,1419878079,c00d2117a7ed90381e475472d3146d5fb28b36c5
c00d2117a7ed90381e475472d3146d5fb28b36c5,c00d2117,Hygiene: reduce number of fields that are used unnecessarily.,"Hygiene: reduce number of fields that are used unnecessarily.

This patch takes some fields and either converts them to local variables,
anonymous variables, or removes them entirely. There should be no change in
user-facing behaviour, but having fewer fields floating around should reduce
memory overhead slightly.

Change-Id: I38b4d8ecc7a7d661faf85efb4e2477d017e2c5d1
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1419371886,1419876352,55098811ce1efa71bb18e8312504e382193e938f
55098811ce1efa71bb18e8312504e382193e938f,55098811,Do not send X-WMF-UUID header if the user has opted out of EventLogging.,"Do not send X-WMF-UUID header if the user has opted out of EventLogging.

If the user has opted out of EventLogging then we shouldn't be tracking them
at all. This includes unique counting using the app install ID. This patch
ensures that the app install ID not transmitted if the user has opted out.

Bug: T85243
Change-Id: Ie6b9aea9708d382119372febd9b8c849360fd5ef
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1419367596,1419876130,141dcca2bae0c41c4784da6e4bd92c62627beb7f
141dcca2bae0c41c4784da6e4bd92c62627beb7f,141dcca2,Don't transmit zero-result search events in TitleSearchFragment funnel.,"Don't transmit zero-result search events in TitleSearchFragment funnel.

The search funnel is meant to track user-perceived performance of search, and
since the autoswitching means the user never perceives a zero result event for
a title search, it doesn't make sense to log it.

Change-Id: Ie974ef89eb3ff15a608ee3303b1c8574a78f136f
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1419275192,1419875797,d35bb13641e8e261ead2ff2cb4ea6e7bd4737871
d35bb13641e8e261ead2ff2cb4ea6e7bd4737871,d35bb136,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ia437a5a5950e34e71209f2e744ba361d48787dc2
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1419705306,1419705306,6b6c27d16a3a2c7fe443b8f1a7595d066f7308e0
6b6c27d16a3a2c7fe443b8f1a7595d066f7308e0,6b6c27d1,Bump versionCode,"Bump versionCode

Change-Id: I9a1d7c35cc8b0cf696ee62d2f914e430d7487ec6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1419029592,1419029592,2bd95a5dff53cfca608b7e88ca689a567fca77f3
2bd95a5dff53cfca608b7e88ca689a567fca77f3,2bd95a5d,Manual import of Android string translations from TWN,"Manual import of Android string translations from TWN

Change-Id: I4055c53ace87e2687be6705359f8f0bfaa56b426
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1419027396,1419027865,cfe692ec6a0678b944284dfd615ce2d8cabe4d40
cfe692ec6a0678b944284dfd615ce2d8cabe4d40,cfe692ec,Add X-WMF-UUID to Wikipedia for Android requests,"Add X-WMF-UUID to Wikipedia for Android requests

See also:
Ia0ab1691a31b9555721291803481104cb808689c

For now, the inclusion of the UUID in other places not to be removed.

On the Android it platform it seems that per-funnel identifiers
are part of the event data itself, and as with iOS, the UUID is
constructed in a reliable manner.

For now the goal is to ensure the goal is to ensure the presence
of the accurately set X-WMF-UUID header without causing other
unintended side effects in the app.

It should be possible to query request logs once this code and its
counterpart, in the following change

Ieeb3cc38e8d2f3244ec63d5345d4556e2f4a5df9

, are both deployed. If the values match when expected to match,
then it should be possible to remove the request path UUID in other
non-event payload contexts (e.g., PageViewFragmentInternal.java's
builder object with parameter ""appInstallID"").

Change-Id: I1f1cb4629cf7fe247f399a6d06feb7602ad0b455
",,,,dr0ptp4kt,abaso@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418931659,1419008229,d137754039a6d3e98895b6bdf164f33a0922ef37
d137754039a6d3e98895b6bdf164f33a0922ef37,d1377540,Fix possible NPE(s) when accessing parent fragment.,"Fix possible NPE(s) when accessing parent fragment.

In our LeadImagesHandler and BottomContentHandler, we use the
getFragment() function which returns the ""internal"" fragment object that
is currently hosted by the PageViewFragment.  The problem is that, when a
PageViewFragment is detached, it sets its instance of the internal object
to null.  So, if the Lead or Bottom components try to access the internal
fragment using getFragment() from the result of an AsyncTask after the
parent fragment is detached, they will get a null pointer.

This patch refactors things so that the internal object itself is passed
to the Lead and Bottom components, so that they will never receive a null
reference to it.

Change-Id: Ie78c76e12128a89218bcea8d65fbfeed01278a63
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418777668,1419007587,b0ddfb0158d78c507d445ce6c136d774370e06c9
b0ddfb0158d78c507d445ce6c136d774370e06c9,b0ddfb01,Fix lead image click area in 2.3,"Fix lead image click area in 2.3

The problem was that, even though the ViewHelper library (nineoldandroids)
correctly slides the lead image component, it does not successfully slide
the logical click area that corresponds to the visual position of the
component! So, the lead image remains ""clickable"" even after sliding away.

The solution is to stop using the ViewHelper library, and shift the
position of the lead image component using standard margins.

There was another slight issue, however:  in Android 2.3, using negative
margins is only possible for a component that has a LinearLayout as a
parent.  So, I had to put the lead image container into a dummy
LinearLayout, just to achieve negative margins.

Thanks again, 2.3!

NOTE: The same issue is currently present in the Search bar at the top,
which slides away in a similar fashion. This will be the subject of a
subsequent patch.

Bug: T84998

Change-Id: I79120601b156e151a8b9ddabcfef2952c1555de5
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418953975,1419007241,2b02e527a273e3f5a5b3b844f33984bbc824029d
2b02e527a273e3f5a5b3b844f33984bbc824029d,2b02e527,Fix checkstyle.,"Fix checkstyle.

Change-Id: Ia537b42c9f6fc1556b8e1e08d599989b83e1067a
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1419005775,1419005775,c5e45c66900abf6de894e7e0862432be73558b26
c5e45c66900abf6de894e7e0862432be73558b26,c5e45c66,Go to first suggestion on search submit,"Go to first suggestion on search submit

Bug: T78749
Change-Id: I5477a6d7fee3339febea6646ce27c4b9a88da9eb
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418927076,1418927076,6c7276fc22899463348dfd1936a9c448addc5384
6c7276fc22899463348dfd1936a9c448addc5384,6c7276fc,Fix crash when lead image is abnormally small.,"Fix crash when lead image is abnormally small.

Bug: T84881
Change-Id: Ia59603e698305ef4ac0a5e4342a7b71fc9aa637f
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418917810,1418925279,8f22a5e71370e8f12e3eff5d6f223d09b7299504
8f22a5e71370e8f12e3eff5d6f223d09b7299504,8f22a5e7,Fix possible crash when user goes to Settings from Nearby screen.,"Fix possible crash when user goes to Settings from Nearby screen.

Bug: T72528
Change-Id: I3ea00a53e930c26d337f37d5f47b315f9979fc7b
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418922677,1418922677,fe37df9f7e1d1196d2680cdd7f577bc8c4c124b5
fe37df9f7e1d1196d2680cdd7f577bc8c4c124b5,fe37df9f,"Merge ""Update README for Android Studio 1.0.0""","Merge ""Update README for Android Studio 1.0.0""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418917280,1418917280,"d0b8f09d76930e3212b37abf63bad383c34c2752,ba2f79a6f9b778d488d1825afeb931a896d4fc76"
d0b8f09d76930e3212b37abf63bad383c34c2752,d0b8f09d,"Merge ""Update Gradle plugin to build-tools""","Merge ""Update Gradle plugin to build-tools""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418917094,1418917094,"ce5b5dd25bc44e1569ad6a5ceee78bfd41e6f920,da53e0f3cc08b2fb733e280074ae95f19585d4ae"
ce5b5dd25bc44e1569ad6a5ceee78bfd41e6f920,ce5b5dd2,"Merge ""Avoid StackOverflowError when initializing channel preference""","Merge ""Avoid StackOverflowError when initializing channel preference""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418916840,1418916840,"aec96da1d3713bd0446a298c833c5c4ff8662537,34c3b7bea5f41d5d859b65821cf0d2492f9ae8e8"
ba2f79a6f9b778d488d1825afeb931a896d4fc76,ba2f79a6,Update README for Android Studio 1.0.0,"Update README for Android Studio 1.0.0

Change-Id: I6678f620564c569944675344806c8326e417af12
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418880225,1418880620,da53e0f3cc08b2fb733e280074ae95f19585d4ae
da53e0f3cc08b2fb733e280074ae95f19585d4ae,da53e0f3,Update Gradle plugin to build-tools,"Update Gradle plugin to build-tools

Also updated Android SDK on Alpha build server.

Change-Id: I043abccd6d7c04e28ef0031cab4afbd50a801776
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418428525,1418880597,787412bb8c9071970f61a2b4bc3b32f3327b9565
34c3b7bea5f41d5d859b65821cf0d2492f9ae8e8,34c3b7be,Avoid StackOverflowError when initializing channel preference,"Avoid StackOverflowError when initializing channel preference

No recursion of getChannel() anymore.

Bug: T78833
Change-Id: Idd8fd49002bc24750b6a1fa0f8550350cd53ee29
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418855395,1418855395,787412bb8c9071970f61a2b4bc3b32f3327b9565
aec96da1d3713bd0446a298c833c5c4ff8662537,aec96da1,Material design icon for share action,"Material design icon for share action

Dark only since it's currently used only by gallery.

Change-Id: Id654eb7d419db7ed725fcc0a4137263f410e0ba5
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418845839,1418853887,787412bb8c9071970f61a2b4bc3b32f3327b9565
787412bb8c9071970f61a2b4bc3b32f3327b9565,787412bb,Bump versionCode,"Bump versionCode

Change-Id: I54b36ef164a29dead67600caebe171248d7814dc
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418844961,1418844961,9f2e9720427002edadcb647fcafe226c5026822b
9f2e9720427002edadcb647fcafe226c5026822b,9f2e9720,Fix conversion parameter in an older translation,"Fix conversion parameter in an older translation

This would have caused a crash.
Also added more (commented out) logging for TranslationTests.

Change-Id: I8975962486841d236ebab77264a6ac98e90a360c
(cherry picked from commit 8d72e2c8f1d0a4d5bfda0049fb5a380d3bbba39c)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418843407,1418843485,ef7de79b4faf56eed9e510aa43d7e17594a4940b
ef7de79b4faf56eed9e510aa43d7e17594a4940b,ef7de79b,Manual import of Android string translations from TWN,"Manual import of Android string translations from TWN

Change-Id: I6407ce9c551ec0bc7f0f01a187c6f2d6cf4c3291
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1418841795,1418841795,1a2cf1486e68be83e2c83e7df99995912a51b1a1
1a2cf1486e68be83e2c83e7df99995912a51b1a1,1a2cf148,Share/save images.,"Share/save images.

- Added toolbar item for sharing the current image.
- Added overflow item for saving the current image to the local device.
- Requires new WRITE_EXTERNAL_STORAGE permission.

Change-Id: I577cc5f4607aba9f0f1be2d9e3e6eb53868f78f4
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418760244,1418835207,8c2b2cb00543858343e73c12c3b41756f04ba6ec
8c2b2cb00543858343e73c12c3b41756f04ba6ec,8c2b2cb0,"Merge ""Back button goes back to calling activity if on first page""","Merge ""Back button goes back to calling activity if on first page""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418833140,1418833140,"8b9875bfa38029c3f0bf68ba6ab2138ec85d61eb,84360a8c0d1581ac6187ee0f0b4c12f44027bcd9"
8b9875bfa38029c3f0bf68ba6ab2138ec85d61eb,8b9875bf,"Merge ""Hide system bar in GalleryActivity""","Merge ""Hide system bar in GalleryActivity""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418832521,1418832521,"98700a781651df0acc93aa2ceedc1c6beede7896,f653ab0370faf0665b953743c0af995a1eee235e"
98700a781651df0acc93aa2ceedc1c6beede7896,98700a78,"Merge ""Read More only for regular pages""","Merge ""Read More only for regular pages""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418832345,1418832345,"48a122a66c82bf878126e2eae1b6a908dd617518,534fc2431f687ee497557583108c24b7e1cb133e"
84360a8c0d1581ac6187ee0f0b4c12f44027bcd9,84360a8c,Back button goes back to calling activity if on first page,"Back button goes back to calling activity if on first page

The problem was that it opened the ToC drawer automatically.

Bug: T75918
Change-Id: Ia822b3e7beb73a80d15be690cb9dcd90546481f4
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418796699,1418796699,1cfe0b7aa8557d2047b9fdf852ce451c72f2752b
f653ab0370faf0665b953743c0af995a1eee235e,f653ab03,Hide system bar in GalleryActivity,"Hide system bar in GalleryActivity

Change-Id: I00b24b5c45bfefa9ab3462532680f0d95bc14159
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418793567,1418793967,1cfe0b7aa8557d2047b9fdf852ce451c72f2752b
534fc2431f687ee497557583108c24b7e1cb133e,534fc243,Read More only for regular pages,"Read More only for regular pages

Don't add a ToC entry and don't even try to request
one from the server for main, file and special pages.

Change-Id: Ia47c8131facf38469368c6a7f9fea980e8ad25a2
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418780526,1418780526,1cfe0b7aa8557d2047b9fdf852ce451c72f2752b
48a122a66c82bf878126e2eae1b6a908dd617518,48a122a6,More space between wordmark and slogan,"More space between wordmark and slogan

Also, better wordmark alignment in OnboardingActivity for Hebrew

Bug: T78350
Change-Id: Ic69e2f1632f56fd8daef677c9a76adc6d683a587
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418772575,1418772575,1cfe0b7aa8557d2047b9fdf852ce451c72f2752b
1cfe0b7aa8557d2047b9fdf852ce451c72f2752b,1cfe0b7a,Fix NPE in LeadImagesHandler.beginLayout,"Fix NPE in LeadImagesHandler.beginLayout

Bug: T78501
Change-Id: Idc1b027ceca932bf83b8a3ec3760937bca5caf55
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418767955,1418767955,4feb8d95ae3ebf4ab980f3976ade786d16603701
4feb8d95ae3ebf4ab980f3976ade786d16603701,4feb8d95,Enable lead images in Beta.,"Enable lead images in Beta.

Change-Id: I4c1fd12af767cbda480721595cd378503763fd96
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418692772,1418766316,e32ab09c2dbaec07de0aa82e3d7dfb632f06702f
e32ab09c2dbaec07de0aa82e3d7dfb632f06702f,e32ab09c,Minor tweaks of the Toolbar design.,"Minor tweaks of the Toolbar design.

- Made the drop shadow under the toolbar a bit more subtle.
- Made the toolbar color a bit lighter.
- Decreased the font size of the search hint text.
- Made the background of the SearchView be the same as the placeholder.
- Removed the Submit button from the SearchView (the ""go"" button on the
  keyboard still applies).
- Removed the magnify icon from the SearchView when active.
- Fixed checkstyle.

Change-Id: Ic1ace7a314d80c46c48a4cf88a899f5fcebe8dcf
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418270798,1418765279,682597509491bcfb77562a03342817e80d2bad8d
682597509491bcfb77562a03342817e80d2bad8d,68259750,Improve scrollbar in Gallery description text.,"Improve scrollbar in Gallery description text.

Make it no longer overlay over the text.

Bug: T78347
Change-Id: Iccab7c29fa50f56da922a1e1a182bea9e76470e9
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418755716,1418761642,bbd7550ce83812842eb63807d116546095f43043
bbd7550ce83812842eb63807d116546095f43043,bbd7550c,Minor tweaks in collapsed infobox design.,"Minor tweaks in collapsed infobox design.

- Give it a drop shadow instead of a solid border, to be more Materialy.
- Make the chevron icon a bit smaller, and a bit darker.
- Refresh generated CSS contents from MobileApp.

Change-Id: I4ec317358e39115f5ff3e034fbe2d0bd29df9049
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1418269241,1418742687,67533dcfa16a059e99a625df67827bcfc14e165a
67533dcfa16a059e99a625df67827bcfc14e165a,67533dcf,"Merge ""Don't display ""Read more"" section if there are no read more suggestions""","Merge ""Don't display ""Read more"" section if there are no read more suggestions""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418739521,1418739521,"de79ea2b1a539c875853a3ee18d7843ca5b9cbe2,f8effe4d5a1743ef9aaec6698307269340ea75c6"
de79ea2b1a539c875853a3ee18d7843ca5b9cbe2,de79ea2b,"Merge ""Stop making gallery view info labels bold""","Merge ""Stop making gallery view info labels bold""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418692721,1418692721,"c7acc9904e822225796df0ab050a2dea90727a20,feb4fce608254a75d78fdcf113ff21573549ff99"
c7acc9904e822225796df0ab050a2dea90727a20,c7acc990,"Merge ""Fix test compilation""","Merge ""Fix test compilation""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418692690,1418692690,"7ac317eab0a217dfe54d07e844fe5c3bec2fafda,8ba64d3222690a5338e0b82d104088239ebe4627"
feb4fce608254a75d78fdcf113ff21573549ff99,feb4fce6,Stop making gallery view info labels bold,"Stop making gallery view info labels bold

Change-Id: I6af64b29bfda736bae85363c69400c932b0de28c
(cherry picked from commit a1271fc6f4d3178839e87623a1280ac8c9f92861)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418666454,1418678022,7ac317eab0a217dfe54d07e844fe5c3bec2fafda
8ba64d3222690a5338e0b82d104088239ebe4627,8ba64d32,Fix test compilation,"Fix test compilation

Change-Id: I266d256f131ed0c19fe61bbfb6d3a2da333a5ba7
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418669637,1418669637,e96bef58b49e35073b6b385fca0d33aaaea5fab0
7ac317eab0a217dfe54d07e844fe5c3bec2fafda,7ac317ea,Manual import of Android string translations from TWN,"Manual import of Android string translations from TWN

Change-Id: Icf737841dacc0c0cb5204a18d401695aa77e564f
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1418669284,1418669284,e96bef58b49e35073b6b385fca0d33aaaea5fab0
f8effe4d5a1743ef9aaec6698307269340ea75c6,f8effe4d,"Don't display ""Read more"" section if there are no read more suggestions","Don't display ""Read more"" section if there are no read more suggestions

Bug: T78502
Change-Id: Ifc58333a1df47fc9c4ffd06a19a517c4930e9b32
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1418588035,1418664548,2e9b543bac089674ae948533bc6c5a48f1a1430e
e96bef58b49e35073b6b385fca0d33aaaea5fab0,e96bef58,First round of design tweaks to the Gallery view.,"First round of design tweaks to the Gallery view.

- If the aspect ratio of the image is *almost* the same as the window
  aspect ratio, then scale the image to fit, so that the user doesn't see
  thin black bars. (the user may still zoom out to see the full image)
- Now trimming whitespace from descriptions.
- Using dash instead of colon for Author and License.
- Adjusted color of Author and License.
- Decreased the resolution of fetched images :( since very high-res images
  may use a prohibitive amount of VM memory, and will not render correctly
  on some devices.

Change-Id: I88df4782576775486f67838a180b7fb9e9e78bd2
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418419573,1418657240,657dfedfebb8fade1473dd41b678fa570a9b684f
657dfedfebb8fade1473dd41b678fa570a9b684f,657dfedf,"Merge ""Add releases folder to gitignore""","Merge ""Add releases folder to gitignore""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418654448,1418654448,"2d34e9eb68b01d5490fa4e4ed8c060906d1f4b98,cb016e5af7fe7ff7eaebf12b54cc909c3d928517"
2d34e9eb68b01d5490fa4e4ed8c060906d1f4b98,2d34e9eb,"Merge ""Save ProGuard mapping files""","Merge ""Save ProGuard mapping files""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418654319,1418654319,"a57e92515fcf30c55c739768f154b1edcea903fc,7bbedf7b3fa58e8666bcd5983600704cf32a88b9"
a57e92515fcf30c55c739768f154b1edcea903fc,a57e9251,"Merge ""Change ""Credit"" to ""Author"" in the image viewer.""","Merge ""Change ""Credit"" to ""Author"" in the image viewer.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418653820,1418653820,"2e9b543bac089674ae948533bc6c5a48f1a1430e,e060a5ddde5a1e60576b05503cee19500abfe640"
2e9b543bac089674ae948533bc6c5a48f1a1430e,2e9b543b,Refine search logic a bit.,"Refine search logic a bit.

- No longer offer the choice of Title vs. Full-text search.
- Default to Title search, but if it returns fewer than 5 results, then
  switch to Full-text search seamlessly.
- Switch back to Title search when a new search term is given.
- Once we're convinced that this method is better than before, we can
  refactor the whole thing so that there's only one sub-fragment (instead
  of Title vs. Full).

Change-Id: Ibf9ebc49299393a0afc17b87b4b8bc02f0ba74a6
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418163604,1418427318,6c8c6f4d398eecd047578e2017ea0ccbabded193
cb016e5af7fe7ff7eaebf12b54cc909c3d928517,cb016e5a,Add releases folder to gitignore,"Add releases folder to gitignore

Now that we also store mappings files there.

Change-Id: Id6aeeae15dd2a7179d0393ddf1f89847ae8c930d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418425965,1418425965,7bbedf7b3fa58e8666bcd5983600704cf32a88b9
7bbedf7b3fa58e8666bcd5983600704cf32a88b9,7bbedf7b,Save ProGuard mapping files,"Save ProGuard mapping files

In case we need them to unscramble stack traces.
We haven't turned up ProGuard very much but better be safe than sorry.

Also wrapped some long lines since Checkstyle doesn't like that.

Change-Id: I45a230f064f27c377e0f224bd6b3f5e123160277
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418425691,1418425691,6bf62cf19c830971d94dec463ebbca62e4a942ad
e060a5ddde5a1e60576b05503cee19500abfe640,e060a5dd,"Change ""Credit"" to ""Author"" in the image viewer.","Change ""Credit"" to ""Author"" in the image viewer.

The word ""Author"" should be a lot clearer to our users than ""Credit"", which is
a bit more of a technical term.

Change-Id: Ib85559affec5ee978d8b1c8dc6ce852f840ac327
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1418422282,1418422282,6bf62cf19c830971d94dec463ebbca62e4a942ad
6c8c6f4d398eecd047578e2017ea0ccbabded193,6c8c6f4d,Decrease the edge width of Drawer drag areas.,"Decrease the edge width of Drawer drag areas.

Compromise between the default value and our old (annoying) value.

Bug: T78240

Change-Id: I93f016fffefbf343edcb381ded2f7991ca95ee7c
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418410228,1418419596,6bf62cf19c830971d94dec463ebbca62e4a942ad
6bf62cf19c830971d94dec463ebbca62e4a942ad,6bf62cf1,"Merge ""Enable basic ProGuard minification""","Merge ""Enable basic ProGuard minification""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418410123,1418410123,"aec69bfe16d37c177ddbf79f931d95c5b44d52b5,8324ed260300666619d9bda0bd77efcd6de3c916"
8324ed260300666619d9bda0bd77efcd6de3c916,8324ed26,Enable basic ProGuard minification,"Enable basic ProGuard minification

We can make the ProGuard config more aggressive later.
Want to keep it on the lighter side initially.
This is mainly driven by the desire to fix the bugs mentioned below.

Bug: T78197
Bug: T76279
Change-Id: Ic91e83e6dc4d25780dc8815318aba2e2a0c009fb
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418323369,1418409229,e0decbeccf83ee405c0e0402eb60ec41e9e93104
aec69bfe16d37c177ddbf79f931d95c5b44d52b5,aec69bfe,Code inspections,"Code inspections

Fix some low hanging fruit code inspections in Android Studio

Change-Id: Ib3845d2a65a37b7dbef8c619fcce3a3d6d59afcd
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418405353,1418405353,41d88b399bb31c04ee54ba0302b8eba8a9a7f16d
41d88b399bb31c04ee54ba0302b8eba8a9a7f16d,41d88b39,Enable Lint,"Enable Lint

Mark string files that never get translated to ignore missing translations.
Set MissingTranslation to warnings.

Change-Id: If3235273632b17118e0a2096caa79a6fd51fe6d9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418336021,1418336021,3c3a551b8d992d4ceb028ed498edc496cfaf3dcb
3c3a551b8d992d4ceb028ed498edc496cfaf3dcb,3c3a551b,Fix possible crash(es) related to fragment manager state loss.,"Fix possible crash(es) related to fragment manager state loss.

So, in a couple cases in our code, we perform transactions with the
FragmentManager from the result of AsyncTasks. This is technically
frowned-upon, since at that point the task has no way of knowing the state
of the Activity (whether its instanceState has been saved), which can lead
to an exception being thrown when we try to commit() a fragment
transaction.

Fortunately there is a function called commitAllowingStateLoss() which is
designed specifically for this purpose. Therefore I've split off the
functions that deal with fragment transactions, and gave them a parameter
to optionally allow state loss. Going forward, if we need to push a
fragment from an AsyncTask result, we should allow state loss, but *only*
in those cases.  In all other cases, the regular commit() function should
still be used.

Specifically, the cases where we now allow state loss (in this patch) are:
- Fetching a Random page.
- Going to the Main page after changing the Wiki language.

Bug: T75237
Change-Id: If01483bb4e8c3e699f668853b7f31b73c01c9e86
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418310720,1418333402,e0decbeccf83ee405c0e0402eb60ec41e9e93104
e0decbeccf83ee405c0e0402eb60ec41e9e93104,e0decbec,Adjust image size to fetch for gallery view.,"Adjust image size to fetch for gallery view.

to comply with predefined bucket sizes, for performance/cache reasons:
https://git.wikimedia.org/blob/mediawiki%2Fextensions%2FMultimediaViewer.git/f9e7bae91a8032fa13fc68114a0d57d190ea77f9/resources%2Fmmv%2Fmmv.ThumbnailWidthCalculator.js

Change-Id: I6fef16c591d149e5e1c7a5e7ae53eb057bbef1c3
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418263118,1418263118,90ae5518e88dbb558a94d1a404fc178d44a82169
90ae5518e88dbb558a94d1a404fc178d44a82169,90ae5518,Hygiene: delete unused dialog xml files.,"Hygiene: delete unused dialog xml files.

Change-Id: I822d5577a7bab31285f2363f6db57e3166780289
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418261816,1418261816,a5cc5d770ed9be1280aee1612a04680b8f7d3c76
a5cc5d770ed9be1280aee1612a04680b8f7d3c76,a5cc5d77,"Merge ""Hygiene: Removed unused class PopupMenu""","Merge ""Hygiene: Removed unused class PopupMenu""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418261580,1418261580,"1dc4c790e0854ffbf3b63d590f6855be514cc7d5,26d4df84a79b6aca97b55d99f3b5e345dc48c758"
1dc4c790e0854ffbf3b63d590f6855be514cc7d5,1dc4c790,"Merge ""Update support libraries to 21.0.3""","Merge ""Update support libraries to 21.0.3""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418261556,1418261556,"c9534830fb45e0bc29cdc62d9f805640c07e6a26,83c33254ad64433b54838bea7dc25b7f74a7e98f"
26d4df84a79b6aca97b55d99f3b5e345dc48c758,26d4df84,Hygiene: Removed unused class PopupMenu,"Hygiene: Removed unused class PopupMenu

Change-Id: I24391e80a93cef6ba5e9e7ede3a279e98f1b44dd
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418254711,1418254722,70266b555419162c292a0d1e3693d7c96a681f97
83c33254ad64433b54838bea7dc25b7f74a7e98f,83c33254,Update support libraries to 21.0.3,"Update support libraries to 21.0.3

Change-Id: I7eaffc13e161bb9a50eb2d797d8aab2582dcc8f8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418250986,1418250986,70266b555419162c292a0d1e3693d7c96a681f97
c9534830fb45e0bc29cdc62d9f805640c07e6a26,c9534830,More areas to avoid NPE when calling isSearching,"More areas to avoid NPE when calling isSearching

Looked through the code where we call ((PageActivity)getActivity()).isSearching()
Let's make it a pattern.

Bug: T78115
Change-Id: I272b7d17b9a411616f401752dbc8147202dd3ac6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418241266,1418241266,70266b555419162c292a0d1e3693d7c96a681f97
70266b555419162c292a0d1e3693d7c96a681f97,70266b55,Display image description/license/metadata in gallery view.,"Display image description/license/metadata in gallery view.

- Added pinch-zoom / scroll / fling functionality by using the PhotoView
  library (added to gradle and credits).
- Displaying image description, credit, and license on top of the image.
- Created a pop-up dialog of Exif and miscellaneous metadata accessible
  from overflow menu.
- Added option to navigate to the File page from overflow menu.
- Made links clickable in descriptions and metadata items.
- Refactored the Wikipedia Zero interstitial dialog (and removed the
  associated Bus event), so that activities don't have to individually
  implement the interstitial handler.

Change-Id: I983d84a76a96cb57e35ad33db2048d385e47b253
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418140492,1418238578,f9750ce9feab41eb57906a697305029d01410ccf
f9750ce9feab41eb57906a697305029d01410ccf,f9750ce9,Wikidata descriptions in Nearby.,"Wikidata descriptions in Nearby.

Change-Id: I5036322dc8554ca9f3fabad2ac04f1b4ffcf63f2
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418224631,1418234755,2a2d01f0ec926918f8a4b91e3d39758e82f5a78a
2a2d01f0ec926918f8a4b91e3d39758e82f5a78a,2a2d01f0,Legal requirement: add links to license text for libraries,"Legal requirement: add links to license text for libraries

License links are added to credits in About screen.
License text is bundled with the app.
Ordered the libraries alphabetically.

Was originally planning on creating a script to update the
license texts but most are not in separate files.
We just try to remember to update the licenses when we update
the libraries.

Change-Id: I74350f1215c859d6a3f2275891c7a2e2660e01c6
(cherry picked from commit ec0f32778487199c96b29d073eb64b7e13b745e8)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418184577,1418233286,9f374a7eddff35768f77fd36eff5729cf48e2a70
9f374a7eddff35768f77fd36eff5729cf48e2a70,9f374a7e,"Merge ""Add hidePageContent convenience method to PageViewFragmentInternal""","Merge ""Add hidePageContent convenience method to PageViewFragmentInternal""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418226369,1418226369,"5fefdfef96844dc735da8e61250502b99ed8149a,95a7b427e54420c271906128bb44bb81dc947a06"
5fefdfef96844dc735da8e61250502b99ed8149a,5fefdfef,"Merge ""Refactor code for storing preference for EventLogging opt-out""","Merge ""Refactor code for storing preference for EventLogging opt-out""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418225954,1418225954,"d1cb60242b77dfec92a845ea758ed7d9888449dc,a0920fa727811eb26f2f0a88d0672989488a06a6"
d1cb60242b77dfec92a845ea758ed7d9888449dc,d1cb6024,"Merge ""Avoid crash when menu button is pressed on 4.1 LG devices""","Merge ""Avoid crash when menu button is pressed on 4.1 LG devices""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418225373,1418225373,"d027ded84fd215faec69d6306975e4967241fb05,79bb16054506969f17ce7d5116a748c256bc46d4"
a0920fa727811eb26f2f0a88d0672989488a06a6,a0920fa7,Refactor code for storing preference for EventLogging opt-out,"Refactor code for storing preference for EventLogging opt-out

Right now, Funnel and MccMncStateHandler have to interact directly with the
SharedPreferences instance to get whether EventLogging is enabled or not. This
is quite clunky.

This patch abstracts this interaction to the WikipediaApp class, so that these
classes can use app.isEventLoggingEnabled() rather than interacting directly
with the SharedPreferences instance.

Change-Id: Ibba0e4baab923b4095cc8aa9f5a057f40f379977
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1418189898,1418190309,b6e61fa56dca65932a9a7860c5b9fef8d2a9d35e
79bb16054506969f17ce7d5116a748c256bc46d4,79bb1605,Avoid crash when menu button is pressed on 4.1 LG devices,"Avoid crash when menu button is pressed on 4.1 LG devices

According to https://code.google.com/p/android/issues/detail?id=78154 this
is a common issue on LG devices with 4.1 and appcompat-v7, version 21.0.0
through at least 21.0.2. Apparently, this did not happen with older
versions of appcompat-v7 (before 21).
Same workaround is on
http://stackoverflow.com/questions/26833242/nullpointerexception-phonewindowonkeyuppanel1002-main

Consider removing the workaround when updating appcompat-v7.

Bug: T78117
Change-Id: I381cfe39f0d370fa20c968ae86ffda0f04be409f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418188232,1418189611,9819853d23cf3156b3c3bd693d9bbbb75c9fc49e
d027ded84fd215faec69d6306975e4967241fb05,d027ded8,Fix checkstyle warning,"Fix checkstyle warning

Change-Id: Ib738d65090cd82736c7a6a770b403a4d48f66af4
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418185707,1418185718,9819853d23cf3156b3c3bd693d9bbbb75c9fc49e
95a7b427e54420c271906128bb44bb81dc947a06,95a7b427,Add hidePageContent convenience method to PageViewFragmentInternal,"Add hidePageContent convenience method to PageViewFragmentInternal

Currently, there are three separate places in PageViewFragmentInternal where
you want to hide all of the content of the page. Previously this was just the
web view, but now we have extra native components for content (lead images,
read more) which need to be hidden too.

This method adds a hidePageContent convenience method to the class, to reduce
code duplication.

Change-Id: Iaa6612b0aa521236b6a00c09f54f2676b468317d
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1418184195,1418184195,b6e61fa56dca65932a9a7860c5b9fef8d2a9d35e
9819853d23cf3156b3c3bd693d9bbbb75c9fc49e,9819853d,"Merge ""Update README""","Merge ""Update README""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418171632,1418171632,"ce21078da24a26211f59770d104ff09bb65e896e,d6edf79c66b28665abffd83fe66a41a3770b2026"
ce21078da24a26211f59770d104ff09bb65e896e,ce21078d,Avoid NPE in when calling isSearching,"Avoid NPE in when calling isSearching

Got this in recent build:
java.lang.NullPointerException: Attempt to invoke virtual method 'boolean org.wikipedia.page.PageActivity.isSearching()' on a null object reference
at org.wikipedia.page.PageViewFragment.onCreateOptionsMenu(PageViewFragment.java:145)
at android.support.v4.app.Fragment.performCreateOptionsMenu(Fragment.java:1868)
at android.support.v4.app.FragmentManagerImpl.dispatchCreateOptionsMenu(FragmentManager.java:1989)
at android.support.v4.app.FragmentActivity.onCreatePanelMenu(FragmentActivity.java:276)
at android.support.v7.app.ActionBarActivity.superOnCreatePanelMenu(ActionBarActivity.java:276)
at android.support.v7.app.ActionBarActivityDelegate$1.onCreatePanelMenu(ActionBarActivityDelegate.java:79)
at android.support.v7.widget.WindowCallbackWrapper.onCreatePanelMenu(WindowCallbackWrapper.java:49)
at android.support.v7.internal.app.ToolbarActionBar.populateOptionsMenu(ToolbarActionBar.java:459)
at android.support.v7.internal.app.ToolbarActionBar$1.run(ToolbarActionBar.java:69)
at android.os.Handler.handleCallback(Handler.java:739)
at android.os.Handler.dispatchMessage(Handler.java:95)
at android.os.Looper.loop(Looper.java:135)
at android.app.ActivityThread.main(ActivityThread.java:5221)
at java.lang.reflect.Method.invoke(Native Method)
at java.lang.reflect.Method.invoke(Method.java:372)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)

Change-Id: I5b069c734687ad2622f38eb1510212eedde8bfb5
(cherry picked from commit 75ca999168f6608fc136e80ad5ef98468fa7c414)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418163773,1418163847,b6e61fa56dca65932a9a7860c5b9fef8d2a9d35e
d6edf79c66b28665abffd83fe66a41a3770b2026,d6edf79c,Update README,"Update README

Need JDK 7 now.  Tried to be less Mac specific.
Update Android Studio info to 1.0.0
Removed info about Maven and IntelliJ.
Rearranged some chapters and added more info on how to contribute.

Change-Id: Ib0200a84cb2be923d14fa1bc4da8f018fb1349ac
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418161248,1418163525,b6e61fa56dca65932a9a7860c5b9fef8d2a9d35e
b6e61fa56dca65932a9a7860c5b9fef8d2a9d35e,b6e61fa5,Image viewer.,"Image viewer.

- Added an Activity for viewing individual images clicked from a page.
  Eventually the activity may be adapted to accommodate a scrollable
  gallery of images.
- The activity has a Toolbar with a gradient background, as well as a
  blank container for description and license information, and a stub menu
  item for displaying additional (exif) information.
- Created task for retrieving metadata for an individual File page.

Change-Id: I739d68860e957b84a7a927e089db10b3695d9598
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1417618618,1418163331,9ac8a1ef7b37655b38b300975fb4970613c31f84
9ac8a1ef7b37655b38b300975fb4970613c31f84,9ac8a1ef,Bump versionCode,"Bump versionCode

Change-Id: I94f410425324fb0adcc088e51ff097270f01b541
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418147502,1418147502,6dbb589dac3c694011ea377f01331ebc974e6067
6dbb589dac3c694011ea377f01331ebc974e6067,6dbb589d,Manual import of Android string translations from TWN,"Manual import of Android string translations from TWN

Change-Id: I3fb01f201dca21e4220492bb84a098e5ebfc5765
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1418146815,1418146815,f2977879d3e4fb4462f20e4ee0df4c653b24e8db
f2977879d3e4fb4462f20e4ee0df4c653b24e8db,f2977879,"Merge ""Remove Android Maven Plugin from credits""","Merge ""Remove Android Maven Plugin from credits""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418133149,1418133149,"b42a9b27f90e57527e6a6695cc17c14f169a7423,6749f3499b0f9f2a77c4e606f0c32c8140a9cc36"
b42a9b27f90e57527e6a6695cc17c14f169a7423,b42a9b27,"Merge ""Avoid NPE calling updateProgressBar""","Merge ""Avoid NPE calling updateProgressBar""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1418133094,1418133094,"bc880e44ab7885eea4bfd71a1a0cc2a4d058539a,7c8764319582577e5c28a5da3e366de1e2f0a681"
6749f3499b0f9f2a77c4e606f0c32c8140a9cc36,6749f349,Remove Android Maven Plugin from credits,"Remove Android Maven Plugin from credits

since we don't use Maven to build the final product anymore.
We've switched to Gradle a while ago.

Change-Id: I37dbcdaa934b3088c3787af080ad5cb619e0965d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418077866,1418078646,bc880e44ab7885eea4bfd71a1a0cc2a4d058539a
bc880e44ab7885eea4bfd71a1a0cc2a4d058539a,bc880e44,"Fix issue where first ""Read more"" suggestion was sometimes the current article","Fix issue where first ""Read more"" suggestion was sometimes the current article

Currently, if you follow a link to the current page via a redirect, e.g. going
to [[Avant-garde]] by tapping on the a link to the [[Avant garde]] redirect
page, then the first link the ""Read more"" section is often for the current
article.

This patch fixes that.

Bug: T76936
Change-Id: Idf580246e070fbce26e88c0bb67196b5f7b4f028
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1417855684,1418077112,b0e5528c737400146c208ded548f6587a50db867
7c8764319582577e5c28a5da3e366de1e2f0a681,7c876431,Avoid NPE calling updateProgressBar,"Avoid NPE calling updateProgressBar

plus in some more callbacks.

Got this myself with recent alpha bits:
java.lang.NullPointerException: Attempt to invoke virtual method 'void org.wikipedia.page.PageActivity.updateProgressBar(boolean, boolean, int)' on a null object reference
at org.wikipedia.page.PageViewFragmentInternal.performActionForState(PageViewFragmentInternal.java:520)
at org.wikipedia.page.PageViewFragmentInternal.access$1100(PageViewFragmentInternal.java:76)
at org.wikipedia.page.PageViewFragmentInternal$5$1.run(PageViewFragmentInternal.java:405)
at org.wikipedia.ViewAnimations$2.onAnimationEnd(ViewAnimations.java:127)
at com.nineoldandroids.view.ViewPropertyAnimatorICS$1.onAnimationEnd(ViewPropertyAnimatorICS.java:90)
at android.view.ViewPropertyAnimator$AnimatorEventListener.onAnimationEnd(ViewPropertyAnimator.java:1116)
at android.animation.ValueAnimator.endAnimation(ValueAnimator.java:1089)
at android.animation.ValueAnimator$AnimationHandler.doAnimationFrame(ValueAnimator.java:666)
at android.animation.ValueAnimator$AnimationHandler.run(ValueAnimator.java:682)
at android.view.Choreographer$CallbackRecord.run(Choreographer.java:767)
at android.view.Choreographer.doCallbacks(Choreographer.java:580)
at android.view.Choreographer.doFrame(Choreographer.java:549)
at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:753)
at android.os.Handler.handleCallback(Handler.java:739)
at android.os.Handler.dispatchMessage(Handler.java:95)
at android.os.Looper.loop(Looper.java:135)
at android.app.ActivityThread.main(ActivityThread.java:5221)
at java.lang.reflect.Method.invoke(Native Method)
at java.lang.reflect.Method.invoke(Method.java:372)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)

Change-Id: Ia22b82c9e0698ca42e3f67f07f0c6467d9f552a7
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418072640,1418072640,b0e5528c737400146c208ded548f6587a50db867
b0e5528c737400146c208ded548f6587a50db867,b0e5528c,Manual import of Android string translations from TWN,"Manual import of Android string translations from TWN

Change-Id: Ifcee79d2972da6051bf93e77a7fc3334ec3ff1e0
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1418063745,1418063745,74a76fb26bbeedc228245ed4f25e41643ff14829
74a76fb26bbeedc228245ed4f25e41643ff14829,74a76fb2,"Fix ""read more"" margins when in landscape mode.","Fix ""read more"" margins when in landscape mode.

When the screen height is less than the bottom content height, the margins
were being set incorrectly.

Change-Id: I90f45a84009055bf8d4b14d1402d63b447013e5a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418059760,1418061287,d03fc9e70976699f744ff48a33fbe06551eb945f
d03fc9e70976699f744ff48a33fbe06551eb945f,d03fc9e7,"Fix scrolling in the ""read more"" list.","Fix scrolling in the ""read more"" list.

Also don't fetch images for list items if images are disabled in
preferences.

Bug: T76934
Change-Id: Ib1917c992d62f02af5137b53cead33b33d059f9b
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1418054993,1418061269,1c727117de8d858b5c51f96e03b72267821b7637
1c727117de8d858b5c51f96e03b72267821b7637,1c727117,Use stable version of mwapi dependency,"Use stable version of mwapi dependency

Same code as before but enables us to have more
reproducible release builds.

Change-Id: I648593f6bf85b7cd3e29ed7c41e356500f7287e8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1418058532,1418058532,ea924bf3d9c966e2a6f316c31d8250012928b201
ea924bf3d9c966e2a6f316c31d8250012928b201,ea924bf3,Enable lead images only in the Alpha build.,"Enable lead images only in the Alpha build.

so that we could release a Beta, and wait to debut lead images until we complete the click-to-enlarge functionality.

Change-Id: I6977ecde03a00b231d9369e8d2dc3e674b23d6cd
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1417988389,1418054954,4ea6c8d182091baffb35e28c5ee5da29598b6155
4ea6c8d182091baffb35e28c5ee5da29598b6155,4ea6c8d1,Fix bottom padding of Read More component after refreshing page.,"Fix bottom padding of Read More component after refreshing page.

- When a page is refreshed, the bottom component sent an incorrect padding
  height to the WebView.
- Also added some left/right padding to the license and last-modified
  text.

Change-Id: I2e7e2e626b632216497247e86aaddcc6336d2497
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418045510,1418045510,275de01c6399f24c06a3175574de0dad04bc37a5
275de01c6399f24c06a3175574de0dad04bc37a5,275de01c,"Fix sending of SuggestedPagesFunnel ""shown"" event","Fix sending of SuggestedPagesFunnel ""shown"" event

I thought I removed that line, but it somehow came back (maybe during a
rebase).

Bug: T76933
Change-Id: I9498a366cc4eb7f5e1cb69c2361265d411e77447
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1418044678,1418044678,85f8afd1093e1f90ab754ff61f91904f8b83eb7a
85f8afd1093e1f90ab754ff61f91904f8b83eb7a,85f8afd1,No Read more section on main page,"No Read more section on main page

Plus a cleanup of an unused import.

Change-Id: I2254b0015624ff5dc71943ba40c34bf2b6fea109
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1417819931,1417819931,6d0ae962ad75c394ff80b6402b509c9f7c36acc3
6d0ae962ad75c394ff80b6402b509c9f7c36acc3,6d0ae962,Iron out issues in Read More component.,"Iron out issues in Read More component.

- Dynamically size the component based on the number of page suggestions
  retrieved.
- Fix layout issues / inconsistencies.
- Will follow up with patch to enable scrolling when swiping the list
  items.

Change-Id: Ie5b02c0afca51f44ff444f1759847945fb72aba6
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1416592162,1417814661,de6ab225bae96f6231b464a7efd2b0b0978e37dc
de6ab225bae96f6231b464a7efd2b0b0978e37dc,de6ab225,Display native Read more section,"Display native Read more section

Hidden on Main page, since there we don't get useful results.
Hooked up backend task and event logging.

Change-Id: Idbe51ef33b24fd35383565b48331ef4461e4137e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416520090,1417814589,a876e418035f89679ff05a3fc7ddd13245570b46
a876e418035f89679ff05a3fc7ddd13245570b46,a876e418,Add native component to the bottom of WebView content.,"Add native component to the bottom of WebView content.

Move last-modified and license text into the native component, and remove
them from the WebView.
Leave room for additional content, for a subsequent patch.
Add 'section' to ToC that brings the user to the bottom content.

Change-Id: Ic09c828c63bffe1f507d91f8bb836493683e109f
",,,,dbrant,dbrant@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416277671,1417812677,ed0000cd1f9bdfe730b4f15f00ea6dc7f6ac9ca8
ed0000cd1f9bdfe730b4f15f00ea6dc7f6ac9ca8,ed0000cd,"Title search gets descriptions, too","Title search gets descriptions, too

Now that we can easily get descriptions from our own API,
why not have them for both search types.

Using common data type for both full text and title search: PageTitle
Also using same layout for both fragments.

This will enable us to refactor things even more.
The two tasks and the two fragments have a lot of common code.

Change-Id: Ied3ca27a36e0ff26f7c8f5404289e8ecee062336
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1417764385,1417804933,05abd0359fa14eca439a4c766641d973273241f7
05abd0359fa14eca439a4c766641d973273241f7,05abd035,Wikidata descriptions retrieved via new PageTerms API,"Wikidata descriptions retrieved via new PageTerms API

This patch affects retrieving descriptions for
- Full text search items
- Lead image
- Disambig items

Had to change the WikidataCache to use PageTitles instead of
Wikidata IDs as keys.

Always add the description of the clicked on item in full text search
to the cache so we don't even try to get it again when the page is opened.

Change-Id: I6b308f57de805b6d1193cf6b55e5d74307f1aaa0
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1417749779,1417803354,e0ff4c63e320298e527f2b55d3fbd6140a3e0984
e0ff4c63e320298e527f2b55d3fbd6140a3e0984,e0ff4c63,Support the latest Gradle plugin in updated Android Studio.,"Support the latest Gradle plugin in updated Android Studio.

- The ""runProguard"" keyword was replaced with ""minifyEnabled"".
- BuildConfig.PACKAGE_NAME was replaced with BuildConfig.APPLICATION_ID

http://tools.android.com/tech-docs/new-build-system

Change-Id: I12edfdf56eb1af66282d3408e24402694a5e0a1e
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1417792451,1417803002,f655d18b16824c1a45db5a39f3d0e2235cb10618
f655d18b16824c1a45db5a39f3d0e2235cb10618,f655d18b,More error report content,"More error report content

Change-Id: I52a3572f8cb4605797115473325b5e529577c9c9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1417756161,1417756161,39e3a4ce204dcbcd04ea89b8ecc5b68a578019b8
39e3a4ce204dcbcd04ea89b8ecc5b68a578019b8,39e3a4ce,Whoops: explicitly set placeholder image for thumbnails.,"Whoops: explicitly set placeholder image for thumbnails.

...because views can be recycled.

Change-Id: Id147dc4912d63b08eab71022865fcbf6b38f91fc
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1417646856,1417713025,0ac2a738f06119837cddea88eb30516de335389f
0ac2a738f06119837cddea88eb30516de335389f,0ac2a738,"Use new ""index"" property to sort search results.","Use new ""index"" property to sort search results.

Change-Id: Ief73398497c799442f5830c2ad3243caea4f3b43
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1417646011,1417712557,3ee2c22956fb110e1e67034541a36248f872fb28
3ee2c22956fb110e1e67034541a36248f872fb28,3ee2c229,Add ignored CSS class for table transforms.,"Add ignored CSS class for table transforms.

Change-Id: I7d2ccbf58e5e121d3ca3c700de520dd9f446c129
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1417709539,1417709539,ddbc091071ab67f532ce7b41b56f6e8184f43c2d
ddbc091071ab67f532ce7b41b56f6e8184f43c2d,ddbc0910,Avoid rehashing when building HashMaps in staticdata,"Avoid rehashing when building HashMaps in staticdata

Setting load factor to 1, and capacity slightly larger than what we need.

Change-Id: Ifa6659306892415e4eb8dba934a5b00e1222d958
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1417630469,1417638917,46e089e35eae25dfa51542550ed6d14ac5720c61
46e089e35eae25dfa51542550ed6d14ac5720c61,46e089e3,Allow enabling/disabling images in pages.,"Allow enabling/disabling images in pages.

Implement a preference that enables or disables images throughout the app
(within pages, lead images, thumbnails, etc.)

Bug: T75315
Bug: T74031

Change-Id: Ifde8cf4934cc182607f11ef636b8b4eabd5ea599
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1417623296,1417637526,0049a31662b8a0160dbd31f915544f95659ffc62
0049a31662b8a0160dbd31f915544f95659ffc62,0049a316,Fix behavior of long-press in Nearby.,"Fix behavior of long-press in Nearby.

Before this patch, long-pressing an item in Nearby took the user to the
Google Maps app, *and* simultaneously navigated to the page that was
pressed (which could potentially cause a crash, as well).

This makes it so that long-pressing an item *only* takes the user to the
Maps app, and doesn't navigate to the selected page.

Change-Id: I96373bd3b4de4219af244f81bc522b94e77070a7
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1417627737,1417632531,45656b87aa0e3691b540b0f89ca0b6836c43d333
45656b87aa0e3691b540b0f89ca0b6836c43d333,45656b87,Fix possible crash when switching language after activity closed.,"Fix possible crash when switching language after activity closed.

Also fix checkstyle item.

Change-Id: I0c5513059b419a5a140454b96eeb0e1f428597b0
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1417627462,1417631618,3e41d2341f02909563ebbdc35b5b0b408c805e6b
3e41d2341f02909563ebbdc35b5b0b408c805e6b,3e41d234,Fix possible crash when clicking link after activity closed.,"Fix possible crash when clicking link after activity closed.

The link click event comes asynchronously from the WebView, and may be
caught after the activity is closed.

Change-Id: Iee75038f673d4512dafcbb6a0d191b1a192440ff
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1417627316,1417627316,e704fdaf6fef1f61d89f37330c46fb6d2491acf5
e704fdaf6fef1f61d89f37330c46fb6d2491acf5,e704fdaf,"Merge ""Check if EditSectionActivity is finished""","Merge ""Check if EditSectionActivity is finished""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1417619030,1417619030,"e1da1366a6725b486b2eb742f7f2dee15df3abdf,9822b08ddbb2f4432a24d8e3c01add96f697c76d"
9822b08ddbb2f4432a24d8e3c01add96f697c76d,9822b08d,Check if EditSectionActivity is finished,"Check if EditSectionActivity is finished

Bug: T73299
Change-Id: I438a77d2116237016bb2a4fd73e4f82e7adb2a0d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1417574359,1417574359,355d0c9fdf20854a57cc99c408ed16666b8ebf7f
e1da1366a6725b486b2eb742f7f2dee15df3abdf,e1da1366,Prevent NPE in ToCHandler.scrollToSection,"Prevent NPE in ToCHandler.scrollToSection

Bug: T75402
Change-Id: I468d8ade39170c069073491ac85f8165622a4223
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1417570052,1417570052,355d0c9fdf20854a57cc99c408ed16666b8ebf7f
355d0c9fdf20854a57cc99c408ed16666b8ebf7f,355d0c9f,Tweak page title spacing for Lollipop+,"Tweak page title spacing for Lollipop+

Change-Id: I61d153a377f1d89c0a77cff618099dfb73a9ce4f
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1416942258,1417536703,06fbe8f61d0d2f0a9d79e3dc72fcb7366fd61acd
06fbe8f61d0d2f0a9d79e3dc72fcb7366fd61acd,06fbe8f6,"Merge ""Move adjustDrawableToTheme call to onCreateOptionsMenu""","Merge ""Move adjustDrawableToTheme call to onCreateOptionsMenu""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1417532355,1417532355,"92c53268bd602e0ffbec970c503babbf048532d7,678c2d95c6bcbd5b9b023fd17568cbf5883bfa15"
92c53268bd602e0ffbec970c503babbf048532d7,92c53268,"Merge ""Fix ToC icon color in dark mode on 5.0""","Merge ""Fix ToC icon color in dark mode on 5.0""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1417530596,1417530596,"5a555a878bc47b7bd3d4e1eca068ab0f35bcb58f,a350d63e8606d2d4ef5ff3e81c9e136b2d34e12b"
5a555a878bc47b7bd3d4e1eca068ab0f35bcb58f,5a555a87,"Merge ""Remove extra quotes in string resource""","Merge ""Remove extra quotes in string resource""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1417530514,1417530514,"d7a7d2715fe27c56b1facba626c7e5b3c5f0ac63,275b4de59c5dda71232d205ce6e8c9c37e970ca8"
678c2d95c6bcbd5b9b023fd17568cbf5883bfa15,678c2d95,Move adjustDrawableToTheme call to onCreateOptionsMenu,"Move adjustDrawableToTheme call to onCreateOptionsMenu

Saves a call when tapping on the overflow menu, and is
more consistent with the rest of the adjustDrawableToTheme calls.

Change-Id: I4aa6c8934b07093f1acc54f325af562b3b8e06d7
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1417502822,1417503085,a350d63e8606d2d4ef5ff3e81c9e136b2d34e12b
a350d63e8606d2d4ef5ff3e81c9e136b2d34e12b,a350d63e,Fix ToC icon color in dark mode on 5.0,"Fix ToC icon color in dark mode on 5.0

On Lollipop the adjustDrawableToTheme call for the
ToC icon didn't seem to have any lasting effect.

Change-Id: I0cfd7505c50f5a93f86ce29884defb5e6524a228
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1417502579,1417502579,d7a7d2715fe27c56b1facba626c7e5b3c5f0ac63
d7a7d2715fe27c56b1facba626c7e5b3c5f0ac63,d7a7d271,Fix omission in the repository's copyright notice.,"Fix omission in the repository's copyright notice.

Change-Id: I44653becc3469ade080248793eb41c4496ee8814
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1417465340,1417465340,0b6696c529ef09912bd4e49b2915d43b4974b1be
275b4de59c5dda71232d205ce6e8c9c37e970ca8,275b4de5,Remove extra quotes in string resource,"Remove extra quotes in string resource

Change-Id: Ib0531dcbb4eca98dc78a2007aa6bdc4f614dd809
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1417458241,1417458241,0b6696c529ef09912bd4e49b2915d43b4974b1be
0b6696c529ef09912bd4e49b2915d43b4974b1be,0b6696c5,Manual import of Android string translations from TWN,"Manual import of Android string translations from TWN

Change-Id: I6f9d017e7a5341448a6ad36f85532aabab251688
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1417456814,1417456814,9bb52770611b1ee3a0a5b160a4767cceddc51354
9bb52770611b1ee3a0a5b160a4767cceddc51354,9bb52770,Ignore empty full-text results when using a continue offset.,"Ignore empty full-text results when using a continue offset.

Don't show ""no results"" when a search query with 'continue' data returns
zero results due to a mismatch of all of the items in the dual result
lists.

Bug: T76358

Change-Id: I01145c39984cb356a97efe9496817945b96324e9
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1417041272,1417456151,686e80c43b4ee2f2e76fa04b15bb3968b2d2a807
686e80c43b4ee2f2e76fa04b15bb3968b2d2a807,686e80c4,Fix certain links to sections within the current page.,"Fix certain links to sections within the current page.

Bug: 71745

Change-Id: I5ad41283bb689aa96770f8c8b460a0fb6e0e47e2
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1416949836,1417455363,01a24efc006d6c9ffe1d9e09e323558c0cf94734
01a24efc006d6c9ffe1d9e09e323558c0cf94734,01a24efc,Don't move any tables/infoboxes on Main Page(s).,"Don't move any tables/infoboxes on Main Page(s).

Certain wikis rely very heavily on <table>s to lay out the content of
their Main Page.

Bug: T76060
Bug: T76066

Change-Id: Ia8b241121bb8a223216eaee8f4a0744f6108fce1
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1417032221,1417454661,2c80a109732b5495eff17e111d17d6f60fc582fb
2c80a109732b5495eff17e111d17d6f60fc582fb,2c80a109,Correctly style page title in ToC.,"Correctly style page title in ToC.

Honor capitalization and HTML formatting.

Bug: T75478
Change-Id: I08755b40e2096b6698d4ccd4e5d92db183965894
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1417034403,1417454338,ad39903db1286b6d7caa0b6f60d609fc80c56486
ad39903db1286b6d7caa0b6f60d609fc80c56486,ad39903d,Keep toolbar shown when scrolling to a section programmatically.,"Keep toolbar shown when scrolling to a section programmatically.

Bug: T75577
Change-Id: I383fbdd0f9f8df5739f617b05a1bf08bc2e7a8ca
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1417035031,1417035031,584392cbb4f93f75097b35d313292fea54cc4f33
584392cbb4f93f75097b35d313292fea54cc4f33,584392cb,Improve infobox/edit-pencil alignment.,"Improve infobox/edit-pencil alignment.

The real issue was that some infoboxes were not properly moved to the
bottom of the lead paragraph. This patch moves any tables (including
infoboxes) inside the lead section to the bottom of the first paragraph,
which effectively leaves the edit pencil aligned with the first two lines
of the paragraph.

Change-Id: Iaf9ec6beec7bfd5bdcd00934371577a117475d00
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1416938812,1417021309,3a951b96625f223b41598ffc04f8890bc53909f0
3a951b96625f223b41598ffc04f8890bc53909f0,3a951b96,ToC tweaks: always on ToC,"ToC tweaks: always on ToC

- ToC button is always visible and enabled
- still: ToC opened automatically for all pages except Main page
- if user invokes ToC on Main page the onboarding text could show up
- show progress bar inside ToC drawer if ToC is opened while page is still loading

Change-Id: If9371dce97589d1c904fe1ca6c37057e74a433c0
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416968208,1416968208,a41c1c27cf917b0de37deff0b737952025f91271
a41c1c27cf917b0de37deff0b737952025f91271,a41c1c27,Improve collapsed infobox formatting.,"Improve collapsed infobox formatting.

- Pull headers from the original table, but don't show them if they
  contain more than *two* links.
- Don't show table header if it's identical to the page title.

Change-Id: I3f8e863e3e11e4537a4cefa05ce7ab8d3eb36e75
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1416935595,1416953656,df5fc373d01623268a0c4eee15d3fc0f4bb5f6c4
df5fc373d01623268a0c4eee15d3fc0f4bb5f6c4,df5fc373,Update the Search funnel to have a session ID.,"Update the Search funnel to have a session ID.

Change-Id: Idb5a1a7a6c535570d3fa42339094fa2f5dba2d65
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1416950311,1416950311,5a844c102458b73bb3dfd6a57b5af27f8c027c90
5a844c102458b73bb3dfd6a57b5af27f8c027c90,5a844c10,Honor HTML formatting in page title.,"Honor HTML formatting in page title.

Some pages have an italicized title, especially pages about plant and
animal genera (e.g. [[Australopithecus]], [[Boletus]], [[Homo]], etc.)

This will allow the title to be displayed with the intended formatting.

Change-Id: I9b1fe5ac9ba9f53c5c357c9e5c5e6b0641b863a9
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1416935917,1416939195,94ac248172b80f0339e32aa4e2006f53bc0f4161
94ac248172b80f0339e32aa4e2006f53bc0f4161,94ac2481,Implement Search event logging.,"Implement Search event logging.

Change-Id: I8c58836df6ff57a998470184d3501a2a65936921
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1416850333,1416938905,54782285855edddb3eee0907e16eccdbc110dcb8
54782285855edddb3eee0907e16eccdbc110dcb8,54782285,Update the search button to be a text+image selector.,"Update the search button to be a text+image selector.

- Search selector now fills up the entire width of the Toolbar (minus the
  other action buttons)
- Clicking the search selector simply brings up the Search fragment, like
  before (the selector itself is not an EditText).
- Put the SearchView into xml, as a child of the Toolbar, instead of a
  menu action item.
- Updated the SearchView to fill up the width of the Toolbar when it
  becomes enabled.

Bug: 73576
Change-Id: Ie0f86429fdae95263fc5e1b53ab19f2e7f73a933
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1416546406,1416931851,86b27541f5cdab31e8a0f10d820ab223f47fd600
86b27541f5cdab31e8a0f10d820ab223f47fd600,86b27541,"Merge ""Set search tab text color.""","Merge ""Set search tab text color.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416926842,1416926842,"7305928ef0e2d81f4e50c54daec4321bf425e339,aa0f1e5ab2bb2101e36eadf361b83620cb284f24"
7305928ef0e2d81f4e50c54daec4321bf425e339,7305928e,"Merge ""Make toolbar icons lighter""","Merge ""Make toolbar icons lighter""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416926700,1416926700,"0a89b7072f79d2b75c5c1f1216afeeee18c87b5d,ad53bc5684df5d1c74f8e6140886e8ff9cc774c8"
aa0f1e5ab2bb2101e36eadf361b83620cb284f24,aa0f1e5a,Set search tab text color.,"Set search tab text color.

This fixes an issue on 2.3 where the non active tab in search
is not readable in dark mode: black text on black background.

Change-Id: Ia675eecd3ba530713610b82ea5661aa59609bdad
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416899647,1416899647,98ac4a772f19cf274bacb602bca96672121a1a04
0a89b7072f79d2b75c5c1f1216afeeee18c87b5d,0a89b707,Remove obsolete strings from translations,"Remove obsolete strings from translations

Had compiler warnings in Android Studio because of that.

Change-Id: I36d4b3c9877fb390dab4b6131673f5058a2f7033
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416877913,1416877920,98ac4a772f19cf274bacb602bca96672121a1a04
ad53bc5684df5d1c74f8e6140886e8ff9cc774c8,ad53bc56,Make toolbar icons lighter,"Make toolbar icons lighter

and make them a bit more transparent;
according to Android guidelines at
http://developer.android.com/design/style/iconography.html

Change-Id: I18095d15356bdc19fc6dda204769d793da44649d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416873228,1416873237,98ac4a772f19cf274bacb602bca96672121a1a04
98ac4a772f19cf274bacb602bca96672121a1a04,98ac4a77,"Merge ""Updated squareup libraries""","Merge ""Updated squareup libraries""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416870822,1416870822,"79a7fa19a812d6ae39bcea9fc16d8fcd13617f4f,9ca9a47b5a486251bfe04b3271a3cb39cd8d5278"
79a7fa19a812d6ae39bcea9fc16d8fcd13617f4f,79a7fa19,Tweak the space between the page title and description.,"Tweak the space between the page title and description.

Change-Id: I48459b3ea764b911e244cc617eb0f31a0e5e49ea
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1416868883,1416869854,01ca1424cccffd7617c28d5aa8f22c160a0abd20
9ca9a47b5a486251bfe04b3271a3cb39cd8d5278,9ca9a47b,Updated squareup libraries,"Updated squareup libraries

The big change is in OkHttp from 1.3 to 2.1.
A few API changes regarding caches required code changes.
See https://github.com/square/okhttp/blob/master/CHANGELOG.md
for full list.

Also remove explicit entry for support-v4 since it's
transitively included through the appcompat-v7 dependency.
That way we don't accidentally have incompatible versions
of those two.

Change-Id: I0b2532276c72757e5941aef63cfc2f2dea8445ad
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416869834,1416869834,01ca1424cccffd7617c28d5aa8f22c160a0abd20
01ca1424cccffd7617c28d5aa8f22c160a0abd20,01ca1424,"Merge ""Updated support libraries to 21.0.2""","Merge ""Updated support libraries to 21.0.2""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416865914,1416865914,"abdc0e774c873d6449f5b0ab205ff3034e6d3a7e,2f80741355197c1bc5744a37f311367ff116fd94"
abdc0e774c873d6449f5b0ab205ff3034e6d3a7e,abdc0e77,"Merge ""Material Design icons""","Merge ""Material Design icons""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416865867,1416865867,"c3705704356067843a9c246678e83975e5bae9bf,5120fd3a310a4e8d07cc39c9e1f721a8e1256ce3"
2f80741355197c1bc5744a37f311367ff116fd94,2f807413,Updated support libraries to 21.0.2,"Updated support libraries to 21.0.2

Please update extra-android-m2repository component
of your local Android SDK.

Change-Id: Ifb8e5cbdf60f744ab33691353af1aca456922569
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416864308,1416864308,c3705704356067843a9c246678e83975e5bae9bf
c3705704356067843a9c246678e83975e5bae9bf,c3705704,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: Ia6124a376df16252d341149c7c32f78e93f47b64
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1416857704,1416857704,f5d80c23915baff81922c386088a9fdeb05d34a6
5120fd3a310a4e8d07cc39c9e1f721a8e1256ce3,5120fd3a,Material Design icons,"Material Design icons

from https://github.com/google/material-design-icons
Some svg files had to be fixed because our convert script
created some weird streaks in them. I loaded the svg files in
Inkscape, rotated the object cw and ccw, and saved as new file.
See also https://github.com/google/material-design-icons/issues/22.
I tried to use the same names as the originals so that it's easier
to find them in the Google repo. I just skipped the _..px suffix.
The _24px files go into the /24/ folder.
The _18px files go into the /18/ folder, and so on.
The dark theme versions of ic_expand_less and ic_expand_more
have been manually tinted light gray.

Created a new hist_search icon based on ic_search but
different color and smaller.

Also removed a few unused images:
ic_fulltextsearch
ic_menu_moreoverflow...
ic_save

Change-Id: I488205e74adb0ef7e7336d643a2ed91d16d52841
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416625205,1416856085,f5d80c23915baff81922c386088a9fdeb05d34a6
f5d80c23915baff81922c386088a9fdeb05d34a6,f5d80c23,Start loving tablets more.,"Start loving tablets more.

- Now providing dimension constants for 7"" and 10"" tablets, for both
  landscape and portrait orientation, for precise control over appearance.
- Fine-tuned the constants for default page margins (and enabled
  dynamically setting the margins in the WebView) for various screen sizes.
- Fine-tuned the font size of the page title and Wikidata description for
  various screen sizes.
- Increased the default text size for large tablets.

Change-Id: I23bb555e59f4756106bae9b14e16c7e11b9f3db4
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1415934311,1416839657,57a7e0231bc3db2bd4f370c7b933504bc5fcc3d2
57a7e0231bc3db2bd4f370c7b933504bc5fcc3d2,57a7e023,Fix checkstyle and compilation.,"Fix checkstyle and compilation.

- The search_w icon was still being referenced in one place.
- Another checkstyle error that got through.

Change-Id: Ie77f827316da4ae52efae7faaa37067eb5728815
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1416837120,1416837120,766c20394be0e9629d59c2f0f3d8a23afbb5d890
766c20394be0e9629d59c2f0f3d8a23afbb5d890,766c2039,"Merge ""Remove W logo icon""","Merge ""Remove W logo icon""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416678838,1416678838,"a6604e1e6bc824b62770858640c0c14f18e8b2cc,7039e006ebb3e4ade3572b8d06198780daf910ce"
a6604e1e6bc824b62770858640c0c14f18e8b2cc,a6604e1e,"Merge ""Avoid IndexOutOfBoundsException in when loading page""","Merge ""Avoid IndexOutOfBoundsException in when loading page""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416678693,1416678693,"8a1a387306453eb8b9698f616b9308d30c8f3a4a,8ade2b65b5c0acf56a9366f6f2658e81daa19963"
8a1a387306453eb8b9698f616b9308d30c8f3a4a,8a1a3873,"Merge ""Use apply method instead of commit method for SharedPreferences.""","Merge ""Use apply method instead of commit method for SharedPreferences.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416678645,1416678645,"0836c2be18dd63e2c9bf8f69eb7c496d61310473,501765480f063368d6bcd8e7eeab4dd966293ac9"
0836c2be18dd63e2c9bf8f69eb7c496d61310473,0836c2be,"Merge ""Improve log messages for EventLogging.""","Merge ""Improve log messages for EventLogging.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416678352,1416678352,"af18e4f11b4959b2db8965bd0374749daa35f30d,cb7330544c0551861a7b0e0c63d53492e30d2526"
501765480f063368d6bcd8e7eeab4dd966293ac9,50176548,Use apply method instead of commit method for SharedPreferences.,"Use apply method instead of commit method for SharedPreferences.

The commit method updates the SharedPreferences object in memory, then
synchronously writes to storage, which can slow things down a bit. The apply
method on the other hand updates the object in memory but then writes to
storage asynchronously, which makes the method return faster. The user notices
no difference except that it's slightly faster.

This patch switches from using commit to using apply for SharedPreferences.

Change-Id: Ib3cb39f0905f87804eafb946db06c70a965f1bb3
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1416676157,1416676157,af18e4f11b4959b2db8965bd0374749daa35f30d
cb7330544c0551861a7b0e0c63d53492e30d2526,cb733054,Improve log messages for EventLogging.,"Improve log messages for EventLogging.

When I'm testing what events are transmitted and to what schemas, it can get
really confusing. This patch tweaks and standardises the log messages recorded
when EventLogging events take place, so that it's easier to see from logcat
what is being transmitted to where.

Change-Id: I03e92aecf4a5a056b65ffa89b01ad8336da34193
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1416553205,1416605915,275b8830682847990aa3d1659b42919d23358227
7039e006ebb3e4ade3572b8d06198780daf910ce,7039e006,Remove W logo icon,"Remove W logo icon

Change-Id: I127e103f16f6f424bbba2bb9b20c3d9c20edc966
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416605850,1416605850,af18e4f11b4959b2db8965bd0374749daa35f30d
8ade2b65b5c0acf56a9366f6f2658e81daa19963,8ade2b65,Avoid IndexOutOfBoundsException in when loading page,"Avoid IndexOutOfBoundsException in when loading page

Bug: 73404
Change-Id: I29ce4a6f682828a1d113246bf63e71b79cb2bec5
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416588765,1416589364,af18e4f11b4959b2db8965bd0374749daa35f30d
af18e4f11b4959b2db8965bd0374749daa35f30d,af18e4f1,Add Javadoc comments to WikidataCache.,"Add Javadoc comments to WikidataCache.

The methods in  WikidataCache are quite complicated, and it might not be
outwardly clear which ones are best to use for any particular purpose.

This patch adds Javadoc comments to the class so that it's a bit clearer how
to use it.

Change-Id: I2d0595c99a42592bde68114f1e6db2cb14686255
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1416545923,1416546253,275b8830682847990aa3d1659b42919d23358227
275b8830682847990aa3d1659b42919d23358227,275b8830,Add event logging for suggested pages.,"Add event logging for suggested pages.

(Not hooked up to anything yet, but ready to go)

Change-Id: Ifbe41ce447dc7040d9ea005ed0853be5b8bbb302
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1416511107,1416511107,a9236b680e1fb372e0c0c169f0fbacfee88c2a4f
a9236b680e1fb372e0c0c169f0fbacfee88c2a4f,a9236b68,"Merge ""Avoid NPE when going from search to another page""","Merge ""Avoid NPE when going from search to another page""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416497333,1416497333,"c785c34be2a7c58a5980eb4f18b450d8722f9be7,f6b9f26f9baf31f64b81ac7c352547ea181a7701"
c785c34be2a7c58a5980eb4f18b450d8722f9be7,c785c34b,"Merge ""Ensure Wikidata description is always shown in correct language in lead image""","Merge ""Ensure Wikidata description is always shown in correct language in lead image""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416494946,1416494946,"3facec3f583c897281ade56024386855a18a4a3d,5e1f56dc3c60fbeb69d3d9bafdcc3927ccdbc52b"
f6b9f26f9baf31f64b81ac7c352547ea181a7701,f6b9f26f,Avoid NPE when going from search to another page,"Avoid NPE when going from search to another page

java.lang.NullPointerException
at org.wikipedia.Utils.hideSoftKeyboard(Utils.java:171)
at org.wikipedia.search.SearchArticlesFragment.navigateToTitle(SearchArticlesFragment.java:481)
at org.wikipedia.search.SearchArticlesFragment.navigateToTitle(SearchArticlesFragment.java:476)

Change-Id: I763a4b1c2f4acbc257930eab97206843478f10e3
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416465268,1416465268,61602eb6ff3c46f94a92b3d5abf56df58e326c1a
3facec3f583c897281ade56024386855a18a4a3d,3facec3f,Use continue parameter to avoid API warnings.,"Use continue parameter to avoid API warnings.

So, the server doesn't need to spit out those unnecessary warnings
about new continuation syntax.
This warning seems uncalled for for queries that don't provide batching.

Change-Id: If9ac1a113ef99eacad412a9164257a7c054b4697
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416463333,1416463333,61602eb6ff3c46f94a92b3d5abf56df58e326c1a
5e1f56dc3c60fbeb69d3d9bafdcc3927ccdbc52b,5e1f56dc,Ensure Wikidata description is always shown in correct language in lead image,"Ensure Wikidata description is always shown in correct language in lead image

Right now, if you tap on ""Read in other languages"" on an article and choose
another language, the Wikidata description is displayed in the language you
just came from. This is because when the page in the other language is loaded,
the description is fetched in the primary language of the app and not in the
language of the actual page.

This patch:
* Refactors WikidataCache to allow you to load descriptions in a different
language from the primary language of the app, if you want to.
* Refactors WikidataCache to only actually cache results if the result is in
the language the app is set to, so that fetching a result in a different
language for a single page doesn't cause that description to appear in the
wrong language in places like search.
* Changes the lead image code to use this refactored code to fetch the
descriptions in the language of the article, rather than the default language.

Bug: 73598
Change-Id: If85a6f3d15a9758b1b8efc6faf96032893dc35df
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1416379931,1416449271,61602eb6ff3c46f94a92b3d5abf56df58e326c1a
61602eb6ff3c46f94a92b3d5abf56df58e326c1a,61602eb6,Add SuggestionsTask,"Add SuggestionsTask

and refactor the getter for wikidataDescriptions
Also only ask for descriptions we don't already have.

(Setting primary language to English for the test. Long
term we should pass in the language and site.)

Change-Id: I3a05e9d66519a8da4d7b677282fea15b0f96573b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416368720,1416439412,bf727e93fbe74da26757448ad77560881998edd6
bf727e93fbe74da26757448ad77560881998edd6,bf727e93,Allow caller to specify maxResults in FullSearchTask,"Allow caller to specify maxResults in FullSearchTask

Also fix the related tests.

Change-Id: Ic887b9acd041284c80c279f5cb5c7a05f11f3024
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1416347668,1416433849,e7ae1368b9352fd972f2382e04e98be45e32080e
e7ae1368b9352fd972f2382e04e98be45e32080e,e7ae1368,"Merge ""Fix NPE in full text search""","Merge ""Fix NPE in full text search""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416433796,1416433796,"4d8d527136c2b82aea236ce384823b76e9b45eda,c8bf8c19d9533f1d018af0f38babaa23725ee83a"
4d8d527136c2b82aea236ce384823b76e9b45eda,4d8d5271,Swipe to refresh!,"Swipe to refresh!

- Swipe down at the top of a page to reload it.
- Swipe down at the top of the Nearby list to reload nearby pages.

Change-Id: Ib6f893d0a599eecf20fd75a65c16f190fa82dcec
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1416072610,1416433381,6e237a209b5f762dc7abe57c0e577b50dcc3bfa0
c8bf8c19d9533f1d018af0f38babaa23725ee83a,c8bf8c19,Fix NPE in full text search,"Fix NPE in full text search

This is more a workaround. Ideally, this should be fixed on the API level.
It looks like the two lists we're getting from search are sometimes not in sync.

Change-Id: I3cdc931194bf882ab3debdf938c41a2f7ea5478e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416424048,1416424048,9486051ea3bc3f3f2398de44dd68267e08f7e2e3
6e237a209b5f762dc7abe57c0e577b50dcc3bfa0,6e237a20,Remember correct search panel when exiting/reentering search.,"Remember correct search panel when exiting/reentering search.

Bug: 73579
Change-Id: Iaa69891b9dbccf1ff2518840799af25e1550508c
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1416365555,1416365645,9486051ea3bc3f3f2398de44dd68267e08f7e2e3
9486051ea3bc3f3f2398de44dd68267e08f7e2e3,9486051e,"Merge ""Use new continuation API for full text search""","Merge ""Use new continuation API for full text search""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416331591,1416331591,"36d9a3535de319b41edd03c7dfc159304b2dcf44,39284f7702fdd2abc2934576f5833df346359f72"
39284f7702fdd2abc2934576f5833df346359f72,39284f77,Use new continuation API for full text search,"Use new continuation API for full text search

Mainly to future-proof, and to avoid the API sending us this
warning for every query we make:
  Formatting of continuation data will be changing soon.
  To continue using the current formatting, use the 'rawcontinue' parameter.
  To begin using the new format, pass an
  empty string for 'continue' in the initial query.

I found some hints for the new continuation API here:
http://www.mediawiki.org/wiki/API%3aQuery#Continuing_queries
Still, the documentation could have been better there if it had use actual
HTTP requests as examples.

Change-Id: I705f4db4855db4de4d062aa2ac808fcfe0cecb99
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416261139,1416329940,1bdf3d14de3172243709ea8d195de11b3a2a5177
36d9a3535de319b41edd03c7dfc159304b2dcf44,36d9a353,"Merge ""Show confirmation dialogue when users click on links in preview.""","Merge ""Show confirmation dialogue when users click on links in preview.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416329832,1416329832,"da945eb7d4dbba491cdfaf24dafd42d99b77e547,205d8937be8031c6d0f860fc8ba3cc8a1ed4880d"
da945eb7d4dbba491cdfaf24dafd42d99b77e547,da945eb7,Tame the anger of the onboarding buttons.,"Tame the anger of the onboarding buttons.

Apparently API 21 defaults button text to all-caps!
So, let's not do that.

Bug: 73543
Change-Id: I3cfcf8352c03fd213cab6fd1a9df1455afdf0bf9
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1416277760,1416329746,4b7b28495b8e09517f107a373d43b5e76770699a
4b7b28495b8e09517f107a373d43b5e76770699a,4b7b2849,Update placeholder image for page title lists.,"Update placeholder image for page title lists.

(consistent with Mobile Web)
(modified SVG file to have transparency outside the page icon, so that it
looks better in Dark mode)

Bug: 73525

Change-Id: I521ef89e5058d25062e7a8831f9ab1ecde766c31
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415027384,1416329437,cdb08b63ed9a6a4c1b4d2b92969af7cf51b95f59
205d8937be8031c6d0f860fc8ba3cc8a1ed4880d,205d8937,Show confirmation dialogue when users click on links in preview.,"Show confirmation dialogue when users click on links in preview.

Currently, if you tap on a link during preview, you leave your edit and go to
the page you clicked on. The mental model here is actually a bit unclear. In
any case, leaving your edit when you tap on a link is quite jarring, and the
fact that there's no warning before leaving makes it worse.

In absence of more tightly refining the mental model, this patch simply throws
up a confirmation dialogue when a user taps on a wikilink during preview, and
asks them whether they really want to leave the edit workflow or not.

Change-Id: I4e651ad7a548db17702a6165b44b6caf56c93d4e
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1415664820,1416329179,b9c35806202156e4d97e61bcc7f85083e37404b9
cdb08b63ed9a6a4c1b4d2b92969af7cf51b95f59,cdb08b63,"Merge ""Bring empty screen in nearby back""","Merge ""Bring empty screen in nearby back""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416320857,1416320857,"4a5f4d0653e1a0a8ac4936c6704d20c79fdfd2a1,86999dbb124ade846a933978ebf2df2469cf5da3"
86999dbb124ade846a933978ebf2df2469cf5da3,86999dbb,Bring empty screen in nearby back,"Bring empty screen in nearby back

Instead of throwing an exception just return the empty list,
so the empty layout will be shown when there is no
query object in the JSON response.

 Also removed unused variable.

Change-Id: I8ea09f3b51dd543f96d5f0b128465dd11600b790
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416269880,1416269880,1bdf3d14de3172243709ea8d195de11b3a2a5177
4a5f4d0653e1a0a8ac4936c6704d20c79fdfd2a1,4a5f4d06,Fix possible NPE in Nearby,"Fix possible NPE in Nearby

When coming back to app or rotating.

java.lang.NullPointerException
at org.wikipedia.nearby.NearbyFragment.onCreateOptionsMenu(NearbyFragment.java:496)

Change-Id: Ie1d5dcf488056036ab836e34d696d39afa2f21d1
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416267226,1416267226,1bdf3d14de3172243709ea8d195de11b3a2a5177
1bdf3d14de3172243709ea8d195de11b3a2a5177,1bdf3d14,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: I56ced92ceda382e50de016e3fd22c7f5bc710064
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1416250248,1416250248,735efebfb6eb3dd4b22f9cdbfd04dd118092a6e4
735efebfb6eb3dd4b22f9cdbfd04dd118092a6e4,735efebf,Fix Nearby compass background when switching dark/light theme.,"Fix Nearby compass background when switching dark/light theme.

Bug: 73445
Change-Id: Id413559b282fb1bc2c0d15e30a2644bd8561816c
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1416244443,1416249463,b720f4e22c0cc1d58d6ca492b1fed644ff947f06
b720f4e22c0cc1d58d6ca492b1fed644ff947f06,b720f4e2,Implement syntax highlighting in Edit window.,"Implement syntax highlighting in Edit window.

- For now, only change the color of Templates to grey.
- And only enable it in non-production builds.
- Added unit test for verifying highlighting for Templates.

Change-Id: Id97ff300e18fdafcedc9ca78ab5d4dc4d85268b4
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1401889819,1416244388,ead7f1a1f6f37a4de1245decaf60a65f1f8def70
ead7f1a1f6f37a4de1245decaf60a65f1f8def70,ead7f1a1,"Merge ""Full text search results in correct order""","Merge ""Full text search results in correct order""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1416242878,1416242878,"50473e158cdfb9a926a1aba9e4de5e4352060962,e41c6a4817adfe00a5ddfeaeb5a5dfba8d27b275"
e41c6a4817adfe00a5ddfeaeb5a5dfba8d27b275,e41c6a48,Full text search results in correct order,"Full text search results in correct order

Also avoiding an extra request per full text search to get the thumbnail URLs.
This should make the thumbnails appear much faster.

Using similar request as iOS app.

Bug: 72781
Change-Id: Ic6742bd8ae796c1c0ee4879e22cae0063efd564b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416094958,1416242658,872cdd032d69d7df68f96bb5a5712c0251a4f028
50473e158cdfb9a926a1aba9e4de5e4352060962,50473e15,Fix possible crash(es) on screen rotation in search fragment.,"Fix possible crash(es) on screen rotation in search fragment.

Change-Id: Ib7ed54949f2aa627e15cbd2987f4c3e5e96ff5f9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1416075085,1416075085,872cdd032d69d7df68f96bb5a5712c0251a4f028
872cdd032d69d7df68f96bb5a5712c0251a4f028,872cdd03,Correctly display MathML fallback images.,"Correctly display MathML fallback images.

Also update inverting of colors in Night mode for math images.
Also fix possible bug (unrelated) when collapsing tables. On some devices
(i.e. mine) the ""element.children === null"" check doesn't work.

Change-Id: I3e10a9a5955e9ab7de5710f51456db79c4b25288
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415987910,1416008073,16f756dea6dcc38255dd634ad39c30d279b1beb0
16f756dea6dcc38255dd634ad39c30d279b1beb0,16f756de,Fix possible crash(es) on screen rotation.,"Fix possible crash(es) on screen rotation.

- One crash may happen in NearbyFragment, where we call
  invalidateOptionsMenu (unnecessarily) when we're no longer attached to
  the activity.
- Another similar crash may happen in PageViewFragment.

Change-Id: I1b3330185e5b54cbb16e064108fe35c141c901ca
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415993700,1416001524,a2f9f6f01c4c55b5b8bc99fd996d201c0ebd3dd5
a2f9f6f01c4c55b5b8bc99fd996d201c0ebd3dd5,a2f9f6f0,"Migration to Toolbar, and 5.0 support <3","Migration to Toolbar, and 5.0 support <3

- Upgrade target SDK to 21
- Upgrade build-tools to 21.1.1
- Upgrade support library to 21.0
- Implement Toolbar to take the place of the ""old"" ActionBar
- Delete drawables and styles related to the old ActionBar
- Bring back the old quick-return handler, since the Toolbar is a regular
  ViewGroup now.

Notes:
- I gave the Toolbar a manual drop-shadow, since the AppCompat library
  does not yet support the ""elevation"" api. Once it becomes supported, we
  can use setElevation().
- The Settings window (PreferenceActivity) doesn't have an ActionBar,
  since that's not supported by the AppCompat library either. We may need
  to manually give it a Toolbar, just like in the Main activity.

Change-Id: I9a00c49dd2544d7d2b1990028db2fb8ee1ce97d4
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1414292800,1415996030,bd726ad33965e8083e6827b0481380f7571c6f1f
bd726ad33965e8083e6827b0481380f7571c6f1f,bd726ad3,Prevent pages from being horizontally scrollable.,"Prevent pages from being horizontally scrollable.

On pages with really wide images or tables, the page becomes annoyingly
scrollable horizontally, which ruins the experience of scrolling the page
up and down, when it starts drifting left and right.  This handles two
cases that can potentially make the page scrollable horizontally:

- Detects large divs that have an explicit width that is larger than the
  viewport width, and sets their ""overflow"" style to ""auto,"" so that the
  div itself becomes scrollable, instead of the entire page. Note: this
  only applies to API >10 (has no effect on API 10)
- Detects math formula images, which are often wider than the viewport
  width, and explicitly sets their width to fit within the viewport. The
  formulas will still be readable, but will simply appear ""smaller.""

Change-Id: I47e9b616c3cfc7f6f0f04f56f0f02be4da69e932
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1412886961,1415985869,d74f520feaad86abb4925e243dbfc5971d9e559f
d74f520feaad86abb4925e243dbfc5971d9e559f,d74f520f,"Oops, don't fetch the lead image twice!","Oops, don't fetch the lead image twice!

Change-Id: Ia9f8ff91652bc031f278915fe7c76b5cd35f7932
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415983798,1415985266,a5916719f2e97a2d04b868a76bb098a6fc990446
a5916719f2e97a2d04b868a76bb098a6fc990446,a5916719,Fix Main Page title hiding in 2.3,"Fix Main Page title hiding in 2.3

Issue fixed:
On 2.3, the Main page loads fine, but then if I start scrolling it,
the lead image (placeholder) appears, and fills up the whole screen!

Change-Id: Ic748994c955d85bdf877c3f31668db5e8b60680a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415928094,1415984897,3b820f02bc24c529b10059ad8a0b13ca9927892e
3b820f02bc24c529b10059ad8a0b13ca9927892e,3b820f02,"Merge ""More TranslationTest improvements""","Merge ""More TranslationTest improvements""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1415983655,1415983655,"0b36a6c777eacf21357867873bafffc796a29692,cfc450a2e271e593eaee4fddfec9e5796703b133"
0b36a6c777eacf21357867873bafffc796a29692,0b36a6c7,"Merge ""Drag some Wikipedia domain stuff into the Site class""","Merge ""Drag some Wikipedia domain stuff into the Site class""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1415983484,1415983484,"f04be27a1500384dfe3690409a377de000ac7559,8be3947f7f4ce459988b970097265614a0dafbcc"
f04be27a1500384dfe3690409a377de000ac7559,f04be27a,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ic8199861df8b7411f570fec833ecf7f17f5cdfcf
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1415969621,1415969621,b65c07daaec6e2863104f80dc7d1c384c121de19
cfc450a2e271e593eaee4fddfec9e5796703b133,cfc450a2,More TranslationTest improvements,"More TranslationTest improvements

Make it more stable by not having to explicitly ignore
several locales for the numeric formats.

Also checking a list of possible parameter formats.

Change-Id: I5c85be3f712f66fae81b3934a3a168c15a8c2814
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415939790,1415946186,b65c07daaec6e2863104f80dc7d1c384c121de19
b65c07daaec6e2863104f80dc7d1c384c121de19,b65c07da,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: I81d67dc1edeafcb86ba7c1777a270d8fb019d7cd
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415945315,1415946089,d5c523b246d3ba90e58b02ab3554bb607c356cb7
d5c523b246d3ba90e58b02ab3554bb607c356cb7,d5c523b2,Removed unused menu file,"Removed unused menu file

Change-Id: Ib0875511da9dc8104b023a27bfb618b82cf8b62c
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415943431,1415945704,6f7cd0a8e47e25d1a817b43c2a8f4e2b7ae6efea
6f7cd0a8e47e25d1a817b43c2a8f4e2b7ae6efea,6f7cd0a8,Use menu_clear_all_recent_searches string in translations,"Use menu_clear_all_recent_searches string in translations

The English string stayed the same but the resource name was changed earlier today.
Using the same name for the translations in this case should be fine.
But I fuzzied them anyways.

Change-Id: I3be8b9f01369e3934828917f8707bc4a9f50d445
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1415944150,1415944318,bdf766b14376699a0771f79e22b2ef736038a713
bdf766b14376699a0771f79e22b2ef736038a713,bdf766b1,Don't show title or lead image block on Main page(s).,"Don't show title or lead image block on Main page(s).

Change-Id: I1696eca96e755b67a5b1fb848490cc43881685a5
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415848455,1415922587,44f80d572370a6c4c4c69b8b1b60f2a0068fa2e9
44f80d572370a6c4c4c69b8b1b60f2a0068fa2e9,44f80d57,Styling tweaks for Search.,"Styling tweaks for Search.

- Make Title/Full buttons fill up the whole width, and update the button
  background to match the currently selected search type.
- Put ""delete recent"" button outside of ActionBar menu, to the right of
  ""Recent searches"" text.

Change-Id: I21c5faa5de57e3bd4324810e77236f787b2144d0
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1415910657,1415921545,62afa4abce16a0e4d2faf2c15976bd57d9bff052
62afa4abce16a0e4d2faf2c15976bd57d9bff052,62afa4ab,"Merge ""Fix issue where some disambig items were not picked up""","Merge ""Fix issue where some disambig items were not picked up""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1415920094,1415920094,"b476bc5bb4cd46961ac4b9a0643e533196fba20e,dcc08a3dd8c886a8a218ed909fc7c0a59fa28ae1"
b476bc5bb4cd46961ac4b9a0643e533196fba20e,b476bc5b,"Merge ""Fix translations and add more tests for them""","Merge ""Fix translations and add more tests for them""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1415919902,1415919902,"b0d2d9aed21d3bec8f15f05cb15aae34a99ae13f,4cc966ea11e27b699255f2333ff101a14fc0fcd4"
b0d2d9aed21d3bec8f15f05cb15aae34a99ae13f,b0d2d9ae,"Merge ""Manual import of translations from TWN""","Merge ""Manual import of translations from TWN""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1415919875,1415919875,"dfe92e1e2140670066011dd68b6c274c4462822b,d779ebd40e47e8c66df781e6dc7d62809ce75fec"
4cc966ea11e27b699255f2333ff101a14fc0fcd4,4cc966ea,Fix translations and add more tests for them,"Fix translations and add more tests for them

Checking now if there are HTML tags iff there are any in en.
Better failure output.

Change-Id: I3664c56cb6282b3b60b312b1f27e7d26f87f8d01
(cherry picked from commit fdb420ade518b886818381e71d170acc1c76318b)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1415911524,1415919525,d779ebd40e47e8c66df781e6dc7d62809ce75fec
8be3947f7f4ce459988b970097265614a0dafbcc,8be3947f,Drag some Wikipedia domain stuff into the Site class,"Drag some Wikipedia domain stuff into the Site class

So it's (mostly) all in one place and changing some code to make it target a LAN wiki is easy.
This means you basically just have to change 5 methods in the Site class to get it to run on your
own wiki. (different API endpoint URL, no HTTPS, no external load.php, change of domain in forLang
and isSupportedSite)

Doesn't touch EventLogging or MobileApp stuff

Relies on I4b54b236

Change-Id: I8ee046f5f5b25b81db4b5b039503e8ec1e11ceb0
",,,,Alex Monk,krenair@gmail.com,Alex Monk,krenair@gmail.com,1412542575,1415919452,d5490b3ae4c15215d3333c9d0677d79f14555a15
dfe92e1e2140670066011dd68b6c274c4462822b,dfe92e1e,Hide IPA.,"Hide IPA.

Transforms an IPA span into a clickable icon that displays the pronunciation in a separate dialog box.

Note: only handles a single type of IPA span (they are not very consistent across different articles). More invetigation to follow.

Change-Id: Ie084658807cfa7037ee14c6b1a991cc77ac58391
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1412803116,1415917963,ef5073b81aacd33584cf17d1b778d01a9712e514
ef5073b81aacd33584cf17d1b778d01a9712e514,ef5073b8,Scroll all the way up when first section in ToC clicked.,"Scroll all the way up when first section in ToC clicked.

Also properly update index.html and preview.html in the www folder to
remove zoomability, viz: https://gerrit.wikimedia.org/r/171850

Bug: 73327
Change-Id: Icd9c15244ca79683f3817c66ff430d7351c040f8
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415892257,1415916721,ab96f9bc783cf93d7dd7a9417e5d6b9cb16beedb
ab96f9bc783cf93d7dd7a9417e5d6b9cb16beedb,ab96f9bc,Clear Wikidata cache when switching languages.,"Clear Wikidata cache when switching languages.

Bug: 73349
Change-Id: Id75c15cd2f1a3f36df3b85639a799a6072293f3f
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415891448,1415916648,8d5dc8449338de4999e467b0c6ffbd943d1fb73e
dcc08a3dd8c886a8a218ed909fc7c0a59fa28ae1,dcc08a3d,Fix issue where some disambig items were not picked up,"Fix issue where some disambig items were not picked up

This was due to an incorrect query selector used.
[[en:Test]]'s disambig link is not directly under the hatnote div.

Bug: 73393
Change-Id: I1aa2c91298bb88ac62f44882fc53323fc216c8ac
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1415916259,1415916286,8d5dc8449338de4999e467b0c6ffbd943d1fb73e
d779ebd40e47e8c66df781e6dc7d62809ce75fec,d779ebd4,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: Ib9c87c0c4fd6492c11c87b99a87cd9d383c6ad94
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415837745,1415911080,d5490b3ae4c15215d3333c9d0677d79f14555a15
8d5dc8449338de4999e467b0c6ffbd943d1fb73e,8d5dc844,Make ThemeChooser dialog inherit from BottomDialog.,"Make ThemeChooser dialog inherit from BottomDialog.

Change-Id: I78bcd14e181d7c1ea736f3f5b84dcfdb9804b5ab
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1415899668,1415899668,d5490b3ae4c15215d3333c9d0677d79f14555a15
d5490b3ae4c15215d3333c9d0677d79f14555a15,d5490b3a,"Merge ""Capitalise first letter of Wikidata descriptions.""","Merge ""Capitalise first letter of Wikidata descriptions.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1415890540,1415890540,"89f06b9328c1238f8e118ee00bfb2a4e584a6b16,bbfa6f09e006aaf77dbf4a230068828436cd427f"
89f06b9328c1238f8e118ee00bfb2a4e584a6b16,89f06b93,"Merge ""Change Other meanings string back to Similar pages""","Merge ""Change Other meanings string back to Similar pages""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1415833596,1415833596,"5e287e26255ccdea0a5aba03ca13e4222d477932,451d9b8e3e6128630e96c44ed57fa053fa83c797"
451d9b8e3e6128630e96c44ed57fa053fa83c797,451d9b8e,Change Other meanings string back to Similar pages,"Change Other meanings string back to Similar pages

Change-Id: I3deb60e3390a35b35100c3ac647a1cd77222e00d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1415833261,1415833261,b2f3d1d748d5303ad8d3a1ceb3dfe4817d686752
5e287e26255ccdea0a5aba03ca13e4222d477932,5e287e26,Missing qq string,"Missing qq string

Change-Id: I307ed850f25900ec1dc3f4f4fac2ada9d86dcf77
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1415830157,1415830157,b2f3d1d748d5303ad8d3a1ceb3dfe4817d686752
b2f3d1d748d5303ad8d3a1ceb3dfe4817d686752,b2f3d1d7,Fix reloading of page after editing.,"Fix reloading of page after editing.

Bug: 73314
Change-Id: Icfe16cec59f18d97e773ff3e08cdcea812ae9f5a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415824972,1415829834,e0d3b3c5729ce150fedf5257af51b506164dfe7f
e0d3b3c5729ce150fedf5257af51b506164dfe7f,e0d3b3c5,Face detection in lead image.,"Face detection in lead image.

A few notes so far:
- on my test device (Galaxy S4), detection takes between 0.5 and 3
  seconds. May end up being too slow on other devices.
- fortunately, this will be easy to disable/reenable if necessary.

TODO: research a better way of passing the bitmap from Picasso directly to
the FaceDetector. Right now, we have to create an intermediate bitmap,
because the FaceDetector requires a 5-6-5 bitmap to work properly.

Change-Id: Ic255a0974345270c10164df84508527b6f2767fc
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414266525,1415829308,43249999d6762a4a4429c0fff0dcd603c2bb4b31
43249999d6762a4a4429c0fff0dcd603c2bb4b31,43249999,Fix possible crash in full-text search.,"Fix possible crash in full-text search.

Change-Id: I1c86be495aa7ecfb6640c269016040ca06286364
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1415825575,1415825575,26d1b82fcf2da62ac7282d5d292b8cc184c99145
26d1b82fcf2da62ac7282d5d292b8cc184c99145,26d1b82f,Final styling tweaks/fixes for lead images / wikidata description.,"Final styling tweaks/fixes for lead images / wikidata description.

- Updated spacing between page title and description
- decrease line spacing of the page title (only for API >10)
- fix wikidata animation for API 10

Change-Id: I7c370c090854e9c4121a10d43810ec1d5cc5f0a4
",,,,Dmitry Brant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1415398307,1415814718,9cd1c1c942e63ffd84e02d3ae254a8ed157b7539
9cd1c1c942e63ffd84e02d3ae254a8ed157b7539,9cd1c1c9,Make infoboxes (and other tables) collapsible.,"Make infoboxes (and other tables) collapsible.

- Refresh css styles with pending changes from MobileApp extension.

Change-Id: Id0ab8550e1d2bd165a68a29a9551aee1e6d8e748
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1412789471,1415806583,bcdf459f340d5808f72eeab6def8196343d6607c
bcdf459f340d5808f72eeab6def8196343d6607c,bcdf459f,Remove pinch-zoom in the WebView.,"Remove pinch-zoom in the WebView.

Finally figured out (I think) why find-in-page was randomly zooming the page by small amounts.

Change-Id: Idd57d9d7264b9c530b7e461ad26f7ecf30f586ba
",,,,Dmitry Brant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1415379452,1415762660,559441d8569b3a439dae42f1f49937111bb006f0
559441d8569b3a439dae42f1f49937111bb006f0,559441d8,Faster up/down animations for bottom dialogs,"Faster up/down animations for bottom dialogs

Change-Id: I7814aa7541491b39fe7136e7d38e9886264232ca
(cherry picked from commit 50a1ff820f2a0aa222388170caf6e420346f5d77)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1415684496,1415685814,774d141d29d956fc815191d9631d416a9e8036f3
774d141d29d956fc815191d9631d416a9e8036f3,774d141d,Page info dialog header click feedback + clickable,"Page info dialog header click feedback + clickable

- Make the TextView into Buttons
- Disable the button that doesn't change the view
- Add selector to provide pressed feedback
- Make clickable by removing isEnabled() {return false;}

Change-Id: I9f38a6dca0f062bfe7cf2349109a340be1b77b01
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415659579,1415682754,3ecf9ea82b9443dfa1d5a4e7bdbae00968754d53
3ecf9ea82b9443dfa1d5a4e7bdbae00968754d53,3ecf9ea8,"Disambig items have thumbnail, title, and Wikidata description","Disambig items have thumbnail, title, and Wikidata description

Collecting the disambig titles and the link html in JS code
to avoid having to parse the HTML in Java.

Using page titles to request page images (thumbnails) of
the disambig items.

Using page titles to request wikidata IDs from Wikipedia,
then using the Wikidata IDS to request Wikidata descriptions.

TODO for later:
The page images cache should probably be centralized and refactored.

Change-Id: Ic06de893a4ff6aa3faad57d7999ebf5f74b82d0a
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415386655,1415682743,f833aa6358958ef71a064640cb889cf381ea6926
f833aa6358958ef71a064640cb889cf381ea6926,f833aa63,Left/right animation inside page info dialog,"Left/right animation inside page info dialog

Now have two different ListViews inside a ViewFlipper
and animate the transitions between them.

Change-Id: Id9dba17d6f44c8a77ab1aac5ac370a02828972a3
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415322729,1415682737,da7245c8e4fee64fb4794c82b4171adf38454a62
da7245c8e4fee64fb4794c82b4171adf38454a62,da7245c8,Slide up/down animations for BottomDialogs,"Slide up/down animations for BottomDialogs

Change-Id: Id496b25b7b412986b9c277c5ff2a3f9391bfb771
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415306318,1415682731,0fa7c776111c223e4959743cc51fc4d78b8cfda0
0fa7c776111c223e4959743cc51fc4d78b8cfda0,0fa7c776,Disambiguation and page issues dialog on bottom,"Disambiguation and page issues dialog on bottom

Change-Id: If216e2b73cfc94184fca64c384575a5d1d903add
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1415257051,1415682709,b9c35806202156e4d97e61bcc7f85083e37404b9
b9c35806202156e4d97e61bcc7f85083e37404b9,b9c35806,"Change width of tappable area for ""Skip"" in OnboardingActivity.","Change width of tappable area for ""Skip"" in OnboardingActivity.

We're seeing a rather large drop off rate on the onboarding screen, and it was
pointed out that the tappable area of the ""Skip"" button is actually much
smaller than the other buttons because it's a text view.

This patch changes the tappable area of the skip button to be much wider so
that users are more easily able to skip onboarding without having to tap
exactly on the skip text.

Change-Id: I93e8c43a50029a7096c20a107b3591dbe392665f
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1415255026,1415589699,88e57a338373bd0bb3ee496ed6c8c2a76121c032
bbfa6f09e006aaf77dbf4a230068828436cd427f,bbfa6f09,Capitalise first letter of Wikidata descriptions.,"Capitalise first letter of Wikidata descriptions.

This patch capitalises the first letter of Wikidata descriptions after they're
retrieved from the API. It looks better that way. :-)

Change-Id: I2056d71ca56fa2a76058f0fee2c1b81471005c68
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1415410856,1415411597,88e57a338373bd0bb3ee496ed6c8c2a76121c032
88e57a338373bd0bb3ee496ed6c8c2a76121c032,88e57a33,Wikidata description under page title.,"Wikidata description under page title.

- Created a more centralized cache of Wikidata descriptions, mapped to
  q-numbers, and accessible from other classes.
- Updated the full-text search fragment to make use of this cache.
- Added description text under page title in lead image view.
- Added a nice animation to the page title when the description becomes
  available.

Change-Id: I8136bd9a358231884e1e47b027f4ad6e95609570
",,,,dbrant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1414945153,1415376842,71e3a6a1ca7047d2e34d7093196dca04cdbb8fc8
71e3a6a1ca7047d2e34d7093196dca04cdbb8fc8,71e3a6a1,Fix tests related to PageProperties,"Fix tests related to PageProperties

- Also fixed error in EditPreview test.
- Also fixed Page .equals test.

Change-Id: Idafb44bf8b0ef9e8e2ea741615f14c41e9a3263b
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1415219467,1415219779,8d899d8600d470cf9bd0a5c3c7200f44c018b975
8d899d8600d470cf9bd0a5c3c7200f44c018b975,8d899d86,Make error messages in account creation slightly more prominent.,"Make error messages in account creation slightly more prominent.

Right now, when a user tries to create an account with a username that is
already taken, the app simply displays a little red exclamation mark next to
the username field. When you tap on the username field, an error message is
displayed.

This patch makes it so that when you try the same thing, focus is given to the
username field so that the message displays immediately after the user has
made it, giving the user more feedback about what went wrong. It also does
this for every other kind of message which uses setError().

Bug: 72923
Change-Id: Ia5da8095e3b80463b6cd037bb931202c05369c74
",,,,Deskana,dgarry@wikimedia.org,Dbrant,dbrant@wikimedia.org,1415142740,1415213147,03ec9c9b8cfd05b39776b924a1ff847d3a97ae8d
03ec9c9b8cfd05b39776b924a1ff847d3a97ae8d,03ec9c9b,Only log theme change events if the theme was actually changed.,"Only log theme change events if the theme was actually changed.

Right now the MobileWikiAppAppearanceSettings schema records each tap on the
dialogue for changing themes. This patch changes this, so that only taps that
result in an actual change are logged (e.g. trying to change from light mode
to light mode is not logged).

Change-Id: I11946d63514957b06947d4870e591f2c2b03e643
",,,,Deskana,dgarry@wikimedia.org,Dbrant,dbrant@wikimedia.org,1415144424,1415212803,4ea0706f35bb3fcc3c1bb9045766bcd822d53b1c
4ea0706f35bb3fcc3c1bb9045766bcd822d53b1c,4ea0706f,Change location of apk to releases dir,"Change location of apk to releases dir

Having it outside of the Gradle build folder has the advantage that
the apks don't get removed.
With this change one could invoke multiple release commands
at the right after each other without losing previous apks.
Useful for scripting to build multiple partner apks.

Change-Id: Ibe26856d0214abd09658d387dfaf5f1ede4a3023
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1415046733,1415212546,bd4411f9dab9c033aa6d2c67cc2da2299d18f070
bd4411f9dab9c033aa6d2c67cc2da2299d18f070,bd4411f9,Lead images!,"Lead images!

- Remove screenOrientation hack from PageActivity, and resolve all the
  implications thereof.
- Modify the lead-section API request to retrieve the lead image
  automatically, along with the WikiData id (for future mischief). These
  things are now stored in the PageProperties object.
- Implement lead image in pages.
- Disable lead image in landscape mode for low resolutions.
- Don't show a lead image placeholder when the page doesn't have a lead
  image associated with it.
- Add dark gradient behind page title for better visibility, as well as a
  slight drop shadow on the text.
- In JavaScript, move any images in the lead section to the bottom of the
  section, so that the native lead image is followed immediately by text.
- In JavaScript, remove the page title from the lead section, and move the
  edit pencil to the right of the first paragraph.
- Make the Page object no longer Parcelable, lest someone try to put it
  into an Intent or savedInstanceState.

Things to look into:

- How does Picasso manage its image cache? Now that we're fetching much
  larger images, we should profile Picasso's filesystem usage when caching
  images, since we don't want it to grow too big.

Change-Id: Icec164de0d515a547d1647e06153a84e3b9bc088
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1410280842,1415207998,1c08d266e2c83a38bc72013c29dea5dc8697a87c
1c08d266e2c83a38bc72013c29dea5dc8697a87c,1c08d266,Stop using the Bus unnecessarily.,"Stop using the Bus unnecessarily.

- Don't use the Bus for menu item actions.
- Don't use the Bus for interactions with PageActivity from various fragments.

Change-Id: I908eced66efd252c2a9f63812fb476ee9819bb92
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414958316,1415047846,95e4cdfbaa9e311c4cc481ceea062faf032df28d
95e4cdfbaa9e311c4cc481ceea062faf032df28d,95e4cdfb,Bump versionCode,"Bump versionCode

Change-Id: Ia973656cde31585e8dafaeec462d2513e08b5676
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1415040055,1415040055,07c25beea3e87f5f081075d19fe8382dd31307e3
07c25beea3e87f5f081075d19fe8382dd31307e3,07c25bee,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: I7e846a04843f7a5a57a6f4579fde4e85c2f006e5
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1415034806,1415035652,f16a8455490c3b1cb99732898fd1299021d51ff9
f16a8455490c3b1cb99732898fd1299021d51ff9,f16a8455,Migrate all app install IDs to be the same as the old reading action ID.,"Migrate all app install IDs to be the same as the old reading action ID.

As per the meeting between Product and Analytics, we're migrating all app
install IDs in all app schemas to be the same, so that the tables can be
joined and overlap in users between features can be found.

This patch changes all app install IDs so that they're the same as the install
ID that was previously used for reading actions. That way, the analysis that's
generated on an ongoing basis by analytics will remain unchanged, whereas the
EventLogging data install IDs will all change, but simply go in to new tables.

Change-Id: I747cc77afa63442c98f55ea2851dbd89940a2407
",,,,Deskana,dgarry@wikimedia.org,Dbrant,dbrant@wikimedia.org,1414731188,1415022765,4525955fb7bbdb93f89b6f691fc9ba6866516a19
4525955fb7bbdb93f89b6f691fc9ba6866516a19,4525955f,Use paddingTop instead of marginTop to account for ActionBar.,"Use paddingTop instead of marginTop to account for ActionBar.

On my 2.3 device, marginTop wasn't working, and these fragments were not
offset correctly (topmost content hidden behind the ActionBar).

Change-Id: I0626d6ef520e9712f035e48cbfae7874113f044d
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414769648,1414800726,ff4804d5e04b4926a450b6cffe9ac67a0181c827
ff4804d5e04b4926a450b6cffe9ac67a0181c827,ff4804d5,Update MW API to 1.3-SNAPSHOT,"Update MW API to 1.3-SNAPSHOT

Change-Id: Ia881c3b711224fc053b29642c39c2b72969f431b
",,,,bearND,bsitzmann@wikimedia.org,dbrant,dbrant@wikimedia.org,1414788178,1414789158,e11c4ddf34eb0942ce3cc65c03be765c48b94286
e11c4ddf34eb0942ce3cc65c03be765c48b94286,e11c4ddf,Ensure that build works with the updated java-mwapi.,"Ensure that build works with the updated java-mwapi.

There were a few ""throws"" declarations missing that are now required.

Change-Id: Ie5520cf995219fbd540d6ccaf076d3313e7c61e3
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1414788762,1414788762,c039fd6e5ef13c666cb7784fc03428993ef1e8c5
c039fd6e5ef13c666cb7784fc03428993ef1e8c5,c039fd6e,Fix possible crash involving the main ProgressBar.,"Fix possible crash involving the main ProgressBar.

Slightly refactored and centralized access to the progress bar from
various fragments. Also, posting the progress bar updates to the message
queue, since it could be called from within Activity.onCreate, where on
some devices the progress bar is not yet created.

Bug: 72817

Change-Id: I021123193c8942af52011f1e9c6f347b9c28ed49
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414766719,1414777319,d466c439e80c2fea0fe6a62426ecb1541713a914
d466c439e80c2fea0fe6a62426ecb1541713a914,d466c439,Fix possible crash when detached from activity.,"Fix possible crash when detached from activity.

There were a couple places where an AsyncTask expects an Activity to still
be available, when it may no longer be.

Bug: 72818
Change-Id: Id2e4a17148f794b6db9c459d7a29c8c8c34d99f9
",,,,dbrant,dbrant@wikimedia.org,bearND,bsitzmann@wikimedia.org,1414763970,1414776901,f73cf232bc17c620ee5c2c1f4148f5f31f8052b7
f73cf232bc17c620ee5c2c1f4148f5f31f8052b7,f73cf232,Bump versionCode,"Bump versionCode

Change-Id: Iab59dcedc7c83e31eb0ad6f3f79fc51b6b45d2a4
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1414707735,1414707735,8c0a6878b576990bea7727752447b03c431aa326
8c0a6878b576990bea7727752447b03c431aa326,8c0a6878,Hide recent searches in production (for now),"Hide recent searches in production (for now)

Change-Id: Id07f29b4b7680745afb8bf5291f1907ae89a9b1c
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1414618962,1414696223,411f014fd1c34d69ba74ba7f60cbd1aea1c1f82c
411f014fd1c34d69ba74ba7f60cbd1aea1c1f82c,411f014f,Fix possible crash when fetching Nearby results.,"Fix possible crash when fetching Nearby results.

Looks like the server sometimes replies with no ""query"" object, but no
""error"" object either, which messes up our parsing of it. This way, we'll
abort processing the reply, and show the user a ""could not retrieve
results"" message, giving them a chance to refresh the results.

Bug: 72761
Change-Id: Ia0b33b94adaefdf4b32d360cd5a331d13ba7473b
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1414683572,1414683572,9c2cbaa37f1820b614d9e53de29dab9f9009ec8c
9c2cbaa37f1820b614d9e53de29dab9f9009ec8c,9c2cbaa3,Disable full-text search for production (for now),"Disable full-text search for production (for now)

Change-Id: Ib920c19dd4e09d055c906e705e102dacf7694871
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1414617755,1414617755,bca9acc3983036c754b376e0f1fe21ecd9a3ea09
bca9acc3983036c754b376e0f1fe21ecd9a3ea09,bca9acc3,Bump versionCode,"Bump versionCode

Change-Id: Ic74b2ff61d972fe686ff36d26558e38e3ecd5a58
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1414601966,1414601966,f88bf81c8ae5f8ec6978f9cee29b05e0380c5fd0
f88bf81c8ae5f8ec6978f9cee29b05e0380c5fd0,f88bf81c,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: I336c12cd367877fcb8b4383cc78a445bc3a50942
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1414601615,1414601615,fd9df83e7d255a74b56b89cfef8e445d75c4d14d
fd9df83e7d255a74b56b89cfef8e445d75c4d14d,fd9df83e,A few Search refinements.,"A few Search refinements.

- ""Select all"" search text upon invoking the search fragment.
- Scroll to top of list when search term changes.

Change-Id: Id5af1450c7c97ab07848417eb71d61e59e6a783c
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414424909,1414600376,a83a22088dbac2737fe3220532348dda71bc92d7
a83a22088dbac2737fe3220532348dda71bc92d7,a83a2208,"Check for ""internal error"" when fetching styles from server.","Check for ""internal error"" when fetching styles from server.

Change-Id: Ic2179e81fef573f896357726adc56efbe5196de3
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1412899299,1414600122,93169b295a6b197e91846457aaaa669f1511ce98
93169b295a6b197e91846457aaaa669f1511ce98,93169b29,"Merge ""Add custom channel and package""","Merge ""Add custom channel and package""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1414599988,1414599988,"d3f196adb7c1459f325edc45d009cb71de16648a,782f263dceafee14ae589ad0041c97aee743e80f"
782f263dceafee14ae589ad0041c97aee743e80f,782f263d,Add custom channel and package,"Add custom channel and package

Add ability to specify a custom channel and package name (app id)
for channel partners.
Added a new 'custom' flavor that can take a custom
channel and applicationId.
Removed obsolete make-beta script.

Change-Id: Ia57edb7aa06427a2ce78ddeabf5da6b20e9d7ad7
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1414599509,1414599509,65d6536e68818476471f4d7ef6f6e68069ff316e
d3f196adb7c1459f325edc45d009cb71de16648a,d3f196ad,"Merge ""Allow the user to delete individual history entries""","Merge ""Allow the user to delete individual history entries""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1414594619,1414594619,"0b75fce10d32115c99151e02d5f41605eddbebaa,e9629ed15ab9835f5110088a2309e048523867cc"
e9629ed15ab9835f5110088a2309e048523867cc,e9629ed1,Allow the user to delete individual history entries,"Allow the user to delete individual history entries

Borrows a lot of code from saved pages

Change-Id: I238fb388203d61edf0cd6904c401b687a062e0f5
",,,,Alex Monk,krenair@gmail.com,Alex Monk,krenair@gmail.com,1414515915,1414592767,111f3e6a00075b47ea4dafc59da48d5c8587243d
0b75fce10d32115c99151e02d5f41605eddbebaa,0b75fce1,"Merge ""Change ActionBar search text every time a ""Did you mean"" query is run.""","Merge ""Change ActionBar search text every time a ""Did you mean"" query is run.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1414591347,1414591347,"f33d257b50ee10c6ed20f1178c4dd2810215dde2,a1d67547e4760a776441e13568e529808875619c"
a1d67547e4760a776441e13568e529808875619c,a1d67547,"Change ActionBar search text every time a ""Did you mean"" query is run.","Change ActionBar search text every time a ""Did you mean"" query is run.

When the full text search API thinks you've made a typo, it returns a ""Did you
mean"" result, which is a suggestion for a new search. When you tap on that
result in the app, it runs a new full text search query with that term.

This patch makes it so that when such a ""Did you mean"" query is run, the text
in the search box is updated so that it matches the query that's run, so that
it's clearer to the user how the results match the query that was initiated.

Change-Id: Ib1195b9649e01c46425f1e86523559235c108902
",,,,Deskana,dgarry@wikimedia.org,Dbrant,dbrant@wikimedia.org,1414473630,1414537401,65d6536e68818476471f4d7ef6f6e68069ff316e
f33d257b50ee10c6ed20f1178c4dd2810215dde2,f33d257b,"Add ""address"" to ""IP"" (s/IP/IP address)","Add ""address"" to ""IP"" (s/IP/IP address)

Thanks to Siebrand for reporting this, https://translatewiki.net/wiki/Thread:Support/About_Wikimedia:Wikipedia-android-strings-create_account_blocked_anon_error/en.

Change-Id: I0b20bedc181af173170a4a7173b5f28c4c76d7f7
",,,,Southparkfan,southparkfan223@hotmail.com,Southparkfan,southparkfan223@hotmail.com,1414532515,1414532515,65d6536e68818476471f4d7ef6f6e68069ff316e
65d6536e68818476471f4d7ef6f6e68069ff316e,65d6536e,Fix visibility of dismiss button in ToC tutorial,"Fix visibility of dismiss button in ToC tutorial

The @dimen/wrap_content hack doesn't work on all devices.
Using fixed value instead.

Ideally, the image should be exactly square.
In a later patch the image could be adjusted from
130x128 to 128x128.

Bug: 72595
Change-Id: I02e87782988205ab6e2f8d2ccd8bc0d54858503b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1414527298,1414528243,aafc4722dc4fd261aefdd6290c02521fb9b69d2f
aafc4722dc4fd261aefdd6290c02521fb9b69d2f,aafc4722,Don't expose fragment-specific action items when searching.,"Don't expose fragment-specific action items when searching.

Bug: 72605
Change-Id: Ib204a186fa2a19be79a0b690e04954a77929c3ae
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414510260,1414527445,9c3ce21abb08dadc9fd663b777a273c0c6c6023d
9c3ce21abb08dadc9fd663b777a273c0c6c6023d,9c3ce21a,Avoid invisible search icon in dark mode,"Avoid invisible search icon in dark mode

Bug: 72630
Change-Id: Iff4c34140fae3d8533fbe6686e36b6f933e6c915
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1414516081,1414517724,111f3e6a00075b47ea4dafc59da48d5c8587243d
111f3e6a00075b47ea4dafc59da48d5c8587243d,111f3e6a,"Merge ""Add menu entry to delete recent search entries when in search mode.""","Merge ""Add menu entry to delete recent search entries when in search mode.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1414448944,1414448944,"1c50fd9a3080aaeb62a44bd871d9398a3abad4a3,6bffda6a1e82e864fa9ab262dab1e1b19846f2c1"
1c50fd9a3080aaeb62a44bd871d9398a3abad4a3,1c50fd9a,Refactor handling of shared preferences and feature install IDs.,"Refactor handling of shared preferences and feature install IDs.

This patch changes the shared preferences system of the app so that it's at
the correct level of abstraction. Presently, classes extending Funnel interact
directly with the preference manager to get feature install IDs, and that
should probably be handled centrally in WikipediaApp rather than in each
class.

This patch:
* Makes the SharedPreferences of the app a field in WikipediaApp.
* Instantiates the SharedPreferences field in the WikipediaApp constructor.
* Changes ad-hoc retrieval of the SharedPreferences to use the field instead.
* Creates generic retrieval method for install IDs in WikipediaApp.
* Creates accessor methods for the install IDs, which use the generic method.
* Changes classes that extend Funnel to use the install ID accessor methods.

Change-Id: Ic13b36ba1d4bcc766265f5944eb2f23c95869a8f
",,,,Deskana,dgarry@wikimedia.org,Dbrant,dbrant@wikimedia.org,1414265099,1414445453,775d1a03837c195223316eacc5587067a0e229fc
6bffda6a1e82e864fa9ab262dab1e1b19846f2c1,6bffda6a,Add menu entry to delete recent search entries when in search mode.,"Add menu entry to delete recent search entries when in search mode.

Change-Id: Ic6d6c5d17c99135e02e4a85845bf848c9d63654a
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1414444274,1414444274,775d1a03837c195223316eacc5587067a0e229fc
775d1a03837c195223316eacc5587067a0e229fc,775d1a03,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ie42a121b89563f322dac87271a0ffbe7387c98c0
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1414432650,1414432650,f43433ea08a65fdf019f9ba860a24a8223b00829
f43433ea08a65fdf019f9ba860a24a8223b00829,f43433ea,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: Iee8ca1f3bf9f0798a13d52915fca1c202776a140
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1414423516,1414423516,337ccd256fc7673f2c848b0beaa748c9eb031ed2
337ccd256fc7673f2c848b0beaa748c9eb031ed2,337ccd25,Add Wikidata descriptions to full text results,"Add Wikidata descriptions to full text results

Switch to search generator so we can get the Wikidata IDs
(wikibase_item).

Once we have a list of wikidata IDs we haven't check
descriptions for, send off one request to wikidata to get
the descriptions for the given IDs.

Also updated the item layout for full text search
results to not cut off the descriptions.

Change-Id: I1e20a652a3e3b81301708ab60eeba416bd138af6
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1414189516,1414260123,24548ba1ffccea099b1349df4c1578b70986e18b
24548ba1ffccea099b1349df4c1578b70986e18b,24548ba1,"Merge ""Fix LoginTaskTests""","Merge ""Fix LoginTaskTests""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1414259560,1414259560,"395bdb1db7093f97a2683a6a72753af1147b8c25,390f6636c9e1457e0229df0157ec94ab9cab6ace"
395bdb1db7093f97a2683a6a72753af1147b8c25,395bdb1d,Only check W0 headers for m.wikipedia.org,"Only check W0 headers for m.wikipedia.org

Requires updated mwapi since we now use the API URL
to disable W0 header checking when we go to wikidata.org.

Split the patch I1e20a652a3e3b81301708ab60eeba416bd138af6
into two, since this needs to be merged asap as to not break the build.

Change-Id: I388ec6328b6127d54bc0bb84854cd949efdd732f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1414189195,1414189195,220b5e4a6b17e4c79898ede502c7ce3563a8ed0d
390f6636c9e1457e0229df0157ec94ab9cab6ace,390f6636,Fix LoginTaskTests,"Fix LoginTaskTests

Since the interface EditTokenStorage.TokenRetrievedCallback changed
this test did not compile anymore.

Change-Id: I819f42ba14cf015e6058555c943b6f6959027d92
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1414188661,1414188661,220b5e4a6b17e4c79898ede502c7ce3563a8ed0d
220b5e4a6b17e4c79898ede502c7ce3563a8ed0d,220b5e4a,"Fix ""logout"" preference after crash fix.","Fix ""logout"" preference after crash fix.

(became no longer clickable)
Now giving an onClickListener to a preference only if it doesn't already
have a listener.

Change-Id: I93b25da9485477737f877abae34188d0243bebd4
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414176930,1414179839,98baff922837df69149e3c27ce817ce9e37dc399
98baff922837df69149e3c27ce817ce9e37dc399,98baff92,Fix directionality of edit preview (for RTL),"Fix directionality of edit preview (for RTL)

- Fixed directionality inside the WebView
- Fixed margins of CC icon and Preview text
- Fixed our custom FlowLayout to support RTL

Bug: 72476
Change-Id: I5443d659575dd3dc4801cb8bc661a6f4821eaf31
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1414161298,1414176334,3d853a963b6810a710e7db611b44df609301e3a5
3d853a963b6810a710e7db611b44df609301e3a5,3d853a96,Refresh of bundled styles from MobileApp.,"Refresh of bundled styles from MobileApp.

takes care of, among other things:

Bug: 66322
Change-Id: I4313f680b476c046aa2f2a917f41d2fe435a94cb
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414161925,1414170326,10aab423bc42a04cdcb5a0b8608a6973cbc3c2cb
10aab423bc42a04cdcb5a0b8608a6973cbc3c2cb,10aab423,Implement remote killswitch for disabling full-text search.,"Implement remote killswitch for disabling full-text search.

Change-Id: I691044651d7160fff2cf3adf64a7c105cd2481f2
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414116001,1414169011,e23811b9a35375ccbaba3a3be4c0c8c853cd0ab1
e23811b9a35375ccbaba3a3be4c0c8c853cd0ab1,e23811b9,Catch possible exception when clicking Preference with intent.,"Catch possible exception when clicking Preference with intent.

If the device doesn't have a Browser app installed, it will throw an
exception when trying to launch a VIEW intent from a Preference.

Bug: 70528
Change-Id: I06e791f4eb5126ac5ddb0d850a2a91c84b18c058
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414166653,1414168662,12312a79701ab14368c3ae32f9bb278908802a40
12312a79701ab14368c3ae32f9bb278908802a40,12312a79,Catch remaining cases of SecurityException.,"Catch remaining cases of SecurityException.

Fixes remaining crashes with ""missing INTERNET permission.""

Change-Id: I1edacb2ba4d0bda5466ce9a6f9aab3121eacd8ef
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1414113739,1414158798,2b8589737d45341dce069ddcb99e2ef545663934
2b8589737d45341dce069ddcb99e2ef545663934,2b858973,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I94ffcd0eb1c18ae5d16ebe0416e91ef6a620b56d
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1414093092,1414093092,e99fda63d1524a2a57853b9335efc4bdb7270a34
e99fda63d1524a2a57853b9335efc4bdb7270a34,e99fda63,Make sure fragments that use a Loader have unique IDs.,"Make sure fragments that use a Loader have unique IDs.

Otherwise, things crash!

Change-Id: If24de182878f68bcdff0f838896410b800a73007
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1414087399,1414087847,9ae49833c714e6c2c1d7bbbd5090964702855221
9ae49833c714e6c2c1d7bbbd5090964702855221,9ae49833,Update hamburger icon for RTL.,"Update hamburger icon for RTL.

RTL drawables were still using the old icon, which looks weird.

Change-Id: I1ab320b362498b7590db3c64e18337dcb86f7b4c
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1414077492,1414083763,6f75fc69dbd271c10aca343a2024f43613e94777
6f75fc69dbd271c10aca343a2024f43613e94777,6f75fc69,Fix possible crash when fetching Edit token.,"Fix possible crash when fetching Edit token.

Also cleaned up redundant catching of HttpRequestException, and spelling.

Bug: 71331

Change-Id: I4ba8123196a427a3e737156c1a95aabee7fd2851
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1414080580,1414081911,71f5fddb93d86f8039e0ac35b14266c3adc48fc7
71f5fddb93d86f8039e0ac35b14266c3adc48fc7,71f5fddb,"Merge ""Fix W0 test""","Merge ""Fix W0 test""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1414081562,1414081562,"85eb813e9871dbaa1aa42a6c6e9f5f8c91875cb1,757a73d473aeecdb3d13ccde511c3c6275af8fa9"
85eb813e9871dbaa1aa42a6c6e9f5f8c91875cb1,85eb813e,"Merge ""Recent searches""","Merge ""Recent searches""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1414010299,1414010299,"01721573558b955e9ffde6410eaf61fcbe2693cd,63be27feae8bc191d4545e10659dc41064882434"
63be27feae8bc191d4545e10659dc41064882434,63be27fe,Recent searches,"Recent searches

Store recent search strings in a DB table and display them,
most recently used appearing first.

Change-Id: Icdb28e25c8d7037e7887ed249d47fe5bdbd4d53e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413937658,1414009029,7e17cfb095c3b18f98075b42e1a983b94e9efe09
757a73d473aeecdb3d13ccde511c3c6275af8fa9,757a73d4,Fix W0 test,"Fix W0 test

Change-Id: I8d019aeae51f24fe4e3b0a08fbe933d82933bb99
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1414007611,1414007611,01721573558b955e9ffde6410eaf61fcbe2693cd
01721573558b955e9ffde6410eaf61fcbe2693cd,01721573,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: Ie3e327d06651c89ad7e93c892540b220bc960fb4
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1414006880,1414006880,7e17cfb095c3b18f98075b42e1a983b94e9efe09
7e17cfb095c3b18f98075b42e1a983b94e9efe09,7e17cfb0,Ability to switch between prefix- and full-text search.,"Ability to switch between prefix- and full-text search.

- Reorganized the Search fragment a bit, so that it's a permanent part of
  PageActivity, and pops up instantly on top of the current fragment (does
  not go on the backstack)
- The Search fragment now encapsulates two sub-fragments:
  TitleSearchFragment and FullSearchFragment.
- Not using any kind of ViewPager or tab component... just the two
  fragments overlaid in a FrameLayout, making the code somewhat simpler.
- The Search fragment also contains a blank layout where ""recent"" searches
  will go. (Recent searches appear when the search field is empty)
- Made the size of list items consistent between Title and Full search.
- Made the ""Search"" action bar item part of PageActivity, so that it
  appears globally, no matter what type of fragment is at the top of the
  backstack.

Change-Id: Iede993cbf6569cddc5f40d8f92a6d5a9a85c723f
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1413830940,1414002739,7cf950ebde306299d656c4dc7149806cf078e288
7cf950ebde306299d656c4dc7149806cf078e288,7cf950eb,Fix all funnels to only fire 'start' events the first time they're created.,"Fix all funnels to only fire 'start' events the first time they're created.

User funnels should only fire 'start' events corresponding to user intent, not
to the technical state of whether the activity was destroyed and then
recreated from its savedInstanceState.

This patch fixes all remaining activities so they only fire 'start' events the
first time the activities are created, to figure out true bounce rates.

Change-Id: Icbe1cab39bbda528a795e834196d201146ca9446
",,,,Deskana,dgarry@wikimedia.org,BearND,bsitzmann@wikimedia.org,1413953026,1413994243,f0beec6193fe53d0481e2d120c1a20f6ced312b5
f0beec6193fe53d0481e2d120c1a20f6ced312b5,f0beec61,Support colorized zero-rating croutons,"Support colorized zero-rating croutons

Prior to this patch, zero-rating croutons always had a green
background with black text. Now, the zero-rating croutons will
have background and foreground colors established through
configuration by the partners team and, eventually, by self
service operators.

Change-Id: I3e2361210673bca757dd8de29d446bdca4529a1c
",,,,dr0ptp4kt,abaso@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413935384,1413994024,0de9840d7b82df073c08a78b4aafd9b6ce3a2ca7
0de9840d7b82df073c08a78b4aafd9b6ce3a2ca7,0de9840d,Catch exception when an unknown Parcelable is in our intent.,"Catch exception when an unknown Parcelable is in our intent.

Bug: 72283
Change-Id: Id493b8a8321621d7bb68127fdc383fa631e3d69a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1413911702,1413957346,d30775be3163936412d80a7b51904679a8aebeba
d30775be3163936412d80a7b51904679a8aebeba,d30775be,Fix intermittent NPE in DrawerLayout.,"Fix intermittent NPE in DrawerLayout.

- This required patching one of the components in the actual v4 Support
  library. We'll monitor the bug on Google (that I submitted), and see
  what solution they suggest:
  https://code.google.com/p/android/issues/detail?id=77926
- Also removed FixedFragmentStatePagerAdapter, since we're no longer using
  it.

Bug: 67808
Change-Id: Ia0b1246659c3f89e915350cc80792b545eece4f9
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1413917743,1413918597,45de1124b7ff44413c6e476ed0756e425d02ee92
45de1124b7ff44413c6e476ed0756e425d02ee92,45de1124,"Merge ""Only fire onboarding 'start' event the first time the activity is created.""","Merge ""Only fire onboarding 'start' event the first time the activity is created.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1413906459,1413906459,"6b323fd01655448314aaacdfec5d94558b52d12d,f7cc7767ba0b70be902410a0bcfe393e1236d5a6"
f7cc7767ba0b70be902410a0bcfe393e1236d5a6,f7cc7767,Only fire onboarding 'start' event the first time the activity is created.,"Only fire onboarding 'start' event the first time the activity is created.

Right now, the 'start' event for onboarding is fired every time the activity
is created. This means that if the user closes the app and leaves it in the
background for a long time (and then the activity is destroyed by Android),
the event is fired again when they reopen the app. This should track on a
user-by-user basis, so this is actually pointless.

This patch changes the activity so that it only fires the 'start' event the
first time the activity is created. That way, we can get closer to figuring
out the true bounce rate (on a user-by-user basis, rather than a view-by-view
basis).

Change-Id: I3f8f9e6290e3ab52856e5f39755b61fc6b8de04c
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1413853904,1413906409,b7b0c0e80c7f905cb7388279b5a940c3c6fdaeeb
6b323fd01655448314aaacdfec5d94558b52d12d,6b323fd0,"Merge ""Rephrase the error_network_error string""","Merge ""Rephrase the error_network_error string""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1413905605,1413905605,"065c418c36590d9c57e9ac9061af2d0fe72c37fa,12bd18f60c1e325b6054eb4736599c5b674d94b8"
065c418c36590d9c57e9ac9061af2d0fe72c37fa,065c418c,Fix PreviewTaskTest,"Fix PreviewTaskTest

Change-Id: I57bb210ed99c394ae18d9294f8519e92f2ccbd33
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413840098,1413840098,81fa290916f948ab1206574588c7447076f7fe65
12bd18f60c1e325b6054eb4736599c5b674d94b8,12bd18f6,Rephrase the error_network_error string,"Rephrase the error_network_error string

This string appears when there is no network connection.
There is no reason to show it in the past tense,
because the problem is current.

Change-Id: I37bd86faf5f532c671715747aa821b61579aae4c
",,,,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,Siebrand,siebrand@kitano.nl,1413551286,1413831602,ad583a22c399a19c15fc298ee39c60fe2d567f7d
81fa290916f948ab1206574588c7447076f7fe65,81fa2909,Bump versionCode,"Bump versionCode

Change-Id: I09606c5a62925212e77a3dc515a8093ae59ed3d5
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413827489,1413827489,4afd806c60fcebab7a206876a311850d426a2170
4afd806c60fcebab7a206876a311850d426a2170,4afd806c,Minor translation fix,"Minor translation fix

Fix parameter syntax in pa string resource.

Change-Id: I614a2b30942553f2e1b7c3b5a9c684a25f6bd455
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413826273,1413826273,f4b19d640ef7b4fc5900a135e28d2a5ec8d1a6ee
f4b19d640ef7b4fc5900a135e28d2a5ec8d1a6ee,f4b19d64,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I05f00f369dc2beddda2f766c6197404975ec1641
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1413824872,1413824872,0b6be07694599ea65bfcc1bf0855b782b05e5457
0b6be07694599ea65bfcc1bf0855b782b05e5457,0b6be076,"Merge ""Anchor crouton position in Nearby""","Merge ""Anchor crouton position in Nearby""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1413816309,1413816309,"3f241d7c1dd29dbc38ec72efe54ef9c457500080,43e397c1826b3368c2e0feb90a210c05e35e20cb"
3f241d7c1dd29dbc38ec72efe54ef9c457500080,3f241d7c,"Merge ""Avoid meltdown in setupGeomagneticField""","Merge ""Avoid meltdown in setupGeomagneticField""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1413816231,1413816231,"9c2c26784a6923b03c0b22851e65e0e5960d1926,4a048b98559a5a4f209ec1cd4f5561c9bb337b70"
43e397c1826b3368c2e0feb90a210c05e35e20cb,43e397c1,Anchor crouton position in Nearby,"Anchor crouton position in Nearby

We're using Crouton library to display toasts when
the Nearby feature encounters errors.
Since we moved to an action bar that can be overlaid
those croutons were a bit too low, showing a gap
between the action bar and the top of the crouton.

Also added missing contentDescription in layout file.

Change-Id: I15b825f4933e425d7a0b5992fa1a1d270b2b6475
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413591118,1413591118,9c2c26784a6923b03c0b22851e65e0e5960d1926
9c2c26784a6923b03c0b22851e65e0e5960d1926,9c2c2678,Back to using https for alpha updater,"Back to using https for alpha updater

Change-Id: I84f9ebc22edd07d34f174163694eae197beab1db
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413576139,1413576139,e2b7561b98778f867043f97532f9cfa8296580be
4a048b98559a5a4f209ec1cd4f5561c9bb337b70,4a048b98,Avoid meltdown in setupGeomagneticField,"Avoid meltdown in setupGeomagneticField

Initialize warp stabilizers! ;)

bug: 72091
Change-Id: I73813e41bd4c74e7664c2524dd546a2cdb8797e6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413575081,1413575122,614b6c1f522476e6700fe80db6193882a22e211c
e2b7561b98778f867043f97532f9cfa8296580be,e2b7561b,Alpha updater update,"Alpha updater update

;) Update the URLs for alpha builds.

Change-Id: I8303a446229d464a4c79f63143bec4761c72e9bd
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413571722,1413574183,614b6c1f522476e6700fe80db6193882a22e211c
614b6c1f522476e6700fe80db6193882a22e211c,614b6c1f,Fix/improve Bridge uninitialization.,"Fix/improve Bridge uninitialization.

It looks like removeJavascriptInterface and setWebChromeClient(null) were
not necessary, and were actually causing some strange behavior.

Change-Id: I5d0e14eb2bf552bfdc306c04985a9d6dc8740912
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1413556692,1413573138,3d774fd70f8f15c5c9fa65d5209064a834b82311
3d774fd70f8f15c5c9fa65d5209064a834b82311,3d774fd7,Update prefix search query to be consistent with Mobile Web.,"Update prefix search query to be consistent with Mobile Web.

Ensures that the prefix results appear in the correct order.
New query used by MobileFrontend:
https://gerrit.wikimedia.org/r/#/c/158011/2/javascripts/modules/search/SearchApi.js

Change-Id: I448fa0991edd1dab40942a8cbba8b3af1340615c
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1413553454,1413566301,386f47da21ded548645bf141aaf592d70291ec36
386f47da21ded548645bf141aaf592d70291ec36,386f47da,Use built-in ProgressBar inside the ActionBar when loading page.,"Use built-in ProgressBar inside the ActionBar when loading page.

Replaces the old progress bar centered in the screen.

Change-Id: I72ddca148950c3301c2f4a30ffcf7abee3eddab7
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1413478764,1413564914,9c334dcd016b8620b50a8ab8133eceda750d3f69
9c334dcd016b8620b50a8ab8133eceda750d3f69,9c334dcd,Find in Page as CAB and ActionProvider,"Find in Page as CAB and ActionProvider

Now that we moved to using real action bars we don't want an
extra fragment hanging below the action bar for ""Find in Page"".

I would have preferred to just call webView.showFindDialog()
but unfortunately this is deprecated and not available on GB.

Change-Id: Ib502ed5fefe2c27cd878d4b1d09efe607cdbacc1
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413520917,1413563162,ad583a22c399a19c15fc298ee39c60fe2d567f7d
ad583a22c399a19c15fc298ee39c60fe2d567f7d,ad583a22,Show home-as-up icon instead of hamburger when searching.,"Show home-as-up icon instead of hamburger when searching.

Also added one more case for ensuring visibility of the ActionBar.

Change-Id: I3aeeb68b57d5624d22a9aa460bd1f7670da75a48
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1413464237,1413477796,d8507540c7bccd354037552b26f0c22ffe273ae0
d8507540c7bccd354037552b26f0c22ffe273ae0,d8507540,Fix and update ActionBar icons for Night mode.,"Fix and update ActionBar icons for Night mode.

Also:
- Modified the convert script to pass each png through pngcrush, saving
  about 130KB from the total APK size.
- Modified the color and opacity of ActionBar SVGs to comply with Android
  design guidelines, and have consistent colors in History, Saved Pages,
  Main activity, etc.
- Removed SVG for the hamburger icon.
- Committing all updated PNGs that were affected by this.

Change-Id: I1b22a11ee57b489d013c75a7eee0b2b76d7eb98b
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1413424813,1413476019,d7e73df60dc753f6964127cdf6de7472f863263c
d7e73df60dc753f6964127cdf6de7472f863263c,d7e73df6,"Merge ""Catch MissingResourceException because of [Developer] Accented English locale in Nearby""","Merge ""Catch MissingResourceException because of [Developer] Accented English locale in Nearby""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1413475190,1413475190,"ea9cf1289433b37387aa06f5e02c87cdd849b469,e9521cc32c5313f2d576af306c55f86bd9b58b5b"
e9521cc32c5313f2d576af306c55f86bd9b58b5b,e9521cc3,Catch MissingResourceException because of [Developer] Accented English locale in Nearby,"Catch MissingResourceException because of [Developer] Accented English locale in Nearby

Can't get this language on my device, but should be safe to ignore...

Change-Id: I30076659409aeb44a72718cf08614bbe3c40ca35
OTRS: 7881035
",,,,Alex Monk,krenair@wikimedia.org,Alex Monk,krenair@wikimedia.org,1413473492,1413474325,178149b3f5079e261be8d5b895cdadf6dd021e15
ea9cf1289433b37387aa06f5e02c87cdd849b469,ea9cf128,Catch more general ApiException in Nearby task.,"Catch more general ApiException in Nearby task.

Change-Id: Ic23e46ee0f5ddd1a33cc3bb1f333cd5ee68bfe2a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1413462000,1413473680,1ddbfe7075d0e931f4bff51ab0c2f0f5b9d899a5
1ddbfe7075d0e931f4bff51ab0c2f0f5b9d899a5,1ddbfe70,Fix Bus register/unregister balance.,"Fix Bus register/unregister balance.

Change-Id: Ifbf29ed08d577ebfa34e655bb6ba62017ed46c9a
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1413461591,1413461591,178149b3f5079e261be8d5b895cdadf6dd021e15
178149b3f5079e261be8d5b895cdadf6dd021e15,178149b3,"Merge ""Update to new saved pages icon.""","Merge ""Update to new saved pages icon.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1413459845,1413459845,"b7b0c0e80c7f905cb7388279b5a940c3c6fdaeeb,0957b6f2e9633db47ecd11b32b8e575302f6c2fd"
b7b0c0e80c7f905cb7388279b5a940c3c6fdaeeb,b7b0c0e8,Fix top margin in fragments to account for ActionBar overlay.,"Fix top margin in fragments to account for ActionBar overlay.

Change-Id: I3195aab57502a120f1fea4f8ad5a8db91465e666
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1413427093,1413431847,ec26d4dce0d5f340664d15015d51367b84fccba2
ec26d4dce0d5f340664d15015d51367b84fccba2,ec26d4dc,"Update WP Zero hint in SearchView, and a bit of cleanup.","Update WP Zero hint in SearchView, and a bit of cleanup.

Change-Id: I64fa6b72269ca05a1524072b6ea9b4210acd9ad1
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1413430556,1413430748,4e0f05688adc75da45f0a767e45b2b11ac0c71c4
4e0f05688adc75da45f0a767e45b2b11ac0c71c4,4e0f0568,Hygiene: Back to PageActivity using ThemedActionBarActivity,"Hygiene: Back to PageActivity using ThemedActionBarActivity

To avoid code duplication.
Also moved setting of the icon into ThemedActionBarActivity,
so the icon is set on GB devices for other activities as well.

Change-Id: I248439595b1ada4d71fc8a3849515125103a08ae
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413419676,1413419676,84f8dfaff23f1670bf83d330c02781ee1e1339a0
84f8dfaff23f1670bf83d330c02781ee1e1339a0,84f8dfaf,Force overflow menu icon to be shown.,"Force overflow menu icon to be shown.

...even on devices that have a physical menu button.
Note: does not work on 2.3 devices.

Also removed key handler for the Menu button to bring up the Nav menu, so
that users with 2.3 may access overflow items (or indeed users who are
used to pressing the Menu button to access overflow items).

Change-Id: I2bf46f4ff3e8e952e193addceec4998a95aeefd9
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1413403283,1413411633,cad2c5e557ee27117c16a8758444ba91f00dba35
cad2c5e557ee27117c16a8758444ba91f00dba35,cad2c5e5,Fix for infobox relocation leaving parent table with empty space.,"Fix for infobox relocation leaving parent table with empty space.

Thanks, Monte!

Change-Id: I342157475233bfb0e42585bba553b640d86284d4
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1412966806,1413406811,38821560ba94fd8dbdf77cfff067093e1d14ca3c
38821560ba94fd8dbdf77cfff067093e1d14ca3c,38821560,Highlight the Nav list item that is currently shown.,"Highlight the Nav list item that is currently shown.

Change-Id: I9fd16c5bd3d5c16afeff4b69ff51a892788220bb
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1413405560,1413405560,045fc1a0b110d739b88043d6fb90698bdc958bd4
045fc1a0b110d739b88043d6fb90698bdc958bd4,045fc1a0,Use constant apk file name in Gradle build,"Use constant apk file name in Gradle build

We used to have the Gradle build use time stamps in the name.
Having changing apk names causes weird issues in the IDE.
Multiple people have seen cases where Android Studio complained
about the apk file path not being present.
(""Local path doesn't exist."")

Also:
* The push option was printing: pushing branch 2.0-beta-2014-10-14
even though we're not creating any branches anymore.
* Also updated the release script to do the renaming of the apk file name
  and to update the docs

Change-Id: Ib4395e52760c5a5b8f79ffe24edd662572d02efe
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1413324879,1413403377,c0ed6f3472038b3ded95c376648df3014fdf298a
c0ed6f3472038b3ded95c376648df3014fdf298a,c0ed6f34,Real ActionBar part II,"Real ActionBar part II

- Implement an ActionBarDrawerToggle, and wire it to the ActionBar and nav
  drawer.
- Make the ActionBar hide/show upon scrolling far enough in the WebView.
- Update the hamburger drawable, and also use an xml drawable for the
  ActionBar background, so that we don't need a 9-patch png.

Change-Id: I6060e6acbdbbe6e7f88e1ce247cfb9c964be322e
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1412957904,1413398057,c3afb82ac2fe2b25369c2655cbe82a70a7c851a1
c3afb82ac2fe2b25369c2655cbe82a70a7c851a1,c3afb82a,Use real Action Bar for search bar,"Use real Action Bar for search bar

Switched to Android standard SearchView.
Fixed a crash on GingerBread when onPrepareOptionsMenu was called too early.
Also set the app icon dynamically to avoid a jarring transition between
PageViewFragment and SearchArticlesFragment. Also fixes the ActionBar logo
for GB.

Remaining ToDos in code are marked in code with ""TODO SEARCH"".

Change-Id: I1b69f344da6f851ac5a1ce27ca4c7809350c5c4c
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411660523,1413392339,aef83e94c47a96b347d9d315440aac39607ebd35
aef83e94c47a96b347d9d315440aac39607ebd35,aef83e94,Turn other Activities into Fragments,"Turn other Activities into Fragments

- Things launched from the Nav menu are now Fragments that replace each
  other in the PageActivity container, and create a backstack in the
  FragmentManager.
- Made full-text search into a Fragment
- Made the PageActivity have a real ActionBar (to be built out in the next
  patch), into which the actions of the fragments are added.
- Made sure that savedInstanceState preserves the order of the fragment
  backstack.
- Login activity to be dealt with in another patch...

Change-Id: If9c2c11014745e75f3dbde86a724d555470c8f61
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1411390384,1413384139,f5934fb0de19e026417908b99e4864e267c2a52c
f5934fb0de19e026417908b99e4864e267c2a52c,f5934fb0,Make page browsing into a Fragment.,"Make page browsing into a Fragment.

- The PageViewFragment now sits in a simple container in PageActivity, and
  can be replaced with other Fragments (will lead to Fragment-izing the
  rest of our Activities)
- The PageViewFragment is now a light container for the heavier
  PageViewFragmentInternal object. When a PageViewFragment goes in the
  backstack of the FragmentManager, the ""internal"" object can be fully
  disposed, thus allowing a large number of fragments in the backstack.
- Added a PageCache class, where Page objects are cached upon visiting new
  pages (Page objects are no longer written to savedInstanceState). In the
  future, the PageCache may be written/read from storage across app
  restarts.
- Improved pre-scrolling to a specific offset when going ""back"", by
  scrolling as soon as the section with that offset is loaded.

Change-Id: Icfc7b9a9c7f2cf7fc6f743d419646acb0b8a1a50
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1411148165,1413381219,840bfafeb37b26c0b7b462dd426f233805d9d38e
840bfafeb37b26c0b7b462dd426f233805d9d38e,840bfafe,Fix crash in sorting of nearby pages,"Fix crash in sorting of nearby pages

IllegalArgumentException: Comparison method violates its general contract

bug: 72066
Change-Id: Ife50b225797cf0a471ac29a6db1d676316a7a860
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413349779,1413349779,d956cd6a43593dc69ac1673b7ee8d19fc9a501dc
d956cd6a43593dc69ac1673b7ee8d19fc9a501dc,d956cd6a,Nearby: Don't crash on long press if no maps application is present,"Nearby: Don't crash on long press if no maps application is present

Change-Id: Iff5166b5ce4751a11b277e94ec6986bafcafda2d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1413325944,1413325944,13586b4d4bbf8b87199fe188784c732a7196f9e6
13586b4d4bbf8b87199fe188784c732a7196f9e6,13586b4d,Nearby: Open an intent with geo:// URL if item is long pressed,"Nearby: Open an intent with geo:// URL if item is long pressed

Change-Id: I7f6a2362c8cc10f9cceab72ef84c64c7887bd872
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1413318202,1413318290,724e10b4242db5d557b2739d070d04cc65a3ce84
724e10b4242db5d557b2739d070d04cc65a3ce84,724e10b4,Bump versionCode,"Bump versionCode

Change-Id: If79b41f887418f533135ed5f3245d532010d71f9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1413303914,1413303914,b094a496761e9029fdc0f6a27d5edf219a038d86
b094a496761e9029fdc0f6a27d5edf219a038d86,b094a496,Catch ApiException in Edit preview task.,"Catch ApiException in Edit preview task.

Bug: 71986
Change-Id: I86c0719e4173bc318ca9ee41cb0cec0a37769b76
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1413168397,1413303413,2e2df1420384810f0091901c71825acfce2930da
2e2df1420384810f0091901c71825acfce2930da,2e2df142,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: I71b2f463cdf9eb2bc787ef226c16b0419711c933
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1413302284,1413302284,a2d3ae69fef417a96846c4c28545c3c091b407e6
0957b6f2e9633db47ecd11b32b8e575302f6c2fd,0957b6f2,Update to new saved pages icon.,"Update to new saved pages icon.

We switched the saved pages icon on iOS to be something different, so that if
we decided to implement the watchlist in the future then we wouldn't have
issues with already using the star. This patch switches the Android icon to be
consistent with iOS.

Change-Id: I5a8ec3443eb15b1db0b42a15e9f4db5a1622355c
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1413264573,1413264573,4994538945d1a79ab71a6c555fbf4e455c4f727d
a2d3ae69fef417a96846c4c28545c3c091b407e6,a2d3ae69,Fix syntax in string.,"Fix syntax in string.

(could have sworn that it compiled when I tested it, but now fails to
compile because of apostrophe.)

Change-Id: I96fba2ba6852faed4f271b36527e8662f0f7097f
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1413211662,1413211662,b051fca35c11e82afb87324ffed68517fddb3fd1
b051fca35c11e82afb87324ffed68517fddb3fd1,b051fca3,"Merge ""Improve values-qq entry for the nearby_no_network string.""","Merge ""Improve values-qq entry for the nearby_no_network string.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1413206434,1413206434,"d4c83471e33214143dcdc757bc26fc0978714c0d,9abc715ff46a67a47eef106e1431a5662dc9c3f9"
9abc715ff46a67a47eef106e1431a5662dc9c3f9,9abc715f,Improve values-qq entry for the nearby_no_network string.,"Improve values-qq entry for the nearby_no_network string.

Change-Id: I1c525101b9bc084fd7bdac8b8f19ea253c5f3a4b
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1413183666,1413183666,4994538945d1a79ab71a6c555fbf4e455c4f727d
d4c83471e33214143dcdc757bc26fc0978714c0d,d4c83471,"Make the ""empty"" page of Nearby more consistent with Saved Pages and History.","Make the ""empty"" page of Nearby more consistent with Saved Pages and History.

- Tweak prose of empty Nearby page to be more consistent.
- Make the Nearby prose a little bit more fun!
- Tweak wrapping of secondary empty message to be consistent with Saved Pages
  and history.

Change-Id: I8ca1afa741bf8b8271338a92e081a01fa8f386a1
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1412998233,1412998233,4994538945d1a79ab71a6c555fbf4e455c4f727d
4994538945d1a79ab71a6c555fbf4e455c4f727d,49945389,Bump versionCode,"Bump versionCode

Change-Id: I1ebf0e8f1636f6c8010dd2cfc526f53ff6d83dd6
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1412786282,1412786282,812b1d3cc4cb66bfbbb7cc83e1fa509e8fbdfd99
812b1d3cc4cb66bfbbb7cc83e1fa509e8fbdfd99,812b1d3c,Make Nearby and PageIssues/Disambig available in production.,"Make Nearby and PageIssues/Disambig available in production.

Change-Id: I7b0abeaa0add7c4effe5ca6b63ff6640bed9bb39
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1412783742,1412785131,add3e1f1d178e3b6b15f8eae60089ffb07e5b5ba
add3e1f1d178e3b6b15f8eae60089ffb07e5b5ba,add3e1f1,Bump versionCode,"Bump versionCode

Change-Id: Ifebcc17f7ae9613ce50107f317d1ffb19d67cc68
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1412778592,1412778592,84b6d87c0e6fae4a96a387febc08cc2d3f455161
84b6d87c0e6fae4a96a387febc08cc2d3f455161,84b6d87c,Guard against index-out-of-bounds when loading sections.,"Guard against index-out-of-bounds when loading sections.

Bug: 70834
Change-Id: Id0d7fb55cb9fe64867d63565c1a0d6b6cb59c26a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1412701481,1412717307,4dd76746bcd5d8b35e6cc832323dbdfd096e513f
4dd76746bcd5d8b35e6cc832323dbdfd096e513f,4dd76746,Remove ToC nudge when scrolling like a madman.,"Remove ToC nudge when scrolling like a madman.

:(

Change-Id: I1f41ef05765240816b010a55b4386f5cc13dd6aa
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1412615235,1412700337,d2ac8a8da12052a77e22549a625e6d1709222b4f
d2ac8a8da12052a77e22549a625e6d1709222b4f,d2ac8a8d,Fix warning in Gradle build,"Fix warning in Gradle build

For some reason this caused the build to fail on the tools server with:

Ambiguous method overloading for method java.io.File#<init>.
  Cannot resolve which method to invoke for [null, class java.lang.String] due to overlapping prototypes between:
        [class java.lang.String, class java.lang.String]
        [class java.io.File, class java.lang.String]

Change-Id: Ib32ef1f0ffbec5c142ea3f0e65e6076aa04eccb0
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1412700031,1412700031,e03f15703092a01f61fcd52981cb02fc8f7651d8
e03f15703092a01f61fcd52981cb02fc8f7651d8,e03f1570,remove configChange hack from AboutActivity,"remove configChange hack from AboutActivity

Change-Id: I951ad77c633e91dadbdf72d874e7eb75726ead48
",,,,Eric Cochran,smartandmellow@gmail.com,Dbrant,dbrant@wikimedia.org,1410450578,1412695849,bc624369233fc6f52361c8f62c9404df10812e56
bc624369233fc6f52361c8f62c9404df10812e56,bc624369,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: I97ab8c4977aaf940dd0ffbc5e467efe417c44928
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1412627268,1412691027,1c820da598a64de49ed5a0a1fb48875cc12487d7
1c820da598a64de49ed5a0a1fb48875cc12487d7,1c820da5,Move to Gradle build,"Move to Gradle build

This is not backwards-compatible with the regular Maven build!
Henceforth thou shalt use the Gradle build
instead of the old Maven build.

Gradle package (applicationId) rename:
Use ${applicationId} in AndroidManifest for providers.

Set Intent for AboutActivity in code vs preferences.xml
if a non-standard applicationId is used.

Uses AndroidManifest.xml snippets for every flavor
for the channel value, so no need to use the
prepare-release script for that and
for setting versionCode and versionName.

Added amazon flavor, removed master and ci.

Added new super-simple bump script which
increments the versionCode in the build.gradle file.

Added new make-release.py script which runs the
Gradle build and also provides a second step to
create and push the tags.

Removed the old scripts we don't use anymore.

Change-Id: I3eca0bf0d9e24fcf738455aedc64e095bc29b737
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1412621996,1412629383,28592f2136da0db315b3858c3f88111913e0965c
28592f2136da0db315b3858c3f88111913e0965c,28592f21,Update Crouton version.,"Update Crouton version.

The previous version didn't seem to be fetching correctly (at least when
building in Windows), and causing an error in the build.

Change-Id: I7153a1c6760a8cdcd7bd89c0ab3e018191d55fa2
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1412607124,1412626745,3d910f28e29d4b05bddc1e294b26b157059e4de5
3d910f28e29d4b05bddc1e294b26b157059e4de5,3d910f28,Fix zh string resource folders,"Fix zh string resource folders

Only need one folder for Simplified Chinese: values-zh
Removed the other ones for Simplified Chinese.
There were also some sub folders inside values-zh and
values-zh-rCN which had to be removed.

Change-Id: I2fd8566ec59f7c9fb68019765d0c59e59e210f0d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1412626482,1412626482,cb8ace5d9193cf598890f1d48825c258c824264d
cb8ace5d9193cf598890f1d48825c258c824264d,cb8ace5d,"Merge ""Guard against ApiException in EditSectionActivity.""","Merge ""Guard against ApiException in EditSectionActivity.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1412604702,1412604702,"553285bfd34eaadf76a7dcea11aeaf51351dc29c,4b06e6d0065e44b5f07484dd6107618e200e7181"
553285bfd34eaadf76a7dcea11aeaf51351dc29c,553285bf,"Merge ""Add flag `FEATURE_ACTION_MODE_OVERLAY` for an overlaying actionmode""","Merge ""Add flag `FEATURE_ACTION_MODE_OVERLAY` for an overlaying actionmode""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1412604592,1412604592,"390ee6681a05df0a2b5f8eee945b674abfc741ff,52669c0b4ec7b926e9fb5dc9874c3368962a68a5"
390ee6681a05df0a2b5f8eee945b674abfc741ff,390ee668,Update for simplified Chinese,"Update for simplified Chinese

- move translations from zh-rCN to zh
- add a symbolic link from zh to zh-rCN

This goes together with https://gerrit.wikimedia.org/r/#/c/158324/2

Change-Id: I3ad62dd0e0aeaed864542a3343a45bc7e859e7cf
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1412593249,1412593249,25bd4233e29681bd7d6dc9ea27e7a357c838d622
25bd4233e29681bd7d6dc9ea27e7a357c838d622,25bd4233,"Revert ""Update for simplified Chinese""","Revert ""Update for simplified Chinese""

I misread the dependent change.

This reverts commit 1cde96a87447246c27496aba22f067309c761eaf.

Change-Id: I74545d090dfacbbb7d7b227732a4b67e5567d03d
",,,,Siebrand,siebrand@kitano.nl,Siebrand,siebrand@kitano.nl,1412593111,1412593111,1cde96a87447246c27496aba22f067309c761eaf
1cde96a87447246c27496aba22f067309c761eaf,1cde96a8,Update for simplified Chinese,"Update for simplified Chinese

- move translations from zh to zh-rCN
- add a symbolic link from zh-rCN to zh

This goes together with https://gerrit.wikimedia.org/r/#/c/158324/2

Change-Id: I8e14457bfdd41837864d7995c3210100647270ea
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1412592917,1412592987,71b574b98ff7857f3700db826e70eb888cbd5d56
71b574b98ff7857f3700db826e70eb888cbd5d56,71b574b9,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I7aeb9c564e900b1ef4fd56841032fa16d2873bd1
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1412590169,1412590169,3e2bff1a5544ea12a53abda3ab31b237387ea71d
3e2bff1a5544ea12a53abda3ab31b237387ea71d,3e2bff1a,More Nearby styling changes,"More Nearby styling changes

- white background
- less margin between title and distance text
- move text slightly higher (by adding paddingBottom)

Change-Id: I17d645a15d03900500c46cc716252ee1427a26ca
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1412112902,1412289985,95fe07a2112af936664eacfa26551d2178f7cf46
95fe07a2112af936664eacfa26551d2178f7cf46,95fe07a2,Add option to switch between metric/imperial in Nearby.,"Add option to switch between metric/imperial in Nearby.

Change-Id: I8f6356a8150c085c4ecc29f101b45be56c85c633
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1412026882,1412113453,76f16060629ba300c6e5565aa1de674f6d097b87
76f16060629ba300c6e5565aa1de674f6d097b87,76f16060,"Merge ""Nearby styling updates""","Merge ""Nearby styling updates""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1412022833,1412022833,"5728c6e2c31b66f0569e01767ae423369daf377e,5e5cdf227494fb0190354391112ce2650ecbc1d0"
5728c6e2c31b66f0569e01767ae423369daf377e,5728c6e2,Update README for Gradle,"Update README for Gradle

Also add more info about generating CSS files.

Change-Id: Ic6f1d0e63c20926aac001298140ba44e86208474
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411949447,1411949447,824d97591ba1f9ebdfbb5f528e3d06832ab2fa4a
52669c0b4ec7b926e9fb5dc9874c3368962a68a5,52669c0b,Add flag `FEATURE_ACTION_MODE_OVERLAY` for an overlaying actionmode,"Add flag `FEATURE_ACTION_MODE_OVERLAY` for an overlaying actionmode

Without this flag the actionmode, when activated (through a long-click)
looks like [this](http://i.imgur.com/nPSD8WF.png).
With it it looks like [this](http://i.imgur.com/tBR6bG5.png).

It bugged me that the content of the screen got pushed down every
time I tried to copy something. With this it doesn't happen.

Change-Id: Id059e9f53c32785dd1cc97a7203b8dedee09dd90
",,,,Rashiq,rashiq.z@gmail.com,RashiqAhmad,rashiq.z@gmail.com,1411933994,1411935701,824d97591ba1f9ebdfbb5f528e3d06832ab2fa4a
4b06e6d0065e44b5f07484dd6107618e200e7181,4b06e6d0,Guard against ApiException in EditSectionActivity.,"Guard against ApiException in EditSectionActivity.

Some users are getting crashes when editing sections, probably due to
intermittent problems with their connection. This patch should allow stop the
app from crashing and allow them to retry making the edit.

Bug: 71332
Change-Id: I060bd1b9413a82b789290c46e0c0b8f1b4803b8b
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1411852004,1411852004,824d97591ba1f9ebdfbb5f528e3d06832ab2fa4a
5e5cdf227494fb0190354391112ce2650ecbc1d0,5e5cdf22,Nearby styling updates,"Nearby styling updates

distance indicator:
  smaller corner radius
  increase left right padding
  decreased top bottom padding

compass:
  reduced stroke weight
  same color for ticks as for distance background
  more vertical margin to add more space above and below compass

general:
  center both compass and text vertically
  less margin between title and distance

Change-Id: I197c19bd6cd8a42c80404436943a67a063602f23
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411508367,1411754999,824d97591ba1f9ebdfbb5f528e3d06832ab2fa4a
824d97591ba1f9ebdfbb5f528e3d06832ab2fa4a,824d9759,Factor out Wikipedia Zero code into its own module.,"Factor out Wikipedia Zero code into its own module.

No more remembering to check for Zero headers on completion of every api
task.

Change-Id: I82a869f9df4dedf2d9bc37955644106bbc9138a6
NOTE: depends on the latest java-mwapi update.
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1411513971,1411576543,e0ba88c5e4ee5b537d5c253aa56ecf70072dd44a
e0ba88c5e4ee5b537d5c253aa56ecf70072dd44a,e0ba88c5,Add xxxhdpi resolution launcher icons,"Add xxxhdpi resolution launcher icons

Change-Id: I13af17bfa2b761cfcb9dcc488a9c9a527522ebf1
",,,,YuviPanda,yuvipanda@gmail.com,BearND,bsitzmann@wikimedia.org,1411571204,1411576459,a1da7e0e042152a814461129b9176ef682f8b2f0
a1da7e0e042152a814461129b9176ef682f8b2f0,a1da7e0e,Use same lib versions for Gradle and Maven,"Use same lib versions for Gradle and Maven

Change-Id: I597b477318f6d10f48253da804851c13f4e04f13
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411575877,1411575885,5ac05a1f80e3edc68e182cf5cce3b261eeb30a7d
5ac05a1f80e3edc68e182cf5cce3b261eeb30a7d,5ac05a1f,Fixed checkbox not showing in preferences.,"Fixed checkbox not showing in preferences.

Bug: 71228
Change-Id: I8a2e9be3aea377b9677439eefa8fe928c9e6d4a3
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1411566599,1411571607,a0394ecab3984596ab3071eecffbf7c423109561
a0394ecab3984596ab3071eecffbf7c423109561,a0394eca,"Merge ""Use beta package in Gradle build for beta flavor""","Merge ""Use beta package in Gradle build for beta flavor""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1411568235,1411568235,"327bc2f77670a50dcbb94d3c8502838ea0249a68,399bef6a1bd1d1872058eb02842d2d2bedf0df9b"
327bc2f77670a50dcbb94d3c8502838ea0249a68,327bc2f7,"Right swipe in ToC hint for RTL, part 2","Right swipe in ToC hint for RTL, part 2

Some RTL languages don't have translations yet.
Adding a fuzzy English text indicating right swipe
instead of left swipe.

Change-Id: I9d68a030a84868fb5488e8e014131a666d20e5bb
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411489111,1411489111,276848db9af91381560bfe269a2da929e0bc8502
276848db9af91381560bfe269a2da929e0bc8502,276848db,"Merge ""Save nearby results between activity restores""","Merge ""Save nearby results between activity restores""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1411484631,1411484631,"6907ee13d0ac10a41068ea13809969e2d8c31c44,6649f51def986c7c55d732890669ef94bcafe001"
6907ee13d0ac10a41068ea13809969e2d8c31c44,6907ee13,"Merge ""Right swipe in ToC hint for RTL""","Merge ""Right swipe in ToC hint for RTL""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1411482972,1411482972,"bf216fecb63c9be92a2159c3e024d2bce4078fb2,272b60d1bb09260cbfc0f9cb9cfc1cc9b586560f"
bf216fecb63c9be92a2159c3e024d2bce4078fb2,bf216fec,"Merge ""Update tests of strings with one parameters""","Merge ""Update tests of strings with one parameters""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1411482700,1411482700,"00b55b0c751b4ebf1e926fbab62b5614f9c56dd8,d07b80e1d417be7a68f4523eb0ea149a72c6b75a"
399bef6a1bd1d1872058eb02842d2d2bedf0df9b,399bef6a,Use beta package in Gradle build for beta flavor,"Use beta package in Gradle build for beta flavor

Also added alpha flavor to Gradle build, using alpha package.
Currently this still assumes that the prepare-release.py
script is used before the build is run.

Once we abandon Maven we can substitute most of the
prepare-release.py functionality with Gradle configs.

Change-Id: I7d0f748c6b913fcc6ce69e1ac221ef344634b9b6
(cherry picked from commit 2c1ce18de7f4d99dce3616963d4a564383679112)
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411448787,1411448832,00b55b0c751b4ebf1e926fbab62b5614f9c56dd8
272b60d1bb09260cbfc0f9cb9cfc1cc9b586560f,272b60d1,Right swipe in ToC hint for RTL,"Right swipe in ToC hint for RTL

Some RTL don't have translations for the toc_hint text yet.
Adding a fuzzy English text indicating right swipe
instead of left swipe.

Change-Id: I2cc6d8757ab7710e7332ca066421dec0dcde208d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411448443,1411448443,00b55b0c751b4ebf1e926fbab62b5614f9c56dd8
00b55b0c751b4ebf1e926fbab62b5614f9c56dd8,00b55b0c,Bump versionCode,"Bump versionCode

Change-Id: I5b02ee9488378ba9276e1788bb19b1e7c4b9ffec
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411430252,1411430422,a9ea5dc677a739417ad0059051d7c725b1e53e2e
6649f51def986c7c55d732890669ef94bcafe001,6649f51d,Save nearby results between activity restores,"Save nearby results between activity restores

When the Nearby activity resumes we still have the same
results, even if it was destroyed because of low memory.
This will make navigation easier since we don't automatically
change the list of results when the location changes.
If the user explicitly presses the refresh button or restarts
the activity then a new list of results will be retrieved.

NearbyResult is an object now, and parcelable.
Together with the locations (prev/next), it is stored in
a Bundle during onSaveInstanceSate;
to be used if the activity has to be recreated.

Change-Id: I3aba3f2202c9d2f08de88384ca450fee322dfc13
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411430029,1411430029,a9ea5dc677a739417ad0059051d7c725b1e53e2e
d07b80e1d417be7a68f4523eb0ea149a72c6b75a,d07b80e1,Update tests of strings with one parameters,"Update tests of strings with one parameters

And ignoring some that take forever to get fixed.

Some strings don't have a parameter anymore.
Added test for it but commented out for now since
it's not yet necessary.

Change-Id: I4a477e33f05d1b3fc71e96ff36b1f993984b5f58
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410992469,1411407589,a9ea5dc677a739417ad0059051d7c725b1e53e2e
a9ea5dc677a739417ad0059051d7c725b1e53e2e,a9ea5dc6,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: I81e7d43a673cf0a11c9c1c285f9f1f11f3e34029
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1411406605,1411406605,c5136bc7fb41ef8187efe89eb269cf2ddfba7940
c5136bc7fb41ef8187efe89eb269cf2ddfba7940,c5136bc7,Fix PreviewTaskTests.,"Fix PreviewTaskTests.

MediaWiki seems to be returning a slightly different edit link anchor now.

Change-Id: I3b9e17798b2dd7d531388a411ef2c89307705836
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1411395024,1411395024,0f89588ffc4fd88d68ec48139db4ab00b069161e
0f89588ffc4fd88d68ec48139db4ab00b069161e,0f89588f,Some nearby page entries don't have coordinates,"Some nearby page entries don't have coordinates

or at least not complete ones.
Also added unit test for this and updated JSON docs.

bug: 71025
Change-Id: I26fa97a3bc848cea7fcd429040cc6b598788bea6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411158861,1411170852,6158b471f4ac26b054962808c8a11ac64dac76e3
6158b471f4ac26b054962808c8a11ac64dac76e3,6158b471,More instructions for Android Studio,"More instructions for Android Studio

Change-Id: If56efbe6c83bf93da4cd849ae93fb5ee1e851ea1
(cherry picked from commit c2a8929b4048236247d300d8ba60d934b1b834b0)
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1411063032,1411073440,ba71f9b908e9e439f473d8c4dadf45bf442e283c
ba71f9b908e9e439f473d8c4dadf45bf442e283c,ba71f9b9,Bump versionCode,"Bump versionCode

Change-Id: I6a6b0bc88e27cbae33fae21bc720de0b0ce99f03
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1411054868,1411055539,c4227889354da28893f0a4f27d42fc1e05e9b434
c4227889354da28893f0a4f27d42fc1e05e9b434,c4227889,Bump versionCode,"Bump versionCode

Change-Id: I6a6b0bc88e27cbae33fae21bc720de0b0ce99f03
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411054868,1411055315,504d52e0fcbb2e3aad516cce6449028200cf8fb5
504d52e0fcbb2e3aad516cce6449028200cf8fb5,504d52e0,Don't filter out devices that just have fake touch,"Don't filter out devices that just have fake touch

(e.g. mouse and keyboard instead of a real touchscreen).
This will make the app appear on more devices in Google Play.

For details see https://www.youtube.com/watch?v=zsRnRLh-O34 and
http://developer.android.com/guide/topics/manifest/uses-feature-element.html#hw-features

Change-Id: I5e3b6f270b4d14ca1404bff94f41c7baa7444730
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1411008003,1411008003,adbf3491880e54a0109f8fe03918bf05f7d1a018
adbf3491880e54a0109f8fe03918bf05f7d1a018,adbf3491,Mark Android features used by Nearby as optional,"Mark Android features used by Nearby as optional

so that the app doesn't get filtered out by Google Play.
Nearby is not a central feature of this app.

Change-Id: Ib6388d0f1dfd9b68dc9e18f3ee3e658d04f9d135
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410997789,1410997826,d959de2721e5b5b9818401d06fbf44d447203f9b
d959de2721e5b5b9818401d06fbf44d447203f9b,d959de27,Bump versionCode,"Bump versionCode

Change-Id: Ic1de652cf92ecc4de3f8480e774e662c2e85f18f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410993617,1410993634,f80fb8550d1e678c2466ee4d6d7b32ab3e11e011
f80fb8550d1e678c2466ee4d6d7b32ab3e11e011,f80fb855,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: I40ccf9d129cb21f57175752599561952543ef8ea
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1410990905,1410992883,5baffeaa677660d846fa6eac25693e01628782b6
5baffeaa677660d846fa6eac25693e01628782b6,5baffeaa,Fix loading saved pages while offline,"Fix loading saved pages while offline

Use a stable ID for storing and loading saved pages.

bug: 70944
Change-Id: I116bbef24940c4e42c7dcb4878aba486c1dbdd9f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410972169,1410972169,e812a9f4729d438d248996330c1bd98f8e3d2bc4
e812a9f4729d438d248996330c1bd98f8e3d2bc4,e812a9f4,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: Ic6d6056b22e0847d33079e2577aab1923f2f4782
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410900977,1410901391,d4e75ea502b71566e7ed51e7fccf228a6c060047
d4e75ea502b71566e7ed51e7fccf228a6c060047,d4e75ea5,"Make sure that a new location is ""better"" than the previous one.","Make sure that a new location is ""better"" than the previous one.

Change-Id: I64fbd0c41f828cf82de92698be55420c642cbbf9
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1410811528,1410890038,cf917196fc2d5560d84bc516f363be1795305c7d
cf917196fc2d5560d84bc516f363be1795305c7d,cf917196,Detect whether location is disabled on the device...,"Detect whether location is disabled on the device...

...and give the user the option to go to Settings and enable location
updates.

Change-Id: Ic7902ae67b651d0dc52163b5412b4d884116569b
",,,,dbrant,dbrant@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410808676,1410888999,454ab84bb8de82ac83530856155437aa75e9bf06
454ab84bb8de82ac83530856155437aa75e9bf06,454ab84b,"Merge ""Use serif fonts for Wikipedia logo""","Merge ""Use serif fonts for Wikipedia logo""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410876501,1410876501,"2b1aedb8dbf57f0d4f1347e6641a2460bac998dd,937bdeedba87c8f6722455393ecd1c0934fb6517"
2b1aedb8dbf57f0d4f1347e6641a2460bac998dd,2b1aedb8,"Merge ""Default resource file name for colors.xml""","Merge ""Default resource file name for colors.xml""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410876249,1410876249,"4dd24a5f7edcc1d94356bd308336797ac6f65488,8dcc2dffa54199109c1808e84e911d9535073991"
4dd24a5f7edcc1d94356bd308336797ac6f65488,4dd24a5f,"Merge ""Slow down retry button""","Merge ""Slow down retry button""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410876101,1410876101,"9cb12f580630bcb870e5811d3296aa1c632b8857,4c06307be7ca127d7bf424b212fc12c9cf2fcabe"
8dcc2dffa54199109c1808e84e911d9535073991,8dcc2dff,Default resource file name for colors.xml,"Default resource file name for colors.xml

When using IntelliJ's or Android Studio's intentions
(alt-enter) on colors it tries to add a new color resource to
colors.xml not the old color.xml.

Change-Id: Iec61a67213b2248f33616e872e09efcc05640899
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410843761,1410843761,63677d550f45d06fd188a420c837ac9192a1b082
937bdeedba87c8f6722455393ecd1c0934fb6517,937bdeed,Use serif fonts for Wikipedia logo,"Use serif fonts for Wikipedia logo

on onboarding screen.
Only effective for API level 16 and higher.

Also make sure the wordmark is uppercase. (API 14+)

Change-Id: I3627e8ceb043581c8eb286f9d3ecc009c61f2f10
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410843324,1410843324,63677d550f45d06fd188a420c837ac9192a1b082
4c06307be7ca127d7bf424b212fc12c9cf2fcabe,4c06307b,Slow down retry button,"Slow down retry button

Disable the retry button during the crossFade to avoid
concurrent retries.

Also refactored some other places that had a crossFade
inlined.

bug: 70834
Change-Id: Ib6e8ae46184c264758bfa69eeae6b4ed7bf827a3
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410837614,1410837614,63677d550f45d06fd188a420c837ac9192a1b082
9cb12f580630bcb870e5811d3296aa1c632b8857,9cb12f58,Guard against page being null in savePage,"Guard against page being null in savePage

bug: 69952
Change-Id: Id04845d7b7b3f082939b9d5840960863b320800c
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410825289,1410825289,63677d550f45d06fd188a420c837ac9192a1b082
63677d550f45d06fd188a420c837ac9192a1b082,63677d55,pick up tests in Gradle build,"pick up tests in Gradle build

The main thing was to rename instrumentTest to androidTest.
Also fix the test package name int he AndroidManifest.xml
(for Maven) to org.wikipedia.test.
And update the versionCode to the latest.

Change-Id: I7be9fe2d640a404b81efd49deaeac9fe5e458f78
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410459355,1410811867,e2b158dd86421fa83f2ddc1c9af37aaaa354184f
e2b158dd86421fa83f2ddc1c9af37aaaa354184f,e2b158dd,"Merge ""Allow session sampling rate to be 0, and change session sample rate to 0.""","Merge ""Allow session sampling rate to be 0, and change session sample rate to 0.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410806264,1410806264,"78234203def7f5877ed13ed7fc0d33ab3f80c907,ebc846c787f5618d4fe614f28ed5808ccf9d7781"
78234203def7f5877ed13ed7fc0d33ab3f80c907,78234203,"Merge ""Nearby: handle missing location provider""","Merge ""Nearby: handle missing location provider""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410806220,1410806220,"eceafc4500f420da8315c7da0040a4c4be186b87,7e80bf798635b55a69b0abaf5d9c9b0a3e17ccb7"
eceafc4500f420da8315c7da0040a4c4be186b87,eceafc45,"Merge ""Add a space between any right bracket and left curly brace, for style.""","Merge ""Add a space between any right bracket and left curly brace, for style.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410804389,1410804389,"8201a15d5a41469c491931da29438016040c1795,5e005d62724d55f1fe4bc3e77317ed597b242902"
ebc846c787f5618d4fe614f28ed5808ccf9d7781,ebc846c7,"Allow session sampling rate to be 0, and change session sample rate to 0.","Allow session sampling rate to be 0, and change session sample rate to 0.

* Check sampling rate is nonzero before sending events in the session funnel.
* Change default sampling rate to 0.

Change-Id: I9756ef8d22dd64e94bd542a8a3848afccf278ce2
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1410735373,1410803765,8201a15d5a41469c491931da29438016040c1795
5e005d62724d55f1fe4bc3e77317ed597b242902,5e005d62,"Add a space between any right bracket and left curly brace, for style.","Add a space between any right bracket and left curly brace, for style.

Turns out there are a few violations of this coding convention in the code.
This patch should fix them all.

Change-Id: Ie48bd694d3ea013cf6b4b4d93c1474371fc02eeb
",,,,Deskana,dgarry@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1410797556,1410802523,43d1e5898318ea068e3d9e6c8c97325043409f9e
8201a15d5a41469c491931da29438016040c1795,8201a15d,Show message to user when filtering interwiki links returns no results.,"Show message to user when filtering interwiki links returns no results.

When the user goes to an article that has interwiki links, views the list of
links, filters the list, and gets no results, display a message to them
informing them that no languages matched their query.

Also add small left and right margins to the messages that the activity can
present, so that those messages wrap more cleanly and consistently.

Change-Id: I68fbb60c3e8210c83744ee2b5aa86c2041d2bf6d
",,,,Deskana,dgarry@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1410752354,1410802519,43d1e5898318ea068e3d9e6c8c97325043409f9e
7e80bf798635b55a69b0abaf5d9c9b0a3e17ccb7,7e80bf79,Nearby: handle missing location provider,"Nearby: handle missing location provider

Some devices have missing location providers.
Catch exceptions and show error if both do not exist.

Also try to preserve batteries some more by requesting
location updates only every 5 seconds.

Change-Id: I975d7e9d87753ab5ace4a23e722c370294683018
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410797830,1410797830,43d1e5898318ea068e3d9e6c8c97325043409f9e
43d1e5898318ea068e3d9e6c8c97325043409f9e,43d1e589,"Merge ""Add explicit super keyword to log method of all classes extending Funnel.""","Merge ""Add explicit super keyword to log method of all classes extending Funnel.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410794164,1410794164,"dba8a0da2cea27687e0fbdf5d6a918721357c437,7e7f6978ba9f5e16c75c2985bfca41dcd6154082"
dba8a0da2cea27687e0fbdf5d6a918721357c437,dba8a0da,"Merge ""Nearby - add realtime compass views.""","Merge ""Nearby - add realtime compass views.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410792980,1410792980,"e268a420553cec71680b150616096d491dbbcaf9,c966d790366b8a01453109f39ca3de1fb6165261"
c966d790366b8a01453109f39ca3de1fb6165261,c966d790,Nearby - add realtime compass views.,"Nearby - add realtime compass views.

- Integrate with accelerometer and magnetometer sensors
- Create custom view that shows directional arrow on top of an image
- Restrict Nearby functionality to non-production builds (for now)

Change-Id: I372a3850e589c21816726fc478623d68fab9dd64
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1410530676,1410791917,74303ad9278a2d984047505d09f674d35095a153
7e7f6978ba9f5e16c75c2985bfca41dcd6154082,7e7f6978,Add explicit super keyword to log method of all classes extending Funnel.,"Add explicit super keyword to log method of all classes extending Funnel.

All classes that extend Funnel have their own implementation of the log method
but it always ends up calling the super's log method. However, the code looks
confusing and doesn't make that obvious.

This patch adds the super keyword before every call to the parent's log
function, for clarity. Some classes already had the keyword in there, but this
patch adds it to the rest. The actual functionality before and after this patch
should be exactly the same.

Change-Id: I03a65d4a95500568b569e2a04f5814ccd179b40d
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1410743723,1410743723,74303ad9278a2d984047505d09f674d35095a153
e268a420553cec71680b150616096d491dbbcaf9,e268a420,Improve layout and searching of History and Saved Pages.,"Improve layout and searching of History and Saved Pages.

* Add small left and right margins to the empty text so that the text
presented when there are no search results wraps more cleanly.
* Change empty message to not include search query so that the text wraps more
consistently and cleanly.
* Tweak empty messages for History and Saved Pages to be more consistent with
each other.
* Added note that the getString() method for the empty messages should
eventually be removed once all of the empty messages are translated.

Bug: 70102
Change-Id: I7adebfb1c0a06dde7f2dedd3cead8cc983d4b968
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1410624709,1410713805,74303ad9278a2d984047505d09f674d35095a153
74303ad9278a2d984047505d09f674d35095a153,74303ad9,"Merge ""Hide actions when lists are empty""","Merge ""Hide actions when lists are empty""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410709573,1410709573,"fdf9c9b124fd1d1f89985aca22afeb8b5e75cbf7,b5a860948971726f63911bf8c3f3c768c2150e30"
b5a860948971726f63911bf8c3f3c768c2150e30,b5a86094,Hide actions when lists are empty,"Hide actions when lists are empty

in Saved Pages and History

bug: 70745
Change-Id: Icafeb67a815afa24deb90315c27caf86d87e5459
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410561223,1410561970,c9c8f7fd0989a795f51bcbbf58d4a8fa2f6a270f
fdf9c9b124fd1d1f89985aca22afeb8b5e75cbf7,fdf9c9b1,Nearby,"Nearby

Get list of pages of nearby locations (up to 50 within 10 km
- the API doesn't let us increase the radius past 10km).
Shows list sorted by distance.

The distances update automatically but the list does not
update until the refresh button in the action bar is pressed.
This is done as to not confuse the user while moving or even
just scrolling around.

Change-Id: Ib9cb06b0d1e959431e1ed7188bc0e6ccf35c2bec
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1409893019,1410558326,c9c8f7fd0989a795f51bcbbf58d4a8fa2f6a270f
c9c8f7fd0989a795f51bcbbf58d4a8fa2f6a270f,c9c8f7fd,Make Preference titles multi-line.,"Make Preference titles multi-line.

Bug: 70719
Change-Id: If9f398e0facf2f8bb56efdd9ae7adff841eccdb7
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1410447620,1410556758,e355df55eda935500a6f5b658fd8624bcc78ddfc
e355df55eda935500a6f5b658fd8624bcc78ddfc,e355df55,Correctly urldecode links from Disambiguation dialog.,"Correctly urldecode links from Disambiguation dialog.

Bug: 70769
Change-Id: I58a2177915b533a2fa01c44041e6b80fc7bb5266
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1410527185,1410556588,0b2a9981725b74515219c68ef4dfda586532affb
0b2a9981725b74515219c68ef4dfda586532affb,0b2a9981,Really mark ToC as known if Got it was pressed,"Really mark ToC as known if Got it was pressed

There was a bug that it still showed the ToC intro when one
pressed on the Got it button but used the ToC action
bar button to open the ToC again.

Also adjusting the size of the hand swipe image to be smaller
for devices with smaller height, so that the Got it button fits
on the screen. Unfortunately, when orientation is changed
it doesn't update since we still using the orientation hack in the
AndroidManifest. So, when changing from portrait to landscape
there is still a chance that the button would be hidden but
switching back to portrait would fix this.

Change-Id: I229af1da44bc9b7e4ead67a653420ef0022b7127
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410544674,1410545112,1b43ce49e8166a830158a6d7488e661f76f02362
1b43ce49e8166a830158a6d7488e661f76f02362,1b43ce49,"Merge ""Fix ToC icon color in Dark mode.""","Merge ""Fix ToC icon color in Dark mode.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410545032,1410545032,"6a0834baa7319348398f35df1e97c92b27b9efb0,5439a266fbfc9fd9e08824c577bcbe6e2b432a57"
6a0834baa7319348398f35df1e97c92b27b9efb0,6a0834ba,"Merge ""Check for new releases and pop up a notification if there is one""","Merge ""Check for new releases and pop up a notification if there is one""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410545020,1410545020,"60d161726451148d24f43cdb442924ce795257e6,1756f95e49b849ae32b182ee805cc6885ba6c992"
1756f95e49b849ae32b182ee805cc6885ba6c992,1756f95e,Check for new releases and pop up a notification if there is one,"Check for new releases and pop up a notification if there is one

Change-Id: Iac34556b3ef15e9ff2bf1ce626989f156b58ef74
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1410370229,1410544766,315e114e55c04ddf3693ad3b49444eb43d6dc13c
5439a266fbfc9fd9e08824c577bcbe6e2b432a57,5439a266,Fix ToC icon color in Dark mode.,"Fix ToC icon color in Dark mode.

also tweak its padding so that it's aligned with the overflow dots.

Bug: 70689
Change-Id: I534da63bfd3e413d87f20cd217c9578a4dee8053
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1410448641,1410544716,60d161726451148d24f43cdb442924ce795257e6
60d161726451148d24f43cdb442924ce795257e6,60d16172,"Merge ""Show ToC automatically; plus hints""","Merge ""Show ToC automatically; plus hints""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410532811,1410532811,"b247863c9cd866fd0fce31efde023c635f343ffa,6b3b3084851c60262e36e5f9eadb3a134050e993"
6b3b3084851c60262e36e5f9eadb3a134050e993,6b3b3084,Show ToC automatically; plus hints,"Show ToC automatically; plus hints

Automatically opens the ToC (Table of Contents) drawer when
the user views a page with two or more sections until she
swipes to open the ToC or presses the Got it button.
Adds instructions on how to open the ToC by swiping horizontally.
I hope the translators get this right for RTL vs LTR.

The only way to get this to appear again after it was acknowledged
via ""Got it"" is to clear data for our app in the settings.

Change-Id: I8326e38ecc144a4e3acf53657657ee112361434a
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410383160,1410499104,315e114e55c04ddf3693ad3b49444eb43d6dc13c
b247863c9cd866fd0fce31efde023c635f343ffa,b247863c,Improve the API error handling in the account creation activity.,"Improve the API error handling in the account creation activity.

* Add support and messages for five more errors the API can give you.
* Differentiate between IP blocks and account blocks when presenting messages
to the user.
* Change ordering of error presentation so that if there are multiple errors
then the user is told about the unresolvable ones first so that they don't
jump through hoops trying to fix the errors if they'd never be able to anyway
(e.g. if they're blocked, don't tell them their password is too short first,
just tell them they're blocked).

Bug: 70635
Change-Id: I3b991b3dbc3ff74c7b18f7214e98d29bca99f321
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1410409592,1410451378,315e114e55c04ddf3693ad3b49444eb43d6dc13c
315e114e55c04ddf3693ad3b49444eb43d6dc13c,315e114e,"Change ""Other meanings"" to ""Similar articles"".","Change ""Other meanings"" to ""Similar articles"".

Improve the prose for the disambiguation wrap-up by changing it from ""Other
meanings"" to ""Similar articles"".

Change-Id: I87af8dfef18b8f062e3a379c8a6feb6aa7512a44
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1410306201,1410306201,f5eb38a73423ccbb5743ad55963b7bf41ccf2a94
f5eb38a73423ccbb5743ad55963b7bf41ccf2a94,f5eb38a7,Bump versionCode,"Bump versionCode

Change-Id: Ic043b71b41a803b52e94045a8d50a8acfe85db43
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1410286194,1410286194,a2a33091a0ba17488decb0809e013104d0757a5c
a2a33091a0ba17488decb0809e013104d0757a5c,a2a33091,Fix fetching/saving of page thumbnails (for showing in History/Saved),"Fix fetching/saving of page thumbnails (for showing in History/Saved)

Change-Id: I2cc3ad2e357698883cd49f60758d09d06b9ce5ee
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1410273490,1410281936,d847f6139665806bd9e91db38414b2f12e9d1dff
d847f6139665806bd9e91db38414b2f12e9d1dff,d847f613,Don't pass whole Section object over intent.,"Don't pass whole Section object over intent.

Change-Id: Ib7d944d9aafdaf6ddaa34fcd559ea04bd23517e2
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1410209916,1410281472,0c8818192a265296ba2410f8967bf0fd204faf76
0c8818192a265296ba2410f8967bf0fd204faf76,0c881819,"Merge ""add no matches found text for find in page""","Merge ""add no matches found text for find in page""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410212726,1410212726,"e902a690dd453e78d387701688e07392b14f9ba8,2247cecf1fca8dbeb24bf6babe76f835ad55a8e3"
2247cecf1fca8dbeb24bf6babe76f835ad55a8e3,2247cecf,add no matches found text for find in page,"add no matches found text for find in page

Change-Id: I127276ab0066b0fad8de82b67e143d397852b1d7
",,,,Eric Cochran,smartandmellow@gmail.com,Eric Cochran,smartandmellow@gmail.com,1410206180,1410211616,ce496587f297149848d95d833bbddf5b750847c4
e902a690dd453e78d387701688e07392b14f9ba8,e902a690,Bounce out the ToC when scrolling like a madman.,"Bounce out the ToC when scrolling like a madman.

- Nudge out the ToC when scrolled beyond a defined vertical threshold.
- Also expand the active drag edge of the drawers for easier pulling (see
  bug)

Bug: 65004

Change-Id: I4cf0f4693c7c38e743b46a69aa84c2c61a0d1d00
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1409793008,1410206332,f0da1c588e74235d98cbb7929a6b273933214668
f0da1c588e74235d98cbb7929a6b273933214668,f0da1c58,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: Ic4d296845952465e6cb31a0150c3570ef2ce38b9
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1410199574,1410205727,40cdd7a85a1d6dfd8cc2bf214d820d1bd2bede61
40cdd7a85a1d6dfd8cc2bf214d820d1bd2bede61,40cdd7a8,Don't hide search bar when ToC is pulled out.,"Don't hide search bar when ToC is pulled out.

Change-Id: Ic14fa3c8ddd5de0554b870076d90823bce9c3f46
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1410190430,1410199169,38ce3602009994a0a2dc65519590a8e0266f7e00
38ce3602009994a0a2dc65519590a8e0266f7e00,38ce3602,Implement event logging for Sessions.,"Implement event logging for Sessions.

Change-Id: I615811eb08699f6c2435d8eed8288d01661f432e
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1409777333,1410195147,3288925777e1830f67a9d517eac76ae82e5d69fd
3288925777e1830f67a9d517eac76ae82e5d69fd,32889257,remove unnecessary parent layout for no results,"remove unnecessary parent layout for no results

Change-Id: I555b1907b4137ef3a4b40125f22435d4bbb61a32
",,,,Eric Cochran,smartandmellow@gmail.com,Dbrant,dbrant@wikimedia.org,1410113676,1410194776,bd746ab3c52ef0eab97ac3dd69c19c698b15e63e
bd746ab3c52ef0eab97ac3dd69c19c698b15e63e,bd746ab3,"Merge ""hide toc button on invalid page""","Merge ""hide toc button on invalid page""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410194523,1410194523,"71ee8c287ede86d0e0b298be051f59d9017d9d9a,aa41361b7f0f78612285b5bb29bc1a7d6b18c8e9"
aa41361b7f0f78612285b5bb29bc1a7d6b18c8e9,aa41361b,hide toc button on invalid page,"hide toc button on invalid page

Change-Id: I1f957276580769514262efc3887d751bae85f4a5
",,,,Eric Cochran,smartandmellow@gmail.com,Eric Cochran,smartandmellow@gmail.com,1410193944,1410194000,ce496587f297149848d95d833bbddf5b750847c4
71ee8c287ede86d0e0b298be051f59d9017d9d9a,71ee8c28,"Merge ""Swap the order of language names in language selectors.""","Merge ""Swap the order of language names in language selectors.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410184463,1410184463,"2b4d374f03ba7b6de5bf7c1ac496ba560991a244,0482a760d318afe60b453878b619884de4d61285"
2b4d374f03ba7b6de5bf7c1ac496ba560991a244,2b4d374f,"Merge ""Clear the text in the box every time a search is done.""","Merge ""Clear the text in the box every time a search is done.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410184211,1410184211,"c4c0c3bf0e7eaf0f621c90e009c73d386bb16532,56d41d1befe92efed0a9cc7fc3bf239b6722a60a"
c4c0c3bf0e7eaf0f621c90e009c73d386bb16532,c4c0c3bf,"Merge ""Update list of RTL languages""","Merge ""Update list of RTL languages""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1410183611,1410183611,"d0da2830a92ad40b2956ff14a3c72ce6ff45521c,941abcfa83e1de0b2a84a42366f20bc8095c3c82"
0482a760d318afe60b453878b619884de4d61285,0482a760,Swap the order of language names in language selectors.,"Swap the order of language names in language selectors.

In the ""Read in another language"" option and ""Wikipedia language"" setting, the
languages are displayed with the current device language's name in large text,
and the name of the language in the language itself in small text. This patch
flips that behaviour, so that the name of the language in the language itself
is prioritised.

Change-Id: I672cee2cf8b6e5ffdc25356d285b2235532c671d
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1410037312,1410037312,ce496587f297149848d95d833bbddf5b750847c4
56d41d1befe92efed0a9cc7fc3bf239b6722a60a,56d41d1b,Clear the text in the box every time a search is done.,"Clear the text in the box every time a search is done.

Vibha did some user testing and found that some people have trouble figuring
out how to search again once they've done an initial search. This could be
because the text you search for remains in the text box after you've searched.
Since there's not a particularly good reason to leave that text in there, this
patch clears the search box every time someone navigates to a new page.

Change-Id: I33ad2a6cbe2992f0306b13588936ca4e28c4102a
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1410027677,1410027677,ce496587f297149848d95d833bbddf5b750847c4
941abcfa83e1de0b2a84a42366f20bc8095c3c82,941abcfa,Update list of RTL languages,"Update list of RTL languages

Hausa is actually LTR.

See also bug:745 and
https://en.wikipedia.org/wiki/Right-to-left#cite_ref-2

Change-Id: I102669b5c2b823c17cb4c781b9c443b85062e534
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1409934008,1409934008,ce496587f297149848d95d833bbddf5b750847c4
d0da2830a92ad40b2956ff14a3c72ce6ff45521c,d0da2830,Clarify some translation documentation entries,"Clarify some translation documentation entries

Change-Id: I0378ac293cfdad952f7f94de4f8f466466bb54ae
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1409894758,1409894758,ce496587f297149848d95d833bbddf5b750847c4
ce496587f297149848d95d833bbddf5b750847c4,ce496587,Update ToC icon (with directionality).,"Update ToC icon (with directionality).

Change-Id: I474944181e52aba800ea025b92ae0962f4d72442
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1409669409,1409851605,f8705f103c77a6c24eec2529a0ec014ce0d63789
f8705f103c77a6c24eec2529a0ec014ce0d63789,f8705f10,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: Ib6cbf3da90517c69556cd8413e3b652d78d8596d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1409789643,1409789643,6eb90f6265e7bde51a6a0fbe46ba3885c0d26460
6eb90f6265e7bde51a6a0fbe46ba3885c0d26460,6eb90f62,Correctly jump to a specific section from an incoming link.,"Correctly jump to a specific section from an incoming link.

Bug: 69948
Change-Id: I5469b77ef259067e82deca426ea68fba13880d89
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1409248031,1409353714,9179a35437bccc057b2f56e4198a2a80b5ecd7c4
9179a35437bccc057b2f56e4198a2a80b5ecd7c4,9179a354,Improve the way that sections are loaded into the WebView.,"Improve the way that sections are loaded into the WebView.

* Do it using chained Runnables on the Java side.
* No longer use cascading messages between Java and JS bridge, since that
was prone to occasional stack overflow errors in JS, which would cause
weird/undefined behavior.
* Simplify scrolling to a specific section upon loading the page.
* Improve scrolling to specific y-offset after restoring page from state.

(To be continued with a patch that fixes scrolling to a specific section
from links clicked outside the app)

Bug: 69700
Change-Id: I10a5f1bd025ed77615847f3865ecf72a4e836890
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1409067864,1409334842,dd63a0d7094d05fbe42c30532445afbdff3f9628
dd63a0d7094d05fbe42c30532445afbdff3f9628,dd63a0d7,"Show canned edit summaries in Wiki language, not UI language.","Show canned edit summaries in Wiki language, not UI language.

Bug: 69848
Change-Id: I09c77444369ab379a6a34a51537826146e9cdbd0
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1409321264,1409333719,4e7d8d9adc1bc6ea509c54e3eb5991d22d7e081a
4e7d8d9adc1bc6ea509c54e3eb5991d22d7e081a,4e7d8d9a,Correctly handle backlinks in references.,"Correctly handle backlinks in references.

Bug: 69965
Change-Id: I333ba57848d390d2cc89a7e0c6cebc3b731c2b17
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1409326805,1409327442,a6133b807d24c6470696b071001283cdf2c82d0f
a6133b807d24c6470696b071001283cdf2c82d0f,a6133b80,Fix jerking effect when scrolling with RTL language.,"Fix jerking effect when scrolling with RTL language.

Fixed by setting directionality of individual container elements, instead
of the overall html object.
Warning: not sure why exactly this fixes it.

Bug: 69754
Change-Id: I13cc00585aa63e887d685591221644e4a96ad8f4
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1409253275,1409273781,115e5163da369367fc6788f304436401da3412ed
115e5163da369367fc6788f304436401da3412ed,115e5163,Hide keyboard when Search fragment disappears.,"Hide keyboard when Search fragment disappears.

Bug: 69479
Change-Id: I8823fc2cc9554ae59e3d3b7e1e41bbc43d249e46
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1409255321,1409272785,b3ace2360a52f2820f866950732eb79c4d2d8b17
b3ace2360a52f2820f866950732eb79c4d2d8b17,b3ace236,"Make ""retry"" button expand vertically to fit text.","Make ""retry"" button expand vertically to fit text.

Bug: 70105
Change-Id: I94c4b6c21280621aeb77c55fe15f027ea222b01d
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1409256291,1409256291,4189d763391c4fa82ece08b9400d315ce33d2ea4
4189d763391c4fa82ece08b9400d315ce33d2ea4,4189d763,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: Ifa8ddc15ed04deb82b3fa4c40d0bfb7cb6745529
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1409094036,1409177660,b1724c62f3a6818c643cf90ffe322e895de40f81
b1724c62f3a6818c643cf90ffe322e895de40f81,b1724c62,"Merge ""Scroll to section after you're done editing it.""","Merge ""Scroll to section after you're done editing it.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1409079018,1409079018,"bfc902fa478f1a0dd0a86df7ac023a1ea10ac2b8,ab9a35f5efb0240757868120214b76867923932c"
bfc902fa478f1a0dd0a86df7ac023a1ea10ac2b8,bfc902fa,Implement full-text search.,"Implement full-text search.

- Display thumbnails along with page results
- Highlight the term(s) that were searched
- Continue the search when results scrolled down
- Automatically re-search based on suggestion (in case of misspelling)
- Enable this functionality only if it's a non-production build (for now)

Bug: 68438
Change-Id: I9627539762e286f630ef1cea6ae193a042a0977d
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1406314200,1409074344,80ad11b9ac71e9945bf059dd74b2f29e590d68ec
80ad11b9ac71e9945bf059dd74b2f29e590d68ec,80ad11b9,Make PageIssues & Disambig styling appear only for non-prod builds.,"Make PageIssues & Disambig styling appear only for non-prod builds.

Change-Id: I9f402b61db8c534e4a5e578243b38c1b50f76b0a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1407358505,1409074137,6777463022ff24feba787457370281b07af27447
6777463022ff24feba787457370281b07af27447,67774630,"Merge ""Check sectionsJSON was not null before trying to access .length() in…","Merge ""Check sectionsJSON was not null before trying to access .length() in SectionsFetchTask.processResult""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1409072729,1409072729,"aa83ee0975e02da26d8c6020fed5f1538912e45c,01129dff9839bd599557662c6ce17b7e1689dfd0"
aa83ee0975e02da26d8c6020fed5f1538912e45c,aa83ee09,Make fragment_page background the same as CSS background.,"Make fragment_page background the same as CSS background.

(Eliminates ""flashing"" effect when page first loads)

Bug: 69863
Change-Id: I40116b1077132592ef26ecc058ae1fae9aa3a063
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1409065123,1409070593,a6c3bf92d7c80f9a99017eea9c9d449e56cd35ab
ab9a35f5efb0240757868120214b76867923932c,ab9a35f5,Scroll to section after you're done editing it.,"Scroll to section after you're done editing it.

When you tap edit on a section and successfully save your edit, return to that
section rather than returning to the top of the article.

Change-Id: I17a61aaa9cd02223bb857283853802a893028a4f
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1408842815,1409008641,a6c3bf92d7c80f9a99017eea9c9d449e56cd35ab
01129dff9839bd599557662c6ce17b7e1689dfd0,01129dff,Check sectionsJSON was not null before trying to access .length() in…,"Check sectionsJSON was not null before trying to access .length() in SectionsFetchTask.processResult

https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom;TicketID=7708614
https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom;TicketID=7735170

Change-Id: If4667ea5e068c28b8daf21769dedcdb079fe932c
",,,,Alex Monk,krenair@wikimedia.org,Alex Monk,krenair@wikimedia.org,1408929760,1408984328,5fcc12b1684961f0ef77afc04ff6685c4ac68e34
a6c3bf92d7c80f9a99017eea9c9d449e56cd35ab,a6c3bf92,Add support for feature toggle of beta and alpha features.,"Add support for feature toggle of beta and alpha features.

Change-Id: Ia6caa6e7a80ca63e7d6e437045cb67bd0dcc0762
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1408546006,1408975130,5fcc12b1684961f0ef77afc04ff6685c4ac68e34
5fcc12b1684961f0ef77afc04ff6685c4ac68e34,5fcc12b1,Don't create tags or branches for alpha,"Don't create tags or branches for alpha

Change-Id: I83bbcf65f538de415711d03d0f8f116e6f4790bf
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1408738348,1408740724,6eaafa98d8ea44bbc974bbdb3a084ba94ac9a7a5
6eaafa98d8ea44bbc974bbdb3a084ba94ac9a7a5,6eaafa98,Add alpha build variant to prepare-release,"Add alpha build variant to prepare-release

For use by the automated build script

Change-Id: Ifa26da7a4f7ca13be78f6d534a816acbbced7442
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1408737575,1408738138,e0e97bb8888aa7f7178e8d832c7230b1916a11c0
e0e97bb8888aa7f7178e8d832c7230b1916a11c0,e0e97bb8,Make prepare-release executable,"Make prepare-release executable

Change-Id: I53d10ed65adf80f21687982cd9c9df7b7076cfd5
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1408722833,1408722833,711808c4d7a7a175fe084a77060890e5e84f048c
711808c4d7a7a175fe084a77060890e5e84f048c,711808c4,Bump versionCode,"Bump versionCode

Change-Id: I8499e2f5ad27a8f259be8483157002017413459c
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1408573858,1408573858,a7345e24ec614d5d0682810a909940da6367b279
a7345e24ec614d5d0682810a909940da6367b279,a7345e24,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: I5770d00b1b6c6a20cdd830fe88a46d47ebf2a330
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1408566978,1408566978,75b3292893f4ff6ccbe8b7758af1cf5c7d2662cc
75b3292893f4ff6ccbe8b7758af1cf5c7d2662cc,75b32928,Use new java-mwapi,"Use new java-mwapi

Change-Id: Iaa69705fe8ac3197980a0acc2320f1d86a0a981c
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1408396003,1408480971,85589f5505d7a27b972fa80934ffeb767e2593cd
85589f5505d7a27b972fa80934ffeb767e2593cd,85589f55,Add Http Request library to credits,"Add Http Request library to credits

Change-Id: I1c2d91d2e2fe89edb23218228653f29cffae8a8f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1408468584,1408480971,e6a205c2f60b11fa8425f563f24b0776e1521291
e6a205c2f60b11fa8425f563f24b0776e1521291,e6a205c2,Inherit Android platform version from parent project,"Inherit Android platform version from parent project

Change-Id: I2fbc6eae7e8bdd7a6d4d48ca1e37b5c4d22ca634
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1408395909,1408480971,72064c3a65d21a068f235459e9c8bf1f87f7143c
72064c3a65d21a068f235459e9c8bf1f87f7143c,72064c3a,"Merge ""Gradle build""","Merge ""Gradle build""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1408480305,1408480305,"a9bb2cfaae3f77458a29e1c7dc297c7889cc6eba,90015c2c4c366d6f5670ff52754502f576658840"
90015c2c4c366d6f5670ff52754502f576658840,90015c2c,Gradle build,"Gradle build

See also the additions in the README.mediawiki file.

Note that it requires the Android SDK package
extra-android-m2repository to be installed locally.

Added flavors for dev, ci, master, beta, prod
It automatically replaces the app icon and app label
for beta.

Added signing config for release builds.
To make release builds work:
Copy the signing.properties.sample file to
~/.sign/signing.properties and adjust the values.

What doesn't work yet?
[] instrumentationTest don't get picked up
[] I commented out the Gradle applicationId rename
   since that currently requires some backwards-
   incompatible changes. Will provide a separate
   [WIP] patch for that. We also have that functionality
   covered by our prepare-release.py script.

Change-Id: I98118aff3a36aa76e33ff7bad1ca978adb215522
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1408047704,1408477487,313f72e2029b7de254232f0e281b8c1f3a10be88
a9bb2cfaae3f77458a29e1c7dc297c7889cc6eba,a9bb2cfa,Final (for real) tweak of disambiguation styling/verbiage.,"Final (for real) tweak of disambiguation styling/verbiage.

Change-Id: I2e633adfd2368e08cf5de380a0cdc377184520db
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1408477121,1408477121,313f72e2029b7de254232f0e281b8c1f3a10be88
313f72e2029b7de254232f0e281b8c1f3a10be88,313f72e2,Put disambiguation links into a popup dialog.,"Put disambiguation links into a popup dialog.

- Also update the styling for page-issues/disambig buttons.
- No longer show redundant ""multiple page issues"" container
- No longer show ""ambox-notice"" type boxes

Change-Id: Idfc1a57b3d58f4eae608cd3dbfb7d9030fc4a4f2
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1407281122,1408465442,5224248423522136893d82e007e443d53b4eb1ed
5224248423522136893d82e007e443d53b4eb1ed,52242484,"Remember recently-used languages, and keep them at the top.","Remember recently-used languages, and keep them at the top.

Bug: 69175
Change-Id: I8df932255e5bf2bf9c02ff0c5e944ccb8a319a7d
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1408388924,1408453316,8c28479101c380a7eecc30722154d8058785c70c
8c28479101c380a7eecc30722154d8058785c70c,8c284791,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: I5e18cb5d9dec067b9d15b120eed5145d8257dcb6
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,Bernd Sitzmann,bsitzmann@wikimedia.org,1408380837,1408380837,1d911bf5df19791185a40c9ea79d7f5e9b47924b
1d911bf5df19791185a40c9ea79d7f5e9b47924b,1d911bf5,"Merge ""Update Android SDK and support libraries""","Merge ""Update Android SDK and support libraries""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1408380389,1408380389,"e28fe26160f2ac7090d52f045002a2d546809683,7b85cb86ee02b61ca7509b28529e24923c4ad373"
e28fe26160f2ac7090d52f045002a2d546809683,e28fe261,"No longer using abusefilter js/css, so remove the files.","No longer using abusefilter js/css, so remove the files.

Change-Id: I9ee2c9faf423b5d59247495ed0bd5ba56f9bfd83
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1407948724,1408373728,ae5c6b19029520214a4dfa9f6a21808b73b8aa32
ae5c6b19029520214a4dfa9f6a21808b73b8aa32,ae5c6b19,Use generator:prefixsearch instead of opensearch.,"Use generator:prefixsearch instead of opensearch.

Change-Id: I44863416a57e03f8f2053685af6e70c012c84830
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1407945841,1408369846,174d03897270ce416f6c93a26a88211855cc5956
7b85cb86ee02b61ca7509b28529e24923c4ad373,7b85cb86,Update Android SDK and support libraries,"Update Android SDK and support libraries

I recommend doing a mvn clean install
and in IntelliJ to do a reimport of Maven projects
and rebuild.

Change-Id: I1f6401ed4992a81af074bd79ba8a347599804300
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1408055743,1408055743,174d03897270ce416f6c93a26a88211855cc5956
174d03897270ce416f6c93a26a88211855cc5956,174d0389,Add important hint when script exits.,"Add important hint when script exits.

Change-Id: I043b4677ce6bc66c6b44b4ec73d49df7e7e0e3e1
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1407971780,1407971958,0071ae759951a3b7c98e0688cf7c8ac9bb501546
0071ae759951a3b7c98e0688cf7c8ac9bb501546,0071ae75,"Merge ""Update lead-in documentation for prepare-release script""","Merge ""Update lead-in documentation for prepare-release script""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1407971339,1407971339,"2928e8168f5784ff6d8bad264f67dc0e872151aa,4769de6b93a5ac473555e811d082d0c4e489bd78"
2928e8168f5784ff6d8bad264f67dc0e872151aa,2928e816,Bump versionCode,"Bump versionCode

Change-Id: I03304602557a540f76bf7bec54e5b137490352db
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407958101,1407958101,b3cdffcee895de1530dfcd1508dafbf654b6c278
b3cdffcee895de1530dfcd1508dafbf654b6c278,b3cdffce,Check if fragment is added before dealing with reference clicks,"Check if fragment is added before dealing with reference clicks

Bug: 69415
Change-Id: I7fc2f42daa134945063bc04ffdc0c1fba80609ce
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407952916,1407952916,0a54529fe0c0dda17fed59354ea6698eedb72327
0a54529fe0c0dda17fed59354ea6698eedb72327,0a54529f,Need only one variant for simplified Chinese,"Need only one variant for simplified Chinese

Since it's the default zh it would cover zh-rCN automatically.
This would make it behave the same as
https://gerrit.wikimedia.org/r/#/c/153729/.

Change-Id: I9ee57e61fc1e07314c646029c26661a96d10f70b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407949897,1407949897,c51a98c458b485a8089bb2f26b4d276406ae6891
c51a98c458b485a8089bb2f26b4d276406ae6891,c51a98c4,Update MW Java API,"Update MW Java API

to bring the fix for app indexing in.

Change-Id: I6c081f8e7db71bf02e24c02d91340e9f9d3f74d7
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407887180,1407947247,7609a1454f393b79c2ed816d8bae2e3822f969c4
7609a1454f393b79c2ed816d8bae2e3822f969c4,7609a145,Link default and HK Chinese language variant,"Link default and HK Chinese language variant

Symlinks:
values-zh -> values-zh-rCN
values-zh-rHK -> values-zh-rTW

Bug: 69304
Change-Id: I980f4bc866191e2ba26d4e5a6917f26ce56ca9ec
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407802415,1407802415,ec75b4fb137220b9ce44d00d8278e6caeba0ac96
ec75b4fb137220b9ce44d00d8278e6caeba0ac96,ec75b4fb,Remove old Chinese default language variant,"Remove old Chinese default language variant

Deleted old values-zh.

Bug: 69304
Change-Id: I91bb7c1d563e9c2696e7c6530232222e0b9082e6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407801953,1407801953,ab5dbfe7eb5a54cf86d9099f001f725bb98c62ed
ab5dbfe7eb5a54cf86d9099f001f725bb98c62ed,ab5dbfe7,Manual import of translations from TWN,"Manual import of translations from TWN

bug: 69304
Change-Id: I5d3d12c720a353a6f0aee2704f6b3480728ed4ac
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1407790560,1407793765,60a969d0a03f1b4d54c46847eb815be410cc5fb1
4769de6b93a5ac473555e811d082d0c4e489bd78,4769de6b,Update lead-in documentation for prepare-release script,"Update lead-in documentation for prepare-release script

Change-Id: I3d70f9894fdb44d2bfb53da8d5cac723be8a2010
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1407444240,1407451513,60a969d0a03f1b4d54c46847eb815be410cc5fb1
60a969d0a03f1b4d54c46847eb815be410cc5fb1,60a969d0,prepare-release.py commits versionCode bump,"prepare-release.py commits versionCode bump

when uprev is True
Also change versionName in repo to just say ""dev"" to avoid
confusion about old versionNames in master

Also dropped the ""tagged_"" prefix of the tags, so it's
just ""releases/*"" instead of ""tagged_releases/*""

Change-Id: Ie3f309746bc621224e2e82a34f0ad3793292ba4b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407351415,1407351514,4fcf45d772711b78e6c46a229ae5d68f10abacac
4fcf45d772711b78e6c46a229ae5d68f10abacac,4fcf45d7,"Merge ""Change showSoftKeyboard to use SHOW_FORCED.""","Merge ""Change showSoftKeyboard to use SHOW_FORCED.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1407338552,1407338552,"59b9160137d8dc0d336ea3c64e71edf1518ee6c6,fcb500f2816c40ce3add14f5a7cf95d23a8e69a1"
59b9160137d8dc0d336ea3c64e71edf1518ee6c6,59b91601,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I2b8175338008e22d8303e5d4771aab810d7ea01b
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1407336637,1407336637,5b755d93f49a323caf9bd5d8cdf889f6421c1292
fcb500f2816c40ce3add14f5a7cf95d23a8e69a1,fcb500f2,Change showSoftKeyboard to use SHOW_FORCED.,"Change showSoftKeyboard to use SHOW_FORCED.

The keyboard wasn't always showing when this method was called because it used
SHOW_IMPLICIT instead of SHOW_FORCED. This should fix a few bugs relating to
the keyboard not showing.

BUG: 66816
Change-Id: I34f06280388d0f3fc4dedb1903a884c56d1f5577
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1407326136,1407326136,5b755d93f49a323caf9bd5d8cdf889f6421c1292
5b755d93f49a323caf9bd5d8cdf889f6421c1292,5b755d93,Bump versionCode,"Bump versionCode

Change-Id: Ic3101fc10ceee450f4d642ec282b1804f8ff6207
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407190674,1407194860,d703c7182bcec5dbc8b99646ebc0fe9de278a956
d703c7182bcec5dbc8b99646ebc0fe9de278a956,d703c718,Remove unused strings,"Remove unused strings

about_terms_of_use
about_privacy_policy

have been moved to/split up into
terms_of_use_url
terms_of_use_description
privacy_policy_url
privacy_policy_description

Change-Id: Id6e34f5b2aed4da29c2a771863253d148ef75e7b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407187057,1407187057,99fac92389e49c29436d2ce7f439a4536257d762
99fac92389e49c29436d2ce7f439a4536257d762,99fac923,TranslationTests: collect all missing parameters before failing,"TranslationTests: collect all missing parameters before failing

Change-Id: Ib3d8f58525720147ca76ce7fce991e0761843548
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407177369,1407177369,57e5f1a5fb5354f184dd2dbf9acbece0afb59e64
57e5f1a5fb5354f184dd2dbf9acbece0afb59e64,57e5f1a5,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: Id6c36ef57776dbbefdba031fe14eefcac1a5daab
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1407171759,1407176616,705b505cc5120194876d6878710d223f9a2eefca
705b505cc5120194876d6878710d223f9a2eefca,705b505c,Hide ToC when Nav drawer pulled out.,"Hide ToC when Nav drawer pulled out.

Bug: 64664
Change-Id: Ia8779b98eba90315c307f2e8f597523f90342ef4
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1407166761,1407171478,7c5b9584d30d0027bd9a89007e6eab85ee90e3e1
7c5b9584d30d0027bd9a89007e6eab85ee90e3e1,7c5b9584,Properly escape % and _ in SQL searches.,"Properly escape % and _ in SQL searches.

Bug: 66230
Change-Id: I918b7045d816c5ffd69d9305f64aff17f8f0f61a
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1407163628,1407163628,417cf03924d374a66b1376a0ddc8cf0fee0d60f7
417cf03924d374a66b1376a0ddc8cf0fee0d60f7,417cf039,"Make the ""Today"" icon a bit larger.","Make the ""Today"" icon a bit larger.

...so that it's visually perceived as the same size as the other icons.

Change-Id: Ia291a7f7f0941606d546cdc5b754273c082aa0d9
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1406984419,1406984623,ccf243a000d744f4d16493cc520be9b2e6b274ee
ccf243a000d744f4d16493cc520be9b2e6b274ee,ccf243a0,Support language variants on Chinese Wikipedia.,"Support language variants on Chinese Wikipedia.

* Chinese Wikipedia Users reporting use of wrong locale.
* This first part updates Accept-Language for Chinese.
* A follow on patch could potentially list two locales:
  -Simplified Chinese (HANS)
  -Traditional Chinese (HANT)
* However, it is probably worth keeping generic Chinese because:
  -HANS/HANT choice may be too generic for user with special dialect.
  -If this patch solves the problem, it's less work for users.
* Another follow on patch should address locales at large:
  -We should first see if this Chinese patch is good enough for ZH.
  -Some languages using Cyrillic alphabet have a similar issue
  -We should solve for same language, different locale LTR/RTL stuff.

Change-Id: I3c4bed32ddfd89916f62cf71ff3996b7a7789815
",,,,dr0ptp4kt,abaso@wikimedia.org,BearND,bsitzmann@wikimedia.org,1406934629,1406941409,b51c37e8dda4e5a90a968db7105af4cccbd17800
b51c37e8dda4e5a90a968db7105af4cccbd17800,b51c37e8,Refactor prepare release script,"Refactor prepare release script

* Shorter script name
* Extracted main into own function
* Only one level of elif's
* Some doc and whitespace fixes

Change-Id: I3f383ab442842c5cf4a6fa1cfcb99bd5549801c7
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1406926406,1406935379,ce6d1badca5444aa8d189076218de87577ed7ea2
ce6d1badca5444aa8d189076218de87577ed7ea2,ce6d1bad,Add EL for font and theme change events,"Add EL for font and theme change events

Change-Id: Icd8d73946f540b3dad498b03223179684fd7874f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1406912192,1406912192,90b1a3537a75760ceb799a1e39907cc3a9813213
90b1a3537a75760ceb799a1e39907cc3a9813213,90b1a353,Checkstyle: magic numbers,"Checkstyle: magic numbers

Change-Id: I208a814b023ca701e900339a20bba54463ebe69b
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1406904749,1406904749,08a00c16c39493fb48fe8b2e0604dabf2c10343a
08a00c16c39493fb48fe8b2e0604dabf2c10343a,08a00c16,"Checkstyle: ""whitespace"" and ""design""","Checkstyle: ""whitespace"" and ""design""

Change-Id: Icccd8cfc3dd83a65e44c8a4a9f4f4198d6791982
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1406902792,1406904193,e496ec8abe5a56bdb47e4d04dbfeccdc2cd5cc48
e496ec8abe5a56bdb47e4d04dbfeccdc2cd5cc48,e496ec8a,Support multichannel builds.,"Support multichannel builds.

Change-Id: I3c4b4022629317149518622d7c7a0f71b4dce1ed
",,,,dr0ptp4kt,abaso@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1406334325,1406850532,e7f3e59925e96a6782b17886a439370493a36502
e7f3e59925e96a6782b17886a439370493a36502,e7f3e599,"Add a ""Today"" button to the menu which leads to the main page.","Add a ""Today"" button to the menu which leads to the main page.

For consistency with the iOS app.

Change-Id: I35ae5c692f6603cb77fd17df7561e0c4496ab850
",,,,Deskana,dgarry@wikimedia.org,dbrant,dbrant@wikimedia.org,1406406486,1406835095,e21ce44f04ab8e6036ae9250802f4cd3f5fe5a3c
e21ce44f04ab8e6036ae9250802f4cd3f5fe5a3c,e21ce44f,Fix possible crash related to JSON transfer across the Bridge.,"Fix possible crash related to JSON transfer across the Bridge.

Bug: 68656
Change-Id: I4cf403a23abb2620c83f68b1ef3219115aefea9e
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1406562304,1406821835,7316e5c6eb03e55afbb9f0e1b020485245031d7e
7316e5c6eb03e55afbb9f0e1b020485245031d7e,7316e5c6,"When DoEditTask fails to recognise the result status, give a useful error message","When DoEditTask fails to recognise the result status, give a useful error message

Errors like this are not too useful:
https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom;TicketID=7694943

Change-Id: I28205de7e73ec34f037b4fded56671574c3c0e7f
",,,,Alex Monk,krenair@wikimedia.org,Alex Monk,krenair@wikimedia.org,1406776204,1406776204,1124606be6ffdc77639073d9f96dc8c46e16ee97
1124606be6ffdc77639073d9f96dc8c46e16ee97,1124606b,"Improve behavior of ""empty"" screen in History and Saved Pages.","Improve behavior of ""empty"" screen in History and Saved Pages.

When going to History or Saved Pages, the ""empty"" icon and message were
flashing momentarily before showing results.

Change-Id: I721ba5506c29aa61e0a32f48ee68851986b33359
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1406743271,1406752524,6cfec463ca3d0236ab3be1c7a13e38e260e8a70d
6cfec463ca3d0236ab3be1c7a13e38e260e8a70d,6cfec463,Add disambiguation button.,"Add disambiguation button.

- Replaces the hatnote at the top of a page with a styled button.
- If a page has more than one hatnote, the other hatnotes are hidden.
- If the hatnote has more than one link, the *last* link is used as the
  disambiguation link (in accordance with the Style Guide).

Change-Id: I0b38a101f642b1c72b46fd249f11ebe9826ac85c
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1406666729,1406751757,ddabd981e310025714bd0898f85d783a27fb4832
ddabd981e310025714bd0898f85d783a27fb4832,ddabd981,"Merge ""Handle page internal links inside reference display""","Merge ""Handle page internal links inside reference display""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1406745015,1406745015,"8150be95fb70daa050e3115171a9663849e0d329,6607f839266b9a678838943794eaddc796620101"
8150be95fb70daa050e3115171a9663849e0d329,8150be95,Use double quotes in strings.,"Use double quotes in strings.

To be consistent with MediaWiki.

Change-Id: I7967f72b2ae14586a0721e693b6bd9806fcf44e5
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1406743624,1406743624,3db5f3406d549924670eb078e0b71ccbc01e78be
3db5f3406d549924670eb078e0b71ccbc01e78be,3db5f340,"Merge ""Bring back some translated strings""","Merge ""Bring back some translated strings""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1406727823,1406727823,"32b33e826edb9f1acfb161126be538a07aae31b6,cb4f3638e5f8cf80eedc4ea7980446e2e697bd5d"
32b33e826edb9f1acfb161126be538a07aae31b6,32b33e82,"Merge ""Fix background for dark theme in edit summary: other""","Merge ""Fix background for dark theme in edit summary: other""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1406725924,1406725924,"2de7725f2208dd73147c0c3c64ddadd95461824a,c8accbc1213b0ffd475e4b3024703a210d1e48e5"
6607f839266b9a678838943794eaddc796620101,6607f839,Handle page internal links inside reference display,"Handle page internal links inside reference display

Bug: 68336
Change-Id: I12b0ce1c33d388e7f57a128157b6ef481602df6e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1406692846,1406692846,029aec5b4aa29a2e648569e1ab7d25f65e72b6fe
c8accbc1213b0ffd475e4b3024703a210d1e48e5,c8accbc1,Fix background for dark theme in edit summary: other,"Fix background for dark theme in edit summary: other

When you click on the ""Other"" tag it had a white background.

Change-Id: I9b1db249fe7355563101815c068610d0eccf3bd9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1406680616,1406680616,029aec5b4aa29a2e648569e1ab7d25f65e72b6fe
2de7725f2208dd73147c0c3c64ddadd95461824a,2de7725f,Updated launcher icons,"Updated launcher icons

per May's new svgs

Change-Id: Idd8fbd57128aa7741ce2e9894f73ceecc041639e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1406677117,1406677133,029aec5b4aa29a2e648569e1ab7d25f65e72b6fe
029aec5b4aa29a2e648569e1ab7d25f65e72b6fe,029aec5b,Show page issues,"Show page issues

Add a link to a page that has issues.
When it's pressed show a dialog with the issues.
Slightly different blue color for the flag in the web page,
depending on light or dark mode.

Change-Id: Ibd3054cc3e7142447de8d35021a006fbccd12bb9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1406654853,1406655224,4338fede46f008ca6f300f028f486ca05b26bc28
cb4f3638e5f8cf80eedc4ea7980446e2e697bd5d,cb4f3638,Bring back some translated strings,"Bring back some translated strings

that were unnecessarily removed from PS1 of last import.
Also improved the qq string for editing_error_spamblacklist
since several translations missed to include the %s parameter.

Updated TranslationTests to include saved_pages_search_empty_message.

Change-Id: Ifdc5507b2805d73b14627b07cc5e8e07a25c215e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1406613202,1406613202,4338fede46f008ca6f300f028f486ca05b26bc28
4338fede46f008ca6f300f028f486ca05b26bc28,4338fede,"Add showSoftKeyboard method to Utils, and use it where necessary.","Add showSoftKeyboard method to Utils, and use it where necessary.

- When the Search field is clicked, or when it gains focus
- When the Find-in-page field comes into view
- When the ""other"" edit summary comes into view

This also fixes the behavior of the Nav menu when clicking/focusing on the
Search field.

Bug: 68682

Change-Id: I3290f8921c02b29844b480995dc8220e746ba644
",,,,Deskana,dgarry@wikimedia.org,YuviPanda,yuvipanda@gmail.com,1406501393,1406576140,a9365dc6ac10159233f1234caf1d24d6f45858a6
a9365dc6ac10159233f1234caf1d24d6f45858a6,a9365dc6,Show number of matches when finding in page,"Show number of matches when finding in page

(available only in API16+)

Original feature request:
https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom&TicketID=7662758

Co-authored-by: dbrant <dbrant@wikimedia.org>
Change-Id: If18fccc36ae0eac336f8c9988d681f77b5ef0f53
",,,,Alex Monk,krenair@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405798584,1406575250,e626b55ff91d52cc988c00cd34b6a3ec250329df
e626b55ff91d52cc988c00cd34b6a3ec250329df,e626b55f,Manual import of translations from TWN,"Manual import of translations from TWN

Change-Id: Ia0ee581d144a55b6443cc2e765ae85f50dd27f7f
",,,,Bernd Sitzmann,bsitzmann@wikimedia.org,YuviPanda,yuvipanda@gmail.com,1406564336,1406565703,3e0fac799cab160c79817ec88aa2c029714f0b98
3e0fac799cab160c79817ec88aa2c029714f0b98,3e0fac79,Move legally required policy links.,"Move legally required policy links.

Move privacy policy and terms of use links from the about page to underneath
the button to access the about page, per a legal requirement that these links
be more accessible.

Change-Id: I4a6688e6aebd185241d091dfa55fa25c5dba2a87
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1406422969,1406484005,2b35bc9b37d29706cc37cbb1fcdee70a1cf58443
2b35bc9b37d29706cc37cbb1fcdee70a1cf58443,2b35bc9b,Fix abuse filter appearance in Night mode.,"Fix abuse filter appearance in Night mode.

Also fix possible crash related to don't-keep-activities.

Change-Id: Ia16ac0ec5509ab77a32125b73faa9db67a2a959a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1406300296,1406307578,578f25b4c9a8e20ee7cce62b8e6a0e622cca2f3d
578f25b4c9a8e20ee7cce62b8e6a0e622cca2f3d,578f25b4,Fix background of selected Saved Pages and History items.,"Fix background of selected Saved Pages and History items.

Bug: 68409
Change-Id: I14016e0dfa5f9daf7cc9bf650f91a921cd596558
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1406212669,1406303694,eb4f4551daf831863b3ca33672958e4a2616f09a
eb4f4551daf831863b3ca33672958e4a2616f09a,eb4f4551,Hide reference dialog when on-wiki link is clicked.,"Hide reference dialog when on-wiki link is clicked.

Bug: 68337
Change-Id: I44e6828adf65f2dc2ceb7ceeb577e09851df4822
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1406211964,1406303566,ee57f236eb6f026f14a52dc08ef015eadd474ad2
ee57f236eb6f026f14a52dc08ef015eadd474ad2,ee57f236,Fix appearance of images in Night mode.,"Fix appearance of images in Night mode.

- Explicitly apply a white background for images, so that images with
  transparency will appear correctly (since most images were intended to
  be viewed on a white background)
- However, for math formulae, keep the background transparent, but invert
  the image using a filter! (sadly, this currently only works for KitKat+)

Bug: 68408
Bug: 68252
Change-Id: I3b3286246c84dc5b0bf87ad8d4f9016c4a37c038
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1406224648,1406224648,530707c6d6a662cdc8c559391b97b5827f3a8290
530707c6d6a662cdc8c559391b97b5827f3a8290,530707c6,"Merge ""release 73""","Merge ""release 73""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1406148760,1406148760,"0c3df21a0bf19ae4941531c6457d53e7942e3ccd,76034a55ed5c125bbbeebe0e26fbd5570fb1cb52"
76034a55ed5c125bbbeebe0e26fbd5570fb1cb52,76034a55,release 73,"release 73

Change-Id: I39799edb957e9ad98ba121b05b215f714765d221
",,,,Dmitry Brant,dbrant@wikimedia.org,Dmitry Brant,dbrant@wikimedia.org,1406140088,1406147945,bc2424b4267b12f3516b7026836710463ad1941d
0c3df21a0bf19ae4941531c6457d53e7942e3ccd,0c3df21a,Support identification of APK channel distribution.,"Support identification of APK channel distribution.

* For appstores and preload OEMs.
* The User-Agent will get updated if channel descriptor present.
* See comments for further information.
* A follow-up patch should enhance make-release to update manifest for APKs.

Change-Id: Iaf4b479821e9dadc32be5548c679440cb0f3510a
",,,,dr0ptp4kt,abaso@wikimedia.org,dbrant,dbrant@wikimedia.org,1405702761,1406124349,d65de5a33f83eb6a77423de9cb1c5bcea9ec7d3b
d65de5a33f83eb6a77423de9cb1c5bcea9ec7d3b,d65de5a3,"Merge ""Support Kindle text size change.""","Merge ""Support Kindle text size change.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1406073977,1406073977,"649761c89a6482cae23c59df06b7fabea8b0ad00,af0c098a5ac82fe70af623fb8d06d5ef1587556d"
af0c098a5ac82fe70af623fb8d06d5ef1587556d,af0c098a,Support Kindle text size change.,"Support Kindle text size change.

Change-Id: I9d3f93c2822b4bed50b0a7efd2b70538cbe2686e
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1406073576,1406073576,f3370145337814912e3317fa2d6048d8649b1772
649761c89a6482cae23c59df06b7fabea8b0ad00,649761c8,"Merge ""Codestyle: Category Design (some in App)""","Merge ""Codestyle: Category Design (some in App)""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1406068285,1406068285,"11dc75e4d2bc5046c312559496a88248d7330349,be982494210794a81683c697c7246dcc0952b728"
11dc75e4d2bc5046c312559496a88248d7330349,11dc75e4,Update MobileApp CSS to pick up black infoboxes,"Update MobileApp CSS to pick up black infoboxes

Change-Id: Icc4960a551dcd567eb7186dfe724a0a5514c244b
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1406066515,1406066515,f3370145337814912e3317fa2d6048d8649b1772
be982494210794a81683c697c7246dcc0952b728,be982494,Codestyle: Category Design (some in App),"Codestyle: Category Design (some in App)

Refactored constants for animations and preference keys.
Introduced new class PreferenceKeys but tried to keep the
refactoring step small and manageable.

Change-Id: I0961efffac399f7f574d5b50c0c169abab915862
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405657107,1406064687,f3370145337814912e3317fa2d6048d8649b1772
f3370145337814912e3317fa2d6048d8649b1772,f3370145,Remove inline colors from within tables in night mode,"Remove inline colors from within tables in night mode

Change-Id: Ie14ea00b01bb8d9ef48f03e897f20e3823ae04fb
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1405940781,1405942079,bc2424b4267b12f3516b7026836710463ad1941d
bc2424b4267b12f3516b7026836710463ad1941d,bc2424b4,Make beta script also change the app label,"Make beta script also change the app label

Change-Id: If7fd10f515ec95451df3644a8b35c085ee2a65ba
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405705466,1405705677,79e36bb6626c3a70f062e8575817747a7faf4b30
79e36bb6626c3a70f062e8575817747a7faf4b30,79e36bb6,Update packaged CSS assets from betalabs.,"Update packaged CSS assets from betalabs.

Change-Id: Ie284dce60d24d262a038567e84add3ba2349cc0a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1405610628,1405704468,0d7f601be710ddd643377def14aedb11fe18eacb
0d7f601be710ddd643377def14aedb11fe18eacb,0d7f601b,"Merge ""Codestyle: Category Coding (some Utils)""","Merge ""Codestyle: Category Coding (some Utils)""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1405700479,1405700479,"cf1ac9cae46aeb73c55df2d0286acddd6c02ad17,7d2ef3c96c7b5c5cd821deb2c8c8dc7c8b0af1d8"
cf1ac9cae46aeb73c55df2d0286acddd6c02ad17,cf1ac9ca,"Merge ""Codestyle: Category Coding (tests)""","Merge ""Codestyle: Category Coding (tests)""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1405700381,1405700381,"a0d0142a081d3577ad42afc3e50f633b195bb1be,8b0634653208c4540d9fe2f5168a6098ffeceeac"
a0d0142a081d3577ad42afc3e50f633b195bb1be,a0d0142a,Fix crash when long-pressing in the WebView.,"Fix crash when long-pressing in the WebView.

It was because our PageActivity extends ActionBarActivity, but keeps the
ActionBar hidden. TODO: Make the PageActivity use the true ActionBar.

Bug 68166

Change-Id: I57ce3fd74f8b5420af4500b0770a81bbb9bdfad4
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1405607073,1405696538,80f6c3e64a420f3af57c3c66ddd8bc0c78f71dbb
80f6c3e64a420f3af57c3c66ddd8bc0c78f71dbb,80f6c3e6,Add progress indicator when changing font size.,"Add progress indicator when changing font size.

(since changing font size can be quite slow for large pages)

Change-Id: If04f66ca726f54ee9fb2dd4c99e41b29613938a9
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1405620484,1405696130,da552ff8e6030511a6321933607c028584700cc0
7d2ef3c96c7b5c5cd821deb2c8c8dc7c8b0af1d8,7d2ef3c9,Codestyle: Category Coding (some Utils),"Codestyle: Category Coding (some Utils)

Change-Id: Ie97e173f374d7a173e485adfb5e92b904ee1ab44
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405633916,1405633916,8b0634653208c4540d9fe2f5168a6098ffeceeac
8b0634653208c4540d9fe2f5168a6098ffeceeac,8b063465,Codestyle: Category Coding (tests),"Codestyle: Category Coding (tests)

Change-Id: I7a982fe3ac2ea34b5795184b8ad66dd32f541ee1
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405633876,1405633876,da552ff8e6030511a6321933607c028584700cc0
da552ff8e6030511a6321933607c028584700cc0,da552ff8,"Merge ""Fix NPE parsing mobileview JSON""","Merge ""Fix NPE parsing mobileview JSON""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1405627803,1405627803,"549b894aa7f8b732c13d1791383605750ee8adb8,9615f2914b08489075bbaede88911966cce6c502"
549b894aa7f8b732c13d1791383605750ee8adb8,549b894a,Fix NPE from editing.EditHandler.onMessage,"Fix NPE from editing.EditHandler.onMessage

If fragment is not added then we don't want to do those actions.

Bug: 68171
Change-Id: If322d0408d02279b58b64cebcea2ce89b0c40e54
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405620513,1405620513,471d5fc57068d7578b6b4dd9b01036484d0b0bb1
9615f2914b08489075bbaede88911966cce6c502,9615f291,Fix NPE parsing mobileview JSON,"Fix NPE parsing mobileview JSON

Only explanation for a NPE is that json.optJSONObject(""protection"") is null.

Bug: 67807
Change-Id: I0d8a4cef506dfcb7fe2aa661e751bd98ec829eb8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405610805,1405610805,471d5fc57068d7578b6b4dd9b01036484d0b0bb1
471d5fc57068d7578b6b4dd9b01036484d0b0bb1,471d5fc5,Change beta script to git tag releases,"Change beta script to git tag releases

Optional 2nd step: push tag to gerrit.

Change-Id: Ib57e4cdbbd1f88151f2f2c68c757889f9cc22e83
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405545228,1405552776,f6635186965938701e4e99a15d61e78c9b3d0a5b
f6635186965938701e4e99a15d61e78c9b3d0a5b,f6635186,Fix icon replacement in beta script,"Fix icon replacement in beta script

Change-Id: If7e076083306f9f44b61ee08377317f023bbb809
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405545688,1405545688,49ece488997dcc86b976ca7b673e08ddffd5c422
49ece488997dcc86b976ca7b673e08ddffd5c422,49ece488,"Merge ""Change theme chooser menu title to Font and theme""","Merge ""Change theme chooser menu title to Font and theme""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1405530049,1405530049,"b1b2135993262c8bd276b02f89064b486056a2a0,f2d119743afa576b39d183a9a679f8c7ed5e2b82"
f2d119743afa576b39d183a9a679f8c7ed5e2b82,f2d11974,Change theme chooser menu title to Font and theme,"Change theme chooser menu title to Font and theme

Change-Id: I77a0de400d8fd2883d7ee9e328bd2a04efdd2ae9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405529911,1405529911,ba13f967b2bfa39c87edaadfc7ec16a6f56514c6
b1b2135993262c8bd276b02f89064b486056a2a0,b1b21359,Handle network errors when reloading captcha.,"Handle network errors when reloading captcha.

Bug: 68109
Change-Id: I49dd46f969d99bd02d5a291e2cfb2dae13ee6ea9
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1405526800,1405529173,ba13f967b2bfa39c87edaadfc7ec16a6f56514c6
ba13f967b2bfa39c87edaadfc7ec16a6f56514c6,ba13f967,Update overflow menu text when Saved pages are saved/loaded.,"Update overflow menu text when Saved pages are saved/loaded.

Change-Id: I2fe3aa905b26925398e80600590306857e302103
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1405352440,1405528617,50e227a88576ecbb62f4a4f0f7042a86965da90d
50e227a88576ecbb62f4a4f0f7042a86965da90d,50e227a8,Final design refinements for Font/Theme chooser.,"Final design refinements for Font/Theme chooser.

- tweaked margins between text and buttons.
- updated background of overflow menu in Dark mode.

Change-Id: I247e4d56302a0f8bf94945f02a415c24500976cc
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1405515168,1405528226,5e33be362dd907a1262bdef98502d39aebaec217
5e33be362dd907a1262bdef98502d39aebaec217,5e33be36,Fix action bar color in 2.3 (typo),"Fix action bar color in 2.3 (typo)

Change-Id: I188538b58d9e0235be964c1a509dc1117585b439
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1405524676,1405527680,c22d27477c8873487e2fc144a1442c0a4f7a5047
c22d27477c8873487e2fc144a1442c0a4f7a5047,c22d2747,Restrict search EditText to single line (including hint).,"Restrict search EditText to single line (including hint).

On some smaller devices, the hint text (""Search Wikipedia Zero"") overflows
into two lines, even though ""singleLine"" is set to true.

Change-Id: Id5d4a71a5405a80e0f26456744412fc22e535cdb
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1405525018,1405527557,ade868cad6f59b08f18a347e2424134556837326
ade868cad6f59b08f18a347e2424134556837326,ade868ca,Set correct link color in TextViews that have links.,"Set correct link color in TextViews that have links.

Change-Id: Ie459f0941147849b3cac9b4599a0c34cab51c052
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1405521602,1405521602,a71f02484387404ba4a37e2ab4f39d4c2ecf9d20
a71f02484387404ba4a37e2ab4f39d4c2ecf9d20,a71f0248,"Merge ""Minor references pane adjustments""","Merge ""Minor references pane adjustments""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1405521318,1405521318,"7605240e52172787a5ceea0c43b3daf09085533e,adcf7ef054d910ad621a6312201a04fec2ad8fc6"
7605240e52172787a5ceea0c43b3daf09085533e,7605240e,Manual import of translations from translatewiki.net,"Manual import of translations from translatewiki.net

- Also removed unnecessary text attribute setting
  in preview fragment, since it is being set in code

Change-Id: I45fd1bbaeeff6d11f8d34809252471e10f2f0440
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1405369875,1405519313,105da322c3b6cf1e95aa55d5d744d50dfc1ebdb1
105da322c3b6cf1e95aa55d5d744d50dfc1ebdb1,105da322,Checkstyle: Category Design (a few more),"Checkstyle: Category Design (a few more)

RecurringTask.java:21, VisibilityModifierCheck
Variable 'context' must be private and have accessor methods

SQLiteContentProvider.java:12, VisibilityModifierCheck
Variable 'persistanceHelper' must be private and have accessor methods

Change-Id: I1408b75a8dd95eecb04ce569b27fd765bc694281
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405490895,1405518666,2e03a30a9ab9a2a17e79d75c07f05725d820b713
2e03a30a9ab9a2a17e79d75c07f05725d820b713,2e03a30a,Checkstyle: various Categories + remove unused code,"Checkstyle: various Categories + remove unused code

Change-Id: Ie8d634b683e4c1959f967d068d9774b7ee1cc0f1
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405489256,1405518519,4ac2d2d1a04d8457eb33b6b3da534d23de7261a3
4ac2d2d1a04d8457eb33b6b3da534d23de7261a3,4ac2d2d1,Checkstyle: Category Design (some) + Sizes,"Checkstyle: Category Design (some) + Sizes

Also updated checkstyle.xml to allow for suppression of specific warnings
since we can't do much about the generated static data methods being too long.

Updated README to include steps how to install and configure the
Checkstyle-IDEA plugin to use our checkstyle.xml file.

Change-Id: Iedd809c857ebb6e49e1169ee25adfcfc3a2c9e62
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405478666,1405518368,e156f8b3cb44d708fcf894fc925a065d4cdb2e53
e156f8b3cb44d708fcf894fc925a065d4cdb2e53,e156f8b3,Checkstyle: Category Coding (some),"Checkstyle: Category Coding (some)

Change-Id: I4824d10a1a22def72e9135a441cc90299f6ca4dd
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405456103,1405518209,4b13e0cad5e97f3758474325d6833b3b29af04cf
4b13e0cad5e97f3758474325d6833b3b29af04cf,4b13e0ca,"Merge ""License string corrected""","Merge ""License string corrected""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1405518202,1405518202,"626858e40a8ead5b999961f2dab09c4f80000745,2ea1a4c50be8181fb620d782c5e08cba8620a925"
2ea1a4c50be8181fb620d782c5e08cba8620a925,2ea1a4c5,License string corrected,"License string corrected

Correct license abreviation is CC BY-SA 3.0.
(per https://creativecommons.org/licenses/by-sa/3.0/)
Affects:
* edit_save_action_license_logged_in
* edit_save_action_license_anon

Spotted by Jopparn at https://translatewiki.net/wiki/Thread:Support/About_Wikimedia:Wikipedia-android-strings-edit_save_action_license_logged_in/sv

Change-Id: I50286b6afde9e88c092b15790baaadf3ab0796b6
",,,,lokal-profil,lokal.profil@gmail.com,lokal-profil,lokal.profil@gmail.com,1405504135,1405504135,75ac117990758d0ac4e8353a512a4d26e15253a1
626858e40a8ead5b999961f2dab09c4f80000745,626858e4,Shorter menu item for Font/theme settings,"Shorter menu item for Font/theme settings

Change-Id: I8d90d3885b51ed169d21d5eee9b0a14d8f9216a8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405401883,1405470235,75ac117990758d0ac4e8353a512a4d26e15253a1
adcf7ef054d910ad621a6312201a04fec2ad8fc6,adcf7ef0,Minor references pane adjustments,"Minor references pane adjustments

per design: more padding, bigger font,
more spacing between lines,
same link color as for dark mode

Change-Id: If019f91df03d40a1e27789a1d654d9f8a5015062
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405469921,1405469921,75ac117990758d0ac4e8353a512a4d26e15253a1
75ac117990758d0ac4e8353a512a4d26e15253a1,75ac1179,Checkstyle: Category Naming,"Checkstyle: Category Naming

Also updated the README to explain how to generate the staticdata files.
Removed unused method.

Change-Id: Ib0949edc95660b96335940daa11332f4997071e4
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405456691,1405463116,e19887e5397f8350565a0938614e53a6a275331e
e19887e5397f8350565a0938614e53a6a275331e,e19887e5,Add search to saved pages.,"Add search to saved pages.

Change-Id: I63273edb676f2a329996ad8a13b6c5e67735815a
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1405435663,1405456771,b1cd38eea6aa6cfd365578fdd1c808f700d57bb3
b1cd38eea6aa6cfd365578fdd1c808f700d57bb3,b1cd38ee,Show references in a pane at the bottom of the app,"Show references in a pane at the bottom of the app

Lets people see references without having to scroll.

Change-Id: I2840b1f08161dd09ad3566f770a35c13abd8a723
",,,,bearND,bsitzmann@wikimedia.org,YuviPanda,yuvipanda@gmail.com,1405361471,1405455351,cddc508de90233722ed31e243b4c63edf0ec4d22
cddc508de90233722ed31e243b4c63edf0ec4d22,cddc508d,Checkstyle: Category Blocks,"Checkstyle: Category Blocks

Change-Id: I628dbb33f4e2cf974a1fb41211daaa5b8381e82a
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405446726,1405446726,937fa75411565d4b3066d898c0269628badae486
937fa75411565d4b3066d898c0269628badae486,937fa754,Checkstyle: Category Whitespace,"Checkstyle: Category Whitespace

Change-Id: I8be49f59a9d67a49caf2d8233f8e811f95720491
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405444549,1405446557,5c94b25f03d3c3f7c7c9b8fb7784e8a3fa20b214
5c94b25f03d3c3f7c7c9b8fb7784e8a3fa20b214,5c94b25f,Checkstyle: Category Regexp,"Checkstyle: Category Regexp

Change-Id: I76607979385d7ccc6ff2dac83bc890fd537b80ed
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405443133,1405443133,da0f88efcb725449f84d59529162d2bd80ac27e2
da0f88efcb725449f84d59529162d2bd80ac27e2,da0f88ef,Checkstyle: Category Modifier,"Checkstyle: Category Modifier

Change-Id: I2c949de186b3034885dc850918e05794b516806c
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405442600,1405442972,7c183385de53a74518edd54976987eb513214ed0
7c183385de53a74518edd54976987eb513214ed0,7c183385,Checkstyle: Category Imports,"Checkstyle: Category Imports

Change-Id: Ib4872697d92d7e4ca533f496fc1d0d8690c491f6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1405442557,1405442963,df9c677b66d8b7aefe035d2d70f8cce2c30ee1c8
df9c677b66d8b7aefe035d2d70f8cce2c30ee1c8,df9c677b,"Order saved pages alphabetically, instead of by date.","Order saved pages alphabetically, instead of by date.

Bug: 67028
Change-Id: Ic1825fa3a95a1f170ff1f9567fa127a477c7bfd9
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1405433413,1405433413,9f81ed70ebfaed1b581dd4dbb49838a3126d9bff
9f81ed70ebfaed1b581dd4dbb49838a3126d9bff,9f81ed70,Slightly better event for unregistering from Bus.,"Slightly better event for unregistering from Bus.

(the previous one left open the possibility for register/unregister
imbalance)

Change-Id: I4a75c7cb5800f1d5f4073ec70cf91045dc66acd3
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1405350045,1405368658,736541996dc241592506cff821318c93f574f548
736541996dc241592506cff821318c93f574f548,73654199,Don't break when clicking an internal link to a page title containing '/wiki/',"Don't break when clicking an internal link to a page title containing '/wiki/'

We shouldn't be checking anything for '/wiki/' anyway, but this will do for now

Bug: 67949
Change-Id: I6d83c2e9e40724993bb13cea248ac672d3cea734
",,,,Alex Monk,krenair@wikimedia.org,BearND,bsitzmann@wikimedia.org,1405267962,1405355632,ba354ae0c265cb40e87e4b1198b8b8367c32b820
ba354ae0c265cb40e87e4b1198b8b8367c32b820,ba354ae0,"Merge ""Adapt Captcha handler to night mode.""","Merge ""Adapt Captcha handler to night mode.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1405348447,1405348447,"635137d87316a88d254377d36fe060c32ef36ac2,2caf9f58e8ff6bfca906d420cafd4278cd976323"
635137d87316a88d254377d36fe060c32ef36ac2,635137d8,Make sure Overflow menu gets properly unregistered from Bus.,"Make sure Overflow menu gets properly unregistered from Bus.

Bug 67947

Change-Id: I2ce80c75f3fb87586695a8800db2a68fc51dca3c
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405346723,1405348321,e7944eb9b5f1eb543e729407a46776baadb73b0f
e7944eb9b5f1eb543e729407a46776baadb73b0f,e7944eb9,Fix possible crash in LangLinks activity.,"Fix possible crash in LangLinks activity.

Bug 67718

Change-Id: I4b7781fcdcec36dec0e0019e644b4b7298183a64
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405347490,1405348228,71d94675d2814eb7408c09cff0c5176d6109de9e
2caf9f58e8ff6bfca906d420cafd4278cd976323,2caf9f58,Adapt Captcha handler to night mode.,"Adapt Captcha handler to night mode.

Change-Id: I7ab36d53d01b0d026777251f310354a3ca7b9b68
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1405344898,1405344898,8f00d64c4e2402586a579f2af3f6ef05805f882b
71d94675d2814eb7408c09cff0c5176d6109de9e,71d94675,Fix possible crash when returning to Preview after Login.,"Fix possible crash when returning to Preview after Login.

Change-Id: I65fe8f241e72ad369dda681da105b12cc256fc0c
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405097704,1405342045,2da0350514cf2a1e8496e7d2f47c3fcdb53ea4ea
2da0350514cf2a1e8496e7d2f47c3fcdb53ea4ea,2da03505,Fix typo: Utils.resolveProtoclRelativeUrl -> Utils.resolveProtocolRelativeUrl,"Fix typo: Utils.resolveProtoclRelativeUrl -> Utils.resolveProtocolRelativeUrl

Change-Id: Ide0c7bdab2ecbcb27dac3dd13095c277022c074e
",,,,Alex Monk,krenair@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405266897,1405288198,8f00d64c4e2402586a579f2af3f6ef05805f882b
8f00d64c4e2402586a579f2af3f6ef05805f882b,8f00d64c,A couple more color/layout tweaks from Designers.,"A couple more color/layout tweaks from Designers.

- update link color for dark theme.
- make background of nav/toc/theme-selector be the same color
- put a thin border on the edge of nav/toc/theme-selector

Change-Id: Ib863774fa25970a481e4c24f3a9c89a413d0e3a0
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1405115977,1405115977,c3ea88212bbf5ae91572e58f1e91b587d1159866
c3ea88212bbf5ae91572e58f1e91b587d1159866,c3ea8821,"During edit save, describe IP edit and offer login if appropriate.","During edit save, describe IP edit and offer login if appropriate.

Change-Id: I1ee0b3f1714e0cb93f27ede130f32a3c7d2100d4
",,,,dr0ptp4kt,abaso@wikimedia.org,Dbrant,dbrant@wikimedia.org,1404162827,1405096927,8c0b938cc9dee9e44774586b721798fda0841b81
8c0b938cc9dee9e44774586b721798fda0841b81,8c0b938c,Fix theme-change bug on devices that like to preserve Intent extras.,"Fix theme-change bug on devices that like to preserve Intent extras.

Bug: 67854
Change-Id: Ief1d98b6832a79cc2c2e14b50ba7794f12ef43fd
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1405095850,1405095850,6ce97a53b28b0186f488d95ff25bbfc692a3b094
6ce97a53b28b0186f488d95ff25bbfc692a3b094,6ce97a53,Implement Theme/Font chooser.,"Implement Theme/Font chooser.

- Rework the app theme, and remove unused drawables.
- Add dark theme.
- Add selector to switch between light/dark theme.
- Add selector to increment/decrement font size.
- Properly apply night mode to Preview webview

Change-Id: I735bf4bfd6c9bca064a39fd1fa8d3b007c8b0658
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1404759286,1405041145,b31e96e664b2155e49ee0ee3a6b9a67579978d2b
b31e96e664b2155e49ee0ee3a6b9a67579978d2b,b31e96e6,Strip text formatting when pasting into text fields.,"Strip text formatting when pasting into text fields.

Bug: 65606
Change-Id: Ica6175a57035c5e4531eb9689c9e5365769e1465
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405002353,1405025250,cf6606c3db76fa8787789d47736d589ffe3ea088
cf6606c3db76fa8787789d47736d589ffe3ea088,cf6606c3,Add graphics and explanations for History and Saved Pages.,"Add graphics and explanations for History and Saved Pages.

Change-Id: Id274191894ee7fad5e5854dfdb5145755e844e4f
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405008266,1405024778,61feee29f0c15d0f310ce375e4d2722f494fa4b4
61feee29f0c15d0f310ce375e4d2722f494fa4b4,61feee29,Don't show current saved-page title being refreshed.,"Don't show current saved-page title being refreshed.

(doesn't make sense, since pages are saved in parallel)

Change-Id: I55fa7a98c0a4c9b8947ef969deed2fd13190f70c
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1405020251,1405024458,a5c7483fa8b6c7e8794f294b66f1bfb55737fb54
a5c7483fa8b6c7e8794f294b66f1bfb55737fb54,a5c7483f,Fix concurrency issue when saving page images.,"Fix concurrency issue when saving page images.

Bug: 67809
Change-Id: I6e9e61aac88b872a70593f239e1af179b830116c
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1405019520,1405024200,3faab1211b541c0c9e22895aa561eaca412eda88
3faab1211b541c0c9e22895aa561eaca412eda88,3faab121,Make LinkMovementMethodExt more generic,"Make LinkMovementMethodExt more generic

Change-Id: I40e0e8da3870abf842a3ec3195fd500254cd8a68
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1405016210,1405016293,5d3a343759f58f442408df6ff41cc91756d38f2b
5d3a343759f58f442408df6ff41cc91756d38f2b,5d3a3437,Fix possible crash when looking up page alias data.,"Fix possible crash when looking up page alias data.

Defaulting to ""en"" when an unrecognized wiki is specified.

Co-authored-by: dbrant <dbrant@wikimedia.org>
Change-Id: I84d974880a79f0cf3af597a83e534a481197767d
",,,,Alex Monk,krenair@wikimedia.org,dbrant,dbrant@wikimedia.org,1405010545,1405012454,90f87ff3f39dde6ee7b30a732a6d8937b418a1bc
90f87ff3f39dde6ee7b30a732a6d8937b418a1bc,90f87ff3,Fix potential crash in PageTitle isSpecialPage,"Fix potential crash in PageTitle isSpecialPage

Change-Id: I3b8a056dcd0ad4796d1f37ab928042b76b97839d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1404933406,1404933406,080dee6f88cc3d27765e6c611215187446ed9da4
080dee6f88cc3d27765e6c611215187446ed9da4,080dee6f,Add EL to onboarding,"Add EL to onboarding

Also added login funnel sources ""onboarding"", ""blocked"".
CreateAccountSchema has now the same funnel source enum
(passed in from LoginActivity) per Yuvi's recommendation.

Skip logging LoginStart if we go straight to CreateAccount.

Change-Id: I81deff8ae845b6b5bba071563827f3de177b225f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1404756728,1404923394,b2d4443422cb8c431462c8b7393f1afaaf17e041
b2d4443422cb8c431462c8b7393f1afaaf17e041,b2d44434,Don't show Red Links,"Don't show Red Links

Red links are links to pages that do not exist. Replace those
with spans.

Change-Id: I682d9284ef4a8bbcc46e9937ce6ed71daaf4f33d
",,,,YuviPanda,yuvipanda@gmail.com,Dbrant,dbrant@wikimedia.org,1404754219,1404907804,05d76eaed85b3b741f9f7faecc5230b5aa8b1986
05d76eaed85b3b741f9f7faecc5230b5aa8b1986,05d76eae,Remove dead code from previous saved pages implementation,"Remove dead code from previous saved pages implementation

Change-Id: I817f206f0f7d3d567af27ac26caae018465ff716
",,,,YuviPanda,yuvipanda@gmail.com,Dbrant,dbrant@wikimedia.org,1404752725,1404907648,4f2c60e2afb575b927d2b6cfd50b2a2a8f272c64
4f2c60e2afb575b927d2b6cfd50b2a2a8f272c64,4f2c60e2,Implement night mode for content,"Implement night mode for content

Switched via a (temporary) item in the overflow menu.
Should be switched to a proper UI in another commit.

Bug: 35251
Change-Id: I066d6ae9ca7ee224f341f2ab8083739b088fc18b
",,,,YuviPanda,yuvipanda@gmail.com,Dbrant,dbrant@wikimedia.org,1403872216,1404906913,918ac28a048d716afc88763710561dfc28131b9b
918ac28a048d716afc88763710561dfc28131b9b,918ac28a,Break infinite loop of login and create account activities,"Break infinite loop of login and create account activities

Since we always start CreateAccountActivity from LoginActivity
we can just finish CreateAccountActivity to get back to LoginActivity.

Change-Id: Iaca3bea180954cbc166414bad41814b75c822b4e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1404848156,1404848174,799a1f870540087445d31cf677a61a75e91e360d
799a1f870540087445d31cf677a61a75e91e360d,799a1f87,Adjust font size based on system settings,"Adjust font size based on system settings

Something to consider:
* allow user to zoom in/out via gestures (pinch, double tap); replace builtin zoom controls but also allow for image resizing

Change-Id: Ic167e7866b8ca3ac4fc75186f34a2a92779b91cd
",,,,bearND,bsitzmann@wikimedia.org,dbrant,dbrant@wikimedia.org,1403799573,1404776568,aaf34190e8e9f7d302478ea71cfb88fd377dd7ec
aaf34190e8e9f7d302478ea71cfb88fd377dd7ec,aaf34190,Abusefilter changes in Edit workflow.,"Abusefilter changes in Edit workflow.

- New icons and verbiage for abusefilter notifications.
- Updated instrumentation

Change-Id: Ieabd035fec22c80886e17871e83794e7576b8222
",,,,Dmitry Brant,dbrant@wikimedia.org,bearND,bsitzmann@wikimedia.org,1404135190,1404772621,df044d56d7d8ec1b2dc062a32af860659c869229
df044d56d7d8ec1b2dc062a32af860659c869229,df044d56,Add onboarding screen,"Add onboarding screen

Shown the first time the user opens a page
if not logged in at that time.

Replace Wikipedia logo and slogan in English and other
languages with the same spelling with an image so we
don't need to bundle the Linux Libertine font (1.7+ MB).

Change-Id: Icb98012498b87bb6a976bfc2f3a32cc883c48eab
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1404172846,1404439733,f3b295df472a0f86ce4887031343e7dcfb162da0
f3b295df472a0f86ce4887031343e7dcfb162da0,f3b295df,Hide edit pencils for file pages,"Hide edit pencils for file pages

Change-Id: I3061aec0b3cf0a81c3f47427b6dc5cbf68fcf175
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1404424496,1404425310,3cb2b4a7d127b09611da62a6c4b65b57de3b0ea4
3cb2b4a7d127b09611da62a6c4b65b57de3b0ea4,3cb2b4a7,Add function to test if a page is a file page,"Add function to test if a page is a file page

Change-Id: I7b8065f6d7b2df29a2230ac81a6bf52b8eb794f2
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1404423983,1404425306,6df1887dea29c6a78de0553374a3d4247ab13c9c
6df1887dea29c6a78de0553374a3d4247ab13c9c,6df1887d,Bump version for release 2.0-alpha-2014-07-02,"Bump version for release 2.0-alpha-2014-07-02

Change-Id: I90eb18d0d5895fee8e0275bd88aa73d42d60c5d3
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1404344850,1404344850,c38b68952e0505054f874c9b2765bfb1f0290800
c38b68952e0505054f874c9b2765bfb1f0290800,c38b6895,Don't duplicate history entry if the same item is clicked twice.,"Don't duplicate history entry if the same item is clicked twice.

Bug: 66760
Change-Id: Id78f2fbdc796a1a34c8f6829ca0632b9b4705fbe
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403878643,1404339697,c75532ee071c7239a48a62d642492fa3e088e8b4
c75532ee071c7239a48a62d642492fa3e088e8b4,c75532ee,Hide keyboard when exiting interlanguage activity.,"Hide keyboard when exiting interlanguage activity.

Change-Id: Ibc9a463acd0f1dd9e5cb4774f1312c870bee5cc3
",,,,Dmitry Brant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403879207,1404338485,c269c9d20125789954cff99ce68bcd3e0bf65408
c269c9d20125789954cff99ce68bcd3e0bf65408,c269c9d2,Make inter-language highlight consistent with other highlights.,"Make inter-language highlight consistent with other highlights.

Change-Id: I5a036c4258e7d2396852c3ed2e21f508c9838479
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1404147473,1404338182,80e0bbc80e172446d38d796b04354c56318d6c92
80e0bbc80e172446d38d796b04354c56318d6c92,80e0bbc8,"Hide ""send feedback"" if no email app installed.","Hide ""send feedback"" if no email app installed.

Bug: 67322
Change-Id: I14fa2a00b932481834317a0c1d1851907da7b11a
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1404322641,1404331609,b7e0cc91a245cc83d0e18c9c1154850d3a39a237
b7e0cc91a245cc83d0e18c9c1154850d3a39a237,b7e0cc91,"Merge ""Add link from create account to login""","Merge ""Add link from create account to login""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1404326448,1404326448,"94a7b5362deae045263a996d06da6457ad221ef3,8552fff86d6792ea03f695693be70b902f064e83"
8552fff86d6792ea03f695693be70b902f064e83,8552fff8,Add link from create account to login,"Add link from create account to login

Change-Id: I7255f2960769c728fb5217bab7237972dcde5bed
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1404147440,1404321791,fe3e5d13ff4380db36fcfea80b8eef6c4bf8aa11
94a7b5362deae045263a996d06da6457ad221ef3,94a7b536,Fix possible crash(es) related to find-in-page.,"Fix possible crash(es) related to find-in-page.

https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom&TicketID=7639068

Change-Id: Iad5184119d1a6174790bd6a6e983842b0daef82e
",,,,dbrant,dbrant@wikimedia.org,Dbrant,dbrant@wikimedia.org,1404222837,1404317517,075aa269acb49df373377db72bf743bda2291a6f
075aa269acb49df373377db72bf743bda2291a6f,075aa269,"Merge ""Wikify README""","Merge ""Wikify README""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1404317403,1404317403,"08bfe52d07232a5acda1a3c340e9131980457789,69c2efb3026e565b1f7937eb812775d80d033e7a"
08bfe52d07232a5acda1a3c340e9131980457789,08bfe52d,Add credit to translatewiki.net translators,"Add credit to translatewiki.net translators

Change-Id: I0033647c6305df5d1b5261c818ed28e70725379f
",,,,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,dbrant,dbrant@wikimedia.org,1403787989,1404316366,2a14e7af3bd473fa0b45d80280ccb614a5c1e625
2a14e7af3bd473fa0b45d80280ccb614a5c1e625,2a14e7af,"Change edit workflow licensing text to include a link to the Terms of Use, per a legal requirement.","Change edit workflow licensing text to include a link to the Terms of Use, per a legal requirement.

Change-Id: I3e8f29998ac818734d1ff8c08e65dafa47c3b3d9
",,,,Deskana,dgarry@wikimedia.org,Deskana,dgarry@wikimedia.org,1404192301,1404194081,fe3e5d13ff4380db36fcfea80b8eef6c4bf8aa11
69c2efb3026e565b1f7937eb812775d80d033e7a,69c2efb3,Wikify README,"Wikify README

""README.md"" was actually written in the MediaWiki syntax (mostly).
Wikified and renamed it into a .mediawiki file to make it look
prettier on GitHub.

Change-Id: Ia7fa94d01ddac84e57544e1fe71e3acc9290ed5c
",,,,Yusuke Matsubara,whym@whym.org,Yusuke Matsubara,whym@whym.org,1403941860,1403997417,fe3e5d13ff4380db36fcfea80b8eef6c4bf8aa11
fe3e5d13ff4380db36fcfea80b8eef6c4bf8aa11,fe3e5d13,"Merge ""Make background lighter in site selection list item""","Merge ""Make background lighter in site selection list item""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403878162,1403878162,"bb480b3536abf39bcef88318ef7b0099c71f4072,3cf3bd92c4d0675c4597b07d8f2cb0f61db08a84"
bb480b3536abf39bcef88318ef7b0099c71f4072,bb480b35,Improve appearance of Edit workflow on 2.3,"Improve appearance of Edit workflow on 2.3

Bug: 67135
Change-Id: Id270c712f7424cb120b15fbcc8a893378258f317
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403808028,1403817949,920040461956fb19ffc6d7e96a6924080f4a90da
920040461956fb19ffc6d7e96a6924080f4a90da,92004046,Make app store description be translatable,"Make app store description be translatable

Change-Id: I679f68e2cb403ef631c45193adee1a34fec02bfe
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403816179,1403816179,2edbd96a4ddd2b461ce4fc85f3268f822dd931f8
2edbd96a4ddd2b461ce4fc85f3268f822dd931f8,2edbd96a,Use release version for MW api: 1.0,"Use release version for MW api: 1.0

Change-Id: Ia506c2f122b70b6c9debe96613a8e9610eca7580
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403728017,1403815474,086199325274743b18c8fccfed87bcdb3b3bd2ab
086199325274743b18c8fccfed87bcdb3b3bd2ab,08619932,Add Niklas Laxström to the credits,"Add Niklas Laxström to the credits

Niklas made important work to support the Android L10n file format
in translatewiki, so he should be in the credits.

Change-Id: I67170b54f9abe66e9bf21f7b0cace0705b4d5dbc
",,,,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,1403771270,1403771270,4cc8efd1b192c90ff0c74106052f625f04b2df5a
4cc8efd1b192c90ff0c74106052f625f04b2df5a,4cc8efd1,"Merge ""Last updated link goes to mobile view""","Merge ""Last updated link goes to mobile view""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403764498,1403764498,"b9d5a78b32a80ac9249bdf7d7af8db4b325ab475,b36a1a432a83ad6551cddbe61695e629ef5910b0"
b9d5a78b32a80ac9249bdf7d7af8db4b325ab475,b9d5a78b,NPE: println needs a message,"NPE: println needs a message

Bug: 67112
Change-Id: I7dad32ccc856123d31108fa500fd8b6230108ae7
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403760157,1403760157,7fdb80fd854b6c9515c03443cc1786d5f55f7153
b36a1a432a83ad6551cddbe61695e629ef5910b0,b36a1a43,Last updated link goes to mobile view,"Last updated link goes to mobile view

(before it was going to desktop view)

Change-Id: I9d5edfac1938285b12c7a4f01933862c1c653aec
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403755945,1403755945,7fdb80fd854b6c9515c03443cc1786d5f55f7153
7fdb80fd854b6c9515c03443cc1786d5f55f7153,7fdb80fd,Bump version number for 2014-06-25,"Bump version number for 2014-06-25

Change-Id: Ib2c3c34c0440a89877c79f8fab82be26516930e4
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1403751354,1403751354,adaa3e604271389ddab37c5e1eee8cda7841a3cd
adaa3e604271389ddab37c5e1eee8cda7841a3cd,adaa3e60,Use support.v7.PopupMenu only on 2.3 devices.,"Use support.v7.PopupMenu only on 2.3 devices.

Bug: 66263
Change-Id: Iacb1f3d230b0649a9a5e1f29ce09d7ad46c6c3f3
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1403746247,1403750458,da3eb28f04735117acb26bf58ebc8a07274c4a0b
da3eb28f04735117acb26bf58ebc8a07274c4a0b,da3eb28f,Force locale when parsing MW dates to avoid parsing errors.,"Force locale when parsing MW dates to avoid parsing errors.

Also a bit of cleanup.
https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom&TicketID=7622090

Change-Id: I948df4a6e7fa36c2a3eec4b8d4e5b5a9dea41960
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403706962,1403749689,0175ac034f7aea56b682d73a3210cf9dacbf2940
0175ac034f7aea56b682d73a3210cf9dacbf2940,0175ac03,Make 2.0 release,"Make 2.0 release

OMG IT'S HAPPENING!

Change-Id: I49d558c48aa77c917f79f4c3aa49b101b259dfe7
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403712186,1403712186,b2c6aef00d7967149f4d90f5ef5455dd7cf8040f
b2c6aef00d7967149f4d90f5ef5455dd7cf8040f,b2c6aef0,Manual translation updates from TWN,"Manual translation updates from TWN

Change-Id: I725d4835fbc35e443eb9ed15acc319824f7239f1
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403711631,1403711947,c16bfa4186166dc8ec353ab82b73ccdfb8bf6ca4
c16bfa4186166dc8ec353ab82b73ccdfb8bf6ca4,c16bfa41,Bump Schema revID for Edit Funnel,"Bump Schema revID for Edit Funnel

No actual changes, just a documentation change in the schema
itself. Updating to avoid confusion for analysts.

Change-Id: I91dc635a1b34cb84fedacdbca57a723a4109cac4
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403709704,1403709704,12bcb744282562b038824ce03ae75cb80bd3562d
12bcb744282562b038824ce03ae75cb80bd3562d,12bcb744,Change version string to 2.0-alpha-2014-06-25,"Change version string to 2.0-alpha-2014-06-25

since due to UTC it already switched

Change-Id: Ia88c539a21c3ae8d02def585d87b21971432aa78
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403663084,1403663084,6755196d2d3a737de06a67d662c4eabab89d2d0b
6755196d2d3a737de06a67d662c4eabab89d2d0b,6755196d,Bump version for release 2.0-alpha-2014-06-25-2,"Bump version for release 2.0-alpha-2014-06-25-2

Change-Id: I49baee4cbf2c875d66f443f93100e0f4b808a814
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403662626,1403662626,0012cfae1094fb4950cea8aa50133f54f1cd50f4
0012cfae1094fb4950cea8aa50133f54f1cd50f4,0012cfae,Switch to production bits URL,"Switch to production bits URL

Change-Id: I9bd5d2046110f362f8ffc2f50666c18016cc600e
",,,,YuviPanda,yuvipanda@gmail.com,BearND,bsitzmann@wikimedia.org,1403651795,1403662318,267e2e27c9f4cdf8f17d61f35f5208795ebb3569
267e2e27c9f4cdf8f17d61f35f5208795ebb3569,267e2e27,Bump version for release 2.0-alpha-2014-06-24,"Bump version for release 2.0-alpha-2014-06-24

Change-Id: I4c3f168004be7fb9ee2c930f10b498f9fdea8ff3
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403653355,1403653355,6da2401e74927afd495e4ea8855aa02b1b15c429
6da2401e74927afd495e4ea8855aa02b1b15c429,6da2401e,Use userID for logging editing events,"Use userID for logging editing events

Sends -1 in cases we have a username but not a userID

Change-Id: I223127722124a92a055e50287d3daf30c0b2d4bd
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403637710,1403651590,30d479aee731e653d91b75e70cfb69eaf4ddc967
30d479aee731e653d91b75e70cfb69eaf4ddc967,30d479ae,Update logging to reflect new Edit Workflow,"Update logging to reflect new Edit Workflow

- Update schema
- Log edit summary taps
- Log save attempts

Change-Id: I377f5e41c8ff1227b9a7c131f383ad14423b6f3e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403630427,1403651590,e82a8b9619cd0b2d98cbb4591fb41595ac502172
e82a8b9619cd0b2d98cbb4591fb41595ac502172,e82a8b96,Implement (simple) error handling when fetching preview.,"Implement (simple) error handling when fetching preview.

Bug: 67038
Change-Id: I917d81f1e4fcf7df24d5a3636237243c34d186f4
",,,,dbrant,dbrant@wikimedia.org,YuviPanda,yuvipanda@gmail.com,1403631716,1403650866,b0cf97e028b44b41dfd0ebc152e787f3ea6cc681
b0cf97e028b44b41dfd0ebc152e787f3ea6cc681,b0cf97e0,Properly (for real this time) handle ProgressDialogs.,"Properly (for real this time) handle ProgressDialogs.

Bug: 67019
(and probably others)

Change-Id: Id0eaf4b503c286d4938012a89bd75f14704874b1
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403627232,1403649911,4bdb1e7b5d3b8eab0ac69742e9c6c20035324f79
4bdb1e7b5d3b8eab0ac69742e9c6c20035324f79,4bdb1e7b,Fix possible crash(es) when pressing ToC button.,"Fix possible crash(es) when pressing ToC button.

(and other overflow menu buttons, when a page might still be loading)

Change-Id: I31421c4190f63064386f1c7a7c32bbd9892dc8ed
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403639767,1403645483,f9afeaf1e35a4db26f2f728301497bd4b11161ee
3cf3bd92c4d0675c4597b07d8f2cb0f61db08a84,3cf3bd92,Make background lighter in site selection list item,"Make background lighter in site selection list item

On GingerBread the text was black on black.
Also there was no padding on the sides.

Change-Id: Iefa1c8fbf9514e399ea727a3ca1ce38985a5ccfb
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403590886,1403644404,f9afeaf1e35a4db26f2f728301497bd4b11161ee
f9afeaf1e35a4db26f2f728301497bd4b11161ee,f9afeaf1,"Merge ""Guard against NPE in  PageActivity.handleIntent""","Merge ""Guard against NPE in  PageActivity.handleIntent""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403641735,1403641735,"009542bc60fb70df47e03b8b1be093df9fee2c44,ed3c8ca2cca7a27f23b376c7069dcb0ec7f2eef4"
009542bc60fb70df47e03b8b1be093df9fee2c44,009542bc,Add (no-op) error handler for fetching page images.,"Add (no-op) error handler for fetching page images.

Bug: 67039
Change-Id: I95f3e76cf845b37deaf6cd60ba5a80af2d634509
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403633158,1403640708,641e2630853f02ccea3860fde163d5a938b6bc88
641e2630853f02ccea3860fde163d5a938b6bc88,641e2630,"Disable ""refresh saved pages"" button if there are no saved pages.","Disable ""refresh saved pages"" button if there are no saved pages.

Bug: 67011
Change-Id: Idd10f2a08349ce64d1ba4cb5dd7cccbd5eba7d89
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403621381,1403640282,722ee0f45df34b2a1808cfea60a7b1a93501aa7f
ed3c8ca2cca7a27f23b376c7069dcb0ec7f2eef4,ed3c8ca2,Guard against NPE in  PageActivity.handleIntent,"Guard against NPE in  PageActivity.handleIntent

Bug: 67034
Change-Id: I9a992f45d25010e2ab2ba49b4b0bce5e39f9145f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403639530,1403639530,722ee0f45df34b2a1808cfea60a7b1a93501aa7f
722ee0f45df34b2a1808cfea60a7b1a93501aa7f,722ee0f4,Adjust Random item in NavDrawer for GB,"Adjust Random item in NavDrawer for GB

On my GingerBread device the Random icon
was shifted to the left.

Also marked the ImageViews as not needing a contentDescription
since the labels are provided by the nearby TextViews.

Change-Id: Iec3b70309545ecccc65e5ee7f8e81a296a57b5c3
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403585794,1403585794,8e92b02f2f403e8fc9fdc8cb90ac39dac1a82cf9
8e92b02f2f403e8fc9fdc8cb90ac39dac1a82cf9,8e92b02f,Bump version for release 2.0-alpha-2014-06-23,"Bump version for release 2.0-alpha-2014-06-23

Change-Id: If363ea6d59663cae054f19ef75245211d663f4ba
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403565474,1403565474,14a1a99a93bdac8423c160beb90bbfe7bc5daebf
14a1a99a93bdac8423c160beb90bbfe7bc5daebf,14a1a99a,More compatible arrangement of 'privacy policy' and 'terms of use',"More compatible arrangement of 'privacy policy' and 'terms of use'

(for RTL environments)

Bug: 66916
Change-Id: Ia52e2e42deaccac5b9974ce36587a1d84ba1b5c2
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403538872,1403565137,dc32289559034f7a4a8d6d4fe226af25d95500dc
dc32289559034f7a4a8d6d4fe226af25d95500dc,dc322895,Add method to update one or more saved pages,"Add method to update one or more saved pages

Co-authored-by: bearND <bsitzmann@wikimedia.org>
Change-Id: I8671b7ff5c31ee83eed5be73ef1e10924942fe23
",,,,YuviPanda,yuvipanda@gmail.com,BearND,bsitzmann@wikimedia.org,1403510934,1403561051,2af3cbdcb68b003f57f184e2be8de87c31396b41
2af3cbdcb68b003f57f184e2be8de87c31396b41,2af3cbdc,Manual translation import from TWN,"Manual translation import from TWN

Commented out Italian tstring for editing_error_spamblacklist
since it didn't include the parameter.

Fixed parameter string for last_updated_text in Portuguese
(came from an earlier commit)

Change-Id: I5dfb2af9ad328dddbe5a2eef301942487ad7f801
",,,,YuviPanda,yuvipanda@gmail.com,BearND,bsitzmann@wikimedia.org,1403553887,1403559770,bb3a7fd2ae2302ef3513c0b7b4e55ac230da8ccf
bb3a7fd2ae2302ef3513c0b7b4e55ac230da8ccf,bb3a7fd2,"Merge ""Login and create account buttons""","Merge ""Login and create account buttons""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403557849,1403557849,"07c79ead963a4fdbba0f319d6b6e60263c59abf7,040b9c7fbbbc623d27b52f42dafa0e8b27008458"
07c79ead963a4fdbba0f319d6b6e60263c59abf7,07c79ead,Send Crash Reports to different OTRS queue,"Send Crash Reports to different OTRS queue

Makes the original queue clearer and easier for volunteers to
access / respond.

Change-Id: I3840587af30306b2fa68dfa0bf65ca3a92035f6b
",,,,YuviPanda,yuvipanda@gmail.com,BearND,bsitzmann@wikimedia.org,1403553338,1403556843,5ef2be0eb865d61cb423abfdeb540c38f1243ad2
5ef2be0eb865d61cb423abfdeb540c38f1243ad2,5ef2be0e,Reorder buttons on Find in Page,"Reorder buttons on Find in Page

Also make them bold and change background

Change-Id: I201c393c50cb6b9b10b1cb6a3fd0e16eedbc5900
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403033040,1403556425,478e7e94d5e1cd69a4b3a6d578edfeb34427751d
478e7e94d5e1cd69a4b3a6d578edfeb34427751d,478e7e94,Update a few strings based on L10N review,"Update a few strings based on L10N review

from Siebrand's comments in
https://gerrit.wikimedia.org/r/#/c/140937/7 (merged)

Change-Id: Ifc17919b904c7a6ebff085903ff43c62737304a9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403554981,1403554993,2cd0a325f74fc8dd1c454e8f9cb99335433e8241
2cd0a325f74fc8dd1c454e8f9cb99335433e8241,2cd0a325,Log (hopefully) recoverable connection errors.,"Log (hopefully) recoverable connection errors.

Change-Id: Iae755e0f802cea8ee47c97402362f01e94a056dc
",,,,dr0ptp4kt,abaso@wikimedia.org,Dbrant,dbrant@wikimedia.org,1403306526,1403553192,2e296ed3ad8ed2e6578531b3cbab8e2fa2fad6b8
2e296ed3ad8ed2e6578531b3cbab8e2fa2fad6b8,2e296ed3,"When logging MCC-MNC, get both network and SIM.","When logging MCC-MNC, get both network and SIM.

* There can be mismatches (e.g., roaming), so just send both.
* This will be a server no-op until server code is updated. No dependency.

Change-Id: I10cd15cfb5a1625159e6ac2151938d3b24710e90
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1403552186,1403552186,db3aa83c04939d2f1240d904c0a6730fc13dd114
040b9c7fbbbc623d27b52f42dafa0e8b27008458,040b9c7f,Login and create account buttons,"Login and create account buttons

Also made both layouts scrollable

Change-Id: I1adfa7ab094a62cbbc7ba71f44c2d5206b5e1a6b
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403501942,1403548980,8c7e99f6c7cc4383c557f4e92f59faf74a88a3bc
db3aa83c04939d2f1240d904c0a6730fc13dd114,db3aa83c,Add paddingRight for correct RTL appearance.,"Add paddingRight for correct RTL appearance.

Bug: 66918
Change-Id: I9d02751ade9a227e205e5cfd67c665fc34c4dfe8
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1403539715,1403539715,e58f9c9c709880453793c2b71bf8e7c3f927bedb
e58f9c9c709880453793c2b71bf8e7c3f927bedb,e58f9c9c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id0def3eae6310441f7904b3182bddfae29c0aa61
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1403527088,1403527088,8c7e99f6c7cc4383c557f4e92f59faf74a88a3bc
8c7e99f6c7cc4383c557f4e92f59faf74a88a3bc,8c7e99f6,Consistent capital CAPTCHA,"Consistent capital CAPTCHA

Change-Id: Ib3587add533f423325edd96f1ef4e77feb8d2c17
",,,,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,1403380932,1403380932,9d12203894b296cb1a310a5e867999dd87427a32
9d12203894b296cb1a310a5e867999dd87427a32,9d122038,Manual Translations update from TWN,"Manual Translations update from TWN

Change-Id: I954cf1822949122381dc323e2f963ba81bd0862d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403362834,1403362834,9f3c105b0752800669a53ae603f83c5fef098b04
9f3c105b0752800669a53ae603f83c5fef098b04,9f3c105b,"Merge ""Clarifying the message about blocked domains""","Merge ""Clarifying the message about blocked domains""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403359789,1403359789,"5ab721683a1f16e5b316c7bd5d88377c024c99e6,51b310609e8f5e8be32e393fc2ef4d4503b8f316"
51b310609e8f5e8be32e393fc2ef4d4503b8f316,51b31060,Clarifying the message about blocked domains,"Clarifying the message about blocked domains

Changing from
""Links from blocked domains (%s) detected"" into
""Links to blocked domains (%s) detected"".

This makes the message clearer.

Change-Id: I75d9304afb5640f614652c91822acb68a45cf988
",,,,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,1403359659,1403359659,d5ff290096087f7220388436d94a5b5bfb3962ef
5ab721683a1f16e5b316c7bd5d88377c024c99e6,5ab72168,"Common American spelling for ""license""","Common American spelling for ""license""

The rest of the file is American.

Change-Id: If753b465ccac7c6f4bbcf4a38b70a0618c55be81
",,,,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,1403359604,1403359604,d5ff290096087f7220388436d94a5b5bfb3962ef
d5ff290096087f7220388436d94a5b5bfb3962ef,d5ff2900,Login and create account string/icon changes,"Login and create account string/icon changes

Added a few new strings so they can get translated sooner.
The link text from create account is not used yet 
because I don't want to cause a big stack of activities 
with login > create account > login > ...

Change-Id: I4ebec0effaaf9909e3e042288a418739f76de67d
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403282648,1403313894,5fd0b95748ad5a57755df16f0a48ae888b9feb2c
5fd0b95748ad5a57755df16f0a48ae888b9feb2c,5fd0b957,Handle connection errors better.,"Handle connection errors better.

Change-Id: Ife9e804e86da1b97d4714609e93304ef11dbff66
",,,,dr0ptp4kt,abaso@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403050561,1403289003,6c9f8a8d6a954c5a8b719caad487336a988b9bba
6c9f8a8d6a954c5a8b719caad487336a988b9bba,6c9f8a8d,Immediately update W0 state in navdrawer on state transitions.,"Immediately update W0 state in navdrawer on state transitions.

* Currently, the state may only reflect if the user goes to More, for example.
* This should help the situation.

Change-Id: I117cfc2e2e5219a082def6981e40650d08e1353a
",,,,dr0ptp4kt,abaso@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403239457,1403240544,8df4c3e464ab7817725ee5ea18a015c1b22a9d41
8df4c3e464ab7817725ee5ea18a015c1b22a9d41,8df4c3e4,Make all messages containing links use CDATA,"Make all messages containing links use CDATA

TODO:

    HtmlDecode these strings before actually using them,
    at runtime.

    Import strings into translatewiki.net

Change-Id: Iec9d6d2a26c9adda3dac118f043dd2a0597a3ea4
",,,,YuviPanda,yuvipanda@gmail.com,bearND,bsitzmann@wikimedia.org,1403210772,1403233867,0e354225ed8bf05c964e63e9b706b319d9c8696d
0e354225ed8bf05c964e63e9b706b319d9c8696d,0e354225,Updating On and Off dialog box to not have title.,"Updating On and Off dialog box to not have title.

* UX asked to have the title inlined in the message area for On/Off transitions.
* Also got rid of dead method.

Change-Id: I5196f20d1029cde433a7e5427b7bdee9ffb9a6b7
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1403223419,1403223419,f44e71ea9bde1247b64fb88fb3cd7221c3430759
f44e71ea9bde1247b64fb88fb3cd7221c3430759,f44e71ea,Hide keyboard when interwiki link selected.,"Hide keyboard when interwiki link selected.

Bug: 66817

Change-Id: I238aaaefd99a6c3f4427f8778ef66d84e6346f51
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403215790,1403216792,37ac634d0661eeb2a79dd3903b23a4c7bb75c216
37ac634d0661eeb2a79dd3903b23a4c7bb75c216,37ac634d,"Per UX feedback, relabel W0 buttons, always show OFF.","Per UX feedback, relabel W0 buttons, always show OFF.

* Wikipedia Zero-related buttons and some croutons have new labels.
* Going from W0 On to W0 Off, always yields a dialog box now (instead of just first time dialog box).
* Croutons shown at same junctures as before.

Change-Id: I43401fe9f0af11b0a444035013e0e24bbab23f3c
",,,,dr0ptp4kt,abaso@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403138840,1403216117,a9df1e8086b5fcb46fc5e9041db3751abdee2dd5
a9df1e8086b5fcb46fc5e9041db3751abdee2dd5,a9df1e80,Add docs to make-beta script,"Add docs to make-beta script

Change-Id: Ie0b4f4abf20217a678f417efd34e492a1a5056aa
",,,,YuviPanda,yuvipanda@gmail.com,bearND,bsitzmann@wikimedia.org,1403209449,1403209950,6ad88c88ac29c4ff0b58d327fa0712d3c7207fe6
6ad88c88ac29c4ff0b58d327fa0712d3c7207fe6,6ad88c88,"Handle the love triangle of ProgressDialog, AsyncTask, and Activity.","Handle the love triangle of ProgressDialog, AsyncTask, and Activity.

Should fix crashes when an AsyncTask thinks a ProgressDialog is still
shown. Such as:
https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom&TicketID=7615172

Change-Id: I55196bc7c9c679f4a14e4558b0c0865a67ccbc6b
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1403188277,1403207817,f4135cfdc5013b56a047fac18db2fb1f40288088
f4135cfdc5013b56a047fac18db2fb1f40288088,f4135cfd,"Merge ""Remove ProgressDialog from random handler.""","Merge ""Remove ProgressDialog from random handler.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403207795,1403207795,"b01e6ae76953a9cabb9faaeaa1f036b0b30c5fe0,25b5cf4efc638278572b848d10785336c9981bf2"
25b5cf4efc638278572b848d10785336c9981bf2,25b5cf4e,Remove ProgressDialog from random handler.,"Remove ProgressDialog from random handler.

(and replace with spinner inline with menu item)

Change-Id: I5e63ed43e75a36fb0e592771448accf0493fbd04
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1403191567,1403202726,2b4bb1d32dee57be38ed0de13421ff316157c2f2
b01e6ae76953a9cabb9faaeaa1f036b0b30c5fe0,b01e6ae7,Add script that makes beta branch,"Add script that makes beta branch

Change-Id: Ie839ab8525d5cc037b478861d04c23af928ad7d4
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403192571,1403192571,2b4bb1d32dee57be38ed0de13421ff316157c2f2
2b4bb1d32dee57be38ed0de13421ff316157c2f2,2b4bb1d3,Move ObservableWebView into views,"Move ObservableWebView into views

Change-Id: I0141bd60f6153417a524a273c2b7441c9794acac
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403156656,1403156656,eae0179e149afe4a9308a64c83623e0a16075f42
eae0179e149afe4a9308a64c83623e0a16075f42,eae0179e,Bump version for release 2.0-alpha-2014-06-18,"Bump version for release 2.0-alpha-2014-06-18

Change-Id: I578da906a1e39bb236e0b330553c390f4ff1368a
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403127446,1403127446,fe6fb51fa3304dc64d9ac4e68fa17b170e2ad470
fe6fb51fa3304dc64d9ac4e68fa17b170e2ad470,fe6fb51f,"Merge ""Perform data migrations in a background thread""","Merge ""Perform data migrations in a background thread""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403126643,1403126643,"98c842a66f127dddb0647f91cdf2a01810e6e8b5,9c7c4684c111981387fb29dd3e946a4ca3e70845"
98c842a66f127dddb0647f91cdf2a01810e6e8b5,98c842a6,"Merge ""Migrate Bookmarks into Saved Pages""","Merge ""Migrate Bookmarks into Saved Pages""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403126322,1403126322,"7243fb8ad20210b9f109df43bcc89cc038c3d253,2e2ef5e4b17e5100bf3f387d7df1a5d8a882e5c9"
7243fb8ad20210b9f109df43bcc89cc038c3d253,7243fb8a,Updated icons for ToC,"Updated icons for ToC

Change-Id: I2c7f502516e426d7d86d0c90c02753ddb88b9c78
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403122084,1403122084,542ad8122e78a4135121dcb6f739f31f7e1d9fd0
9c7c4684c111981387fb29dd3e946a4ca3e70845,9c7c4684,Perform data migrations in a background thread,"Perform data migrations in a background thread

Change-Id: Ib9b8cf712b38989af327fba205cf9f6a96466c1e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403118574,1403119938,2e2ef5e4b17e5100bf3f387d7df1a5d8a882e5c9
2e2ef5e4b17e5100bf3f387d7df1a5d8a882e5c9,2e2ef5e4,Migrate Bookmarks into Saved Pages,"Migrate Bookmarks into Saved Pages

Change-Id: I7cf35fbcf2777680f836ab4d4f09fcfc049eacc3
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403110904,1403118613,542ad8122e78a4135121dcb6f739f31f7e1d9fd0
542ad8122e78a4135121dcb6f739f31f7e1d9fd0,542ad812,Make the CC icon noflip (for RTL environment).,"Make the CC icon noflip (for RTL environment).

Change-Id: I34be7951570594239c508a85d71cf2fd79da973a
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403117862,1403118022,59039f3190c4b62e2a24907bc3573f14adc3053f
59039f3190c4b62e2a24907bc3573f14adc3053f,59039f31,"Merge ""Hide keyboard when ""find next"" or ""find prev"" clicked.""","Merge ""Hide keyboard when ""find next"" or ""find prev"" clicked.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403118001,1403118001,"4b0ba4c0af846893e6cdb3d5bddbe6b3613127f1,57713361bcd412ac534be2f3aa40f6a561027f4d"
57713361bcd412ac534be2f3aa40f6a561027f4d,57713361,"Hide keyboard when ""find next"" or ""find prev"" clicked.","Hide keyboard when ""find next"" or ""find prev"" clicked.

Change-Id: Ie263f170e0fb8152375f3f7b86760a4d195805b4
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403105120,1403117481,d79d67673b172a635eedee0bdb09e556d8134f26
4b0ba4c0af846893e6cdb3d5bddbe6b3613127f1,4b0ba4c0,Don't show keyboard until user places cursor in Edit window.,"Don't show keyboard until user places cursor in Edit window.

Bug: 64077
Change-Id: I62c28c6aca058ab67b28240e74672894dedc5188
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403105549,1403117302,d79d67673b172a635eedee0bdb09e556d8134f26
d79d67673b172a635eedee0bdb09e556d8134f26,d79d6767,"Merge ""Set charset to UTF-8 when loading styles.""","Merge ""Set charset to UTF-8 when loading styles.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403117265,1403117265,"a4fa435d579a7a20ed43c50d37713c24ceef2563,e9e6d3f20789408772b01aaa04cea9c30c32f61c"
a4fa435d579a7a20ed43c50d37713c24ceef2563,a4fa435d,Fix crash when opening ToC in RTL environment.,"Fix crash when opening ToC in RTL environment.

Bug: 66794
Change-Id: I0b436fd769fcc20657d49926d490543e3bd25217
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1403116473,1403116473,510985accc5c7116cab6518217bb7cd758025e45
e9e6d3f20789408772b01aaa04cea9c30c32f61c,e9e6d3f2,Set charset to UTF-8 when loading styles.,"Set charset to UTF-8 when loading styles.

Styles containing characters >127 were being misinterpreted,
and resulted in strange characters in output.

Bug: 66187
Change-Id: Ibd0d3c39501dc5b7c6d31dd9e49f039715386680
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1403113685,1403114051,510985accc5c7116cab6518217bb7cd758025e45
510985accc5c7116cab6518217bb7cd758025e45,510985ac,"Merge ""Add test for ""Open page with ampersand in title caused network issues""""","Merge ""Add test for ""Open page with ampersand in title caused network issues""""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403108374,1403108374,"5b385be11c7b8174645615ceb745343dce8898ee,4d76df48d96e2e3ae0cec8312107011155ccb2a9"
5b385be11c7b8174645615ceb745343dce8898ee,5b385be1,"Merge ""Revert ""Stop playback of media files when leaving page.""""","Merge ""Revert ""Stop playback of media files when leaving page.""""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403104638,1403104638,"925217290f0846546d88614e8af0bba6e1ecbaed,6bf60f5cfa92757ff11d5739f98c050969afc353"
6bf60f5cfa92757ff11d5739f98c050969afc353,6bf60f5c,"Revert ""Stop playback of media files when leaving page.""","Revert ""Stop playback of media files when leaving page.""

Causes *all* audio playback to pause, not just from the
app. 

See https://ticket.wikimedia.org/otrs/index.pl?Action=AgentZoom&TicketID=7613380

This reverts commit 4b7bc667442c9f2d619873c89497efd098894785.

Change-Id: Ia200bf6f5ce49dce695a9f19a258badde7b65589
",,,,Yuvipanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1403095599,1403095599,4b7bc667442c9f2d619873c89497efd098894785
925217290f0846546d88614e8af0bba6e1ecbaed,92521729,Fix ImageUrlMapTest,"Fix ImageUrlMapTest

Hadn't been updated in a while

Change-Id: Ia3d3bd4baaa2a947b9c20f432127309f0f058f56
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403039452,1403095433,6ab06dcef8a0684bd2f79d37c74b61558b90195c
6ab06dcef8a0684bd2f79d37c74b61558b90195c,6ab06dce,Fix translation issue: wrong parameter format in Danish,"Fix translation issue: wrong parameter format in Danish

Change-Id: I88818b091a836d9950ac23e1ea04ccbb1df1e34e
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403061166,1403061166,523b5b9275572a08bad7298e21401027f48ad32b
523b5b9275572a08bad7298e21401027f48ad32b,523b5b92,Tweaks to edit workflow.,"Tweaks to edit workflow.

(per Vibha's feedback)
* Make actionbar button text bold when enabled
* Replace ""Done"" with ""Save""
* More whitespace between summary tags and CC license
* Center-align CC icon with copy on the right

Change-Id: I90c67b68408ee958efc5ef8a95e989500a97d98c
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1403050286,1403050286,bed3f11a472c7228af61b1a29a8ce50a5fc454fd
4d76df48d96e2e3ae0cec8312107011155ccb2a9,4d76df48,"Add test for ""Open page with ampersand in title caused network issues""","Add test for ""Open page with ampersand in title caused network issues""

The code change is in the MW Java API.
Make sure you do a mvn install on it once it's merged.

Bug: 66152
Change-Id: Id72f1fc74a0e8c05676035a7453a76f55901a6a0
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1403038204,1403038238,bed3f11a472c7228af61b1a29a8ce50a5fc454fd
bed3f11a472c7228af61b1a29a8ce50a5fc454fd,bed3f11a,Bump version number for 2.0-alpha-2014-06-17,"Bump version number for 2.0-alpha-2014-06-17

Change-Id: I6637f1c33caac896315471438d16ceecbe763d75
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1403032799,1403032799,98f582786a107750930aa9eadafe5cdaa2b646e3
98f582786a107750930aa9eadafe5cdaa2b646e3,98f58278,Add instrumentation for saved page actions,"Add instrumentation for saved page actions

Change-Id: I0b2fbf68386fc5476afed41bbd199e4276a565dd
",,,,YuviPanda,yuvipanda@gmail.com,Dbrant,dbrant@wikimedia.org,1402957859,1403031425,89e434004ddcfdb66bdfd00a72566e2f13db72a4
89e434004ddcfdb66bdfd00a72566e2f13db72a4,89e43400,Fix crash when saving page after restoring activity from parcel.,"Fix crash when saving page after restoring activity from parcel.

Bug: 66716
Change-Id: I0914136a709612325a7746e462f90b87d3f1de5f
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1403009892,1403030493,6a52b668eb1c1275aeaa4b9139ae5a70501d84a8
6a52b668eb1c1275aeaa4b9139ae5a70501d84a8,6a52b668,Add basic Find in page functionality.,"Add basic Find in page functionality.

Co-authored-by: dbrant <dbrant@wikimedia.org>
Change-Id: I47f937f9ac5ab88a02c9ef17beaedf4e679a9905
",,,,dr0ptp4kt,abaso@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1402622748,1403030337,7598ca57e2944e42cbd30bd88502666c836f98af
7598ca57e2944e42cbd30bd88502666c836f98af,7598ca57,Implement new edit workflow.,"Implement new edit workflow.

* Remove title from Edit activity
* Change actionbar button to be state-dependent (""Next""/""Done"")
* Remove icon from actionbar button
* Implement clickable edit summary tags
* Show edit summary, license, and preview on one screen
* Remove CTA to sign in when saving

Change-Id: Ied20be64d35d1038937e96cb6a809a994c8b8035
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1402852586,1403022131,7302aab1686520c10b0599038f67d63ab4bd5cb1
7302aab1686520c10b0599038f67d63ab4bd5cb1,7302aab1,Bug #66532: s/article/page/ for the English localization,"Bug #66532: s/article/page/ for the English localization

Change-Id: Iceec2868c70b836d5e6f95d5d0a0928ee41ce557
",,,,Jack Phoenix,jack@countervandalism.net,Jack Phoenix,jack@countervandalism.net,1403016514,1403016514,85f693c19f8b92a2f4853c4fcfaa4f26591f7447
85f693c19f8b92a2f4853c4fcfaa4f26591f7447,85f693c1,Remove unused about prefs file,"Remove unused about prefs file

Unsure how it managed to survive so long

Change-Id: Iada16db510a7db5542e3bff3ceea00547021c622
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1403012990,1403012990,5eb8a703373ee27b58de211bc9f165657b810cb8
5eb8a703373ee27b58de211bc9f165657b810cb8,5eb8a703,Fix accessibility issue for search fragment buttons,"Fix accessibility issue for search fragment buttons

ToC and overflow menu didn't have any contentDescription,
so TalkBack could not pick up the meaning for them. This helps
visually impaired people to better use our app.

https://ticket.wikimedia.org/otrs/index.pl?Action=AgentZoom&TicketID=7609290

Change-Id: I8f1cac67e98d3cf0255da92c23af75f0c6b1cfdf
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1402979571,1403012838,27fb95b42f252bc79108f5227c9be99be1509147
27fb95b42f252bc79108f5227c9be99be1509147,27fb95b4,"Merge ""Grammar: vist -> visit""","Merge ""Grammar: vist -> visit""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1403011116,1403011116,"f489a36655245d5fec6e30187e3a8ff4a6230365,366e6b926f3e5da5b43d344bc18c4543a1dcba72"
f489a36655245d5fec6e30187e3a8ff4a6230365,f489a366,scripts: Document what the BMP is,"scripts: Document what the BMP is

Acronyms are evil, so avoid them whenever possible.

Documentation tweak only, no functional changes here.

Change-Id: I57bf11b4ed98e2b22c2c201b40d0cb021f4f727e
",,,,Jack Phoenix,jack@countervandalism.net,Yuvipanda,yuvipanda@gmail.com,1403009472,1403011045,13c1d00c77bdb4f226cd413d505f247c23452abb
366e6b926f3e5da5b43d344bc18c4543a1dcba72,366e6b92,Grammar: vist -> visit,"Grammar: vist -> visit

Change-Id: Id96d7cb547e994fa716309e7454dc07ca57404a4
",,,,Jack Phoenix,jack@countervandalism.net,Jack Phoenix,jack@countervandalism.net,1403010561,1403010561,13c1d00c77bdb4f226cd413d505f247c23452abb
13c1d00c77bdb4f226cd413d505f247c23452abb,13c1d00c,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I098e20b38f5a12b5b9e66796c5f76eca0ac3cb2a
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1403006159,1403006159,f7a0241949279ee46e51e4b0d698a5a29c105c37
f7a0241949279ee46e51e4b0d698a5a29c105c37,f7a02419,Bump version for release 2.0-alpha-2014-06-16,"Bump version for release 2.0-alpha-2014-06-16

Change-Id: I2f1939b2e7227caed93c6917abf8749218b896c2
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1402960215,1402960215,cd03b9464097401cf46212b838f2cded11a4ddf6
cd03b9464097401cf46212b838f2cded11a4ddf6,cd03b946,Parallel image download for saved pages,"Parallel image download for saved pages

Change-Id: I18d7a9e319b874c12a7b99cd215ff327fecccce4
",,,,bearND,bsitzmann@wikimedia.org,YuviPanda,yuvipanda@gmail.com,1402949750,1402959649,4b7bc667442c9f2d619873c89497efd098894785
4b7bc667442c9f2d619873c89497efd098894785,4b7bc667,Stop playback of media files when leaving page.,"Stop playback of media files when leaving page.

Bug: 66475
Change-Id: I70b8fbf72ccde9f25d4d26f816a314eff337ac86
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1402944987,1402955385,1fc62cfc5f80defa18596938dd1ad4d544391480
1fc62cfc5f80defa18596938dd1ad4d544391480,1fc62cfc,"Fix possible crash when logging out, with ""don't keep activities""","Fix possible crash when logging out, with ""don't keep activities""

Bug: 66688
Change-Id: Ib45069b75ec4912c333c1203e49b9e101ed9f138
",,,,bearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1402953899,1402953950,7c710ebf044504709148a964b86165189472b7da
7c710ebf044504709148a964b86165189472b7da,7c710ebf,Quick fix for crash saving a page with images and no network,"Quick fix for crash saving a page with images and no network

https://ticket.wikimedia.org/otrs/index.pl?Action=AgentZoom&TicketID=7604901

Bug: 66601
Change-Id: I6bfb369f1653baada71c035a2f0e1b1d4123bce6
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1402898306,1402898306,76c181b68db117cc094b2407a7494d07d59f267a
76c181b68db117cc094b2407a7494d07d59f267a,76c181b6,Merge branch 'savedpages' into master,"Merge branch 'savedpages' into master

Change-Id: I9783b3d8aeb197305459a480873c06fb3e394649
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1402692322,1402692338,"afeb73db4d46b71887e40e8ef601bbf22cdfd5c3,848cdf5802d87e319da6a130df35f6510906f8fa"
848cdf5802d87e319da6a130df35f6510906f8fa,848cdf58,Save images of saved page,"Save images of saved page

Images are stored in the same directory as the saved page.
No extra code for tracking needed, and better for consistency
vs. the database approach.
Another plus is that when we delete the saved page the
associated images are removed automatically.

Parsing of HTML is done using Html.fromHtml with a custom imageGetter.
This uses TagSoup internally, so no need to include an HTML parsing library.

When a saved page is loaded the img src URLs get replaced
by file URLs pointing to the saved image files.

Change-Id: I1c81ccefce50d5b4fe3c1790bfe803778315bd4c
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1402690874,1402690874,ce3936f91e51b54a676ea5d6d64b6d45077d5387
afeb73db4d46b71887e40e8ef601bbf22cdfd5c3,afeb73db,"Merge ""Bump version number for 2.0-alpha-2014-06-12""","Merge ""Bump version number for 2.0-alpha-2014-06-12""",,,,dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1402676729,1402676729,"c0f6bcdc600d540fa9eacac1234d40a865f26d5b,cfa3be636c83a30ccd4bdf89bd2b6fa57894e801"
c0f6bcdc600d540fa9eacac1234d40a865f26d5b,c0f6bcdc,Add more derived js files to gitignore,"Add more derived js files to gitignore

	www/abusefilter.js
	www/preview.js

Change-Id: I04b296c77193876f84506b19fde12f2b1aaa3382
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1402674147,1402674147,52f9bcd848c0d2be19a78d2a2f2e1885e8e1a769
cfa3be636c83a30ccd4bdf89bd2b6fa57894e801,cfa3be63,Bump version number for 2.0-alpha-2014-06-12,"Bump version number for 2.0-alpha-2014-06-12

Change-Id: I46bd410a6506072b1bd78cd7a0d58d6a7843cd8c
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1402604466,1402604466,52f9bcd848c0d2be19a78d2a2f2e1885e8e1a769
52f9bcd848c0d2be19a78d2a2f2e1885e8e1a769,52f9bcd8,Bring back QuickReturn behavior for search bar,"Bring back QuickReturn behavior for search bar

Change-Id: Ic0cf4fc9611c97b095c8506253bb9ab2ab19f7bd
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1401930161,1402603760,485ae96ffddccd69c7de4c55fa74e89e2886135b
485ae96ffddccd69c7de4c55fa74e89e2886135b,485ae96f,Fix possible crash with <4.0 devices when opening More.,"Fix possible crash with <4.0 devices when opening More.

OTRS:
https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom&TicketID=7601473

Change-Id: I673e26d0288c71940f551ad9cdb72db262dbe406
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1402586467,1402586892,9ba4bc3b3f434f1641f047f5fe372340a9d387ad
9ba4bc3b3f434f1641f047f5fe372340a9d387ad,9ba4bc3b,Correctly set email subject when sharing page.,"Correctly set email subject when sharing page.

Change-Id: If0e95e8ad2ca87b82cdad25de30670b9d665a0a9
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1402319982,1402514571,89b42e3dc8009d372c8cc6a66295bbf43ac46e95
ce3936f91e51b54a676ea5d6d64b6d45077d5387,ce3936f9,Save full text of page to filesystem.,"Save full text of page to filesystem.

- when the user clicks Edit on a saved page, ask to
refresh the page. If the user agrees, reload the page
from the web, update the saved copy, and allow editing.
- Deletes folder appropriately when saved page is deleted

Change-Id: I2b8bffd95dd0036859c21494917700f3a822f942
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1402363483,1402514474,bb88d7539e9dc88ccd9e6226a3038ee84a8dc1f7
bb88d7539e9dc88ccd9e6226a3038ee84a8dc1f7,bb88d753,"Rename ""bookmarks"" to ""saved pages""","Rename ""bookmarks"" to ""saved pages""

Change-Id: I9c3cd87d6473738e021d77d4ef56e312aecce891
",,,,dbrant,dbrant@wikimedia.org,YuviPanda,yuvipanda@gmail.com,1402345819,1402500630,89b42e3dc8009d372c8cc6a66295bbf43ac46e95
89b42e3dc8009d372c8cc6a66295bbf43ac46e95,89b42e3d,Bump version number for 2.0-alpha-2014-06-09,"Bump version number for 2.0-alpha-2014-06-09

Change-Id: Id1310c224f806826397065fddd60a1f11e073789
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1402331182,1402336342,f1a04dc6a7a1367f226c7d31977522047d62a4df
f1a04dc6a7a1367f226c7d31977522047d62a4df,f1a04dc6,"Merge ""Revert ""Honor system font size setting in WebView""""","Merge ""Revert ""Honor system font size setting in WebView""""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1402336092,1402336092,"c6793ffccb8a2f898567d68d287fd790d7d39ecb,f41ff8692be5852dfda787005c6c3a82c5735821"
f41ff8692be5852dfda787005c6c3a82c5735821,f41ff869,"Revert ""Honor system font size setting in WebView""","Revert ""Honor system font size setting in WebView""

This reverts commit ad4d74ce79dbfe29eb32b2205c71d5d256c2287c.

Change-Id: Ic7f1c3e9257af1bcd13485c94efbe57cd8a9e8b2
",,,,BearND,bsitzmann@wikimedia.org,BearND,bsitzmann@wikimedia.org,1402335990,1402335990,ad4d74ce79dbfe29eb32b2205c71d5d256c2287c
c6793ffccb8a2f898567d68d287fd790d7d39ecb,c6793ffc,"Merge ""Honor system font size setting in WebView""","Merge ""Honor system font size setting in WebView""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1402330620,1402330620,"454ccd07642804fa9b1bab632c40af3ab90de1e6,ad4d74ce79dbfe29eb32b2205c71d5d256c2287c"
454ccd07642804fa9b1bab632c40af3ab90de1e6,454ccd07,"Merge ""Also handle global IP blocks""","Merge ""Also handle global IP blocks""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1402329972,1402329972,"85b48cfb047b2c3ff86428479f7b8329b993fd43,7ca1681cb5a6b20b8a52698face7282bd8a59d10"
ad4d74ce79dbfe29eb32b2205c71d5d256c2287c,ad4d74ce,Honor system font size setting in WebView,"Honor system font size setting in WebView

Go to Settings, Display, Font size.
Change to something other than normal to see the effect.
8sp is equivalent to default font size.

Change-Id: I3aaa892da96dff109ceacc19f9263cdeec86bc20
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1402323980,1402323994,85b48cfb047b2c3ff86428479f7b8329b993fd43
7ca1681cb5a6b20b8a52698face7282bd8a59d10,7ca1681c,Also handle global IP blocks,"Also handle global IP blocks

Change-Id: I550ac47813bb579d84ba49b6aeefaedbbee1da35
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1402323944,1402323944,cda3394c5501120e6c6384ae4a3dbfc2c17c8f12
85b48cfb047b2c3ff86428479f7b8329b993fd43,85b48cfb,"Merge ""Don't crash when blocked editors attempt to edit""","Merge ""Don't crash when blocked editors attempt to edit""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1402321757,1402321757,"f6b750b167e0dc7e78ac35d85a131b44f12eca4a,cda3394c5501120e6c6384ae4a3dbfc2c17c8f12"
f6b750b167e0dc7e78ac35d85a131b44f12eca4a,f6b750b1,Bump version number for 2.0-alpha-2014-06-06,"Bump version number for 2.0-alpha-2014-06-06

Change-Id: I4d4d9901d6fbe243b26f180da93b6f399fc0433d
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1402068945,1402088072,4f8ab3ece980c8896163c02434782736b34c962d
cda3394c5501120e6c6384ae4a3dbfc2c17c8f12,cda3394c,Don't crash when blocked editors attempt to edit,"Don't crash when blocked editors attempt to edit

Bug: 66235
Change-Id: Ia45ca9620cb81e6807109660b8afb0bd1b1ff199
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1402085331,1402085331,149ba10460586923f812cb5366ad0d33ffee2c07
4f8ab3ece980c8896163c02434782736b34c962d,4f8ab3ec,Refactor onCatch,"Refactor onCatch

Change-Id: I8708980f3ffb2708c64b772d832d3e0026ab2ecf
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1402077997,1402077997,09e774445f62c3e6ae3c123602e91a626ecc016a
09e774445f62c3e6ae3c123602e91a626ecc016a,09e77444,Catch more errors when fetching non-lead sections.,"Catch more errors when fetching non-lead sections.

Change-Id: Id5efba914564495c707ccbebf42c5e9bbbbacd04
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1402069376,1402077486,eaa38b7d192dbc4c0d8afd983724d74cd1079d35
eaa38b7d192dbc4c0d8afd983724d74cd1079d35,eaa38b7d,"Fix clickability of ""About"" titlebar text (properly).","Fix clickability of ""About"" titlebar text (properly).

Change-Id: I015e9cd90e477f0c742176a7888c74085b349ae4
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1402070003,1402070003,d7c2f3e49d27a44e98d0b316de5bf1a1a82af166
d7c2f3e49d27a44e98d0b316de5bf1a1a82af166,d7c2f3e4,"Merge ""Use simpler printf formatting for all messages""","Merge ""Use simpler printf formatting for all messages""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1402067681,1402067681,"27ede4c4c890c6f24a9f8aa7a22f228e06b6baae,149ba10460586923f812cb5366ad0d33ffee2c07"
149ba10460586923f812cb5366ad0d33ffee2c07,149ba104,Use simpler printf formatting for all messages,"Use simpler printf formatting for all messages

Translators were getting confused with the more specific syntax
and we were using it in only one place anyway

Change-Id: I026504e90302136f9f42a1480b4ab0f92c61f677
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1402067001,1402067523,b1e0d3e59957a3389ecd0acedbaca8cd486dd669
27ede4c4c890c6f24a9f8aa7a22f228e06b6baae,27ede4c4,Fix hamburger icon behavior in RTL environment.,"Fix hamburger icon behavior in RTL environment.

Change-Id: Ic52818f38a8e06f8c1334244214d60a896115aeb
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1402067090,1402067288,b1e0d3e59957a3389ecd0acedbaca8cd486dd669
b1e0d3e59957a3389ecd0acedbaca8cd486dd669,b1e0d3e5,Add TranslationTests,"Add TranslationTests

Going through all locales we have and trying to print all string resources.
Doesn't take into account any parameters.

Bug: 66241
Change-Id: I5e705b4f5cc9574a6206c335593256edb2e4fd8d
",,,,bearND,bsitzmann@wikimedia.org,dbrant,dbrant@wikimedia.org,1402028461,1402065404,1fef7dfd5a37417ce858dee0a7c02e5410b1dbf4
1fef7dfd5a37417ce858dee0a7c02e5410b1dbf4,1fef7dfd,Show confirmation when about to discard edit changes.,"Show confirmation when about to discard edit changes.

Also deny preview when there's no modification.

Bug: 66195
Change-Id: Id3e20cb45bc5a862a9afce08b3d4716edd2e958d
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1401998542,1402062963,fcb6526ee879ee03dd8ac4b7e8533762a764b673
fcb6526ee879ee03dd8ac4b7e8533762a764b673,fcb6526e,Fix crash when unknown language was used.,"Fix crash when unknown language was used.

Consequence of fixing bug 66140.
Var text in PageTitle was null. But then also the primary site was invalid
since there is no zz.wikipedia.org for example.

Bug: 66213
Change-Id: I3020ae25081768ed6509031523d203196d055ea0
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1402007476,1402007509,1763774503e5dc66cb232e5f16cbe140e3d095e2
1763774503e5dc66cb232e5f16cbe140e3d095e2,17637745,Only add successfully-loaded pages to History.,"Only add successfully-loaded pages to History.

Change-Id: If5751b907f677e8d9b907fd08a4f5da0caf653f4
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1401993861,1401998564,34ceeabc4f97b2c0dccf24458475eabcf686e913
34ceeabc4f97b2c0dccf24458475eabcf686e913,34ceeabc,"Merge ""Fix possible crash relating to ToC (based on OTRS tickets)""","Merge ""Fix possible crash relating to ToC (based on OTRS tickets)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1401998449,1401998449,"fdd3f76860b54bff21723be51f7fda67b8294a66,ff0889e9cc4626be351fb2322b868a9ab54e6f99"
ff0889e9cc4626be351fb2322b868a9ab54e6f99,ff0889e9,Fix possible crash relating to ToC (based on OTRS tickets),"Fix possible crash relating to ToC (based on OTRS tickets)

Change-Id: I0d67db3c130141473d5a62f33ea44e4003f3b489
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1401993158,1401998026,f822cf7eb6a638ee86050ac7cab72caaf476ded1
fdd3f76860b54bff21723be51f7fda67b8294a66,fdd3f768,Make clicking ToC header go to top of page.,"Make clicking ToC header go to top of page.

Bug: 64890
Change-Id: If3aabd2a6817384453717e80a0590540c9603fa3
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1401992159,1401997191,f822cf7eb6a638ee86050ac7cab72caaf476ded1
f822cf7eb6a638ee86050ac7cab72caaf476ded1,f822cf7e,Enrich API object with MCC/MNC only on .m.wikipedia.org.,"Enrich API object with MCC/MNC only on .m.wikipedia.org.

* Just in case.

Change-Id: I8bfde193b60102799ff65de945a0e9e6b2919de3
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1401990025,1401990025,d09bb3e97ff5e304911fb2a493bdde4b05e427e3
d09bb3e97ff5e304911fb2a493bdde4b05e427e3,d09bb3e9,Bump version number for 2.0-alpha-2014-06-05,"Bump version number for 2.0-alpha-2014-06-05

Change-Id: Ia24975e6054a3cd7176eab55c5934dc6267f472a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401983128,1401983128,bdfecd2e9072acc51adedbf851684999360de94c
bdfecd2e9072acc51adedbf851684999360de94c,bdfecd2e,Fix clickability of About actionbar text.,"Fix clickability of About actionbar text.

Change-Id: I5264ec5c88aa40def6e32133ea5b231dabebcb9f
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1401982505,1401982874,eeb36c1ce6af71f148674fe954dfb1176b02a281
eeb36c1ce6af71f148674fe954dfb1176b02a281,eeb36c1c,Hide keyboard when leaving History selection.,"Hide keyboard when leaving History selection.

(whether it's due to selecting an item, or clicking top-left button)

Change-Id: I4d65f98d55f54636b2f7e08a0c302c2fe46455fa
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1401978595,1401982032,16501a6f175cc3fbe02181bacf7353036ca687d9
16501a6f175cc3fbe02181bacf7353036ca687d9,16501a6f,Fix discarding of edit contents when clicking links in Preview.,"Fix discarding of edit contents when clicking links in Preview.

Also fixes opening new pages from external Intents.

Bug: 66186
Bug: 66194
Change-Id: Ie83637c973e69a06280fb6901f928851511fb1d3
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1401979772,1401979772,ff91248ab9a4a04a4e1b5321407aed2f171beb99
ff91248ab9a4a04a4e1b5321407aed2f171beb99,ff91248a,Don't crash if we can't find a language code,"Don't crash if we can't find a language code

Just return English! Everyone loves the English!

Bug: 66140
Change-Id: I72c28475e9f7a19a1b7940834b2399dabe8bc96b
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401976252,1401976547,b2bb798ab4cebeefdbe057e6284ef1b259fd8ca8
b2bb798ab4cebeefdbe057e6284ef1b259fd8ca8,b2bb798a,Allow moving app to external storage,"Allow moving app to external storage

Change-Id: I47e944c435c62d773420ee029b6e302cc384b7ce
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401972521,1401975072,70ce9641b78a1b474ebb4713226e2cb4a7f0f758
70ce9641b78a1b474ebb4713226e2cb4a7f0f758,70ce9641,Always show current app's About page,"Always show current app's About page

Previously if you had both alpha and beta installed it
offered an intent chooser for both

Change-Id: Ie614302aa6590281a5162ca8892bf5719d0bd843
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401972036,1401975072,3891f3f61a3ad15fde580adcf62041b739cb4fc2
3891f3f61a3ad15fde580adcf62041b739cb4fc2,3891f3f6,Fix SSL errors killing the app,"Fix SSL errors killing the app

see
https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom;TicketID=7588950
and related

Change-Id: I3105d96e8ccdd8bb4448ae3ab467325d5a85926d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401934904,1401975072,8d152a14c9d6982fbecb6a35e408228837b633ee
8d152a14c9d6982fbecb6a35e408228837b633ee,8d152a14,Hide all Wikipedia apps from external link windows,"Hide all Wikipedia apps from external link windows

Change-Id: I047af3933eda0f10d869ebc7d89745c4c4d95b8b
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401929181,1401975072,ce053378a3f1767afe5cd7d88badb91fd0762027
ce053378a3f1767afe5cd7d88badb91fd0762027,ce053378,searching only for # or : caused crashes,"searching only for # or : caused crashes

Bug: 66151
Change-Id: I8ebf03ab683fc16bee7cb1468c58e15227a71cf8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1401938251,1401938251,85c19c39c9882c3f3f6b278629de3642ed2755a6
85c19c39c9882c3f3f6b278629de3642ed2755a6,85c19c39,Shorten messages in the overflow menu,"Shorten messages in the overflow menu

Change-Id: Iec031819fcacd922d1931c5cc8eea0c4091d9ed0
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401926927,1401926927,85fa17f0ffd3063d7735820746e393979665e6d5
85fa17f0ffd3063d7735820746e393979665e6d5,85fa17f0,Version bump for 2.0-alpha-2014-06-04,"Version bump for 2.0-alpha-2014-06-04

Change-Id: I8446115d57d487b4115288c01cf71e8ae86ba371
",,,,YuviPanda,yuvipanda@gmail.com,Dbrant,dbrant@wikimedia.org,1401914977,1401915444,e7e533253704c5b7c8a1333e7482766daa0a6d79
e7e533253704c5b7c8a1333e7482766daa0a6d79,e7e53325,Always use bundled styles until June 17th UTC,"Always use bundled styles until June 17th UTC

MobileFrontend changes that we depend on have not been deployed
yet. They are in master, and not even in 1.24wmf7. As a result
we get older styling for anything past the first page.

These changes will be in 1.24wmf8, which will be branched
on 5th June on to TestWiki, and will be on enwiki on
June 12th (according to
https://wikitech.wikimedia.org/wiki/Deployments).
Setting this to 17th gves us a few more days to fix things
in the cluster before it goes live, if issues exist.

This removes the ability to modify the styles in place
for the first two weeks of the beta app release, but
I think that is better than broken styles or trying
to SWAT the MobileFrontend changes.

Change-Id: I91205fe2d10c50406d50c7a1c6bbe0f547fd5940
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1401910432,1401910965,02f9ab4f941bb9bb945c936a4d22fdb4c679e3f1
02f9ab4f941bb9bb945c936a4d22fdb4c679e3f1,02f9ab4f,Add beta launcher icons,"Add beta launcher icons

Change-Id: I8b69888d5bec6f0d852ace8af080191c3b5f4f58
Source: https://trello.com/c/U8vGqn3c/9-1-app-icon-should-be-w-not-generic-icon
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401900861,1401907227,9b2f13c7afb055cb081a710566b76bcd7f4a3a92
9b2f13c7afb055cb081a710566b76bcd7f4a3a92,9b2f13c7,Add beta name string,"Add beta name string

This is needed in master since that is what translatewiki.net
picks up from

Change-Id: Id3fbe62e2748ad01d9d39a1d2f79e926c212ab7e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401900266,1401900318,70be518fc8d8b25efab091a868c9cb8ddcd12c62
70be518fc8d8b25efab091a868c9cb8ddcd12c62,70be518f,"Merge ""Hide ToC button for pages with 1 section.""","Merge ""Hide ToC button for pages with 1 section.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1401893321,1401893321,"f579b94b6be13941fc4f5a6647bb797232a284b7,a446a75bdc35dd737a7ffb9051fb3ff6159e6d35"
a446a75bdc35dd737a7ffb9051fb3ff6159e6d35,a446a75b,Hide ToC button for pages with 1 section.,"Hide ToC button for pages with 1 section.

Change-Id: Ic99072e3bcc4d89e348ab3d5abcb3ac36ab317bc
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1401891525,1401891525,c66a805b720a324b0fda2d31fa376c2ce78d7bbe
f579b94b6be13941fc4f5a6647bb797232a284b7,f579b94b,Update bundled CSS to include enwiki styles,"Update bundled CSS to include enwiki styles

Change-Id: Ifdcd7f3ee783f20096a5c8ef204099fee2cb6de6
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401891174,1401891289,b3b355eb40b22dc794468cc1560c65587844e1f2
b3b355eb40b22dc794468cc1560c65587844e1f2,b3b355eb,Optimize imports for tests as well,"Optimize imports for tests as well

Change-Id: I2124928c85cebe9d752bbca6847484b3d32d9fea
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401890668,1401890668,c66a805b720a324b0fda2d31fa376c2ce78d7bbe
c66a805b720a324b0fda2d31fa376c2ce78d7bbe,c66a805b,Re-arrange imports to not use * imports,"Re-arrange imports to not use * imports

Done by IntelliJ. Moving to * imports first was a mistake,
and keeping these on seems to keep giving up rebase issues

Change-Id: I67e1c273b09812d444e11f363c8176a7f2ef5d21
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401889419,1401889754,a91c565b83aaecf7960c6917cea113ebb2b553fd
a91c565b83aaecf7960c6917cea113ebb2b553fd,a91c565b,Bump version number for 2.0-alpha-2014-06-03,"Bump version number for 2.0-alpha-2014-06-03

Change-Id: Ib262b4fa375566e394484916280f5323ff78b3df
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401838145,1401838145,61b9a7e652e49f27287ca9dae5325bc4b497f081
61b9a7e652e49f27287ca9dae5325bc4b497f081,61b9a7e6,Fix stray AboutActivity entry,"Fix stray AboutActivity entry

Change-Id: Ide00e38781b17e546bb0602d550f856dd2614744
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401838039,1401838039,18934891fbd1e613983bde5f5d62eab7edd648ac
18934891fbd1e613983bde5f5d62eab7edd648ac,18934891,Send app session ID with URL rather than using EL,"Send app session ID with URL rather than using EL

This does not kill the EventLogging server.

Change-Id: Ic795228b6cbed39585660b54ef3b361b8c9f9696
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401834475,1401837961,ccb39d4be9247520511be67f4a03b7e90718891c
ccb39d4be9247520511be67f4a03b7e90718891c,ccb39d4b,License text on every edit,"License text on every edit

Also:
Increased line height so the two links are separated a bit more.
Prompt when leaving W0.

Change-Id: I641dbb5f64d10b4ff7319595aa6c7a1fcb71cbc5
",,,,bearND,bsitzmann@wikimedia.org,Dbrant,dbrant@wikimedia.org,1401809185,1401835130,5ad745583b2c6141bf937f575149fab225e1189f
5ad745583b2c6141bf937f575149fab225e1189f,5ad74558,"Merge ""The Menu button (for phones that have it) opens the nav drawer.""","Merge ""The Menu button (for phones that have it) opens the nav drawer.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1401835123,1401835123,"54a39dbefce27b8a0366f24f4b52d4b064c9a21a,0c29e96e8d8f5158c17d7ecf21d1e4bcd4946723"
54a39dbefce27b8a0366f24f4b52d4b064c9a21a,54a39dbe,Make downloading styles more robust,"Make downloading styles more robust

Change-Id: I0dc4354cd04a054a33435ceb1d5af83543b2415d
",,,,YuviPanda,yuvipanda@gmail.com,BearND,bsitzmann@wikimedia.org,1401833768,1401834681,e8a7a75a1cbd8b22ffb48d7647992e019b1d8063
e8a7a75a1cbd8b22ffb48d7647992e019b1d8063,e8a7a75a,Update StyleFetcher to fetch from new RL module names,"Update StyleFetcher to fetch from new RL module names

Change-Id: I50e425aa071b9c1f16f4f82e770537e084e297ad
",,,,YuviPanda,yuvipanda@gmail.com,BearND,bsitzmann@wikimedia.org,1401824733,1401834568,8aa73307e82b1cc2a0c9afecaa3702c87160e7b4
8aa73307e82b1cc2a0c9afecaa3702c87160e7b4,8aa73307,Fix logout behavior.,"Fix logout behavior.

Change-Id: I9afaebe5c1385c6894624db316741668dd8c9ead
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1401831783,1401831783,aabf0ffa521437953fd0646b95125c409c7249c2
aabf0ffa521437953fd0646b95125c409c7249c2,aabf0ffa,Change action bar home icon to W icon,"Change action bar home icon to W icon

No border around the action bar home icon anymore. :)
Only seems to affect 4.x devices, but better than nothing.

Change-Id: Iee01fb0f9b5c8386f8354c94b2af884348b628e0
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1401827919,1401827929,56fbf539e6a97d64f455cd2b6049cdb7a181a9fb
56fbf539e6a97d64f455cd2b6049cdb7a181a9fb,56fbf539,"Make ""clear bookmarks"" dialog consistent with ""clear history""","Make ""clear bookmarks"" dialog consistent with ""clear history""

Change-Id: Ie65565bb6051bea3b272e77307b98cceba8e8345
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1401803884,1401826051,41aa05294d61049d2c4e91f0eb0275609abf8390
41aa05294d61049d2c4e91f0eb0275609abf8390,41aa0529,Load selected history/bookmark/language items in the same fragment.,"Load selected history/bookmark/language items in the same fragment.

Change-Id: I7139d2d18244a34353b00e256d8df034497d5617
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1401672976,1401825955,a4c56657895fa7884817876b5ec04e34c11fe4b6
0c29e96e8d8f5158c17d7ecf21d1e4bcd4946723,0c29e96e,The Menu button (for phones that have it) opens the nav drawer.,"The Menu button (for phones that have it) opens the nav drawer.

Change-Id: Ica22fcbb8e2547ecdbcb946d83936a6dc544d273
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1401819145,1401819145,a4c56657895fa7884817876b5ec04e34c11fe4b6
a4c56657895fa7884817876b5ec04e34c11fe4b6,a4c56657,Top left icon now slides *exactly* like Google apps (with hysteresis),"Top left icon now slides *exactly* like Google apps (with hysteresis)

Change-Id: I247bd216c2235265bb7838233c96b08816a401f2
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1401807004,1401814395,8f39334d4f790b79a6efd052d91b08cca97e2224
8f39334d4f790b79a6efd052d91b08cca97e2224,8f39334d,"Merge ""Tweak backgrounds in nav menu and search bar.""","Merge ""Tweak backgrounds in nav menu and search bar.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1401814379,1401814379,"b048476b3c4d3d266344dd54c61e14aeff6b1d21,731f4779aa0df966f64eb4c54fd3499677368eb9"
731f4779aa0df966f64eb4c54fd3499677368eb9,731f4779,Tweak backgrounds in nav menu and search bar.,"Tweak backgrounds in nav menu and search bar.

Change-Id: Ib1ce80659ee58926c210871c0b1c1035bde81df7
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1401805103,1401805103,0f986916f37ae170a113f9507c80b7d8c073d453
b048476b3c4d3d266344dd54c61e14aeff6b1d21,b048476b,Add feedback link to About page.,"Add feedback link to About page.

Change-Id: I984459340a8e0adc350563ef519e9621339f9cfe
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1401764736,1401765050,0f986916f37ae170a113f9507c80b7d8c073d453
0f986916f37ae170a113f9507c80b7d8c073d453,0f986916,Add About page,"Add About page

- Lists contributors alphabetically
- Has ToU and Privacy Policy links
- Mentions the current build info
- Accessible from Settings

Change-Id: I7a3837b5acab5611fdf80768fb1ba19054236674
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401497749,1401763084,ffda95baebce05c5e2b34ad1e3e2cbcce7615d18
ffda95baebce05c5e2b34ad1e3e2cbcce7615d18,ffda95ba,Implement nav tweaks.,"Implement nav tweaks.

* Change colors in nav drawer
* Rename ""Settings"" to ""More""
* Move ""Log out"" to ""More"" menu
* Add About page with version info and feedback
* Add search bar button to show ToC
* Update verbiage of ""read in other languages""
* Make search bar persist on top, unless it's a low-res device

Change-Id: I581e0ded7aa7018828b9bb5cde879178a5e49cb1
",,,,Dmitry Brant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1401234603,1401734028,ee41d6fca862b308ea4342cd87707cf81660483a
ee41d6fca862b308ea4342cd87707cf81660483a,ee41d6fc,Don't use hard-coded file directory.,"Don't use hard-coded file directory.

Change-Id: Iaee0340a29968ddefa706b4d82eea0275600b00d
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1401718891,1401727665,7c0f580b75452c454bf98610eac7b5cd9ab9815f
7c0f580b75452c454bf98610eac7b5cd9ab9815f,7c0f580b,Hide keyboard when history item selected after searching.,"Hide keyboard when history item selected after searching.

Change-Id: I0a965a14397f2c2569950cc139abcc3b108ec48e
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1401673194,1401727450,d35ec15d35928ae63464e83e5c31eb9443a717f9
d35ec15d35928ae63464e83e5c31eb9443a717f9,d35ec15d,Bump version for release 2.0-alpha-2014-05-30,"Bump version for release 2.0-alpha-2014-05-30

Change-Id: I5609b7e8ab348ff24d65276cbf0deb2a15a7f8f9
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1401721881,1401721921,56b772a3387422f5bf5bbc9807184620717e9323
56b772a3387422f5bf5bbc9807184620717e9323,56b772a3,"Merge ""Hide edit icons in main page""","Merge ""Hide edit icons in main page""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1401661222,1401661222,"2da51d71b6f8eb8d529dd1b74b4730fc41a5ddae,1ed9941e5717edd3f81d1f21812891396fac5a1a"
2da51d71b6f8eb8d529dd1b74b4730fc41a5ddae,2da51d71,"Merge ""Make history search case insensitive & fully matching""","Merge ""Make history search case insensitive & fully matching""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1401660842,1401660842,"eb6297559f8f6736c82df2ca871e2e2c2b450801,708b535fdc4d04bb594d4b0c378632d3252ce753"
eb6297559f8f6736c82df2ca871e2e2c2b450801,eb629755,Replace floppy disk and trash icons,"Replace floppy disk and trash icons

 on editing, history, and bookmarks screens.

Change-Id: Iafb16c909fb1e5856a7275d6521713223541bc69
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1401320319,1401491955,b0de592ca287da87527d5df8bb373217dafb2fcc
1ed9941e5717edd3f81d1f21812891396fac5a1a,1ed9941e,Hide edit icons in main page,"Hide edit icons in main page

This also lets us have different behavior on the main page
in the future.

Change-Id: I2439a1b50331300b4c81b5a0c1abb850c7428267
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401472690,1401472767,b0de592ca287da87527d5df8bb373217dafb2fcc
708b535fdc4d04bb594d4b0c378632d3252ce753,708b535f,Make history search case insensitive & fully matching,"Make history search case insensitive & fully matching

Bug: 65930
Change-Id: I71781fe2c42ca872eeca5435d9e045c37ea2c27e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401455947,1401455972,b0de592ca287da87527d5df8bb373217dafb2fcc
b0de592ca287da87527d5df8bb373217dafb2fcc,b0de592c,"Stop using OpenSans, switch back to default font","Stop using OpenSans, switch back to default font

- Also fixes minor unrelated jshint issue that would
  be otherwise a pain to rebase
- Removes Styled* classes, since they are no longer
  used
Change-Id: Ie38bd4a7a89743208d6b80d31a68f667abe063d9
",,,,YuviPanda,yuvipanda@gmail.com,Dmitry Brant,dbrant@wikimedia.org,1401314945,1401407819,2fc37ff88d5239574566d67c7b740ed506e0b606
2fc37ff88d5239574566d67c7b740ed506e0b606,2fc37ff8,"Merge ""Remove external link styling from CC BY-SA link""","Merge ""Remove external link styling from CC BY-SA link""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1401403773,1401403773,"f0129c55e7a56b48d6228268eb0b31d3efc59df6,904252fc6ed1dd131b74ad2dbfad08f988757576"
904252fc6ed1dd131b74ad2dbfad08f988757576,904252fc,Remove external link styling from CC BY-SA link,"Remove external link styling from CC BY-SA link

- nofollow does not make sense here since this is spidered
  by nobody
- External link styling looked rather odd according to a bunch
  of people, and hence removed

Change-Id: I1a260971b7857582b6f8942b949019b039d5d03a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401321377,1401403583,d03ccb6bdfd3223e37dcf7d5a1d0e211ca17af19
f0129c55e7a56b48d6228268eb0b31d3efc59df6,f0129c55,"Merge ""Add MCC-MNC once per app session on cellular.""","Merge ""Add MCC-MNC once per app session on cellular.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1401343054,1401343054,"1cac184a66b3993dcbbfcb10dd5a9d154227b39a,8b4a0c3b170d6bf1a8f8141d93dfc60416ae4e2b"
1cac184a66b3993dcbbfcb10dd5a9d154227b39a,1cac184a,"Merge ""Remove unnecessary import""","Merge ""Remove unnecessary import""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1401332090,1401332090,"d03ccb6bdfd3223e37dcf7d5a1d0e211ca17af19,fe8500bcfa965a4cf129b497ec473bdec9af8770"
8b4a0c3b170d6bf1a8f8141d93dfc60416ae4e2b,8b4a0c3b,Add MCC-MNC once per app session on cellular.,"Add MCC-MNC once per app session on cellular.

* http://lists.wikimedia.org/pipermail/wikimedia-l/2014-April/071131.html

Change-Id: If61f11f5fd6c04af2e42f58276b2c9cf888ec709
",,,,dr0ptp4kt,abaso@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1399061986,1401314080,d03ccb6bdfd3223e37dcf7d5a1d0e211ca17af19
d03ccb6bdfd3223e37dcf7d5a1d0e211ca17af19,d03ccb6b,Update README: converting svgs to pngs,"Update README: converting svgs to pngs

Change-Id: I75a6f0fb66f367d5140ba4d207dbf7de632583a7
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1401299346,1401299346,8795b578798d2d31c8ad645d9c077049b2fec38b
fe8500bcfa965a4cf129b497ec473bdec9af8770,fe8500bc,Remove unnecessary import,"Remove unnecessary import

Change-Id: I43a9f8297d944fdf8ec5300212935684d45bac42
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1401295269,1401295269,8795b578798d2d31c8ad645d9c077049b2fec38b
8795b578798d2d31c8ad645d9c077049b2fec38b,8795b578,"Merge ""Make sure Arabic wikipedia is classified as RTL""","Merge ""Make sure Arabic wikipedia is classified as RTL""",,,,BearND,bsitzmann@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1401295202,1401295202,"4b5054898270771269c79440bc2c95d04fc24f57,ad51d4e5e19318d581fd2f437240437733a88b9e"
4b5054898270771269c79440bc2c95d04fc24f57,4b505489,Add analytics for the 'you can not edit' dialog,"Add analytics for the 'you can not edit' dialog

Change-Id: I937c104d05f2715f557de0fa158072c0e5fdd044
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401244407,1401244433,55818f761a78cf36ce56083e20835f8d22f080e7
55818f761a78cf36ce56083e20835f8d22f080e7,55818f76,Display a dialog box telling people they can't edit,"Display a dialog box telling people they can't edit

Only on protected pages, of course :)

Change-Id: Ic083331f11e520dedebbe0e0b3366508c161866a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401243876,1401243876,852501c228b0e5b74839705fa3ae74cad6780a83
ad51d4e5e19318d581fd2f437240437733a88b9e,ad51d4e5,Make sure Arabic wikipedia is classified as RTL,"Make sure Arabic wikipedia is classified as RTL

Sorting order was wrong and hence the binary search
skipped right past it.

Bug: 64420
Change-Id: Ie658fc193303784cde9a82ce47fe8259271c67da
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401242950,1401242989,5df0d7b3abd078f780facebe8d23fd0dc61c6bb5
852501c228b0e5b74839705fa3ae74cad6780a83,852501c2,Show protected pencil icon if user can't edit page,"Show protected pencil icon if user can't edit page

Change-Id: I68dddac62b2856775154e8e29ed79584749455c2
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401239975,1401242512,f9bda6e99c60da336f793c66504823fbdd6f38b1
f9bda6e99c60da336f793c66504823fbdd6f38b1,f9bda6e9,Display message about protection status when editing,"Display message about protection status when editing

Change-Id: I7b361ae5536a205e45256d488b547e7b96930559
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401156673,1401242512,91cedfa2e41c657b8971e09113848ca7e034afbe
91cedfa2e41c657b8971e09113848ca7e034afbe,91cedfa2,Update to latest styles,"Update to latest styles

Change-Id: I4022831fd0bee990264340041ebf0963459dc36e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401242440,1401242512,5df0d7b3abd078f780facebe8d23fd0dc61c6bb5
5df0d7b3abd078f780facebe8d23fd0dc61c6bb5,5df0d7b3,Bump version number for 2.0-alpha-2014-05-25,"Bump version number for 2.0-alpha-2014-05-25

Change-Id: I41ec65f192df738eb72e1f2aacb333d9ea55254e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1401105700,1401105700,88daf4be1cfa0cebd4f653cc2db0c9e052fd805a
88daf4be1cfa0cebd4f653cc2db0c9e052fd805a,88daf4be,Update packaged styles to latest version,"Update packaged styles to latest version

Change-Id: I07f2df3e7f3aeb3461062fd3bffbf67efff4b23b
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1400885809,1400885944,4aa664e1945d4e1ee4d91c81ba3f9331254ab474
4aa664e1945d4e1ee4d91c81ba3f9331254ab474,4aa664e1,"Merge ""Add proper hashbang""","Merge ""Add proper hashbang""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400881636,1400881636,"096e1350a47bdb65ad6344aff5f369ff7f8ab193,b238b58a1001aeb257f779152e115d3802c463bb"
b238b58a1001aeb257f779152e115d3802c463bb,b238b58a,Add proper hashbang,"Add proper hashbang

Change-Id: Ifca718b31c4102e1679efead8cddfa3a3a6e1ea9
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1400881400,1400881400,072bfda32ec295a499839a8377f3a1144afe4152
096e1350a47bdb65ad6344aff5f369ff7f8ab193,096e1350,Fix edit/preview when activity is destroyed.,"Fix edit/preview when activity is destroyed.

Bug: 65505
Change-Id: If3cc97f9d27976c5d6f9439c207f85e90d69ca2a
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1400863595,1400877412,b6f04a14cadacd23d8e562f4043a5922f8222f77
b6f04a14cadacd23d8e562f4043a5922f8222f77,b6f04a14,Fix crash when loading page(s) with no network.,"Fix crash when loading page(s) with no network.

Change-Id: If76cb17e51cb5d294cacc968d4cd1c2180ca62c9
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1400875075,1400876698,09abb19941c85b754764f2a885a959814f5d58c3
09abb19941c85b754764f2a885a959814f5d58c3,09abb199,"Merge ""Get tests to run on older devices.""","Merge ""Get tests to run on older devices.""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400876490,1400876490,"072bfda32ec295a499839a8377f3a1144afe4152,76942afa0d1ba556c72a3adc5ee87726385947a9"
76942afa0d1ba556c72a3adc5ee87726385947a9,76942afa,Get tests to run on older devices.,"Get tests to run on older devices.

Had to do some Maven magic to get JUnit jar included
without being a duplicate. Before this change it
only worked on my Kitkat device, but not on my
GB and ICS devices.

Change-Id: I4b0391b070ede15a150296fe32b03de3802f8d98
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1400863336,1400863336,a7aa8883fcce2e550598e5bdf20254d05b52bd7b
072bfda32ec295a499839a8377f3a1144afe4152,072bfda3,Stabilize automated tests,"Stabilize automated tests

DoEditTests:
  needed a potential retry with new login
TriggerAbuseFilterTest + TriggerEditCaptchaTest:
  needed to clear tokens + cookies for anonymous editing

Change-Id: I809e34f40863c2f679a18010ed78cbd8e2fcb471
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1400819948,1400819948,a7aa8883fcce2e550598e5bdf20254d05b52bd7b
a7aa8883fcce2e550598e5bdf20254d05b52bd7b,a7aa8883,Bump version number for 2.0-alpha-2014-05-22,"Bump version number for 2.0-alpha-2014-05-22

Change-Id: Id16880270fb452e89ffea4be2b43b3190981d76c
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1400809116,1400809116,422b1b1335a46e7a7a82f33d0c1d548566b1bb81
422b1b1335a46e7a7a82f33d0c1d548566b1bb81,422b1b13,Keep only a limited number of WebViews in memory.,"Keep only a limited number of WebViews in memory.

(scroll position to be implemented in next patch)

Bug: 64450

Change-Id: I768e2dcae18924d78253fad66bfaa83b8447d94a
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1400271634,1400806477,8da4d312b6c718ef4e0f14e5377f66d104ef9a48
8da4d312b6c718ef4e0f14e5377f66d104ef9a48,8da4d312,Minor fixes to the html structure,"Minor fixes to the html structure

This helps us re-use MobileFrontend styles, which is
coming as a separate patch to MobileApp soon

Change-Id: I4ff2d52f24b766670fa037736e9f2555dd6f7a3f
",,,,YuviPanda,yuvipanda@gmail.com,BearND,bsitzmann@wikimedia.org,1400788470,1400794247,86de8e42ce7f97924c926c1ae529c7e5c9932b63
86de8e42ce7f97924c926c1ae529c7e5c9932b63,86de8e42,"Merge ""Clear ""Network error. Tap to try again.""  bar""","Merge ""Clear ""Network error. Tap to try again.""  bar""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400785967,1400785967,"d7edb9b07c7c61d5c49b67f667345749202ad609,e7ce0e3e767cedf4a45a97a01abcba63e67d95e4"
d7edb9b07c7c61d5c49b67f667345749202ad609,d7edb9b0,Restrict length of search input to 255,"Restrict length of search input to 255

The server wouldn't like requests > 255 chars anyways.

Bug: 65560
Change-Id: I6b92ebe605162d50d5aa63b4808ecf22d6cea579
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1400712517,1400714917,e16f8f7bcb1172602bd2bc8c4d0c498e2f3d1cf2
e16f8f7bcb1172602bd2bc8c4d0c498e2f3d1cf2,e16f8f7b,Fix crash after switching languages,"Fix crash after switching languages

getView() returns null if the activity is recreated.
Using UI Thread Handler instead of getView().
Since app could be null I added another way to get to it.

To repo turn on ""don't keep activities"" in dev options.

Bug: 65539
Change-Id: Ifd7bdc3eb53876f214a67d1e750f2114a6efaebf
",,,,bearND,bsitzmann@wikimedia.org,YuviPanda,yuvipanda@gmail.com,1400648787,1400680996,d8dadadbf8f817405e7a07d8e83219b84296dc1a
d8dadadbf8f817405e7a07d8e83219b84296dc1a,d8dadadb,Bump version number for 2.0-alpha-2014-05-20,"Bump version number for 2.0-alpha-2014-05-20

Change-Id: I29b37be05f3ef1ebccb2133913c5896583c84247
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1400629849,1400629849,a9e2735c4719e3363cf7cbedebc38d9c76dccf1c
a9e2735c4719e3363cf7cbedebc38d9c76dccf1c,a9e2735c,Update packaged styles to latest,"Update packaged styles to latest

Change-Id: I3561e85eb29fec5f02215761ad32b5c2fdf4344e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1400626594,1400626620,2f5da6ecf36c99e58fd554395582463a85ae3ccf
e7ce0e3e767cedf4a45a97a01abcba63e67d95e4,e7ce0e3e,"Clear ""Network error. Tap to try again.""  bar","Clear ""Network error. Tap to try again.""  bar

Fade out the bar when the search test field loses focus.
Hide it when navigate back or open the nav drawer.

Bug: 64773
Change-Id: Ie56aefc7cb44ee6819f1805e5b534283d9fd030d
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1400536041,1400626337,2f5da6ecf36c99e58fd554395582463a85ae3ccf
2f5da6ecf36c99e58fd554395582463a85ae3ccf,2f5da6ec,Fix edit crash after activity restart,"Fix edit crash after activity restart

The EditHandler didn't have a currentPage.
Had to make sure that setPage was called in this case as well.

Bug: 65499
Change-Id: I9a43be3f435b27e4d785b77b96853f6a12430810
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1400622120,1400622120,961660ace8cc7333404aded7a8e243de33fbdfa1
961660ace8cc7333404aded7a8e243de33fbdfa1,961660ac,"Merge ""Use Java-style Array brackets""","Merge ""Use Java-style Array brackets""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400611460,1400611460,"ce95adbb03545b29aed3a0e50747b66a5a6874a6,84772394a05a2ea4e848c4cff15486c0fbb38389"
ce95adbb03545b29aed3a0e50747b66a5a6874a6,ce95adbb,Remove unused imports,"Remove unused imports

Bug: 63742
Change-Id: I8545981605834a73aa2ee3e440a1b14ece2c36b7
",,,,Anirudh S,anirudh24seven@gmail.com,Yuvipanda,yuvipanda@gmail.com,1400602961,1400606989,1b697d2ab927ee4107e03e3fe0a361bf8ce89fd7
84772394a05a2ea4e848c4cff15486c0fbb38389,84772394,Use Java-style Array brackets,"Use Java-style Array brackets

Convert C-style Array brackets (String args[]) to Java-style brackets (String[] args)

Bug: 63742
Change-Id: I958f22f39017683874ff08383d41df17e813a573
",,,,Anirudh S,anirudh24seven@gmail.com,Anirudh S,anirudh24seven@gmail.com,1400603920,1400603920,1b697d2ab927ee4107e03e3fe0a361bf8ce89fd7
1b697d2ab927ee4107e03e3fe0a361bf8ce89fd7,1b697d2a,Move + symbols to the next line.,"Move + symbols to the next line.
This will fix the OperatorWrapCheck warning.

Bug: 63742
Change-Id: Ib80e3d3422d667346b3799101624562ee29c8d52
",,,,Anirudh S,anirudh24seven@gmail.com,Yuvipanda,yuvipanda@gmail.com,1400597407,1400598864,fd44f8efc89b59450dcc592e6fc49c4ffd8155a9
fd44f8efc89b59450dcc592e6fc49c4ffd8155a9,fd44f8ef,"Merge ""Fix crashing when handling an unprocessable external link""","Merge ""Fix crashing when handling an unprocessable external link""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400598809,1400598809,"96804224c88cd3160d12b20c817af169095685a8,da1412e5f6f6c4586176ea9f7a2515cf45cf430f"
96804224c88cd3160d12b20c817af169095685a8,96804224,Fix whitespace issues,"Fix whitespace issues
Bug: 63742

Change-Id: I6fd1986d1ad67bad600a9617d071fda9a28c8cf6
",,,,Anirudh S,anirudh24seven@gmail.com,Anirudh S,anirudh24seven@gmail.com,1400593139,1400593139,32c7db5e4af4208b34d78d1ca0bf1182ed4b009d
32c7db5e4af4208b34d78d1ca0bf1182ed4b009d,32c7db5e,Add braces to 'if' construct.,"Add braces to 'if' construct.
Change-Id: I32a197061dd0d6db7a471c0503770f5eed8ec7d8
",,,,Anirudh S,anirudh24seven@gmail.com,Anirudh S,anirudh24seven@gmail.com,1400588087,1400590258,e7b168ea6c546cf76a2bd7374c2be8c2ffad12e0
da1412e5f6f6c4586176ea9f7a2515cf45cf430f,da1412e5,Fix crashing when handling an unprocessable external link,"Fix crashing when handling an unprocessable external link

Bug: 64424
Change-Id: I0186d531de019138807c2ce3d637c9d9984b9a90
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1400544507,1400582273,e7b168ea6c546cf76a2bd7374c2be8c2ffad12e0
e7b168ea6c546cf76a2bd7374c2be8c2ffad12e0,e7b168ea,Bump version number for 2.0-alpha-2014-05-19,"Bump version number for 2.0-alpha-2014-05-19

Change-Id: Ief4cf07a6ea53522a673b3b004a3e7d33eb33697
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1400537797,1400537797,dce723cc97bebd40dcdfc1870366855237bd8793
dce723cc97bebd40dcdfc1870366855237bd8793,dce723cc,"Merge ""Do not clear out history after every 30 days""","Merge ""Do not clear out history after every 30 days""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400536479,1400536479,"fc1105286fea7ecea3b3b0f43ac0f5c5d49cf859,f5f1d21cdb756e4446d9ab5b97538be0a8d45568"
f5f1d21cdb756e4446d9ab5b97538be0a8d45568,f5f1d21c,Do not clear out history after every 30 days,"Do not clear out history after every 30 days

From talking to users they don't expect their history
to vanish without explicit action by them. This is consistent
with how browsers treat reading history as well.

Change-Id: Ida14d852f849730637a342d271eea8752125e8a7
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1400411089,1400531251,c06e336b3859de022e26d2cb36fe7ee5556955b9
fc1105286fea7ecea3b3b0f43ac0f5c5d49cf859,fc110528,Improve appearance of RTL languages in app language selection.,"Improve appearance of RTL languages in app language selection.

Change-Id: Ifc8886747802b8bc4f0b061f66931629ba662da4
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1400512288,1400530517,c06e336b3859de022e26d2cb36fe7ee5556955b9
c06e336b3859de022e26d2cb36fe7ee5556955b9,c06e336b,"Merge ""Fix crash when there's no network during StyleFetcherTask.""","Merge ""Fix crash when there's no network during StyleFetcherTask.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400530284,1400530284,"68ee2da9ca553b42fc73595c460da79e5fbabf63,96b47e3fc56aa7e6aba6060b3e6613dbf962e19c"
96b47e3fc56aa7e6aba6060b3e6613dbf962e19c,96b47e3f,Fix crash when there's no network during StyleFetcherTask.,"Fix crash when there's no network during StyleFetcherTask.

Change-Id: I8455b95b836fb988f0301c19013068b3711916ad
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1400526850,1400527229,a5498f054b38ae628d8dec9f598e6b6733bb8b4c
68ee2da9ca553b42fc73595c460da79e5fbabf63,68ee2da9,Override hashCode and toString when equals is overridden,"Override hashCode and toString when equals is overridden

Following Joshua Bloch's advice to override hashCode when equals is overridden.
I also accessed some fields directly instead of the getter if the getter was trivial.
Probably should override toString in more classes to aid debugging but it's a start.

Change-Id: I48240324f3c9522c275b0b2377127c051862fa7c
",,,,bearND,bsitzmann@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1400126551,1400526705,a5498f054b38ae628d8dec9f598e6b6733bb8b4c
a5498f054b38ae628d8dec9f598e6b6733bb8b4c,a5498f05,Remove source less files from the repo,"Remove source less files from the repo

- Are now in Extension:MobileApp
- fonts.css is kept here since we bundle the fonts
- Images removed since they are embedded in CSS
- Add script to update the bundled CSS from servers
- Use betalabs for everything for now

Change-Id: Ieaac4fbcdc7eda71f2de9653efa08fb6a737b7e7
",,,,YuviPanda,yuvipanda@gmail.com,BearND,bsitzmann@wikimedia.org,1400270578,1400525183,583786345ee96d49e6a3a248f6f5f17f49d25914
583786345ee96d49e6a3a248f6f5f17f49d25914,58378634,"Merge ""Fetch remote styles once a day and cache them""","Merge ""Fetch remote styles once a day and cache them""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400522619,1400522619,"5c9446df93c50b1ffe98769861e251028c6ae392,99cfa27335c8ddab8989098036340f243bc7ebb0"
5c9446df93c50b1ffe98769861e251028c6ae392,5c9446df,Added title to Save Edit menu item.,"Added title to Save Edit menu item.

Bug: 65463
Change-Id: Ia2ec1ee4ab4a93e93cf50d90163b0feeaa9f7f5b
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1400506896,1400506896,20fe224527eb44809036be111388ee06c1b84156
20fe224527eb44809036be111388ee06c1b84156,20fe2245,"Merge ""Make History list searchable""","Merge ""Make History list searchable""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400506240,1400506240,"4f0af8657d414f8877358654306a99f8d18dc7d8,de8aeff68722f9b5037aeb67efdf81e396184c89"
de8aeff68722f9b5037aeb67efdf81e396184c89,de8aeff6,Make History list searchable,"Make History list searchable

Change-Id: I78063d4b3531511c754936fa8f2d4b73423b7893
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1400362679,1400362754,2aaaea9f2c08a6820db8f10c481f1a70f49f9940
99cfa27335c8ddab8989098036340f243bc7ebb0,99cfa273,Fetch remote styles once a day and cache them,"Fetch remote styles once a day and cache them

- Fetches styles from bits betalabs and caches them
- Uses downloaded styles if they are more recent than packaged ones
- Fetches styles once a day (for now)

TODO:
- Do not fetch new CSS if it hasn't been changed
- Include sitecss (Mediawiki:Mobile.css) if available, and
  vary CSS based on the site the current page is for

Change-Id: I0b11420d75959ac546746daa9a21705598c9ee7d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1400197337,1400272897,10a5e42f0c6206334567f8e01c908f71fd0cd720
4f0af8657d414f8877358654306a99f8d18dc7d8,4f0af865,"Merge ""Load styles via a StyleLoader""","Merge ""Load styles via a StyleLoader""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400270922,1400270922,"c7cbdd73b95c5f2f148a4155ead6585bd441d428,10a5e42f0c6206334567f8e01c908f71fd0cd720"
c7cbdd73b95c5f2f148a4155ead6585bd441d428,c7cbdd73,Make W0 task handler test play more nicely.,"Make W0 task handler test play more nicely.

Change-Id: I19bacffb3c7b2cea75fc9efd54af104fcb89f4c4
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1400263554,1400263657,2aaaea9f2c08a6820db8f10c481f1a70f49f9940
10a5e42f0c6206334567f8e01c908f71fd0cd720,10a5e42f,Load styles via a StyleLoader,"Load styles via a StyleLoader

This will let us load either bundled styles in assets/ or dynamic
styles (that will be fetched ocassionally)

Change-Id: I9cf225ccd3ab34823197954180224b6f823b49c8
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1400168929,1400256770,2aaaea9f2c08a6820db8f10c481f1a70f49f9940
2aaaea9f2c08a6820db8f10c481f1a70f49f9940,2aaaea9f,"Merge ""Fix PageTitleTests""","Merge ""Fix PageTitleTests""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400229667,1400229667,"fb18fd2b556c7388c421667ba4eb2c48173c7836,d00e085edb8ee1053b0a1138c5c20173c77e4a6c"
d00e085edb8ee1053b0a1138c5c20173c77e4a6c,d00e085e,Fix PageTitleTests,"Fix PageTitleTests

Got an ArrayOutOfBoundsException when parsing ""/wiki/Talk:India#"".
When we encountered a hash at the end of the string we tried to
access text.split(""#"")[1]. Boom!

Change-Id: Ib80ab7e770e05510a7a4eb63341ee0de32f2792d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1400189553,1400197939,63f811a76095fc837b26c6fd3ca21ccf8cbc0662
fb18fd2b556c7388c421667ba4eb2c48173c7836,fb18fd2b,Fix PreviewTaskTests,"Fix PreviewTaskTests

The server response now includes more HTML classes:
icon icon-32px icon-edit enabled

Change-Id: I5a1cc787309a2bec4fbed663625b745f4ff9c89f
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1400194960,1400194960,63f811a76095fc837b26c6fd3ca21ccf8cbc0662
63f811a76095fc837b26c6fd3ca21ccf8cbc0662,63f811a7,Fix PageTests,"Fix PageTests

When passing empty string for the time string in PageProperties current time at object construction is used,
since it cannot parse """" as a valid time.

Change-Id: Ic2e488a76f9fd9920c1f0b9b7665d772ece8b5f8
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1400111171,1400111171,058b13c39bf26d34b29630acb57139fadcd33030
058b13c39bf26d34b29630acb57139fadcd33030,058b13c3,Bump version number to 2.0-alpha-2014-05-14,"Bump version number to 2.0-alpha-2014-05-14

Change-Id: I2cd1535479e28544ef7585802641cd01ac0dafd3
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1400088482,1400088482,c961ce9150b97324c613379beaa97ab84756a591
c961ce9150b97324c613379beaa97ab84756a591,c961ce91,Update table of contents after editing page.,"Update table of contents after editing page.

Bug: 64447
Change-Id: Ib6a5003b770475afcdbbc14af7d90e3cc4d1e909
",,,,dbrant,dbrant@wikimedia.org,BearND,bsitzmann@wikimedia.org,1399606069,1400087167,79ad5656c439f0178398e3e54c660800496e389f
79ad5656c439f0178398e3e54c660800496e389f,79ad5656,"Merge ""Fixed crash when fragment is detached from Activity.""","Merge ""Fixed crash when fragment is detached from Activity.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400086016,1400086016,"b0703f4ca98ad7d14d772d13d8a82dbcaaffb897,0b6dea741dc1230d042e1ab246aa76e117b20a7c"
b0703f4ca98ad7d14d772d13d8a82dbcaaffb897,b0703f4c,Fixed NonEmptyValidator to work with all devices.,"Fixed NonEmptyValidator to work with all devices.

Bug: 65275
Change-Id: Ibc38a971c3583321ebc23415d4cbc8469bc37a5a
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1400024530,1400024530,a54d98b27b4686202d1f9284787ae35efe68d335
a54d98b27b4686202d1f9284787ae35efe68d335,a54d98b2,"Merge ""Update overflow menu when back button pressed.""","Merge ""Update overflow menu when back button pressed.""",,,,BearND,bsitzmann@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1400015110,1400015110,"2da4e9411b4620b3adc208e6b09ecd6877cff214,f33b45b718916d7aa4eb90737a25e6e3c079057d"
2da4e9411b4620b3adc208e6b09ecd6877cff214,2da4e941,Make IDE happier in test project,"Make IDE happier in test project

Less warnings/errors by declaring sdk levels in test specific AndroidManifest.xml;
copied from production manifest

Change-Id: Ib0fccc61107f9b671c1c185138d14b986f9c3299
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1400002915,1400013633,5ba4f8cad26a93a33f71eeda5d913324fc83fdc4
5ba4f8cad26a93a33f71eeda5d913324fc83fdc4,5ba4f8ca,Stop blinking cursor after search result selected.,"Stop blinking cursor after search result selected.

Bug: 64209
Change-Id: I3bc9d78a68848dd48e519f9a54a0d7441a2d8af5
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1399598215,1400009568,76ba520c3889f450e59aa74967f10381dfb798dc
76ba520c3889f450e59aa74967f10381dfb798dc,76ba520c,Add import for test specific R class,"Add import for test specific R class

LoginTaskTest uses two special string resources for credentials.
See also credentials.xml

Change-Id: I5071b8c83528d5a9dcdbc12d7a0b873474ad3b9d
",,,,bearND,bsitzmann@wikimedia.org,bearND,bsitzmann@wikimedia.org,1399937429,1399937429,9d10aa5454660f5d4043cb46770a087a1b74c10f
f33b45b718916d7aa4eb90737a25e6e3c079057d,f33b45b7,Update overflow menu when back button pressed.,"Update overflow menu when back button pressed.

Bug: 64774
Change-Id: I944c3d51925b97b9719bb941ed5f5a7ea53561fd
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1399605951,1399936277,9d10aa5454660f5d4043cb46770a087a1b74c10f
0b6dea741dc1230d042e1ab246aa76e117b20a7c,0b6dea74,Fixed crash when fragment is detached from Activity.,"Fixed crash when fragment is detached from Activity.

Bug: 64493
Change-Id: I214f801f92520ffedad0aafa3c15d2aa5e1524f5
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1399913529,1399923673,9d10aa5454660f5d4043cb46770a087a1b74c10f
9d10aa5454660f5d4043cb46770a087a1b74c10f,9d10aa54,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id1064553fbabad39317625f27268e7adc702c7f1
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1399902212,1399902212,31330759531a3cbe4a74befdf76f8e613c7e74cb
31330759531a3cbe4a74befdf76f8e613c7e74cb,31330759,bump version to 47 (2.0-alpha-2014-05-10),"bump version to 47 (2.0-alpha-2014-05-10)

Change-Id: I3c4de07fc48ec410fca548022ba1dd8735a9a90c
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1399728113,1399728113,99cf4dc2c79a7fb5c70dadaab29642110bfe5f0e
99cf4dc2c79a7fb5c70dadaab29642110bfe5f0e,99cf4dc2,Add instrumentation for ToC usage,"Add instrumentation for ToC usage

Change-Id: I548f4dbae1e8a1e79a93e0a9f775547de87f134a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1399714773,1399726454,01b017b00a17a17b9877b2bf7da7468a6dd32e5e
01b017b00a17a17b9877b2bf7da7468a6dd32e5e,01b017b0,Version bump to 2.0-alpha-2014-05-09,"Version bump to 2.0-alpha-2014-05-09

Change-Id: Id0df1633600d73392e68b9c4ea6e9fed62e63041
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1399651803,1399651803,9d0e633751a2f6056ca0d827ed80ae699f82bda3
9d0e633751a2f6056ca0d827ed80ae699f82bda3,9d0e6337,Fixed clicking on links that have inner tags.,"Fixed clicking on links that have inner tags.

e.g. <a><strong>foo</strong></a>

Change-Id: Id3faf0c870dacefbf1760a46d3685e8dab64743c
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1399480701,1399651516,637da57229e23e06f7797cdaa895e20447205a79
637da57229e23e06f7797cdaa895e20447205a79,637da572,"Display ""last updated"" time correctly.","Display ""last updated"" time correctly.

Bug: 64136
Change-Id: Iecb77a06e094841a20bc1c2230c9901e84903ee1
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1399563914,1399651103,f4563e6b8962ac938124992533a93f66a0d45822
f4563e6b8962ac938124992533a93f66a0d45822,f4563e6b,Better scrolling when editing sections.,"Better scrolling when editing sections.

Change-Id: I89ceba24d93c22d3d31e08216059137124c17512
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1399558352,1399650006,178e1f61911e5fffa0190c2d59d65c8d79a8dd2d
178e1f61911e5fffa0190c2d59d65c8d79a8dd2d,178e1f61,"Merge ""Data migration for old saved pages -> bookmarks""","Merge ""Data migration for old saved pages -> bookmarks""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399578078,1399578078,"a24af2e0e16804e0bf591a943dbe92ce72604c7c,fabc75c03acf165f51a1bb2e9adac209c1292729"
a24af2e0e16804e0bf591a943dbe92ce72604c7c,a24af2e0,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ibc1b3ba51ece5e3b86ba972864879a34c46ec053
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1399538708,1399538708,8c47814e663c89c9a9b1641edbd7231ad13e7ac0
8c47814e663c89c9a9b1641edbd7231ad13e7ac0,8c47814e,Bump version number to 2.0-alpha-2014-05-07bis,"Bump version number to 2.0-alpha-2014-05-07bis

Change-Id: I882e874c4be47e6d73df8a5c76dfd60e33bbff47
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1399434710,1399434710,e9fa6cf96736c834e50b8fac780e4e53aed8ee70
e9fa6cf96736c834e50b8fac780e4e53aed8ee70,e9fa6cf9,"Handle ""invalidtitle"" api response.","Handle ""invalidtitle"" api response.

(display ""page does not exist"" error, instead of ""loading"" indefinitely)

Change-Id: I39cfc9fc6e50d7cfcae856fceacdd2242f86e6f8
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1399430013,1399430013,8ff7d86cbfa29eb321377857a4e88a9108fb35f7
8ff7d86cbfa29eb321377857a4e88a9108fb35f7,8ff7d86c,Properly handle links to article titles with Unicode characters.,"Properly handle links to article titles with Unicode characters.

Bug: 64987
Change-Id: I2cedebcba45b0072586e4e08f16467237604c689
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1399429894,1399429894,f93a9e6d1e01d0a4836b24b3c889a910cf80c4a3
f93a9e6d1e01d0a4836b24b3c889a910cf80c4a3,f93a9e6d,Changed ToC to be a sliding drawer from the right edge.,"Changed ToC to be a sliding drawer from the right edge.

Fixes horizontal scrolling issues in the WebView.

Bug: 63526
Bug: 63133
Change-Id: Iebfacd023b7746a4404494b850bd5db397dbe355
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1399426959,1399426959,2aae8a6b304594a3bbe3a29ecf710a0043498547
2aae8a6b304594a3bbe3a29ecf710a0043498547,2aae8a6b,Bump version for release 2.0-alpha-2014-05-07,"Bump version for release 2.0-alpha-2014-05-07

Change-Id: Ice240bcfeff496b1bf13c59584e5f0e96350ec3e
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1399424008,1399424008,ffcc0ae37490142355a315f89992157fbe281d02
ffcc0ae37490142355a315f89992157fbe281d02,ffcc0ae3,"Merge ""Ensuring that the Search bar is visible when Back is pressed.""","Merge ""Ensuring that the Search bar is visible when Back is pressed.""",,,,Dr0ptp4kt,abaso@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399422593,1399422593,"95b7d0c3de8a03596f5a69c82743175b2a51fbdd,85290651caead44e8f0baf6431ecf327a5f0bed4"
95b7d0c3de8a03596f5a69c82743175b2a51fbdd,95b7d0c3,"Merge ""Properly handle no network access during account creation""","Merge ""Properly handle no network access during account creation""",,,,Dr0ptp4kt,abaso@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399422334,1399422334,"b4749045d9ac2db751db91bd1137dbdca4bdd478,3b469ae90dc24900c497b2c11fefcc6af4dcb324"
b4749045d9ac2db751db91bd1137dbdca4bdd478,b4749045,"Merge ""more ""proper"" way of disabling ToC sliding.""","Merge ""more ""proper"" way of disabling ToC sliding.""",,,,Dr0ptp4kt,abaso@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399421726,1399421726,"de92d2397a64c73bb2e3ac72d4cdc3ad9168086a,0378516ea84e732a8f04a0fa3000021d4606a436"
de92d2397a64c73bb2e3ac72d4cdc3ad9168086a,de92d239,"Merge ""Hide the soft-keyboard _before_ the nav drawer is opened.""","Merge ""Hide the soft-keyboard _before_ the nav drawer is opened.""",,,,Dr0ptp4kt,abaso@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399420361,1399420361,"b6d67b493f4388cda08188bb690b5621ac328bae,cd53020585d75e29092c57a49867b6f517d8a12c"
0378516ea84e732a8f04a0fa3000021d4606a436,0378516e,"more ""proper"" way of disabling ToC sliding.","more ""proper"" way of disabling ToC sliding.

(previous method was producing occasional crashes)

Change-Id: I8e05e92c3dd11ace9a3dccb2a7a2c57187efc87d
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1399315248,1399409848,cd53020585d75e29092c57a49867b6f517d8a12c
b6d67b493f4388cda08188bb690b5621ac328bae,b6d67b49,"Merge ""Don't need this for saved page fragment. (also fixes crash)""","Merge ""Don't need this for saved page fragment. (also fixes crash)""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399408693,1399408693,"1b15b7feb6e3ae23c63751b22168a7c51c8d363d,ec83d2c1f832fc44fd7af2eb91725fec4a8504da"
ec83d2c1f832fc44fd7af2eb91725fec4a8504da,ec83d2c1,Don't need this for saved page fragment. (also fixes crash),"Don't need this for saved page fragment. (also fixes crash)

Bug: 64827

Change-Id: I5d229aacec566181d160a69c8f30c12a547d8e00
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1399323153,1399387473,ef87aa8b0995ceae3cf09335edd2aafddc5d854d
3b469ae90dc24900c497b2c11fefcc6af4dcb324,3b469ae9,Properly handle no network access during account creation,"Properly handle no network access during account creation

Bug: 64891
Change-Id: I196c6c1c77fe577ddb8b0f12cf919afdf19f1f22
",,,,dbrant,dbrant@wikimedia.org,Siebrand,siebrand@kitano.nl,1399335925,1399357291,ef87aa8b0995ceae3cf09335edd2aafddc5d854d
85290651caead44e8f0baf6431ecf327a5f0bed4,85290651,Ensuring that the Search bar is visible when Back is pressed.,"Ensuring that the Search bar is visible when Back is pressed.

Bug: 64913
Change-Id: I42f1e002a5bae47f3cb993eed843a2ae4363b092
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1399332441,1399332441,ef87aa8b0995ceae3cf09335edd2aafddc5d854d
cd53020585d75e29092c57a49867b6f517d8a12c,cd530205,Hide the soft-keyboard _before_ the nav drawer is opened.,"Hide the soft-keyboard _before_ the nav drawer is opened.

Change-Id: I55e6e6fcf04d24073dc5b1f082987be5b828a613
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1399311949,1399325025,ef87aa8b0995ceae3cf09335edd2aafddc5d854d
1b15b7feb6e3ae23c63751b22168a7c51c8d363d,1b15b7fe,"Merge ""Add missing curly braces""","Merge ""Add missing curly braces""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399324259,1399324259,"ef87aa8b0995ceae3cf09335edd2aafddc5d854d,0cb220842ad8ea5720a04255cfbfb65346a24bf5"
0cb220842ad8ea5720a04255cfbfb65346a24bf5,0cb22084,Add missing curly braces,"Add missing curly braces

Change-Id: Ide28dfdfa1d5465d09b97cb9f072c4657393ae50
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1399320733,1399320733,f3a29bfa1194fe876caaa888575b61e782acac7b
fabc75c03acf165f51a1bb2e9adac209c1292729,fabc75c0,Data migration for old saved pages -> bookmarks,"Data migration for old saved pages -> bookmarks

This is done once on first launch, synchronously.
Should still be pretty fast since it's only saving the page title entries,
not fetching any of their data.

Change-Id: I4063447c9f29e4267cf547de040ddcf871dd7816
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1398975653,1399320305,f3a29bfa1194fe876caaa888575b61e782acac7b
ef87aa8b0995ceae3cf09335edd2aafddc5d854d,ef87aa8b,"Merge ""Treat empty titles as pointing to the main page""","Merge ""Treat empty titles as pointing to the main page""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399320160,1399320160,"1c970ad5d346e91786786b1ecaa8a132f666e0be,6b8121d45db2ec828775216ff6f0e9df5887abb7"
1c970ad5d346e91786786b1ecaa8a132f666e0be,1c970ad5,"Merge ""Add StyleBundle classes + injection methods to CommunicationBridge""","Merge ""Add StyleBundle classes + injection methods to CommunicationBridge""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399319888,1399319888,"e9c6761c27374584b960efc1f26b8c507df5f6a1,18dd953892431589d5d790701926e57219301d7f"
e9c6761c27374584b960efc1f26b8c507df5f6a1,e9c6761c,"Merge ""Fix .noflip.svg detection to work properly""","Merge ""Fix .noflip.svg detection to work properly""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399319568,1399319568,"f3a29bfa1194fe876caaa888575b61e782acac7b,6c2eb1258712ee7a2fd1df5c7223776d3d5cc5c2"
f3a29bfa1194fe876caaa888575b61e782acac7b,f3a29bfa,Fixed action bar icon titles in Bookmarks and Create Account,"Fixed action bar icon titles in Bookmarks and Create Account

(visible when the icons are long-pressed)

Change-Id: I8167801350c59b53cb420c0b38d18a21bfaaaf4c
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1399064095,1399300295,e07d6dbda2e584ae45f04316783bb061e3a19198
6c2eb1258712ee7a2fd1df5c7223776d3d5cc5c2,6c2eb125,Fix .noflip.svg detection to work properly,"Fix .noflip.svg detection to work properly

Change-Id: I35216149baeeb2f92115aa91e5f50ebd094c4424
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1399108160,1399108160,e07d6dbda2e584ae45f04316783bb061e3a19198
e07d6dbda2e584ae45f04316783bb061e3a19198,e07d6dbd,Made the W search icon noflip,"Made the W search icon noflip

Change-Id: I853c2b0c0e06ef450de4d0e3f152aa138b31aee4
",,,,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,YuviPanda,yuvipanda@gmail.com,1399106553,1399108029,4146146c5061128cea490353ee0b82229f1b4ab7
6b8121d45db2ec828775216ff6f0e9df5887abb7,6b8121d4,Treat empty titles as pointing to the main page,"Treat empty titles as pointing to the main page

Bug: 64384
Change-Id: I9a7a28799203b7906a1eac0cb2ab93ea86a635c2
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1399105858,1399106452,4146146c5061128cea490353ee0b82229f1b4ab7
4146146c5061128cea490353ee0b82229f1b4ab7,4146146c,Bumped version number for 2.0-alpha-2014-05-02,"Bumped version number for 2.0-alpha-2014-05-02

Change-Id: If5355fb04ad19a2e79580ac499c126a3d600d9c8
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1399070669,1399070669,5f26d444194a5e7aa2f6f246d6305192b32c1d80
5f26d444194a5e7aa2f6f246d6305192b32c1d80,5f26d444,Restricting the navbar and ToC to a reasonable width.,"Restricting the navbar and ToC to a reasonable width.

(instead of filling up the whole width of the screen)

Bug: 64341, 64667
Change-Id: Ib0d0fbfd8816ecb6b5e8e7344a045905e3658cc1
",,,,dbrant,dbrant@wikimedia.org,YuviPanda,yuvipanda@gmail.com,1399065138,1399070494,9324646dc727073021e459d6e5d8e6f815a9ffe8
18dd953892431589d5d790701926e57219301d7f,18dd9538,Add StyleBundle classes + injection methods to CommunicationBridge,"Add StyleBundle classes + injection methods to CommunicationBridge

- Moved all bridge functionality to .bridge package
- Remove hard-coded css <link> tags in HTML
- Add class that lets us load assets/ packaged CSS

This should make it easy to load CSS from other parts of the
filesystem later on, and also switch between them easily.

Change-Id: I4d3699adf9318427bc35feb65db69e6ab5d9175f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1399069391,1399069870,dcf8ee7ae63cb0082750e1a18dfc614b31e9589a
9324646dc727073021e459d6e5d8e6f815a9ffe8,9324646d,Hiding page fragment when obscured by a new page.,"Hiding page fragment when obscured by a new page.

Fixes rendering issues when the page fragment stack fills up.

Bug: 64762
Change-Id: I0f1eccf9b0c2e60762dd2ed72d62d25972c05232
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1399059818,1399059818,0ce1fca459dd9fa1e196a27ffa0001a5bb210894
0ce1fca459dd9fa1e196a27ffa0001a5bb210894,0ce1fca4,For API10 compatibility.,"For API10 compatibility.

Change-Id: I969b9f1f7b7810dd596a715ce09f563cde813caa
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1399048512,1399056673,dcf8ee7ae63cb0082750e1a18dfc614b31e9589a
dcf8ee7ae63cb0082750e1a18dfc614b31e9589a,dcf8ee7a,Rename SavePageEvent to BookmarkPageEvent,"Rename SavePageEvent to BookmarkPageEvent

Change-Id: I5b4c0ab85f9c873ff05df90960dd1c01a367cf5f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1399046696,1399053127,8c31e9d1557c803df4ffc41fc2c7f73716d27478
8c31e9d1557c803df4ffc41fc2c7f73716d27478,8c31e9d1,Navigate to Main Page when user changes content language,"Navigate to Main Page when user changes content language

Bug: 64736
Change-Id: I1cc68ff2c82a022fe9dc2730d8df98df235f9ec5
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1399046519,1399053121,da68633d126a8f676baa896b1f0f048d79d76e84
da68633d126a8f676baa896b1f0f048d79d76e84,da68633d,"Merge ""Setting dialog titles correctly.""","Merge ""Setting dialog titles correctly.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1399046254,1399046254,"a0aaed4fdea5c8a738b4ee6e365780bec538f9f7,61866763f29e7d809349861b8cf14c788f0721a7"
61866763f29e7d809349861b8cf14c788f0721a7,61866763,Setting dialog titles correctly.,"Setting dialog titles correctly.

Change-Id: I063c9ff3c85bdd2ac47f787ec17fe98675ea2f0e
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1399045165,1399045165,d219a9936a6d1ca7838492611c676d216abc6e44
a0aaed4fdea5c8a738b4ee6e365780bec538f9f7,a0aaed4f,Bump version to 2.0-alpha-2014-05-01,"Bump version to 2.0-alpha-2014-05-01

Change-Id: Ie8fd29c4163eb32a16da0ddcc73fab57f0c3ddd0
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398984087,1398984087,d219a9936a6d1ca7838492611c676d216abc6e44
d219a9936a6d1ca7838492611c676d216abc6e44,d219a993,Tweak verbiage on wikipedia language settings,"Tweak verbiage on wikipedia language settings

Change-Id: I4f09cc4aedfebaed5a3f0736843c0e3a8a960f4d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398978758,1398978758,7c691a704a56aa9857229de3ad5ae2631638b3a5
7c691a704a56aa9857229de3ad5ae2631638b3a5,7c691a70,"Merge changes Id2c824cb,Iefa4ae31","Merge changes Id2c824cb,Iefa4ae31

* changes:
  KILL SAVED PAGES, MAKE THEM JUST BOOKMARKS
  Rename Saved Pages to Bookmarks
",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398972860,1398972860,"23e1285df2110865dca4d2a5b87cfb37008c5c95,ab2676f4732f186696ce37d02fefa3e6aee13042"
ab2676f4732f186696ce37d02fefa3e6aee13042,ab2676f4,"KILL SAVED PAGES, MAKE THEM JUST BOOKMARKS","KILL SAVED PAGES, MAKE THEM JUST BOOKMARKS

DIE DIE DIE SAVED PAGES! DIE

- Creates a new table called bookmarks, bumps db version number
- Message keys not renamed yet, needs co-ordination with twn
- Loses previous saved pages from the alpha but that's ok

Change-Id: Id2c824cb03969d0a3ef79f55e1e9b4b685b448c0
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398969923,1398970856,b17c4c7d0c4be7dc17b7841d2b2dab469c8be58f
b17c4c7d0c4be7dc17b7841d2b2dab469c8be58f,b17c4c7d,Rename Saved Pages to Bookmarks,"Rename Saved Pages to Bookmarks

Part of an effort to de-emphasize the locally saving pages
aspect of this feature.

Change-Id: Iefa4ae31f6bdb4160b6d72b21e1da91727e08883
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398961443,1398961443,9f412df30993178f8f057df680453774fd291497
23e1285df2110865dca4d2a5b87cfb37008c5c95,23e1285d,"Merge ""Show namespaces in search results""","Merge ""Show namespaces in search results""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398960833,1398960833,"3ff6f3ed7e2349d3df52ca3b7c2fa76579d35a6e,ff5903ccaab56efc89fda2236c5b05b935fea635"
3ff6f3ed7e2349d3df52ca3b7c2fa76579d35a6e,3ff6f3ed,"Merge ""Upgrade Android Saripaar""","Merge ""Upgrade Android Saripaar""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398960622,1398960622,"9f412df30993178f8f057df680453774fd291497,f6290140f1867ad92013c77240b0d5abfff08b30"
ff5903ccaab56efc89fda2236c5b05b935fea635,ff5903cc,Show namespaces in search results,"Show namespaces in search results

Bug: 64688
Change-Id: I376dfb3c4e4ac244f3975843ba57346630df8844
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398935253,1398935253,f6290140f1867ad92013c77240b0d5abfff08b30
f6290140f1867ad92013c77240b0d5abfff08b30,f6290140,Upgrade Android Saripaar,"Upgrade Android Saripaar

Improves Email Validation

Bug: 64615
Change-Id: Ia0d71d953805ce69f025431cd398d3f5f3580c27
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398932565,1398932565,1fc297ee77d98592b57c5b0d2beeb76b797dd07a
9f412df30993178f8f057df680453774fd291497,9f412df3,"Hiding the ""repeat password"" field when ""display password"" enabled","Hiding the ""repeat password"" field when ""display password"" enabled

Bug: 64408
Change-Id: I011c65819ba7f253cf86b13e47dc073fe16c7d84
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1398786632,1398906125,1fc297ee77d98592b57c5b0d2beeb76b797dd07a
1fc297ee77d98592b57c5b0d2beeb76b797dd07a,1fc297ee,Ensure App Icon isn't flipped for RTL languages,"Ensure App Icon isn't flipped for RTL languages

Bug: 64684
Change-Id: I7a2143e30d807242c826e0213835cf38c21cb330
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398896955,1398896955,e77133be44dfb4361d9ca7046e9680b5206bba46
e77133be44dfb4361d9ca7046e9680b5206bba46,e77133be,Update resource png files with newer version of rsvg,"Update resource png files with newer version of rsvg

Change-Id: I5b5827e5a484b27871082ff6185d2120216d407f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398896277,1398896277,a1cc35a6b191479c49a0cd28fcd8bb02d2f102df
a1cc35a6b191479c49a0cd28fcd8bb02d2f102df,a1cc35a6,Bump version number for 2.0-alpha-2014-04-30,"Bump version number for 2.0-alpha-2014-04-30

Change-Id: I88688a564e6a67c934b3b19b7563951a6b5284f8
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398892694,1398892694,cdceff530efc34a2a59ec0483d6851cd69dab6d7
cdceff530efc34a2a59ec0483d6851cd69dab6d7,cdceff53,Fixed crashing on red links.,"Fixed crashing on red links.

Bug: 64423
Change-Id: I88be44efc3e588f55899ad74d6b8f39be2bab49e
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1398889961,1398889961,d092466a7fc7d79e893655b6c9a00dd4027ded42
d092466a7fc7d79e893655b6c9a00dd4027ded42,d092466a,Fixed date text in History and Saved Pages,"Fixed date text in History and Saved Pages

Bug: 64675
Change-Id: I7521e08c5e0cdf3914a7a4d07828b494c5487792
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1398885921,1398885921,262522edd561412055518357e26c0e9aede18fa1
262522edd561412055518357e26c0e9aede18fa1,262522ed,Hiding the keyboard when navigation drawer is pulled out,"Hiding the keyboard when navigation drawer is pulled out

Bug: 64339
Change-Id: If29cefc79752c82cb5742eca10af88e39725ee5e
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1398880156,1398880156,de87517771001fc1fce2a44a7b05d59e0169ec7b
de87517771001fc1fce2a44a7b05d59e0169ec7b,de875177,"Merge ""Make alpha launcher icon the alpha launcher icon""","Merge ""Make alpha launcher icon the alpha launcher icon""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398877093,1398877093,"178e9757b5324f648e1b04a711e0dba63b512739,6a17adca2c4b813150c6a338ba6e958125d4537e"
178e9757b5324f648e1b04a711e0dba63b512739,178e9757,"Merge ""Display Main Page when app first loads""","Merge ""Display Main Page when app first loads""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398876390,1398876390,"a09899b19ada9ab9cee0034d18552ac5b9b18f9e,6e7041f19657726cfd00b47a8001eabe3e1e7d69"
a09899b19ada9ab9cee0034d18552ac5b9b18f9e,a09899b1,"Merge ""Add simple way to generate JSON data""","Merge ""Add simple way to generate JSON data""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398874341,1398874341,"82cb9ff0030a9392c76cb02d42868266c98f52cf,0f5591c41dd9783cb70006b7f0da3ddddecc9f0b"
82cb9ff0030a9392c76cb02d42868266c98f52cf,82cb9ff0,"Merge ""Specialcase Testwiki in the generated data sets""","Merge ""Specialcase Testwiki in the generated data sets""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398874257,1398874257,"d355da734895e710a69d9db4793d028f4b66c761,827202f76ccd9f273cd5875f5fd3ce47ec41fd00"
d355da734895e710a69d9db4793d028f4b66c761,d355da73,"Merge ""Minor consistency fixes for scripts/make-templates.py""","Merge ""Minor consistency fixes for scripts/make-templates.py""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398874210,1398874210,"d7208dfe59264e84f2dcecf436f0d62166db2d97,86e4cd802a911ac08b9fbdbd76d978be6e3fc702"
6a17adca2c4b813150c6a338ba6e958125d4537e,6a17adca,Make alpha launcher icon the alpha launcher icon,"Make alpha launcher icon the alpha launcher icon

Should have a separate icon for the backgroundless W as well

Change-Id: I8e942fb7ed96ab33a4a1a4e5c869650835b65cc2
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398873797,1398873797,d7208dfe59264e84f2dcecf436f0d62166db2d97
d7208dfe59264e84f2dcecf436f0d62166db2d97,d7208dfe,Bounce Special pages to external browser.,"Bounce Special pages to external browser.

Change-Id: I4372b73bbeb51187f96038ca66407dc21cf4e62e
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1398869948,1398872279,09f4fdeabff42b5e6c15ff9d2b7613410b4cbf9e
6e7041f19657726cfd00b47a8001eabe3e1e7d69,6e7041f1,Display Main Page when app first loads,"Display Main Page when app first loads

Change-Id: If8798b609fc492a72749dd8b79afa5a3c6eff4bd
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1398869837,1398870025,0f5591c41dd9783cb70006b7f0da3ddddecc9f0b
0f5591c41dd9783cb70006b7f0da3ddddecc9f0b,0f5591c4,Add simple way to generate JSON data,"Add simple way to generate JSON data

Change-Id: I1e6ce52695df378850f5b662d8f9bb9306a7cdb6
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1398869687,1398870016,827202f76ccd9f273cd5875f5fd3ce47ec41fd00
827202f76ccd9f273cd5875f5fd3ce47ec41fd00,827202f7,Specialcase Testwiki in the generated data sets,"Specialcase Testwiki in the generated data sets

Change-Id: I64e57561f75012377eae18f04f7643cc460539b7
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1398868510,1398870000,86e4cd802a911ac08b9fbdbd76d978be6e3fc702
86e4cd802a911ac08b9fbdbd76d978be6e3fc702,86e4cd80,Minor consistency fixes for scripts/make-templates.py,"Minor consistency fixes for scripts/make-templates.py

- Make sure everything is unicode
- Always use double quotes
- Use print as a function

Ideally at some point all scripts should be ported to
Python 3.4.0
Change-Id: Iba19bd7edc35ce1bd652bd328ded25888a2ab714
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398867322,1398869645,09f4fdeabff42b5e6c15ff9d2b7613410b4cbf9e
09f4fdeabff42b5e6c15ff9d2b7613410b4cbf9e,09f4fdea,"Merge ""Fixed crash on nonexistent pages.""","Merge ""Fixed crash on nonexistent pages.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398866357,1398866357,"8cc4f9befe90afb9360d730a176a19e604e9d027,8ca4b271da5f6f2054247a5d7ceeb1cf38f194c7"
8cc4f9befe90afb9360d730a176a19e604e9d027,8cc4f9be,Add script to generate main page names for all wikis,"Add script to generate main page names for all wikis

Change-Id: I827e8c393d0df7ea845bd49c2fed06a940e24495
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398850519,1398853412,9ca1495f631648343a3491191485ffc0d60cf3ba
9ca1495f631648343a3491191485ffc0d60cf3ba,9ca1495f,Implement PageTitle#isSpecial + Tests,"Implement PageTitle#isSpecial + Tests

- Checks if a page is a special page or not
- Uses a static data store, which is a Java file that is
  generated by a scripts/make-templates.py
- This script gathers the special page aliases via API
  calls and generates Java code via Jinja templates
- The script is designed as a pipeline of functions. This
  lets us add more such generations in the future easily

Change-Id: Ifad790990b7c2d48fc319c511369ed0ca227c69d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398848014,1398853409,bd467ac12b84220893d4655b0b5820b55eae74c9
8ca4b271da5f6f2054247a5d7ceeb1cf38f194c7,8ca4b271,Fixed crash on nonexistent pages.,"Fixed crash on nonexistent pages.

Also disables ToC for nonexistent pages (and on network error)
Also seems to fix the grey bar appearing when tapping during error or
loading.

Bug: 62639
Change-Id: Id357b37134bd288f02ae1f53c38ab7a84b2979b5
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1398722614,1398822116,5016df72fd0472ce19d3a0b173ada2b45d10e85a
bd467ac12b84220893d4655b0b5820b55eae74c9,bd467ac1,Remove second copy of abusefilter.css & preview.css,"Remove second copy of abusefilter.css & preview.css

These are copied over to assets/ by grunt

Change-Id: I178e9461d112e89997c57b0021327d5798fb4b8f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398801424,1398801424,1f1920548163ddfa9c3ab78d5b83f99cdee6952c
1f1920548163ddfa9c3ab78d5b83f99cdee6952c,1f192054,Change page title to #333,"Change page title to #333

A designer told me to!

Change-Id: I822c1da5bd17270c41daaf673b91eebfafc583b6
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398801346,1398801346,fe61118dca65380c617c527abfb1a02e5c8a0ad3
fe61118dca65380c617c527abfb1a02e5c8a0ad3,fe61118d,Bump version number for 2.0-alpha-2014-04-29,"Bump version number for 2.0-alpha-2014-04-29

Change-Id: I0562073a858ac7bde4ca9543598ab82b7bf1c879
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398799923,1398799923,19adf2d25a3ad7527bb9229680b1e08e37878574
19adf2d25a3ad7527bb9229680b1e08e37878574,19adf2d2,"Disabling the ""delete"" button when History or Saved Pages is empty.","Disabling the ""delete"" button when History or Saved Pages is empty.

Change-Id: Ifc17e7f942b0bbc4b50b2af713b94055e4ca380e
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1398726928,1398787985,21acc5e19f10ab10468374d366479c150a1e4374
21acc5e19f10ab10468374d366479c150a1e4374,21acc5e1,Mark non-cancelable dialogs as non-cancelable,"Mark non-cancelable dialogs as non-cancelable

Bug: 64469
Change-Id: I8b7db62454319f8790046bac4c024997d5daa61b
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398520086,1398520119,5016df72fd0472ce19d3a0b173ada2b45d10e85a
5016df72fd0472ce19d3a0b173ada2b45d10e85a,5016df72,"Merge ""Fixed hidden ""Log out"" option in the navbar.""","Merge ""Fixed hidden ""Log out"" option in the navbar.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398518868,1398518868,"9c854e6f4a98d0eb656766925149aa81ec016c1f,2807930890091252b947747190ecfdd04a3c7f4c"
9c854e6f4a98d0eb656766925149aa81ec016c1f,9c854e6f,"Merge ""No longer showing OK/Cancel buttons when selecting language.""","Merge ""No longer showing OK/Cancel buttons when selecting language.""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398518829,1398518829,"7320c52094ceeb717f6671f166f9e4850e06c81d,0e752119b07817fe99d55dc7da1bf744c692e97d"
2807930890091252b947747190ecfdd04a3c7f4c,28079308,"Fixed hidden ""Log out"" option in the navbar.","Fixed hidden ""Log out"" option in the navbar.

Also fixes annoying intermittent scrollbar.

Change-Id: Ia216498876915343275cdab8bc84fe898e66cfa1
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1398488440,1398504086,0e752119b07817fe99d55dc7da1bf744c692e97d
0e752119b07817fe99d55dc7da1bf744c692e97d,0e752119,No longer showing OK/Cancel buttons when selecting language.,"No longer showing OK/Cancel buttons when selecting language.

Bug: 64422
Change-Id: Ic1b4d10329212d43262be555a4a739ebcfff992a
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1398459089,1398486782,48bbde6c41a534bd2bc832ce1d2e670d759505a1
7320c52094ceeb717f6671f166f9e4850e06c81d,7320c520,Fix broken test for LoginTask,"Fix broken test for LoginTask

Still broken, but at least it ocmpiles

Change-Id: Ia9219766335afbee54a3cccae90633bfbb48f2a3
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398461454,1398461955,ae7eb4fc0c2a0a81fea7cfa657c471b0b3e0a065
ae7eb4fc0c2a0a81fea7cfa657c471b0b3e0a065,ae7eb4fc,Hide My Contributions list for MVP,"Hide My Contributions list for MVP

- Is not complete, not on product roadmap
- Needs diff view to be useful
- Needs network resilence
- Should also have a way to view page history

Leaving the code in to prevent us from being in rebase hell
later on.

Change-Id: I17df264249098c3f6c185009c5ece99acdb3285f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398458144,1398461100,dcf23a216108829c16083b821ea16cad94d72663
dcf23a216108829c16083b821ea16cad94d72663,dcf23a21,Fix crash when links are clicked in preview pane,"Fix crash when links are clicked in preview pane

Bug: 64418
Change-Id: If7201bd3cfb458c788b9ce907a0325bc83125a51
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398457997,1398457997,e5ce56f34119522a05f7cf2e011752f9d374138b
e5ce56f34119522a05f7cf2e011752f9d374138b,e5ce56f3,Use user's normalized name everywhere,"Use user's normalized name everywhere

Bug: 64412
Change-Id: Ifbe3526c1b1d141f3d1f6c56ba285c191a587ff9
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398455902,1398455991,48bbde6c41a534bd2bc832ce1d2e670d759505a1
48bbde6c41a534bd2bc832ce1d2e670d759505a1,48bbde6c,Proper Back button functionality when no article is loaded.,"Proper Back button functionality when no article is loaded.

Change-Id: Ib2c67de5311b08633148923b098cd748a3761c4f
",,,,dbrant,dbrant@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1398394210,1398452617,76faab00f468c6021e7265701fe1292c4cd87c17
76faab00f468c6021e7265701fe1292c4cd87c17,76faab00,Navigation pull-out menu no longer occludes Search bar.,"Navigation pull-out menu no longer occludes Search bar.

Bug: 63812
Change-Id: I29fd1a730370967d66c69e281ae49d16818a52cf
",,,,dbrant,dbrant@wikimedia.org,Brion VIBBER,brion@wikimedia.org,1398388417,1398452211,cb10a43bc31b0d8dc9d21654a8ebe56f323f49b8
cb10a43bc31b0d8dc9d21654a8ebe56f323f49b8,cb10a43b,"Merge ""Add another missing file""","Merge ""Add another missing file""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398442338,1398442338,"295849ca1112237fe12f0084591b456340d79edf,c5b1f38a72d16756ebaa125608128666efd9a457"
295849ca1112237fe12f0084591b456340d79edf,295849ca,"Merge ""Add missing CreateAccountSuccessResult""","Merge ""Add missing CreateAccountSuccessResult""",,,,Dbrant,dbrant@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398442321,1398442321,"36e2fa03fc8a18df9a0a96cb755b2dd3064dafe3,98417b562d69f5eaa124b4181bbba02e49f17757"
c5b1f38a72d16756ebaa125608128666efd9a457,c5b1f38a,Add another missing file,"Add another missing file

Change-Id: Ie3e1cf5095164defba742b0d01a647d85449ba42
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398436335,1398436335,98417b562d69f5eaa124b4181bbba02e49f17757
98417b562d69f5eaa124b4181bbba02e49f17757,98417b56,Add missing CreateAccountSuccessResult,"Add missing CreateAccountSuccessResult

Change-Id: Icb3cf4d5ef657c12134f30f93c70efcb830e1516
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398435865,1398435865,b502dbae9df032e1f208ce9a0bfa25e47b2f55e1
36e2fa03fc8a18df9a0a96cb755b2dd3064dafe3,36e2fa03,Remove spurious whitespace in the spamblacklist string,"Remove spurious whitespace in the spamblacklist string

Change-Id: Iafff51e59909313ad44311dcd04b521810b7a637
",,,,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,1398428285,1398428332,b502dbae9df032e1f208ce9a0bfa25e47b2f55e1
b502dbae9df032e1f208ce9a0bfa25e47b2f55e1,b502dbae,Use username returned from create account API call,"Use username returned from create account API call

This ensures that we locally store and use the canonical username.

Bug: 64409
Change-Id: Id7774cb8f7b2941dfa73860d9ec7c14f18406947
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398383754,1398383754,d0a43b79830ad2b90a80e97bf30f61dd46aaa8f7
d0a43b79830ad2b90a80e97bf30f61dd46aaa8f7,d0a43b79,Minor style fixes for filter edittext in language prefs,"Minor style fixes for filter edittext in language prefs

Change-Id: I16d16113040616412882038992cb5a354de99372
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398381208,1398381208,1c2b3e75642223f9aa6af1dae5611db995c143cd
1c2b3e75642223f9aa6af1dae5611db995c143cd,1c2b3e75,Don't store user info if it was not a successful login,"Don't store user info if it was not a successful login

Bug: 64407
Change-Id: I075213dd6d5396052a29947715142406862578a8
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398380833,1398380833,3a115be720e624367b571fec5bb7080ee1f04db4
3a115be720e624367b571fec5bb7080ee1f04db4,3a115be7,Handle spamblacklist responses appropriately,"Handle spamblacklist responses appropriately

Bug: 64404
Change-Id: I6a99ec4736351f9e25fb455e68c41e8b52c3c994
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398380345,1398380345,ce2c1e838d2d7fffab5b71948b9917bbed5ba5d2
ce2c1e838d2d7fffab5b71948b9917bbed5ba5d2,ce2c1e83,Fix language links filter styling,"Fix language links filter styling

Bug: 64342
Change-Id: I39d3d8dc980977b161f2b0999c92408fbe90b144
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398379177,1398379177,e72070eade8d04dc59c5a4108cf1c6eb6421c3a4
e72070eade8d04dc59c5a4108cf1c6eb6421c3a4,e72070ea,Don't enable 'save' button until wikitext is loaded,"Don't enable 'save' button until wikitext is loaded

Bug: 64401
Change-Id: Ic39e9a0d4ddeb5ee06693e792275835d120d959a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398378778,1398378778,705d95093ee460f74a814a540583ca7a2d5bfff5
705d95093ee460f74a814a540583ca7a2d5bfff5,705d9509,Bump version for release 2.0-alpha-2014-04-24,"Bump version for release 2.0-alpha-2014-04-24

Change-Id: Iabc38764fcdb7b54aabfcf5d5b4e794fea0d3629
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398373161,1398373161,326f530ee5df299a8a0e58e8002f7898ced64181
326f530ee5df299a8a0e58e8002f7898ced64181,326f530e,Amend crash report dialog text to be less cute,"Amend crash report dialog text to be less cute

Change-Id: I0630be624dce68a5cd8f9daf6c3d9000775974a7
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398325610,1398325610,e72c59f0a2d929c0878d5cef0cded47df2f04922
e72c59f0a2d929c0878d5cef0cded47df2f04922,e72c59f0,Fix crash when number of sections change between edits,"Fix crash when number of sections change between edits

Bug: 64282
Change-Id: I83af583a625aadaa9ca57062586fdf10c08231fe
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398320927,1398320927,6c0b028ffe2ebe1368ef6d9a96107113d32406fa
6c0b028ffe2ebe1368ef6d9a96107113d32406fa,6c0b028f,Make Crash reporter use Holo theme,"Make Crash reporter use Holo theme

Still looks terrible, but way less terrible than before.

Change-Id: I795ff25399c3565acde9efa2e204ec0eb2eac43e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398291462,1398291462,a485a05aa99117d899a1c0dfbc346fa5f76ef246
a485a05aa99117d899a1c0dfbc346fa5f76ef246,a485a05a,Update icon to latest version,"Update icon to latest version

This one has shadows.

Change-Id: I908b65b0a15f14a5c7590fa325d0ca3da0e84186
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398290930,1398290930,fdd0eb87e8f4524b771a33d9164acee4a50be321
fdd0eb87e8f4524b771a33d9164acee4a50be321,fdd0eb87,Adds script that makes it easier to make a release,"Adds script that makes it easier to make a release

- Adds signing infrastructure to the POM file
- Adds scrpit that does all the release steps except upload

Change-Id: I5867ce2544de62c8baedc7862b53fba57bda945a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398269859,1398270026,f6711598a086788a595772a98c1fd3ecf3ed80de
f6711598a086788a595772a98c1fd3ecf3ed80de,f6711598,Update launcher icon,"Update launcher icon

Change-Id: I9fc51bf61d1adb581f08631deec6615469073c46
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398248177,1398248223,dc3e22c5eb24afec977b5fd0d8784fb6bf5b4691
dc3e22c5eb24afec977b5fd0d8784fb6bf5b4691,dc3e22c5,Bump version for new alpha release,"Bump version for new alpha release

Change-Id: I06e787fcc230b20e26969f32010bc0e6ab81cc9b
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398205650,1398205650,14d92b1ceeecec85fed0438978ec67f2b5404009
14d92b1ceeecec85fed0438978ec67f2b5404009,14d92b1c,Provide appropriate padding for login benefits message,"Provide appropriate padding for login benefits message

Change-Id: Ifb4c073fea4e5f4a6fb721bcf2d0c7cfd34272db
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398205381,1398205522,fa55f97c6151c42506789411833c4c75ea0d25bc
fa55f97c6151c42506789411833c4c75ea0d25bc,fa55f97c,Make convert-icons.py script Python 3.0 compatible,"Make convert-icons.py script Python 3.0 compatible

Change-Id: If2b1a15d7dbba4c1b9d08667d1f7cb228ec86ac9
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398205106,1398205522,c3cf5869b84970be66bdeb670392cd7fdb12e02f
c3cf5869b84970be66bdeb670392cd7fdb12e02f,c3cf5869,Add new app icon,"Add new app icon

Bug: 61259
Change-Id: Ie438b5f623078dfa1cff2bf350975ffa769c35dc
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398203787,1398205517,19b709cdd367882e3221ef5858d1fdb7089f82b4
19b709cdd367882e3221ef5858d1fdb7089f82b4,19b709cd,Update remote config URL to stable production version,"Update remote config URL to stable production version

Change-Id: I2c7e3cc5de433404ed7137527908c69b4096ad6d
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1398106115,1398203962,38fe1fe2fddcaf83013993db8fc496c96198a688
38fe1fe2fddcaf83013993db8fc496c96198a688,38fe1fe2,Allow people to opt out of EventLogging,"Allow people to opt out of EventLogging

Change-Id: I21249e70a03bb967873a540bade28c0f1f3366f4
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1398119897,1398198604,1cd536f95b58a99299230f7148ef0060d0665277
1cd536f95b58a99299230f7148ef0060d0665277,1cd536f9,Add EL for CreateAccount Funnel,"Add EL for CreateAccount Funnel

Change-Id: I08076372d9bdfd2bc2e456e859fb31be75e95f73
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1398119081,1398198586,232ba8550231574df9574f69b3a84729bc760d8f
232ba8550231574df9574f69b3a84729bc760d8f,232ba855,Remove white square next to 'log out' icon,"Remove white square next to 'log out' icon

Bug: 64078
Change-Id: I4e1e636ecbd66946de9ce336be0c998d6ca368ff
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1398106425,1398198545,2cef8afa99c923636a18c4aba1e174c961e6f5db
2cef8afa99c923636a18c4aba1e174c961e6f5db,2cef8afa,"Added ""gen-external-apklibs"" to .gitignore.","Added ""gen-external-apklibs"" to .gitignore.

Change-Id: Ib5bdf1587510ec93a519362942ee25b6cb04ed60
",,,,dbrant,dbrant@wikimedia.org,dbrant,dbrant@wikimedia.org,1398189486,1398190241,4d2b5004b52c756a328936fb0a3199123327236d
4d2b5004b52c756a328936fb0a3199123327236d,4d2b5004,"Merge ""Switch to prod URL for remote config""","Merge ""Switch to prod URL for remote config""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398106395,1398106395,"25219b928435db2ecd5b6ec475fc1a47bb896104,3e57d7982d80bd821bc17211d41f8b0949044820"
3e57d7982d80bd821bc17211d41f8b0949044820,3e57d798,Switch to prod URL for remote config,"Switch to prod URL for remote config

Change-Id: Ide81f96bfd1e70a253a30ad0ac4defe5aab3b15e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398105772,1398105772,7d1a5a1f35dec4e634c584384aef97282c49d2f3
25219b928435db2ecd5b6ec475fc1a47bb896104,25219b92,"Merge ""Make log out log out user only from this device""","Merge ""Make log out log out user only from this device""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398105631,1398105631,"2ee8671b309f7794e677e2407926c7d3842971d8,7d1a5a1f35dec4e634c584384aef97282c49d2f3"
2ee8671b309f7794e677e2407926c7d3842971d8,2ee8671b,"Merge ""Add EL for login funnel""","Merge ""Add EL for login funnel""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398105427,1398105427,"578929db85c84e09b80eedcf55b28bd56ef48984,cd2f2bc74650b5dd7ab5fbd1a04f6711e987669b"
578929db85c84e09b80eedcf55b28bd56ef48984,578929db,"Merge ""Add event logging for reading actions""","Merge ""Add event logging for reading actions""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398105268,1398105268,"69b2f0bf824ef2be9c813f9e1a0c0904cba17d13,30b5090817f7a7a46e5335fa5f508d871b7e593c"
69b2f0bf824ef2be9c813f9e1a0c0904cba17d13,69b2f0bf,"Merge ""Add EventLogging for Edit Funnel""","Merge ""Add EventLogging for Edit Funnel""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398105118,1398105118,"72923ba81ff2eb0ae8fbe9cdca7db5c420236d34,f45617dbaf6575977b94fe37dc1cb4c422c1ba7f"
72923ba81ff2eb0ae8fbe9cdca7db5c420236d34,72923ba8,"Merge ""Don't ask to log in more than once""","Merge ""Don't ask to log in more than once""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398104825,1398104825,"00e0b187bcc06c292d7226af252ef769a03c2d02,546dbce47c90a34023988ec4e35a59ff2599a54b"
00e0b187bcc06c292d7226af252ef769a03c2d02,00e0b187,"Merge ""Make sure that captcha is not hidden by preview window""","Merge ""Make sure that captcha is not hidden by preview window""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1398104727,1398104727,"dd3dafb49c67167dbd821f0209ac017e7d286c31,23edee5b55f906f81229180814130215d76cfede"
7d1a5a1f35dec4e634c584384aef97282c49d2f3,7d1a5a1f,Make log out log out user only from this device,"Make log out log out user only from this device

API calls to action=logout logs you out from *all* your sessions,
including ones on Desktop. This is rather painful. Now it just
clears the local cookies and tokens, and hence logs the user out
only on this particular device.

Bug: 64177

Change-Id: I7ac07e4d7aaac1e5a10d44667e0c6064c08e0847
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398099585,1398102315,cd2f2bc74650b5dd7ab5fbd1a04f6711e987669b
cd2f2bc74650b5dd7ab5fbd1a04f6711e987669b,cd2f2bc7,Add EL for login funnel,"Add EL for login funnel

Change-Id: I9b1978e16fc91e17d84354b1017e7c8cc3bef968
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398072690,1398072720,30b5090817f7a7a46e5335fa5f508d871b7e593c
dd3dafb49c67167dbd821f0209ac017e7d286c31,dd3dafb4,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Ib3935ec5898551e1bd013e8c3053d900306e58b4
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1398072428,1398072428,0d6dd30b71616807b7357e019c4473eb16a2b413
30b5090817f7a7a46e5335fa5f508d871b7e593c,30b50908,Add event logging for reading actions,"Add event logging for reading actions

Change-Id: Ie1c322fb2c32001807f4a538e094aaa774cc571d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1398067731,1398067731,f45617dbaf6575977b94fe37dc1cb4c422c1ba7f
f45617dbaf6575977b94fe37dc1cb4c422c1ba7f,f45617db,Add EventLogging for Edit Funnel,"Add EventLogging for Edit Funnel

- Fix EL to actually work
- Send UA properly

Change-Id: I6225c3df43f739b38f145669b4ae7146735a6383
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397681814,1398067705,546dbce47c90a34023988ec4e35a59ff2599a54b
546dbce47c90a34023988ec4e35a59ff2599a54b,546dbce4,Don't ask to log in more than once,"Don't ask to log in more than once

Is annoying.

Change-Id: Ic3989cf79ac7daea84ee8f1a47737dd2d3ba4ecf
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397889579,1397890001,23edee5b55f906f81229180814130215d76cfede
23edee5b55f906f81229180814130215d76cfede,23edee5b,Make sure that captcha is not hidden by preview window,"Make sure that captcha is not hidden by preview window

Change-Id: I393b157548165a944e11ccebcbe9fcdc946888d6
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397889070,1397890001,0d6dd30b71616807b7357e019c4473eb16a2b413
0d6dd30b71616807b7357e019c4473eb16a2b413,0d6dd30b,Fix crashes when only one section is in a page,"Fix crashes when only one section is in a page

Change-Id: I39061dd77862799cf1c16ca09b8235b2510e29dd
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397759771,1397759862,05a5572d904db5470a6f70df916e0d4c8b3989bc
05a5572d904db5470a6f70df916e0d4c8b3989bc,05a5572d,"Merge ""Fix UA to provide phone/tablet info""","Merge ""Fix UA to provide phone/tablet info""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1397670813,1397670813,"49037174115d9548faa6690fbdeb5ce6907aa45c,f138d29f981084572eb28ade8b8341275d55efda"
49037174115d9548faa6690fbdeb5ce6907aa45c,49037174,"Merge ""Fix broken tests for Page properties""","Merge ""Fix broken tests for Page properties""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1397670639,1397670639,"c245ca8054ef6b9c02ed22e18ca0f59eb55c68c3,724dc69347c9489ba0c9c73c626458f8ab516772"
c245ca8054ef6b9c02ed22e18ca0f59eb55c68c3,c245ca80,"Merge ""Make magic numbers unmagical""","Merge ""Make magic numbers unmagical""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1397670534,1397670534,"aa4d3d7dcb63ac8511c81c793ce0d7b71782962e,c6588a9b7ee667a6eae010221c8fb0d37c4d88cf"
aa4d3d7dcb63ac8511c81c793ce0d7b71782962e,aa4d3d7d,"Merge ""Fix FieldHidden warnings & turn off warnings for params""","Merge ""Fix FieldHidden warnings & turn off warnings for params""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1397669658,1397669658,"ca085ee3246588045454ffdb9f398db953002214,053389b125c37e0a017767f2bf7a4ea657a66b01"
f138d29f981084572eb28ade8b8341275d55efda,f138d29f,Fix UA to provide phone/tablet info,"Fix UA to provide phone/tablet info

Also change OS name to let UAParser parse it.

Change-Id: I3ac919861270a08abc9cd995ddc4790886ca41a6
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397655642,1397666802,724dc69347c9489ba0c9c73c626458f8ab516772
724dc69347c9489ba0c9c73c626458f8ab516772,724dc693,Fix broken tests for Page properties,"Fix broken tests for Page properties

Change-Id: I2ac7f3e3c6912cbf4e89f90289755a473b09bf44
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397653218,1397653218,c6588a9b7ee667a6eae010221c8fb0d37c4d88cf
c6588a9b7ee667a6eae010221c8fb0d37c4d88cf,c6588a9b,Make magic numbers unmagical,"Make magic numbers unmagical

Still some left. Need more careful handling.

Bug: 63742
Change-Id: I8f31ddcc4248f1f938fc1bd1c4c048ca5532de08
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397653182,1397653182,053389b125c37e0a017767f2bf7a4ea657a66b01
ca085ee3246588045454ffdb9f398db953002214,ca085ee3,Bump alpha to v37 2.0-alpha-2014-04-15.,"Bump alpha to v37 2.0-alpha-2014-04-15.

Change-Id: If1ec5a6b5114c54310044c1cb2b403cc242a90bd
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1397608028,1397608028,64511d7e8ac7451dbec9fa8e5fdb58e056751466
053389b125c37e0a017767f2bf7a4ea657a66b01,053389b1,Fix FieldHidden warnings & turn off warnings for params,"Fix FieldHidden warnings & turn off warnings for params

Bug: 63742
Change-Id: I7933dfceb5d3b46bb7b010d3fd9507b708bfc15a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397602561,1397602761,64511d7e8ac7451dbec9fa8e5fdb58e056751466
64511d7e8ac7451dbec9fa8e5fdb58e056751466,64511d7e,Kill 'scratch' directory,"Kill 'scratch' directory

It had one svg which is also now in icon-svgs

Change-Id: I85b5de849159aa9f310e773e049b1a9cd8bb18fc
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397600719,1397602756,7241b88bd050708398eb218de902df65dbf754e7
7241b88bd050708398eb218de902df65dbf754e7,7241b88b,Add partial support for DISPLAYTITLE,"Add partial support for DISPLAYTITLE

Displays properly in the page view's header, but not really
counted for anywhere else.

Change-Id: If3ec0600920f536ce96fe8d2034ef488ad44ce94
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397600260,1397600782,8e6bad4d191403b6d5cda05112fabfc577ca6744
8e6bad4d191403b6d5cda05112fabfc577ca6744,8e6bad4d,Fix 'undefined' showing up in section titles,"Fix 'undefined' showing up in section titles

Question of wether to show edit pencil or not in these cases
is left as an exercise for the reader.

Bug: 63963
Change-Id: If0de59f822ec92bb2db27280828f1eac721bb4fc
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397598731,1397598731,d86b94a796626070cf13b25215470a4c5f03ee61
d86b94a796626070cf13b25215470a4c5f03ee61,d86b94a7,Make sure that the search progress bar does not overlap text,"Make sure that the search progress bar does not overlap text

Change-Id: Idc5ee6c85922f0921478a5378af5d98ae0571453
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397597662,1397597662,0fa9946f9e06a872bed8e2ce878c68e4d20c2956
0fa9946f9e06a872bed8e2ce878c68e4d20c2956,0fa9946f,Refine Magic Number detection to ignore common numbers,"Refine Magic Number detection to ignore common numbers

Bug: 63742
Change-Id: I17785c61327da64a28725cc5d4a843b1e4c9caab
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397597398,1397597398,8db2b06f888845bd796c0ed2950a887d72f2beea
8db2b06f888845bd796c0ed2950a887d72f2beea,8db2b06f,Mark some uninheritable classes as final,"Mark some uninheritable classes as final

Bug: 63742
Change-Id: I467f04b9a08386fff8e5522ccc4e7ee62f32c4c8
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397594978,1397594978,219c49f9f03b5c7a3581b6323c9c4683671a8c0f
219c49f9f03b5c7a3581b6323c9c4683671a8c0f,219c49f9,Don't count blocks as empty if they have comments in them,"Don't count blocks as empty if they have comments in them

Bug: 63742
Change-Id: I62b303a3104101c9c80d95e1101ea22b4b0d2f95
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397594676,1397594676,8c2b2edc728e2f2277db657799f178d89a4ed96f
8c2b2edc728e2f2277db657799f178d89a4ed96f,8c2b2edc,Ignore setter and constructors for HiddenFieldCheck,"Ignore setter and constructors for HiddenFieldCheck

Was generating a lot of noise.

Bug: 63742
Change-Id: Ibcaf4b6935a37f18056ab49182c5cd66e708a487
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397593702,1397593815,4b73f01d23f04699510855420a39281c06a96ac6
4b73f01d23f04699510855420a39281c06a96ac6,4b73f01d,Fix account creation tests so they still run,"Fix account creation tests so they still run

Change-Id: Ie3b7d2672971e33e9ac857a28aaac06301169180
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397593369,1397593815,bcb96030d82656f3a0253a300d5483f1bd0c5967
bcb96030d82656f3a0253a300d5483f1bd0c5967,bcb96030,Make sure all switches have a default case,"Make sure all switches have a default case

Bug: 63742
Change-Id: Ic98b13055222d54c3e988688483c8d55acfc0067
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397593317,1397593815,2c82db209dee5e00c7d2ea98df445511cc5f4d9a
2c82db209dee5e00c7d2ea98df445511cc5f4d9a,2c82db20,Fix ordering of class definition modifier,"Fix ordering of class definition modifier

Bug: 63742
Change-Id: I1a4cad03a3007633cc2dca516ee3a4044216e4d2
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397592983,1397592983,8e239e090587004c07147e55e8881673467f1853
8e239e090587004c07147e55e8881673467f1853,8e239e09,Add spaces where required to match checkstyle.,"Add spaces where required to match checkstyle.

Nowhere as spaced out as mediawiki is, maaan.

Bug: 63742
Change-Id: I84077454d90b208057f5181d45f08e01093b4539
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397592878,1397592878,3de80616e826210ce751761b7a882837fdbb6f63
3de80616e826210ce751761b7a882837fdbb6f63,3de80616,Fix checkstyle.xml to work on older checkstyles,"Fix checkstyle.xml to work on older checkstyles

Doesn't seem to have the newer token classifications.

Bug: 63742
Change-Id: Ib186e40b83fe6e88754b4f16f20a6e579d6ce21b
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397592475,1397592475,776d7df84500d25164756a60ba3e8b3d5eb898c7
776d7df84500d25164756a60ba3e8b3d5eb898c7,776d7df8,Do not enforce spacing around curly braces,"Do not enforce spacing around curly braces

Was causing way too many false positives.

Bug: 63742
Change-Id: I9274fbce9cfa6850a7278d8e69270fe218b65ab3
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397591793,1397592228,02275fff171a7ccdd57e02f8d5cc8cf8d7a17bc4
02275fff171a7ccdd57e02f8d5cc8cf8d7a17bc4,02275fff,Moved search handler to its own class,"Moved search handler to its own class

Change-Id: I4be491bcf6ad7a6161e5e767f4022737939aa1c5
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397589402,1397589402,228a2c545c7a3288e38321f6b9aef8254a329f3e
228a2c545c7a3288e38321f6b9aef8254a329f3e,228a2c54,Fix crash when loading unreachable image,"Fix crash when loading unreachable image

Also fixes crashes that happen when using Saved Pages with
images that are not in the WebView cache

Bug: 63890
Change-Id: Ia1b0f534b0c07c0fd584db31c4354d67ed703576
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397568054,1397589392,f64de75145b002710d84a7f6b816187bf010d30a
f64de75145b002710d84a7f6b816187bf010d30a,f64de751,Fix Account Creation not working,"Fix Account Creation not working

Change-Id: I8a9bbf3e63086fb016121552b57e1210ac6d821c
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397566410,1397566436,3544bf80f351da4deb2a792d58afe0bb5918295d
3544bf80f351da4deb2a792d58afe0bb5918295d,3544bf80,Fix keyboard not hiding when it should,"Fix keyboard not hiding when it should

Bug: 63493
Change-Id: I8e9c59bc4d37092a4035c661e559700e64e48d82
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397564832,1397564832,ea81a747ec3621a719357553781725a3bca97323
ea81a747ec3621a719357553781725a3bca97323,ea81a747,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I1105c69eca6cf6b54e3160ef8e4cc1569292b698
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1397483523,1397483523,a2facf1ff8982a1355145443d2fd69c46359655c
a2facf1ff8982a1355145443d2fd69c46359655c,a2facf1f,Bump version for alpha.,"Bump version for alpha.

Change-Id: I2b36d233d76010a39a5813bd484434bb665e076f
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1397253594,1397253594,2312dff436fbbb25a11a3eb822cba26d13c88076
2312dff436fbbb25a11a3eb822cba26d13c88076,2312dff4,"Merge ""Support hiding edit button for anon users""","Merge ""Support hiding edit button for anon users""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1397236260,1397236260,"0e252fbf1ef917b7c9f22723090a65383633d510,b1c443e3ca739c2a4729684d651253c71867e089"
0e252fbf1ef917b7c9f22723090a65383633d510,0e252fbf,"Merge ""Add ability to read config parameters from a URL""","Merge ""Add ability to read config parameters from a URL""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1397235974,1397235974,"523bd9fae8dadbfafc9e4a00eb931eab3076685e,9d8d723e12b0f207aabddff163d505f0b81c20ae"
b1c443e3ca739c2a4729684d651253c71867e089,b1c443e3,Support hiding edit button for anon users,"Support hiding edit button for anon users

Based on remoteConfig - if it is tweaked to be 'true' then
anon users won't be getting edit buttons in a day or so.

Change-Id: I956d77190035742528e432cca14483cf0995aa1a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397165895,1397165895,9d8d723e12b0f207aabddff163d505f0b81c20ae
9d8d723e12b0f207aabddff163d505f0b81c20ae,9d8d723e,Add ability to read config parameters from a URL,"Add ability to read config parameters from a URL

- Is refreshed once a day
- Exposed as a JSON Object
- Stored in SharedPreferences

Change-Id: I4fd355fe35b1ad6a0a2146e3811657043a0d0651
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397163247,1397163663,a1943c7e8e0e4f6faf58553ee1bf71dac58bf5d9
523bd9fae8dadbfafc9e4a00eb931eab3076685e,523bd9fa,[Gingerbread] Disable crashy AutoCompleteTextView in edit summary,"[Gingerbread] Disable crashy AutoCompleteTextView in edit summary

Leaving it on for ICS and later, just disabling the autocomplete
on Gingerbread by not setting the adapter.

For some reason the autocomplete popup view crashes on
Gingerbread. This seems to be related to styles but I
can't quite figure out why.

This call in AutoCompleteTextView.buildDropDown ends up failing:

            mDropDownList.setSelector(mDropDownListHighlight);

because mDropDownListHighlight seems to be null instead
of an expected drawable, and that ends up failing when used.

But the styles *look* ok, and I don't see any missing drawables
related to that style...

Change-Id: I96dfdb3b63adca6ccc4bf043d03c8224905fbf23
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1397158707,1397158707,a1943c7e8e0e4f6faf58553ee1bf71dac58bf5d9
a1943c7e8e0e4f6faf58553ee1bf71dac58bf5d9,a1943c7e,Allow inline conditionals.,"Allow inline conditionals.

They can be abused, but they aren't always

Bug: 63742
Change-Id: I221a9b3d149cc7401e02bce9b93597eae935639e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397123909,1397123909,b90dc3aa50326f0731a39402d1ccb7b9e0a34fd6
b90dc3aa50326f0731a39402d1ccb7b9e0a34fd6,b90dc3aa,Fix wider-than-necessary visibility,"Fix wider-than-necessary visibility

Bug: 63742
Change-Id: Ifb999d20b9330180c11ff0100cef29d61e5a9071
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397123546,1397123546,d3c3599d5929a015b0fa7f68c50ef58e001fd565
d3c3599d5929a015b0fa7f68c50ef58e001fd565,d3c3599d,Remove redundant 'final' qualifiers,"Remove redundant 'final' qualifiers

Bug: 63742
Change-Id: I9e06fa4a8421bdc0134e17fec7753244d9871be8
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397123278,1397123497,33029ada2509ed05f89c9a1d3839b48d957d638e
33029ada2509ed05f89c9a1d3839b48d957d638e,33029ada,Neuter stray whitespace before semicolon,"Neuter stray whitespace before semicolon

Bug: 63742
Change-Id: I89bba4b2b581ec357e33a437f11042220a6b0027
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397123157,1397123220,57c290f90d567c774caa2e7f681c455425ae595e
57c290f90d567c774caa2e7f681c455425ae595e,57c290f9,Fix static variable names,"Fix static variable names

- Add some missing final qualifiers
- Removed some unused variables

Bug: 63742
Change-Id: Ib4a1ef997817026f0c2a8cb79dc5e391e210fa08
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1397123063,1397123112,487ec496c02da7b7fb89e6248006fee842012b5f
487ec496c02da7b7fb89e6248006fee842012b5f,487ec496,Fix checkstyle.xml to allow underscores in static var names,"Fix checkstyle.xml to allow underscores in static var names

Bug: 63742
Change-Id: I24d2a3a6ca251a3c5fe9582200ca139b045400cf
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1397122847,1397123050,0a4314e77c7cca962f6b546184633440785b8db2
0a4314e77c7cca962f6b546184633440785b8db2,0a4314e7,Check that static variables are always all caps,"Check that static variables are always all caps

Even if they are not final.

Bug: 63742
Change-Id: I85ebe383002c648786c990623ab11ceb9b3e0abf
",,,,YuviPanda,yuvipanda@gmail.com,Addshore,addshorewiki@gmail.com,1397075039,1397121408,d55141a6b9d475bba4124cbd5b5246786be41f4a
d55141a6b9d475bba4124cbd5b5246786be41f4a,d55141a6,Remove stray spaces inside parentheses,"Remove stray spaces inside parentheses

Bug: 63742
Change-Id: Ibf9111c40fcd6cd80fd05834d64a935f43478272
",,,,YuviPanda,yuvipanda@gmail.com,Addshore,addshorewiki@gmail.com,1397074725,1397121392,ab34cc955752d2dcee8229b33f7291f45fe5f123
ab34cc955752d2dcee8229b33f7291f45fe5f123,ab34cc95,Ensure that all constants are named ALL_UPPERCASE,"Ensure that all constants are named ALL_UPPERCASE

Bug: 63742
Change-Id: Ic11e20df768f114069cfc18a0bddcd27e11b7458
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397074636,1397120192,c81b684ad0c9af6cfef8b9e696fb2b992014a5ab
c81b684ad0c9af6cfef8b9e696fb2b992014a5ab,c81b684a,Remove redundant public and static modifiers,"Remove redundant public and static modifiers

- All interfaces defined as part of a class are static
- All methods definied as part of an interface are public

Bug: 63742
Change-Id: Ib6858b199594313f9f002684a8735f151f31c226
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397073491,1397120192,1c55ee4a7f614bcd8b5bab512170a06840ceec31
1c55ee4a7f614bcd8b5bab512170a06840ceec31,1c55ee4a,Remove space inside array initializers,"Remove space inside array initializers

We don't do that for multi element arrays and so should
not do that for single element ones either

Bug: 63742
Change-Id: Ibf7f849f19b33b8d364f983c65fa5e82e95dbd43
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397073217,1397120192,25b2a9dfccb49a23d7a8b6d37117d0c19109dab6
25b2a9dfccb49a23d7a8b6d37117d0c19109dab6,25b2a9df,Make sure that all member variables are camelCase,"Make sure that all member variables are camelCase

Bug: 63742
Change-Id: I0598ae6d0b3c132c4cc0d3cb720460088e9187ec
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397073027,1397120192,707b3dae3bfdb68409b10f7cec947e585cfcd29d
707b3dae3bfdb68409b10f7cec947e585cfcd29d,707b3dae,Ensure that Utils class can't be instantiated,"Ensure that Utils class can't be instantiated

Bug: 63742
Change-Id: I29c9205ee6e259e7497f5651f9ff928bbac7c700
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397072960,1397120192,62e8a5deb10fd8772418fc087b500dfce518b47e
62e8a5deb10fd8772418fc087b500dfce518b47e,62e8a5de,Properly format multiline boolean checks to be more consistent,"Properly format multiline boolean checks to be more consistent

Also contains drive-by imports formatting

Bug: 63742
Change-Id: I67932d5ecd8350f944a9933e1aa5eb5009699a19
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397072857,1397120191,8787fd443714a2d7f00d9324b38f2547574b3765
8787fd443714a2d7f00d9324b38f2547574b3765,8787fd44,Use Java style array declarations than C style,"Use Java style array declarations than C style

Also contains drive-by import optimization

Bug: 63742
Change-Id: I1bf04c7ddde6018f3a17c87c815cae085a77712f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397072507,1397120191,0328381d1c72c8a9677e844b878a24247787c27f
0328381d1c72c8a9677e844b878a24247787c27f,0328381d,Explicitly use braces everywhere,"Explicitly use braces everywhere

Bug: 63742
Change-Id: I64a62880458c6915d3171569752b1d9dcd90e57a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397072409,1397120191,1a0584d9d407af0bf23dcf09a6e42d9bb0b73af9
1a0584d9d407af0bf23dcf09a6e42d9bb0b73af9,1a0584d9,Organize imports & remove a redundant import,"Organize imports & remove a redundant import

Bug: 63742
Change-Id: Ib35817d3726790c533168e1656d28b3c0ab437d8
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397072271,1397120191,ea73b21ec2f2048315b8c70734b3be06dca47881
ea73b21ec2f2048315b8c70734b3be06dca47881,ea73b21e,Ensure that there is always a space after a comma,"Ensure that there is always a space after a comma

NEVER BEFORE!

Bug: 63742
Change-Id: I224495b7065bf36a237e905b592c8af7b69bb664
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397074836,1397120191,8046e74d2ef36452921b7d5502c69bb0df13521c
8046e74d2ef36452921b7d5502c69bb0df13521c,8046e74d,"Merge ""Fix ordering of visibility modifiers to match JLS""","Merge ""Fix ordering of visibility modifiers to match JLS""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1397089288,1397089288,"5a1db686338941395e95eb9c50ff4cd798b7037d,2418f4a3e17b02ffc63d64e3d2011378fcf33f94"
5a1db686338941395e95eb9c50ff4cd798b7037d,5a1db686,"Merge ""Remove sole tab character""","Merge ""Remove sole tab character""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1397089249,1397089249,"da53e3482aa69aeb61fa4aee18606679755a8387,00c87895f9571a433a6122ce95289b4be983a925"
2418f4a3e17b02ffc63d64e3d2011378fcf33f94,2418f4a3,Fix ordering of visibility modifiers to match JLS,"Fix ordering of visibility modifiers to match JLS

Bug: 63742
Change-Id: I83ff14f0d7fcdc1d28d83577fbd3b5ff20befe7a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397072113,1397072113,00c87895f9571a433a6122ce95289b4be983a925
00c87895f9571a433a6122ce95289b4be983a925,00c87895,Remove sole tab character,"Remove sole tab character

Tabs should die, die die in a fire.

Bug: 63742
Change-Id: I7d63d14e4dec24c3d37ef94eddaf353cd46982de
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1397071338,1397071479,a7f7f7840fb05ecfe21cfc54a3a52e150dc4baca
da53e3482aa69aeb61fa4aee18606679755a8387,da53e348,bump version number for alpha update,"bump version number for alpha update

Change-Id: I8bafd0fd177c1bdf249c864df6e031648ce177ac
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1397071460,1397071460,a7f7f7840fb05ecfe21cfc54a3a52e150dc4baca
a7f7f7840fb05ecfe21cfc54a3a52e150dc4baca,a7f7f784,"[Gingerbread] List layout for settings language selector is v11 again, have to duplicate it","[Gingerbread] List layout for settings language selector is v11 again, have to duplicate it

There's an odd bug on my Nexus 1 where the background shows black except when
scrolling. Don't know what's up with that yet.

Change-Id: Iee5cffc1e92cecc3dbab9f66d54bd36df2b15de9
",,,,Brion Vibber,brion@pobox.com,Brion VIBBER,brion@wikimedia.org,1396893165,1397070304,200ba2d926d4eb7002dbc14ffa4f5d3e4938e59b
200ba2d926d4eb7002dbc14ffa4f5d3e4938e59b,200ba2d9,[Gingerbread] Copy some theme attributes directly that aren't available on v10,"[Gingerbread] Copy some theme attributes directly that aren't available on v10

Change-Id: I9977c4c1ae30811d311a669665cc3ef225b1f17b
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1396295479,1397070258,ef0bc885dd22361ea3cc9a2269ca00a1e67a666c
ef0bc885dd22361ea3cc9a2269ca00a1e67a666c,ef0bc885,"Merge ""Turn Wikipedia Zero toasts to croutons.""","Merge ""Turn Wikipedia Zero toasts to croutons.""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1397069890,1397069890,"506196228704de02ce4a5984a20a8e9c933248c6,20a499bf48718ec8ea7a02014722a3829f5b6f0b"
506196228704de02ce4a5984a20a8e9c933248c6,50619622,"Merge ""[Gingerbread] Partial fixes for 'saved pages' view""","Merge ""[Gingerbread] Partial fixes for 'saved pages' view""",,,,jenkins-bot,jenkins-bot@gerrit.wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1397069573,1397069573,"e362708d936fa81c0de73fff44a9452bbadced11,b15a25ed39d37bff95ea16bcf8f88ee5cb1d1e1c"
20a499bf48718ec8ea7a02014722a3829f5b6f0b,20a499bf,Turn Wikipedia Zero toasts to croutons.,"Turn Wikipedia Zero toasts to croutons.

Change-Id: I459b8dd9bcbd3f0fbf1bbb498845061aa7422031
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1396560103,1397068859,e362708d936fa81c0de73fff44a9452bbadced11
e362708d936fa81c0de73fff44a9452bbadced11,e362708d,Added checkstyle.xml config for Java coding style,"Added checkstyle.xml config for Java coding style

- Living style guide, will be subject to changes
- Ignores files directly copied from elsehwere

Change-Id: Ib73723de7e68566164806a1d5999ab5cff843046
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1397037771,1397062771,83c0d5b159dba6d4083c40c37284bd4e3bbeec59
83c0d5b159dba6d4083c40c37284bd4e3bbeec59,83c0d5b1,Fix tox.ini to have appropriate config for flake8,"Fix tox.ini to have appropriate config for flake8

Ignore node_modules since they sometimes have python

Change-Id: Icc9dbcfc03cb61770115080fb77015ebaf243d36
",,,,YuviPanda,yuvipanda@gmail.com,Hashar,hashar@free.fr,1397031146,1397032360,e777f9cfb9d3461fc389b4fec25a76f36a0b0ed1
b15a25ed39d37bff95ea16bcf8f88ee5cb1d1e1c,b15a25ed,[Gingerbread] Partial fixes for 'saved pages' view,"[Gingerbread] Partial fixes for 'saved pages' view

* use support library to enable action mode
* use WebView.scrollTo instead of setScrollY (more important for when activity is killed/restarted than saved pages)

Needs next commit to actually load UI.

Change-Id: I6a68e56ea65b82e69a070d7f1d17ab63a7c323fa
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1396556534,1396993706,ef7470d283cbfe84c9d60b1b0024ddd17f6f39c7
e777f9cfb9d3461fc389b4fec25a76f36a0b0ed1,e777f9cf,Make python files almost PEP8 compliant,"Make python files almost PEP8 compliant

Except the 80 char line length limit. Boo to that!

Also add flake8 config file. Should setup jenkins job soon.

Change-Id: If49596b9d02c3c631c95f1f6c7cd7b8efca2d7f6
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1396992306,1396992813,71f5dc7b46e10e49f4088296f62f94d36bd2e9c6
71f5dc7b46e10e49f4088296f62f94d36bd2e9c6,71f5dc7b,Tag new alpha,"Tag new alpha

Change-Id: Iaf417a157c855bc8a97251a08fef85a37db8b295
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396991087,1396991087,69a4c909f3799ab5479efc3846120cff28e88293
69a4c909f3799ab5479efc3846120cff28e88293,69a4c909,Don't restart activities on rotation,"Don't restart activities on rotation

We should still be careful to make sure that activity restart
does not lose state. But this is faster and also gives users
a more uninterrupted experience, so we should do this.

We can turn on 'do not keep activities' in debug menu on
Android to test lifecycle handling.

Change-Id: Ice22413c97ad3244a693dc69abbbdad0a5d8b480
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396990506,1396990506,d5729c5fa75de3f91a4c06c8889a415c9109ac8c
d5729c5fa75de3f91a4c06c8889a415c9109ac8c,d5729c5f,Add proper flipped drawer indicator icon,"Add proper flipped drawer indicator icon

Change-Id: Ie5b68f5fe835021638e721eed92aa57e03b946db
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396989608,1396989608,ef7470d283cbfe84c9d60b1b0024ddd17f6f39c7
ef7470d283cbfe84c9d60b1b0024ddd17f6f39c7,ef7470d2,[Gingerbread] Get more things using the support version of the action bar accessors,"[Gingerbread] Get more things using the support version of the action bar accessors

Change-Id: Ib49be67baa446fe68b3e73a7220fce8b2a36d3f7
",,,,Brion Vibber,brion@pobox.com,Yuvipanda,yuvipanda@gmail.com,1396308095,1396984209,7f8ce84883bc6d341e537cdfd74aef74bfa547a5
7f8ce84883bc6d341e537cdfd74aef74bfa547a5,7f8ce848,[Gingerbread] Don't crash on setting zoom controls,"[Gingerbread] Don't crash on setting zoom controls

Disables pinch-to-zoom on the web view on 2.3

Change-Id: I93acca15e8a10338ac243e8151c1883b175efa0d
",,,,Brion Vibber,brion@pobox.com,Yuvipanda,yuvipanda@gmail.com,1396304618,1396983992,53178527c197cc72dcabef510d597a0386bfe552
53178527c197cc72dcabef510d597a0386bfe552,53178527,[Gingerbread] Partial animations fixes using NineOldAndroids,"[Gingerbread] Partial animations fixes using NineOldAndroids

Change-Id: Iba79bd370eb1f7af45fd21c01f1b6c1e100befea
",,,,Brion Vibber,brion@pobox.com,Yuvipanda,yuvipanda@gmail.com,1396304214,1396981098,5fa02d2b601107a80ddeaa05c373972bbfc1e43c
5fa02d2b601107a80ddeaa05c373972bbfc1e43c,5fa02d2b,[Gingerbread] Workaround for SaneAsyncTask: copy AsyncTask from KitKat,"[Gingerbread] Workaround for SaneAsyncTask: copy AsyncTask from KitKat

AsyncTask before Honeycomb didn't have the executeOnExecutor method
and always used its own thread pool. Luckily the new code works on
Gingerbread as-is, looks like. I hope.

Change-Id: I42231c7152b97a7676b7192e3c1b0ac8433b99d4
",,,,Brion Vibber,brion@pobox.com,Yuvipanda,yuvipanda@gmail.com,1396296888,1396980971,ffe76496440ff7ad5f6548f94ec844c87bc07c1e
ffe76496440ff7ad5f6548f94ec844c87bc07c1e,ffe76496,[Gingerbread] Work around lack of ColorDrawable.getColor,"[Gingerbread] Work around lack of ColorDrawable.getColor

Change-Id: I8a8364ab266d8bbbaf7cde50ad7e08e4d637b5a1
",,,,Brion Vibber,brion@pobox.com,Yuvipanda,yuvipanda@gmail.com,1396295989,1396980912,c4ddccfa294780d10c9ea7f4d229ecc5ee3b1d36
c4ddccfa294780d10c9ea7f4d229ecc5ee3b1d36,c4ddccfa,Add apk files to gitignore,"Add apk files to gitignore

Change-Id: I02003d48230cd452c7baab9d5efa01c8680e8d79
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396948906,1396976333,222323a2b77aa42259c32426429adc8bef553484
222323a2b77aa42259c32426429adc8bef553484,222323a2,Fix RTL issues with username display in drawer,"Fix RTL issues with username display in drawer

Change-Id: I07a866421f57dfa0c80d20ff57bf016772af721e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396942582,1396976333,6523f3c773771de2e9087e571480176c5a8d7681
6523f3c773771de2e9087e571480176c5a8d7681,6523f3c7,Fix margin for saved pages / history icons in RTL languages,"Fix margin for saved pages / history icons in RTL languages

Change-Id: Ida5f323123f75505db676b756c88ce8f84d8adb0
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396942107,1396976333,ca588bb1bb0612f0fa3c6a7cb65c46c72d58c075
ca588bb1bb0612f0fa3c6a7cb65c46c72d58c075,ca588bb1,Don't put page title in Share Text,"Don't put page title in Share Text

Bug: 63525
Change-Id: I3a8796600b5bfec9c0db50cd87d703d6dd971d97
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396892942,1396976333,3c5e20d2293da6be17ee32c134121316ec2c4e54
3c5e20d2293da6be17ee32c134121316ec2c4e54,3c5e20d2,Added jshintrc and fixed warning,"Added jshintrc and fixed warning

Change-Id: I8615914bc5cb292db2a1c7ffa6f22d87c303f158
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396948770,1396976333,5169d890ff2604d657dd1070a59b1b5dea4afbc9
5169d890ff2604d657dd1070a59b1b5dea4afbc9,5169d890,Make new alpha release,"Make new alpha release

Change-Id: I38dd22b02c899e0400a026c2a0169edcd4d6a58b
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396941094,1396941094,529fe4a2099f9ab5c6ef939c0d41c3feb3d0b7e3
529fe4a2099f9ab5c6ef939c0d41c3feb3d0b7e3,529fe4a2,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I3fe79a4de9e62c76ad450b0faed736225d44610d
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1396804329,1396804329,276da60628541a2dc6f389ca25440263257b6ba6
276da60628541a2dc6f389ca25440263257b6ba6,276da606,Add classList polyfill,"Add classList polyfill

Is unconditionally loaded for now, should be only 2.3 later on.

Change-Id: Ida62cee03cf92b17c5d1ac2c35765388d449dea7
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396564247,1396643058,926981012ed5de78ebdf06d84cd821123b513a4a
926981012ed5de78ebdf06d84cd821123b513a4a,92698101,Make convert-icons produce flipped versions of images too,"Make convert-icons produce flipped versions of images too

Change-Id: Ifc523fc1b4afecc76720b153735f25849b06d6c5
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396361977,1396643052,02ae0baaee52dd3791653cbfa1a8545a05fa3b2a
02ae0baaee52dd3791653cbfa1a8545a05fa3b2a,02ae0baa,Position edit icon appropriately in RTL pages,"Position edit icon appropriately in RTL pages

Change-Id: I6054252ed7107ee53aa64d3deeac05b33240adb3
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396303946,1396643023,f3d7132cd546104e16d3b73454abeccebcbb6483
f3d7132cd546104e16d3b73454abeccebcbb6483,f3d7132c,Set edit text box's directionality,"Set edit text box's directionality

Bug: 63264
Change-Id: I2e3907156ced1850f0e2f729bbd044cdd4485f38
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396303379,1396643017,905c279b9c610de05eb7c31512dbf8f8dfb74c9e
905c279b9c610de05eb7c31512dbf8f8dfb74c9e,905c279b,Set text direction of edit summary field for RTL languages properly,"Set text direction of edit summary field for RTL languages properly

Bug: 63266
Change-Id: Ic109e0f62147b56f3376134faafaef947fa23e39
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396302715,1396637602,f22dbe2d1273c32b1b1880845ebcbe5ab23fcec9
f22dbe2d1273c32b1b1880845ebcbe5ab23fcec9,f22dbe2d,Make license footer display with UI lang directionality,"Make license footer display with UI lang directionality

Adds ways to access the directionality of content language
and UI language separately in the JS.

Bug: 39048
Change-Id: I8eecaf647b37f072c0ef2acba25f1d384cb8781a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396263250,1396637602,543317b91465ae789b671b6724e6e935ab9cf698
543317b91465ae789b671b6724e6e935ab9cf698,543317b9,Set appropriate User Agent string,"Set appropriate User Agent string

See
http://lists.wikimedia.org/pipermail/analytics/2014-March/001730.html
for discussion and justification.

Change-Id: Ica947764a1e95d9310e5182093b2c928107fd3f4
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1396390811,1396568578,90ecd72423fdb360bc2c2f2234dca4b347dae8e3
90ecd72423fdb360bc2c2f2234dca4b347dae8e3,90ecd724,[Gingerbread] Use compat library version of PopupMenu,"[Gingerbread] Use compat library version of PopupMenu

Change-Id: Ica60cfe8f96057949d46b48a4fbcf0c960ef4e49
",,,,Brion Vibber,brion@pobox.com,Yuvipanda,yuvipanda@gmail.com,1396293192,1396332331,9082f0e08f4a9d44eb63491ee0fa4690de06a91d
9082f0e08f4a9d44eb63491ee0fa4690de06a91d,9082f0e0,[Gingerbread] Update the manifest to build for Android 2.3.3+ (API level 10),"[Gingerbread] Update the manifest to build for Android 2.3.3+ (API level 10)

Stuff crashes! This series of patches is work in progress...

Not counting API level 9 since that has negligible usage.

Change-Id: I9ec75f61aeda0d145c67a65cb62ff3cfbf7ed5f0
",,,,Brion Vibber,brion@pobox.com,YuviPanda,yuvipanda@gmail.com,1396291418,1396332219,3e9d463587d582198998bef23102a992b5a09d0e
3e9d463587d582198998bef23102a992b5a09d0e,3e9d4635,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I6c027e04ac45a508e8a58fd2437e5cab8ed21447
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1396302154,1396302154,bc19e40d34af67b98f8559aedb82357f51e84e74
bc19e40d34af67b98f8559aedb82357f51e84e74,bc19e40d,Handle titles that need normalization,"Handle titles that need normalization

Change-Id: I9c04176f1d830ceb7ea40a856bf578e5d82601e6
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395943464,1395943464,8fd8a1050e1195aec3e01f2d038d67ea342ace0c
8fd8a1050e1195aec3e01f2d038d67ea342ace0c,8fd8a105,Make 'Go' button go to exact page title user typed,"Make 'Go' button go to exact page title user typed

Note that this crashes the app if there is no such page but that
should be handled as part of bug 62639

Bug: 62774
Change-Id: Ic48bea20e1931eb861395605128d8c4fa894cde3
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1395918165,1395942879,57e98ac551a9e67bc48a61bb1dadbca28a6afbc9
57e98ac551a9e67bc48a61bb1dadbca28a6afbc9,57e98ac5,Show option to log in or save anonymously when not logged in,"Show option to log in or save anonymously when not logged in

Change-Id: I974d815b74c96ca12c7f9005257640b10abca2f5
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395784210,1395942393,d5e0d9eadd11e16b3b05b7f7a167cbeb48cc8788
d5e0d9eadd11e16b3b05b7f7a167cbeb48cc8788,d5e0d9ea,Handle page redirects properly,"Handle page redirects properly

Bug: 63179
Change-Id: I2547de1b7139266b95bb267e4b7b9ac9d8dba8dc
",,,,YuviPanda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1395910939,1395938600,98f346def8c20ab48ead1ae2661ce9868b555152
98f346def8c20ab48ead1ae2661ce9868b555152,98f346de,Add base class for EventLogging,"Add base class for EventLogging

Change-Id: I3548d6b22696a3097e976daff1e1c9711790e8e6
",,,,YuviPanda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1395908970,1395938567,f11336292258c032c472af0540cfd46f0b63a1a3
f11336292258c032c472af0540cfd46f0b63a1a3,f1133629,"Merge ""Feature flag the Wikipedia Zero detection, instead of Settings preference.""","Merge ""Feature flag the Wikipedia Zero detection, instead of Settings preference.""",,,,Yuvipanda,yuvipanda@gmail.com,Gerrit Code Review,gerrit@wikimedia.org,1395865988,1395865988,"e74c2ac59351f01281fde08484769aea33c5e2e3,76b8538ea0511522d8cd28d2dc8b645845a457eb"
76b8538ea0511522d8cd28d2dc8b645845a457eb,76b8538e,"Feature flag the Wikipedia Zero detection, instead of Settings preference.","Feature flag the Wikipedia Zero detection, instead of Settings preference.

* For testing, email dr0ptp4kt to have your individual IP added to a W0 ACL.

Change-Id: I3c22d6b016a2631aa83fc50c637027b94d00a7c8
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1395692748,1395865689,5828615b6bd62eff9dc048d80efafefbbc791ba6
e74c2ac59351f01281fde08484769aea33c5e2e3,e74c2ac5,Make new alpha release,"Make new alpha release

Change-Id: I2d5af437cc6b236e57e6fe2bf611ec05c0bb406f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395862842,1395862842,36ba2d4664be372592c76da2a62f157de695235d
36ba2d4664be372592c76da2a62f157de695235d,36ba2d46,Change 'Send feedback' to 'Send app feedback'.,"Change 'Send feedback' to 'Send app feedback'.

Change-Id: Iaa844a9cb61ade4d7bab9cfc2bffc53f03fbb6aa
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1395774038,1395774038,e6431cae810d6d3c3d34e60b1fb4dbe9ade5cf2b
e6431cae810d6d3c3d34e60b1fb4dbe9ade5cf2b,e6431cae,Direct feedback email to the OTRS queue,"Direct feedback email to the OTRS queue

Change-Id: I46983444cdb4376f2e75823b6642e689fc99297e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395675849,1395675849,143e9c125003a7f696e9b34fce1a8f72222a179f
143e9c125003a7f696e9b34fce1a8f72222a179f,143e9c12,Fix namespaces missing on displaying titles + add tests,"Fix namespaces missing on displaying titles + add tests

Done with a view of the beautiful Sweet Lake at Arambol, Goa :)

Change-Id: Iaf058421749aa089c4fd5dcd2315889f2f5aee94
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395639701,1395674715,5828615b6bd62eff9dc048d80efafefbbc791ba6
5828615b6bd62eff9dc048d80efafefbbc791ba6,5828615b,Add My Contributions & Logout to left nav menu,"Add My Contributions & Logout to left nav menu

Change-Id: I1a33caa64bd8689af93a07cb502c1a48a70a078f
",,,,YuviPanda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1395361992,1395365489,39717619fedd07a36e03644e9169e4c4c948cbc2
39717619fedd07a36e03644e9169e4c4c948cbc2,39717619,Add User Contributions page,"Add User Contributions page

Activated by tapping on user name when logged in.

- Need to find alternate location for logout

Change-Id: I34cb52277dd1929b64f0f19fc74bdd83cd10418f
",,,,YuviPanda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1395342403,1395365245,1159bfe205f46f22f6c98fc71073e2783dba76e9
1159bfe205f46f22f6c98fc71073e2783dba76e9,1159bfe2,Simplify SaneAsyncTask constructor boilerplate.,"Simplify SaneAsyncTask constructor boilerplate.

Added a constructor that just takes the number of threads to
allocate for this type of task.

Change-Id: If83e1453c658caa207ebf6e3b6e5631115abee14
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395264796,1395360864,574e56f7e8acc88603b7a73550a2dfd79b169b1b
574e56f7e8acc88603b7a73550a2dfd79b169b1b,574e56f7,Simplified new flow for Logging in after creating account,"Simplified new flow for Logging in after creating account

- This shows create account errors in create account activity &
  login errors in login activity
- Copy text might need to be tweaked

Change-Id: Ifb248d09f408f3be5d7f4d5286238f4c485984e5
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395257192,1395360864,0049c60b689dd5f4adc63b241ed1ae429c67297f
0049c60b689dd5f4adc63b241ed1ae429c67297f,0049c60b,Added new bookmark icon for saved pages,"Added new bookmark icon for saved pages

Change-Id: Id703df21d4271216c1031bf9a52409c0114de46d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395360818,1395360864,3f7671d7f6e3ff6add2650e84e7934f7df50d42a
3f7671d7f6e3ff6add2650e84e7934f7df50d42a,3f7671d7,"Merge ""Fix position of logged in icon on navbar""","Merge ""Fix position of logged in icon on navbar""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1395344787,1395344787,"bdd9b4a641c440427e5d21c54af0d5668950f290,3fc00bf859eef4319848bd74a790037abb984c38"
bdd9b4a641c440427e5d21c54af0d5668950f290,bdd9b4a6,"Merge ""Restore Wikipedia Zero status in left side navbar.""","Merge ""Restore Wikipedia Zero status in left side navbar.""",,,,Yuvipanda,yuvipanda@gmail.com,Gerrit Code Review,gerrit@wikimedia.org,1395262160,1395262160,"2a8e5e9bda3f0e91a17a2542808c3993e1628b53,6cfc9df560e69208f297579ae25164246b8e0bf7"
6cfc9df560e69208f297579ae25164246b8e0bf7,6cfc9df5,Restore Wikipedia Zero status in left side navbar.,"Restore Wikipedia Zero status in left side navbar.

Change-Id: I6cecbe6d79623ce10ce701874a4fa8c4c4b94bb0
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1395103009,1395261594,3d99bfe79a487afa99f39908ba23b1901f5ffbdc
3fc00bf859eef4319848bd74a790037abb984c38,3fc00bf8,Fix position of logged in icon on navbar,"Fix position of logged in icon on navbar

Change-Id: Iedf592a5e61a4536b3a827a665cf084c1802c5a2
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395256060,1395256229,2a8e5e9bda3f0e91a17a2542808c3993e1628b53
2a8e5e9bda3f0e91a17a2542808c3993e1628b53,2a8e5e9b,"Merge ""Add a 'wikihacks' file that contains hacks for common wiki styles.""","Merge ""Add a 'wikihacks' file that contains hacks for common wiki styles.""",,,,Dr0ptp4kt,abaso@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1395249865,1395249865,"3d99bfe79a487afa99f39908ba23b1901f5ffbdc,61752188377ff53f56717bf722ba30b86e0aeab8"
3d99bfe79a487afa99f39908ba23b1901f5ffbdc,3d99bfe7,"Merge ""Remove attribution css from bundles that do not need it""","Merge ""Remove attribution css from bundles that do not need it""",,,,Dr0ptp4kt,abaso@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1395193946,1395193946,"432cc46f9fbaf63cfdb713f6ee9cc1c238ace9aa,ac9d5ea49c39897907ea3716fd85983a98dc6a54"
432cc46f9fbaf63cfdb713f6ee9cc1c238ace9aa,432cc46f,"Merge ""Get rid of share lead text""","Merge ""Get rid of share lead text""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1395181649,1395181649,"b5ace10b2a339fb5d4f149e4b4ff2b310eee7604,15d84e157bb2d15869e03eab980cfff50b921c10"
b5ace10b2a339fb5d4f149e4b4ff2b310eee7604,b5ace10b,"Merge ""Revert ""Email feedback to android@wikimedia.org.""""","Merge ""Revert ""Email feedback to android@wikimedia.org.""""",,,,Dr0ptp4kt,abaso@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1395181201,1395181201,"b43db81f843f3f2f0d68c125e60f254ea8e1cd1a,eb4c64c22041a8d37a19d10c246b114754b453b2"
61752188377ff53f56717bf722ba30b86e0aeab8,61752188,Add a 'wikihacks' file that contains hacks for common wiki styles.,"Add a 'wikihacks' file that contains hacks for common wiki styles.

Change-Id: I26aeb6cd2cce23a989bc06112c3931129f0351ed
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395180916,1395180942,ac9d5ea49c39897907ea3716fd85983a98dc6a54
ac9d5ea49c39897907ea3716fd85983a98dc6a54,ac9d5ea4,Remove attribution css from bundles that do not need it,"Remove attribution css from bundles that do not need it

Change-Id: Ice6322b7a85a7a88af176985aa26bb3efda1b1ac
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395180259,1395180259,15d84e157bb2d15869e03eab980cfff50b921c10
b43db81f843f3f2f0d68c125e60f254ea8e1cd1a,b43db81f,Localisation tweaks,"Localisation tweaks

Based on review while translating the application.

Change-Id: Id31e15a4d2f28348ed4b8ddc9d9e90a754aa81ff
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1395147225,1395147225,784a1ddfd6a2896994109370f10a10acfc9db39c
784a1ddfd6a2896994109370f10a10acfc9db39c,784a1ddf,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: Id77a3477c58f2d670e8cb74467da4e87602a6796
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1395145910,1395145910,d8f472799c86220519d1b8913fc2f28df725c656
eb4c64c22041a8d37a19d10c246b114754b453b2,eb4c64c2,"Revert ""Email feedback to android@wikimedia.org.""","Revert ""Email feedback to android@wikimedia.org.""

Reverting pending discussion about using OTRS vs
a Google Group.

This reverts commit 1a2af215cdb1f733a030815e09cfc7f612a19e6d.

Change-Id: I1a35daee21d5932612208aeb436c202b1be52282
",,,,Yuvipanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1395136255,1395136830,d8f472799c86220519d1b8913fc2f28df725c656
15d84e157bb2d15869e03eab980cfff50b921c10,15d84e15,Get rid of share lead text,"Get rid of share lead text

We shouldn't add random extra boilerplate to what someone is sharing.

Besides, we don't need the advertisement :D

Change-Id: Ie80eb4da581cfdb90085dc8b962f27c3099c4af4
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395124959,1395124959,08984ed314a586756da6f01ab1ae461d67637b1e
d8f472799c86220519d1b8913fc2f28df725c656,d8f47279,"Merge ""Workarounds for deprecated language codes for yi and id""","Merge ""Workarounds for deprecated language codes for yi and id""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1395091375,1395091375,"1a2af215cdb1f733a030815e09cfc7f612a19e6d,08984ed314a586756da6f01ab1ae461d67637b1e"
08984ed314a586756da6f01ab1ae461d67637b1e,08984ed3,Workarounds for deprecated language codes for yi and id,"Workarounds for deprecated language codes for yi and id

Bug: 62720
Change-Id: I7feb4bef88b1771b79b114dea28235bedac5e296
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395090641,1395090641,c5c5a7bdd270a2e60a13dc8519e2c54790c14f1c
1a2af215cdb1f733a030815e09cfc7f612a19e6d,1a2af215,Email feedback to android@wikimedia.org.,"Email feedback to android@wikimedia.org.

Change-Id: I0c341c18480a053c7c36b8799e671059e5b7ce65
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1395089850,1395090045,c5c5a7bdd270a2e60a13dc8519e2c54790c14f1c
c5c5a7bdd270a2e60a13dc8519e2c54790c14f1c,c5c5a7bd,Fix back button not working,"Fix back button not working

Change-Id: I4f34e27e784f18222981a09a8249246faff5afe0
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395088346,1395088346,22174b9fdc14142d1c2763727a8bf579b8e9e686
22174b9fdc14142d1c2763727a8bf579b8e9e686,22174b9f,Bump version number to 2.0-alpha-2014-03-17,"Bump version number to 2.0-alpha-2014-03-17

Using new release numbering system that says when it was released.

Change-Id: Ia9c33f174167139be05965cb24e2af9e93c9cf50
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395086270,1395087798,ad2e7530e30e86077fa46166cf05814b4f4681b7
ad2e7530e30e86077fa46166cf05814b4f4681b7,ad2e7530,Handle case when Android & Wiki disagree on language code.,"Handle case when Android & Wiki disagree on language code.

Currently only handles hebrew. Should expand as we find more.

Bug: 62720
Change-Id: I6dc69097f4f15dbb2bf9649e1e9be50e865bbbce
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1395086809,1395087798,8b90c756ec7b12054fea06c35563ac957ea024a1
8b90c756ec7b12054fea06c35563ac957ea024a1,8b90c756,Add icons to left nav,"Add icons to left nav

Icon for saved pages not used. Needs to be redone

Change-Id: I91adac774c41d841b32d59e541ff4dc8d562fd08
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1395049880,1395085090,23ac15bea51b56307c23b77244d94c6d847c3a32
23ac15bea51b56307c23b77244d94c6d847c3a32,23ac15be,Add python script that generates pngs from svgs,"Add python script that generates pngs from svgs

- Requires rsvg-convert and the python sh module
- Has svgs in subfolders of icon-svgs/, where the name of the
  subfolder is taken to be the size of the (square) icon in dp
- Also add ldpi support. 8% of devices, and it is trivial for us to
  support anyway
- Maintains aspect ratio by fixing height

Change-Id: Icd9a8fbc9ff698036c28f53060c120ebe46165af
",,,,YuviPanda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1395047728,1395084391,7ddb4f0fe5e52f8ae7907c3eb99f6f3a7df5c530
7ddb4f0fe5e52f8ae7907c3eb99f6f3a7df5c530,7ddb4f0f,Get rid of old values-iw and symlink it to values-he,"Get rid of old values-iw and symlink it to values-he

Change-Id: I18e401da0da53c985b1fc0781d3dbf71361aad44
",,,,YuviPanda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1395047485,1395084361,81a2d47928b916f1ae63a92fa0ead13645cc540d
81a2d47928b916f1ae63a92fa0ead13645cc540d,81a2d479,Fix back not working when cached search results are displayed,"Fix back not working when cached search results are displayed

Change-Id: I8e7aeb9ddf0b7bec5a619010808f002a05dde3f7
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394999286,1394999286,6140117635785fd72c9d9b8ed012bf1035e4cfa0
6140117635785fd72c9d9b8ed012bf1035e4cfa0,61401176,Display previous search results when search bar with text is tapped,"Display previous search results when search bar with text is tapped

Change-Id: Ifa5ebfb88b4777376a6ad290eb6ed92732103401
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394999271,1394999271,0b09292abb47ae070c0855adf1751a89b876bf7e
0b09292abb47ae070c0855adf1751a89b876bf7e,0b09292a,Move code that hides search results into own method,"Move code that hides search results into own method

Change-Id: I61bd717d5d6a8c67dce556a284a721688810ff19
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394999232,1394999263,2e6e0e6abaeb778a2ccfd844d2e4b69a03bd8398
2e6e0e6abaeb778a2ccfd844d2e4b69a03bd8398,2e6e0e6a,"If search is visible, hide it rather than go 'back'","If search is visible, hide it rather than go 'back'

Change-Id: I664c3490b72d9a484dd06585dbe037987f018a5c
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394999197,1394999197,bf5cbb494d579d0ff99b3f73908d4fa4c22cfd8b
bf5cbb494d579d0ff99b3f73908d4fa4c22cfd8b,bf5cbb49,"If drawer is open when back is pressed, hide it","If drawer is open when back is pressed, hide it

Change-Id: Ib7d405c0152bfce629f247e60b75231abc1e01e3
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394837583,1394837705,0d4b00a8088b2e1af358a91af5f71fdf36a656e0
0d4b00a8088b2e1af358a91af5f71fdf36a656e0,0d4b00a8,Indicate currently selected section in ToC,"Indicate currently selected section in ToC

Change-Id: I430ac436aa15efca359d595041baf40f4f59b353
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394823479,1394837696,08731af757795082b9dae03b9dcac2e322aa60c2
08731af757795082b9dae03b9dcac2e322aa60c2,08731af7,Set custom User-Agent for rebooted Android app.,"Set custom User-Agent for rebooted Android app.

* Allows app to identify itself.
* Dependency: Ib5f3a4041126c83e9d33011568fe8fdf410dcd3b

Change-Id: If0928be047d02e263153991c438de38fe95e921b
",,,,dr0ptp4kt,abaso@wikimedia.org,Brion VIBBER,brion@wikimedia.org,1394744081,1394836014,23032aa051d714234012056bb0f5614461b60a70
23032aa051d714234012056bb0f5614461b60a70,23032aa0,"For the Android Share feature, do not show Always option.","For the Android Share feature, do not show Always option.

* Users are likely to use multiple apps for sharing things.
* This change prevents accidental selection of only one sharing app for eternity.
* See http://developer.android.com/guide/components/intents-filters.html#ForceChooser for guidance.
* This change also changes the lead in text for the shared link and labels the chooser as 'Share via'.
* Also, added some qqq hints above and beyond share-related stuff.

Change-Id: I86cef2517ac75878a89caff678aa70835dbee121
",,,,dr0ptp4kt,abaso@wikimedia.org,Brion VIBBER,brion@wikimedia.org,1394758273,1394835772,bc2114ea167d705576016125bdec2a5ca463efa1
bc2114ea167d705576016125bdec2a5ca463efa1,bc2114ea,ToC design tweaks,"ToC design tweaks

Can see ToC by swiping left-to-right. Edge-dragging shows Drawer

Change-Id: I288e3e322df8a6693cd1f1906fb2e56a6f001241
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394793109,1394793391,bbd542b38557e05be447924ad10bd424128b28f4
bbd542b38557e05be447924ad10bd424128b28f4,bbd542b3,Design tweaks for nav drawer,"Design tweaks for nav drawer

- Designers are experimenting with the color
- Search bar is hidden as well
- Zero indicators have been removed. Need to be re-done
- Does not use a ListView anymore. Not customizable enough.
- Need to add icons

Change-Id: Ic6ef5e3f814ee2d466bdbaddfbf8cc7767fee5fd
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394781703,1394788990,300c9d89d09ab986f22dd4fd3ecfc006e4fb9f4c
300c9d89d09ab986f22dd4fd3ecfc006e4fb9f4c,300c9d89,Add section-0 edit button,"Add section-0 edit button

Bug: 61513
Change-Id: I2497c725c5915ff6404760b62c7dc56c16b5639d
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1394660798,1394660798,33b84973e039a0f6e342729f7168610596a68ea5
33b84973e039a0f6e342729f7168610596a68ea5,33b84973,"Merge ""Update version to prep for Google Play alpha releases""","Merge ""Update version to prep for Google Play alpha releases""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1394660288,1394660288,"4f7685ec30574aa21728175a910c8ccc30b1bf33,c3c32237b6068c9fbcc39f982133d0ec9ca91adf"
c3c32237b6068c9fbcc39f982133d0ec9ca91adf,c3c32237,Update version to prep for Google Play alpha releases,"Update version to prep for Google Play alpha releases

Change-Id: Ie7f8eb9378f5b687098142a0ab53f171a120bb2b
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1394655293,1394660198,422461825379ba84bf74caf968696ba5dbb2182b
4f7685ec30574aa21728175a910c8ccc30b1bf33,4f7685ec,Display version string prominently in the app,"Display version string prominently in the app

Will be taken out for final release

Change-Id: I05ac472bee1412d6ba4dcf22c3c2975a8da459b1
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394659968,1394660018,422461825379ba84bf74caf968696ba5dbb2182b
422461825379ba84bf74caf968696ba5dbb2182b,42246182,"Random articles. Because Androids like it, too.","Random articles. Because Androids like it, too.

Change-Id: I0627f5a0b3d5a8b29d3134876e70d40c0fdd418f
",,,,dr0ptp4kt,abaso@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1394583178,1394657720,9820e0d9c4ed5ce1ee62c708a1f79051d76c4e16
9820e0d9c4ed5ce1ee62c708a1f79051d76c4e16,9820e0d9,Show Edit Summary field only after preview is fetched,"Show Edit Summary field only after preview is fetched

Change-Id: I212c2665ae39149af7c13004f4c96ba5470818b2
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394653570,1394653570,ca226534650c9811923d0b259068c3464fafbd85
ca226534650c9811923d0b259068c3464fafbd85,ca226534,Add autocomplete support for EditSummaries with a ContentProvider,"Add autocomplete support for EditSummaries with a ContentProvider

- Also adds support for upgrading db versions gracefully

Change-Id: I7358747f832237ebb2a85267d6c061939ca10793
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394647869,1394650825,6fdf4d47664d19d21bcf60fe351fe25f6fc74224
6fdf4d47664d19d21bcf60fe351fe25f6fc74224,6fdf4d47,"Merge ""Update pullfiles to account for new package name""","Merge ""Update pullfiles to account for new package name""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1394644988,1394644988,"4aa5067fb956d696e9714e10da81c97334c9dedc,82db7092149535544d78765391a6bc0eeee6e6f5"
4aa5067fb956d696e9714e10da81c97334c9dedc,4aa5067f,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I680091f60f79d8c623b8c7df67b2d87ef7208fe1
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1394632228,1394632228,3461c020c4ece82dff487b935d89e42aefeda3c9
3461c020c4ece82dff487b935d89e42aefeda3c9,3461c020,Localisation updates from https://translatewiki.net.,"Localisation updates from https://translatewiki.net.

Change-Id: I064a9fa666064bf38ba23d2b2d68c9684bfab7fd
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1394629341,1394629341,9e1a0001dddd81eba7cf4f566e9f4acbcea1917c
82db7092149535544d78765391a6bc0eeee6e6f5,82db7092,Update pullfiles to account for new package name,"Update pullfiles to account for new package name

Change-Id: I387b2731f36bbe443f6713a6cd78413032033098
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394578006,1394578035,9e1a0001dddd81eba7cf4f566e9f4acbcea1917c
9e1a0001dddd81eba7cf4f566e9f4acbcea1917c,9e1a0001,Don't let users type more than 255char long edit summary,"Don't let users type more than 255char long edit summary

MW actually defines it to be *bytes* not chars, so eventually
this needs to be a bit more complicated. But having this now is
better than not having it, so...

Change-Id: I1e144c7440581ae57717b6fff3893bd4e6b5e467
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394571038,1394571038,01b30b1be0ebdd471b9f0e182ff88747a1c06d5a
01b30b1be0ebdd471b9f0e182ff88747a1c06d5a,01b30b1b,"Merge ""Add simple Edit Summary option to preview window""","Merge ""Add simple Edit Summary option to preview window""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1394564583,1394564583,"96230ceba579a35ccfda385773515e31c6be32cc,729ce6c8033dc7456f626fde38bb7679d37b3979"
96230ceba579a35ccfda385773515e31c6be32cc,96230ceb,"Merge ""Use .equals not == for comparing strings""","Merge ""Use .equals not == for comparing strings""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1394563961,1394563961,"2777e621769d195423239daf349bed49bad6adbe,b76da5431903739e155c8755150a8d6ec26b7160"
729ce6c8033dc7456f626fde38bb7679d37b3979,729ce6c8,Add simple Edit Summary option to preview window,"Add simple Edit Summary option to preview window

Change-Id: I321f8e79bab9f6684e66e76f1e300a52d68bb2e8
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394526499,1394562755,b76da5431903739e155c8755150a8d6ec26b7160
b76da5431903739e155c8755150a8d6ec26b7160,b76da543,Use .equals not == for comparing strings,"Use .equals not == for comparing strings

Change-Id: Ief36183409d91475eb052eae4dc18d1edfd8f54f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394523563,1394562754,0f65e52cc2c5fd71202b6cad650d668ee8e4616c
2777e621769d195423239daf349bed49bad6adbe,2777e621,Fix grammatical error,"Fix grammatical error

Spotted by SPQRobin and reported at
https://translatewiki.net/wiki/Thread:Support/About_Wikimedia:Wikipedia-android-strings-langlinks_empty/nl

Change-Id: I3f23133ea7e3ffd70c40340f82ad863224f0aa3a
",,,,Translation updater bot,l10n-bot@translatewiki.net,Translation updater bot,l10n-bot@translatewiki.net,1394558115,1394558115,0f65e52cc2c5fd71202b6cad650d668ee8e4616c
0f65e52cc2c5fd71202b6cad650d668ee8e4616c,0f65e52c,Add 'Send Feedback' iten to left nav,"Add 'Send Feedback' iten to left nav

Will be stripped out before market release.

Change-Id: I80ca683115e7454d7cded126cb3223d5ba08ad52
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1394141831,1394141831,21c70c6661fc9035dd61915ec44da7689da6ad33
21c70c6661fc9035dd61915ec44da7689da6ad33,21c70c66,Preserve activity & web view state across rotation etc,"Preserve activity & web view state across rotation etc

We spent a bunch of trouble looking into ways to preserve the scroll
position and other state across orientation changes, with mediocre
results.

Turns out the Browser app simply ensures that it preserves the activity
across orientation and screen size changes -- the webView naturally
keeps the correct scroll position across an orientation change if we
just let it be instead of recreating everything.

Note we may still need to preserve scroll position explicitly across
an activity being killed or something, so haven't removed that existing
code using the basic scrollY position.

Bug: 61512
Change-Id: Iec3ae929d1bd8b0af2d94dcb9664827d659a235d
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1393969837,1393969837,181664945e23ecaf509db09e9a2fb9cdd7f2476e
181664945e23ecaf509db09e9a2fb9cdd7f2476e,18166494,Remove stray whitespace from strings.xml,"Remove stray whitespace from strings.xml

Change-Id: I25010d603028a5799b7585bc2078c0beea9d93ad
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1393955882,1393955882,55548d5d37d8741d2cfe846a27db0c1019e6d7b0
55548d5d37d8741d2cfe846a27db0c1019e6d7b0,55548d5d,"Merge ""Revert ""Cleanup webviews when we no longer require them""""","Merge ""Revert ""Cleanup webviews when we no longer require them""""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1393949717,1393949717,"dfd80c68a5939ae2cab5f68512d42838a6223062,21dc7ae81af867577faa6697f91d757e977a23ab"
21dc7ae81af867577faa6697f91d757e977a23ab,21dc7ae8,"Revert ""Cleanup webviews when we no longer require them""","Revert ""Cleanup webviews when we no longer require them""

Was causing crashes when back button was pressed. Needs
a better longer term memory management solution instead.

This reverts commit 488bece3e5fd6985822ec7b404ade1cf16f3bc36.

Change-Id: I54503cac5640eeaaf3e5658ae3b2bbe35175dac0
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393933228,1393933458,b7c37db50c7974beb1df316a3ea7ddc57b7f5c14
dfd80c68a5939ae2cab5f68512d42838a6223062,dfd80c68,"Change ""No thanks"" to ""Dismiss"" for Wikipedia Zero dialog.","Change ""No thanks"" to ""Dismiss"" for Wikipedia Zero dialog.

Change-Id: Ie9095712d4eb7d2a5f0c990bc7c2054b5b0db34c
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1393892505,1393892692,b7c37db50c7974beb1df316a3ea7ddc57b7f5c14
b7c37db50c7974beb1df316a3ea7ddc57b7f5c14,b7c37db5,"When following links with hash/fragments on them, jump to the anchor","When following links with hash/fragments on them, jump to the anchor

* Added 'fragment' member to PageTitle
* Added tests for processing the fragment
* Pass the target fragment through to displaySection in webview
* on last section insert, jump to the fragment if present
Bug: 61726
Change-Id: Ic651fd3bd130b48addbc1cb565e3d47836e27f2a
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1393632751,1393873132,a30871a09efcf75899cd77bb796348c81f9fc387
a30871a09efcf75899cd77bb796348c81f9fc387,a30871a0,Let's just set a reasonable size in dp for the captcha image,"Let's just set a reasonable size in dp for the captcha image

This lets the image scale up to expected size, and if we end up
with GIANT captcha images in future they don't fall offscreen
since they'll shrink instead.

Bug: 62016
Change-Id: Ie4a32fa57ab68b36e1061c43c8feddcc863a5908
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1393629366,1393630530,0f3471c2f6f0eb8091ac0a7ebe538e7efd3595a0
0f3471c2f6f0eb8091ac0a7ebe538e7efd3595a0,0f3471c2,Don't crash when a reference is clicked,"Don't crash when a reference is clicked

Change-Id: I9f28f8b0be702503579d4a97ce22cff30d21f7cd
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393531156,1393531156,2d32c7e66627cfb85cdf936c6c5ccb7ccc509b8e
2d32c7e66627cfb85cdf936c6c5ccb7ccc509b8e,2d32c7e6,Hide softkeyboard when exiting create account,"Hide softkeyboard when exiting create account

Change-Id: If166193a21a202989fbbfc6ee1fefac4135f6091
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393492023,1393523985,2e9a4866d13eba30d22cef65f0098c913a5847fe
2e9a4866d13eba30d22cef65f0098c913a5847fe,2e9a4866,Make sure sidebar says log in only if user is logged out,"Make sure sidebar says log in only if user is logged out

Change-Id: I1e5d944086edeee98b407f7a8178e9866ed5bc3c
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393491958,1393523985,fcd2e403d2aa2e935a9d329d048d495a719e8e56
fcd2e403d2aa2e935a9d329d048d495a719e8e56,fcd2e403,Login the user right after they create an account,"Login the user right after they create an account

Might need better UX - right now there's no way for us to show
errors in the login process itself

Change-Id: I26449e125f2398574631b63e4c3c07d012389b68
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393491397,1393523980,80c6cf21a87d8a43540cde56519683db1bf6eb92
80c6cf21a87d8a43540cde56519683db1bf6eb92,80c6cf21,Make sure dir attribute is set on RTL pages,"Make sure dir attribute is set on RTL pages

Bug: 61867
Change-Id: Ib1479511c99e188eb2f79262255048142d2a276d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393489094,1393522708,2d3cb7d900074245a2b320781ec6256676d0394c
2d3cb7d900074245a2b320781ec6256676d0394c,2d3cb7d9,"Fix ""page goes blank after saving"" bug","Fix ""page goes blank after saving"" bug

This was breaking if your internet was fast. ;)
Fade-out of the web view to the progress indicator was getting
canceled by the subsequent fade-in, but the listener's onAnimationEnd
handler was still being called and hiding the webView completely.

Added a check for cancelation, which seems to resolve it.

Bug: 60696
Change-Id: I226568aa43fd5720af34ce285d6136b702b881c5
",,,,Brion Vibber,brion@pobox.com,Brion VIBBER,brion@wikimedia.org,1393291670,1393293049,c9db116e7a41557f8ba85db19b389f6b10117085
c9db116e7a41557f8ba85db19b389f6b10117085,c9db116e,Add 'showPassword' functionality to Create Account,"Add 'showPassword' functionality to Create Account

Checkboxes for now, will replace with fancier designs later on

Change-Id: I1709b399ddbba6d6fa4c7b23e36868c022db09de
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1393273934,1393292814,4fb4a5d210fa34e240eff5a4f6bde586882e89a2
4fb4a5d210fa34e240eff5a4f6bde586882e89a2,4fb4a5d2,Only add event handler once; after edit we may reload multiple times,"Only add event handler once; after edit we may reload multiple times

This was causing multiple calls to section request/display.

Change-Id: Ie73e0cbe991691613138955d39e0908b6048db84
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1393287015,1393292658,fcb47668999d1e828d6220636d8bea219014bc97
fcb47668999d1e828d6220636d8bea219014bc97,fcb47668,"Avoid ""leaked window"" errors by dismissing popups, not just hiding them, on success","Avoid ""leaked window"" errors by dismissing popups, not just hiding them, on success

Change-Id: I45a2dc6d73f5b0891fea5f1124394d286f14d314
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1393283761,1393283761,367ce44a3e6d8085a9c5c446c2bd2256e028297f
367ce44a3e6d8085a9c5c446c2bd2256e028297f,367ce44a,Hide editlinks in preview,"Hide editlinks in preview

Change-Id: I94bf163aad0590e6386d595c45442543e4d215d7
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393271353,1393271376,7344b206b2529e65dca79d66f9d6af810bb09d61
7344b206b2529e65dca79d66f9d6af810bb09d61,7344b206,Make the preview task POST,"Make the preview task POST

Change-Id: Ic0ea37941823de6fba0de4bf5c2708c3c69961b5
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393270960,1393270960,4611534b33e079e4144f9df3277959ff17d65484
4611534b33e079e4144f9df3277959ff17d65484,4611534b,Add 'preview' functionality,"Add 'preview' functionality

- Tapping save first takes you to preview, and then tapping
  again actually saves. This might be changed in the future

Change-Id: Ic356af5878e3a177706f307b56ac5855534fc19c
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393249119,1393249298,9eeff3bf807652450465fb753c0983debf633830
9eeff3bf807652450465fb753c0983debf633830,9eeff3bf,Add task to get a preview + tests,"Add task to get a preview + tests

Change-Id: Iad4b6d1d13ad534f81afd751d4bad609d980123a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393228811,1393249298,488bece3e5fd6985822ec7b404ade1cf16f3bc36
488bece3e5fd6985822ec7b404ade1cf16f3bc36,488bece3,Cleanup webviews when we no longer require them,"Cleanup webviews when we no longer require them

Change-Id: I55f3d58b80887131d76f71288d05d34833b82d6f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393249273,1393249298,959d79c31e79550c23455b4feacb6620cfcb3f82
959d79c31e79550c23455b4feacb6620cfcb3f82,959d79c3,Fix crash when rotating phone with multiple pages,"Fix crash when rotating phone with multiple pages

- This stops replacing fragments, and just adds them. This *must*
  be fixed at some point since otherwise it will lead to unreasonable
  memory pressure.

Change-Id: I847053b3e38096ee0eb3fc5d2988c3157135d29a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393239819,1393249298,06036fc383e89f64dd21bbd4d1db206acb8293dc
06036fc383e89f64dd21bbd4d1db206acb8293dc,06036fc3,Small fixes/cleanup,"Small fixes/cleanup

- Renamed StylizedButton and StylizedEditText to StyledButton and StyledEditText to be consistent
- Colsolodated the constructors for all of the Styled* classes to ease maintenance
- Changed instances where instances of WikipediaApp were used to access static class methods
- Simplified an instance where a boolean return value was checked before returning it to simple return the result of the function call itself

Change-Id: Ie10a13897a147d34cef5ab76d0839aba3b20d1ff
",,,,Nicole Borrelli,nicole@hitori.org,Nicole Borrelli,nicole@hitori.org,1393217526,1393217526,a8168c0fde4a4431a73b26c78554e3872ddadf23
a8168c0fde4a4431a73b26c78554e3872ddadf23,a8168c0f,Fix the thrown exception so the Styled* views can be properly previewed in Intellij,"Fix the thrown exception so the Styled* views can be properly previewed in Intellij

Change-Id: Ia0efc0e9b63ea9332c66efb2c5c1a7d664881218
",,,,Nicole Borrelli,nicole@hitori.org,Nicole Borrelli,nicole@hitori.org,1393068774,1393068774,64fd0975b8adae4b6d8724df3d8fc1019430afef
64fd0975b8adae4b6d8724df3d8fc1019430afef,64fd0975,"Merge ""Hide 'No Results found' message as well when hiding search results""","Merge ""Hide 'No Results found' message as well when hiding search results""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1393018876,1393018876,"db56ec8fcfbac7b6f9723bec7a4fc7ee4289b05d,622891653f0cbe33de998f6f5bd197f298ba3430"
622891653f0cbe33de998f6f5bd197f298ba3430,62289165,Hide 'No Results found' message as well when hiding search results,"Hide 'No Results found' message as well when hiding search results

Change-Id: I77b6c625bbcd15036956e3484070151608f9364a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393018507,1393018507,6c907ea29a27d010dfd4a78fc742993bd734075a
db56ec8fcfbac7b6f9723bec7a4fc7ee4289b05d,db56ec8f,WIP: Add Wikipedia Zero detection and GUI features.,"WIP: Add Wikipedia Zero detection and GUI features.

* If on Wikipedia Zero participating carrier, toast and update chrome.
* When W0 status off, toast and update chrome.
* Display dialog boxes first time ON and first time OFF. Not again, though.
* Update search bar as appropriate.
* Intercept offsite links, but offer setting to opt out of feature.
** Note, general app-level handling of links worth pass in different PS.
* Show latest W0 status within drawer as context clue.
* This version supports a toggle for ""zero devmode"" for event handling.
* This version uses uniform English off verbiage, gets carrier banner from API.
* Future: Align on i18n approach.
* Future: Remove ""zero devmode"" option and ensure all listeners working.
* Refer to I7fc92136313a3116b43543c5198d7f7875664293 for the out-of-sync version.

Conflicts manually resolved:
	wikipedia/res/values/preference_keys.xml
	wikipedia/res/values/strings.xml
	wikipedia/src/main/java/org/wikipedia/NavDrawerFragment.java
	wikipedia/src/main/java/org/wikipedia/Utils.java
	wikipedia/src/main/java/org/wikipedia/WikipediaApp.java
	wikipedia/src/main/java/org/wikipedia/editing/DoEditTask.java
	wikipedia/src/main/java/org/wikipedia/editing/FetchSectionWikitextTask.java
	wikipedia/src/main/java/org/wikipedia/interlanguage/LangLinksFetchTask.java
	wikipedia/src/main/java/org/wikipedia/networking/ConnectionChangeReceiver.java
	wikipedia/src/main/java/org/wikipedia/page/LinkHandler.java
	wikipedia/src/main/java/org/wikipedia/page/PageActivity.java
	wikipedia/src/main/java/org/wikipedia/page/SectionsFetchTask.java
	wikipedia/src/main/java/org/wikipedia/search/SearchArticlesFragment.java
	wikipedia/src/main/java/org/wikipedia/search/SearchArticlesTask.java
	wikipedia/src/main/java/org/wikipedia/settings/SettingsActivity.java

Change-Id: I05f5d847cfbb996915394750e01999addf2abba9
",,,,dr0ptp4kt,abaso@wikimedia.org,Brion VIBBER,brion@wikimedia.org,1390528250,1393018147,6c907ea29a27d010dfd4a78fc742993bd734075a
6c907ea29a27d010dfd4a78fc742993bd734075a,6c907ea2,Persist Account creation status info across rotates,"Persist Account creation status info across rotates

Change-Id: If15154ea22f1c27f8a2866d0ffa174f0a46e5cd0
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393017833,1393017980,45de2190ee496f3708b955cd5b78db8c5e8b10ca
45de2190ee496f3708b955cd5b78db8c5e8b10ca,45de2190,Handle minimal HTML in headings in ToC,"Handle minimal HTML in headings in ToC

Change-Id: I81f87c21c5a9e5e7d616d2bce325fc0695c71307
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393016791,1393016791,c9e729b4403b32b5b105d45c20d7245c25725542
c9e729b4403b32b5b105d45c20d7245c25725542,c9e729b4,Handle back button properly when overlay is open,"Handle back button properly when overlay is open

Bug: 61722
Change-Id: Ic8389d4bdaa11e82b6274dbdfc154f93e62e6520
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393016535,1393016535,8e5989169949e67f50982e22e8a391b85a96c2b7
8e5989169949e67f50982e22e8a391b85a96c2b7,8e598916,Hide search results if drawer is opened,"Hide search results if drawer is opened

Bug: 61717
Change-Id: I5bf3efbb64cc64bea771a409035effa731c23242
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1393008531,1393008531,300755f2667f648f955c8e0585efe10103c05317
300755f2667f648f955c8e0585efe10103c05317,300755f2,Handle user account creation errors,"Handle user account creation errors

Change-Id: Ibdd13bafcafd38c258bd6641c71f32ed64f45f0a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392997670,1392997670,9c5450002b7a048da4386c693b2803af53560082
9c5450002b7a048da4386c693b2803af53560082,9c545000,Treat titles as HTML rather than text,"Treat titles as HTML rather than text

Bug: 61728
Change-Id: Ic620f84d93ef6bb44f07c64f197bc5f361428be8
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392983860,1392983860,5355e3da3f7738e9ffa2cb525a2c25891f5afd58
5355e3da3f7738e9ffa2cb525a2c25891f5afd58,5355e3da,Display errors inline in Login form as well,"Display errors inline in Login form as well

Change-Id: I659024483932bed53c53d7dc7cbc9117fae4fbcd
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392983231,1392983231,448aea1088d1a156f8c0e017ced1b68d35485844
448aea1088d1a156f8c0e017ced1b68d35485844,448aea10,Use saripaar for validation before submitting,"Use saripaar for validation before submitting

Change-Id: Ief393d9a5ed5259fdfe33dccb14c8380ba693f25
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392981750,1392983108,2bf4dace231e79b546debafdeb40cba4b545fe74
2bf4dace231e79b546debafdeb40cba4b545fe74,2bf4dace,Add repeat password textbox to create account,"Add repeat password textbox to create account

Change-Id: I085774f19a76756533000d96ce5aa6f17707b3f1
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392980447,1392980534,dc74c7b22a958f5d898ad879df23e2f035d11304
dc74c7b22a958f5d898ad879df23e2f035d11304,dc74c7b2,Don't crash if captcha is wrong in CreateAccount,"Don't crash if captcha is wrong in CreateAccount

Change-Id: I233372cc13676460603a73c67fc521cacef7dc88
",,,,YuviPanda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1392935814,1392936465,df004e726b3e5a7402675e40e118d2362d7a148e
df004e726b3e5a7402675e40e118d2362d7a148e,df004e72,Update README to remove outdated information,"Update README to remove outdated information

Change-Id: I92078201f828e5b57856e22566652b57d1183547
",,,,Nicole Borrelli,nicole@hitori.org,Nicole Borrelli,nicole@hitori.org,1392928767,1392929180,60d180c6febe371944caa5650fc421b5e7e421b7
60d180c6febe371944caa5650fc421b5e7e421b7,60d180c6,"Merge ""Actually create the account""","Merge ""Actually create the account""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1392927077,1392927077,"47dc0cb6a2f063157d70f5138c1c5235f54b037c,9b94683f6b4e157f4a7d4cca759e01963073ea9f"
47dc0cb6a2f063157d70f5138c1c5235f54b037c,47dc0cb6,"Merge ""Don't pass title to RefreshCaptcha when Site would do""","Merge ""Don't pass title to RefreshCaptcha when Site would do""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1392926001,1392926001,"b42f6d380c4ba05ba7c17c0ce7d63ec572b9e9c6,2760626227001fab518534fdf80955eed6c81aca"
b42f6d380c4ba05ba7c17c0ce7d63ec572b9e9c6,b42f6d38,"Merge ""Refactor out code that did non-empty validation""","Merge ""Refactor out code that did non-empty validation""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1392925849,1392925849,"3fb5b73a66eefeb26af3c200d5d7c3e23faca60a,efe024ba36964569a2e039a4984f48369784b1f1"
3fb5b73a66eefeb26af3c200d5d7c3e23faca60a,3fb5b73a,"Merge ""Refactor captcha handling into its own Handler""","Merge ""Refactor captcha handling into its own Handler""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1392925707,1392925707,"2a5575ed603ae5897c4a7fc4e36f563c4e41a613,f15204b47f7069ba233219e2b7977c609c589c88"
2a5575ed603ae5897c4a7fc4e36f563c4e41a613,2a5575ed,"Merge ""Separate captcha layout into own file""","Merge ""Separate captcha layout into own file""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1392925582,1392925582,"c548c47ab238d75a15717074ab482474680e2761,255ec76b816a6f59a3cda99902b6edfcc2424216"
c548c47ab238d75a15717074ab482474680e2761,c548c47a,"Merge ""Add a task to do pre-flight request for account creation + test""","Merge ""Add a task to do pre-flight request for account creation + test""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1392925468,1392925468,"1c1bc69fa31910d20e1e4e9dc20691d4192f8a22,48c5d2f2fd40abd9b2700bd552367fb5615012a2"
1c1bc69fa31910d20e1e4e9dc20691d4192f8a22,1c1bc69f,Pick up android support library from appropriate place,"Pick up android support library from appropriate place

com.android.* is in maven central and horribly out of date.

Change-Id: I35fca971aa97c6951359fbba13be0c8c15e46149
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392922326,1392922326,1dfafe5f0221bc08ccd70a0b48c0b58adcdfbff4
9b94683f6b4e157f4a7d4cca759e01963073ea9f,9b94683f,Actually create the account,"Actually create the account

- Might inconsistently fail on testwiki, see bug 61663
- Will crash if you do captcha wrong. fix in future commit

Change-Id: I6fe8cba510b2ef3b05fe937ea1dcd6090c8e5a06
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392921185,1392922264,2760626227001fab518534fdf80955eed6c81aca
2760626227001fab518534fdf80955eed6c81aca,27606262,Don't pass title to RefreshCaptcha when Site would do,"Don't pass title to RefreshCaptcha when Site would do

Change-Id: Idad201d6e7d6e511f4aa803ab9f2f368308c0a7e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392889012,1392890151,efe024ba36964569a2e039a4984f48369784b1f1
efe024ba36964569a2e039a4984f48369784b1f1,efe024ba,Refactor out code that did non-empty validation,"Refactor out code that did non-empty validation

Change-Id: Ibea715f26cc3a2602a109ff46519e4806eaf4f23
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392888947,1392890146,f15204b47f7069ba233219e2b7977c609c589c88
f15204b47f7069ba233219e2b7977c609c589c88,f15204b4,Refactor captcha handling into its own Handler,"Refactor captcha handling into its own Handler

Change-Id: If25368484eed89ae8f00f203e0be7e23b640d779
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392886000,1392886028,255ec76b816a6f59a3cda99902b6edfcc2424216
255ec76b816a6f59a3cda99902b6edfcc2424216,255ec76b,Separate captcha layout into own file,"Separate captcha layout into own file

Change-Id: I3d2bdef1f722eacea4e350bd4c5463fb1d28cbe4
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392842844,1392842844,48c5d2f2fd40abd9b2700bd552367fb5615012a2
48c5d2f2fd40abd9b2700bd552367fb5615012a2,48c5d2f2,Add a task to do pre-flight request for account creation + test,"Add a task to do pre-flight request for account creation + test

Change-Id: I486bd9dc70a0cfddf6a1c280f0f6e8fa43245730
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392842226,1392842360,1dfafe5f0221bc08ccd70a0b48c0b58adcdfbff4
1dfafe5f0221bc08ccd70a0b48c0b58adcdfbff4,1dfafe5f,Add stub Create Account activity,"Add stub Create Account activity

Change-Id: I54f3efad4e48ec3b7220c301ed2b0c81a8e3f90c
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392808546,1392842355,97bf0b4a05b9cf06856809d31b27fae9a1d2aa94
97bf0b4a05b9cf06856809d31b27fae9a1d2aa94,97bf0b4a,Hide search results when emptied,"Hide search results when emptied

Bug: 60711
Change-Id: I863b5a25c7041df68f6d02c1db16bc5c426f1c55
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392738979,1392740434,36d457b432fc4ff2fb1da88e2c10f652d5e0294f
36d457b432fc4ff2fb1da88e2c10f652d5e0294f,36d457b4,Cleanup imports to prefer .* imports,"Cleanup imports to prefer .* imports

Change-Id: I12c9a59f4b3fd332d9fbe825f894bd789d29410b
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392720701,1392740434,c13fadc950d40f3341465084539bc150b88db79d
c13fadc950d40f3341465084539bc150b88db79d,c13fadc9,Show a message when no items are present in History,"Show a message when no items are present in History

Change-Id: I7aa0f88de1beac0386a9a975e46c3973fa705934
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392669396,1392740434,df5a682da31864c55428bef1e3f78441f35eefcc
df5a682da31864c55428bef1e3f78441f35eefcc,df5a682d,Display message when no saved pages exist,"Display message when no saved pages exist

Bug: 60708
Change-Id: Ib64bd23c84c7a840838472ac408a95143d7dbb1a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392668992,1392740434,89c9da2f86bd96063032f7153de6de4f2bdd7b9b
89c9da2f86bd96063032f7153de6de4f2bdd7b9b,89c9da2f,Hide keyboard when edit activity exits,"Hide keyboard when edit activity exits

Bug: 61326
Change-Id: I72b02772181688f52cea266a4a37c18792f4b637
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392644312,1392740434,2e49af7e370261ebacc4bca4220988311e681a17
2e49af7e370261ebacc4bca4220988311e681a17,2e49af7e,"Merge ""Do not crash when user has changed password""","Merge ""Do not crash when user has changed password""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1392740394,1392740394,"1586073eb07903a81c8693f5acb40326bef24ec2,3918696686dbb3ea50698dfe28d93f46cee15514"
3918696686dbb3ea50698dfe28d93f46cee15514,39186966,Do not crash when user has changed password,"Do not crash when user has changed password

Change-Id: Ieeb10f0e6d053d8e0187c90a61e4de9023c4c36c
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392392158,1392740205,91fc2cb6479ad11bd840a4b84d378ad08d8ff501
1586073eb07903a81c8693f5acb40326bef24ec2,1586073e,Hide keyboard when login screen exits,"Hide keyboard when login screen exits

In a sane system there must exist another way of doing this.
I hope Android is sane

Bug: 61325

Change-Id: I24ed794e0a64a5883786ddb8f41aa199b3354311
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392643239,1392740061,91fc2cb6479ad11bd840a4b84d378ad08d8ff501
91fc2cb6479ad11bd840a4b84d378ad08d8ff501,91fc2cb6,Re-login if session cookies have expired,"Re-login if session cookies have expired

Change-Id: I45649e5a0af172d4aa9f7187044d92b3f706a9cb
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392391465,1392391465,c6da8f4543cd6ee9a959dc2fb4fc9a2c69703fa8
c6da8f4543cd6ee9a959dc2fb4fc9a2c69703fa8,c6da8f45,Fix crashes with NavDrawer when running in Strict Mode,"Fix crashes with NavDrawer when running in Strict Mode

Change-Id: I8ecdbcf81c1db284e40e07bdd9fe20bc11fe947a
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392391392,1392391392,a2045ed3d71c5d81302b177561ba97e06f26b1a1
a2045ed3d71c5d81302b177561ba97e06f26b1a1,a2045ed3,Clear anon tokens (if any) once you log in,"Clear anon tokens (if any) once you log in

Change-Id: I0c90a7f50018f863fe1c793d7ca9cc51803700ff
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392329208,1392329208,a22d74576e46e897fb32dc238ca7d05f9bb7df2c
a22d74576e46e897fb32dc238ca7d05f9bb7df2c,a22d7457,Do not keep re-creating fragments when we rotate phone,"Do not keep re-creating fragments when we rotate phone

Change-Id: I53cad7441ffeabbb9c0774ab12de1598acfe2507
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392325403,1392325452,a0e457b62d704c4473df4feacea4e1d3b0380530
a0e457b62d704c4473df4feacea4e1d3b0380530,a0e457b6,Add 'Agora' styles and set them to be the default,"Add 'Agora' styles and set them to be the default

Further color tweaking will happen later.

Change-Id: I590b03e3a665c07178f0b0139c04cdeae9f7ae83
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392240781,1392240909,16c45a336752195f0dfda15b1a8b0520a77fe451
16c45a336752195f0dfda15b1a8b0520a77fe451,16c45a33,Display actions properly in Edit Window,"Display actions properly in Edit Window

Change-Id: Ib01b0a850ee4f8984f43a0b70ac9c3136c78c8bf
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392223808,1392223808,1088cb7b7463123a609c62713209b604fed4eff1
1088cb7b7463123a609c62713209b604fed4eff1,1088cb7b,Fix compilation errors due to sig change,"Fix compilation errors due to sig change

Change-Id: Ic05a84d4996adbcd18f590f95fefebcc38cf02b0
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392223787,1392223787,714e378dc3dcd21cd015d8d875f2d287472970fa
714e378dc3dcd21cd015d8d875f2d287472970fa,714e378d,Fix cookie handling to support .wikipedia.org cookies,"Fix cookie handling to support .wikipedia.org cookies

This makes centralauth work - you can login on any wiki and then
just edit on any other wiki.

Change-Id: I52a2cd3d8990edfca05376797765e9e3fe058ea0
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392210931,1392210931,5f27b8cca10780db9598fa27350fe2329fa00679
5f27b8cca10780db9598fa27350fe2329fa00679,5f27b8cc,Make 'Done' perform login action,"Make 'Done' perform login action

Bug: 61261
Change-Id: I461696aeddef1e717c3e831b3879c804bdba0a93
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392202186,1392202186,b685b9bb20771984aed493f7f4a5dee611014af8
b685b9bb20771984aed493f7f4a5dee611014af8,b685b9bb,Handle back button properly when no more pages are left,"Handle back button properly when no more pages are left

Change-Id: I8c5dd5366cff872530b331b42ed5892929d7bb0b
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392069157,1392069157,1e01b057da4ec4f15393a1528700e9d1a0654f44
1e01b057da4ec4f15393a1528700e9d1a0654f44,1e01b057,Add 'Log Out' functionality,"Add 'Log Out' functionality

Also stores username and password in SharedPreferences.

Change-Id: I0151b1169b6c4fb5d00b4d69c2042a71067a4e78
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1392067973,1392068057,732e0dbaf2770dbcac656352efa364507b370028
732e0dbaf2770dbcac656352efa364507b370028,732e0dba,Cleanup the croutons when you destroy,"Cleanup the croutons when you destroy

Change-Id: Ia5acae25517bb8afb23b9238d82a70966e51aed6
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1391800043,1391804147,3357cd47d60de73681c2a21cc361f7c7f2126c06
3357cd47d60de73681c2a21cc361f7c7f2126c06,3357cd47,Add notification in login screen if there is no network,"Add notification in login screen if there is no network

Change-Id: I30ba9a1ecd0dc23726f145b7d14c69d3a034436e
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1391799876,1391799876,8b76cc0f5a4ec6de23880eee12a9b1a383726e56
8b76cc0f5a4ec6de23880eee12a9b1a383726e56,8b76cc0f,Handle login errors returned when logging in,"Handle login errors returned when logging in

Use Croutons to display error messages

Change-Id: I0565b18a531581f9e6a5c8209b1352b7c4378fb8
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1391779495,1391779495,b22accf83a497320995aa9ab300b0a3c269a986d
b22accf83a497320995aa9ab300b0a3c269a986d,b22accf8,Do not show article text in other languages page,"Do not show article text in other languages page

Bug: 60714
Change-Id: Idf9f9b3367d15de592e5aa26acbb4070380cf19d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1391762887,1391762887,ab876e18784e72b019fe224ff3670306fdfa5176
ab876e18784e72b019fe224ff3670306fdfa5176,ab876e18,Add basic Wikipedia Zero detection.,"Add basic Wikipedia Zero detection.

* If on Wikipedia Zero participating carrier, toast at startup.
* If NOT on Wikipedia Zero participating carrier, don't toast.
* Subsequent add or drop of network connection causes toast only when critical.
* This version uses uniform English ON / OFF verbiage.
* Future: Align on i18n approach.
* Future: iterate on how to show carrier baner TEXT from i18n system.
* Future: Design to style ""W"" slighlty different in W0 mode.
* Future: Intercept offsite links in W0 mode.
* Future: Show mini tutorial / dialog first 3 times (or less if pref changed) for offsite links in W0 mode. Shows FAQ link.
* Future: In-app user pref, default checked, to ""Warn when leaving Wikipedia Zero"". Shows current status plus FAQ link.

Change-Id: I6b8e952141e970a6a65b89756efaa125a91b5300
",,,,dr0ptp4kt,abaso@wikimedia.org,YuviPanda,yuvipanda@gmail.com,1389922645,1391718819,27d9b2c52012505a43361cfa5e3d8a0c6ed55e27
27d9b2c52012505a43361cfa5e3d8a0c6ed55e27,27d9b2c5,Store edit tokens properly,"Store edit tokens properly

- Also hooks up 'Login' button to actually log in

Change-Id: I5e21c51cc8c7d79933519015c27ae45af1fb5754
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391633546,1391634161,a68e99131adad89f3df90f49e8ec632369d3802b
a68e99131adad89f3df90f49e8ec632369d3802b,a68e9913,Add FetchEditTokenTask + check for LoginTask,"Add FetchEditTokenTask + check for LoginTask

Change-Id: I0a2b8e032207c43bc418c9ee75ebd968ab445598
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391513685,1391546695,967f9857b2d4233b0dfe64f05295d2ee8cbe0e9d
967f9857b2d4233b0dfe64f05295d2ee8cbe0e9d,967f9857,Add a LoginTask + Tests,"Add a LoginTask + Tests

Need to figure out how to deal with CentralAuth

Change-Id: I7dfe5233e860d64ed2ceb8381a9d7b2949599ea6
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391512216,1391546695,37ce9bab5d0bb4de8001728daf0a22f279041594
37ce9bab5d0bb4de8001728daf0a22f279041594,37ce9bab,Add a persistant cookie store backed by SharedPreferences,"Add a persistant cookie store backed by SharedPreferences

- Does not respect cookie expiry
- Does not respect path restrictions - only domain restrictions
- Needs to have a way to tell the API to not send cookies
  (to prevent cache fragmentation)

Change-Id: I57ae2b15528dddd4ef992393f194e0f8bf52762f
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391506749,1391546686,6056e3642957a63dbf201f59dd06e0983fb01baa
6056e3642957a63dbf201f59dd06e0983fb01baa,6056e364,"Merge ""Make linkactions into its own module""","Merge ""Make linkactions into its own module""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1391448612,1391448612,"f93d30372829d067ee2b4de06b0310933c8176f9,de32f8772b83546a7437f9c1f6aaa796622320e1"
f93d30372829d067ee2b4de06b0310933c8176f9,f93d3037,"Merge ""Add 'test' entry to list of wikis""","Merge ""Add 'test' entry to list of wikis""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1391448096,1391448096,"6ea011842caac21da18908fb755f3606bbf61f32,b3b8bb432fb7de000c051ac6fc74c0f5f25f079d"
de32f8772b83546a7437f9c1f6aaa796622320e1,de32f877,Make linkactions into its own module,"Make linkactions into its own module

Makes reuse easier
Change-Id: I8a6595594909e58af2e6f2df831ca5c3ac8aaefd
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391446222,1391447057,b3b8bb432fb7de000c051ac6fc74c0f5f25f079d
b3b8bb432fb7de000c051ac6fc74c0f5f25f079d,b3b8bb43,Add 'test' entry to list of wikis,"Add 'test' entry to list of wikis

Makes it easier to test editing functionality.

Change-Id: I1ee24b0eabd965e0d4970af4f0575b0ffefed6d2
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391443135,1391443135,20365b9dcd5b4d5deb0478e6ef42d52f12ecc2f2
6ea011842caac21da18908fb755f3606bbf61f32,6ea01184,Get rid of tabs in the pom.xml files,"Get rid of tabs in the pom.xml files

- To be consistent with rest of the project, which uses 4 spaces
- Also tabs suck

Change-Id: Ifa59413fa88c0e64d7763b4e0cf1190c0d749836
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391261959,1391436174,e35544d91d53134ae44f614e48cc1ef4834506de
e35544d91d53134ae44f614e48cc1ef4834506de,e35544d9,Use AppCompat for ActionBar everywhere,"Use AppCompat for ActionBar everywhere

A small step towards making this work on Android 2.3 :)
Does not work yet in 2.3, though

Change-Id: I3f85b229d03870e0a690bcb6c7125d0943537334
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391261862,1391436174,20365b9dcd5b4d5deb0478e6ef42d52f12ecc2f2
20365b9dcd5b4d5deb0478e6ef42d52f12ecc2f2,20365b9d,"Use wikiCode everywhere, in favor of langCode","Use wikiCode everywhere, in favor of langCode

- Too hard to map them around
- For cases where we have an android language but no wiki (rare),
  we just default to a safe English
- Explicitly ignore 'got' language, since it crashes all the
  things

Bug: 60745
Change-Id: I28a4f185eefea367a9ea4ca86538f0d049ee0290
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391378098,1391378390,ac79fd13491c55fb9d8388b9d2c8a3cced671a66
ac79fd13491c55fb9d8388b9d2c8a3cced671a66,ac79fd13,Use hard-coded language display names when displaying language,"Use hard-coded language display names when displaying language

Wikipedia's ideas of languages and Android's don't exactly match
up and that causes issues everywhere. Let's just pretend Android's
doesn't exist, and we're all good :)

The script that generates the CSVs now requires the unicodecsv
module to be installed.

Bug: 60745
Change-Id: I1da4bb6ea32cdcf2ecf8536d92037761b6cd37f0
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391376697,1391377233,95f623ea15eaba026cf391f1e26e52e3613b3a58
95f623ea15eaba026cf391f1e26e52e3613b3a58,95f623ea,Normalize Site domains,"Normalize Site domains

Makes a failing unit test pass.

Change-Id: Iac29affc82d9dcc042405f26d66f08e6911395a5
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391251438,1391251506,94c04ac4b0fb13ede1d23e849f9b158f3a1d9e21
94c04ac4b0fb13ede1d23e849f9b158f3a1d9e21,94c04ac4,Fix maven dependencies,"Fix maven dependencies

- Uses repository hosted on toollabs
- mvn install now runs tests appropriately
- One test fails, is fixed in later commit

Change-Id: Ie495bebadd8f9f83e789456306af67c7a5e7d8a3
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391250116,1391251494,af64fdecb8360c006bf807efe8eb84f14b397701
af64fdecb8360c006bf807efe8eb84f14b397701,af64fdec,"Add Login Activity, link from Left Nav","Add Login Activity, link from Left Nav

- Simple stub, does not do anything
- Also adds StyledCheckBox

Change-Id: I316a42098619202256ded314839d370b60d8d652
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391200138,1391200173,a6b566f2ae18e8f348586f6649736853afdd8b5a
a6b566f2ae18e8f348586f6649736853afdd8b5a,a6b566f2,"Merge ""Make the UI use OpenSans too""","Merge ""Make the UI use OpenSans too""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1391191019,1391191019,"cb0ac4d6eb568056a8aa7054ee3ce798efe26f6a,d3c09111335b47521ef1ac014283be10f7f6d19f"
d3c09111335b47521ef1ac014283be10f7f6d19f,d3c09111,Make the UI use OpenSans too,"Make the UI use OpenSans too

Both May and I think this is ugly, but better to have it
'in your face' than hidden away

Change-Id: I8199e5faa7317ddd597f4fe8e002affe9fbd7994
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1391138080,1391190829,5598c7c7a675a6553630da7ce6d2fbd8a4e1ff34
cb0ac4d6eb568056a8aa7054ee3ce798efe26f6a,cb0ac4d6,Turn off AutoSuggest/AutoCorrect for Captcha,"Turn off AutoSuggest/AutoCorrect for Captcha

Change-Id: I9c1843895d695662cc71dc13d73227f2d4a7ee7c
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391164514,1391175915,5598c7c7a675a6553630da7ce6d2fbd8a4e1ff34
5598c7c7a675a6553630da7ce6d2fbd8a4e1ff34,5598c7c7,Fix minor jshint warning,"Fix minor jshint warning

Change-Id: I97f1c8f02ecf82095256679abe04862d8c45e367
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391111655,1391175909,558a59f81a787e72ea37062b9a5d0c26a46093fe
558a59f81a787e72ea37062b9a5d0c26a46093fe,558a59f8,Clear all inline styling from AF warning messages,"Clear all inline styling from AF warning messages

They are at least readable now.

Change-Id: I89f48f580308fde3f9a7af3194b4840455c456b9
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391108169,1391108169,7bea249d7940666b4e247909d3464cd63b6380ec
7bea249d7940666b4e247909d3464cd63b6380ec,7bea249d,Make the transformer a proper extensible module,"Make the transformer a proper extensible module

Change-Id: I6fd88dc390bc467a2879e75518c4095e77f231dc
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391107781,1391107781,47cb72d21ced760b249eed15e28084f1a451a7c3
47cb72d21ced760b249eed15e28084f1a451a7c3,47cb72d2,Handle Captcha reload appropriately,"Handle Captcha reload appropriately

Change-Id: Ie851063c24c0875ebd58661396377ce0fd4e422c
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391096538,1391096566,065b6e8f7c675e1f84d43bb8d020c63f0cad5f4f
065b6e8f7c675e1f84d43bb8d020c63f0cad5f4f,065b6e8f,Display appropriate warning when AF returns a message,"Display appropriate warning when AF returns a message

- Links in AF messages still don't work, need to be sorted out.
- Also makes sure that cookies are persisted across requests

Change-Id: Ia95255309eee5fdab2040f4dc9aba76e0f9715e2
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1391028901,1391093236,4f6c6e0bf20cc0581d384c63891c5495476ff497
4f6c6e0bf20cc0581d384c63891c5495476ff497,4f6c6e0b,Add AbuseFilterEditResult & a test to trigger it,"Add AbuseFilterEditResult & a test to trigger it

App still crashes when an abusefilter error is returned :)

Change-Id: I7c8fb8d41be73d74ab979a6029945fea29ee4bc1
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1390915863,1390990577,3a0585c3b81ebd7556851d8584541446c3b69c95
3a0585c3b81ebd7556851d8584541446c3b69c95,3a0585c3,Make CaptchaResult depend only on id,"Make CaptchaResult depend only on id

Change-Id: I1058f71da5bb9004215d3489cffd86bce8096932
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1390857522,1390990577,f8dcfedbb6d506e8886df87e34ee94217ee4aa3e
f8dcfedbb6d506e8886df87e34ee94217ee4aa3e,f8dcfedb,Slide the keyboard down on search result item tap.,"Slide the keyboard down on search result item tap.

* Makes more of the article readable faster.
* Appears to potentially fix a screen rotation bug as well.
* For now, search term stays in search bar in case it was a mis-tap.

Change-Id: Ib56432c3ed1ee058c234eca92a3747c655664117
",,,,dr0ptp4kt,abaso@wikimedia.org,Yuvipanda,yuvipanda@gmail.com,1390723117,1390983349,532ebcbc76e9406f236f31bedf53b0d860263755
532ebcbc76e9406f236f31bedf53b0d860263755,532ebcbc,Make captcha text box single line only,"Make captcha text box single line only

Change-Id: Ia84750559b42137825064530fcb2b37abc681892
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1390849504,1390849504,02e0f86c670c158b55be5e510f8f301244cb32fa
02e0f86c670c158b55be5e510f8f301244cb32fa,02e0f86c,Fix loading spinner not spinning,"Fix loading spinner not spinning

Weird, since I remember that this used to work without the
prefixes being required.

Change-Id: Ie95ee07b54601731f7a64e8c6dcf1111b6bfc0ee
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1390817609,1390817609,91307da5eccbb5114c47698f4774c03d25953c28
91307da5eccbb5114c47698f4774c03d25953c28,91307da5,Handle Captchas returned when editing,"Handle Captchas returned when editing

- Captcha needs to be scaled up. Picasso has an issue with reading
  our captcha images for some reason if we try to resize them:
  https://github.com/square/picasso/issues/249#issuecomment-33259920
  This will need to be worked around

Change-Id: Iadce6af2f1dc66bcf41adc19363ca4d28ce56971
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1390767971,1390816368,2302b0bbee61cbe20e59500d68d294fcd5da8d4c
2302b0bbee61cbe20e59500d68d294fcd5da8d4c,2302b0bb,Add a CaptchaEditResult with data about the Captcha,"Add a CaptchaEditResult with data about the Captcha

Also adds a test that triggers a Captcha.

Change-Id: Ic5331e2356ceff2b40ef95833305fb407c3392a8
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1390568429,1390568461,a5d132c5b3624ed6fe26ee98615b420bd9bc57e0
a5d132c5b3624ed6fe26ee98615b420bd9bc57e0,a5d132c5,Start using an object hierarchy to deal with Edit Results,"Start using an object hierarchy to deal with Edit Results

- Next commit adds CaptchaEditResult
- Eventually will add ProtectedEditResult, AbuseFilterEditResult,
  UserBlockedEditResult and so forth.
- Goddamit I wish Java had proper Algebraic Data types :(

Change-Id: I927ffe50722b4755c87ed7cc82eb44371c4e1f52
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1390567319,1390567408,207e6bfa6f0586fc531a4d029d802a8d178f3da8
207e6bfa6f0586fc531a4d029d802a8d178f3da8,207e6bfa,Remove superfluous files in assets dir,"Remove superfluous files in assets dir

Change-Id: I960c043f078576aee4cf2ed152ec6d906df7c802
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1390561953,1390561993,ead77ca3e8b810bfd5aa92f86515b4cf9cdb70a2
ead77ca3e8b810bfd5aa92f86515b4cf9cdb70a2,ead77ca3,"Merge ""Minor stylistic fixes to make use of LESS features""","Merge ""Minor stylistic fixes to make use of LESS features""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1390341206,1390341206,"9fafab1f6fe4887efe4202852f90ed5d59e67a99,d96ac57bf850f59a09ca824f58e3aa8b2a378690"
9fafab1f6fe4887efe4202852f90ed5d59e67a99,9fafab1f,"Merge ""Mark all EditTexts to have the 'Done' IME Option""","Merge ""Mark all EditTexts to have the 'Done' IME Option""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1390341123,1390341123,"a4b2c524f8cb9c886f0ab4b2478cdb2981ab0f6b,431c41f8ba2a0b59053bdf6e26eb2a52012e1ef7"
d96ac57bf850f59a09ca824f58e3aa8b2a378690,d96ac57b,Minor stylistic fixes to make use of LESS features,"Minor stylistic fixes to make use of LESS features

Change-Id: I1445658e53810bb11244e6c1df2689ab2ca6e045
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1390328496,1390340986,431c41f8ba2a0b59053bdf6e26eb2a52012e1ef7
431c41f8ba2a0b59053bdf6e26eb2a52012e1ef7,431c41f8,Mark all EditTexts to have the 'Done' IME Option,"Mark all EditTexts to have the 'Done' IME Option

Change-Id: Iff9efeba0e4d309e817c1246278671a8104198ef
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1390327637,1390340980,f1517f28dde89674cb3a5edd74f9b9ad11a2fad5
a4b2c524f8cb9c886f0ab4b2478cdb2981ab0f6b,a4b2c524,Use OpenSans WebFont for primary content,"Use OpenSans WebFont for primary content

This does not adversely affect performance, since we are
loading the font locally

Change-Id: I003c70c7dcaa31069998965f5a21af6ade6eba4e
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1390250650,1390324198,4d97f2112e0daa64f854a933c0335cb5f1c7bb64
4d97f2112e0daa64f854a933c0335cb5f1c7bb64,4d97f211,Make CommunicationBridge fully asynchronous,"Make CommunicationBridge fully asynchronous

- Removes ability to return JSON from messages
- This is because we use prompt to communicate from JS -> Java,
  but prompt blocks!
- This still breaks saved pages, because they use Java to
  calculate MD5. Fixed in later commit

Change-Id: I19edfba3f872047f274fbde75dfaf2c9f92e06bf
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1390246888,1390269320,f1517f28dde89674cb3a5edd74f9b9ad11a2fad5
f1517f28dde89674cb3a5edd74f9b9ad11a2fad5,f1517f28,Start using LESS instead of CSS directly,"Start using LESS instead of CSS directly

- No LESS features being used... yet!
- grunt by default now does LESS compilation too

Change-Id: I4fb8ba8e4cba90f0f8e04c883c19b127deac23c1
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1390244359,1390269136,db768a576361c5ae736b634df3095c0aebf2e35c
db768a576361c5ae736b634df3095c0aebf2e35c,db768a57,Moved section display JS code to its own file,"Moved section display JS code to its own file

Change-Id: I820bb1a94378ff5181ae9cbb5a60718dc4e0ba35
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1390229582,1390268970,bb2a1f13fdea5153b86080ea11b5cf452feb8e36
bb2a1f13fdea5153b86080ea11b5cf452feb8e36,bb2a1f13,Organize files into js and css directories,"Organize files into js and css directories

Change-Id: If47f793acd9e2ded3cdd027c24aab561d9931523
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1390228177,1390268749,88f507c8a8844b23a5df96e65d414bb5281fd68f
88f507c8a8844b23a5df96e65d414bb5281fd68f,88f507c8,Add a 'watch' command to grunt to simplify development,"Add a 'watch' command to grunt to simplify development

This runs the grunt build tasks whenever the master files are modified,
while the 'grunt watch' command is running.

Change-Id: Ibd530dc12008bfeb010e986cdc3d92e611fe7a5d
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1390227057,1390268722,2ea5b6e4b96cf6e416f170065f84a4b6947ae960
2ea5b6e4b96cf6e416f170065f84a4b6947ae960,2ea5b6e4,Move js files to separate directory,"Move js files to separate directory

Everything in assets/ is included by default. This makes sure
that only the files that are actually needed are in the assets/
folder. A grunt copy task is defined to do that.

README.md is updated with new directions for updating these files.

Change-Id: I00dc36aa09c8245950d2533ff7bed34011fa35e8
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1390226204,1390268110,569e0755f1f6ae3b5a8a3398c33125ca55044c45
569e0755f1f6ae3b5a8a3398c33125ca55044c45,569e0755,Moved link related actions to a separate file,"Moved link related actions to a separate file

Change-Id: I595bdd5011de1f4ebe25faea16f68afcc8012767
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1390224953,1390267676,63bfab51776a65424758f71992fc1d18b616a04a
63bfab51776a65424758f71992fc1d18b616a04a,63bfab51,Move handleMessage out of bridge into global namespace,"Move handleMessage out of bridge into global namespace

Since handleMessage shouldn't be called from JS, having it
be part of the bridge interface in JS is confusing

Change-Id: I560957d89c1927320c6ad57639cc0dbcdc90531f
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1390222548,1390267627,6cee9d4cb6144fc8ff03df15f17ee5ba752975ed
6cee9d4cb6144fc8ff03df15f17ee5ba752975ed,6cee9d4c,Add jshint support & fix jshint errors,"Add jshint support & fix jshint errors

Slightly modified version of the .jshintrc file from
mediawiki/core.git

Change-Id: I18a1aa803e556be33813c32f711c467aeead0a38
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1390221699,1390267377,81de3f307a834101665bb7f553460c4f89036710
81de3f307a834101665bb7f553460c4f89036710,81de3f30,Start using browserify for the JavaScript,"Start using browserify for the JavaScript

- Contains gruntfile to do the compilation steps
- Unit tests have been separated out into bundle-test.js
- Adds package.json to help people get setup easily
- Adds directions to README.md on how to run this

Change-Id: Ibec6889e7a549d9107e21cf4cf77caa940702fc6
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1390219160,1390266500,be2711fd50d94f779158eb356c58dd2d8e90f0b2
be2711fd50d94f779158eb356c58dd2d8e90f0b2,be2711fd,Display message when no search results are found,"Display message when no search results are found

Change-Id: I02ae65f4101ac578c48ae9f3be0060f313f17c72
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389992338,1390025427,a1435c5d30e611812be0bd60dad5a08923eb81a8
a1435c5d30e611812be0bd60dad5a08923eb81a8,a1435c5d,Minor tweaks to scrolling to a section from ToC,"Minor tweaks to scrolling to a section from ToC

Make sure that the space from the search bar to the heading
is the same as space from left of screen to heading

Change-Id: I4d95564b12be6a39a83627fed596bb77479be33a
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389989736,1390024125,9ef5fdc319b68fa6b435ed5a102c18046193f811
9ef5fdc319b68fa6b435ed5a102c18046193f811,9ef5fdc3,Minor modification to body background,"Minor modification to body background

Based on feedback from designers

Change-Id: I245439153fc27a5cfec85bef37a4165a25c98b02
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389989555,1390024125,091e97dc472ec15c01596cb620d572f8950d5b5f
091e97dc472ec15c01596cb620d572f8950d5b5f,091e97dc,Switch section headers to sans-serif. Also specify sizes,"Switch section headers to sans-serif. Also specify sizes

Change-Id: I7a4142ce060f036e70c51d831a6d4c9ef19b0152
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389989396,1390024125,8f44cda710bfe74927fc067026a9e23245f40760
8f44cda710bfe74927fc067026a9e23245f40760,8f44cda7,Increase default search count to 12,"Increase default search count to 12

Based off designer feedback

Change-Id: Icbccadb089a2ce650fdcfe4f0560aa5ef0087441
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389988193,1390024125,715073e209408caa231df531ba68cc645eb43be6
715073e209408caa231df531ba68cc645eb43be6,715073e2,Hit the API on an mdot subdomain instead of a desktop subdomain.,"Hit the API on an mdot subdomain instead of a desktop subdomain.

* Wikipedia Zero extension API eligibility check is on mdot for foreseeable future.
* API behavior generally the same otherwise, so mdot is okay instead of desktop URL.
* Other aspects of the system still use the originally provided desktop domain.

Change-Id: Ic35ebe02c1abfa11059b52b6cddf94a00f09727f
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1389990450,1389996062,dcae375c2fa830973f258fefe5211c0ec76e79a0
dcae375c2fa830973f258fefe5211c0ec76e79a0,dcae375c,Add qqq files for translation,"Add qqq files for translation

Change-Id: I947a3bfd0c9ef4c55b5bfcf0279f309742507090
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389981743,1389981743,1e93883b68e38877872802cb035eaa10e5a9af0f
1e93883b68e38877872802cb035eaa10e5a9af0f,1e93883b,Implement a rough ToC,"Implement a rough ToC

- Accessed from overflow menu
- Tap each section to go to it
- Only section levels 1 and 2 are shown
- Also adds fadeIn & fadeOut utility methods

Change-Id: I475fefb3d0652cf96b1246489935528c7736d1c6
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389952973,1389974137,2231abb17f9107c0b9e7e0031431c271444f0fbd
2231abb17f9107c0b9e7e0031431c271444f0fbd,2231abb1,Simplify sections to be not nested,"Simplify sections to be not nested

We were unnesting them in multiple places anyway.

This also means that each individual section gets sent to the
webview individually. This increases the number of cross-boundary
calls but reduces the size of each of them. Will need to verify
which one is better later on.

Change-Id: I3e8c11160f4e7c98169be303b513fd005c61bf68
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389856909,1389899300,4b0134185e7f91aada0693aa7d14e946f119e0ec
4b0134185e7f91aada0693aa7d14e946f119e0ec,4b013418,Handle URLEncoded internal page links properly,"Handle URLEncoded internal page links properly

Change-Id: I5b687e11c503df447e9e726a5858a816f1997259
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389815559,1389899294,8464fcad889964c44b4a3218beccc5a7f070986a
8464fcad889964c44b4a3218beccc5a7f070986a,8464fcad,Show error message if saving fails & offer to retry,"Show error message if saving fails & offer to retry

Also introduce EditingException to handle non-network cases of
exceptions.

Change-Id: I17b9afdb501020e41ede4b4af5b1c03422f1336b
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389794835,1389794876,7b07348a619bfd79ed9502c703d1614530488021
7b07348a619bfd79ed9502c703d1614530488021,7b07348a,Prevent race condition causing marshaller to not be registered,"Prevent race condition causing marshaller to not be registered

Only happens sometimes and only on super fast phones.

Change-Id: Id73c3f2b2e65fdfc234d6492fc240ff55d210117
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389698106,1389727365,a51639e7875bbd5343361695950ea24d60e9bed2
a51639e7875bbd5343361695950ea24d60e9bed2,a51639e7,Add loading animation to bottom of page when fetching sections,"Add loading animation to bottom of page when fetching sections

Change-Id: Ic98d51dc06b04aa87c04b492e1e59633a1150359
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389691900,1389727365,7f2975a9b1ae01b14b86d9d46d7f70d38f56d71b
7f2975a9b1ae01b14b86d9d46d7f70d38f56d71b,7f2975a9,Load sections asynchronously in the webview,"Load sections asynchronously in the webview

Makes for less stutter

Change-Id: I5d8a9a702145496b6c28eaddeaef7675f36be044
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389686110,1389727365,ccf026aa31da522d9c9ecc18b9b84ef382fb28f0
ccf026aa31da522d9c9ecc18b9b84ef382fb28f0,ccf026aa,Make Sections be backed by JSON all the time,"Make Sections be backed by JSON all the time

This lets us pass Sections into the WebView as JSON directly,
and then we can construct the HTML there as we wish.

Change-Id: Ie06f129ffe3bd92b34fdd589ecb72004de1828e6
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389646559,1389727357,d707a3d56004663b0df3194106c8983e12869c59
d707a3d56004663b0df3194106c8983e12869c59,d707a3d5,Use OkHttp for HTTP requests,"Use OkHttp for HTTP requests

Depends on I859ed2394f85d88f23416a8eeee1d8593b3fcb96

Change-Id: I3b2a0ad964e0435a6f5111c2e728538e4f65a296
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389600064,1389600064,0929ba6baf7752eeefa69b7cfd05bc0dc7de2c71
0929ba6baf7752eeefa69b7cfd05bc0dc7de2c71,0929ba6b,Add an & in edit test to test for appropriate encoding,"Add an & in edit test to test for appropriate encoding

Requires Ie698724729f2757e31ec7c05dce60bfd9f33f8db

Change-Id: I9801d47731ae1310c7c18e1da86841e1dbb14513
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389597835,1389597835,e16babbd07b22e5838562d16494e52883982516b
e16babbd07b22e5838562d16494e52883982516b,e16babbd,Show feedback when edit is saved,"Show feedback when edit is saved

Change-Id: I4b628bff94da39acb6fd7ada96809ddb68f30299
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389370674,1389384119,16985f71a50b7b8db49bd494ec9108fae962ad16
16985f71a50b7b8db49bd494ec9108fae962ad16,16985f71,Refresh page when an edit successfully completes,"Refresh page when an edit successfully completes

Change-Id: I3b9799a3914b866ff4400b0c80a88456fb91330b
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389369744,1389383186,a9edbadade88ea067837d88820ce6268334e186e
a9edbadade88ea067837d88820ce6268334e186e,a9edbada,Implement actually saving a section.,"Implement actually saving a section.

Change-Id: Id9eef5fdec925f2652feac0ad748a90cd640d0e5
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389366425,1389366425,3a1169760bc0f2768fddc566e5a939b1cdb2b9a5
3a1169760bc0f2768fddc566e5a939b1cdb2b9a5,3a116976,Add task to edit sections anonymously (+ tests),"Add task to edit sections anonymously (+ tests)

Change-Id: I9622f593d27ec7b72dd0a7e4dc4e03be601a1d4c
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389353063,1389353063,1c31ce8e8647694702ddc977ef3448ffc86d5b9a
1c31ce8e8647694702ddc977ef3448ffc86d5b9a,1c31ce8e,Minor formating fix,"Minor formating fix

Change-Id: I1ec369f0daaf0e50150f82967178aec9df05acbf
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389352962,1389352962,7744749a3de27fb50c3f2882f3f29365bff2b378
7744749a3de27fb50c3f2882f3f29365bff2b378,7744749a,Make it possible for ApiTask subclasses to override the HTTP method,"Make it possible for ApiTask subclasses to override the HTTP method

Change-Id: Id562dc1fbd488ec811abb68f9a76a58590dabb10
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389352945,1389352945,f77d8207b804cac3ac1091dd31080192010c5976
f77d8207b804cac3ac1091dd31080192010c5976,f77d8207,Add pencil edit icon tapping which opens edit section,"Add pencil edit icon tapping which opens edit section

Also added:
- Way to have different links trigger different actions in JS
- Cleanup misunderstanding / stupidity of DOM regarding attributes

Change-Id: Ia1f28adf819273a9e59405ae76efe24811776111
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389297914,1389297961,1153b1e72d9980606b2e66a70208744246989d4f
1153b1e72d9980606b2e66a70208744246989d4f,1153b1e7,Resize Edit Activity when keyboard is shown,"Resize Edit Activity when keyboard is shown

Change-Id: Ib7a7c807f59042ae01e083db4abb24a7791c4f4a
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389289719,1389289719,1b6628f396ec0905f5ecdc8c888615654dd80dcb
1b6628f396ec0905f5ecdc8c888615654dd80dcb,1b6628f3,Remove section name from title of edit,"Remove section name from title of edit

Pre-emptively abort bikeshed.

Change-Id: I9f5f3edc1d0b0cb3ee5b0e9d19417f8525bc4e91
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389284460,1389284509,675f9faff55388b91a75763cbdb8b3c51ed54f66
675f9faff55388b91a75763cbdb8b3c51ed54f66,675f9faf,Handle errors & show progress for Edit Sections,"Handle errors & show progress for Edit Sections

Change-Id: I5c7ff145360bfd465deeb8980be3e90433a6b8f0
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389258620,1389258620,25221eaf14b05953913c3e88689556ebff61eff7
25221eaf14b05953913c3e88689556ebff61eff7,25221eaf,Show wikitext for section when section header is tapped,"Show wikitext for section when section header is tapped

To do:
- Needs an icon to trigger the editing
- Should properly work even before the entire page has been loaded

Change-Id: I5308c119391394c8a6b714ff6171ec37fa0512fe
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389211809,1389212357,e57b3e636f7b8ad8a52cf64ce6b1024a000df595
e57b3e636f7b8ad8a52cf64ce6b1024a000df595,e57b3e63,Add utility method to find a section with a given id (+tests),"Add utility method to find a section with a given id (+tests)

Change-Id: Id85c2a9dce1780e5a52500aa1d9dceea7789a025
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389207719,1389207719,46e2ec097351b2985565025e1bbabffe47c69b98
46e2ec097351b2985565025e1bbabffe47c69b98,46e2ec09,Add a task to fetch a section's wikitext (+ test),"Add a task to fetch a section's wikitext (+ test)

Change-Id: Ibcfcea9418a09637bf7c14d4ccd29c258e7514df
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389190437,1389204289,2088b3df274fd31c28baa6193c937046c04b98a6
2088b3df274fd31c28baa6193c937046c04b98a6,2088b3df,Modify language generation script to make JSON for iOS,"Modify language generation script to make JSON for iOS

Change-Id: Ib5aec2f6cfcb5bd1187cf8863ecd50f1b1a2d20c
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389163488,1389204283,0d03f56b21ca0d636360e2e0db838469a9c21f38
0d03f56b21ca0d636360e2e0db838469a9c21f38,0d03f56b,Move Page & Search related things into a package,"Move Page & Search related things into a package

Change-Id: I8f008d42db6ffe98401bb1ba18627f9d9741f6b3
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389091361,1389122540,b646a9560ad6b99f8bbcf4f0ce978ba29c2bd1f2
b646a9560ad6b99f8bbcf4f0ce978ba29c2bd1f2,b646a956,Move preferred language to top of languagelinks,"Move preferred language to top of languagelinks

Change-Id: Ib7645a3083086adfb799a74cd27e092ddbd0c15a
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389090133,1389118349,3afcf8574bf65c620e578ff99801dd587c4b600a
3afcf8574bf65c620e578ff99801dd587c4b600a,3afcf857,Implement type-ahead filtering for language links,"Implement type-ahead filtering for language links

Change-Id: I0b1b345b8cfa069d35190ff3f084d2e26a111693
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389087912,1389118343,f25b5faf40fcc51e47d3a81dcc601093025a204e
f25b5faf40fcc51e47d3a81dcc601093025a204e,f25b5faf,Tapping language link now opens appropriate article,"Tapping language link now opens appropriate article

Change-Id: Iab405ae57a9563c3251405aa618efe2652b993b3
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389087142,1389087142,fdb3d64e24db3c56d59f2d5913bea5bf709b4e6e
fdb3d64e24db3c56d59f2d5913bea5bf709b4e6e,fdb3d64e,Setup labels for the Settings & LangLinks activities,"Setup labels for the Settings & LangLinks activities

Change-Id: I06dee78982af6b6f4a4977fd083c970550f09927
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389086834,1389086834,fd0df9f43b00ee42a63dec3d1ad9785bdaae35ba
fd0df9f43b00ee42a63dec3d1ad9785bdaae35ba,fd0df9f4,Enable 'Up' arrow in LangLinks Activity,"Enable 'Up' arrow in LangLinks Activity

Change-Id: I1b61821b4d3e90357569e7c1197bfad7e28fc97c
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389086823,1389086823,ef054abd22e5889c8174a8cbbe8374fb0dedaf80
ef054abd22e5889c8174a8cbbe8374fb0dedaf80,ef054abd,Change namespace to org.wikipedia,"Change namespace to org.wikipedia

Matches the current app's namespace, and hence will replace it.

Change-Id: I65c4d190e5ed43f51833d74164a5dde60350b65d
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389086634,1389086634,22fd8e2da1f6f9ddbe286e00e729ae0dab689ec7
22fd8e2da1f6f9ddbe286e00e729ae0dab689ec7,22fd8e2d,Show other language links for current article,"Show other language links for current article

Change-Id: I954242871d3c6cfb328cbbb449349c2148111821
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389085335,1389085844,8bfb201a5623c129101d5b4c6c37f90a4349512d
8bfb201a5623c129101d5b4c6c37f90a4349512d,8bfb201a,Vary the in-memory search results cache across languages too,"Vary the in-memory search results cache across languages too

Change-Id: I692bc997832f0c2b53f4be584a8c0012d44c99e2
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389036254,1389036254,e49ffa6eefa1d7ca64e65e0cad35ffaa0a89f3bb
e49ffa6eefa1d7ca64e65e0cad35ffaa0a89f3bb,e49ffa6e,Add ability to switch to different language wikis,"Add ability to switch to different language wikis

- Adds a Settings Activity
- Adds script to generate list of wikis,
  sorted based on number of 'good' articles
- Ability to filter languages by typing into
  a textbox
- Language choice defaults to UI language.

Change-Id: Id354bb70b498a7f0d405eed956fee5cb2e2c61d4
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1389002742,1389035898,44df2b6338dd7b4dfc5fef12fcb1534fecc3599d
44df2b6338dd7b4dfc5fef12fcb1534fecc3599d,44df2b63,"Merge ""Update README for build requirement.""","Merge ""Update README for build requirement.""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1389021587,1389021587,"9128e2fff648ccc2c4bb714ed2558105c2cd79b8,821530ab44c2a9201af3d8548831d4b0ca6b0744"
9128e2fff648ccc2c4bb714ed2558105c2cd79b8,9128e2ff,Rename xml ids to use underscores,"Rename xml ids to use underscores

XML Files cannot have caps in them, so we must use underscore there.
Since R.layout.* is just the names of the XML files, and they are
all underscore separated, use underscore separation for ids too.

Change-Id: I3eab7b2546a67ff5ec8886a0b710f398e2bc20a7
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1388945642,1388945642,2d4f70d29e95be3e239c6a13e9f040d5158a766c
821530ab44c2a9201af3d8548831d4b0ca6b0744,821530ab,Update README for build requirement.,"Update README for build requirement.

Change-Id: Ie7680786b1e023564b8dfc51b491798123b495e7
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1388714936,1388776703,2d4f70d29e95be3e239c6a13e9f040d5158a766c
2d4f70d29e95be3e239c6a13e9f040d5158a766c,2d4f70d2,Show network error only if it is actually a network error,"Show network error only if it is actually a network error

Throw a runtime exception otherwise

Change-Id: I9c0d34c2f3f2b26f38bdbf7c34705becf0376d0e
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1388029798,1388029798,f2ffa4b5f01df6f0f90193d75a162c5017db81ea
f2ffa4b5f01df6f0f90193d75a162c5017db81ea,f2ffa4b5,Increase number of threads for Searching,"Increase number of threads for Searching

Improves apparent performance when someone is typing slowly.

Change-Id: Iceb24a4d900a8b7bc176c16796fcf94e9fb5922c
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1388021978,1388021978,5c2ecab0040bb222b0ccabf321a9b6c88487e3ea
5c2ecab0040bb222b0ccabf321a9b6c88487e3ea,5c2ecab0,Refactor transition animation code to avoid duplicates,"Refactor transition animation code to avoid duplicates

Change-Id: Ib2ced3c9c5d9256c0ba5687c58d34ac03b2df94c
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387936482,1387936482,518ba9f1cf8c940600f8baf74e75a40841853a5f
518ba9f1cf8c940600f8baf74e75a40841853a5f,518ba9f1,Display attribution & License text at the bottom of each page,"Display attribution & License text at the bottom of each page

Also has a bunch of other major changes:

- Changed the way how ApiTask works, to make it possible for
  child classes to override the params being sent to the server
- Added a PageProperties object that contains properties related
  to a page. Currently only last modified time, but infrastructure
  exists to make it have more things in the future.
- Fix bug in external link handling that tried to open all mediawiki
  pages, rather than just wiki pages, internally
- Add functions for for relative formatting of time

Change-Id: I713e17e98bf83dc7f4dd89f6d65254405cfaa390
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387935753,1387935880,fb6e6cccbd5cf0a6a2d9bc48d44799b803d65067
fb6e6cccbd5cf0a6a2d9bc48d44799b803d65067,fb6e6ccc,"Move infobox to just below first paragraph, rather than lead","Move infobox to just below first paragraph, rather than lead

Change-Id: Ied9a5fb6bd69f756a5da16f0b6809a5cce79945a
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387853856,1387853856,5dea10ea4adc2cc9c5e51a3e6a0f583fd2b3011c
5dea10ea4adc2cc9c5e51a3e6a0f583fd2b3011c,5dea10ea,Make search bar visible when navigating to a new page,"Make search bar visible when navigating to a new page

Also clears search text after the first time a user navigates to
a page via a non-search thing.

Change-Id: I68b7f3d4ff8dbb57a9847ab27e391acb4c18c9e3
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387849240,1387849240,42a4eefbe71df5a4f8b6fbe88de7fa43b268b6a5
42a4eefbe71df5a4f8b6fbe88de7fa43b268b6a5,42a4eefb,Prevent weirdasscrashes when rotating phone,"Prevent weirdasscrashes when rotating phone

Explanation for what was causing the crashes in the large
comment block that was removed in this commit.

Change-Id: Ic5bf59b9d36721fdcf12d2cbb951b337e3383f0e
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387848399,1387848399,ee38e474f5ddb31ae3d3ed5e14a58b7a2fd8bcd8
ee38e474f5ddb31ae3d3ed5e14a58b7a2fd8bcd8,ee38e474,Perform QuickReturn at the same rate as scrolling,"Perform QuickReturn at the same rate as scrolling

Change-Id: I719e4db20befa04da243b49b24ecf9208e9436a4
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387847913,1387847913,da3b0c87daf4b470a0dbf7294fd5ffbc4f05647a
da3b0c87daf4b470a0dbf7294fd5ffbc4f05647a,da3b0c87,Make sure that the Search bar is never in 'indeterminate' state,"Make sure that the Search bar is never in 'indeterminate' state

- Is always hidden or shown when you stop scrolling
- Does not trigger any hiding behavior for first 'screen'

Change-Id: I566169854810cf861fcabe262c314e33f0148fe4
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387842266,1387842266,429fdacf55f77d6caf487fa5a5a7fcd17ade34c0
429fdacf55f77d6caf487fa5a5a7fcd17ade34c0,429fdacf,Implement a continuous version of 'Quick Return',"Implement a continuous version of 'Quick Return'

This is a 'continuous' version of QuickReturn. QuickReturn
itself is rather discrete - you can never actually be stuck with
the bar in an 'inbetween' state. This is a much simpler version
that just continuously slides it around. The discrete version
requires some statekeeping mechanics.

Change-Id: Ib9c5d33e9b43f6199d767a8d20567623b89a9dd1
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387784725,1387838450,71ba297cb095de8cdb473af8a67110f77aa9b0bc
71ba297cb095de8cdb473af8a67110f77aa9b0bc,71ba297c,"Bump minVersion to ICS, not HoneyComb","Bump minVersion to ICS, not HoneyComb

Nobody really has HoneyComb anyway, and we can simply consider them
to be getting the GB experience.

Change-Id: Ibc48bde8cdd20fa8d3a63cb96415863bccab48a8
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387775072,1387775072,f3bbc206b3f65655481f2a4413506f1f84577a6f
f3bbc206b3f65655481f2a4413506f1f84577a6f,f3bbc206,Add functionality to delete selected pages,"Add functionality to delete selected pages

Also adds a 'delete' function to ContentPersister that works
based off the PrimaryKey definition

Change-Id: If4d627e4a929eef43b95d00ee5a3daa272c224b1
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387759498,1387759537,1b3c51eaebcc226db4fa84d49f83b64df3d9c255
1b3c51eaebcc226db4fa84d49f83b64df3d9c255,1b3c51ea,Make saved pages selectable,"Make saved pages selectable

Sets up a basic CAB that doesn't do anything

Change-Id: I54b6e86bd91b0e26973f2e83716835a54c4b9f44
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387755236,1387757125,4fa09b281e74f4bc0b0891f9d715ad7c770d7423
4fa09b281e74f4bc0b0891f9d715ad7c770d7423,4fa09b28,Actually use the saved pages layouts in the saved pages activity,"Actually use the saved pages layouts in the saved pages activity

Change-Id: Id9cd274611fc7ea928005730c1a08695e4488943
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387572786,1387572786,de59c292f20cc6789cf0ce2d40495edb9ea302b1
de59c292f20cc6789cf0ce2d40495edb9ea302b1,de59c292,Do not download duplicates or file:// URL images,"Do not download duplicates or file:// URL images

Change-Id: Icc92c2a2150a03523ef154a1d6f0a9f0cd2648b4
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387543533,1387543533,bec459b7e0cff59983406546e64a8570710a92a5
bec459b7e0cff59983406546e64a8570710a92a5,bec459b7,"When loading images fails, fall back to loading them from storage","When loading images fails, fall back to loading them from storage

Change-Id: Ia3dd8c7e19d3754824a5def86768916a8e456581
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387496920,1387497078,3becf532c014ed77e40e8e6e5150a8fafff76a85
3becf532c014ed77e40e8e6e5150a8fafff76a85,3becf532,Add a 'synchronous' return facility for the communication bridge,"Add a 'synchronous' return facility for the communication bridge

Only works from JS to Java.

Change-Id: Ie3f61a88a594708cbb97136be02d01db5a899919
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387496852,1387496910,de5dc542cb6ac3726f3ce4657ef142af383be15d
de5dc542cb6ac3726f3ce4657ef142af383be15d,de5dc542,Use md5 for generating image save URLs,"Use md5 for generating image save URLs

Change-Id: I7f083244ba140825c10a0cbbf51c7281333b4776
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387491816,1387491816,a6ba30037db73ed519e5c157b3639195c89f650d
a6ba30037db73ed519e5c157b3639195c89f650d,a6ba3003,Do not deadlock if duplicate images are found while saving,"Do not deadlock if duplicate images are found while saving

Goddamnmultithreadedprogramming

Change-Id: I43a5ad82a67368c80fc4927c28e4e5a0fd5460ca
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387491502,1387491502,0c9b01652d29201445c8ff655b5feca1f4b9a1d5
0c9b01652d29201445c8ff655b5feca1f4b9a1d5,0c9b0165,Add missing toast strings,"Add missing toast strings

Change-Id: I8fcb834ee3251e3c7e3fd60b933563bd75ed6aad
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387490497,1387490497,68f78a537456c7898917b922ed186eb1d436371c
68f78a537456c7898917b922ed186eb1d436371c,68f78a53,Clear bridge listeners when they are no longer used,"Clear bridge listeners when they are no longer used

Change-Id: I6a288f268898c6dc855f57aad4cdac3340e6348d
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387488282,1387488282,ca454e24e992998a156b161dfcad8e15453bc8f8
ca454e24e992998a156b161dfcad8e15453bc8f8,ca454e24,Download all the images in an article while saving page,"Download all the images in an article while saving page

Doesn't actually use the images anywhere yet.

Change-Id: I4bbc9c15568b351053114b0a6ed05e5df59b5503
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387483003,1387483042,c64092f69ad1621470424a2fd74db64f70728f67
c64092f69ad1621470424a2fd74db64f70728f67,c64092f6,Ensure we close opened files,"Ensure we close opened files

Change-Id: I74d8e817b10c353a61732e4e842666eb24a1ed54
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387466306,1387466343,1b0b715b0405843e8d2d09dd3c8d8aaef5d9689d
1b0b715b0405843e8d2d09dd3c8d8aaef5d9689d,1b0b715b,Cleanup State Handling in PageViewFragment,"Cleanup State Handling in PageViewFragment

Change-Id: I841a90f733151c143751f886b93ccd3c0750e932
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1387398356,1387399051,ade730dabc479d3cc16885b57bf0dfc5a8932a2e
ade730dabc479d3cc16885b57bf0dfc5a8932a2e,ade730da,Load the saved pages when pointed to from the Saved Pages activity,"Load the saved pages when pointed to from the Saved Pages activity

Need to refactor PageViewFragment. The state management is becoming
a little unweildy

Change-Id: I9a0214b55a22b0210631f2d6aadae52791ad4522
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387319372,1387398759,62c74d6ba5449c2121a6a74750dcb2acc355d1f9
62c74d6ba5449c2121a6a74750dcb2acc355d1f9,62c74d6b,Add methods + tests to bring back value objects from JSON,"Add methods + tests to bring back value objects from JSON

Change-Id: I2ea23c06c8c76468f965dc7dbbeedd9f5d2f319a
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387316574,1387316605,4f5817e10a5cee6e5845b4978c673e0b8a04e49b
4f5817e10a5cee6e5845b4978c673e0b8a04e49b,4f5817e1,Make documentation slightly more accurate,"Make documentation slightly more accurate

Change-Id: I580ee30ed410cdf29640eee120b36be7dd363bfc
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387310763,1387311928,7141d3b275be70ecfb7491587a02ba442ca120c9
7141d3b275be70ecfb7491587a02ba442ca120c9,7141d3b2,Save page contents to internal storage when 'Save page' is hit,"Save page contents to internal storage when 'Save page' is hit

Doesn't do anything with it yet :)

Change-Id: I6904f87675976d2a800d80c3a7f879ac464e9931
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387309760,1387311922,2cc107f561cc9047d1a66c8022bc22d2d95df4fa
2cc107f561cc9047d1a66c8022bc22d2d95df4fa,2cc107f5,Enable webview debugging on Kitkat,"Enable webview debugging on Kitkat

Change-Id: Ie0fbe419c408a9f6ac06d6c27e7a278f545ad974
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387295628,1387295628,8b206fcd1608b38019913616cf803553357c0030
8b206fcd1608b38019913616cf803553357c0030,8b206fcd,Kill some noisy Log messages that are no longer useful,"Kill some noisy Log messages that are no longer useful

Change-Id: I53629094052a9c20e6688a151715532cad5788ca
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387280515,1387280515,51a664f4d80eba1152a60d6fe90b3cbed8df5739
51a664f4d80eba1152a60d6fe90b3cbed8df5739,51a664f4,Add 'Share page' functionality,"Add 'Share page' functionality

Change-Id: I9c719808cbedb706f453a8151151c58c26b09e6d
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387233115,1387233170,cd048a39140e1b76e92953d0af97170eae079cba
cd048a39140e1b76e92953d0af97170eae079cba,cd048a39,Perform display related DOM transforms in JS,"Perform display related DOM transforms in JS

Should be put in Extension:MobileApp in the future, and be
reusable across iOS/Android.

Right now moves the infobox below the lead section.

Change-Id: Ic652862c3e5f94341c611655d70ba2c569536fbe
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1387160296,1387219996,70e37ab48835ac3840954ccf7a91209d1dae4ac9
70e37ab48835ac3840954ccf7a91209d1dae4ac9,70e37ab4,Add minimal styling for tables and thumbnails,"Add minimal styling for tables and thumbnails

This prevents the entire webview from scrolling horizontally
if there is a table or image that is too wide.

Change-Id: Iaf22ea3e49a72a07b1531ffb4a994d5f1e3afc65
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1387085479,1387219902,31866efc34102e97c7f8fc72eea07689875c2cfe
31866efc34102e97c7f8fc72eea07689875c2cfe,31866efc,Increase line height for the page title,"Increase line height for the page title

Change-Id: Iae92660b9a4d0b5ad474768533a6cbe227e7fd01
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1387077177,1387219838,0e9cf3c0de52d16068d3ba443865fbd4fca0079a
0e9cf3c0de52d16068d3ba443865fbd4fca0079a,0e9cf3c0,Minor RTL fixes,"Minor RTL fixes

Fixing the drawer indicator icon requires that we flip the image
itself. Can be done at a future point.

Change-Id: I73fcc26763c136d8ffa297c919c3162b5af4e522
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1387076703,1387219555,09308a82ad698f7e044f915e9146637c82c63feb
09308a82ad698f7e044f915e9146637c82c63feb,09308a82,Reduce gap between search spinner & overflow menu button,"Reduce gap between search spinner & overflow menu button

Change-Id: I54f23d3d46c9238630c1f1e5d8f3706aae67653d
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1387071213,1387219434,8baf766f3481b621f06d49115b2460c718e3d127
8baf766f3481b621f06d49115b2460c718e3d127,8baf766f,Setup appropriate strings for clearing Saved Pages,"Setup appropriate strings for clearing Saved Pages

Change-Id: I4df3bf062f4520f371db12d733c65b8f1dc7ddb2
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1387069938,1387219409,3621a19b430fdde73c8131841c310128c0be3e9a
3621a19b430fdde73c8131841c310128c0be3e9a,3621a19b,"Merge ""Hide the drawer when the searchbar is clicked""","Merge ""Hide the drawer when the searchbar is clicked""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1387219152,1387219152,"a5e18a3e57088c0b6c2e434a236349e061fbc756,1ebfd4b0ae18722a09d5bb956c25ff399e7b5144"
a5e18a3e57088c0b6c2e434a236349e061fbc756,a5e18a3e,"Merge ""Handle page state change events to keep page action state in sync""","Merge ""Handle page state change events to keep page action state in sync""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1387219067,1387219067,"112301a8b343d7bda2873e5085fad264582d0e47,561d5847aa446cc212336af81cbdbce9c71cab42"
112301a8b343d7bda2873e5085fad264582d0e47,112301a8,"Merge ""Added some instructions for prospective developers on Macs.""","Merge ""Added some instructions for prospective developers on Macs.""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1387218558,1387218558,"d9480002643783fb6b8206578ad8a0e2940963db,4d2a98ced5bdc14eb80662a43decb1f81ba98528"
1ebfd4b0ae18722a09d5bb956c25ff399e7b5144,1ebfd4b0,Hide the drawer when the searchbar is clicked,"Hide the drawer when the searchbar is clicked

Change-Id: Iac884cde85a6251b5e06d4d98cf4024950c91b2b
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1387035127,1387069359,561d5847aa446cc212336af81cbdbce9c71cab42
561d5847aa446cc212336af81cbdbce9c71cab42,561d5847,Handle page state change events to keep page action state in sync,"Handle page state change events to keep page action state in sync

Change-Id: I8929c25d9091713f444dd6cd7c1b01438347583f
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386986136,1387069359,d9480002643783fb6b8206578ad8a0e2940963db
d9480002643783fb6b8206578ad8a0e2940963db,d9480002,Add Hebrew strings,"Add Hebrew strings

Also enable RTL support for newer Android versions

Change-Id: Ia21c948727fdcc11edf27c79133e14d238110cae
",,,,Amir E. Aharoni,amir.aharoni@mail.huji.ac.il,Yuvi Panda,yuvipanda@gmail.com,1387036611,1387037072,b8bb0bf6be8f91c4179cdc8ec428ea2204199d6d
4d2a98ced5bdc14eb80662a43decb1f81ba98528,4d2a98ce,Added some instructions for prospective developers on Macs.,"Added some instructions for prospective developers on Macs.

Change-Id: I0f68879d4edfe9a265f91f79f329f2b42afabe94
",,,,dr0ptp4kt,abaso@wikimedia.org,dr0ptp4kt,abaso@wikimedia.org,1386983471,1386983513,b8bb0bf6be8f91c4179cdc8ec428ea2204199d6d
b8bb0bf6be8f91c4179cdc8ec428ea2204199d6d,b8bb0bf6,Draw drawer indicator icon next to the 'W' icon,"Draw drawer indicator icon next to the 'W' icon

Also animates when dragging the drawer

Change-Id: If56370095df00f30f9821eb7c9e1a31be02831c4
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386885200,1386943795,3d39c25bd6b03165ad8bbdfc56aaf60cc334deea
3d39c25bd6b03165ad8bbdfc56aaf60cc334deea,3d39c25b,Request only the sections we really want,"Request only the sections we really want

Remove hacks in place for bug in mobileview API that returned
all sections even if we just asked for some.

Change-Id: I6cfc7011129be6a8922041a3b098cf6b6b333a51
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386885374,1386943795,9a072c0dc5f3d6b1c43fe0b6fbf0edc8a79ef62f
9a072c0dc5f3d6b1c43fe0b6fbf0edc8a79ef62f,9a072c0d,Ensure keyboard is always hidden when opening page,"Ensure keyboard is always hidden when opening page

Bug:58133
Change-Id: Ia366b09d171b3e6d66fc0107e6b02f95566817b4
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386880801,1386880801,d8e425442e17b5811855be5a8939767e2a616902
d8e425442e17b5811855be5a8939767e2a616902,d8e42544,Add Save Page action,"Add Save Page action

- Adds 'overflow icon' UI to mimic ActonBar/Google Chrome
- Adds 'Save page' action on a per-page basis
- Saves and displays list of pages saved
- Does not actually save page content yet - works like a bookmark

Change-Id: I443f83d316d417f99c09768d418137a7ee18008e
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386870856,1386880725,1650504b31cdd4730bd1345db200d4ca1c7cb4ab
1650504b31cdd4730bd1345db200d4ca1c7cb4ab,1650504b,Ensure that History+PageImages always has a valid projection,"Ensure that History+PageImages always has a valid projection

Only one projection is supported :)

Change-Id: I7c9fa638168754ec656b07c153cdb9df43a3d217
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386711996,1386711996,e164df0bc2f5e354ce92e0762502127bd623307d
e164df0bc2f5e354ce92e0762502127bd623307d,e164df0b,Prevent integer overflow in Java's constant computation,"Prevent integer overflow in Java's constant computation

We might just as well be using brainfuck, eh?

Change-Id: I102ae612aef4f1148efbeb292dfb0db98777c3c1
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386707402,1386707845,99a3a5cdf8a6d4988d7a8fcf3e4b3ce7ee6822ad
99a3a5cdf8a6d4988d7a8fcf3e4b3ce7ee6822ad,99a3a5cd,Run the history clearer every day,"Run the history clearer every day

Change-Id: I341f7d7ecf01bf1a0f83b33ddd21f73c93cb75ef
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386701555,1386707360,399047f302d2a30fbc8adc19ec2126e62287a9f6
399047f302d2a30fbc8adc19ec2126e62287a9f6,399047f3,Add thumbnail storage support,"Add thumbnail storage support

- Display thumbnails in history view
- History Content provider joins tables with PageImages
- Page Images saved when a history entry is made. Will change
  in the future to get the PageImage data with the mobileview
  request itself, and avoid the extra request.
- Add 'upsert' feature to the Content Persisters

Change-Id: I65c94258f5f1908edee6d6ceb8137570b0feb3a4
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386701381,1386703596,494208347230577ae57cdff1b44fc45ca0aa3aa1
494208347230577ae57cdff1b44fc45ca0aa3aa1,49420834,Add a recurring task execution mechanism,"Add a recurring task execution mechanism

- Lets us run tasks that are used for cleanup operatioins as such
- Does not give exact timing guarantees
- These are run on a background thread
- Implements task to cleanup History after 30 days

Change-Id: I9a499020cb0094d1bae3ec095bc728fe37b0a608
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386621737,1386621806,d490be9b1e93090b23315084a305123e0521cf6f
d490be9b1e93090b23315084a305123e0521cf6f,d490be9b,Implement deleteAll as a variant of delete,"Implement deleteAll as a variant of delete

Will need to add tests for this entire thing later.

Change-Id: Ib40fe1d4f126923ed1788417f144d0d45fd24e61
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386619263,1386619263,e3897ae9c4aec14758084e93d3ff50232c890521
e3897ae9c4aec14758084e93d3ff50232c890521,e3897ae9,Handle out of order network responses to search query,"Handle out of order network responses to search query

If a previous search query returns later than a newer search
query, it will confuse the reader by displaying the results of the
older search query, overriding the newer one.

Cancelling the older search task will not actually cancel the
HTTP request, but that's okay. It does prevent the onFinish
and onCatch from firing, which should be good enough for this
purpose.

Change-Id: I0c9e1204f7fbddf00a5077c33c725dc22da9ae9b
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386610309,1386610309,1829a622d9a0d855372f94717275643665a1bd91
1829a622d9a0d855372f94717275643665a1bd91,1829a622,Implement 'Clear History' feature,"Implement 'Clear History' feature

Change-Id: I9c11349c0f7a7af690af58948b952cf1c7635382
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386373938,1386374006,3296006c5f8007c0a4684533a59a32d8c8835ed3
3296006c5f8007c0a4684533a59a32d8c8835ed3,3296006c,Add retry button to network failure view,"Add retry button to network failure view

Change-Id: I595a26b3883e660cd346158c5658177004a463dc
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386372392,1386373426,6a692b96dd21562f609be5a926219d5a5f6f6687
6a692b96dd21562f609be5a926219d5a5f6f6687,6a692b96,Fix SVG->PNG icon rasterization for higher resolutions,"Fix SVG->PNG icon rasterization for higher resolutions

* using librsvg instead of convert
* added note to main README about how to run it
* added xxhdpi output (yes it's slightly more sharper and beautiful, especially for line-art icons like this!)

Change-Id: I8b8c49a53434b2eadccb9533feadcd3d4dff1d9c
",,,,Brion Vibber,brion@pobox.com,Yuvipanda,yuvipanda@gmail.com,1386361443,1386364850,b1caa95aa99cd474f81d5d0af8ad2b029588f0e8
b1caa95aa99cd474f81d5d0af8ad2b029588f0e8,b1caa95a,Do not crash when searching without network,"Do not crash when searching without network

Also does:
- display a message that lets you retry the search
- always ensure that there's a line under the search bar

Change-Id: I4341d249ae4832e74cf74226bfbcb216b3418f6a
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386364273,1386364309,c8388f1d38e5305cba37282a3de2f663e6786fa9
c8388f1d38e5305cba37282a3de2f663e6786fa9,c8388f1d,Show error message when there's no network connection,"Show error message when there's no network connection

Change-Id: I5a2bc37ce13786ddefcf758ed3250457757ddf81
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386289406,1386361408,a3abe7aa71cef3013df63354707fcda4d5e63ab3
a3abe7aa71cef3013df63354707fcda4d5e63ab3,a3abe7aa,Factor crossfade function into own static method in Utils,"Factor crossfade function into own static method in Utils

Change-Id: I3e367be38467dbd635bf5a84a71a4db7c88b5f02
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1386288461,1386356853,62803997ab0b45a214294a03c090daf41ef78bbc
62803997ab0b45a214294a03c090daf41ef78bbc,62803997,Only add history entry after page has actually loaded,"Only add history entry after page has actually loaded

This prevents:
- History entry for pages that error out
- History view 'flickering' when you go from history to elsewhere

Change-Id: If55afc48a8179d4123f62734f0251228f1b74921
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion VIBBER,brion@wikimedia.org,1386286869,1386356763,ac4cba5e28ae4fc2e0d4b4f2b42ab35ad5ca7338
ac4cba5e28ae4fc2e0d4b4f2b42ab35ad5ca7338,ac4cba5e,"Add newer, darker icons from the designers","Add newer, darker icons from the designers

Change-Id: Ib5c8e1a6eab4e265425e392f1717ce420fe75c89
",,,,Yuvi Panda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1386279364,1386356641,70ce41c327521c1bc1b26dbd8e24948263e2b2dd
70ce41c327521c1bc1b26dbd8e24948263e2b2dd,70ce41c3,Add ACRA error reporting,"Add ACRA error reporting

Change-Id: Iaabdf27069b77d080f3054397c3facd7c08e2cc6
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386266852,1386266852,98c3a4db9e3d87d51cfc66d7776b3d9380c16897
98c3a4db9e3d87d51cfc66d7776b3d9380c16897,98c3a4db,Add minimal styling to the content,"Add minimal styling to the content

Note that the styles should be extracted out into the MobileApp
extension at some point.

Change-Id: Ic4f5305ca2bf83616e2ada097e1eed6cc7c5af22
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386254697,1386254733,b2730df9d0cbbfa6bdfea7b67cde9c4aab6b9afb
b2730df9d0cbbfa6bdfea7b67cde9c4aab6b9afb,b2730df9,Add icons indicating the source of the history entry,"Add icons indicating the source of the history entry

Also adds convertify.bash that converts the image source SVGs
to appropriately sized pngs. Needs more work to be fully general.

Change-Id: I164f98bbc0806c78bd1fcd43d00721a7e123c0ad
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386198329,1386198329,91d40afb8ecc5e6c69c0e3083c48a0fe6ebe0139
91d40afb8ecc5e6c69c0e3083c48a0fe6ebe0139,91d40afb,Add 'W' icon to replace black square placeholder,"Add 'W' icon to replace black square placeholder

Change-Id: I640c7f5ef1d01f481e62296334154916c14b97a5
",,,,Brion Vibber,brion@pobox.com,Yuvi Panda,yuvipanda@gmail.com,1386010586,1386188885,1ddaa3ab2037f2ada7e8a5d38f5af52d1f4c098a
1ddaa3ab2037f2ada7e8a5d38f5af52d1f4c098a,1ddaa3ab,Toggle DrawerLayout when icon in search bar is tapped,"Toggle DrawerLayout when icon in search bar is tapped

Change-Id: I1c69e81fac54d38c532363e8856490a48806162b
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386188593,1386188593,062b3129047f7dd29d1884bcd92951df47cfc36b
062b3129047f7dd29d1884bcd92951df47cfc36b,062b3129,Add single line border under the search fragment.,"Add single line border under the search fragment.

Change-Id: I581dec02917fe6fed7f097e3b1e70e66fe827805
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386185957,1386186501,fd44aba35ffb1fb90ffe6e30631ba8c2375a7c9c
fd44aba35ffb1fb90ffe6e30631ba8c2375a7c9c,fd44aba3,Make NavDrawer use a ListView,"Make NavDrawer use a ListView

And thus we get free click feedback!

Change-Id: Id732c0b1b9d8941262ef0e80915148fd485a440b
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386185730,1386186494,2fcfd4afc79a41e511102f0d822438e41fe01a99
2fcfd4afc79a41e511102f0d822438e41fe01a99,2fcfd4af,"Merge ""Exit when back is pressed with only one page in the backstack""","Merge ""Exit when back is pressed with only one page in the backstack""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1386184600,1386184600,"78ef730f76ba4e5f0695e8bc6e3392a4cca8f995,52233febaabe583e1a24a4c073947ac4ccd4bfc0"
78ef730f76ba4e5f0695e8bc6e3392a4cca8f995,78ef730f,"Merge ""Follow NavigationDrawer pattern properly""","Merge ""Follow NavigationDrawer pattern properly""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1386184403,1386184403,"69e5e3d79930362736186568a7907e4360cf4365,1132d6781309d3fc25bcfdd61d14f5667036d9c3"
52233febaabe583e1a24a4c073947ac4ccd4bfc0,52233feb,Exit when back is pressed with only one page in the backstack,"Exit when back is pressed with only one page in the backstack

Change-Id: Iec802eb0473ce5b8d6a7ab9d44ad81ade9f71403
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvipanda,yuvipanda@gmail.com,1386171854,1386184371,1132d6781309d3fc25bcfdd61d14f5667036d9c3
1132d6781309d3fc25bcfdd61d14f5667036d9c3,1132d678,Follow NavigationDrawer pattern properly,"Follow NavigationDrawer pattern properly

Also adds:
- Better styling for the 'History' menu item
- Drawer's width is better managed
- Terrible shadow under searchbar replaced by a clean line
- Remove localstyles

Change-Id: Ifdece09676a10a428cbff7902c8992be3caea2a9
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386171456,1386183070,50eb942eb9dfcc3761d9f88ed272962d826fdc69
69e5e3d79930362736186568a7907e4360cf4365,69e5e3d7,"Merge ""Do not reload first page everytime onStart is called""","Merge ""Do not reload first page everytime onStart is called""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1386113636,1386113636,"aa1a86e0d743a00bf3e0270441cb834245371430,50eb942eb9dfcc3761d9f88ed272962d826fdc69"
50eb942eb9dfcc3761d9f88ed272962d826fdc69,50eb942e,Do not reload first page everytime onStart is called,"Do not reload first page everytime onStart is called

Intent actions should always be on onCreate. This also modifies
the bus behavior to have it init on onCreate, then on onStop but
only if it is null - which is set if onStop has run. This ensures
that we do not double register.

Change-Id: I2e5c1385ff01a1514ec4772203f297f43295c727
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386113260,1386113260,38f93ed9a04e41201493952aa7f4c7b2f751501f
aa1a86e0d743a00bf3e0270441cb834245371430,aa1a86e0,"Merge ""Add UI to see history""","Merge ""Add UI to see history""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1386112867,1386112867,"0fa9f839a46c032bb5eba6b06f7b7eeb55511328,38f93ed9a04e41201493952aa7f4c7b2f751501f"
38f93ed9a04e41201493952aa7f4c7b2f751501f,38f93ed9,Add UI to see history,"Add UI to see history

Also adds:
- Start a PageActivity with a PageTitle & HistoryEntry
- New Source ID for coming to a page from History
- Fragment that handles the NavDrawer
- New NoTitle theme for pages that don't need ActionBar
- Swipe from left to open navigation drawer
Change-Id: If53f7e0a3e5b46a6687fb40d59a671061c29fec9
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386108174,1386112798,b3d6a58c0a06aee862a1f5f20a8865e2c825698e
0fa9f839a46c032bb5eba6b06f7b7eeb55511328,0fa9f839,"Merge ""Prevent crash when rotating device without pages open""","Merge ""Prevent crash when rotating device without pages open""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1386111972,1386111972,"4a4ebae0fc4307e6a93e769d3a843a26cceb7035,b3d6a58c0a06aee862a1f5f20a8865e2c825698e"
4a4ebae0fc4307e6a93e769d3a843a26cceb7035,4a4ebae0,"Merge ""Bump min version to 11 (temperoarily)""","Merge ""Bump min version to 11 (temperoarily)""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1386111834,1386111834,"8b3c4ef653a6af0857a0c012836309659fc0d0da,265661e3be7fe0190fade6f73aff260988382363"
8b3c4ef653a6af0857a0c012836309659fc0d0da,8b3c4ef6,"Merge ""Add helper script to pull data from device""","Merge ""Add helper script to pull data from device""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1386111814,1386111814,"ecdb101507230d4cfca9573b771e86a62b31a5ad,a1d6f82169b32211e3f972c5b33735f2bf5123e7"
ecdb101507230d4cfca9573b771e86a62b31a5ad,ecdb1015,"Merge ""Add support for getting data in and out of SQLite""","Merge ""Add support for getting data in and out of SQLite""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1386111754,1386111754,"fde9cc4ea0ae9a9b7cdb7304e89ad14862d28bb1,27176fab77488504d0ffe9e4843fcaebe0e16798"
b3d6a58c0a06aee862a1f5f20a8865e2c825698e,b3d6a58c,Prevent crash when rotating device without pages open,"Prevent crash when rotating device without pages open

Change-Id: Ic0d2b56d83b7a975f0f651ee0f5c7f380da3087b
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386104697,1386104697,265661e3be7fe0190fade6f73aff260988382363
265661e3be7fe0190fade6f73aff260988382363,265661e3,Bump min version to 11 (temperoarily),"Bump min version to 11 (temperoarily)

Prevents warnings in IntelliJ 13. We'll have to spend time adding
support for 2.3 later on anyway.

Change-Id: Ifa127f7ffad69f353310df0d4945b65e8c9678a4
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386085457,1386085457,a1d6f82169b32211e3f972c5b33735f2bf5123e7
a1d6f82169b32211e3f972c5b33735f2bf5123e7,a1d6f821,Add helper script to pull data from device,"Add helper script to pull data from device

Change-Id: Iad10e23c5d090fb63dc9a8ed0957320cb740db87
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386027803,1386027884,27176fab77488504d0ffe9e4843fcaebe0e16798
27176fab77488504d0ffe9e4843fcaebe0e16798,27176fab,Add support for getting data in and out of SQLite,"Add support for getting data in and out of SQLite

Also contains a generic (ugh!?) framework (eww!) for
making ContentProviders and related classes usedful
for persisting things to things.

Change-Id: Ifac43dec5b29a7668f65b1f55a5caa1dd431ed1a
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386013364,1386027768,9f6f20b70b7acd24b431c1ae9584ba6ee08b13bd
fde9cc4ea0ae9a9b7cdb7304e89ad14862d28bb1,fde9cc4e,Add COPYING file,"Add COPYING file

Change-Id: I014ca4cbbe50249d8d394c8e95aabad6aa350d41
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1386016870,1386016870,9f6f20b70b7acd24b431c1ae9584ba6ee08b13bd
9f6f20b70b7acd24b431c1ae9584ba6ee08b13bd,9f6f20b7,Added a gitignore file.,"Added a gitignore file.

Change-Id: I2b2fcfa966fdd2795264effe644d4ddd711753b7
",,,,Pratul Kalia,pratul@pratul.in,Pratul Kalia,pratul@pratul.in,1385959580,1385988765,8313fd8b489548608369338583aca9ad56aa47f6
8313fd8b489548608369338583aca9ad56aa47f6,8313fd8b,"Merge ""Addes HistoryEntry object and related tests.""","Merge ""Addes HistoryEntry object and related tests.""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1385582681,1385582681,"128c867de0ece58c5e5caf259724bca2c39ae46d,9481f2e289cac0896d4b7d0caa49f933b3da52f0"
128c867de0ece58c5e5caf259724bca2c39ae46d,128c867d,"Merge ""Fix spacing for NewWikiPageNavigationEvent""","Merge ""Fix spacing for NewWikiPageNavigationEvent""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1385569511,1385569511,"ba4be206218398e5e6175473481a6f8a6d4aa514,792f8529c3fc8d3f19543bbccebd548f42388674"
9481f2e289cac0896d4b7d0caa49f933b3da52f0,9481f2e2,Addes HistoryEntry object and related tests.,"Addes HistoryEntry object and related tests.

It is properly passed around now, but we don't do anything
with it yet.

Change-Id: I86ffdae425c6069e278c1ec3902ac64f115be2b2
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385565871,1385565871,792f8529c3fc8d3f19543bbccebd548f42388674
792f8529c3fc8d3f19543bbccebd548f42388674,792f8529,Fix spacing for NewWikiPageNavigationEvent,"Fix spacing for NewWikiPageNavigationEvent

Change-Id: Iaf80754a1e78f4ec9973062b3f152574f4cc02ab
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385553589,1385553589,0535087fdc9e944690c6d2abc7ee586daf50f82f
ba4be206218398e5e6175473481a6f8a6d4aa514,ba4be206,"Merge ""Ensure that we have a title before using it.""","Merge ""Ensure that we have a title before using it.""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1385409523,1385409523,"ba930d93b65a11234dc08eb2a6dead39a061946b,0535087fdc9e944690c6d2abc7ee586daf50f82f"
0535087fdc9e944690c6d2abc7ee586daf50f82f,0535087f,Ensure that we have a title before using it.,"Ensure that we have a title before using it.

Change-Id: Ibd28ed71736fdc75e9341312dc222d2fc0b1b24c
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385409208,1385409208,8cfc53818c926b6b8327b27478937ae5239377a7
ba930d93b65a11234dc08eb2a6dead39a061946b,ba930d93,"Merge ""Update target SDK to be able to find @JavascriptInterface""","Merge ""Update target SDK to be able to find @JavascriptInterface""",,,,Brion VIBBER,brion@wikimedia.org,Gerrit Code Review,gerrit@wikimedia.org,1385408975,1385408975,"8cfc53818c926b6b8327b27478937ae5239377a7,d2d726584dc7f5765befc4e509f5618ac7ac834b"
8cfc53818c926b6b8327b27478937ae5239377a7,8cfc5381,Save scroll position when restoring,"Save scroll position when restoring

Note that this only works if the orientation has not changed. If
it does this will be off by a bit.

Change-Id: Ia96b172ba69bd96e2d902f8189e54c9635922163
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385382695,1385408212,e320164654a63b70418672e9b5f7551502e440eb
e320164654a63b70418672e9b5f7551502e440eb,e3201646,Make the search textbox single line only,"Make the search textbox single line only

Change-Id: I4b2b5cecc1829b85ebd1f751cb975a6499500b61
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385202041,1385408204,f941b644813beb14380cd0aafd0c8e88f4c43368
f941b644813beb14380cd0aafd0c8e88f4c43368,f941b644,Stagger messages to webview when restarting a pageview.,"Stagger messages to webview when restarting a pageview.

Makes things 'freeze' less when going back or rotating. Still
not the ideal.

Change-Id: Ib9007d8951001a37d3920565216f3a055cb4a3dd
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385162784,1385408196,f5b64e1e999574afc512d29ab960a79fc91b54d7
f5b64e1e999574afc512d29ab960a79fc91b54d7,f5b64e1e,Add a level of indirection when sending messages to WebView,"Add a level of indirection when sending messages to WebView

Since apparently just loading a javascript: URL is a blocking
operation and also quite slow when passing in a large amount of
data, we just pass in a pointer and then use another method to
retreive the data.

The 'other' method is using the JavascriptInterface. This is
known to fail in some 2.3 devices with low memory and also
in 2.3 emulators. But the performance boost that we get
from this is significant enough to risk it, and I think
in the future if necessary we can implement a fallback in
the cases when this method of communication does not
work.

Change-Id: I16c10fb1faea9bec1d6a69ac53d90ac88653fcb1
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385161944,1385408180,dd35759b97fdfad362770c3331996ff8b0ab1538
dd35759b97fdfad362770c3331996ff8b0ab1538,dd35759b,Display entire page than just first section,"Display entire page than just first section

Note: Has workarounds for a bug in MF that need to be removed
when that gets fixed.

Note: The current JS Bridge is showing perf troubles when
transferring large amounts of data. Will be fixed in a
separate patch

Change-Id: I302089502165a57e5a0e3999a21bc8cbd8a66794
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385156257,1385408123,1ebcf2a1fd45f14b96933af3e56fc06ea90264e3
d2d726584dc7f5765befc4e509f5618ac7ac834b,d2d72658,Update target SDK to be able to find @JavascriptInterface,"Update target SDK to be able to find @JavascriptInterface

Change-Id: I639807707cd0f9dabb704a1912a9db153e078793
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385406620,1385406620,1ebcf2a1fd45f14b96933af3e56fc06ea90264e3
1ebcf2a1fd45f14b96933af3e56fc06ea90264e3,1ebcf2a1,Split EqualityTests inside of classes tests,"Split EqualityTests inside of classes tests

Change-Id: Ie081b7f91f62fa52503304643a1f57324d9c9d6d
",,,,Tpt,thomaspt@hotmail.fr,Tpt,thomaspt@hotmail.fr,1384676341,1385051343,c2281f6c84eab1e707108335871d8a1fd25590b7
c2281f6c84eab1e707108335871d8a1fd25590b7,c2281f6c,Allows to remain in the app while going to an other language wikipedia,"Allows to remain in the app while going to an other language wikipedia

Change-Id: I728d86bcf7787d48cd45773eebaf81ce3fc7155d
",,,,Tpt,thomaspt@hotmail.fr,Tpt,thomaspt@hotmail.fr,1384636482,1385050906,b6026d27f3fddcea54463495c7301f1e6625c38b
b6026d27f3fddcea54463495c7301f1e6625c38b,b6026d27,Make code site relative,"Make code site relative

Allows to open and brows non default site pages

Change-Id: I45e1526e9a6a34c59e1a98dc64c908aa99bb0fb2
",,,,Tpt,thomaspt@hotmail.fr,Tpt,thomaspt@hotmail.fr,1384437474,1385050334,4f28b061df4194ff2d99f3e15b188486307bd4f3
4f28b061df4194ff2d99f3e15b188486307bd4f3,4f28b061,Make PageImages fetching adjust to screen density,"Make PageImages fetching adjust to screen density

Change-Id: Id8c9078c073f11882674c28a135a4123a2449ede
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385046152,1385047218,1a4ef34f63e37f6ac352dcda3813310908fe90e4
1a4ef34f63e37f6ac352dcda3813310908fe90e4,1a4ef34f,Rename PageFetchTask to SectionsFetchTask,"Rename PageFetchTask to SectionsFetchTask

Also fix tests. Also change the PageViewFragment to an
explicit state based system rather than an implict one based on
which variables are null.

Change-Id: I05d85190c24231d54b8525239d01be7370a73287
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385045455,1385047203,a75d47fa55763a0bcbb0c972ecab7849d2d45d92
a75d47fa55763a0bcbb0c972ecab7849d2d45d92,a75d47fa,Fix copypasta errors in the ApiTask refactor,"Fix copypasta errors in the ApiTask refactor

Also make the API consistent. Constructors should take
in directly the things they need to do their job, and
not just take context.

Change-Id: I51ad0291b35839795e53579a59773d4a47d03375
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385037364,1385038556,a5220282cb0b1e0850aba65d0ee69e4e2e2b9578
a5220282cb0b1e0850aba65d0ee69e4e2e2b9578,a5220282,Redo Image Fetching to be less linear.,"Redo Image Fetching to be less linear.

Also locally caches the results of the PageImages api call.

Change-Id: I966950ac4c77dfee0e0e88db787ac7662679817c
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385030544,1385030544,194ebd9755de0fd45f44e755fba3098423e44a43
194ebd9755de0fd45f44e755fba3098423e44a43,194ebd97,Make Parcelable LruCache support Strings as values,"Make Parcelable LruCache support Strings as values

That class is written as if Java has no Generics support. That
is because Java pretends to have Generics support while not
actually giving a shit.

Change-Id: I969fb023a5a1297a587a2621c7bbe14452d11108
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385029536,1385029536,1a46e841a0c970a9f88f4b39cb872638f38c892e
1a46e841a0c970a9f88f4b39cb872638f38c892e,1a46e841,Remove excess padding in search results,"Remove excess padding in search results

Change-Id: Iaf781dc34fabe12f1970646d5959ea80f15ffd90
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385028670,1385028670,bfd202ae116b2f04912149dac489ef8885326303
bfd202ae116b2f04912149dac489ef8885326303,bfd202ae,Do not reinvent TextUtils,"Do not reinvent TextUtils

Change-Id: I86aff88714c49bafc5e5191b33a965d2a3cc2fa7
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385015134,1385015134,6967f2f930364d56c6dd494c98b354d4f5bf263f
6967f2f930364d56c6dd494c98b354d4f5bf263f,6967f2f9,Actually add dependency on Picasso,"Actually add dependency on Picasso

Change-Id: I3230001b462e317a67af9421df2309604ae5b9c8
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1385013008,1385013008,2799c234488a9b14d29e727b23c4eb8b84d1d149
2799c234488a9b14d29e727b23c4eb8b84d1d149,2799c234,Fixes for missing entries,"Fixes for missing entries

Change-Id: I69243428b1803044553dfba7c19cb146a9e9675a
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1384979792,1384979822,76d63574ddbdb9dcdaf447ca153d46362b3c0789
76d63574ddbdb9dcdaf447ca153d46362b3c0789,76d63574,For consistency use Picasso for the static palceholder case as well,"For consistency use Picasso for the static palceholder case as well

Change-Id: I32dc7b1e2a100e69d39ba7fc8c719b968450bff1
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1384978864,1384978960,6420d6e426bb22926c52a490c26abe21913a187c
6420d6e426bb22926c52a490c26abe21913a187c,6420d6e4,Search thumbnails for Android,"Search thumbnails for Android

* PageQueryTask abstract query class to fetch per-title data
* PageImagesTask to fetch page images specifically
* fetching images with Picasso, mostly works?
** sometimes seems to update the wrong image view?

Change-Id: I4b1432cab6762fb052b2c5e2c10c1a91226b9085
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1384558482,1384978407,6608a06722d64b46a4420c55340877c2c5a949d6
6608a06722d64b46a4420c55340877c2c5a949d6,6608a067,Refactor SearchArticlesTask to produce a base ApiTask,"Refactor SearchArticlesTask to produce a base ApiTask

Also work around broken ApiResult.cancel()

Change-Id: If62d5e790702ce1707e62c50ce39752ac7d979b3
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1384549495,1384977245,a8f2da0240871c5d3ebaaf6a7448d79672e3ec0c
a8f2da0240871c5d3ebaaf6a7448d79672e3ec0c,a8f2da02,Delay typeahead by 300ms,"Delay typeahead by 300ms

Gets rid of the  clumsy cancellation code, and behaves as I
as a user would expect.

Best way to cancel stuff is to not run them in the first place.

Change-Id: I648e23644c000c28b4b9c814b968613bdcf75fe6
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384922829,1384922989,45201a24f06bf6dadd4686504503e0be8ea2ee71
45201a24f06bf6dadd4686504503e0be8ea2ee71,45201a24,Exit the activity if there is no pages left to pop.,"Exit the activity if there is no pages left to pop.

Change-Id: Iaa5d30c986096ce7f844e63816260edb67efbb68
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384547390,1384547390,4dee96fb084ce967e6eeeb2868a58acce683939c
4dee96fb084ce967e6eeeb2868a58acce683939c,4dee96fb,Enable pinch-zooming of article contents,"Enable pinch-zooming of article contents

Bug: 34293
Change-Id: Ie640eb70e65ebade96ec73b4299abbecddd0f23a
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384375554,1384375554,45d29e185936dd2326ad34630684708b26444fd0
45d29e185936dd2326ad34630684708b26444fd0,45d29e18,Allow to open Wikipedia pages directly in the app,"Allow to open Wikipedia pages directly in the app

Change-Id: Ibe22c40848bb2d0e2e843352d287b5cd4765e06e
",,,,Tpt,thomaspt@hotmail.fr,Brion Vibber,brion@pobox.com,1384293525,1384372710,793c38e196a71f73e4a59e203e0bedda79fca3cb
793c38e196a71f73e4a59e203e0bedda79fca3cb,793c38e1,Fix order of operations in pingback event registration,"Fix order of operations in pingback event registration

Change-Id: I5895996dbfde09d2ea1443f04c4191b15560fc22
",,,,Brion Vibber,brion@pobox.com,Yuvipanda,yuvipanda@gmail.com,1384180090,1384372103,cea2507764964d067433afe0055fce7b57c874ab
cea2507764964d067433afe0055fce7b57c874ab,cea25077,Fetch only 5 results,"Fetch only 5 results

I don't think people scroll past the first page of 'em.

Should also speed up the fetch.

Change-Id: If507a1c5b42b8c4e45bcc4013abe3d29814035d8
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384371235,1384371235,c8b261b240667fed5ba6c266550907d826414f0e
c8b261b240667fed5ba6c266550907d826414f0e,c8b261b2,Handle pressing back when search results are displayed,"Handle pressing back when search results are displayed

Change-Id: Id916d477221f7c82ba1a4a271e2e67617cbd2edb
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384324289,1384324289,3fd44b9b6eafb7529343b37af64840cc697b986e
3fd44b9b6eafb7529343b37af64840cc697b986e,3fd44b9b,Make the search bar non-floating,"Make the search bar non-floating

According to discussion with design. Yay!

Change-Id: If2e0f4f8f35a8eb6eef53279c8e2efa3406fca04
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384321608,1384321608,cf98f82a6342f0b2819a104f05a6b64f25ad6423
cf98f82a6342f0b2819a104f05a6b64f25ad6423,cf98f82a,Select full contents of the search box when you tap it.,"Select full contents of the search box when you tap it.

Tap again to position cursor and just edit. In line with
existing behavior on Android.

Change-Id: Id20490ba5a080f7cfaab3b208c5520ac9c32b2b6
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384318681,1384318681,9b12933bbc1a3c5051132eb59d62b31509bbc579
9b12933bbc1a3c5051132eb59d62b31509bbc579,9b12933b,Extracted the search result adapter into an inner class,"Extracted the search result adapter into an inner class

Also made it a static inner class, so dependencies are explicit.

Change-Id: I32e761365092e06b5ed5274718ba1c70a64e8247
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384318448,1384318448,7d4765368495e92c0d5ee86ace1f9f90672f55af
7d4765368495e92c0d5ee86ace1f9f90672f55af,7d476536,Remove unused longclick functionality,"Remove unused longclick functionality

Change-Id: I73003c6f91a1a4226a409bdffeac1110f83ad2e1
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384318040,1384318040,c8586e8b0e8f95a69ae4ef793cf91be1c94b40db
c8586e8b0e8f95a69ae4ef793cf91be1c94b40db,c8586e8b,Make the search box lose focus when the user goes to an article,"Make the search box lose focus when the user goes to an article

Change-Id: Ia2b13628b780740321c1052ee95f895b4260e7c8
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384317917,1384317970,9e1f63097cf1ae55219b841779f40d70871fd896
9e1f63097cf1ae55219b841779f40d70871fd896,9e1f6309,Do not trigger search if search text has not changed,"Do not trigger search if search text has not changed

Happens when you were reading something and then roatet the
screen.

Also handles the case when you have the search suggestions
open and then rotate the screen.

Change-Id: Icd667f6440eb8ba8a1e78d15b27d2247dfeed590
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384293033,1384317727,359c595ce09b1b8680822e3b6f3dbb9c0c627df4
359c595ce09b1b8680822e3b6f3dbb9c0c627df4,359c595c,Rewrite Section#toHtml to use StringBuilder,"Rewrite Section#toHtml to use StringBuilder

Does not create a lot of large strings that are then just
discarded.

Change-Id: I293cff04aa7653d0f14353d602af8fc13a161105
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384311645,1384311645,a1a6bf9c750aa61cf138cb27b9bc5ebf52a535fd
a1a6bf9c750aa61cf138cb27b9bc5ebf52a535fd,a1a6bf9c,Add tests for ParcelableLruCache,"Add tests for ParcelableLruCache

Also made the ParcelableLruCache more robust, fixing some crashes
found by failing tests.

Change-Id: Iec85060e184614658eed53e112f58fca919489b9
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384305312,1384305312,61f0072e0e2ffbc6e5aa77ce521f6e24060835c8
61f0072e0e2ffbc6e5aa77ce521f6e24060835c8,61f0072e,Cache last 4 search results,"Cache last 4 search results

Also use a custom implementation of the LRU Cache to make sure
that the cached responses survive rotations.

Change-Id: Ib41466aa6907cc5b5d151a0c9c430071e406db4f
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384291893,1384291944,2a392e7afbdebd63989af339210aaa7d5ce90bd7
2a392e7afbdebd63989af339210aaa7d5ce90bd7,2a392e7a,Make the number of threads available for a Task customizable,"Make the number of threads available for a Task customizable

Also gives search tasks 2 threads by default.

Change-Id: I7e1d4db559f39faa92641068e7ac433675dd5ef5
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384259951,1384259951,5ab00cffbc9f33b58de1fe666fd3b5b8f275ae1a
5ab00cffbc9f33b58de1fe666fd3b5b8f275ae1a,5ab00cff,Create a new package for Event objects,"Create a new package for Event objects

Change-Id: Ida796fca981466526b07bcb9a4293af4aa32726d
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384257559,1384257629,f5e839f7e778a1b83c79e58e5792fe4535c35266
f5e839f7e778a1b83c79e58e5792fe4535c35266,f5e839f7,Register and deregister the bus properly,"Register and deregister the bus properly

This prevents random IllegalStateExceptions that happen.

Change-Id: I69ce99c3ebaa212b6261f58c3463f0c7c1df4280
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384245712,1384245960,3e74522ba6cca7e335cfb012ff2df369577615c3
3e74522ba6cca7e335cfb012ff2df369577615c3,3e74522b,Localize all used strings,"Localize all used strings

Change-Id: Iea6f0ce88a722ea9071405c37293936921fed447
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384241044,1384245930,5ed27956cb232d7482f203205039373139886ebc
5ed27956cb232d7482f203205039373139886ebc,5ed27956,Set app name to Wikipedia & kill unused menus,"Set app name to Wikipedia & kill unused menus

Change-Id: Iedab69121583d4bde898c807598c7cc85dcbef65
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384240773,1384245918,0bb9e90a31616154e8ec45d5ca8b539b8dc1dc75
0bb9e90a31616154e8ec45d5ca8b539b8dc1dc75,0bb9e90a,Add preliminary search interface,"Add preliminary search interface

TODO:
- Test cancellation properly
- Get rid of localstyles.css, integrate into Extension:MobileApp
- Finalize design of search with designers
- Implement 'Quick Return' pattern when scrolling

Wikidata based search is blocked on a wbsearchentities patch
being merged, so just using opensearch API in the meantime

Change-Id: I9f9c4f127b23293666a5ccfa7b738fd6ab5c9f60
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384169691,1384173170,096ab599fcb6767d9e33410cb49144221fe34dc1
096ab599fcb6767d9e33410cb49144221fe34dc1,096ab599,Add equals methods to the value objects,"Add equals methods to the value objects

Also add some tests.

Change-Id: Icbedfd3c65a772e4e63581dc9c1c6f198b886f08
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384162214,1384173165,a79cb30045b169edf38dac741e83baa498972a20
a79cb30045b169edf38dac741e83baa498972a20,a79cb300,Fix bug in Parcelable implementation for Page class,"Fix bug in Parcelable implementation for Page class

Found + fixed with help of tests, which will be added in a future
commit.

Change-Id: I329eb655e66285f03b05c95674e77b3969a3fb13
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384100937,1384100937,d1e1edbe083d0a9747123f3439b4812d9c5f0050
d1e1edbe083d0a9747123f3439b4812d9c5f0050,d1e1edbe,Properly put a Section into a parcelable,"Properly put a Section into a parcelable

Was causing crashes when recreating a loaded page with sections
after restarting an activity.

Fixed when writing tests for Parcelable, which will follow
shortly.

Change-Id: Ie5a255e056be8e704fdfa4ab6e4f76df16370bfe
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1384047343,1384047343,fa29fdf67b3e98f928a8ebfa585a0bc1fecf6a76
fa29fdf67b3e98f928a8ebfa585a0bc1fecf6a76,fa29fdf6,Add 'loading page' progress indicator on page loads.,"Add 'loading page' progress indicator on page loads.

Also subtly animate the switch between the progress animation
and the actual contents of the page.

Change-Id: I1b787ceefe0c736e4d36fb5a3569bfca2b807c3a
TODO: Test on 2.3 devices.
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383709806,1383766609,94acec5083fe2aa269c01085845c534863c73f30
94acec5083fe2aa269c01085845c534863c73f30,94acec50,Add custom animation when navigating to a new page,"Add custom animation when navigating to a new page

Old pages slide out to the left, new ones slide in from the
right. Works when going back too.

Change-Id: I9b6eb07dc1456db6bbc7a10aa0717782fbead0ed
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383706482,1383766603,4232c9c3e666d510210bdbda537ffe6f43477eb5
4232c9c3e666d510210bdbda537ffe6f43477eb5,4232c9c3,"Add Site object, make it part of PageTitle","Add Site object, make it part of PageTitle

Change-Id: I5bc57d5a7c3e9948703f45b7ba27698237b36713
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383700605,1383702919,3b7e51bd716723c252690648a9defe299f1b48c5
3b7e51bd716723c252690648a9defe299f1b48c5,3b7e51bd,Add test cases for CommunicationsBridge,"Add test cases for CommunicationsBridge

Test and related files need to be in the wikipedia/ project
than the wikipedia-it project, since the test cases are run
with the context of the wikipedia/ project.

Also added a 'injectScript' feature to the bridge that lets
javascript be loaded dynamically at runtime.

Change-Id: Ibe0ef8f5e6efc13f56960e10b7e0de6fa9f461db
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383688751,1383691808,556b599cc544bb227f7e53d8fafee76e4d25171b
556b599cc544bb227f7e53d8fafee76e4d25171b,556b599c,Move webView initialization into the Bridge code,"Move webView initialization into the Bridge code

Since bridge cannot work witout these settings anyway...

Change-Id: Icbe24d1306c89a9bfe87bff91ca7a5745986136e
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383616878,1383684402,26688f3dc317fa538b514231cb585508e1da4158
26688f3dc317fa538b514231cb585508e1da4158,26688f3d,Add static method to parse out PageTitle from an internal link,"Add static method to parse out PageTitle from an internal link

Also added tests for the same. Does not handle fragment yet, but
it is extracted out anyway. Also does not handle URI Encoding,
which I think is best handled by doing it on the JS side.

Change-Id: Ie82cb3b9f5d12001ba57145a7f8dabe2ff186951
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383615268,1383680981,7e5d8a505733a3a922c1b8275ec5047c86fdd9a7
7e5d8a505733a3a922c1b8275ec5047c86fdd9a7,7e5d8a50,Make the PageTitle object follow design of MW's Title object.,"Make the PageTitle object follow design of MW's Title object.

The internals are different. This does almost no normalization, letting
the server side take care of that. There are a little bit of tests
to make sure that we are getting back what we think we're getting back

Change-Id: Ie72d82067604512d9f356e6f86960a7f5439e748
",,,,Yuvi Panda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383610546,1383680907,412e522af5e297f107b587b4a063bc20e49d232f
412e522af5e297f107b587b4a063bc20e49d232f,412e522a,Handle external links,"Handle external links

Change-Id: I8c94b6fe9d621c50dfd9c0c75796c939d315360b
",,,,YuviPanda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383544845,1383620436,08480ae654bf0ba13b65fd537170492593c61fe7
08480ae654bf0ba13b65fd537170492593c61fe7,08480ae6,Do not keep all of past page fragments fully in memory,"Do not keep all of past page fragments fully in memory

We're still saving their state, so the pages will come right back
up. We might want to discard them after some depth to preserve
memory, but that can come later.

This means we lose the scroll position when you hit back, but
that needs to be solved anyway in the 'fragment re-created'
case for supporting rotates, etc - so will get to it eventually.

Change-Id: I0f4368bf9cd2b6d5365e1c8db28a3c140c07863f
",,,,YuviPanda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383542860,1383620436,5afbdca3741a9829e5561fc4a336669a719c4f26
5afbdca3741a9829e5561fc4a336669a719c4f26,5afbdca3,Handle links being clicked,"Handle links being clicked

Uses Otto for communication between activities. Much cleaner.

Change-Id: I23aff52790af11109aa80ee2d248a01216e342d8
",,,,YuviPanda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383542059,1383620431,aa1e15a98ec484b480094e0fd6d36a5070aa6c87
aa1e15a98ec484b480094e0fd6d36a5070aa6c87,aa1e15a9,Implement a JS <-> Java bridge.,"Implement a JS <-> Java bridge.

- Two way message sending and receiving on both JS & Java ends.
- Bridge makes sure that events are fired onLoad.
- Loads pages by injecting data via JS into an empty HTML page, than
  just injecting HTML directly into the WebView.
- Set <base> URL in the base HTML page so that images load
- Load only the lead sections of articles (for now!)
- Default page html & js loaded from disk (assets)

Change-Id: Ie189816d2a9f68c3a750b175d06695e0f970c42c
",,,,YuviPanda,yuvipanda@gmail.com,Yuvi Panda,yuvipanda@gmail.com,1383533761,1383619765,e9389996fb09f26c49c646cd842d39ac86cd3e52
e9389996fb09f26c49c646cd842d39ac86cd3e52,e9389996,Check for lead section properly,"Check for lead section properly

Sections with id=0 will always be treated as the lead
Change-Id: Ib641e0438c42879ffe6b4e872aa8cc58518733d5
",,,,YuviPanda,yuvipanda@gmail.com,Brion Vibber,brion@pobox.com,1383532769,1383572202,42a70d1bae7d71a64c82f3b717e257eeaa705dfa
42a70d1bae7d71a64c82f3b717e257eeaa705dfa,42a70d1b,Add basic fragment and activiy that can show a stack of pages,"Add basic fragment and activiy that can show a stack of pages

Change-Id: I0e0a5eb7b23f87fb4eacf9a8e69ceb6319b60174
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383345603,1383345603,e13777eaf32cc05ac5e3da59dc85e73e15038af4
e13777eaf32cc05ac5e3da59dc85e73e15038af4,e13777ea,Implement Parcelable on Page and Section objects,"Implement Parcelable on Page and Section objects

Change-Id: I74b4248fd51057386b60f176448a90ffd3708029
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383345544,1383345544,471d1eda5fe99cce6ef48d27037f848774fd3e0f
471d1eda5fe99cce6ef48d27037f848774fd3e0f,471d1eda,Change app's theme to Holo Light,"Change app's theme to Holo Light

Change-Id: Ib00121df0c676f0dcdaee0cd4885dc29dc907d31
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383345523,1383345523,0809ca3364cfdb08b34786f853629a04471502f3
0809ca3364cfdb08b34786f853629a04471502f3,0809ca33,Make PageTitle object parcelable,"Make PageTitle object parcelable

Change-Id: If236c119178f325b9eea7ae47c66858359c64a7b
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383271327,1383271327,0378508c6708b794ff0d2a0079cad43d0e2e32bc
0378508c6708b794ff0d2a0079cad43d0e2e32bc,0378508c,Add code to fetch and parse a Page,"Add code to fetch and parse a Page

Tests connect to english wikipedia directly, can be considered to
be slightly flaky.

Dependent on Iafdcc85d8c8ac030873bfe4e7f3675e8c868c45f

Change-Id: I83b393d6b37f5e47e05913f111d04e8cdb750f85
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383268140,1383268240,b852bf93e0814256ac5510ef0e41c4a450ea1d00
b852bf93e0814256ac5510ef0e41c4a450ea1d00,b852bf93,Add internet permissions to both the modules,"Add internet permissions to both the modules

Change-Id: Ie52a558985b7a6aa8a19a3e973e8ef37fe750506
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383267516,1383267548,5d6a93aa0651b76a6ecd4ac4b96dec152e95f243
5d6a93aa0651b76a6ecd4ac4b96dec152e95f243,5d6a93aa,Make default implementation of onCaught throw an Exception,"Make default implementation of onCaught throw an Exception

Since otherwise exceptions are silently swallowed unless you
explicitly catch them.

Change-Id: Ib52eebf320f7702ad4387045aa21e61e3da4b39d
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383266782,1383266782,18fde89d1dcc4236a14e1ebf23f56ea1cc9049cb
18fde89d1dcc4236a14e1ebf23f56ea1cc9049cb,18fde89d,Add test to verify SaneAsyncTask exception handler thread affinity,"Add test to verify SaneAsyncTask exception handler thread affinity

Change-Id: Ibec1ffbb3e6bff5c238b3fb715054309f28e2b5f
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383202521,1383205266,8d45be1fad46b96eac8d743bd797b062757ffdb4
8d45be1fad46b96eac8d743bd797b062757ffdb4,8d45be1f,Rename the new AsyncTask to be less of a mouthful.,"Rename the new AsyncTask to be less of a mouthful.

Also pretty accurately named, I'd think :)

Change-Id: I378991ee547eaf7206b8ecc0ce721fc7a6bbb678
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383201948,1383205261,3c492be14b185309dbdad658549162ac05ff46bd
3c492be14b185309dbdad658549162ac05ff46bd,3c492be1,Make all AsyncTask based tests run on the UI Thread,"Make all AsyncTask based tests run on the UI Thread

Apparently AsyncTask does not work reliably when called from
non UI threads. This makes sure that the execute method is
always called from the UI thread.

Change-Id: I8349789a24d1f394f4c8a063203c1aa4389cfbfd
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383201691,1383205181,07947e555283579ecd909b70ba2fcdd1462e8e2b
07947e555283579ecd909b70ba2fcdd1462e8e2b,07947e55,Add tests for thread affinities of Safe AsyncTask,"Add tests for thread affinities of Safe AsyncTask

This ensures that methods that shouls be running on the UI thread
are running on the UI Thread, and methods that should not be are
not running on the UI Thread.

The Test Cases class now inherits from ActivityUnitTestCase because
AsyncTask needs to be started from the UI thread, if not the
onPostExecute method is not run. Known semi-bug.

Change-Id: I816e8ba9cc77c3a36ac17b6eac18fa2d9ab03152
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383179980,1383205175,0cfd241a71eea459307dc2acfc8757292f620055
0cfd241a71eea459307dc2acfc8757292f620055,0cfd241a,Remove AppCompat dependency for now,"Remove AppCompat dependency for now

Maven Android's aar support still seems a little lacking, and
we are going to be 4.0 only for now anyway. This randomly causes
tests to fail at runtime because of not being able to locate the
resources in that project (since it is imported as a jar).

Change-Id: I618b25167659afb7fddf8b86a4700fd733e32355
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383179815,1383179815,0f89e8a0659c6902364f5b2808ac980b3a528d1d
0f89e8a0659c6902364f5b2808ac980b3a528d1d,0f89e8a0,Remove random cruft that should never have been commited,"Remove random cruft that should never have been commited

Change-Id: I980f329e59776e053f1643c51867f39a91044532
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383171846,1383171846,64c9949d696e2603f7d0141e6e58e29246b17771
64c9949d696e2603f7d0141e6e58e29246b17771,64c9949d,Initial commit,"Initial commit

Has an initial cut of the Safe AsyncTask replacement that
also does proper exception surfacing. Couple of tests included.

Also contains a stub main activity.

mvn test does not run any of the tests yet. Need to be run from
an IDE specifically.

Change-Id: Ibc74b5bf2410e99991e4189b3c0b16e5f12df959
",,,,YuviPanda,yuvipanda@gmail.com,YuviPanda,yuvipanda@gmail.com,1383168253,1383168368,a82d2a97ac695cf422e9d46fc013ddb01527ce62
a82d2a97ac695cf422e9d46fc013ddb01527ce62,a82d2a97,stub readme reference the java-mwapi project where work is starting,"stub readme reference the java-mwapi project where work is starting

Change-Id: Ib621e4b727fee7359f9247bb19ae0b486e4c7c82
",,,,Brion Vibber,brion@pobox.com,Brion Vibber,brion@pobox.com,1383165744,1383165762,64cbb54d76e494ca0c097e1d06d00c7dcc1a0e57
64cbb54d76e494ca0c097e1d06d00c7dcc1a0e57,64cbb54d,Add .gitreview,"Add .gitreview
",,,,Christian Aistleitner,christian@quelltextlich.at,Christian Aistleitner,christian@quelltextlich.at,1382711581,1382711581,
