id,short_id,title,message,additions,deletions,total,author_name,author_email,committer_name,committer_email,authored_date,committed_date,parent_ids
2d7fe007206a203915059cfc334294ae2cfb4354,2d7fe007,telegps: update docs for replay menu item,"telegps: update docs for replay menu item
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1402818646,1402818646,6abbb984cebf284e86af3d3f49984a8486e2b8ed
6abbb984cebf284e86af3d3f49984a8486e2b8ed,6abbb984,telegps ui: replace freq with replay speed control,"telegps ui: replace freq with replay speed control

Allow control of the replay speed during TeleGPS log replays.
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1402816133,1402818145,2517e0b9875935f47a3772daf2a85fbf95b9d8d6
2517e0b9875935f47a3772daf2a85fbf95b9d8d6,2517e0b9,"telegps ui: Add a ""Replay"" menu item","telegps ui: Add a ""Replay"" menu item

Allow replaying saved logs from the GUI as well as the command line.
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1402816236,1402818144,92943bf4536d4167edd097e61de5e6b4f29130f8
92943bf4536d4167edd097e61de5e6b4f29130f8,92943bf4,micropeak: Make statistics entries un-editable,"micropeak: Make statistics entries un-editable

Otherwise you can actually type in the various fields.x

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402785860,1402785860,1fc3032d688cbb7c09c1dffde30cc815f3594e29
1fc3032d688cbb7c09c1dffde30cc815f3594e29,1fc3032d,"alotsuilib: Remove old ""mega"" and ""mini"" file extensions from data chooser","alotsuilib: Remove old ""mega"" and ""mini"" file extensions from data chooser

We never shipped AltosUI which stored mega/mini files in different extensions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402784407,1402784407,c11b2f5caa3fbe2bc977e716ec1c3ccee9e75884
c11b2f5caa3fbe2bc977e716ec1c3ccee9e75884,c11b2f5c,altosui/telegps: Switch to AltosUIIndicator and AltosUIFlightTab,"altosui/telegps: Switch to AltosUIIndicator and AltosUIFlightTab

Removes replicated code across all flight tabs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402782073,1402782131,f5887a3e7cf993e23dbb1e0f6b9ebece78c34413
f5887a3e7cf993e23dbb1e0f6b9ebece78c34413,f5887a3e,altosuilib: Add AltosUIFlightTab class,"altosuilib: Add AltosUIFlightTab class

This covers most of the common functions for all flight status display tabs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402782024,1402782024,8250777e6e869bcee9781691caa1f2a7cfb33b43
8250777e6e869bcee9781691caa1f2a7cfb33b43,8250777e,altosuilib: Add more options to AltosUIIndicator to suit AltosUI,"altosuilib: Add more options to AltosUIIndicator to suit AltosUI

This makes AltosUIIndicator capable of displaying most stuff in AltosUI

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402781966,1402781966,19273a4a341342ca6b5d65cfc490d92cbf23356f
19273a4a341342ca6b5d65cfc490d92cbf23356f,19273a4a,altosuilib: Make sure only one thread is closing serial device,"altosuilib: Make sure only one thread is closing serial device

Multiple closers can cause a crash by freeing the libaltos device twice

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402781880,1402781880,2903f0911e79e381c6125022bb84096321c258eb
2903f0911e79e381c6125022bb84096321c258eb,2903f091,altosuilib: provide getName() for AltosInfoTable,"altosuilib: provide getName() for AltosInfoTable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402781855,1402781855,242e968a6982f2ceaa79780cbeec8c4e21321b44
242e968a6982f2ceaa79780cbeec8c4e21321b44,242e968a,"altosuilib: In graph, show zero sats in view as 0 instead of MISSING","altosuilib: In graph, show zero sats in view as 0 instead of MISSING

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402781809,1402781809,c7553c54765dcc9ac532fe52aae9594b2ad5e560
c7553c54765dcc9ac532fe52aae9594b2ad5e560,c7553c54,altosuilib: Require all flight display classes to provide a name,"altosuilib: Require all flight display classes to provide a name

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402781771,1402781771,14f0faae48849ff6f1e326a294b54c504c730bb9
14f0faae48849ff6f1e326a294b54c504c730bb9,14f0faae,"altoslib: When GPS disappears, set range and elevation to MISSING","altoslib: When GPS disappears, set range and elevation to MISSING

Use MISSING instead of bogus values so that displayers can tell what
to do.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402781699,1402781699,451950bba9ee3b25b5d0c6e5f0b55f08a5b29f73
451950bba9ee3b25b5d0c6e5f0b55f08a5b29f73,451950bb,altoslib: Add units converters for latitude and longitude,"altoslib: Add units converters for latitude and longitude

Makes display of these values consistent across all instances

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402781638,1402781683,ae7084f5199318dc6582e212492a50cfda1cebb8
ae7084f5199318dc6582e212492a50cfda1cebb8,ae7084f5,doc: TeleGPS docs are complete,"doc: TeleGPS docs are complete

All TeleGPS features should now be documented to some degree

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402724160,1402724160,bfbabfa60f3cedd994f693867bce56aad05be02a
bfbabfa60f3cedd994f693867bce56aad05be02a,bfbabfa6,telegps: Allow TeleGPS preferences to have a custom title and label,"telegps: Allow TeleGPS preferences to have a custom title and label

Don't just inherit the AltosUI ones

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402722297,1402722297,536db8d03aedb45698c42418c50a46d609fc98ad
536db8d03aedb45698c42418c50a46d609fc98ad,536db8d0,doc: Add a bunch more stuff to the telegps docs,"doc: Add a bunch more stuff to the telegps docs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402722275,1402722275,9a6a3c34293eac6442f766e13ce148f595e891eb
9a6a3c34293eac6442f766e13ce148f595e891eb,9a6a3c34,altosuilib: Make map-cache per-window instead of global,"altosuilib: Make map-cache per-window instead of global

This consumes more memory, but avoids cache conflicts between windows

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402719993,1402719993,92895c87bc3d97bf4990f1feda0bd8b07da4c405
92895c87bc3d97bf4990f1feda0bd8b07da4c405,92895c87,telegps: Shuffle menu entries around,"telegps: Shuffle menu entries around

I think this makes them a bit more logical

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402719941,1402719941,fb2d0c1ef98d9df3f64fb756d78392ce63a73435
fb2d0c1ef98d9df3f64fb756d78392ce63a73435,fb2d0c1e,altosdroid: Improve voice for TeleGPS,"altosdroid: Improve voice for TeleGPS

This avoids making lots of useless voice announcements for TeleGPS

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402700048,1402700538,191ea4a7bbcb22d70c648a9ba746f1061e6f74cb
191ea4a7bbcb22d70c648a9ba746f1061e6f74cb,191ea4a7,altosdroid: Don't crash when the map is touched,"altosdroid: Don't crash when the map is touched

The map 'canScroll' method was crashing when dereferencing a null
value somewhere. Just check all of them and bail instead of crashing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402700010,1402700010,3f7e885055f8a97f334e0cd3163b760b174114b6
3f7e885055f8a97f334e0cd3163b760b174114b6,3f7e8850,telegps: Add status tab,"telegps: Add status tab

This includes pad-relative information, battery voltage and version information

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402698210,1402698210,876acbdc22ff93c22836f789e0b6394eb19e0da3
876acbdc22ff93c22836f789e0b6394eb19e0da3,876acbdc,altoslib: Correctly save firmware version in AltosState,"altoslib: Correctly save firmware version in AltosState

It wasn't getting cloned

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402698145,1402698145,3bfba8f9dbc1627a317804713f83b9d06566d008
3bfba8f9dbc1627a317804713f83b9d06566d008,3bfba8f9,altoslib: Add conversion class for voltages,"altoslib: Add conversion class for voltages

Provide a common presentation for voltage values

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402698088,1402698129,7ed63b6c3d5878a59f52f4114b5b01942735805f
7ed63b6c3d5878a59f52f4114b5b01942735805f,7ed63b6c,altosuilib: Build some common classes for displaying values in flight window,"altosuilib: Build some common classes for displaying values in flight window

Right now, all of the flight displays have piles of custom code for
displaying values. These new widgets should be able to replace most of
that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402698020,1402698020,a21dbb05fad2625d17bc2302faa96dc295e6ed7c
a21dbb05fad2625d17bc2302faa96dc295e6ed7c,a21dbb05,telegps: Show flight number in monitor window,"telegps: Show flight number in monitor window

This lets the user find the flight by number

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402644518,1402644518,8cb41ce9a64029b611b3595c86a4a8e74b952ff4
8cb41ce9a64029b611b3595c86a4a8e74b952ff4,8cb41ce9,telegps: Disconnect telemetry device when closing monitor window,"telegps: Disconnect telemetry device when closing monitor window

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402644489,1402644489,fd9ae83492648c5d39f60bdcff15481efb365701
fd9ae83492648c5d39f60bdcff15481efb365701,fd9ae834,altoslib: Remove telem monitoring when closing log file,"altoslib: Remove telem monitoring when closing log file

If we don't remove the telemetry monitor, the telemetry device will
still be sending telemetry, which isn't good.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402644439,1402644439,07baa7596b36cf808cd1ee26ff158b1cf8585294
07baa7596b36cf808cd1ee26ff158b1cf8585294,07baa759,altoslib: Call state.set_serial first for telemetry parsing,"altoslib: Call state.set_serial first for telemetry parsing

If we ever get around to supporting multiple simultaneous remote
devices, we'll need to notice that the serial changed right away

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402642906,1402642906,f49540acd48292bd9f68ded647561d0e800c619d
f49540acd48292bd9f68ded647561d0e800c619d,f49540ac,altos/telegps: Create new flight if current flight is erased,"altos/telegps: Create new flight if current flight is erased

telegps is unique in that USB may be connected while a flight is
active and sensible things should happen. If a flight is being
recorded and gets erased, then a new flight should be started.

This is done by hooking in the flight erase code and calling out to
the tracker code to figure out whether to switch to a new flight or not.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402642777,1402642777,8117ba3553789a2bae9beb92fbe9e14e3cc79389
8117ba3553789a2bae9beb92fbe9e14e3cc79389,8117ba35,altos: Define ao_log_mutex in ao_log.c rather than every log product,"altos: Define ao_log_mutex in ao_log.c rather than every log product

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402642567,1402642567,dcaaf51245b44a440ee8590512f71195c30c16ae
dcaaf51245b44a440ee8590512f71195c30c16ae,dcaaf512,altos/telegps: Keep ring of recent GPS positions to detect motion quickly,"altos/telegps: Keep ring of recent GPS positions to detect motion quickly

Instead of comparing only against the last logged value, keep a ring
and start logging as soon as we move away from the furthest one in the ring.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402635253,1402635253,740d964ab82da8695c04650926afee4a0905011c
740d964ab82da8695c04650926afee4a0905011c,740d964a,altos/telegps: Set default log to 496kB for 4 logs,"altos/telegps: Set default log to 496kB for 4 logs

This leaves space for four flight logs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402635187,1402635187,77b5c0cc7f085aa3c0fada5d4a943eeaf16cf6e0
77b5c0cc7f085aa3c0fada5d4a943eeaf16cf6e0,77b5c0cc,altos: Show current flight number for TeleGPS,"altos: Show current flight number for TeleGPS

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402635133,1402635133,bfdaa95cb72c833896076d4e1a4bfe61d9549fed
bfdaa95cb72c833896076d4e1a4bfe61d9549fed,bfdaa95c,debian: Fix build depends icotool -> icoutils,"debian: Fix build depends icotool -> icoutils

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402613960,1402613960,7e911c2afff78db2e385c6346c90bfcd72a8f3fb
7e911c2afff78db2e385c6346c90bfcd72a8f3fb,7e911c2a,altos/telegps: Don't log data when plugged in to USB,"altos/telegps: Don't log data when plugged in to USB

We don't want to accidentally log stuff when you're just trying to
charge the battery.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402608842,1402608842,7d77d83685cbfce5323767bbfae3bd18be175ffc
7d77d83685cbfce5323767bbfae3bd18be175ffc,7d77d836,telegps: Don't re-add frequency menu when already present.,"telegps: Don't re-add frequency menu when already present.

If the receiver disappears, we'll stop tracking, but won't pull the
frequency menu down. Doing that would take a bit of work, and it
doesn't seem worth the effort. As a kludge-around, avoid re-creating
the frequency menu if it's already displayed when we connect to
another device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402608735,1402608735,8044eb8e23366e91c741060939baff5137f841c7
8044eb8e23366e91c741060939baff5137f841c7,8044eb8e,altosui/telegps: Reduce CPU time needed for flight displays,"altosui/telegps: Reduce CPU time needed for flight displays

Don't update displays which aren't shown; track hierarchy changes to
trigger display from most recent state data.

Don't update values which haven't changed; remember previous values
and compare with new before updating widget contents.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402607528,1402607528,e00ffe6ab6197ab48ba8ce3cf71a197f7215649f
e00ffe6ab6197ab48ba8ce3cf71a197f7215649f,e00ffe6a,doc: Add TeleGPS screenshots,"doc: Add TeleGPS screenshots

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402554535,1402554535,c7774114f7bc62e2100c7575b1dcf3536ed56343
c7774114f7bc62e2100c7575b1dcf3536ed56343,c7774114,doc: Update altusmetrum docs and screen shots for 1.4,"doc: Update altusmetrum docs and screen shots for 1.4

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402554516,1402554516,1ed591c7bdf19fe54bbde1827d0717f0ae51e003
1ed591c7bdf19fe54bbde1827d0717f0ae51e003,1ed591c7,telegps: Remove 'Flight' from titles,"telegps: Remove 'Flight' from titles

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402554436,1402554436,0495f1b5282d8f7449cbbc1dbf99d63818d7c03c
0495f1b5282d8f7449cbbc1dbf99d63818d7c03c,0495f1b5,altos/telegps: Build .ihx versions for TeleGPS,"altos/telegps: Build .ihx versions for TeleGPS

Needed to load with java

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402554396,1402554396,6f306b267f63d0f59fb77b1ce41c678042dd6802
6f306b267f63d0f59fb77b1ce41c678042dd6802,6f306b26,altosuilib: Repaint map when starting line draw,"altosuilib: Repaint map when starting line draw

Starting line draw will remove any existing line, so repaint to get
rid of it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402553086,1402553086,efb6a3d5ed12f8061a48a66efcfe066e68eaf792
efb6a3d5ed12f8061a48a66efcfe066e68eaf792,efb6a3d5,altoslib: Report GPS height when baro height is not available,"altoslib: Report GPS height when baro height is not available

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402553051,1402553051,57272609b0d2890029fdeceeca14da93cebdb471
57272609b0d2890029fdeceeca14da93cebdb471,57272609,altosui: Don't list tracker parameters when configuring altimeter,"altosui: Don't list tracker parameters when configuring altimeter

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402547843,1402547843,bfc0c65c9f9ec9547d71016fc897ba35bdb414f8
bfc0c65c9f9ec9547d71016fc897ba35bdb414f8,bfc0c65c,altosuilib: Handle font and units changes in maps and stats table,"altosuilib: Handle font and units changes in maps and stats table

Add AltosFontListener and AltosUnitsListener bits as needed

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402544209,1402544634,2182c49298e0862a60dea104450d5f74dbeaeeb2
2182c49298e0862a60dea104450d5f74dbeaeeb2,2182c492,doc: Update 1.4 release notes to include a few more changes,"doc: Update 1.4 release notes to include a few more changes

pyro firing time.
flight erase on TeleMega/TeleMetrum v2

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402541844,1402541844,d744e588b7504f314e39b1407152d11c031673c9
d744e588b7504f314e39b1407152d11c031673c9,d744e588,altosui: Add pyro firing time configuration,"altosui: Add pyro firing time configuration

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402541497,1402541497,fcbfb3aea20e564045fc6a86f978cacabfc73226
fcbfb3aea20e564045fc6a86f978cacabfc73226,fcbfb3ae,"altosdroid: Altosdroid build doesn't work in parallel, so stop trying","altosdroid: Altosdroid build doesn't work in parallel, so stop trying

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402538289,1402538289,c661d5de7d9c8e430211e0f97ab0bf3f09a1a543
c661d5de7d9c8e430211e0f97ab0bf3f09a1a543,c661d5de,altos: Re-enable telemini v2.0 builds,"altos: Re-enable telemini v2.0 builds

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402538022,1402538022,18b0f0966dfc4d1a716d4faea6f661bd3594bd94
18b0f0966dfc4d1a716d4faea6f661bd3594bd94,18b0f096,altos/telemini-v2.0: Disable beep frequency config on TeleMini v2.0,"altos/telemini-v2.0: Disable beep frequency config on TeleMini v2.0

Not enough flash otherwise.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402537990,1402537990,ac5b15692874ea3f7b3814250ab49c68786aa982
ac5b15692874ea3f7b3814250ab49c68786aa982,ac5b1569,altosuilib: Remove old widget-based map UI,"altosuilib: Remove old widget-based map UI

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402537879,1402537879,7a70e6fe3a11382d7f6653d19afac9ceb563db3b
7a70e6fe3a11382d7f6653d19afac9ceb563db3b,7a70e6fe,altos: Disable TeleMini v2.0 build for now,"altos: Disable TeleMini v2.0 build for now
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402537807,1402537807,a8325483adb8d9ffda62d3f4900cf52bde70ff62
a8325483adb8d9ffda62d3f4900cf52bde70ff62,a8325483,altoslib: Use GPS seconds as an additional sort key for TeleGPS eeprom,"altoslib: Use GPS seconds as an additional sort key for TeleGPS eeprom

Long idle periods with TeleGPS can easily overflow 16 bits of tick
count. Using the GPS seconds provides an additional sort which will
span the tick wrap-around.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402537691,1402537691,db2443fdbf65b65703217174303027c439124a83
db2443fdbf65b65703217174303027c439124a83,db2443fd,altosuilib: Rewrite map GUI bits,"altosuilib: Rewrite map GUI bits

Use a single large Canvas and draw images on top by hand.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402537607,1402537607,ac33ca137551e32235cd2a0304da4b5e7af51a44
ac33ca137551e32235cd2a0304da4b5e7af51a44,ac33ca13,telegps: Add statistics tab to graph UI,"telegps: Add statistics tab to graph UI

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402425363,1402425363,73249dbf16382c91c2a220ff852a4f099fe0de3d
73249dbf16382c91c2a220ff852a4f099fe0de3d,73249dbf,altosuilib: Move AltosFlightStatsTable to altosuilib,"altosuilib: Move AltosFlightStatsTable to altosuilib

So that TeleGPS can share it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402425330,1402425330,9ef32b103c5c312aaa90b6546e504f2edeb1f99a
9ef32b103c5c312aaa90b6546e504f2edeb1f99a,9ef32b10,altosuilib: Skip voice announcements for invalid values,"altosuilib: Skip voice announcements for invalid values

When height and speed values aren't available, don't say anything

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402425261,1402425261,90686853e46b7f0df9bdaf671f859819eef926e0
90686853e46b7f0df9bdaf671f859819eef926e0,90686853,"altosui: Show ""Missing"" instead of huge numbers in descent/landed tabs","altosui: Show ""Missing"" instead of huge numbers in descent/landed tabs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402425177,1402425177,7bdd0deabaae38ddfecd1ea2ea8deaf9af40b2ac
7bdd0deabaae38ddfecd1ea2ea8deaf9af40b2ac,7bdd0dea,altoslib: Use GPS speed/height values when other sensors are missing,"altoslib: Use GPS speed/height values when other sensors are missing

This lets TeleGPS report height/speed values without needing to
customize every AltosState user to pull out GPS values when the other
sensors aren't present.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402425113,1402425113,6fc58142d2a108c91d257eb0175098bf082834f9
6fc58142d2a108c91d257eb0175098bf082834f9,6fc58142,altosuilib: Split battery graph enable out from other adc enables,"altosuilib: Split battery graph enable out from other adc enables

This lets TeleGPS just show the battery voltage values without also
adding enable lines for the other flight computer ADC values like
ignitor voltages.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402425036,1402425036,9d39bbd22e6cde1bbb39e7b5450f297d47365769
9d39bbd22e6cde1bbb39e7b5450f297d47365769,9d39bbd2,altoslib: Check for time going backwards when replaying from file,"altoslib: Check for time going backwards when replaying from file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402420783,1402420783,ff13cf1359e1f4ae33b16a5867fd364993566b65
ff13cf1359e1f4ae33b16a5867fd364993566b65,ff13cf13,altoslib: Add new 'stateless' flight state for TeleGPS,"altoslib: Add new 'stateless' flight state for TeleGPS

TeleGPS has no flight state, so add a new 'stateless' state for code
to handle this case differently than any of the existing states

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402420724,1402420724,871fb4753a3b54cc2e22309e80e24dfe9cc54511
871fb4753a3b54cc2e22309e80e24dfe9cc54511,871fb475,altoslib: TeleGPS no longer logs satellite information,"altoslib: TeleGPS no longer logs satellite information

This doubles the amount of space available to log position information

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402420547,1402420547,5f2029bd4e31289fb03e6af39abdbc16f8b8fa78
5f2029bd4e31289fb03e6af39abdbc16f8b8fa78,5f2029bd,altoslib/altosui/telegps: Switch TeleGPS config to motion/interval,"altoslib/altosui/telegps: Switch TeleGPS config to motion/interval

TeleGPS had configurable boost-detect values; those have been replaced
with a configurable stop-tracking motion limit and logging/telemetry
interval value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402420447,1402420447,ae1174317fc476e39077f7dc257ec08709c6b301
ae1174317fc476e39077f7dc257ec08709c6b301,ae117431,altoslib/altosui/telegps: Change log size configuration,"altoslib/altosui/telegps: Change log size configuration

* Use new log-space value provided by firmware when available.

* Divide that up into 1-8 flights and offer those sizes as options to
  the user instead of a fixed set of sizes.

* Show how many flights each selection will store

* This also checks values provided by the user

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402420263,1402420263,44ca50a2c9404c92cc887a23dfa25b335ebe6198
44ca50a2c9404c92cc887a23dfa25b335ebe6198,44ca50a2,altos: Set TeleGPS default log size to half of avaiable memory,"altos: Set TeleGPS default log size to half of avaiable memory

LPC11U14 doesn't have on-chip config space, so we're consuming a block
of external flash. As a result, only 1984kB are available for
logging. Set the default log size to half of that to store two flights.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402419304,1402419304,9d7f4fb6af0fee843191766858e39a481aeda347
9d7f4fb6af0fee843191766858e39a481aeda347,9d7f4fb6,"altos: Simplify tracker logic, removing boost detect","altos: Simplify tracker logic, removing boost detect

This removes the ao_flight_state value from the tracker code and makes
it simply log position information when the device has moved within
the last 10 log intervals. This also changes the configuration
parameters to define what 'motionless' means, and what interval to
configure the GPS receiver for, log data and send telemetry.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402419135,1402419282,c5a7889a8da3da64deb0f118656784e0ee3fd511
c5a7889a8da3da64deb0f118656784e0ee3fd511,c5a7889a,Revert adding state to GPS location packets,"Revert adding state to GPS location packets

TeleGPS no longer has ao_flight_state

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402418824,1402418824,f6d633d73a8f826cf2a3128e3e234bd11af49718
f6d633d73a8f826cf2a3128e3e234bd11af49718,f6d633d7,"Revert ""ao-tools: Parse TeleGPS state value from gps location packet""","Revert ""ao-tools: Parse TeleGPS state value from gps location packet""

This reverts commit 428d09294ba0395fedd71346ad00fd90a4cdde97.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402418697,1402418697,da9575fce5ff4dfe83522e290973a01c43e4661f
da9575fce5ff4dfe83522e290973a01c43e4661f,da9575fc,altos: Make extra pyro channel firing time configurable,"altos: Make extra pyro channel firing time configurable

This adds a 'I' parameter to set the extra pyro channel firing time
(in ticks). This has no effect on the main/drogue channels.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402418563,1402418563,75df97b5f6ade3310618a477b685d39b7fd4666e
75df97b5f6ade3310618a477b685d39b7fd4666e,75df97b5,altos: Report total available log space in version command,"altos: Report total available log space in version command

This provides a more accurate means of determining available log space
than guessing whether some portion of the flash chip holds
configuration data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402418263,1402418333,998eae61ecf56dd6ead4ec6ad82c952ae84170df
998eae61ecf56dd6ead4ec6ad82c952ae84170df,998eae61,"Revert ""altos: Write current flight state to GPS data from GPS drivers""","Revert ""altos: Write current flight state to GPS data from GPS drivers""

This reverts commit db6003d34595fbd103d5b131912b6a797254f1c5.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402418219,1402418219,d696b34b4823647e2e91093ba9d5a351d3a52f8a
d696b34b4823647e2e91093ba9d5a351d3a52f8a,d696b34b,"Revert ""altoslib: Parse TeleGPS state value from GPS telemetry packet""","Revert ""altoslib: Parse TeleGPS state value from GPS telemetry packet""

This reverts commit d69547796caf74405f8304d23d4ae318315bbd7b.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402268910,1402268910,5c117621444bc13aebbc7dc618b4a56f620931ac
5c117621444bc13aebbc7dc618b4a56f620931ac,5c117621,Bump to version 1.3.2.4,"Bump to version 1.3.2.4
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402205850,1402205850,b33de8ba1e48d8ad0cb78f1c5692bb81da916080
b33de8ba1e48d8ad0cb78f1c5692bb81da916080,b33de8ba,altoslib: Recover battery voltage from TeleGPS configuration packet,"altoslib: Recover battery voltage from TeleGPS configuration packet

TeleGPS stuffs battery voltage in the apogee_delay slot of the
configuration packet. Pull it out from there and stick it into the
current state.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402205117,1402205426,6950506beacb1bcd5b8e54c3935174cf800e9aed
6950506beacb1bcd5b8e54c3935174cf800e9aed,6950506b,altoslib: TeleMega uses 5.6k/10k divider for v_batt,"altoslib: TeleMega uses 5.6k/10k divider for v_batt

I suspect the 15 and 27 values are a 'close approximation' for integer
work on the cc1111 devices

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402205048,1402205426,ee2216af17f23781ea912caba29fbd7e4d9ff480
ee2216af17f23781ea912caba29fbd7e4d9ff480,ee2216af,altos: Enable ADC for TeleGPS v1.0 battery voltage measuring,"altos: Enable ADC for TeleGPS v1.0 battery voltage measuring

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402204999,1402205426,ef85b3bc5300904ebfb878b1c7313a82b5b7aebf
ef85b3bc5300904ebfb878b1c7313a82b5b7aebf,ef85b3bc,altos: Encode TeleGPS battery voltage in configuration packet,"altos: Encode TeleGPS battery voltage in configuration packet

TeleGPS doesn't need apogee delay, so re-purpose it for the battery voltage

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402203463,1402205426,d69547796caf74405f8304d23d4ae318315bbd7b
d69547796caf74405f8304d23d4ae318315bbd7b,d6954779,altoslib: Parse TeleGPS state value from GPS telemetry packet,"altoslib: Parse TeleGPS state value from GPS telemetry packet

TeleGPS adds 0x80 to the state value to signify that this otherwise
unused byte contains the current state value

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402200820,1402200820,428d09294ba0395fedd71346ad00fd90a4cdde97
428d09294ba0395fedd71346ad00fd90a4cdde97,428d0929,ao-tools: Parse TeleGPS state value from gps location packet,"ao-tools: Parse TeleGPS state value from gps location packet

TeleGPS encodes state in a spare gps location packet byte, masking in
0x80 to signify that the state value is valid

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402200764,1402200764,23d9d37fd2a8f4b867f34e71a2b0f7cb090717c1
23d9d37fd2a8f4b867f34e71a2b0f7cb090717c1,23d9d37f,altos: Make telegps builds depend on ao_tracker.h,"altos: Make telegps builds depend on ao_tracker.h

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402200729,1402200729,d165079b9275c69e727a1dac996ad1788c58ed40
d165079b9275c69e727a1dac996ad1788c58ed40,d165079b,altos: Reduce tracker GPS buffer to 4 samples,"altos: Reduce tracker GPS buffer to 4 samples

We just don't have enough RAM for 8 samples.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402200693,1402200693,bd9e4f30b2a491b030246943767960ab053ac94c
bd9e4f30b2a491b030246943767960ab053ac94c,bd9e4f30,altos: Define lat/lon sum variables as 64-bit instead of 16,"altos: Define lat/lon sum variables as 64-bit instead of 16

Oops. 16 bits won't hold position information...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402200301,1402200301,08550425fca3da73d8f16de567a2c956b85d676e
08550425fca3da73d8f16de567a2c956b85d676e,08550425,altos: Use 0x80 to indicate valid state value in the GPS location packet,"altos: Use 0x80 to indicate valid state value in the GPS location packet

And only set this for tracker products; other products place state in
separate state packets

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402200146,1402200146,d8b271502bfd1301b2244e3be5e8c9917a9c624a
d8b271502bfd1301b2244e3be5e8c9917a9c624a,d8b27150,Set version to 1.3.2.3,"Set version to 1.3.2.3

Mayhem 2014 Saturday 2014-6-7

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402168666,1402169655,d550c3b3eccbb0283c588b5df69edb2e9b44b4cc
d550c3b3eccbb0283c588b5df69edb2e9b44b4cc,d550c3b3,telegps: Track graph windows as one of the TeleGPS windows,"telegps: Track graph windows as one of the TeleGPS windows

TeleGPS exits when the number of windows goes to zero; track graphing
windows in addition to the usual flight monitoring windows.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402167148,1402169655,9f2189e0b99aa32b788ecb4576dcb9bcc926f4e2
9f2189e0b99aa32b788ecb4576dcb9bcc926f4e2,9f2189e0,altosuilib: Fix crash when initializing site map cache,"altosuilib: Fix crash when initializing site map cache

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402167042,1402169655,611dc26ab4a3ee303c0253698b1e12931aa3644f
611dc26ab4a3ee303c0253698b1e12931aa3644f,611dc26a,altosuilib: Add GPS altitude as a possible graph value,"altosuilib: Add GPS altitude as a possible graph value

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402167004,1402169655,5617919091d4c4a1e627470ddab0b45cf649f7a1
5617919091d4c4a1e627470ddab0b45cf649f7a1,56179190,altosuilib: Show GPS instead of (missing) flight data for TeleGPS graphs,"altosuilib: Show GPS instead of (missing) flight data for TeleGPS graphs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402166954,1402169655,e0dfa934ba76d6f913af37999e05c20e614bd3e9
e0dfa934ba76d6f913af37999e05c20e614bd3e9,e0dfa934,altoslib: Record whether flight data includes sensor values in AltosFlightStats,"altoslib: Record whether flight data includes sensor values in AltosFlightStats

Provide a way to elide the usual flight data from a graph for TeleGPS

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402166831,1402169655,fcea12ac416b1eab11e9e8aae801358574308f73
fcea12ac416b1eab11e9e8aae801358574308f73,fcea12ac,altoslib:  Add TeleGPS log parsing code,"altoslib:  Add TeleGPS log parsing code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402166792,1402169655,537db628c0223f0c1f797705a353857c696f8051
537db628c0223f0c1f797705a353857c696f8051,537db628,altoslib: All products with logging have the 'l' command,"altoslib: All products with logging have the 'l' command

Instead of listing products with the 'l' command, just exclude
products that don't have logging from using the 'l' command to collect
the number of stored flights.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402166695,1402169654,d562a5d3a6dfea334a66ee74893b400bdca09315
d562a5d3a6dfea334a66ee74893b400bdca09315,d562a5d3,altos: Switch TeleGPS to GPS logging format,"altos: Switch TeleGPS to GPS logging format

It's customized for TeleGPS uses

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402166647,1402169654,d71e6a5fc68d5b9bc1d12bbfc3fd5a4d86fb12f2
d71e6a5fc68d5b9bc1d12bbfc3fd5a4d86fb12f2,d71e6a5f,altos: Update other CONFIG_EEPROM users to set LOG_ERASE_MARK,"altos: Update other CONFIG_EEPROM users to set LOG_ERASE_MARK

All products placing config and erase marks in on-CPU EEPROM needs to
configure the erase code correctly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402166519,1402169654,394ab536257ab58de0190b3828dd3bb897ad4474
394ab536257ab58de0190b3828dd3bb897ad4474,394ab536,altos: Write tracker logging from tracker thread directly,"altos: Write tracker logging from tracker thread directly

Also, logs 8 pre-launch GPS packets so we can get the ground position.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402166441,1402169654,db6003d34595fbd103d5b131912b6a797254f1c5
db6003d34595fbd103d5b131912b6a797254f1c5,db6003d3,altos: Write current flight state to GPS data from GPS drivers,"altos: Write current flight state to GPS data from GPS drivers

This will be useful with TeleGPS which has no other packet containing
flight state.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402166350,1402166350,302842ccda46a0a3d58b60d5c7fc82e05f614b0b
302842ccda46a0a3d58b60d5c7fc82e05f614b0b,302842cc,altos: Add TeleGPS logging format,"altos: Add TeleGPS logging format

This is mostly like the mega format, but places the flight state in a
spare byte of the GPS data and writes the gps starting location to the
flight packet.

Log data is written by the main tracker thread; there's no reason for
a separate thread given the GPS update rate and the lack of flight
controls. This means ao_log_gps has an API to be called from there,
rather than a thread to run.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402166069,1402166069,62aa51f0b785bea146d1e9331e6253de2d547c94
62aa51f0b785bea146d1e9331e6253de2d547c94,62aa51f0,altos/telemega-v1.0: Adjust config params to make flight erase work,"altos/telemega-v1.0: Adjust config params to make flight erase work

Flight erase records are supposed to be written after the ao_config to
eeprom in telemega. They were getting written in the middle of one of
the pyro channel config blocks. Put a bunch of space between the two
by making the config max 1024 bytes instead of 128 bytes.

Set the log erase marker to 0x55 -- eeprom comes from the factory as
0x00, so we use any value other than 0x55 to indicate 'unused' erase
slots.

Save space for more flight erase blocks; we've  got plenty.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402164074,1402164074,5d973570ef2324b21a64477eecb0a292652ff467
5d973570ef2324b21a64477eecb0a292652ff467,5d973570,altos: Clear out eeprom erase records when writing entry 0,"altos: Clear out eeprom erase records when writing entry 0

When writing config/erase to eeprom, there's no 'erase' operation as
on-chip eeprom is writable at a byte level. As such, we can't tell
when the erase blocks get reset when the config gets written. When
this happens, erase block 0 gets written explicitly, so just use that
call to trigger explicit erasing of the data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402163654,1402163654,1d6ca536c688d35b3cba0a829b04b93c5124b328
1d6ca536c688d35b3cba0a829b04b93c5124b328,1d6ca536,altos: Allow value other than 0 for marking erased flights,"altos: Allow value other than 0 for marking erased flights

on-chip eeprom doesn't erase to 0xff, so let TeleMega use a different
value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402160991,1402160991,b8a29d65ec605a995de1d1ec8b110d620d2f7a87
b8a29d65ec605a995de1d1ec8b110d620d2f7a87,b8a29d65,altos: Allow AO_CONFIG_MAX_SIZE to be configured. Validate it.,"altos: Allow AO_CONFIG_MAX_SIZE to be configured. Validate it.

TeleMega config is 200 bytes. AO_CONFIG_MAX_SIZE was 128. That didn't
work out well when logging erased flight information. Allow TeleMega
to use a larger value (1k), and then do a compiler hack to make sure
the defined value is at least as large as the ao_config structure.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402160721,1402160721,1873d539a8f1a0e1e8ad539af5d49a77a129b928
1873d539a8f1a0e1e8ad539af5d49a77a129b928,1873d539,altos: Move ao_tracker.c to kernel,"altos: Move ao_tracker.c to kernel

Doesn't make sense to be in product

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402152071,1402152071,6a79fe8144dcab10294caa4b0eac967eeb0d8e7e
6a79fe8144dcab10294caa4b0eac967eeb0d8e7e,6a79fe81,altos: Add telegps-v1.0 code and loader,"altos: Add telegps-v1.0 code and loader

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402029730,1402029730,0e867c67c8e2c40058ae36723e06b2ce00bd0419
0e867c67c8e2c40058ae36723e06b2ce00bd0419,0e867c67,altos/telegps-v0.3: Remove ao_flight_number from main program,"altos/telegps-v0.3: Remove ao_flight_number from main program

We've got logging enabled now

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402029639,1402029639,f830d4e9202d2a138fc9aaacb2388f94390399db
f830d4e9202d2a138fc9aaacb2388f94390399db,f830d4e9,altos/telegps-v0.3: Disable APRS by default. Set log max to 1M,"altos/telegps-v0.3: Disable APRS by default. Set log max to 1M

And adjust default radio cal to be a bit closer

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402029590,1402029590,cab6d80f11e07dd26b865727eb7ce4fd45be5c7c
cab6d80f11e07dd26b865727eb7ce4fd45be5c7c,cab6d80f,altos: Force telemetry on by default for v0.3 TeleGPS boards,"altos: Force telemetry on by default for v0.3 TeleGPS boards

These don't have a USB connect indicator, so just turn on telemetry by
default

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402029458,1402029458,102b1977c138b30c2d2592ab310f7be072130a3b
102b1977c138b30c2d2592ab310f7be072130a3b,102b1977,altos/lpc: HAS_USB_CONNECT has been changed to mean a custom pin,"altos/lpc: HAS_USB_CONNECT has been changed to mean a custom pin

The LPC stuff isn't actually very useful and TeleGPS uses a custom pin
instead, and was using HAS_USB_CONNECT to mean the same thing. That
wasn't good.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402029376,1402029376,ec3de3ac461f2380d23c5c5d948333a9a210c400
ec3de3ac461f2380d23c5c5d948333a9a210c400,ec3de3ac,altos: Fix config to set default log size for all devices with log,"altos: Fix config to set default log size for all devices with log

Not just devices with flight

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402029341,1402029341,d8f84ba82bab653c041eb85f93b9dcb1083bd849
d8f84ba82bab653c041eb85f93b9dcb1083bd849,d8f84ba8,altos: Add AO_LOG_FLIGHT packet to TeleGPS logs,"altos: Add AO_LOG_FLIGHT packet to TeleGPS logs

This encodes the flight number for tracking of data files.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402019726,1402019726,fe0aaf4413035f9de2c805c612c71188ec8c6f4d
fe0aaf4413035f9de2c805c612c71188ec8c6f4d,fe0aaf44,altos/telegps-v0.3: Add tracker task,"altos/telegps-v0.3: Add tracker task

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402019399,1402019399,6160ddadeae324b4a68db800c98c339156b63076
6160ddadeae324b4a68db800c98c339156b63076,6160ddad,altos: Add debug to tracker to force launch,"altos: Add debug to tracker to force launch

This lets us test the move from pad to drogue state

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402019341,1402019341,4a29df3f9f6c4969eb01598f6917ce78c9ce37a6
4a29df3f9f6c4969eb01598f6917ce78c9ce37a6,4a29df3f,altos: tracker distance computation flipped arguments around,"altos: tracker distance computation flipped arguments around

ao_distance takes (lat, lon, lat, lon) not (lat, lat, lon, lon)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402019247,1402019247,b619199345256cdc456f8a0b99c0ad9335e877c7
b619199345256cdc456f8a0b99c0ad9335e877c7,b6191993,altos: Fix tracker start state,"altos: Fix tracker start state

Make sure log can start by scanning existing logs
Enable RDF by default
Turn off telemetry until we decide whether to turn it on in the loop
Allow TeleGPS v0.3 to run without ADC

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402019118,1402019118,97dac0f66bc938940e6b49409d950a1736c92655
97dac0f66bc938940e6b49409d950a1736c92655,97dac0f6,altos: Stick flight state in GPS location packets,"altos: Stick flight state in GPS location packets

Useful for TeleGPS

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402019066,1402019066,eebcf07950e909e4516b08c32e289a870f772793
eebcf07950e909e4516b08c32e289a870f772793,eebcf079,altos: Have tracker average 5 GPS samples before moving to pad mode,"altos: Have tracker average 5 GPS samples before moving to pad mode

Avoids early GPS noise right after lock

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402018545,1402018545,e063701310c1ab5b766c27f24088699aad142fbd
e063701310c1ab5b766c27f24088699aad142fbd,e0637013,altos: Change tracker not-moving speed to 2m/s and document,"altos: Change tracker not-moving speed to 2m/s and document

Just adjust to avoid sensing motion from GPS noise

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402018413,1402018413,d7df6e8c47df35c0d27f1a2559ecc305ef28d271
d7df6e8c47df35c0d27f1a2559ecc305ef28d271,d7df6e8c,altos: ao_distance was overflowing when checking for longitude wrap,"altos: ao_distance was overflowing when checking for longitude wrap

Need to shift everyone right one bit to fit in 32 bits

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402018266,1402018266,2db2b75f8847ca0066bb19771653a65c9098ae52
2db2b75f8847ca0066bb19771653a65c9098ae52,2db2b75f,altos: Allow cc115l driver to be built without radio power control,"altos: Allow cc115l driver to be built without radio power control

TeleGPS just wants full power, so remove the configuration option

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402014297,1402014297,b8201bc9ba4a5f5f0522b68493cd5e7f013fd4bb
b8201bc9ba4a5f5f0522b68493cd5e7f013fd4bb,b8201bc9,altos: Include sensor logging task only on flight boards,"altos: Include sensor logging task only on flight boards

This lets TeleGPS use the logging infrastructure without wasting a
task to log sensor data

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402013668,1402013668,3e28d8a242955d65d8cd50dbba4cad4609e2e1ae
3e28d8a242955d65d8cd50dbba4cad4609e2e1ae,3e28d8a2,altos: Add tracker task for TeleGPS,"altos: Add tracker task for TeleGPS

This replaces the flight code to monitor GPS state and switch flight
states between startup/pad/drogue

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402013526,1402013634,6e152dd5c0786a650aed8f0c09babdc93895bff1
6e152dd5c0786a650aed8f0c09babdc93895bff1,6e152dd5,altos: Add ao_distance.c to compute cartesian distances on the globe,"altos: Add ao_distance.c to compute cartesian distances on the globe

This is not a great circle distance, but should be good enough for
points reasonably close together

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402013428,1402013428,8e7b8b0533e03e89425296d464b7a1a26fb63686
8e7b8b0533e03e89425296d464b7a1a26fb63686,8e7b8b05,telegps: Update icon and icon building,"telegps: Update icon and icon building

Switch to satellite icon, build the osx and windows icons.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402012356,1402012356,1bcafc452f50e518c4d86cbd6b9057c4bf7e676f
1bcafc452f50e518c4d86cbd6b9057c4bf7e676f,1bcafc45,altosuilib: Let the user hand-edit the preload map radius,"altosuilib: Let the user hand-edit the preload map radius

In case they want more than 5

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1402012229,1402012229,f59d69064763cfad2b4b15fd9660fd5fa21dba5e
f59d69064763cfad2b4b15fd9660fd5fa21dba5e,f59d6906,doc: Create release notes for version 1.4,"doc: Create release notes for version 1.4

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401777834,1401777834,cd2179cb0d71749f3637cc3ee03ccc6adfd74aae
cd2179cb0d71749f3637cc3ee03ccc6adfd74aae,cd2179cb,telegps: Trap AltosConfigDataException in telegps config,"telegps: Trap AltosConfigDataException in telegps config

This was added for pyro configuration errors in AltosUI

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401775163,1401775163,5e4087cd2fbb3ac67f90cd82edaa73c1eedbf67c
5e4087cd2fbb3ac67f90cd82edaa73c1eedbf67c,5e4087cd,altoslib: Add missing AltosConfigDataException file,"altoslib: Add missing AltosConfigDataException file
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401773011,1401773011,ace5f42b5567cff07a61b622171ac364ea8c165d
ace5f42b5567cff07a61b622171ac364ea8c165d,ace5f42b,altosui: Display error message when parsing pyro channel values fails,"altosui: Display error message when parsing pyro channel values fails

Build an exception handling chain to get numeric parse errors
propagated all the way back to the original 'save' command and up into
a dialog window, including the pyro channel, field and value that were
in error.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401772059,1401772059,206fbb99d28961ce159e3affdd5c96f5e379a603
206fbb99d28961ce159e3affdd5c96f5e379a603,206fbb99,altosui: Fix pyro channel value formatting,"altosui: Fix pyro channel value formatting

Was using %6.1f for 1 and 2 fraction digit values as the
conditional structure for figuring out which format to use was
broken.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401771982,1401771982,d20c608ce833fb8949dce527f92887775d216823
d20c608ce833fb8949dce527f92887775d216823,d20c608c,altos: Fetch/store only 8 bits for pyro state values,"altos: Fetch/store only 8 bits for pyro state values

These fields are uint8_t, not int16_t. Fetching and storing 16 bits is
a bad idea.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401771911,1401771911,b7abc063fb27da29cd7a717bbea15f92882bd205
b7abc063fb27da29cd7a717bbea15f92882bd205,b7abc063,altos: Maximum pyro configuration parameter has 4 bytes in the name,"altos: Maximum pyro configuration parameter has 4 bytes in the name

""f>="" needs four bytes, not just three to store the whole string. If
we only store three, then we never manage to compare correctly as the
null terminating byte is missing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401771851,1401771851,7385c76af46ff400b9e79a8540199be289cb57c0
7385c76af46ff400b9e79a8540199be289cb57c0,7385c76a,altos: Configuring pyro channels can use more than 48 characters,"altos: Configuring pyro channels can use more than 48 characters

Increase the command buffer from 48 to 128 bytes to hold the longest
pyro configuration commands

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401771806,1401771806,177d3c0333fd4218f01e05c78cbc5f186c8e32c0
177d3c0333fd4218f01e05c78cbc5f186c8e32c0,177d3c03,altos: Allow sparse GPS data logging for TeleGPS,"altos: Allow sparse GPS data logging for TeleGPS

When the device hasn't moved for a while, stop logging data. Start as
soon as it moves again.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401496030,1401496372,12c408c5aa1d234fe9c946078d8a343b4fda7ebb
12c408c5aa1d234fe9c946078d8a343b4fda7ebb,12c408c5,altos: Test APRS altitude encoding,"altos: Test APRS altitude encoding

Verify fixed point version against naïve implementation

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401496208,1401496372,a7b0a5613c8e59b4c672b21f8d0890fd5cffd4dc
a7b0a5613c8e59b4c672b21f8d0890fd5cffd4dc,a7b0a561,altos: Switch APRS altitude encoding computation to fixed point,"altos: Switch APRS altitude encoding computation to fixed point

APRS altitude is logarithmically encoded, so this implementation
includes a fixed point log-base-2 function along with a bit of other
fixed point stuff. This eliminates all floating point from TeleGPS,
saving around 4kB of code space.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401495891,1401496372,2d9842ee011139f5783a102ceb2b7f4c88b1a10f
2d9842ee011139f5783a102ceb2b7f4c88b1a10f,2d9842ee,telegps: Add config for tracker starting distances,"telegps: Add config for tracker starting distances

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401495462,1401496372,29d325f418b401f61580288b5947b0df8ac5b717
29d325f418b401f61580288b5947b0df8ac5b717,29d325f4,telegps: Fixup windows fat build harder,"telegps: Fixup windows fat build harder
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401426228,1401426228,b74dfc9c2cbe14593738eb994e9163d466155326
b74dfc9c2cbe14593738eb994e9163d466155326,b74dfc9c,"TeleGPS firmware isn't quite ready, don't include in windows fat build yet","TeleGPS firmware isn't quite ready, don't include in windows fat build yet
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401425291,1401425291,e60d0456f59c76ad786bc8f8065fbe84e6cae922
e60d0456f59c76ad786bc8f8065fbe84e6cae922,e60d0456,Capture windows build error messages,"Capture windows build error messages
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401424673,1401424673,48074131ad05b4646e5d2dcf30ba4a1d17e249f8
48074131ad05b4646e5d2dcf30ba4a1d17e249f8,48074131,telegps: Add missing TeleGPSGraphUI.java file,"telegps: Add missing TeleGPSGraphUI.java file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401406766,1401406766,ca7e64a09823977e1af028e9482424e643beee68
ca7e64a09823977e1af028e9482424e643beee68,ca7e64a0,Build telegps distribution bits with 'make fat',"Build telegps distribution bits with 'make fat'

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401399639,1401399639,bf684a4c290573a3aa627fd8ddf6f6ebbe5fa057
bf684a4c290573a3aa627fd8ddf6f6ebbe5fa057,bf684a4c,telegps: Add graph display,"telegps: Add graph display

Moved the altosui graph files to altosuilib and fixed things up.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401399374,1401399374,f80075be4ebb9c5fe00c24b8c7638fad23267424
f80075be4ebb9c5fe00c24b8c7638fad23267424,f80075be,java: Refactor AltosFlightDisplay units and font update handling,"java: Refactor AltosFlightDisplay units and font update handling

Make AltosFlightDisplay explicitly implement AltosFontListener and
AltosUnitsListener interfaces to make everyone use the same API. Then,
actually go implement units listeners so that changing units updates
all of the active displays immediately

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401397438,1401397438,71715337eb532a1fbe1a753240e7417d5223489f
71715337eb532a1fbe1a753240e7417d5223489f,71715337,telegps: Add info table,"telegps: Add info table

Move a couple of files from altosui to altosuilib, hook up the info
table after changing it to implement the AltosFlightDisplay interface

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401383775,1401383775,13f84be8d1568a3fc2ed5eef5dcc2093c149285e
13f84be8d1568a3fc2ed5eef5dcc2093c149285e,13f84be8,telegps: Add flash device functionality,"telegps: Add flash device functionality

Move bits from altosui to altosuilib and use those.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401342786,1401342786,8ba523cd793f2263bb1acd7a5a10f8964075bdc5
8ba523cd793f2263bb1acd7a5a10f8964075bdc5,8ba523cd,telegps: Auto-connect to any base stations plugged in at startup,"telegps: Auto-connect to any base stations plugged in at startup

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401342323,1401342323,c30130d0bdc18ee351eb3d02e51f70f8a05905b1
c30130d0bdc18ee351eb3d02e51f70f8a05905b1,c30130d0,telegps: Don't try to ship TeleGPS firmware yet,"telegps: Don't try to ship TeleGPS firmware yet

It's not quite ready. Instead, ship TBT and TD firmware.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401340003,1401340003,3871b9ac036e3adfa1da089245fc7973b268c921
3871b9ac036e3adfa1da089245fc7973b268c921,3871b9ac,telegps: Add 'Info' tab,"telegps: Add 'Info' tab

This contains a summary of the tracking info, including position,
speed and course.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401339412,1401339752,4cec35564324f909dcddeb7c0d83a2daa8223042
4cec35564324f909dcddeb7c0d83a2daa8223042,4cec3556,telegps: Hook up data download dialog,"telegps: Hook up data download dialog

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401335881,1401339752,9a4c2c7fc6af922d052e23a1b99bf847fbf9b0e9
9a4c2c7fc6af922d052e23a1b99bf847fbf9b0e9,9a4c2c7f,telegps: Add scan UI,"telegps: Add scan UI

Move scan UI bits into altosuilib, allow telegps to not show telemetry
format options.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401335339,1401339751,82a69777c67128192b50bbf77ace0a6525f49cac
82a69777c67128192b50bbf77ace0a6525f49cac,82a69777,telegps: Add preferences dialog,"telegps: Add preferences dialog

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401333844,1401339751,a7fd31842a602a8ac803d0e09efb4ffabf7a289b
a7fd31842a602a8ac803d0e09efb4ffabf7a289b,a7fd3184,telegps: Add device configuration dialogs,"telegps: Add device configuration dialogs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401333584,1401339751,d6c5904e2a05c8ae023a8cd954cf16c19c477d7d
d6c5904e2a05c8ae023a8cd954cf16c19c477d7d,d6c5904e,telegps: Use altosui's Instdrv NSIS plugin for telegps,"telegps: Use altosui's Instdrv NSIS plugin for telegps

Instead of copying it, just point at it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401332410,1401339751,fe14315d4cfccf8b53d9c4b7fa79302fd36b2c9a
fe14315d4cfccf8b53d9c4b7fa79302fd36b2c9a,fe14315d,telegps: Working towards building fat versions of telegps application,"telegps: Working towards building fat versions of telegps application

Lots more of the bits necessary for windows/macosx

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401331852,1401331852,47ff6f7528e3984012e874f91ea4f5c1d68cb465
47ff6f7528e3984012e874f91ea4f5c1d68cb465,47ff6f75,doc: Add outline of TeleGPS doc,"doc: Add outline of TeleGPS doc

No actual content, mostly a place holder to make the build work

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401331501,1401331501,e19121d5e7368ef723d4642d26c24252a386a790
e19121d5e7368ef723d4642d26c24252a386a790,e19121d5,Mark version 1.3.2.2,"Mark version 1.3.2.2

Preliminary 1.3.3 version (1.4?)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401331461,1401331461,2fa7785f9efdefaf0fc2fa8e0b03c85047613b84
2fa7785f9efdefaf0fc2fa8e0b03c85047613b84,2fa7785f,telegps: Add first version of telegps,"telegps: Add first version of telegps

Not much implemented yet, but a shell of the UI and the map

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401318510,1401318510,9b3516419981967a1c6ab956269139977ac368ca
9b3516419981967a1c6ab956269139977ac368ca,9b351641,altosui/altosuilib: Shuffle lots more code from altosui into,"altosui/altosuilib: Shuffle lots more code from altosui into
altosuilib

All of the bluetooth management stuff, and AltosSerial.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401318374,1401318374,02e657e45e217dc483a81f28020cfe65a826e9be
02e657e45e217dc483a81f28020cfe65a826e9be,02e657e4,Document the need for ~/altusmetrumllc/google-maps-api-key,"Document the need for ~/altusmetrumllc/google-maps-api-key

Stick this in Releasing

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401298989,1401307452,9b9e4bf1b51c45553879141811748e65debfc251
9b9e4bf1b51c45553879141811748e65debfc251,9b9e4bf1,"jenkins.sh: make -j 4 can fail, fix for altosui-test","jenkins.sh: make -j 4 can fail, fix for altosui-test
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1401304082,1401304082,96ffe5bbd2a1b44ddda6cb25d37d2b0a672045f5
96ffe5bbd2a1b44ddda6cb25d37d2b0a672045f5,96ffe5bb,fix for jenkins.sh,"fix for jenkins.sh
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1401299442,1401299442,5eaef0c98488fa3fbd3a6494dc15e1b793eb6f94
5eaef0c98488fa3fbd3a6494dc15e1b793eb6f94,5eaef0c9,add jenkins.sh,"add jenkins.sh
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1401298716,1401298716,324380dcf86be338c6d556b901d6889ddde97f7e
324380dcf86be338c6d556b901d6889ddde97f7e,324380dc,altosuilib: Don't try to draw to destroyed map windows,"altosuilib: Don't try to draw to destroyed map windows

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401298307,1401298307,1e5807ef428c9a0eb88ed8a3aef40098ab347d80
1e5807ef428c9a0eb88ed8a3aef40098ab347d80,1e5807ef,altosuilib: Publish AltosSiteMap.centre. Add prefetchMaps with old API,"altosuilib: Publish AltosSiteMap.centre. Add prefetchMaps with old API

This gets altosui working again.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401298072,1401298072,52ce41952c5a3c31532fa4f0d1b3155a162b76f4
52ce41952c5a3c31532fa4f0d1b3155a162b76f4,52ce4195,altosuilib: Update map preloading UI to include zoom and maptypes,"altosuilib: Update map preloading UI to include zoom and maptypes

This lets you specify precisely which maps to load.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401297398,1401297398,5c3991768d3cb17fc99ad32b2d6d8d11f0e37dfa
5c3991768d3cb17fc99ad32b2d6d8d11f0e37dfa,5c399176,altosuilib: Remove debug printf in AltosSiteMapCache,"altosuilib: Remove debug printf in AltosSiteMapCache

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401268721,1401268721,4a5ef9eaa8b809c56813625133120e7e91fc8e65
4a5ef9eaa8b809c56813625133120e7e91fc8e65,4a5ef9ea,"altoslib: When log-format is missing, use product","altoslib: When log-format is missing, use product

log-format was added for 1.0; earlier log files don't include that,
but do say which product they're from.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401267978,1401267978,3773e89c47d356c4df58edc5725c33bca89b9605
3773e89c47d356c4df58edc5725c33bca89b9605,3773e89c,"altosuilib: Add google maps API key, configured with -with-google-key","altosuilib: Add google maps API key, configured with -with-google-key

This places the actual key outside of the repository, allowing the
user to configure the name of the file containing the key. By default,
this pulls the key from $HOME/altusmetrumllc/google-maps-api-key.

With the key present, there are no longer any rate limits to loading
map data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401262944,1401262944,e6cfa25702b3dc1d492c5f1a4d0b4ba4831d30bd
e6cfa25702b3dc1d492c5f1a4d0b4ba4831d30bd,e6cfa257,altosuilib: Decompress map images asynchronously and in parallel,"altosuilib: Decompress map images asynchronously and in parallel

This speeds up loading map images from disk quite a bit, and keeps the
UI responsive while that happens as well.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401248069,1401248069,8e44580cbe978f1570d4d2ac13d3dd7cd470ecf7
8e44580cbe978f1570d4d2ac13d3dd7cd470ecf7,8e44580c,altosuilib: Add distance measuring line to site map.,"altosuilib: Add distance measuring line to site map.

Use any modifier or button other than the left one to draw a line on
the map. The length of the line is shown at the start of the line.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401230353,1401230353,c674a20432c2cb97e5bc2a3de891f78b9e172fe9
c674a20432c2cb97e5bc2a3de891f78b9e172fe9,c674a204,altos: Fake flight code changes in kernel and stm,"altos: Fake flight code changes in kernel and stm

Redirects data input from local sensors to USB sourced data, leaving
USB enabled when the computer goes into pad mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401213902,1401214009,db08e99361d82de63058d3388823f486e5fc9839
db08e99361d82de63058d3388823f486e5fc9839,db08e993,altosuilib: Add multiple zoom levels and content types to map,"altosuilib: Add multiple zoom levels and content types to map

Also changes the file format for hybrid, satellite and terrain maps to
jpg to save disk space.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401213533,1401213533,535271f7312f1a88af11d4f1dbf3d405b660f26c
535271f7312f1a88af11d4f1dbf3d405b660f26c,535271f7,"altos/test: Fix ADC structure for mega, use ao_config.h","altos/test: Fix ADC structure for mega, use ao_config.h

This switches from hand-coding the ao_config structure to using
ao_config.h and also updates the ADC structure for ao_flight_test_mega
to using the same one as telemega does natively

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401077682,1401077682,1894b51daceaf9fb6b49a0625e09a366985d15b6
1894b51daceaf9fb6b49a0625e09a366985d15b6,1894b51d,altos: Move ao_config declarations to ao_config.h,"altos: Move ao_config declarations to ao_config.h

No sense leaving these in ao.h, and it's nice to make that file smaller

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401077549,1401077549,3d5db24708b37d86eac187169e2553a408dfeb83
3d5db24708b37d86eac187169e2553a408dfeb83,3d5db247,altos: Make MS5607 PROM a public variable,"altos: Make MS5607 PROM a public variable

This will let the fake flight code update it as necessary, without
creating a new interface in ao_ms5607.c

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401077483,1401077483,4df84dd5d007120f54cbda380789306608f2fc46
4df84dd5d007120f54cbda380789306608f2fc46,4df84dd5,micropeak: Add -Xlint:unchecked to javac line,"micropeak: Add -Xlint:unchecked to javac line

This shows missing parametric type errors

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401077324,1401077324,f0216d721ed13f4d3dc608bb6ad8f83732b27c0a
f0216d721ed13f4d3dc608bb6ad8f83732b27c0a,f0216d72,"altoslib/altosuilib: Change versions to altoslib:4, altosuilib:2","altoslib/altosuilib: Change versions to altoslib:4, altosuilib:2

API has changed for these libraries, time to bump the file versions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401076898,1401077291,d63319f6f29ef714bb1d5c359c2448f63e7a4534
d63319f6f29ef714bb1d5c359c2448f63e7a4534,d63319f6,ao-tools: Add cc_usb_write function,"ao-tools: Add cc_usb_write function

This writes raw bytes to the USB port; useful for sending binary data
for flashing or the upcoming flight test stuff.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401076704,1401076704,0a6c76fc0525d6588a1d88127f0085f13a02f1af
0a6c76fc0525d6588a1d88127f0085f13a02f1af,0a6c76fc,altosui/altosuilib/altoslib: Move more stuff out of autosui. Reduce site map memory,"altosui/altosuilib/altoslib: Move more stuff out of autosui. Reduce site map memory

Prepare to share with TeleGPS application.

This also has the changes to the site map tile which cache only a few
images and regenerate the flight path on the fly, saving piles of memory

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401076511,1401076608,4ac7797d3efb9cc2d9fae88519f55e40b1050224
4ac7797d3efb9cc2d9fae88519f55e40b1050224,4ac7797d,altosui/altosuilib: Cleanup -Xlint:unchecked warnings,"altosui/altosuilib: Cleanup -Xlint:unchecked warnings

Add parametric types to avoid unchecked warnings.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1401076069,1401076357,b60a3689910731d9bdb8a431a3dcc9e99f961b35
b60a3689910731d9bdb8a431a3dcc9e99f961b35,b60a3689,altoslib: Move CSV/KML output code to altoslib,"altoslib: Move CSV/KML output code to altoslib

It's sharable, so share it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400809618,1400809618,2625a464417c8475c66101757ca2c30cd6c74e0c
2625a464417c8475c66101757ca2c30cd6c74e0c,2625a464,altos: Add config values for tracker start motion limits,"altos: Add config values for tracker start motion limits

TeleGPS switches from 'pad' to 'drogue' states after the device moves
a specified distance from the initial starting point. These values can
be configured, and this is the configuration for them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400706155,1400706155,161ae96f9ec11e2586df07c0f6d724ddc4dad76c
161ae96f9ec11e2586df07c0f6d724ddc4dad76c,161ae96f,altos/test: Parse mega ground data. Fix pyro parsing,"altos/test: Parse mega ground data. Fix pyro parsing

This gets ao_flight_test_mega working with eeprom files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400706005,1400706087,43be26603827b5930bf3e8082610cfa19b45534d
43be26603827b5930bf3e8082610cfa19b45534d,43be2660,altos/test: Get APRS generation test working again,"altos/test: Get APRS generation test working again

APRS now includes sat info, so we have to fake that up to generate an
APRS test file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400705934,1400706087,2a3846df381a5eeac8ec3327c770af502aaf4e76
2a3846df381a5eeac8ec3327c770af502aaf4e76,2a3846df,altos: Don't define ao_ignite_decivolt without igniters,"altos: Don't define ao_ignite_decivolt without igniters

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400661477,1400661793,af782e92c6a0c0a6b0fc2fa52519749a88ca8fb8
af782e92c6a0c0a6b0fc2fa52519749a88ca8fb8,af782e92,altos: Expose ao_gps_set_rate from u-blox driver,"altos: Expose ao_gps_set_rate from u-blox driver

This lets applications set the desired GPS update rate to reduce power usage

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400661400,1400661793,8b488bdd0f5c91be7e5aae1c8f0193e713734b14
8b488bdd0f5c91be7e5aae1c8f0193e713734b14,8b488bdd,altos: Fix cc115l debug build,"altos: Fix cc115l debug build

New compiler warning flags and moving to the nxp require a few minor
changes in the code to make it work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400661333,1400661792,cb228304d8df3063914ab505a530d4ea79ca027d
cb228304d8df3063914ab505a530d4ea79ca027d,cb228304,altos: Allow APRS to send just battery voltage,"altos: Allow APRS to send just battery voltage

Don't require apogee and main voltages as well

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400661267,1400661792,ca338a897ba3237652a3ae092e660f26c9e35074
ca338a897ba3237652a3ae092e660f26c9e35074,ca338a89,altos/lpc: whitespace,"altos/lpc: whitespace

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400661586,1400661792,0a3312e725d914bbba6355e07d2f1d2833d2d6c2
0a3312e725d914bbba6355e07d2f1d2833d2d6c2,0a3312e7,altos/lpc: adc code computes number of active ADC channels,"altos/lpc: adc code computes number of active ADC channels

Don't require the application to provide AO_NUM_ADC when AO_ADC_NUM is
computed automatically.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400661541,1400661792,b278a73cb54ba2f107bf91089f87c11528f017ab
b278a73cb54ba2f107bf91089f87c11528f017ab,b278a73c,altos/stm: Make stm applications depend on ao_boot.h,"altos/stm: Make stm applications depend on ao_boot.h

This should make sure they get recompiled when boot stuff changes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400661698,1400661792,f3544daf08f38aa8e28ca214a19ab7fd47c0c802
f3544daf08f38aa8e28ca214a19ab7fd47c0c802,f3544daf,altosui: Remove another beep config debug printf,"altosui: Remove another beep config debug printf

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400220012,1400220012,eeacc001ba089b4bf5552b8ef36e61a0a96efabe
eeacc001ba089b4bf5552b8ef36e61a0a96efabe,eeacc001,altosui: Remove debug printf about beep config,"altosui: Remove debug printf about beep config

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400219870,1400219870,6833e466d7d77765199bf4d21437c34a4eceb044
6833e466d7d77765199bf4d21437c34a4eceb044,6833e466,altos: stm and lpc ao_boot.h were identical. move to kernel.,"altos: stm and lpc ao_boot.h were identical. move to kernel.

These two files were absolutely identical, so share them by moving
under kernel instead.x

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400219201,1400219201,211d9af507daf9a8611ed1813415bee27e3839eb
211d9af507daf9a8611ed1813415bee27e3839eb,211d9af5,altos: Use explicit boot loader signal in ao_boot_reboot,"altos: Use explicit boot loader signal in ao_boot_reboot

Instead of just ""knowing"" that ao_boot_loader will be passed zero when
the application wants to get back to the boot loader, explicitly
define the values so that both sides always agree.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400218457,1400218720,0bf1c74e83fe49a11916b52596363f4dd56c522c
0bf1c74e83fe49a11916b52596363f4dd56c522c,0bf1c74e,doc: Document the Apogee Lockout setting,"doc: Document the Apogee Lockout setting

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400217054,1400217077,dbb0fcf6d161a9d49fe699c37a18e4c33c409b59
dbb0fcf6d161a9d49fe699c37a18e4c33c409b59,dbb0fcf6,include EasyMega Makefiles,"include EasyMega Makefiles
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1400196039,1400196039,0948f5d96456b2e7f57ad75dfc9ef455ba197163
0948f5d96456b2e7f57ad75dfc9ef455ba197163,0948f5d9,working?,"working?
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1400195948,1400195948,0fd608868aa03f81b2d902e1da13ee0b1ab20b78
0fd608868aa03f81b2d902e1da13ee0b1ab20b78,0fd60886,lose the (old) easymega-v1.0 directory in favor of my fresher 0.1,"lose the (old) easymega-v1.0 directory in favor of my fresher 0.1
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1400192597,1400192597,819f73698f57e76dca50fe4fadccebd23ffb776d
819f73698f57e76dca50fe4fadccebd23ffb776d,819f7369,altos: Make quadrature debounce per-pin rather than per-device,"altos: Make quadrature debounce per-pin rather than per-device

Debouncing per-pin means we don't lose transitions, which makes
counting a lot more precise.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400167884,1400167884,da13064382e9673e69cdfae6abbac253c9fc42fc
da13064382e9673e69cdfae6abbac253c9fc42fc,da130643,altos/telemini-v2.0: Enable beep frequency configuration,"altos/telemini-v2.0: Enable beep frequency configuration

Now that there's space for this, add it in.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400167832,1400167832,36002fc724702d34302f3cc0df593019ca8db4e0
36002fc724702d34302f3cc0df593019ca8db4e0,36002fc7,altos/telemini-v2.0: Remove old baro->alt conversion table,"altos/telemini-v2.0: Remove old baro->alt conversion table

TeleMini doesn't have two baro sensors...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400167792,1400167792,d0d29cc233b0d444782530fea15d957b2b4c45d7
d0d29cc233b0d444782530fea15d957b2b4c45d7,d0d29cc2,altos/cc1111: Switch P1_0 from a green LED to USB pullup,"altos/cc1111: Switch P1_0 from a green LED to USB pullup

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400167710,1400167710,3225fb54ec1beaf6dc8553ab4f5b86bea6bdf1f3
3225fb54ec1beaf6dc8553ab4f5b86bea6bdf1f3,3225fb54,altos/cc1111: Add support for CPU-driven USB pullup,"altos/cc1111: Add support for CPU-driven USB pullup

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400167654,1400167654,940ec6a2d5b054f68da39945a00f4d1b36d1b318
940ec6a2d5b054f68da39945a00f4d1b36d1b318,940ec6a2,altos/cc1111: Errata fix isn't needed for discontinued products,"altos/cc1111: Errata fix isn't needed for discontinued products

And, doesn't fit in memory for some of them, so don't compile it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400046379,1400046379,feb0b5f8b28767197f87e5818812d6640c1f40e6
feb0b5f8b28767197f87e5818812d6640c1f40e6,feb0b5f8,altos/cc1111: Wait for xtal to be stable,"altos/cc1111: Wait for xtal to be stable

Errata http://www.ti.com/lit/er/swrz022c/swrz022c.pdf says that the
xtal is stable bit is bogus and that you need to just delay for a while.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1400027447,1400027447,8124af8c27b2b9e446aa3a4f1da83d4db7c1ea87
8124af8c27b2b9e446aa3a4f1da83d4db7c1ea87,8124af8c,Merge remote-tracking branch 'origin/master',"Merge remote-tracking branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399962115,1399962115,"6dd7eae5e4752d2098797e96953db8923e26835b,3bcf4bdd3e3f3751ad9d517696b5573dd4593846"
6dd7eae5e4752d2098797e96953db8923e26835b,6dd7eae5,ao-tools/ao-usbload: Check image flash usage against device flash availability,"ao-tools/ao-usbload: Check image flash usage against device flash availability

For devices which report the range of valid flash addresses from their
boot loader, check the loaded image to make sure it fits within that range.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399962008,1399962008,8a114bac1145359f3953ce70f049a6be71df5300
8a114bac1145359f3953ce70f049a6be71df5300,8a114bac,altos/flash-loader: Check memory addresses against flash space,"altos/flash-loader: Check memory addresses against flash space

This validates memory read/write requests to make sure they are within
the available flash memory space.

This also reports the flash base and bounds addresses in the 'version'
command so that the loader can validate the image before attempting to
write it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399961921,1399961921,a25c34ef0a92beaa0695e0d0020eda5e26b309e2
a25c34ef0a92beaa0695e0d0020eda5e26b309e2,a25c34ef,altos/stm: Use #define'd constants for GPIO register addresses,"altos/stm: Use #define'd constants for GPIO register addresses

This lets the compiler short-circuit the tests in ao_enable_gpio and
ao_disable_gpio to save a bit of code space and time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399960598,1399960598,530894f508874f4cb3db644ca9ca679ed704f964
530894f508874f4cb3db644ca9ca679ed704f964,530894f5,altos/stm: Figure out available flash space based on chip id registers,"altos/stm: Figure out available flash space based on chip id registers

Look at the flash size and the device id registers to figure out how
much flash is available.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399960538,1399960538,2c543be5548ccda6bd29a2a7659fcc287f7a9f07
2c543be5548ccda6bd29a2a7659fcc287f7a9f07,2c543be5,altos/stm: White space fix in ao_boot_pin.c,"altos/stm: White space fix in ao_boot_pin.c
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399960475,1399960475,2f196323a2829f9537f3b339f19478127ffde623
2f196323a2829f9537f3b339f19478127ffde623,2f196323,altos/stm: Use flash address of boot loader instead of 0x0,"altos/stm: Use flash address of boot loader instead of 0x0

Flash is at 0x08000000, but when the chip boots, it can be at 0x0 as
well. Use the 0x08000000 address when rebooting to flash

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399960387,1399960387,6a6053dfed6fc1a7f50be0c62782d0050758cd0b
6a6053dfed6fc1a7f50be0c62782d0050758cd0b,6a6053df,altos: Assume all LPC products will have 32KB of flash,"altos: Assume all LPC products will have 32KB of flash

If we ever use something smaller than this, we'll need to figure out
how to tell how much memory the device has.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399960310,1399960310,d1908101241b1002fbc582b0a2c27045065a6615
d1908101241b1002fbc582b0a2c27045065a6615,d1908101,altos: Report amount of program space available in the version command,"altos: Report amount of program space available in the version command

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399960276,1399960276,3af4e824938fe07fe75c6d24d9906aebfbe578f3
3af4e824938fe07fe75c6d24d9906aebfbe578f3,3af4e824,altos: Add LED test command to pca9922 driver,"altos: Add LED test command to pca9922 driver

This lets you control the LEDs from the command line to test things.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399960241,1399960241,47750e236c45ab03f28fc3393996edb2bd4312e3
47750e236c45ab03f28fc3393996edb2bd4312e3,47750e23,ao-bringup: Use official binaries for EasyMini turnon,"ao-bringup: Use official binaries for EasyMini turnon

Don't use locally built ones, use the official ones found in
~/altusmetrumllc/Binaries to ensure that all devices are shipped with
known firmware.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399960179,1399960179,5f4a1b3e553276a4d6727c111fe290fa3690fa1e
5f4a1b3e553276a4d6727c111fe290fa3690fa1e,5f4a1b3e,ao-bringup: test-baro should accept altitudes a bit below sea level,"ao-bringup: test-baro should accept altitudes a bit below sea level

Testing baro sensors on a particularly high pressure day at Keith's
house yields altitudes down to -20m or so.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399960125,1399960125,238ddde1ffdb8521d06519306cfb76271ae552b9
238ddde1ffdb8521d06519306cfb76271ae552b9,238ddde1,atosui: Hide Callsign and RSSI tabs for devices without a radio,"atosui: Hide Callsign and RSSI tabs for devices without a radio

When doing Monitor Idle with EasyMini, it's nice to not put fields on
the screen which won't ever have useful data in them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399960075,1399960075,8d9c79f5c162e07d57d42c6ba5825a3327a911d5
3bcf4bdd3e3f3751ad9d517696b5573dd4593846,3bcf4bdd,update TeleMega turn-on script and Releasing for new stable firmware home,"update TeleMega turn-on script and Releasing for new stable firmware home
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1399937474,1399937474,cbb6f7a3abbde39163f2905badba0ae88744b104
cbb6f7a3abbde39163f2905badba0ae88744b104,cbb6f7a3,fix copyright year,"fix copyright year
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1399660225,1399660225,c49e13a7807a74bb66c83cd4a2e10eb601f59e62
8d9c79f5c162e07d57d42c6ba5825a3327a911d5,8d9c79f5,altos: Simplify quadrature tracking,"altos: Simplify quadrature tracking

Set the timer to 200Hz for a 5ms debounce interval. Then, simply look
for transitions ending in both bits in the encoder being off, which
indicates the the encoder is resting in a detent. If bit '2' is
turning off, the encoder was rotated clockwise, otherwise the encoder
was rotated counter clockwise.

This is a lot more reliable, although still not perfect.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399619139,1399619139,ef48e1bb73c791d731b0d2c0e5beef1539103049
ef48e1bb73c791d731b0d2c0e5beef1539103049,ef48e1bb,altos: Clean up trailing whitespace in ao_pad.c,"altos: Clean up trailing whitespace in ao_pad.c

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399358794,1399613112,c8ad50495e2d81209a4882dd4f82c19d9ae2ac34
c8ad50495e2d81209a4882dd4f82c19d9ae2ac34,c8ad5049,altos: Fix byte offsets in the mega AO_LOG_FLIGHT packets,"altos: Fix byte offsets in the mega AO_LOG_FLIGHT packets

Just comments, but even those should be correct

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399358730,1399613112,b22dff94778b1f15a6ad1989d526b936f0fa09ea
b22dff94778b1f15a6ad1989d526b936f0fa09ea,b22dff94,altos: ublox driver always offers course data when it has a fix,"altos: ublox driver always offers course data when it has a fix

Set the AO_GPS_COURSE_VALID bit to signal that this part of the GPS
data is valid.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399358624,1399607050,c9d6a1fbb3148f03864df6d1ed5f6b6dccd7b383
c9d6a1fbb3148f03864df6d1ed5f6b6dccd7b383,c9d6a1fb,"altosui: Add GPS course, ground speed and climb rate to graphs","altosui: Add GPS course, ground speed and climb rate to graphs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399358503,1399607050,39fbc4cb1d4c92522c90aa5e36fd62a4827d8306
39fbc4cb1d4c92522c90aa5e36fd62a4827d8306,39fbc4cb,altoslib: Parse remaining mega AO_LOG_FLIGNT and AO_LOG_GPS_TIME fields,"altoslib: Parse remaining mega AO_LOG_FLIGNT and AO_LOG_GPS_TIME fields

GPS fields past 'day' were not getting parsed. Ground values for the
IMU were not getting parsed, but a false 'temperature' value was being read.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399358324,1399607050,d2e6efa810b7fccc5af937386a40ae5af064bf26
d2e6efa810b7fccc5af937386a40ae5af064bf26,d2e6efa8,altoslib: Add a comment to remind us to fix the IMU code to deal with calibration,"altoslib: Add a comment to remind us to fix the IMU code to deal with calibration

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399358285,1399607050,d59d6787bfe26c3b18491ece602ad6cc5cf26c42
d59d6787bfe26c3b18491ece602ad6cc5cf26c42,d59d6787,altos: 8051 64 * 16 multiply function was broken for negative 64-bit,"altos: 8051 64 * 16 multiply function was broken for negative 64-bit

It was jumping around the actual multiply when the 64-bit argument was negative.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399139911,1399607050,c49e13a7807a74bb66c83cd4a2e10eb601f59e62
c49e13a7807a74bb66c83cd4a2e10eb601f59e62,c49e13a7,"relay control implemented, this project is now complete","relay control implemented, this project is now complete
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1399587866,1399587866,acaad70e3db8f0b6ae45ca8309833db57bdf5ca2
acaad70e3db8f0b6ae45ca8309833db57bdf5ca2,acaad70e,"first cut of usbrelay-v0.1 support .. LEDs wiggle, not switching relay yet","first cut of usbrelay-v0.1 support .. LEDs wiggle, not switching relay yet
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1399586951,1399586951,2dfc4bc92b11252f17103f28198a702a3fdc2b2d
2dfc4bc92b11252f17103f28198a702a3fdc2b2d,2dfc4bc9,altosui: Add configuration UI for beeper tone,"altosui: Add configuration UI for beeper tone

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399063988,1399063988,027b1470c7a2d007eaab5c8d49f772b0c7559b80
027b1470c7a2d007eaab5c8d49f772b0c7559b80,027b1470,altos: Add configurable beep tone,"altos: Add configurable beep tone

This lets you directly set the mid-range beep tone; the high and low
tones remain set off of that in the same ratio as before.

Note that none of the cc1111 products get this feature as they don't
have enough flash space anymore...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1399058767,1399063965,8e3842660274ac4bcd7b5a78f5db215222b1c4de
8e3842660274ac4bcd7b5a78f5db215222b1c4de,8e384266,"altos: For telelco discovery packets, retry 5 times with shorter timeout","altos: For telelco discovery packets, retry 5 times with shorter timeout

A timeout of 10ms is more than enough to receive a query packet, but
if we miss it during device discovery, it's a pain, so retry 5 times
to make sure we find everyone.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1398921277,1398921277,0223fced2c6d2b9f63ede6258afae46c3f55c200
0223fced2c6d2b9f63ede6258afae46c3f55c200,0223fced,ao-tools: Clean up ao-sym structure an initializers,"ao-tools: Clean up ao-sym structure an initializers

Remove unused 'default_addr' field. Use named initializers when
setting up the struct.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1398921224,1398921224,35efd4e51ece706234f80c076eb7f4f70c66098d
35efd4e51ece706234f80c076eb7f4f70c66098d,35efd4e5,ao-load: Make ao_sym static to avoid collision with ao-editaltos,"ao-load: Make ao_sym static to avoid collision with ao-editaltos

ao-load doesn't use ao-editaltos at this point, but does share the
same name for the symbol table. To make the linker happier, make the
ao-load version static.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1398921150,1398921150,fd406000659a11862e05c22dbb20cdb738f56b01
fd406000659a11862e05c22dbb20cdb738f56b01,fd406000,ao-telem: Dump orientation field from TeleMega sensor telemetry packet,"ao-telem: Dump orientation field from TeleMega sensor telemetry packet

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1398921099,1398921099,2cf65d60e1c73dbff0badbe1ee6cb43d75bf803c
2cf65d60e1c73dbff0badbe1ee6cb43d75bf803c,2cf65d60,altosui: Mark TeleMega additional pyro ignitor fired points in graphs,"altosui: Mark TeleMega additional pyro ignitor fired points in graphs

Add markers to indicate when each additional pyro channel fires

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1398921029,1398921029,ecebb3902868d1d7485d2bc99ba4140c6b90567e
ecebb3902868d1d7485d2bc99ba4140c6b90567e,ecebb390,altoslib: Track pyro firing state when reading mega eeprom files,"altoslib: Track pyro firing state when reading mega eeprom files

TeleMega records whether each pyro has been fired in the eeprom file;
track that in the AltosState record.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1398918646,1398918646,5fb246fb50e262aa81ef7eb430be9782cfcf8848
5fb246fb50e262aa81ef7eb430be9782cfcf8848,5fb246fb,altosui: Add extra ignitors to graphable objects,"altosui: Add extra ignitors to graphable objects

List all of the available extra ignitors as possible things to graph.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1398823470,1398823549,f8429152e438eb72618edaf5983ae1cd5d3d4dab
f8429152e438eb72618edaf5983ae1cd5d3d4dab,f8429152,ugly hack (just make sleep longer) to work around ttyACM* discovery issue,"ugly hack (just make sleep longer) to work around ttyACM* discovery issue
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1397401116,1397401116,3b5c4d88671e6c511fbfb1ce6b046f558dd6c2bf
3b5c4d88671e6c511fbfb1ce6b046f558dd6c2bf,3b5c4d88,altos: Switch beeping to farnsworth spacing,"altos: Switch beeping to farnsworth spacing

Use 17wpm/12wpm farnsworth spacing for the state reports. Leave the
numeric reports running slowly as those require counting.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1397349994,1397349994,8628f7e02834a476d5cb3afa4cbf8d46a4b3c513
8628f7e02834a476d5cb3afa4cbf8d46a4b3c513,8628f7e0,altosuilib: Make lines in graphs 2 units wide,"altosuilib: Make lines in graphs 2 units wide

This makes the graphs a lot easier to read.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1397349938,1397349943,9e18c524fa2d1f648f265b3c3105f5ceacf06c10
9e18c524fa2d1f648f265b3c3105f5ceacf06c10,9e18c524,altoslib/altosui/altosuilib/libaltos: Remove trailing whitespace,"altoslib/altosui/altosuilib/libaltos: Remove trailing whitespace

Just cleaning up the source code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1397259606,1397259606,7b275ddfe20f54857d7d1abb98607c406b678090
7b275ddfe20f54857d7d1abb98607c406b678090,7b275ddf,altos: Add 'microwater' product,"altos: Add 'microwater' product

This is a custom firmware spin for micropeak designed for use with
water rockets that sets the boost detect altitude to 10m instead of 30m.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1397259092,1397259092,99c729495a8cc589718607ee35d22454c6af2994
99c729495a8cc589718607ee35d22454c6af2994,99c72949,altosui: Disable flight log configuration while flights are stored,"altosui: Disable flight log configuration while flights are stored

The log code won't let you resize the maximum flight log while there
is still data on the flight computer; the code to figure that out in
the UI was busted, leaving users confused about why it wasn't working.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396853208,1396853208,4211c59e585545817b3cac02b41bb73106d6403e
4211c59e585545817b3cac02b41bb73106d6403e,4211c59e,altos: Fix nanopeak compile,"altos: Fix nanopeak compile

Nanopeak uses port B bit 3 for the LED instead of bit 4. Fix the async
code to support arbitrary bits for the serial LED.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396848457,1396848457,350d941a825d0271933de0bfdea82d3af5744c21
350d941a825d0271933de0bfdea82d3af5744c21,350d941a,altos: Provide stable binaries for MicroPeak,"altos: Provide stable binaries for MicroPeak

Publish MicroPeak .hex file to LLC repo and install it from there,
rather than rebuilding it locally. This ensures that the installed
bits don't depend on local configuration of any kind.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396840489,1396840489,2427eae5f3b429d302fbe14f708dcbc68c851954
2427eae5f3b429d302fbe14f708dcbc68c851954,2427eae5,altos: Replace C code attiny async output with inline asm,"altos: Replace C code attiny async output with inline asm

Using inline asm instead of C ensures that compiler changes will not
affect the timing of the serial data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396838887,1396838887,1d943d4cade0a40723143626abf6e67f8eca9dcb
1d943d4cade0a40723143626abf6e67f8eca9dcb,1d943d4c,altos: Build TeleBalloon v2.0 by default,"altos: Build TeleBalloon v2.0 by default

We're supporting this now, we might as well build it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396747037,1396747037,c14cfb1436c988eb0a0d26d7c4d83aeccecbc8a3
c14cfb1436c988eb0a0d26d7c4d83aeccecbc8a3,c14cfb14,ao-bringup: Split out easymini test into separate script,"ao-bringup: Split out easymini test into separate script

This lets you run the easy mini testing code without also flashing the device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396746981,1396746981,9cb10d73fee0e3f36c778fd2a9c9992b87669fe2
9cb10d73fee0e3f36c778fd2a9c9992b87669fe2,9cb10d73,altosui: Add ignitor tab for TeleMega extra ignitors,"altosui: Add ignitor tab for TeleMega extra ignitors

Show the current state of the additional ignitors in another tab;
there's not really room in the 'Pad' tab.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396746875,1396746875,ca66a035edecd7feffcd22257d3413ce0e189c07
ca66a035edecd7feffcd22257d3413ce0e189c07,ca66a035,doc: Document new voltage beeping at startup time,"doc: Document new voltage beeping at startup time
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396682893,1396682905,18148c33540cda8cb6658724a048ffd426c1a6bb
18148c33540cda8cb6658724a048ffd426c1a6bb,18148c33,Bump version to 1.3.3,"Bump version to 1.3.3

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396682422,1396682565,0d367fc24bfd0377db6f3b00a888a18245616767
0d367fc24bfd0377db6f3b00a888a18245616767,0d367fc2,altos: Report battery voltage instead of S at startup,"altos: Report battery voltage instead of S at startup

This works on everything with a beeper except TeleMetrum v1.0 which
just doesn't have enough flash space for the code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396682337,1396682551,8bd732ac9cb816630f46dd269448ff8422620df8
8bd732ac9cb816630f46dd269448ff8422620df8,8bd732ac,"doc: Outline files are now generated, so don't put them in git","doc: Outline files are now generated, so don't put them in git

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396680022,1396682550,ca4b20f9781b1dc6974d26952973dfe0d607478c
ca4b20f9781b1dc6974d26952973dfe0d607478c,ca4b20f9,ao-tools: Wait for device to become ready instead of failing,"ao-tools: Wait for device to become ready instead of failing

For some reason, USB devices take 'a while' to become usable; instead
of bailing immediately, sit around waiting to see if the device
becomes usable if we get an EBUSY or EACCES error.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396679920,1396682550,2424c0e6fe53789dc83d1e96439dcdc13e847b07
2424c0e6fe53789dc83d1e96439dcdc13e847b07,2424c0e6,ao-tools: Use 'program' command in ao-flash-lpc instead of 'flash',"ao-tools: Use 'program' command in ao-flash-lpc instead of 'flash'

The program meta-command is supposed to do the whole thing, and seems
more reliable in actually getting what we want flashed to the board.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396679835,1396682550,4800497fa1fc449807ef0097cc3fed367641ae29
4800497fa1fc449807ef0097cc3fed367641ae29,4800497f,ao-bringup: Get turnon_telemini working,"ao-bringup: Get turnon_telemini working

This script now does complete testing of the board

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396679794,1396682550,24167015705ae831692b95735968b04a876f935e
24167015705ae831692b95735968b04a876f935e,24167015,altos: Rename 'core' to 'kernel',"altos: Rename 'core' to 'kernel'

core remains a bad name to use -- dirvish skips files (and
directories, it seems) with that name.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396679688,1396682549,bb9fdef607728cc326a82aa632e59724f272e53b
bb9fdef607728cc326a82aa632e59724f272e53b,bb9fdef6,altoslib: Missed a couple of easy mini voltage API changes,"altoslib: Missed a couple of easy mini voltage API changes

Oh, and Tm was using Em conversions (which is almost right, except Tm
doesn't have the history)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396509019,1396509019,834cd051af1b80a98678de221d3c45cb30f8bb0d
834cd051af1b80a98678de221d3c45cb30f8bb0d,834cd051,Add easymini turnon script and helpers,"Add easymini turnon script and helpers

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396506936,1396506936,21d584b9bf93b96a05ab374105493c0e17df320f
21d584b9bf93b96a05ab374105493c0e17df320f,21d584b9,altoslib: Fix EasyMini voltage computations,"altoslib: Fix EasyMini voltage computations

Early Em prototypes had a 3.0V regulator.
Early v1.0 boards measured power past the blocking diode.

Deal with both conditions to try and report more accurate voltages for
EasyMini data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396501458,1396501458,adddad0dd45f67d01487c8dd75b040ca3ab50fe2
adddad0dd45f67d01487c8dd75b040ca3ab50fe2,adddad0d,altoslib: Ignore speed/accel after boost when finding maxima,"altoslib: Ignore speed/accel after boost when finding maxima

Large spikes in acceleration often occur with ejection charges, which
can cause bogus acceleration and speed data to be seen. Ignore those
for the purpose of computing the maximum values of each.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396496186,1396496186,ff4deb417a460d96645fb6934890c2c195142be3
ff4deb417a460d96645fb6934890c2c195142be3,ff4deb41,altos: HAS_LED is useless; remove it,"altos: HAS_LED is useless; remove it

ao_flight was trying to decide whether to turn off the red LED by
checking whether HAS_LED was defined. And yet, none of the flight
firmware defines that anymore, except for easymini which defines it to
zero.

Remove all uses and defines of this value, substituting AO_LED_RED in
ao_flight.c, which has to be defined for the ao_led_off call to work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1396074805,1396074805,ca0bf9fb2d6323d7a454e5ce04b48d11366eee67
ca0bf9fb2d6323d7a454e5ce04b48d11366eee67,ca0bf9fb,Add easymega firmware,"Add easymega firmware

A trimmed down TeleMega build with no radio or GPS, along with pin
changes necessary for the device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1395018753,1395018753,7e0b549b9b30d0a1290d28b2b94025a98af6a4de
7e0b549b9b30d0a1290d28b2b94025a98af6a4de,7e0b549b,altosui: Hide Tilt Angle values when not available,"altosui: Hide Tilt Angle values when not available

In the Ascent table, make sure the tilt angle fields are hidden when
they are set to MISSING.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1394517345,1394517345,3b50e50fb814a572f7b4ea9e268a1ae150fe678c
3b50e50fb814a572f7b4ea9e268a1ae150fe678c,3b50e50f,altos: Another missing usbtrng file,"altos: Another missing usbtrng file
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1394424610,1394424610,b5ac64bc0a6fd0fc23f39283e469c9820bdc88fe
b5ac64bc0a6fd0fc23f39283e469c9820bdc88fe,b5ac64bc,altos: Missing ao_pins files for usbtrng,"altos: Missing ao_pins files for usbtrng

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1394424505,1394424505,469bd376d84bf8d76faa3b726d96061d4d98b998
469bd376d84bf8d76faa3b726d96061d4d98b998,469bd376,altos: Fix LPC LED driver,"altos: Fix LPC LED driver

Was using wrong types

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1394423983,1394423983,6a4a074d690fb34af49704ac3cc4826eaf06dd9d
6a4a074d690fb34af49704ac3cc4826eaf06dd9d,6a4a074d,altos: fix building LPC serial support for STDIO,"altos: fix building LPC serial support for STDIO

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1394423916,1394423916,9671ca6c42544463fd551f81113c221265a2296e
9671ca6c42544463fd551f81113c221265a2296e,9671ca6c,altos: Don't require projects to define PACKET_HAS_SLAVE,"altos: Don't require projects to define PACKET_HAS_SLAVE

Really, most don't need it, and whinging about not having it defined
isn't useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1394423851,1394423851,e1e00a4b67fbdbae339219b35aefd44a1bcf9486
e1e00a4b67fbdbae339219b35aefd44a1bcf9486,e1e00a4b,Add USB True Random Number Generator product,"Add USB True Random Number Generator product

Just basic device support

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1394343573,1394343573,6dad9ca543fbed3f849b01300224b1b21ef2eb08
6dad9ca543fbed3f849b01300224b1b21ef2eb08,6dad9ca5,Re-add LCD bits to stm-demo,"Re-add LCD bits to stm-demo
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1394324733,1394324733,32f0f39a953dabe19ec92611570e4a82da8f8dce
32f0f39a953dabe19ec92611570e4a82da8f8dce,32f0f39a,Add flash loader for stm-demo board,"Add flash loader for stm-demo board
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1394324710,1394324710,4c7da6d0ad568448c37761cd0c0108b9161a9345
4c7da6d0ad568448c37761cd0c0108b9161a9345,4c7da6d0,doc: Add separate outline pdf generation,"doc: Add separate outline pdf generation

This generates one-page pdf files that contain just the outline of
each product.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1394256446,1394256446,8f2a85027b496451c5934eb36fcdffbd5e5da177
8f2a85027b496451c5934eb36fcdffbd5e5da177,8f2a8502,Install .desktopfile as _SCRIPTS so they are left executable,"Install .desktopfile as _SCRIPTS so they are left executable

.desktop files should be marked executable so that the desktop
environment knows they are correct.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1393657494,1393657494,a072cbb137126e677d3ebbf0245ec4ea5aa481ad
a072cbb137126e677d3ebbf0245ec4ea5aa481ad,a072cbb1,altosui: Retry device enumeration after rebooting for self flash,"altosui: Retry device enumeration after rebooting for self flash

Windows takes 'a while' to include the rebooted device in the list of
available devices, so try a few times with a 100ms delay so that we
can avoid asking the user to select from an empty list.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1393651017,1393651017,ac2cfb03158b4902466a72edad5dc471ee6bdb91
ac2cfb03158b4902466a72edad5dc471ee6bdb91,ac2cfb03,Mark development sequence to 1.3.3 by bumping version to 1.3.2.1,"Mark development sequence to 1.3.3 by bumping version to 1.3.2.1

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1393650996,1393650996,57e5d13c0577e1b0a6e8117e2d04eeda6cf0b045
57e5d13c0577e1b0a6e8117e2d04eeda6cf0b045,57e5d13c,libaltos: Link so with -znoexecstack flag,"libaltos: Link so with -znoexecstack flag

This marks the library as not requiring an executable stack, which
openjdk prefers

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1393206128,1393206222,104b8bfc9b37fda175f2cb2a1e33601fbf6f48f6
104b8bfc9b37fda175f2cb2a1e33601fbf6f48f6,104b8bfc,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1392927832,1392927832,"403b95ee27782309b564855b85285c9f5f5c7068,1edf7ef8026ac4ab698a7f99671e9348d18ffd0a"
403b95ee27782309b564855b85285c9f5f5c7068,403b95ee,update turnon scripts to store cal values,"update turnon scripts to store cal values
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1392927812,1392927812,3ef0cc28758c68e6076afa809e157a84ce3661fb
3ef0cc28758c68e6076afa809e157a84ce3661fb,3ef0cc28,typo fixes from Matt Kraai,"typo fixes from Matt Kraai
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1392927800,1392927800,43b1797189095c402e1c35bdc317c4196e180e66
1edf7ef8026ac4ab698a7f99671e9348d18ffd0a,1edf7ef8,altos: Create balloon-specific load for TMv2 hardware,"altos: Create balloon-specific load for TMv2 hardware

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392745671,1392745671,ff4ae350c24b3d6ef71e29191bb719b07ab9c5bb
ff4ae350c24b3d6ef71e29191bb719b07ab9c5bb,ff4ae350,altos: Make balloon code run again,"altos: Make balloon code run again

This fixes the balloon code so that it works with recent altos bits

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392745577,1392745577,8b6f051663dd17492bece9efb9e898ef113ab414
8b6f051663dd17492bece9efb9e898ef113ab414,8b6f0516,altos: Set reasonable accel values when !HAS_ACCEL,"altos: Set reasonable accel values when !HAS_ACCEL

This lets us use telemetrum log and telemetry formats for balloons

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392745541,1392745541,9f6983e3d61fa5231f3d0ce33dbc5aadf946b597
9f6983e3d61fa5231f3d0ce33dbc5aadf946b597,9f6983e3,altos: Expose ao_usb_running globally,"altos: Expose ao_usb_running globally

This lets other bits of the code know when USB has been connected.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392745492,1392745492,9b9d5b273a410e315739c5c6eaa4105523056b9a
9b9d5b273a410e315739c5c6eaa4105523056b9a,9b9d5b27,altos: Move balloon flight code to core,"altos: Move balloon flight code to core

This lets us create more than one balloon product

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392745423,1392745423,43b1797189095c402e1c35bdc317c4196e180e66
43b1797189095c402e1c35bdc317c4196e180e66,43b17971,doc: Need to publish .svg files as well,"doc: Need to publish .svg files as well

The drill templates are all .svg files that are referenced by the
generated html.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392701428,1392701462,874d0065ecb066ee746a016876edebc7cc6e3d96
874d0065ecb066ee746a016876edebc7cc6e3d96,874d0065,Re-create drill templates,"Re-create drill templates

Using inkscape, the drill templates weren't getting printed
correctly. Switching to hand-generated svg fixes that.

The .xsl file is also fixed to really encourage the images to be
printed at exactly 100%.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392701277,1392701462,6e713f0a53d608a8855884b7a48e4e3423d8a3d2
6e713f0a53d608a8855884b7a48e4e3423d8a3d2,6e713f0a,"deliver images used in MicroPeak manual to web server, too","deliver images used in MicroPeak manual to web server, too
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1392621358,1392621358,1d421a43494cf2003ac23fb8cd21d6ae05edfac8
1d421a43494cf2003ac23fb8cd21d6ae05edfac8,1d421a43,"update copyright year assertion in MicroPeak manual, remember during releases","update copyright year assertion in MicroPeak manual, remember during releases
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1392621005,1392621005,a3ddb5906167e445f937b16fafb7f5c537852f0a
a3ddb5906167e445f937b16fafb7f5c537852f0a,a3ddb590,Mark .desktop files as executable,"Mark .desktop files as executable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392602470,1392602470,c860d837a0c97a091c5f47fce91bdb8beb4602d3
c860d837a0c97a091c5f47fce91bdb8beb4602d3,c860d837,micropeak: Construct linux install script,"micropeak: Construct linux install script

Uses the same script as altosui, just edits the final path name

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392594830,1392594830,948a614a62754fd4fffd9b84ad83fd444e4f0437
948a614a62754fd4fffd9b84ad83fd444e4f0437,948a614a,Move .desktop and icon management out of debian dir,"Move .desktop and icon management out of debian dir

This constructs a .desktop file from a template and installs it, along
with suitable .svg icons, during the normal build process

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392592660,1392594742,066a01ad0b4e73fdb47b43a42c1d0b7fae81a180
066a01ad0b4e73fdb47b43a42c1d0b7fae81a180,066a01ad,Put altusmetrum.svg and micropeak.svg in icon directory,"Put altusmetrum.svg and micropeak.svg in icon directory

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392591458,1392591458,95f5a6ef52947088993d395874cf6aa502fd2503
95f5a6ef52947088993d395874cf6aa502fd2503,95f5a6ef,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1392591215,1392591215,"135b6d4019f584c050b3d70c11fb5bcf2c7396c4,de2a619900ee23911c866d5aaff63a0f9388bfc7"
135b6d4019f584c050b3d70c11fb5bcf2c7396c4,135b6d40,use svg in the .desktop file,"use svg in the .desktop file
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1392591202,1392591202,13dccd1869cdf00d4aa0df55a3ece33936cd520a
13dccd1869cdf00d4aa0df55a3ece33936cd520a,13dccd18,have the cal-freq script save cal values to a file,"have the cal-freq script save cal values to a file
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1392591092,1392591092,bf268354535a3a7b2e093235e5347ed2a6d809ff
de2a619900ee23911c866d5aaff63a0f9388bfc7,de2a6199,Add linux installer script,"Add linux installer script

Create a linux installer shell script that unpacks the archive in a
sensible place and adds a .desktop file to the environment

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392584489,1392586920,bf268354535a3a7b2e093235e5347ed2a6d809ff
bf268354535a3a7b2e093235e5347ed2a6d809ff,bf268354,updating changelog for release,"updating changelog for release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1392353593,1392353593,e53be56179f4cd93227b6bdc28c2ae60b81db57d
e53be56179f4cd93227b6bdc28c2ae60b81db57d,e53be561,doc: Update the 1.3.2 release notes to include APRS and Fire Igniter changes,"doc: Update the 1.3.2 release notes to include APRS and Fire Igniter changes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392018467,1392018467,d24ef4aa9429f4884548e5c9fd48d57e640f0d9d
d24ef4aa9429f4884548e5c9fd48d57e640f0d9d,d24ef4aa,doc: Add remaining configurable parameters to the System Operation chapter,"doc: Add remaining configurable parameters to the System Operation chapter

Yes, this duplicates the section in the AltosUI chapter, but I'm not
sure how to describe the device without talking about it in two
places, so we might as well make both of them complete.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392018399,1392018399,e76948d382cf6980c3a5b6c48405d71c8811780b
e76948d382cf6980c3a5b6c48405d71c8811780b,e76948d3,altos: Put locked/unlocked GPS status in APRS comments,"altos: Put locked/unlocked GPS status in APRS comments

Replace the 'S' (which marks the field showing sats in view) with
either 'L' or 'U' to tell the user whether the GPS receiver is locked
or unlocked.

This also removes the colons in the comment field to shorten it. This
makes it fit on one line of my FT1D display.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392015271,1392015271,5001a0f882af53dde33fc531215944c9d727baf4
5001a0f882af53dde33fc531215944c9d727baf4,5001a0f8,altos: Re-send previous GPS position in APRS if lock is lost,"altos: Re-send previous GPS position in APRS if lock is lost

APRS radios often show only the last received APRS packet, which means
that erasing the last known GPS position when we lose lock by sending
0/0/0 is unhelpful. Instead, just send the last known position, and
make sure that we send 0/0/0 before we're locked the first time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1392015185,1392015185,864d1e2282ac1d241478cf663ee24112c9d3dc37
864d1e2282ac1d241478cf663ee24112c9d3dc37,864d1e22,altos: Fixup named ADC printing,"altos: Fixup named ADC printing

Print all ADC values on one line when using named ADC values

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391925722,1391925738,f750ef6f9745b15af45bb80f5b46b9e6f51796d8
f750ef6f9745b15af45bb80f5b46b9e6f51796d8,f750ef6f,altos: Add needed math sources to TeleGPS v0.1 build,"altos: Add needed math sources to TeleGPS v0.1 build

APRS requires the logf function to report altitude.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391918702,1391919218,6367ab2dec718c512073f70dfab86dbd1656b1fe
6367ab2dec718c512073f70dfab86dbd1656b1fe,6367ab2d,altos: Report nsat in view in APRS packet,"altos: Report nsat in view in APRS packet

This adds the number of sats in view (as opposed to the number of sats
in solution) to the APRS packet.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391918574,1391919218,8ddbbdcdc498a19ebf4a440bbf5d73b6538e0a57
8ddbbdcdc498a19ebf4a440bbf5d73b6538e0a57,8ddbbdcd,altos: Don't write more than 12 sat infos in ublox driver,"altos: Don't write more than 12 sat infos in ublox driver

This was overwriting memory past the end of the ao_gps_tracking_data
array, which isn't a good idea.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391918456,1391919218,324073d14ed8215b74d9df51f2229827cd4401d0
324073d14ed8215b74d9df51f2229827cd4401d0,324073d1,altos/stm: Block interrupts while reprogramming flash,"altos/stm: Block interrupts while reprogramming flash

Wouldn't work well to get interrupted...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391243563,1391919218,d6d56c20465455b759f60a03fc96aa228ab9102e
d6d56c20465455b759f60a03fc96aa228ab9102e,d6d56c20,altos: Enable system timer in flash loader and prod watchdog with it,"altos: Enable system timer in flash loader and prod watchdog with it

This makes it possible to reflash the board without needing to disable
the watchdog.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391241990,1391919218,1d3420e51db4d1a46237e97aeb189d2a8eba7f5e
1d3420e51db4d1a46237e97aeb189d2a8eba7f5e,1d3420e5,altos: Eliminate warnings in FAT code,"altos: Eliminate warnings in FAT code

The FAT file system code wasn't cleaned up when the warning fixes were
done recently.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391219085,1391919218,7a8adfed8fbbcaac71da9c6d54bbd3091f4d7511
7a8adfed8fbbcaac71da9c6d54bbd3091f4d7511,7a8adfed,altos: Add watchdog timer task,"altos: Add watchdog timer task

This new task frobs a pin periodically to inform the hardware that the
operating system is running.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1363886195,1391919218,63683f91f5fe9588c1d905a572509cb674aaad68
63683f91f5fe9588c1d905a572509cb674aaad68,63683f91,altos: Add names when reporting STM ADC values,"altos: Add names when reporting STM ADC values

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1359005778,1391919218,7fdf6a6cc252c7813a857714f6088b7fd5bfab40
7fdf6a6cc252c7813a857714f6088b7fd5bfab40,7fdf6a6c,doc: Add title page image to altusmetrum.pdf,"doc: Add title page image to altusmetrum.pdf

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391898666,1391898666,2c70a7a49cc0e92df90ea17a870d661ca857c145
2c70a7a49cc0e92df90ea17a870d661ca857c145,2c70a7a4,doc: Ignore generate template XSL file,"doc: Ignore generate template XSL file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391898652,1391898652,2320b788c47757032b2874e64479ef382456c2d3
2320b788c47757032b2874e64479ef382456c2d3,2320b788,doc: Document GPS max height addition,"doc: Document GPS max height addition

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391898288,1391898288,8363326cd87fb1e53ad78146c0503aa476d2da89
8363326cd87fb1e53ad78146c0503aa476d2da89,8363326c,doc: Update micropeak docs to include lots of pictures,"doc: Update micropeak docs to include lots of pictures

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391898253,1391898253,306028b33ebed45bcf379740cc3c01c2360c51f4
306028b33ebed45bcf379740cc3c01c2360c51f4,306028b3,doc: Micropeak doc updates for 1.3.2,"doc: Micropeak doc updates for 1.3.2

New 'download' button.
Update download instructions for new USB adapter.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391883933,1391883933,28d5239bff234cc1158a270a29c0e39067f613c3
28d5239bff234cc1158a270a29c0e39067f613c3,28d5239b,micropeak: Missing a couple of new exceptions when loading files,"micropeak: Missing a couple of new exceptions when loading files

The change to keep reading on invalid chars from the serial port
exposed a couple of new exceptions from the MicroData code which the
file loading code needs to cope with.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391841926,1391841926,8d0d59c51138dc1b1bbf6933354fe9faf4d67986
8d0d59c51138dc1b1bbf6933354fe9faf4d67986,8d0d59c5,micropeak: Keep reading until we get valid data,"micropeak: Keep reading until we get valid data

Don't stop just because we saw something invalid on the serial line;
let the user try again, or cancel when they get bored.

However, if the serial line disappears or some other fatal error
occurs, then do stop and put up an error dialog.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391841137,1391841137,4a5b3837b460d1b6fcea99312728114c4734495a
4a5b3837b460d1b6fcea99312728114c4734495a,4a5b3837,altos: report 0/0/0 for APRS position when GPS is not locked,"altos: report 0/0/0 for APRS position when GPS is not locked

We were reporting whatever the GPS device sent, even if it wasn't
reporting a valid status. That's not terribly useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391735314,1391735314,9e0bda088c097ac6bcc677d7b6d00683e73a68fb
9e0bda088c097ac6bcc677d7b6d00683e73a68fb,9e0bda08,micropeak: Watch serial data during download,"micropeak: Watch serial data during download

This adds a text area to monitor the incoming serial data in case some
problem occurs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391415878,1391416367,0c2f28cbc1cb312d3bcc8951176d79f234a1af04
0c2f28cbc1cb312d3bcc8951176d79f234a1af04,0c2f28cb,altoslib: Use existing unicode Charset in AltosLink,"altoslib: Use existing unicode Charset in AltosLink

Instead of making AltosLink look up the unicode charset, just provide
it directly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391416002,1391416317,7df221c42948cb42cf777b899263c8ec9067bd55
7df221c42948cb42cf777b899263c8ec9067bd55,7df221c4,doc: Mention that an APRS interval of 0 disables it entirely,"doc: Mention that an APRS interval of 0 disables it entirely

And mention that the value is a time in seconds between APRS packets.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391220566,1391220566,230af613d372afe540c6a8860199d717eedecf57
230af613d372afe540c6a8860199d717eedecf57,230af613,doc: Replace screen captures with 'active' window ones,"doc: Replace screen captures with 'active' window ones

These are the same as the previous captures, just with the titlebar
highlighted instead of grey so that they're all consistent. These were
also done with the gimp which makes the areas outside of the window
(like outside the rounded corners) have zero alpha so that the white
background shows through.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391144064,1391144064,7e3088ece81ef85f3dbd4df51954bc90681d6b6e
7e3088ece81ef85f3dbd4df51954bc90681d6b6e,7e3088ec,doc: Update screen capture of pyro config with correct names,"doc: Update screen capture of pyro config with correct names

With the UI now using letters as TeleMega does, update the screen shot
used in the manual to match

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391136128,1391136128,eb9262901aff4f69fa3d2357693634cbee9bca46
eb9262901aff4f69fa3d2357693634cbee9bca46,eb926290,altosui: Use letter names for pyro channels in pyro config UI,"altosui: Use letter names for pyro channels in pyro config UI

TeleMega has the extra pyro channels labeled A, B, C, D instead of 0,
1, 2, 3. Use those names in the UI to avoid confusion.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1391135881,1391135979,4e94d785d9a1cce4eb5b3063d55e825719afb58e
4e94d785d9a1cce4eb5b3063d55e825719afb58e,4e94d785,doc: Add explicit paragraph about using one battery with Tmega,"doc: Add explicit paragraph about using one battery with Tmega

Just in case the factory-supplied jumper gets lost.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390974777,1391135979,f4f31590518875eda40473dd2178d6976a4f86a3
f4f31590518875eda40473dd2178d6976a4f86a3,f4f31590,"use firmware in /usr/share/altos for teledongle, update telemetrum for v2.0","use firmware in /usr/share/altos for teledongle, update telemetrum for v2.0
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1390958470,1390958470,6b70b8b6bb4e8eae8159ec966847092d0b1deab3
6b70b8b6bb4e8eae8159ec966847092d0b1deab3,6b70b8b6,altoslib: Don't lose gps_height value between GPS samples,"altoslib: Don't lose gps_height value between GPS samples

gps_height is now reliably updated whenever GPS altitude data is
received, so don't try to reset it between samples.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390632205,1390632205,ea8c9ca9dd24a026ea5bfe5a1ac70857181a88c8
ea8c9ca9dd24a026ea5bfe5a1ac70857181a88c8,ea8c9ca9,altosui: Show GPS max height in flight stats window of graph,"altosui: Show GPS max height in flight stats window of graph

Uses the new state.max_gps_height() function.#

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390632049,1390632049,e4616233f3942d2796ba6633477670a83669957b
e4616233f3942d2796ba6633477670a83669957b,e4616233,altoslib: Track GPS altitude values to be able to report max gps height,"altoslib: Track GPS altitude values to be able to report max gps height

This adds separate GPS altitude and GPS ground altitude values so that
the AltosState object can report GPS max height.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390631950,1390631950,aa2edc97ac0c880e569baca453ff6302ad6da65f
aa2edc97ac0c880e569baca453ff6302ad6da65f,aa2edc97,doc: Fix spelling of decelerate,"doc: Fix spelling of decelerate
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390628079,1390628079,eb3ffd06575ddd0be061aa2717c7075c823ed54e
eb3ffd06575ddd0be061aa2717c7075c823ed54e,eb3ffd06,doc: Document flight computer wiring connections,"doc: Document flight computer wiring connections

This details all of the wiring connections for each flight computer
and explains how to wire batteries, switches and how to use external
pyro batteries and active switches with each one.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390627877,1390627877,ee480d180cbdd712ab13d39716c38aabd4678d95
ee480d180cbdd712ab13d39716c38aabd4678d95,ee480d18,Set version to 1.3.2 in preparation for release,"Set version to 1.3.2 in preparation for release

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390587000,1390587000,9c4674d90f9b111e1b47abb7aee714ed12fa3aa5
9c4674d90f9b111e1b47abb7aee714ed12fa3aa5,9c4674d9,doc: Add 1.3.2 release notes,"doc: Add 1.3.2 release notes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390584955,1390584955,94be1e3eb9f94a59522743374d02a1f229266931
94be1e3eb9f94a59522743374d02a1f229266931,94be1e3e,altos: Tmega Don't try to log info about more than 12 GPS sats,"altos: Tmega Don't try to log info about more than 12 GPS sats

The mega log format has a single packet for GPS info which holds a
maximum of 12 satellites. Bdale managed to get 14 sats in view, which
ended up crashing the ground station software, and also overflowed the
gps_tracking_data structure.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390584106,1390584106,dd28429405498fca0788ce9c19093898c84b10e5
dd28429405498fca0788ce9c19093898c84b10e5,dd284294,altoslib: Validate TeleMega GPS_SAT log packet nsat,"altoslib: Validate TeleMega GPS_SAT log packet nsat

Make sure nsat is not more than the size of the array

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390544196,1390544260,afbae4c6b7a658f690cb827acfef015e9e2da318
afbae4c6b7a658f690cb827acfef015e9e2da318,afbae4c6,update notes on how to release,"update notes on how to release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1390451463,1390451514,0ef0c50536e5eb6ad3455b5828983307edbab828
0ef0c50536e5eb6ad3455b5828983307edbab828,0ef0c505,freshen ChangeLog for release,"freshen ChangeLog for release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1390449183,1390449183,200137060651f48c99276c8feb0e15980a9b46be
200137060651f48c99276c8feb0e15980a9b46be,20013706,update copyright date on main documentation file,"update copyright date on main documentation file
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1390449129,1390449129,63171339c03cf9bf3d691511889223bf43024124
63171339c03cf9bf3d691511889223bf43024124,63171339,doc: Update for 1.3.1,"doc: Update for 1.3.1

Add 1.3.1 release notes. Update screen shots. Document new functionality

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390374147,1390374147,e6a73d6cbe149a930f8c4e2dac655bc3f6270013
e6a73d6cbe149a930f8c4e2dac655bc3f6270013,e6a73d6c,doc: Fix image widths to make them all scale the same amount,"doc: Fix image widths to make them all scale the same amount

Hand-compute scale factors so that all images are presented at the
same relative size as they would be on the screen.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390374088,1390374088,e61c02b51e069aa58b36f59b9ca8e7c8284bc93a
e61c02b51e069aa58b36f59b9ca8e7c8284bc93a,e61c02b5,altosui: Handle serial-port startup errors in idle-monitor,"altosui: Handle serial-port startup errors in idle-monitor

Trap exceptions during idle monitor startup and report them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390371181,1390371181,42922b40fc695bdaa92e3fb0b41a248f7df918d0
42922b40fc695bdaa92e3fb0b41a248f7df918d0,42922b40,altosui: Handle already-opened link in IgniteUI,"altosui: Handle already-opened link in IgniteUI

Must run the link open from the UI thread so that we can put up the
in-use dialog immdiately; otherwise the UI thread is blocked which
means the dialog never appears and the app appears to hang.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390370499,1390370499,f118e33416e45ea9a2b5ede4157bd8b58ddb6ebb
f118e33416e45ea9a2b5ede4157bd8b58ddb6ebb,f118e334,altosuilib: Remove some spurious debug printfs,"altosuilib: Remove some spurious debug printfs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390369038,1390369038,677fcafd3816b6d8d86b2dc41b840d97b5ccbf07
677fcafd3816b6d8d86b2dc41b840d97b5ccbf07,677fcafd,altoslib: Fetch target device config for Fire Igniter npyro value,"altoslib: Fetch target device config for Fire Igniter npyro value

The code was using the AltosLink config_data, which is always the
locally connected device's configuration. When using the packet link,
that's not terribly useful when asking how many extra pyro channels
are available.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390368898,1390368898,13cf4000bd53ac4af66231d56e24c9eb11178a5f
13cf4000bd53ac4af66231d56e24c9eb11178a5f,13cf4000,Merge remote-tracking branch 'origin/master',"Merge remote-tracking branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390366746,1390366746,"7a8551fe8e5f0a90cbc494842715a96f08c11900,99fedbf0ed42a5d4fa80f094576ca0260040ef5e"
99fedbf0ed42a5d4fa80f094576ca0260040ef5e,99fedbf0,set version to 1.3.1 for release,"set version to 1.3.1 for release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1390365085,1390365085,7f9cda0e2531a7bba7f1b4e3b7212a62b5bec1ed
7a8551fe8e5f0a90cbc494842715a96f08c11900,7a8551fe,altosui: rate limit map downloads,"altosui: rate limit map downloads
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1390210701,1390210701,0faa098f05d43eefc1fa54462401171fca5034cb
0faa098f05d43eefc1fa54462401171fca5034cb,0faa098f,altosui: --fetchmaps gets same number of maps as GUI,"altosui: --fetchmaps gets same number of maps as GUI
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1390158658,1390158658,aab5873c87d6ecfe0854751746f80d4bc7ebeffa
aab5873c87d6ecfe0854751746f80d4bc7ebeffa,aab5873c,AltosSiteMapPreload: only load 49 maps,"AltosSiteMapPreload: only load 49 maps

Google Static Maps API limits queries to 50 maps per IP per minute,
so querying a 7x7 array instead of a 9x9 array seems more likely to
work well.
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1390157563,1390157563,7f9cda0e2531a7bba7f1b4e3b7212a62b5bec1ed
7f9cda0e2531a7bba7f1b4e3b7212a62b5bec1ed,7f9cda0e,altosui: Make romconfig serial and radio cal fields 8 digits wide,"altosui: Make romconfig serial and radio cal fields 8 digits wide

This ensure that they are wide enough to show a cc1120 calibration
value, which is 7 digits.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1390119426,1390119426,2b891115c95453d9002d8ef307a27e14eda145a5
2b891115c95453d9002d8ef307a27e14eda145a5,2b891115,set version to 1.3.0.2 for test flights this weekend,"set version to 1.3.0.2 for test flights this weekend
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1390017345,1390017345,c33ec8207c0e5d4c855e87b2746371b19d437f7d
c33ec8207c0e5d4c855e87b2746371b19d437f7d,c33ec820,use firmware in /usr/share/altos for production flashing,"use firmware in /usr/share/altos for production flashing
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1390016836,1390016836,cfcb127b248b62231049b6b50cf9b7edc2731f0a
cfcb127b248b62231049b6b50cf9b7edc2731f0a,cfcb127b,altos: Add missing ADC divider values for Tmega v1.0,"altos: Add missing ADC divider values for Tmega v1.0

Somehow I left these out of the previous commit

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1389821296,1389821296,9001d5780a41986017bd3bbc7f8c5556b116c351
9001d5780a41986017bd3bbc7f8c5556b116c351,9001d578,Ignore 32 and 64 bit cjnitest apps,"Ignore 32 and 64 bit cjnitest apps
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1389818579,1389818579,c743eaa060080a7bd236466b93cff3abc96f405b
c743eaa060080a7bd236466b93cff3abc96f405b,c743eaa0,"altos: Report battery, apogee and main voltages over APRS","altos: Report battery, apogee and main voltages over APRS

This makes APRS more usable when you mute the RF audio on the HT.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1389818426,1389818426,cc06242e882cba462791962c199b7c89e79adc65
cc06242e882cba462791962c199b7c89e79adc65,cc06242e,altos: Use factory calibration for all acceleration computations,"altos: Use factory calibration for all acceleration computations

The ground acceleration value will vary depending on the tilt angle of
the airframe, which will result in incorrect acceleration computations
during flight. This also avoids accidental boost detect when moving
the airframe around in pad mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1389770999,1389770999,9d812b3db418fd9816731b761a0853eb38f5a265
9d812b3db418fd9816731b761a0853eb38f5a265,9d812b3d,altos: Switch APRS to compressed position format,"altos: Switch APRS to compressed position format

This provides lat/lon/alt in fewer bytes while improving precision.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1389770500,1389770500,f560d5063b1339dbfb3e6723cfadb7b4c5eace25
f560d5063b1339dbfb3e6723cfadb7b4c5eace25,f560d506,doc: Ship telemini outline as pdf file too,"doc: Ship telemini outline as pdf file too

Build telemini.pdf from telemini.svg and include it in all of the
released packages.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1389770320,1389770320,06ffd8022ff5ac74274c9839d42c0c47274cb8b9
06ffd8022ff5ac74274c9839d42c0c47274cb8b9,06ffd802,altosui: Require both libaltos32 and libaltos64 for fat Linux tarball,"altosui: Require both libaltos32 and libaltos64 for fat Linux tarball

No sense shipping a broken tarball ever

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1388642893,1388642893,8bff2822c242d2878b408b9c0d8a7647108ea4b1
8bff2822c242d2878b408b9c0d8a7647108ea4b1,8bff2822,libaltos: Build -m64 and -m32 for fat tarball when possible,"libaltos: Build -m64 and -m32 for fat tarball when possible

Check to see if we can compile libaltos for both 32 bit and 64 bit
systems, and then use those when generating the linux tarball.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1388642576,1388642576,95d77eaff708397d8b1e29904dc47d8ea09e8754
95d77eaff708397d8b1e29904dc47d8ea09e8754,95d77eaf,Bump version to 1.3.9.1,"Bump version to 1.3.9.1

Lots of new features; let's not release with 1.3 set

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1388642524,1388642524,b15bd24bbe48e338497c6257f5fe2c7fd1cbffbb
b15bd24bbe48e338497c6257f5fe2c7fd1cbffbb,b15bd24b,altosui: Handle a missing libaltos when starting up,"altosui: Handle a missing libaltos when starting up

Skip a null list of devices when figuring out what to open monitor
windows for during startup.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1388642424,1388642424,c35ea586b9e792c45b287924fd256928308d9a36
c35ea586b9e792c45b287924fd256928308d9a36,c35ea586,altos: Flip acceleration data consistently for orientation changes,"altos: Flip acceleration data consistently for orientation changes

Must flip the acceleration calibration data using the same function as
flipping the actual acceleration data or the calibration will no
longer be valid after changing orientation. For the MMA655x, this
means using 4095 in both places, rather than using 0x7fff for the
calibration data changes and 4095 for the data value changes. For the
MPU6000, this means using 0 in both places.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1388639540,1388639794,afc16e805145c3e9ab4ba948f9ab1d9aa2b27afb
afc16e805145c3e9ab4ba948f9ab1d9aa2b27afb,afc16e80,altos: Add 'O' command for TeleMega orient testing,"altos: Add 'O' command for TeleMega orient testing

Only present when HAS_FLIGHT_DEBUG is enabled, this command lets the
user check the orientation tracking code by showing the current
orientation and when the calibration values are reset.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1388254733,1388254733,9877f6b880a0e89fbfbf1a39ded94bdc1891f3d9
9877f6b880a0e89fbfbf1a39ded94bdc1891f3d9,9877f6b8,altosui: Switch Graph to AltosOrient type,"altosui: Switch Graph to AltosOrient type

The graph was using a private class for orient type, use the altoslib one

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1388254657,1388254657,aa01f06acfbf029958a55f68175b6868817b333f
aa01f06acfbf029958a55f68175b6868817b333f,aa01f06a,altosui: Adjust info table column width,"altosui: Adjust info table column width

Make sure the info table can show a full longitude value

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1388254584,1388254584,bbc4940730e6b431f1b9ccd9bbaf9faa0ffb2b1f
bbc4940730e6b431f1b9ccd9bbaf9faa0ffb2b1f,bbc49407,altosui: Add orient to ascent and info table views,"altosui: Add orient to ascent and info table views

This adds 'tilt angle' to both ascent and info table views

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1388254526,1388254526,053d092b3dca4ebb98e97ec0fe24f5f5e1c31f88
053d092b3dca4ebb98e97ec0fe24f5f5e1c31f88,053d092b,altoslib: Add AltosOrient class and max_orient(),"altoslib: Add AltosOrient class and max_orient()

This adds the class necessary to put orient into a UI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1388254385,1388254385,081455dcba860f3e4df8cd66f3fe686b204034ad
081455dcba860f3e4df8cd66f3fe686b204034ad,081455dc,altosui: Extend Fire Igniter to additional channels,"altosui: Extend Fire Igniter to additional channels

This lets the UI test fire other pyro channels on TeleMega

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387644960,1387644960,9cf9a67f937185c0c0bb5b2bae4f420755965799
9cf9a67f937185c0c0bb5b2bae4f420755965799,9cf9a67f,altosui: Switch from radio buttons to check boxes in pyro config. Add close,"altosui: Switch from radio buttons to check boxes in pyro config. Add close

First of (we hope) many review comments from Troj.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387637206,1387637206,9289200ccb661b10ff892760ecbc752c7745de6b
9289200ccb661b10ff892760ecbc752c7745de6b,9289200c,altos: Turn on -Werror for STM and LPC builds,"altos: Turn on -Werror for STM and LPC builds

Now that the build completes with no warnings, make future warnings
into errors.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387609483,1387609483,16b37b49985daf21ebb93b3d6ae64af67533be22
16b37b49985daf21ebb93b3d6ae64af67533be22,16b37b49,altos: Turn on warnings for LPC products too,"altos: Turn on warnings for LPC products too

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387609371,1387609371,f578d9455eec9ea0eccd2d5e21349e274ea4281a
f578d9455eec9ea0eccd2d5e21349e274ea4281a,f578d945,altos/lpc: Missing */ in definition of PIO0_4,"altos/lpc: Missing */ in definition of PIO0_4

Would maek using these values pretty hard.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387609341,1387609341,14790172e02d4e1624c35797f87ffd94345d54ff
14790172e02d4e1624c35797f87ffd94345d54ff,14790172,altos: lpc exti setup was incorrectly testing mode,"altos: lpc exti setup was incorrectly testing mode

Check for NOCONFIGURE bit was missing parens

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387609243,1387609243,48f996a9d65631238b4de446530f31f83acb99f5
48f996a9d65631238b4de446530f31f83acb99f5,48f996a9,altos: cc115l driver tone_run wasn't recording number of tones,"altos: cc115l driver tone_run wasn't recording number of tones

This would prevent the cc115l driver from ever sending tones.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387609182,1387609182,e11fcc299f4a1a0461a3442ca13f8984d76c30ff
e11fcc299f4a1a0461a3442ca13f8984d76c30ff,e11fcc29,altos: Clean up warnings for LPC products,"altos: Clean up warnings for LPC products

Unused varibles, functions and parameters.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387609090,1387609175,4ed108fb86676daea17264d7159c2cff9ea7a6e4
4ed108fb86676daea17264d7159c2cff9ea7a6e4,4ed108fb,altos/stm: Turn on -Wextra,"altos/stm: Turn on -Wextra

All of the warnings for STM projects are cleaned up now

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387608356,1387608356,1406a5b0721a135913a9801e9eea9e91f0a536b4
1406a5b0721a135913a9801e9eea9e91f0a536b4,1406a5b0,altos: Add default button return value from ao_button_get,"altos: Add default button return value from ao_button_get

This ""can't"" happen, but it's not unreasonable to have a default
return value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387608301,1387608301,316d898715746a379068ac8511692bdb9da14b39
316d898715746a379068ac8511692bdb9da14b39,316d8987,altos: unsigned value in ao_pyro_set checked for negative value,"altos: unsigned value in ao_pyro_set checked for negative value

No sense checking unsigned values for less than zero.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387608260,1387608260,5c9172ba5681ff93d63c9c263a453d0025170045
5c9172ba5681ff93d63c9c263a453d0025170045,5c9172ba,altos: Clean up -Wextra warnings,"altos: Clean up -Wextra warnings

Unused variables, mismatching signed/unsigned and a few other misc
warnings.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387608198,1387608244,db8f3426ac1cf756a2e4974ca61a5ae9048c80ce
db8f3426ac1cf756a2e4974ca61a5ae9048c80ce,db8f3426,altos: Turn on -Wall for stm compiles,"altos: Turn on -Wall for stm compiles

The warnings are all cleaned up now, leave this on by default

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387606883,1387606883,b31b4622d5bd92c0cc0851818f5b595dbdb60ead
b31b4622d5bd92c0cc0851818f5b595dbdb60ead,b31b4622,altos: Clean up some minor warnings from -Wall,"altos: Clean up some minor warnings from -Wall

Unused variables, functions and labels, missing enums in switch.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387606525,1387606775,755082d36231c1b247bc0e1f13919dd9b5c362a8
755082d36231c1b247bc0e1f13919dd9b5c362a8,755082d3,altos: mma655x also needs ao_sensor_errors,"altos: mma655x also needs ao_sensor_errors

TeleMetrum has an MMA655X but no IMU, so it needs an explicit addition
for sensor errors.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387606412,1387606775,758acb92cccbe4b64a35a1883b42713738c90630
758acb92cccbe4b64a35a1883b42713738c90630,758acb92,altos: Complain about sensor self-test errors only in idle mode,"altos: Complain about sensor self-test errors only in idle mode

When the accelerometer says to go into pad mode, don't look for other
sensor self test errors. Only look for sensor self test errors to
choose between idle and invalid mode. This will prevent minor sensor
self test errors from letting the rocket fly safely.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387606091,1387606091,c8b27410e45cc3d80ad4b896bffe70e9aec5e3aa
c8b27410e45cc3d80ad4b896bffe70e9aec5e3aa,c8b27410,altos: 3-axis accel calibration was invalid in explicit accel cal mode,"altos: 3-axis accel calibration was invalid in explicit accel cal mode

When explicit Z-axis accel calibration values were provided to the 'c
a' command, the 3-axis accelerometer calibration values would get set
to uninitialized values. Not so helpful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387606012,1387606012,2a912dcde191e2f750845c464611641a5abdc28a
2a912dcde191e2f750845c464611641a5abdc28a,2a912dcd,altos: Execute self-test on MMA655X part,"altos: Execute self-test on MMA655X part

This doesn't check for fine calibration, just makes sure the part is
within the broad tolerances specified by the manufacturer. The subtle fix
here was actually getting reset working -- there was a typo in the
bitpattern definition which caused the reset to fail, making it hard
to self-test the part, as self-test is only valid before the part is running.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387605893,1387605893,b89fb51a963635e2effe3a31f803bfc29c2c46b7
b89fb51a963635e2effe3a31f803bfc29c2c46b7,b89fb51a,altoslib: Bump library version,"altoslib: Bump library version

Prepare for next release by making sure we notice that the API/ABI for
this library has changed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387597478,1387597478,8e5f3b922100f9de54b9650df14749e81b1a6562
8e5f3b922100f9de54b9650df14749e81b1a6562,8e5f3b92,altosui: Add imu and mag sensor values to plots,"altosui: Add imu and mag sensor values to plots

Makes for a lot of potential graph elements.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387597231,1387597231,f65880cf5bfcba5005c32db2b300448e585f3e45
f65880cf5bfcba5005c32db2b300448e585f3e45,f65880cf,altosuilib: Rearrange graph enable buttons,"altosuilib: Rearrange graph enable buttons

Eliminate separate 'enable' radio button, provide for multiple columns

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387597180,1387597180,796cb90e3241103f79ae12565cf6f0dad21cb57c
796cb90e3241103f79ae12565cf6f0dad21cb57c,796cb90e,altoslib: Fetch 'orient' value from Mega Sensor packet,"altoslib: Fetch 'orient' value from Mega Sensor packet

The mega sensor packet had a spare byte to hold the current
orientation value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387597109,1387597109,91bcfae2e64ecb2e7de1292b264910382b635aea
91bcfae2e64ecb2e7de1292b264910382b635aea,91bcfae2,altoslib: Convert IMU and Mag sensor values to useful units,"altoslib: Convert IMU and Mag sensor values to useful units

Convert from raw sensor values to metric units

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387597028,1387597028,2ad31bad20b20615e9d8b29088e2488fddc81ac9
2ad31bad20b20615e9d8b29088e2488fddc81ac9,2ad31bad,altosdroid: improve build system dependencies,"altosdroid: improve build system dependencies

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1387505197,1387505404,0e3b3ce66035e8a90fd708d9a4bc01370174c9eb
0e3b3ce66035e8a90fd708d9a4bc01370174c9eb,0e3b3ce6,altosdroid: update to latest google play services,"altosdroid: update to latest google play services

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1387505167,1387505404,96f2ae5fc0d3bf88704d2ae1b4df5dc6aefc523b
96f2ae5fc0d3bf88704d2ae1b4df5dc6aefc523b,96f2ae5f,altosdroid: force older jarsigner signing algorithm for java 1.7,"altosdroid: force older jarsigner signing algorithm for java 1.7

(increment versionCode, re-upload to Play Store)

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1387505142,1387505404,ac12e77e3dffc9e9ddb1578a38b32783ad64e940
ac12e77e3dffc9e9ddb1578a38b32783ad64e940,ac12e77e,updated notes from 1.3 release,"updated notes from 1.3 release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387448541,1387448570,27528961457865acc3a38b822268df6d7cb86cfd
27528961457865acc3a38b822268df6d7cb86cfd,27528961,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387443610,1387443610,"4006effc538289c36a1563c1b717231991292c0c,a31629dfceb5e9cf1d5c654b8bd87d575f73c34b"
4006effc538289c36a1563c1b717231991292c0c,4006effc,fix missing newline at end of src/test/Makefile,"fix missing newline at end of src/test/Makefile
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387443504,1387443569,bc3610d8cecbfed40c62d4dcb93fc9a4d2a7c9e3
a31629dfceb5e9cf1d5c654b8bd87d575f73c34b,a31629df,altosui: Ship EasyMini firmware too,"altosui: Ship EasyMini firmware too

Missing the FIRMWARE_EMINI define left all easy mini firmware out of
the distribution

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387443530,1387443530,701c26ed85c28ac59e338975f2a6ba6bd25f6493
bc3610d8cecbfed40c62d4dcb93fc9a4d2a7c9e3,bc3610d8,update ChangeLog from git,"update ChangeLog from git
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387441795,1387441795,701c26ed85c28ac59e338975f2a6ba6bd25f6493
701c26ed85c28ac59e338975f2a6ba6bd25f6493,701c26ed,altosdroid: bump versionName to 1.3 and versionCode to 4,"altosdroid: bump versionName to 1.3 and versionCode to 4

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387440976,1387440976,9f95ffbad918a73cfd5460d6ce037d680465c35d
9f95ffbad918a73cfd5460d6ce037d680465c35d,9f95ffba,"altosui: When device has no valid romconfig, set RF cal to 0","altosui: When device has no valid romconfig, set RF cal to 0

This is intended to signal to the user that no valid value was found
and that they'd best pick something sensible.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387440741,1387440741,a04c1dd5df76c9127615bc797a9d9f764eec1234
a04c1dd5df76c9127615bc797a9d9f764eec1234,a04c1dd5,altos/lpc: Stop sending SETUP IN when the requested size is reached,"altos/lpc: Stop sending SETUP IN when the requested size is reached

The host won't keep asking for SETUP IN packets once it has received
the amount of data requested, so check to see if we've sent that much
and flip back to IDLE state if so.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387440530,1387440530,1ab12861c3e70d7c22b27d988546a925616a0adc
1ab12861c3e70d7c22b27d988546a925616a0adc,1ab12861,altos/lpc: Reset less of the device on USB reset.,"altos/lpc: Reset less of the device on USB reset.

This leaves most of the device configured across USB reset, which
appears to help when sending a IN reply to the first SETUP packet;
without this change, the IN reply would always get a length of 0,
which is fine for SET_ADDRESS, but not for GET_DESCRIPTOR_DEVICE,
which OS X appears to send before setting the address (go figure).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387438054,1387438054,3b13cc2ca035b13582cd2e59ba7286f872f43c6e
3b13cc2ca035b13582cd2e59ba7286f872f43c6e,3b13cc2c,altoslib: Remove some old debug printfs for self flashing,"altoslib: Remove some old debug printfs for self flashing

These aren't necessary anymore and just slow down flashing boards.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387432813,1387432813,408b0dea338147382e94717dab85b4a204e7bdf5
408b0dea338147382e94717dab85b4a204e7bdf5,408b0dea,micropeak: Add micropeak man page,"micropeak: Add micropeak man page

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387429713,1387429713,2b2ba87d5f68b9e052dddd49d69341f36d777122
2b2ba87d5f68b9e052dddd49d69341f36d777122,2b2ba87d,ao-tools: Add man pages for ao-flash utilities,"ao-tools: Add man pages for ao-flash utilities

These aren't very wordy, but these tools are pretty simple scripts.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387429335,1387429391,39cb8c2896317b7538353be979ac99baffc14489
39cb8c2896317b7538353be979ac99baffc14489,39cb8c28,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387428832,1387428832,"2a6016cfabc8cd56f5219871e3b3df316a639289,ee4279613b4757453d0d8f8afc06037c61eeb520"
2a6016cfabc8cd56f5219871e3b3df316a639289,2a6016cf,update Debian standards version we claim compliance with,"update Debian standards version we claim compliance with
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387428816,1387428816,122f491e459b6ff417932370b3f1aa2091c71aca
ee4279613b4757453d0d8f8afc06037c61eeb520,ee427961,altos: Try IMU self-test 10 times before giving up,"altos: Try IMU self-test 10 times before giving up

This should keep the device from failing to boot unless the IMU is
actually broken. Oh, and if self test does fail, this places the
flight computer in 'Invalid' state rather than panic.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387427525,1387427525,1bf84ec28a41f7bd1b11ba45b4639856266227bc
1bf84ec28a41f7bd1b11ba45b4639856266227bc,1bf84ec2,doc: Add tables describing AltOS beeps and flashes,"doc: Add tables describing AltOS beeps and flashes

Provide a convenient place to reference when listening to the device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387427458,1387427458,0673344289772ed89483948184d6608c272c7c26
0673344289772ed89483948184d6608c272c7c26,06733442,altos/stm: Semantic error in STM usb disable caused it to not work,"altos/stm: Semantic error in STM usb disable caused it to not work

The USB enable register wasn't actually getting rewritten with the
enable bit turned off, so the USB device was still powered on in flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387419655,1387419655,122f491e459b6ff417932370b3f1aa2091c71aca
122f491e459b6ff417932370b3f1aa2091c71aca,122f491e,update release docs to include option for submodules,"update release docs to include option for submodules
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387416654,1387416654,d9982c257463f23be940eea66bd4dc3aadff0043
d9982c257463f23be940eea66bd4dc3aadff0043,d9982c25,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387416335,1387416335,"1b97ed2b64bcbcd969124964f1e49837899f1c70,b63fc05481bf6d57e6385704ce53c1c19afa9c2e"
1b97ed2b64bcbcd969124964f1e49837899f1c70,1b97ed2b,we're using packaged and local-to-our-tree ARM toolchain now,"we're using packaged and local-to-our-tree ARM toolchain now
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387416303,1387416303,6df58bb0115a8da13d35ab38861f6231bea7f2a7
b63fc05481bf6d57e6385704ce53c1c19afa9c2e,b63fc054,doc: typo in micropeak doc hole->hold,"doc: typo in micropeak doc hole->hold
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387406071,1387406071,6827961c002757f8e74de44f6eb9c9029d099ebc
6827961c002757f8e74de44f6eb9c9029d099ebc,6827961c,doc: Update micropeak quick start guide to note new boost detect,"doc: Update micropeak quick start guide to note new boost detect

Now waits for one minute and 30m of altitude change to avoid false detections.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387405541,1387405541,c0966cd40f05f3a65b0c977b4b92586a58192f4b
c0966cd40f05f3a65b0c977b4b92586a58192f4b,c0966cd4,micropeak: Compile for java 6,"micropeak: Compile for java 6

Don't a require later version as not all target OSes support it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387405371,1387405371,eea036650e62bc0f8652155974b512686754fd13
eea036650e62bc0f8652155974b512686754fd13,eea03665,Move pdclib build results to pdclib-root,"Move pdclib build results to pdclib-root

This makes pdclib easier to manage as a submodule

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387404521,1387404521,c1bfe09b6d3eb28d0c7cfe07a248843cf81bcd25
c1bfe09b6d3eb28d0c7cfe07a248843cf81bcd25,c1bfe09b,altosui: Remove some debug printfs,"altosui: Remove some debug printfs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387402564,1387402564,58ceb9c845d51547244538fe6beec27e9a232af8
58ceb9c845d51547244538fe6beec27e9a232af8,58ceb9c8,altosdroid: Use altoslib standard voltages to control lights,"altosdroid: Use altoslib standard voltages to control lights

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387401931,1387401931,dbcf3264f950c4e1d450828c9f161b4c418bee97
dbcf3264f950c4e1d450828c9f161b4c418bee97,dbcf3264,altoslib: Define 3.8 as a good battery and 3.5 as a good igniter,"altoslib: Define 3.8 as a good battery and 3.5 as a good igniter

Use defined values everywhere instead of copying. Adjust battery up to
3.8 to ensure there's enough voltage to not trip the comparators

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387401765,1387401765,b19a648b667c298d2d9d5ed4ee9db661be058d1a
b19a648b667c298d2d9d5ed4ee9db661be058d1a,b19a648b,altoslib: create eeprom download thread before telling monitor about it,"altoslib: create eeprom download thread before telling monitor about it

Telling the monitor too early resulted in passing a null thread
handle, which meant that 'cancel' wouldn't ever work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387400988,1387400988,216405bc49ef2fc0e9941989f054e41f2fef9cfe
216405bc49ef2fc0e9941989f054e41f2fef9cfe,216405bc,altoslib: Don't close telemetry reader at startup unless something fails,"altoslib: Don't close telemetry reader at startup unless something fails

Was always closing the file, which led to very little telemetry being received.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387399222,1387399222,f2e589c59ed0a4c586c5accca8772df15010c46a
f2e589c59ed0a4c586c5accca8772df15010c46a,f2e589c5,libaltos: Import newly build libaltos.dylib,"libaltos: Import newly build libaltos.dylib
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387397815,1387397815,0484ca97828da0d56be7bf395fa4a4b09c591e02
0484ca97828da0d56be7bf395fa4a4b09c591e02,0484ca97,libaltos: remove usb id filtering from darwin code,"libaltos: remove usb id filtering from darwin code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387397754,1387397759,36197a388a9ba1d1ee4acd96ac0079ad3af9d3d0
36197a388a9ba1d1ee4acd96ac0079ad3af9d3d0,36197a38,libaltos: fix test harness main type,"libaltos: fix test harness main type

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387397722,1387397722,119dd56512404e0c39dd5001ba4da9373515c02c
119dd56512404e0c39dd5001ba4da9373515c02c,119dd565,altosui: Add docs to Mac OS X dmg distribution,"altosui: Add docs to Mac OS X dmg distribution

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387394705,1387394765,6df58bb0115a8da13d35ab38861f6231bea7f2a7
6df58bb0115a8da13d35ab38861f6231bea7f2a7,6df58bb0,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387394371,1387394371,"4383bafc6ccdde10f06882ba3e96126c61d5e988,02195f2970fb7243fd9a9992abb6ada6709db4e1"
4383bafc6ccdde10f06882ba3e96126c61d5e988,4383bafc,a fresher changelog entry for test builds,"a fresher changelog entry for test builds
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387394310,1387394310,7db8e8190bc8b9a17a7b5107954e2362a0e9c7a2
7db8e8190bc8b9a17a7b5107954e2362a0e9c7a2,7db8e819,need to include the Cortex toolchain,"need to include the Cortex toolchain
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387390135,1387394195,e2635d07d0f0a91dd7d59f2c94765a40907d2732
02195f2970fb7243fd9a9992abb6ada6709db4e1,02195f29,fix git: path for pdclib,"fix git: path for pdclib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387394080,1387394080,fbca372edd5609bc253b622b55b7faffd19ae6cd
fbca372edd5609bc253b622b55b7faffd19ae6cd,fbca372e,Use git: path for pdclib,"Use git: path for pdclib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387393964,1387393964,e2635d07d0f0a91dd7d59f2c94765a40907d2732
e2635d07d0f0a91dd7d59f2c94765a40907d2732,e2635d07,Ignore .dll files in libaltos,"Ignore .dll files in libaltos

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387393691,1387393691,8fdbdebdbb4d1579fd2af47430807d0d2a78105b
8fdbdebdbb4d1579fd2af47430807d0d2a78105b,8fdbdebd,ao-tools: complain if st-flash is not available,"ao-tools: complain if st-flash is not available

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387393675,1387393675,8f529633cd4be8a0edb1b067bbf5d7cc055dcc1b
8f529633cd4be8a0edb1b067bbf5d7cc055dcc1b,8f529633,altos: get stm-bringup building again,"altos: get stm-bringup building again

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387392906,1387392906,262ee65885d55902df96f4aec6a114f5ac6f2c61
262ee65885d55902df96f4aec6a114f5ac6f2c61,262ee658,Remove stale stm test apps from regular build,"Remove stale stm test apps from regular build
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387392789,1387392789,90386115204bd3bfa55deb5ebe1972bacdba725a
90386115204bd3bfa55deb5ebe1972bacdba725a,90386115,altos/stm: Update pdclib paths for flash-loader builds,"altos/stm: Update pdclib paths for flash-loader builds

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387392645,1387392650,eb659fb0ee80c25312be36b3d8adb686813db125
eb659fb0ee80c25312be36b3d8adb686813db125,eb659fb0,altos: create target pdclib directories before building,"altos: create target pdclib directories before building
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387392196,1387392196,9c200c3bc742b4dd1a7e28bfce9d5b27e833aae5
9c200c3bc742b4dd1a7e28bfce9d5b27e833aae5,9c200c3b,altos: Build pdclib locally if necessary,"altos: Build pdclib locally if necessary

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387389689,1387389689,fbde0c3e4bdb419d6bd4dbcc96b0e01c59e9fa13
fbde0c3e4bdb419d6bd4dbcc96b0e01c59e9fa13,fbde0c3e,include pdclib in wrong place,"include pdclib in wrong place
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387389573,1387389573,77b04d662a6704f5db10522a2f9b169d31df5bea
77b04d662a6704f5db10522a2f9b169d31df5bea,77b04d66,altosui: Hide non-applicable altimeter config values,"altosui: Hide non-applicable altimeter config values

This makes configuring EasyMini a lot easier...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387360995,1387360995,012abeda6ae846d74729e96e7ed7c8af2edca572
012abeda6ae846d74729e96e7ed7c8af2edca572,012abeda,altos/lpc: Be a bit more resistant to toolchain section name changes,"altos/lpc: Be a bit more resistant to toolchain section name changes

Just add some wild cards on the ends of each section name in case the
toolchain changes names in the future.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387360932,1387360932,e26306c9350ef1d107d4257ef1c09d15165c9154
e26306c9350ef1d107d4257ef1c09d15165c9154,e26306c9,altoslib: Pass InterruptedException up the stack instead of hiding it,"altoslib: Pass InterruptedException up the stack instead of hiding it

When interrupting a thread that is talking to a serial device, it's
important not to have that thread discard the InterruptedException so
that it will actually terminate. This patch removes a bunch of places
that were discarding InterruptedExceptions and lets higher level code
see them so that they can exit cleanly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387358051,1387358051,18852efa108ba6e6e69dfd5076d4f4c01f62b4ef
18852efa108ba6e6e69dfd5076d4f4c01f62b4ef,18852efa,altos: Make TeleMega v0.1 work more like TeleMega v1.0,"altos: Make TeleMega v0.1 work more like TeleMega v1.0

I've still got one working v0.1 board which is useful for testing
stuff, so make it work more like the released TeleMega:

 * Use E for drogue, F for main
 * Use on-chip eeprom for config
 * Fix ADC report printf to match

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387357931,1387357931,1f035ac2df1cfa6964ae904aba0aedde279ca921
1f035ac2df1cfa6964ae904aba0aedde279ca921,1f035ac2,altos: Use all 16 bits of setup packet len when limiting reply len,"altos: Use all 16 bits of setup packet len when limiting reply len

We were only using the low 8 bits of the setup packet reply max len,
which meant that if the other side sent a weird max len (as Windows 7
does), then we'd truncate our setup reply to whatever was in the low 8
bits of that value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387353054,1387353239,1280ba2e51b36f417f3adb6d101405ee75e7e509
1280ba2e51b36f417f3adb6d101405ee75e7e509,1280ba2e,altosui: Add EasyMini bits to fat distribution images. Update telemetrum.inf,"altosui: Add EasyMini bits to fat distribution images. Update telemetrum.inf

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387349625,1387349625,212a1b66ae04317b7b42ba57573b910fde09ca6c
212a1b66ae04317b7b42ba57573b910fde09ca6c,212a1b66,doc: Publish images with HTML bits,"doc: Publish images with HTML bits

Otherwise the html won't render right.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387340659,1387340659,2ecb6a8276b2ce40d2a4da586dbc17581cfda26d
2ecb6a8276b2ce40d2a4da586dbc17581cfda26d,2ecb6a82,altos: Broke TeleMetrum GPS reporting by holding the GPS mutex too much,"altos: Broke TeleMetrum GPS reporting by holding the GPS mutex too much

We can't hold the GPS mutex while waiting for the GPS receiver to load
data as it protects the GPS data with the GPS mutex.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387340580,1387340580,e44ce127ece149e7b07be49142bc0f9d50bbe97d
e44ce127ece149e7b07be49142bc0f9d50bbe97d,e44ce127,doc: Add screen shots everywhere,"doc: Add screen shots everywhere

This has screen shots of every dialog in altosui

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387339512,1387339512,e4b223df372348718b74d2ecad4957f3e30f8d79
e4b223df372348718b74d2ecad4957f3e30f8d79,e4b223df,Add altosui image and attempt to add launch photo to title,"Add altosui image and attempt to add launch photo to title
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387330659,1387330666,1d093383fe58fc8c8c11e1c7cd1cd929ae1bd9e4
1d093383fe58fc8c8c11e1c7cd1cd929ae1bd9e4,1d093383,further documentation tweaks,"further documentation tweaks
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387317239,1387317239,90c88bab305c43eb62f964fd3ff350b8b0b5320d
90c88bab305c43eb62f964fd3ff350b8b0b5320d,90c88bab,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

Conflicts:
	doc/altusmetrum.xsl
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387314570,1387314570,"d5d6d10ceb724081c7cf89a3885d7e6c3da14604,dffbdd93d7a86a12d83a412de37dfd2a5f063995"
d5d6d10ceb724081c7cf89a3885d7e6c3da14604,d5d6d10c,capture my changes so far,"capture my changes so far
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387314492,1387314492,8bb6dd75a602792936d623713fb009fea25ef491
dffbdd93d7a86a12d83a412de37dfd2a5f063995,dffbdd93,doc: Add product pictures to manual,"doc: Add product pictures to manual

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387309126,1387309129,9d8da4ef325171960e16fc027c6039cb63eae942
9d8da4ef325171960e16fc027c6039cb63eae942,9d8da4ef,Keep tables together on a page,"Keep tables together on a page
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387307994,1387307994,7acd0cf17c5ca7a00893f35c7fe9c657389070e0
7acd0cf17c5ca7a00893f35c7fe9c657389070e0,7acd0cf1,doc: Convert several more itemizedlists to variablelists,"doc: Convert several more itemizedlists to variablelists

When defining a term, use variablelist to pull the term out to the left.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387305209,1387305209,8bb6dd75a602792936d623713fb009fea25ef491
8bb6dd75a602792936d623713fb009fea25ef491,8bb6dd75,"Clean up reflashing section, include section on self-flash recovery","Clean up reflashing section, include section on self-flash recovery

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387257684,1387257684,1562affc4951e147eba20380ea5be2e9f7152789
1562affc4951e147eba20380ea5be2e9f7152789,1562affc,ao-tools: Use st-flash for STM flashing instead of openocd,"ao-tools: Use st-flash for STM flashing instead of openocd

st-flash, from the stlink tools, appears more reliable when flashing
STM CPUs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1387050451,1387050451,7d7ae63d8dfcc99a30285e0bd2411901941d1813
7d7ae63d8dfcc99a30285e0bd2411901941d1813,7d7ae63d,"add serial number to ao-usbload call, pass SERIAL to cal-freq","add serial number to ao-usbload call, pass SERIAL to cal-freq
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1387048563,1387048563,c94ca50fd9f24f271c160f6e0e95cb7340289354
c94ca50fd9f24f271c160f6e0e95cb7340289354,c94ca50f,temporarily force stlink location in debian/rules to allow complete build,"temporarily force stlink location in debian/rules to allow complete build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1386985049,1386985049,6545a72012e94a50d185e1c4ecff3c3769d60acd
6545a72012e94a50d185e1c4ecff3c3769d60acd,6545a720,java: Missed libaltos java compile flags from previous patch,"java: Missed libaltos java compile flags from previous patch

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386665672,1386665672,8959c059ec67f5334e31abbe3f831dd571a0b464
8959c059ec67f5334e31abbe3f831dd571a0b464,8959c059,java: Add -target 1.6 to all java compiles,"java: Add -target 1.6 to all java compiles

This makes sure the results can run with the old JVM

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386665461,1386665461,a4596c134aa5e7867f1ca1d86d36afb2af9b8999
a4596c134aa5e7867f1ca1d86d36afb2af9b8999,a4596c13,altos: Remove ARM .ihx files on 'make clean',"altos: Remove ARM .ihx files on 'make clean'

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386664792,1386664792,50753e84871b2a01d270d28b8b77a19614d2180c
50753e84871b2a01d270d28b8b77a19614d2180c,50753e84,Set version to 1.3 in preparation for release,"Set version to 1.3 in preparation for release

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386662600,1386662600,54f7888dc65ffc27c6ee5ef93953bd9b8fc029ed
54f7888dc65ffc27c6ee5ef93953bd9b8fc029ed,54f7888d,doc: More altusmetrum.xsl updates for 1.3,"doc: More altusmetrum.xsl updates for 1.3

Spell checking even

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386662431,1386662431,a140b3ad689bcebdcf87caab1e64048f693a9b85
a140b3ad689bcebdcf87caab1e64048f693a9b85,a140b3ad,debian: .ihx and .map files are left in subdirs now,"debian: .ihx and .map files are left in subdirs now

Install them from the right place

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386659773,1386659773,95c1a5a61267233cf2c16175aeb73bfb7d12ba8f
95c1a5a61267233cf2c16175aeb73bfb7d12ba8f,95c1a5a6,altosui: Ship TeleMega-v1.0 firmware,"altosui: Ship TeleMega-v1.0 firmware

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386659695,1386659695,b023c87e2b86ba57cbf97be1ab76b532e0a00fad
b023c87e2b86ba57cbf97be1ab76b532e0a00fad,b023c87e,ao-bringup: Add turnon_telemega script,"ao-bringup: Add turnon_telemega script

And a few helper programs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386659560,1386659606,ecb0465be76e9299511aeec663d267967834f6c3
ecb0465be76e9299511aeec663d267967834f6c3,ecb0465b,altos: Rename telemega-v0.3 to telemega-v1.0,"altos: Rename telemega-v0.3 to telemega-v1.0

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386633982,1386633982,dd91a5d5069ff940e07b8817a934ee65d4e8e235
dd91a5d5069ff940e07b8817a934ee65d4e8e235,dd91a5d5,altos: Oops. Was only filling out part of the TeleMetrum ADC record,"altos: Oops. Was only filling out part of the TeleMetrum ADC record

Because it's missing a return, we'd end up filling out one element of
the ADC record per interrupt, and rotating through which one was set,
hitting all of the even offsets within the struct. Yikes!

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386565716,1386565716,c1711890c002fe359bd6c3fdf4092b35d464c6d9
c1711890c002fe359bd6c3fdf4092b35d464c6d9,c1711890,"altosui: When flashing to TeleDongle or TeleBT, match any .ihx file","altosui: When flashing to TeleDongle or TeleBT, match any .ihx file

Let the user pick any .ihx file when using a device which can only be
used as a pair programmer. Note that 'telemetrum' can be either, and
we'll assume that it's a self-programmed device (v2) for now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386565637,1386565637,710343a23c7e6e9c079eafdf3aeea8a40cc2ce61
710343a23c7e6e9c079eafdf3aeea8a40cc2ce61,710343a2,altosui: Match directories in hex file matcher,"altosui: Match directories in hex file matcher

This makes it possible to navigate around the file system

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386563651,1386563651,fd92bb8ff3be257925bf6e969d93a7f9dd941fb8
fd92bb8ff3be257925bf6e969d93a7f9dd941fb8,fd92bb8f,altoslib: Don't require radio_cal or usb_descriptors in AltosRomconfig,"altoslib: Don't require radio_cal or usb_descriptors in AltosRomconfig

Not all products will have these values, so allow them to be missing

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386563602,1386563602,68adbf5bf08ed8af2f34c0d95d9c3d457574372d
68adbf5bf08ed8af2f34c0d95d9c3d457574372d,68adbf5b,Add new tools to .gitignore,"Add new tools to .gitignore

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386562306,1386562306,2cdb90d9214f8e66b3574cbd9c5ed073a7861681
2cdb90d9214f8e66b3574cbd9c5ed073a7861681,2cdb90d9,altoslib: Add self-flashing code,"altoslib: Add self-flashing code

This adds the ability to use the AltOS flash-loader on both STM and
NXP processors.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386562150,1386562150,70d0841b4017e7580c893c7033c04fb2964adab6
70d0841b4017e7580c893c7033c04fb2964adab6,70d0841b,altoslib: Add AltosNoSymbol exception,"altoslib: Add AltosNoSymbol exception

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386562043,1386562074,4e1b134e29313a1bdac18de57fe547299e5ded2a
4e1b134e29313a1bdac18de57fe547299e5ded2a,4e1b134e,altoslib: Use symbols in AltosRomconfig instead of fixed offsets,"altoslib: Use symbols in AltosRomconfig instead of fixed offsets

The new Hexfile symbol code automatically adds the needed romconfig
symbols for cc1111 products, and ARM-based products have symbols in
the .ihx files. This means that we can rely on using symbols when
finding config values in memory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386561883,1386561883,1183417145de549b9281f9e210d216facf3a94ef
1183417145de549b9281f9e210d216facf3a94ef,11834171,altosuilib: Don't match product_altusmetrum for product_basestation or product_altimeter,"altosuilib: Don't match product_altusmetrum for product_basestation or product_altimeter

It's been years since we've shipped boards configured with
product_altusmetrum, but now we've repurposed that code for the flash
loader. When matching an explicit product, go ahead and also match
altusmetrum so that the flash loader will fit, but when matching
basestation or altimeter, don't as that will avoid popping up the
flight monitor UI at startup when a board is running the boot loader.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386561577,1386561577,e0af4569446b12c026aa0ffd52c55839d69af0e1
e0af4569446b12c026aa0ffd52c55839d69af0e1,e0af4569,altoslib: Publish mapping from product name back to USB id,"altoslib: Publish mapping from product name back to USB id

This lets us choose which device to flash based on the filename

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386560907,1386560907,88fa5fa6acbdd66d1338ca73cbbac219d62b5136
88fa5fa6acbdd66d1338ca73cbbac219d62b5136,88fa5fa6,altoslib: Create AltosProgrammer class,"altoslib: Create AltosProgrammer class

This provides an abstract interface to flashing boards, for
dongle-based and self-programming boards.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386560864,1386560864,7b0c1fbccb4ef1ae2ed356292cc8762360532b7f
7b0c1fbccb4ef1ae2ed356292cc8762360532b7f,7b0c1fbc,altoslib: Add symbols to .ihx files,"altoslib: Add symbols to .ihx files

Create a new 0xfe record type to hold the symbols, and append them
after the EOF record so that other tools might continue to work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386560790,1386560790,b1ffdaf1f5e9b6e8ff0d4e08d8c504f8dfacd3a4
b1ffdaf1f5e9b6e8ff0d4e08d8c504f8dfacd3a4,b1ffdaf1,altoslib: Support binary reading/writing in AltosLink,"altoslib: Support binary reading/writing in AltosLink

Binary reads require an explicit length, and do not work while
telemetry is running.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386560593,1386560689,2cb7a96567e1302a699f78290fab5e29693940ab
2cb7a96567e1302a699f78290fab5e29693940ab,2cb7a965,altos/stm: arm-none-eabi-binutils now puts 'main' into .text.startup,"altos/stm: arm-none-eabi-binutils now puts 'main' into .text.startup

Change name of .text.ram to .ramtext, then load .text* into flash and
.ramtext into ram. This ensures that 'main' and anything else in a
random .text.* segment will get loaded into flash as appropriate.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386558301,1386560273,3e22a0dce4248cce862147c985078de44c427b12
3e22a0dce4248cce862147c985078de44c427b12,3e22a0dc,ao-tools: build ao-usbload by default,"ao-tools: build ao-usbload by default

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386558251,1386558251,b1f3525afa801038f7087a3a2caf369f2460a5db
b1f3525afa801038f7087a3a2caf369f2460a5db,b1f3525a,altoslib: AltosEepromMonitor had false import of altosuilib,"altoslib: AltosEepromMonitor had false import of altosuilib

Not needed, and breaks the build

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386531669,1386531669,eded084c6caa1f9423d690c8b45c8042f8355987
eded084c6caa1f9423d690c8b45c8042f8355987,eded084c,altos: remove all versions of stm-demo executable,"altos: remove all versions of stm-demo executable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386530248,1386530248,bb72b4018dd6a422afe1916d9538bb9ff1e45353
bb72b4018dd6a422afe1916d9538bb9ff1e45353,bb72b401,altos: Change flash loader name to just AltosFlash,"altos: Change flash loader name to just AltosFlash

Remove the software version string from the product name

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386530137,1386530137,52b19511222980138faddb2047707baceff0a596
52b19511222980138faddb2047707baceff0a596,52b19511,altos: Build .ihx files for all arm projects,"altos: Build .ihx files for all arm projects

The .ihx version can be processed by the java loader

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386530069,1386530069,a1e4750a7d4af72e8e9086735885f48c9b56c18e
a1e4750a7d4af72e8e9086735885f48c9b56c18e,a1e4750a,altos: Allow products to override default 100mA USB current,"altos: Allow products to override default 100mA USB current

This will allow products to specify their own current limit.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386529901,1386529901,25aaf6122cbddcbc6a80460dac8ccb9f45743ae0
25aaf6122cbddcbc6a80460dac8ccb9f45743ae0,25aaf612,ao-tools: Clean up ao-stmload and ao-usbload options. Add --raw,"ao-tools: Clean up ao-stmload and ao-usbload options. Add --raw

ao-stmload only uses stlink, ao-usbload only uses self-flashing, so
clear up the options in the two programs. The new --raw option skips
the serial and radio cal rewriting when flashing the boot loader.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386529800,1386529800,ebb36d56c732ffe9cdb8d2ea53d00e1d4ece8f97
ebb36d56c732ffe9cdb8d2ea53d00e1d4ece8f97,ebb36d56,ao-tools: Allow building without stlink and readline,"ao-tools: Allow building without stlink and readline

This adds --without-stlink and --without-readline options to configure
to disable these features, and adjusts the build process and code to
handle that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386529666,1386529666,5fd0dc6f69e7614ba71bbc215b32260a11595af3
5fd0dc6f69e7614ba71bbc215b32260a11595af3,5fd0dc6f,ao-tools: Add ao-flash-stm and ao-flash-lpc scripts,"ao-tools: Add ao-flash-stm and ao-flash-lpc scripts

These use openocd to download boot loaders to the arm-based products

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386487650,1386487650,eee9b3ce1e5adae5aa4566050b6d6048344e92c4
eee9b3ce1e5adae5aa4566050b6d6048344e92c4,eee9b3ce,altosuilib: Deal with AltosUnits API change,"altosuilib: Deal with AltosUnits API change

The abstract methods in AltosUnits now pass the 'imperial_units' flag
explicitly, so deal with that in AltosUnits itself

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386438857,1386438857,407696f11ac1736e840c9b702592c46197d14c2c
407696f11ac1736e840c9b702592c46197d14c2c,407696f1,altosui: Clean up serial close handling,"altosui: Clean up serial close handling

Unify serial close processing in a single function (close_serial),
make everyone else call that. This avoids a couple of cases where the
device would be closed and not removed from the devices_opened list,
leading to 'device is already in use' messages.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386438790,1386438790,1a47532f411488f003726aa9365ede5dc90c5b78
1a47532f411488f003726aa9365ede5dc90c5b78,1a47532f,altosui: Don't try to report bearing/elevation without GPS,"altosui: Don't try to report bearing/elevation without GPS

If the distance from the pad cannot be computed (due to lacking GPS),
then don't try to report it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386438718,1386438718,44249a9262a16ed103aedf30a300003fc2a17579
44249a9262a16ed103aedf30a300003fc2a17579,44249a92,"altos: Nothing in altos uses AES decryption, so don't compile it","altos: Nothing in altos uses AES decryption, so don't compile it

Saves a bit of space where AES is used, and avoids some compiler warnings.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386438540,1386438540,cdb32b1717db4e8cb8cf94d810e74ce2b569566b
cdb32b1717db4e8cb8cf94d810e74ce2b569566b,cdb32b17,altos/test: Compute and plot tilt based on GPS track,"altos/test: Compute and plot tilt based on GPS track

This lets us compare the gyro-computed tilt angle against the actual
flight path.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386438465,1386438465,6fbf4829569d5edb476654f4e383b834af527dc6
6fbf4829569d5edb476654f4e383b834af527dc6,6fbf4829,"altos: Telemega uses eeprom, include it in main file","altos: Telemega uses eeprom, include it in main file

ao_telemega.c didn't include ao_eeprom.h leaving a function undefined

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386438053,1386438053,2a9b0cdff5db03dc11b6ef69cf5436c834c3acc4
2a9b0cdff5db03dc11b6ef69cf5436c834c3acc4,2a9b0cdf,altos: Add lots more GPS data to mega log,"altos: Add lots more GPS data to mega log

There's plenty of space in the GPS log packets to hold course, speed,
climb and DOP values, so just stick them in.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386437981,1386437981,de2e812b02a99a2f6d85f15a9600265931f6f6b0
de2e812b02a99a2f6d85f15a9600265931f6f6b0,de2e812b,src/cc1111: Turn off RC osc after xtal is running,"src/cc1111: Turn off RC osc after xtal is running

There's no reason to keep running the RC oscillator after we switch to
the crystal, so turn it off.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1386437930,1386437930,473ae38ade0552c5ff3ca088b21345ed5dfad5d0
473ae38ade0552c5ff3ca088b21345ed5dfad5d0,473ae38a,doc: First pass for 1.3 finished; docs have most major sections updated.,"doc: First pass for 1.3 finished; docs have most major sections updated.

Final edits and corrections still required.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385680886,1385680886,6d9b93bfd637eb690159fc5efda0390eb602c6a7
6d9b93bfd637eb690159fc5efda0390eb602c6a7,6d9b93bf,ao-tools: Split out USB loader to ao-usbload,"ao-tools: Split out USB loader to ao-usbload

Leave ao-stmload using just stlinkv2

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385664247,1385664247,f27dff090c8f3a63bd932715643980703160bde6
f27dff090c8f3a63bd932715643980703160bde6,f27dff09,ao-tools: Split out altos symbol editing from ao-stmload,"ao-tools: Split out altos symbol editing from ao-stmload

to be shared with ao-usbload

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385663492,1385663492,5ef287723f8d8bfbfb3582d22bfb5c2a3129414a
5ef287723f8d8bfbfb3582d22bfb5c2a3129414a,5ef28772,ao-tools: Missing ao-selfload.h,"ao-tools: Missing ao-selfload.h
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385661158,1385661158,e6c9ca218d944443c86555e513534d82713af936
e6c9ca218d944443c86555e513534d82713af936,e6c9ca21,ao-tools: move 16/32-bit readers from ao-stmload to lib,"ao-tools: move 16/32-bit readers from ao-stmload to lib
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385661121,1385661121,d93a65a90f19e4816231e03b1f399af6e3742aee
d93a65a90f19e4816231e03b1f399af6e3742aee,d93a65a9,ao-tools: Move ao-selfload into library,"ao-tools: Move ao-selfload into library

This needs to be shared between ao-stmload and ao-usbload

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385660773,1385660773,14204e3d147ad99cc249ad8de254809180fe5c38
14204e3d147ad99cc249ad8de254809180fe5c38,14204e3d,ao-tools: Add ao-elftohex and .ihx symbol support,"ao-tools: Add ao-elftohex and .ihx symbol support

ao-elftohex converts an elf file into a hex file so that we can load
it with java.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385659862,1385659862,ee07f1a0f8e431bebb3b948f6249f5f33413e966
ee07f1a0f8e431bebb3b948f6249f5f33413e966,ee07f1a0,ao-tools: Add debug printf support,"ao-tools: Add debug printf support
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385659792,1385659792,95a8180f3d7929dbad65c80421f99c925f245af0
95a8180f3d7929dbad65c80421f99c925f245af0,95a8180f,ao-tools: Create general elf and hex library routines,"ao-tools: Create general elf and hex library routines

Pulls the elf stuff out of ao-stmload, change the hex stuff into ao_
routines.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385589546,1385589546,73b1a7e644e255558378ab66de6426a7dfd8a7dc
73b1a7e644e255558378ab66de6426a7dfd8a7dc,73b1a7e6,doc: Work on AltosUI Pyro config docs a bit more.,"doc: Work on AltosUI Pyro config docs a bit more.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385370936,1385370936,82b42935d047d2f7c2f7a63a3efb72a3f1d5594e
82b42935d047d2f7c2f7a63a3efb72a3f1d5594e,82b42935,altosui: Handle units in pyro config.,"altosui: Handle units in pyro config.

This lets you edit the pyro configuration using imperial units if
desired.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385366526,1385366526,8da565bbafa2925aa889cf9249497a709a814b7f
8da565bbafa2925aa889cf9249497a709a814b7f,8da565bb,doc: Add telemetry enable and APRS interval config docs,"doc: Add telemetry enable and APRS interval config docs

Also starts working on the pyro channel config window docs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385366480,1385366480,f743934ebd1a7c7c8b6db0223f0309e590aa15cd
f743934ebd1a7c7c8b6db0223f0309e590aa15cd,f743934e,doc: use correct quotes in altusmetrum.xsl,"doc: use correct quotes in altusmetrum.xsl

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385358920,1385358920,6f4abc14065aebceaac9313e4dcd4300e19999cf
6f4abc14065aebceaac9313e4dcd4300e19999cf,6f4abc14,"doc: ""rocketry electronics"" instead of listing products","doc: ""rocketry electronics"" instead of listing products
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385358627,1385358627,31a1c701bfaea97225e12ea0688b934790e3737e
31a1c701bfaea97225e12ea0688b934790e3737e,31a1c701,Use more 1/4 single characters,"Use more 1/4 single characters
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385357306,1385357306,96f33e780958adaaa4a9cc127caecaeb3f4c978c
96f33e780958adaaa4a9cc127caecaeb3f4c978c,96f33e78,Remove duplicate log description. Describe pyro config.,"Remove duplicate log description. Describe pyro config.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385357106,1385357106,3eaaefe6d746a2f53995a2470c5024f37c87c393
3eaaefe6d746a2f53995a2470c5024f37c87c393,3eaaefe6,Extend the hardware overview chapter. Edit System Operations,"Extend the hardware overview chapter. Edit System Operations

Extend the overview chapter to include tables describing the
electronic and physical board characteristics of each board.

Finish most of the System Operation stuff, still need to add pyro
channel configuration

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1385352352,1385352352,ceed62fd97972b35f4cf6560625135723cb8610f
ceed62fd97972b35f4cf6560625135723cb8610f,ceed62fd,debian: Build now depends on 'xmlto' for docs,"debian: Build now depends on 'xmlto' for docs

This wraps xsltproc, fop and xmllint for formatting pdf files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384811298,1384811298,92753d4b8d6b17ebc7a9b65680abd46648726393
92753d4b8d6b17ebc7a9b65680abd46648726393,92753d4b,doc: Use system fo docbool.xsl instead of network one,"doc: Use system fo docbool.xsl instead of network one

Instead of reading the master stylesheet from the network, just use
the one installed on the system.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384807413,1384807413,89fc38f2cf143bed1fe8c4a4972267b15c9aa467
89fc38f2cf143bed1fe8c4a4972267b15c9aa467,89fc38f2,doc: Make pdf files depend on local stylesheet,"doc: Make pdf files depend on local stylesheet

Now that we're using our own, rebuild the docs when it changes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384807358,1384807358,f9bbca59a9034cf7e6df4577e627d7447f3a9d51
f9bbca59a9034cf7e6df4577e627d7447f3a9d51,f9bbca59,doc: Make micropeak.xsl validate,"doc: Make micropeak.xsl validate

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384807340,1384807340,0a3e27e3a392be4cfe03d200068a7e69bb2f3fdb
0a3e27e3a392be4cfe03d200068a7e69bb2f3fdb,0a3e27e3,Make companion.xsl validate,"Make companion.xsl validate

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384807132,1384807132,d212d782bff977d609a9da1b805de4a2615fb474
d212d782bff977d609a9da1b805de4a2615fb474,d212d782,doc: Make telemetry.xsl validate,"doc: Make telemetry.xsl validate

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384807043,1384807043,87fbe12bdaf10c9ba7ba43608b1e980cdc09d496
87fbe12bdaf10c9ba7ba43608b1e980cdc09d496,87fbe12b,doc: Make altos.xsl validate,"doc: Make altos.xsl validate

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384806582,1384806582,963a61986ea4b48fdca0989479e9c50acb0f1a9d
963a61986ea4b48fdca0989479e9c50acb0f1a9d,963a6198,doc: Switch to xorg style to generate index,"doc: Switch to xorg style to generate index

This style sheet generates a nice PDF index

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384805574,1384805574,9953a5f0440b269dac5c675f120e6a31dde8ec69
9953a5f0440b269dac5c675f120e6a31dde8ec69,9953a5f0,doc: Get altusmetrum.xsl to validate,"doc: Get altusmetrum.xsl to validate

Mostly involved getting the listitem contents into para elements.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384805191,1384805191,152d978dc4be49b6b764e5e1966bd860c46054ea
152d978dc4be49b6b764e5e1966bd860c46054ea,152d978d,doc: Start work on 1.3 doc updates,"doc: Start work on 1.3 doc updates

Add 1.3 release notes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384805110,1384805110,71705532374f222e51c66e2f1214dd01b3efc8bd
71705532374f222e51c66e2f1214dd01b3efc8bd,71705532,Bump to version 1.2.9.4,"Bump to version 1.2.9.4
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384236170,1384241251,12481415c2e5fb03b003343c9499df711eb14f91
12481415c2e5fb03b003343c9499df711eb14f91,12481415,altos: include ao_eeprom.h in ao_telemetrum.c to define ao_eeprom_init,"altos: include ao_eeprom.h in ao_telemetrum.c to define ao_eeprom_init

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384241162,1384241251,bf893a4149b05b97f18f9f487af805adef859d74
bf893a4149b05b97f18f9f487af805adef859d74,bf893a41,altos: Make sure flight erase log comes after config blog,"altos: Make sure flight erase log comes after config blog

Oops. When converting from ao_storage to ao_config, I accidentally had
the flight erase log overwriting the config block.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384240969,1384241251,92eafd01f2809f39c5bc4058977c790d94a99df1
92eafd01f2809f39c5bc4058977c790d94a99df1,92eafd01,altos: Move telemega to using internal eeprom for config,"altos: Move telemega to using internal eeprom for config

And crank up the default per-flight storage to 1MB

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384240130,1384241251,9c53ad6f8222878a26efecebd3bb1d1fe054a4b6
9c53ad6f8222878a26efecebd3bb1d1fe054a4b6,9c53ad6f,altos: Move TeleMetrum v2.0 to using internal eeprom for config,"altos: Move TeleMetrum v2.0 to using internal eeprom for config

This leaves the whole 8MB of flash for flight storage

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384240019,1384241251,83437b2fe304599e22d0a98b5410808bcb67dc97
83437b2fe304599e22d0a98b5410808bcb67dc97,83437b2f,altos: Allow use of internal EEPROM for config storage,"altos: Allow use of internal EEPROM for config storage

This stops exposing eeprom as 'storage' and instead exposes it with a
separate eeprom API so that it can be used for config storage without
also using it for flight log storage.

The config code has been changed to allow it to either use storage for
configuration data or eeprom.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384238732,1384241251,b57f1cabfe5052306cb4c28793bea477f4aeb2d2
b57f1cabfe5052306cb4c28793bea477f4aeb2d2,b57f1cab,altos: Don't hold GPS mutex while waiting in TM v2.0 report,"altos: Don't hold GPS mutex while waiting in TM v2.0 report

Holding the GPS mutex while waiting for the GPS code to dump data into
the GPS variables is rather counter-productive.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384237138,1384241251,0951b1ef83d8d741d65811fa23bde43ee843a939
0951b1ef83d8d741d65811fa23bde43ee843a939,0951b1ef,altos: Build TM v2.0 firmware by default,"altos: Build TM v2.0 firmware by default

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384237133,1384241251,3c40272713d93e79bb0989eefe191cd2bfe56a44
3c40272713d93e79bb0989eefe191cd2bfe56a44,3c402727,"ignore ""compile"" script","ignore ""compile"" script
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384236073,1384236073,28327883d377896caddbad0f9efded56a227edd1
28327883d377896caddbad0f9efded56a227edd1,28327883,Add TeleMini v2.0 turnon script,"Add TeleMini v2.0 turnon script
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384235980,1384235980,cffbc025532487bbd9b467476be05d0997b5133e
cffbc025532487bbd9b467476be05d0997b5133e,cffbc025,"ao-tools: add ao-mega man page, ignore executable","ao-tools: add ao-mega man page, ignore executable
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384235807,1384235807,40d3575a9365d77ca507ebee226d51d081e1ecc6
40d3575a9365d77ca507ebee226d51d081e1ecc6,40d3575a,altos: Clean up .gitignore and add a few random files,"altos: Clean up .gitignore and add a few random files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384235697,1384235697,9d2eb0b00a5a0faefce95bce949be7206b0aad37
9d2eb0b00a5a0faefce95bce949be7206b0aad37,9d2eb0b0,Add ublox checksum generating program,"Add ublox checksum generating program
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384235301,1384235301,d5367f20fa1ae71496fde071953c2cda89654071
d5367f20fa1ae71496fde071953c2cda89654071,d5367f20,Ignore mac .dmg files,"Ignore mac .dmg files
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384235151,1384235151,0093d5b368669e0c324f8d9dfcd2f004de85ee5c
0093d5b368669e0c324f8d9dfcd2f004de85ee5c,0093d5b3,"altosui, altoslib: Move eeprom download code to altoslib","altosui, altoslib: Move eeprom download code to altoslib

This should make adding eeprom downloading to altosdroid easier

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384234677,1384234677,45db3076b257adcf2c9f69ed0927f09d94af7a50
45db3076b257adcf2c9f69ed0927f09d94af7a50,45db3076,altosui: Make AltosEepromDownload not swing-dependent,"altosui: Make AltosEepromDownload not swing-dependent

Will move to altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384234110,1384234110,6aa99c160f0695eb25ccc0598e4c36224c89dab4
6aa99c160f0695eb25ccc0598e4c36224c89dab4,6aa99c16,altoslib: Start moving eeprom download logic to altoslib,"altoslib: Start moving eeprom download logic to altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384232780,1384232780,74d73a2cd0b6a228eb396552e1d16685669349c0
74d73a2cd0b6a228eb396552e1d16685669349c0,74d73a2c,altoslib: Raise ParseException on invalid eeprom format,"altoslib: Raise ParseException on invalid eeprom format

Make sure the user knows when data are not downloaded successfully
because the UI doesn't understand the eeprom format.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384232622,1384232622,bdd6244d8b4a55c9aa4fb79b0cb1a0727afbc2ac
bdd6244d8b4a55c9aa4fb79b0cb1a0727afbc2ac,bdd6244d,altos: Add orientation tracking to ao_flight_test,"altos: Add orientation tracking to ao_flight_test

Shows calculated offset from vertical in ao_flight_test output

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1384232515,1384232515,29b48b63305881471d9b97ef3fb236af03cb79f5
29b48b63305881471d9b97ef3fb236af03cb79f5,29b48b63,altos: Don't hold GPS mutex while waiting for GPS data in report code,"altos: Don't hold GPS mutex while waiting for GPS data in report code

Oops. This kinda breaks anyone else waiting for GPS data

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382945773,1382945773,d3628bd2dd3612065792aef6c7ae5bc967b4f081
d3628bd2dd3612065792aef6c7ae5bc967b4f081,d3628bd2,altos: sample profile address range was too narrow,"altos: sample profile address range was too narrow

The range was cranked down at some point to diagnose issues within the
task scheduler. Unfortunately, that change got merged, which meant
that general profiling lost information outside of the lower 4kB of code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382945099,1382945099,7c1c6728bce4237ca3a8f6fde01356697a465dfd
7c1c6728bce4237ca3a8f6fde01356697a465dfd,7c1c6728,altos: Make telemega v0.3 compile with new quaternion code,"altos: Make telemega v0.3 compile with new quaternion code

Adds lots more math code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382942847,1382942847,e838bd2847e5684ce93b6f7cbe736ebed681c3c6
e838bd2847e5684ce93b6f7cbe736ebed681c3c6,e838bd28,altos: Make telemega v0.1 compile with new quaternion code,"altos: Make telemega v0.1 compile with new quaternion code

Adds the necessary math code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382942814,1382942814,9b0ce8ca65d76b9cf55dfff002e13ce2fbb5f7fc
9b0ce8ca65d76b9cf55dfff002e13ce2fbb5f7fc,9b0ce8ca,altos: Add orientation test when HAS_FLIGHT_DEBUG is set,"altos: Add orientation test when HAS_FLIGHT_DEBUG is set

This just dumps the current orientation to stdout so you can monitor
it in real time

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382942748,1382942796,5d9e715d570b24ac124c30772b11923bd26ed670
5d9e715d570b24ac124c30772b11923bd26ed670,5d9e715d,altos: Update quaternion tests to check vectors_to_rotation,"altos: Update quaternion tests to check vectors_to_rotation

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382942687,1382942730,195fd70cdc7f519cd8d4ac323088ed0b6c188280
195fd70cdc7f519cd8d4ac323088ed0b6c188280,195fd70c,altos: Change ao_mpu6000_gyro arg to float,"altos: Change ao_mpu6000_gyro arg to float

This lets callers pass more precision than just the original sensor value

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382942578,1382942578,3d3fe7e9b6502432868f4430befac871dfea4869
3d3fe7e9b6502432868f4430befac871dfea4869,3d3fe7e9,altos: Fixup for 32-bit gyro averages,"altos: Fixup for 32-bit gyro averages

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382942546,1382942546,4bebade9e9004bad81df1a423687f3e3f356f1c2
4bebade9e9004bad81df1a423687f3e3f356f1c2,4bebade9,altos: Correct incremental rotation computation,"altos: Correct incremental rotation computation

Trying to compute the combined rotation by taking the x/y/z rotations
as a vector is a good approximation, but not accurate enough for our
application given the large angles we sometimes see.

Instead, use a correct-but-expensive function with a pile of
transcendental function calls. The STM32L seems to be fast enough at least...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382942275,1382942275,06b0c1b768a7d3eae57e66bc9aea25db49f9ea8a
06b0c1b768a7d3eae57e66bc9aea25db49f9ea8a,06b0c1b7,altos: Compute initial rotation from vertical,"altos: Compute initial rotation from vertical

This initializes the rotation with the angle from vertical, rather
than simply recording the off-angle vector. Doing this allows us to
accurately track the true orientation of the rocket, instead of just
the offset from the initial non-vertical orientation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382942154,1382942154,cdbe8ce33e4a75e85caf07538ed7e997f462b758
cdbe8ce33e4a75e85caf07538ed7e997f462b758,cdbe8ce3,altos: Fixup for ao_sample_orient rename,"altos: Fixup for ao_sample_orient rename

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382941991,1382941991,d96fd33aa8a220d547512eb43c88fc8f5651e39e
d96fd33aa8a220d547512eb43c88fc8f5651e39e,d96fd33a,altos: Add sinf to math code,"altos: Add sinf to math code

Needed for the quaternion gyro tracking code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382941730,1382941730,fa7d0ba0efdde3ac9fb4df0589f9ead07b7ffff5
fa7d0ba0efdde3ac9fb4df0589f9ead07b7ffff5,fa7d0ba0,altos: Keep 9 more bits of average pad IMU gyro data,"altos: Keep 9 more bits of average pad IMU gyro data

This reduces the offset error by a bit, minimizing gyro drift.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382941588,1382941588,58f08c4b3cb9049d0c9cb02cde0d8dbdc3d33920
58f08c4b3cb9049d0c9cb02cde0d8dbdc3d33920,58f08c4b,altos: Rename ao_orient to ao_sample_orient,"altos: Rename ao_orient to ao_sample_orient

Keeps it clear where this name comes from.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382941439,1382941531,c10cb9d31765e6ef0ba737bc484c5aed22a332f9
c10cb9d31765e6ef0ba737bc484c5aed22a332f9,c10cb9d3,altos: Add functions to init quaternions from vector pairs and euler angles,"altos: Add functions to init quaternions from vector pairs and euler angles

Our low sampling rate means that the ""cheap"" hack for
integrating quaternion rotations by using sin(x) ≃ x doesn't work, so
instead we have to compute the partial rotation the hard way.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382940697,1382940697,3b25860b5b3b69642928dd9c30dec4b4b937a88c
3b25860b5b3b69642928dd9c30dec4b4b937a88c,3b25860b,altos: Add some comments describing quaternion multiplication,"altos: Add some comments describing quaternion multiplication

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382940669,1382940669,616977d2955da13383a1869b9ccdb07338172109
616977d2955da13383a1869b9ccdb07338172109,616977d2,altos: Mark arguments to quaternion functions as const,"altos: Mark arguments to quaternion functions as const

Lets us pass constants without the compile whinging

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382940613,1382940613,e923e11e185fd42d2a83e18b3d13bd839a72b1aa
e923e11e185fd42d2a83e18b3d13bd839a72b1aa,e923e11e,altos: IMU accel calibration values need to be signed,"altos: IMU accel calibration values need to be signed

The MPU6000 reports signed values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382939089,1382939089,351d53836e201834a2d89773a08ab7c2dab2b2f4
351d53836e201834a2d89773a08ab7c2dab2b2f4,351d5383,altos: Calibrate IMU accelerometers too,"altos: Calibrate IMU accelerometers too

Average the IMU accelerometer values pointing up and down so that we
have a zero-g offset for all three axes. This can then be used to
compute which direction the rocket is pointing while sitting on the pad.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382700856,1382700856,08143a922fe27bc50a19924f46538f9476ab5fd1
08143a922fe27bc50a19924f46538f9476ab5fd1,08143a92,altos: Add gyro-based orientation tracking,"altos: Add gyro-based orientation tracking

This tracks the angle-from-vertical as an additional input to the pyro
channels.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382699109,1382699109,ba99630f33440b993c69830856d2a7741ffdef71
ba99630f33440b993c69830856d2a7741ffdef71,ba99630f,altos: Fix GPS test frameworks to handle shared ao_gps_new variable,"altos: Fix GPS test frameworks to handle shared ao_gps_new variable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382699019,1382699019,b83876718b1a535ee04ca0351ad57814454ec646
b83876718b1a535ee04ca0351ad57814454ec646,b8387671,altos: Add floating point math functions from newlib,"altos: Add floating point math functions from newlib

These are all BSD licensed, so we can simply include them directly

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1382698849,1382698849,039446f54ef6968a3f0b37ce32ca6bdcdbe62546
039446f54ef6968a3f0b37ce32ca6bdcdbe62546,039446f5,altos: Merge GPS logging into a single function,"altos: Merge GPS logging into a single function

Create a new global, ao_gps_new, which indicates new GPS position and
satellite data.

Use ao_gps_new as the new sleep/wakeup address.

Merge the separate gps position/satellite logging tasks into a single
function which waits for new data and writes out the changed values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381815703,1381815703,5c4b3658a96f1a64ccebf7bddda06b15b4ac4a6f
5c4b3658a96f1a64ccebf7bddda06b15b4ac4a6f,5c4b3658,altos: Use #define values for ublox packet types,"altos: Use #define values for ublox packet types

One case was using hex values instead of the #define equivalents.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381812579,1381812579,db4cd8b3838d27bebdeb6a085a739a36f7634a91
db4cd8b3838d27bebdeb6a085a739a36f7634a91,db4cd8b3,"altoslib,altosui: Be more robust when graphing bogus .telem files","altoslib,altosui: Be more robust when graphing bogus .telem files

Deal with files containing multiple serial number/flight number values
by preserving the boost_tick value across state resets.

Check for invalid state when computing actual boost time for the stats
window.

Ignore invalid speed/accel values when computing averages.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381808534,1381808534,1bd9786802751391cca3b83ac3045029e00e39ee
1bd9786802751391cca3b83ac3045029e00e39ee,1bd97868,altos/micropeak: Increase boost detect to 30m,"altos/micropeak: Increase boost detect to 30m

This meant increasing the data buffering as well so that we could
reliably capture the flight data back to the ground, even for slow
flights.

And, with the buffer extra large, we work backwards from the current
buffer location to find the last ground location rather than working
forwards from the first buffered location. This ensures that we don't
capture noise before boost and instead capture a nice flight curve instead.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381727120,1381727120,e0e98597887a970f31b33895adb77d35e06b34ff
e0e98597887a970f31b33895adb77d35e06b34ff,e0e98597,updated turn-on script for telebt 1.1,"updated turn-on script for telebt 1.1
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1381440954,1381440954,8af5dd05fe56768f225251bbc66831494d80048e
8af5dd05fe56768f225251bbc66831494d80048e,8af5dd05,Another try at skipping broken avr-gcc,"Another try at skipping broken avr-gcc

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381424523,1381424523,2296175eff9e4286eaf44451690701a46595987e
2296175eff9e4286eaf44451690701a46595987e,2296175e,Make sure the AVR compiler can actually link stuff,"Make sure the AVR compiler can actually link stuff

avr-gcc was broken for a while, causing all linking to fail. Check for
that and don't try to build avr bits in that case.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381423672,1381423672,aa169b80039728e35b0dec3be66a8483d48a3458
aa169b80039728e35b0dec3be66a8483d48a3458,aa169b80,altos: Fix stm-bringup demo build to use installed pdclib,"altos: Fix stm-bringup demo build to use installed pdclib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381417462,1381417462,d8d3835fedf9b7c4d203f321e72c2b086ebb3b97
d8d3835fedf9b7c4d203f321e72c2b086ebb3b97,d8d3835f,altos: Use installed pdclib,"altos: Use installed pdclib

Switch over to the installed pdclib everywhere

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381388405,1381388486,7f6cbfac7c1965add91ebfc28ca3eac4561b4fb6
7f6cbfac7c1965add91ebfc28ca3eac4561b4fb6,7f6cbfac,Bump version to 1.2.9.3,"Bump version to 1.2.9.3

Rocketober, 2013

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381345454,1381347486,e947bc5e1abcd054a584d69240f91123bad2178e
e947bc5e1abcd054a584d69240f91123bad2178e,e947bc5e,doc: Add easymini outline to distribution,"doc: Add easymini outline to distribution

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381345590,1381347486,18cb5f0b8f0917cbd4ff80f0920e8e5b35c822a1
18cb5f0b8f0917cbd4ff80f0920e8e5b35c822a1,18cb5f0b,doc: Add EasyMini outline drawing,"doc: Add EasyMini outline drawing

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381338856,1381347486,c584b5fc1128c7bfd7fb921ddc3a8ec498803b53
c584b5fc1128c7bfd7fb921ddc3a8ec498803b53,c584b5fc,altos: Messed up the ifeq syntax a bit so ARM bits weren't getting built,"altos: Messed up the ifeq syntax a bit so ARM bits weren't getting built

$(x) is not the same as ($x)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381347450,1381347486,74885d75621dad04984d8309c2618202f4d2b35e
74885d75621dad04984d8309c2618202f4d2b35e,74885d75,altosui: Binaries to package are only in per-product dirs now,"altosui: Binaries to package are only in per-product dirs now

Each cc1111 project used to stick the binary in src/, but I got rid of
that when we ended up with so much stuff in src that it was a mess.

Building the release now requires looking in the appropriate directory
for each binary to ship.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381251830,1381251830,0e5d1f3ce39495e3702ecd22cb45972e13a5c986
0e5d1f3ce39495e3702ecd22cb45972e13a5c986,0e5d1f3c,altos: avr-gcc appears to find the loader scripts without help now,"altos: avr-gcc appears to find the loader scripts without help now

At some point, avr-gcc lost its ability to find the loader scripts
necessary to link programs. That appears to be fixed now, at least on
my machine.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381251021,1381251021,f7cccbb7a624a2a47b21682f416a135a28319b41
f7cccbb7a624a2a47b21682f416a135a28319b41,f7cccbb7,altos: Broken test for M0 compiler in src/Makefile,"altos: Broken test for M0 compiler in src/Makefile

Was causing it to try to compiler M0 progs only when *no* compiler was found.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381250369,1381250369,488a527267decece48e6682e0e0c7fc29cbed329
488a527267decece48e6682e0e0c7fc29cbed329,488a5272,Merge remote-tracking branch 'origin/master',"Merge remote-tracking branch 'origin/master'

Signed-off-by: Keith Packard <keithp@keithp.com>

Conflicts:
	configure.ac
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381249601,1381249601,"6a1e398e590121458176758858bb4210f3eb5a55,f6661cc015e1a92450dc3eede97d66005f69cc72"
6a1e398e590121458176758858bb4210f3eb5a55,6a1e398e,Add --with parameters to configure for compiler selection,"Add --with parameters to configure for compiler selection

This allows the user to specify which compiler to use for each target
CPU. Also checks to make sure the arm compiler supports -m0 and -m3
cpu type flags. The build now actually uses the specified compilers too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381249323,1381249323,16965716c02eb79b449d9d3b264814d775660134
16965716c02eb79b449d9d3b264814d775660134,16965716,altos/stm: New GAS version requires flags in APSR assignment,"altos/stm: New GAS version requires flags in APSR assignment

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381249212,1381249212,258d225df1f4afe1cfdc9c43208bcd75d18cdf2d
258d225df1f4afe1cfdc9c43208bcd75d18cdf2d,258d225d,altos: Rename easymini-v0.1 to easymini-v1.0,"altos: Rename easymini-v0.1 to easymini-v1.0

The production boards are the same as the modified v0.1 boards

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381208415,1381208516,8f7edcee2db30652ce0b147f282de3396c3786ad
8f7edcee2db30652ce0b147f282de3396c3786ad,8f7edcee,"altos/lpc, altos/stm: ARM requires ISB after switching stack pointers","altos/lpc, altos/stm: ARM requires ISB after switching stack pointers

This sticks a barrier in the CPU to prevent using the wrong stack
register past the change.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381208033,1381208033,4254de22864de2ed7ae5928c6b8bfd9df1c8a3fb
4254de22864de2ed7ae5928c6b8bfd9df1c8a3fb,4254de22,altos: Don't require an LED for ao_flight,"altos: Don't require an LED for ao_flight

EasyMini has no LEDs. Deal with it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381207890,1381207890,71666409624bf544e8a55fa5ee91d2f8514a03ca
71666409624bf544e8a55fa5ee91d2f8514a03ca,71666409,Change differentiation filter constants and limits,"Change differentiation filter constants and limits

Larger limits avoids clipping legit data. Using the same filter time
for both ascent and descent makes the results look a bit cleaner.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1381207795,1381207795,8bd218854e968d2b9407489359be0c4a1aefd2c8
f6661cc015e1a92450dc3eede97d66005f69cc72,f6661cc0,"new toolchain for STM32L is in /usr/bin, not /opt/cortex/bin","new toolchain for STM32L is in /usr/bin, not /opt/cortex/bin
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1381204606,1381204606,4188153548fca104bb49cda2d502c708fe4b49d7
8bd218854e968d2b9407489359be0c4a1aefd2c8,8bd21885,altos: Set TeleMini v2.0 USB ID correctly,"altos: Set TeleMini v2.0 USB ID correctly

Uses 0x0027

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1379568565,1379568565,3bf7ed1761e08d0cb43b0ed330226ec38c844591
3bf7ed1761e08d0cb43b0ed330226ec38c844591,3bf7ed17,Add TeleMini v2.0 telemetry support,"Add TeleMini v2.0 telemetry support

Includes AltosLib and ao-telem

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1379568535,1379568535,be7f56b86478ef4a23a2af77338c580b9c9e5e3b
be7f56b86478ef4a23a2af77338c580b9c9e5e3b,be7f56b8,altoslib: Prefer averaged ground pres for ground alt computation,"altoslib: Prefer averaged ground pres for ground alt computation

If ground pressure is recorded (as from an eeprom file), then prefer
that value to the average of the pre-boost ground pressures when
computing the ground altitude.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1379568384,1379568384,56b577e55c264c8e3152bb2b2cca02fa8836ac1e
56b577e55c264c8e3152bb2b2cca02fa8836ac1e,56b577e5,altos/telemetrum-v2.0: Use red LED during boot time,"altos/telemetrum-v2.0: Use red LED during boot time

If the LED is stuck on, then the board has failed to initialize,
so use red instead of green as a warning indicator.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1379280586,1379280586,1fa3ff9ba6d04303b3de6952675532492c85182f
1fa3ff9ba6d04303b3de6952675532492c85182f,1fa3ff9b,altos/telemini-v2.0: Change initialization order,"altos/telemini-v2.0: Change initialization order

Make sure busses are running before devices are initialized

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1379280549,1379280549,0ff5f0fbc4900ad45bb7910ffc0c5a4e4cc4b857
0ff5f0fbc4900ad45bb7910ffc0c5a4e4cc4b857,0ff5f0fb,altos: Stop copying cc1111 binaries to the altos/src dir,"altos: Stop copying cc1111 binaries to the altos/src dir

Just clutters up that directory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1379280068,1379280415,b86c69d56261da54745076b1f5a9c8e8e44787c2
b86c69d56261da54745076b1f5a9c8e8e44787c2,b86c69d5,altos: Add nanopeak-v0.1,"altos: Add nanopeak-v0.1

The same as micropeak, just a few different pins

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1379279639,1379279706,690094e2d7d9cfe5eb4edb478fd79e5d133c6b4b
690094e2d7d9cfe5eb4edb478fd79e5d133c6b4b,690094e2,altos: Move micropeak sources around,"altos: Move micropeak sources around

This sticks the micropeak sources in appropriate directories, rather
than in the micropeak product directory so that they can be shared
with future micropeak-style products.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1379279510,1379279510,2449d123690746d0d0d5d66dfc4d3a05b9f5dc0c
2449d123690746d0d0d5d66dfc4d3a05b9f5dc0c,2449d123,altosui: Include device name in Table view,"altosui: Include device name in Table view

It's part of the telemetry, so we might as well display it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378517086,1378517086,ae675c66594d366774d8f7f9c78f1236d3810eed
ae675c66594d366774d8f7f9c78f1236d3810eed,ae675c66,"altoslib: TeleMetrum v2 telemetry includes computes Pa/°C, not raw values","altoslib: TeleMetrum v2 telemetry includes computes Pa/°C, not raw values

Telemetry sends converted pressure/temp values as it doesn't include the
MS5607 calibration data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378516986,1378516986,4e22b34bde421a9df090c9196fd4347468c8176a
4e22b34bde421a9df090c9196fd4347468c8176a,4e22b34b,altoslib: Add receiver serial to telem file names,"altoslib: Add receiver serial to telem file names

Makes it easy to record telemetry from multiple sites and compare them later.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378511647,1378511647,0ad95614685a73856bb26a94866909e5fc025434
0ad95614685a73856bb26a94866909e5fc025434,0ad95614,altosui: Set 'flight' value in AltosEepromMonitor window during download,"altosui: Set 'flight' value in AltosEepromMonitor window during download

This feature was lost in the AltosState updates

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378511571,1378511571,b66e0d4c107a0727279d03d1d0e1e40a9eaaa3bc
b66e0d4c107a0727279d03d1d0e1e40a9eaaa3bc,b66e0d4c,altosui: Load Telem files in AltosDataChooser too,"altosui: Load Telem files in AltosDataChooser too

Telem file loading was stubbed out from AltosState changes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378511526,1378511526,a1512255d20c8a395f30ed4914ddd3295842312b
a1512255d20c8a395f30ed4914ddd3295842312b,a1512255,altoslib: Add TeleMini eeprom file to Makefile.am,"altoslib: Add TeleMini eeprom file to Makefile.am

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378511504,1378511504,1e52d34137626ca756ea01f317ef7c359e464a5b
1e52d34137626ca756ea01f317ef7c359e464a5b,1e52d341,altoslib: Lock access to AltosLink config_data,"altoslib: Lock access to AltosLink config_data

Prevents multiple callers from trying to get config data at the same
time and messing up the serial line

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378511446,1378511446,29bb16397f14ed617ca3fbf48f2a7b726fd627d8
29bb16397f14ed617ca3fbf48f2a7b726fd627d8,29bb1639,altoslib: Set 'valid' for valid TeleMetrum eeprom download,"altoslib: Set 'valid' for valid TeleMetrum eeprom download

Had separate 'tick_valid' value, which wasn't useful as the supertype
didn't look there.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378511376,1378511376,a299a5a9a1b89c7ebc00ebd33a789793a6835181
a299a5a9a1b89c7ebc00ebd33a789793a6835181,a299a5a9,altoslib/altosui: Add TeleMini-v1.0 eeprom support,"altoslib/altosui: Add TeleMini-v1.0 eeprom support

Got lost in the AltosState transition

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378511332,1378511332,82b3e3e4889aa5d4d157df1ad82e28068fda9e2a
82b3e3e4889aa5d4d157df1ad82e28068fda9e2a,82b3e3e4,altosui: Remove debugging printf from InfoTable,"altosui: Remove debugging printf from InfoTable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378449082,1378449082,7f4650990e8a7cfcf8461e8928dfc426c9a563cc
7f4650990e8a7cfcf8461e8928dfc426c9a563cc,7f465099,altos: Set tick value in new TeleMetrum v2 sensor packets,"altos: Set tick value in new TeleMetrum v2 sensor packets

Was getting left with the old value, which wasn't very useful

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378447039,1378447039,7314bf807544eecf2fd970e93c752ff15688bb42
7314bf807544eecf2fd970e93c752ff15688bb42,7314bf80,ao-tools/ao-telem: Parse new TM v2 packets,"ao-tools/ao-telem: Parse new TM v2 packets

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378447017,1378447017,ffdf82445817d1c97699f7de82534420b87d0ea7
ffdf82445817d1c97699f7de82534420b87d0ea7,ffdf8244,altosui: Fix 'Graph Flight' button in landed dialog,"altosui: Fix 'Graph Flight' button in landed dialog

Telemetry file reading was broken (oops!)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378446971,1378446971,0e3edacceb169326b8f5727bb5737d8238e9e40b
0e3edacceb169326b8f5727bb5737d8238e9e40b,0e3edacc,altoslib: Remove debug printf from AltosTelemetryMetrumSensor,"altoslib: Remove debug printf from AltosTelemetryMetrumSensor

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378446943,1378446943,59f0deff6d7bae22fb1b9a0649f3481b3d287d8e
59f0deff6d7bae22fb1b9a0649f3481b3d287d8e,59f0deff,altoslib: Rewrite AltosTelemetryIterable,"altoslib: Rewrite AltosTelemetryIterable

Sort while reading instead of sorting separately.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378446909,1378446909,effc62354fc82bb937c6f445a147fc92153a0731
effc62354fc82bb937c6f445a147fc92153a0731,effc6235,altoslib: Record time_change in AltosState correctly,"altoslib: Record time_change in AltosState correctly

time_change is used to make real-time playback work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378446842,1378446842,b9ee58a7af839462680a0bdf1c1721017269986f
b9ee58a7af839462680a0bdf1c1721017269986f,b9ee58a7,altoslib: Update received time when replaying flights,"altoslib: Update received time when replaying flights

Received time is otherwise recorded as the time when the packets were
read from the file, which doesn't work in real-time playback

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378446794,1378446794,e17e3691d93636eebbd7381f2df1303dc46ea96c
e17e3691d93636eebbd7381f2df1303dc46ea96c,e17e3691,altoslib: Only open log file when both flight and serial are known,"altoslib: Only open log file when both flight and serial are known

Some telemetry formats include serial and flight in different packets,
so wait for both before creating the file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378446742,1378446742,a9c495c7ca1e08b7ac76b0dab8b3bd9bd3a7edfc
a9c495c7ca1e08b7ac76b0dab8b3bd9bd3a7edfc,a9c495c7,altoslib: Use AltosTelemetry.parse to pull telem lines apart,"altoslib: Use AltosTelemetry.parse to pull telem lines apart

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378418587,1378418587,9f017b4837b106e8c422955a95762f1bf3c78016
9f017b4837b106e8c422955a95762f1bf3c78016,9f017b48,altoslib: Remove more AltosRecord based files,"altoslib: Remove more AltosRecord based files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378418567,1378418567,984515452f9ab56dad112d725469acfa54e2233b
984515452f9ab56dad112d725469acfa54e2233b,98451545,altoslib: remove AltosRecord based eeprom code,"altoslib: remove AltosRecord based eeprom code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378407324,1378407324,3325df306933f080619f13ba1db45de484613d5a
3325df306933f080619f13ba1db45de484613d5a,3325df30,altoslib: Remove AltosRecord-based telemetry code,"altoslib: Remove AltosRecord-based telemetry code

All of this is now AltosState based

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378407041,1378407041,e9e9c6592c49109288a4e02e780b130fadb97db7
e9e9c6592c49109288a4e02e780b130fadb97db7,e9e9c659,altosdroid: convert rogue files to unix line endings,"altosdroid: convert rogue files to unix line endings

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Keith Packard,keithp@keithp.com,1378177893,1378406796,93e66b4911b7285f9095712ef746571153c3f088
93e66b4911b7285f9095712ef746571153c3f088,93e66b49,altosdroid: more updates for new AltosState,"altosdroid: more updates for new AltosState

Signed-off-by: Mike Beattie <mike@ethernal.org>

Conflicts:
	altosdroid/src/org/altusmetrum/AltosDroid/AltosVoice.java
",,,,Mike Beattie,mike@ethernal.org,Keith Packard,keithp@keithp.com,1378307502,1378406604,ee14ad16c242e8bd7a9d33ebf569211d1490b8e1
ee14ad16c242e8bd7a9d33ebf569211d1490b8e1,ee14ad16,altosdroid: update to support new state code,"altosdroid: update to support new state code

Signed-off-by: Mike Beattie <mike@ethernal.org>

Conflicts:
	altosdroid/src/org/altusmetrum/AltosDroid/TabAscent.java
	altosdroid/src/org/altusmetrum/AltosDroid/TabDescent.java
	altosdroid/src/org/altusmetrum/AltosDroid/TabPad.java
",,,,Mike Beattie,mike@ethernal.org,Keith Packard,keithp@keithp.com,1378177823,1378406542,5b976a6651f4eb05d30afc08b9e1f27c7e52ae00
5b976a6651f4eb05d30afc08b9e1f27c7e52ae00,5b976a66,altoslib: Finish AltosState changes. Update version number.,"altoslib: Finish AltosState changes. Update version number.

Removes all of the AltosRecord bits, changes the monitor idle bits to
have per-object state updaters.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378406028,1378406114,b984ff81d6b8979574e0248ffe8876634b8e1942
b984ff81d6b8979574e0248ffe8876634b8e1942,b984ff81,altoslib: Set measured acceleration for measured acceleration,"altoslib: Set measured acceleration for measured acceleration

Was setting computed acceleration even for measured data

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378251762,1378251762,96a651cc1b81b30f4cbde454e34cf80ed8825945
96a651cc1b81b30f4cbde454e34cf80ed8825945,96a651cc,altoslib: Clear sat data when tick changes,"altoslib: Clear sat data when tick changes

Sat data comes in multiple records, but the tick is always the same,
so use that to tell when the set of sats is new

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378251720,1378251720,4de934c283a839fcbb246b36aa15362f3cf8629c
4de934c283a839fcbb246b36aa15362f3cf8629c,4de934c2,altoslib: Start integrated value at 0 by default,"altoslib: Start integrated value at 0 by default

Check for MISSING and start at zero in that case

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378251672,1378251672,cfd8e4ebb3cb63937a71537095adb911d6211817
cfd8e4ebb3cb63937a71537095adb911d6211817,cfd8e4eb,altoslib: Use first few baro samples for ground pressure on TM,"altoslib: Use first few baro samples for ground pressure on TM

TM didn't record the ground baro reading in the log file, so pull out
the first few measured baro samples and use those instead.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378251604,1378251604,6ee99c1861ef1898a77aead41d80383e697bd248
6ee99c1861ef1898a77aead41d80383e697bd248,6ee99c18,altoslib: Make Ascent/descent use different filter values. Always filter.,"altoslib: Make Ascent/descent use different filter values. Always filter.

In derivative code, use a shorter filter during ascent as the baro
sensor is cleaner then. Then, make sure to always filter the values as
the very first few baro samples can be noisy, which generates a bad
starting speed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378251500,1378251500,70e67925cff98984d49fbc3f60e880c91e6d5079
70e67925cff98984d49fbc3f60e880c91e6d5079,70e67925,altoslib: Remove duplicate cmd/tick from TM eeprom file code,"altoslib: Remove duplicate cmd/tick from TM eeprom file code

Also replace tick setting with super call (which does that)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378251376,1378251376,bc54014cfd4dbca67fa9db66e906ab8212a2eaa2
bc54014cfd4dbca67fa9db66e906ab8212a2eaa2,bc54014c,altoslib: Clean up metrum eeprom file reading,"altoslib: Clean up metrum eeprom file reading

Spurious tick setting, fix some local variable names

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378251323,1378251323,d203a2da2641bec21a4257c8a7b03d9a1eba53a5
d203a2da2641bec21a4257c8a7b03d9a1eba53a5,d203a2da,altoslib: Correct mega/metrum eeprom years by adding 2000,"altoslib: Correct mega/metrum eeprom years by adding 2000

The files contain a single byte for year, which is always years since 2000.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378251281,1378251281,999c3c7866613e658a6c26374499bc516bbc944d
999c3c7866613e658a6c26374499bc516bbc944d,999c3c78,altoslib: Correct tick wrapping in eeprom file reading,"altoslib: Correct tick wrapping in eeprom file reading

Just need to signal that at least one record has been read to know
when to start checking for wrap

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378251157,1378251157,7d3af3d74f70a0933829be91ad3e3be04b1f1023
7d3af3d74f70a0933829be91ad3e3be04b1f1023,7d3af3d7,altoslib: Ensure eeprom file body always exists,"altoslib: Ensure eeprom file body always exists

Create an empty list of body elements if none were read from the file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378251118,1378251118,528e2e41112cad8a81bccbb89c3bd202b818a506
528e2e41112cad8a81bccbb89c3bd202b818a506,528e2e41,altoslib: More AltosState hacking,"altoslib: More AltosState hacking

EasyMini graphs are looking good now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378185023,1378185112,224a1e01bacb7db0076129906ed58e1c785e1b14
224a1e01bacb7db0076129906ed58e1c785e1b14,224a1e01,altos: Not all products have pins to control flash loader,"altos: Not all products have pins to control flash loader

TeleGPS has no exposed pins for this function

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378184914,1378184914,77dc89ed5b7bf8f5b3fa3b6131660f1a98f583ea
77dc89ed5b7bf8f5b3fa3b6131660f1a98f583ea,77dc89ed,altoslib/altosui: Further AltosState transition work,"altoslib/altosui: Further AltosState transition work

Parses most eeprom and telem records now; altosui updated to show from
AltosState info.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378008699,1378008699,c781469ff907a32bd43a5d781391b6859b14cd32
c781469ff907a32bd43a5d781391b6859b14cd32,c781469f,altos/telegps: Initialize logging system,"altos/telegps: Initialize logging system

Otherwise, very little logging works

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1378008656,1378008656,7ec1b97d278c7aec3199fb7270f0dcf9484c879f
7ec1b97d278c7aec3199fb7270f0dcf9484c879f,7ec1b97d,Merge branch 'master' into new-state,"Merge branch 'master' into new-state
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377955329,1377955329,"017ed54ff69ef2f7740ea2578e22bf72e88deafb,4188153548fca104bb49cda2d502c708fe4b49d7"
4188153548fca104bb49cda2d502c708fe4b49d7,41881535,altos/lpc: Add bits for building flash loaders,"altos/lpc: Add bits for building flash loaders

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377955248,1377955248,dcc51bb18985c24fa35bce0dd42ea3d847b960bf
017ed54ff69ef2f7740ea2578e22bf72e88deafb,017ed54f,altoslib/altosui: Fixes for state changes,"altoslib/altosui: Fixes for state changes

Format for gps alt (now double).
Use new code for csv file loading.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377955168,1377955168,f07f6d55edf5b97020680b3ce1d9e00bb3df64a6
f07f6d55edf5b97020680b3ce1d9e00bb3df64a6,f07f6d55,altoslib/altosui: Get legacy telem working with new AltosState structure,"altoslib/altosui: Get legacy telem working with new AltosState structure

Make AltosTelemetry work without AltosRecord

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377931682,1377931738,de8d9c5630ae46378c50faf97f7d2e97fe139e30
de8d9c5630ae46378c50faf97f7d2e97fe139e30,de8d9c56,"altoslib, altosui: Restructured state management now does TM eeprom files","altoslib, altosui: Restructured state management now does TM eeprom files

Removed uses of AltosRecord from AltosState, now just need to rewrite
the other AltosState changing code to match

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377822291,1377822291,ce1378385ef273010498e81c205f42d8e32c7dc1
ce1378385ef273010498e81c205f42d8e32c7dc1,ce137838,altos: Split EasyMini and TeleMini log formats,"altos: Split EasyMini and TeleMini log formats

Same data, but EasyMini uses a 3.0V supply while TeleMini uses 3.3V,
which changes the intepretation of all of the ADC values

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377822138,1377822138,04d7d0f829ba953ffeca8ad9887a4b6b2b5d5087
04d7d0f829ba953ffeca8ad9887a4b6b2b5d5087,04d7d0f8,altoslib: Start restructuring AltosState harder,"altoslib: Start restructuring AltosState harder

Make per-packet code update state itself rather than having all state
updates done centrally. Will make adding new packet types easier.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377660487,1377780457,dcc51bb18985c24fa35bce0dd42ea3d847b960bf
dcc51bb18985c24fa35bce0dd42ea3d847b960bf,dcc51bb1,Merge remote-tracking branch 'origin/telemini',"Merge remote-tracking branch 'origin/telemini'

Signed-off-by: Keith Packard <keithp@keithp.com>

Conflicts:
	src/core/ao_telemetry.c
	src/core/ao_telemetry.h

Added both Mini and Metrum telemetry defines
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377751978,1377751978,"7c82acc1c1c5b7b4da7c7ecb3b2fd90140e4c703,a73b02518fcbc9fc0807ed8e141d3a06e8ad8214"
7c82acc1c1c5b7b4da7c7ecb3b2fd90140e4c703,7c82acc1,altos/stm: Make sure we switch to MSI during timer init,"altos/stm: Make sure we switch to MSI during timer init

Need to ensure that the CPU is actually using the MSI during timer
init or all of the other clock changes won't work

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377749545,1377749545,6802b6a65b1fec06c2c873282be792c40b3c8f5e
6802b6a65b1fec06c2c873282be792c40b3c8f5e,6802b6a6,altos/stm: Remove stale timer defines,"altos/stm: Remove stale timer defines

Stuff from when we weren't using systick

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377749458,1377749458,8e9ed70f50e3f535c2580820771bb1bc3cd055fe
8e9ed70f50e3f535c2580820771bb1bc3cd055fe,8e9ed70f,altos/stm: Make sampling profiler work again,"altos/stm: Make sampling profiler work again

Disable the separate stack as that means we can't figure out the PC
from the timer interrupt. Move ao_idle_loc after the interrupt release
so that we see idle tasks correctly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377749331,1377749331,2fa87754c5c11bb86e9b1878580c3d4f4b2463f5
2fa87754c5c11bb86e9b1878580c3d4f4b2463f5,2fa87754,altos/stm: New compiler doesn't correctly build flash bits yet,"altos/stm: New compiler doesn't correctly build flash bits yet

Use /opt/cortex until we make the packaged one work

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377749284,1377749284,4887af0bf90661a3fdca76f1797a704888edab06
4887af0bf90661a3fdca76f1797a704888edab06,4887af0b,altos: Force u-blox to 9600 baud for now,"altos: Force u-blox to 9600 baud for now

The Max-7 parts just aren't happy switching baud rates, managing only
about half the time. Someday I'll figure out why, but until then, make
things work by just leaving the chips at 9600 baud

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377749058,1377749058,61163980f096d555a843e25cd9fe1aec93bbbbba
61163980f096d555a843e25cd9fe1aec93bbbbba,61163980,altos: Add debugging to ublox GPS driver,"altos: Add debugging to ublox GPS driver

The new max 7 parts seem to be unhappy about switching baud rates, so
I've added a pile of debugging to help out. Some day, I'll figure out
how to make them work, this code is being left in place to help with that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377748968,1377748968,44d4c66b21d6b5a0c656fdff6d01ef1d125c1101
44d4c66b21d6b5a0c656fdff6d01ef1d125c1101,44d4c66b,altos: Update time for next alarm each time a task is added,"altos: Update time for next alarm each time a task is added

Adding a task with a sooner timeout than existing alarm tasks was not
correctly updating the time to fire the next alarm, causing tasks to
be delayed by the wrong amount.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377748471,1377748471,39475c7b8da4f29936f73ffa2bff112f50ee9328
39475c7b8da4f29936f73ffa2bff112f50ee9328,39475c7b,altos: TM v2 places the MMA6555 upside down compared to Tmega,"altos: TM v2 places the MMA6555 upside down compared to Tmega

Means we need to invert the data coming out to make it work

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377748349,1377748349,f222e8504bfd01027e3c380c239a2cde2c367d74
f222e8504bfd01027e3c380c239a2cde2c367d74,f222e850,altos/telemetrum-v2.0: Use 9600 baud for ublox,"altos/telemetrum-v2.0: Use 9600 baud for ublox

Something is up with the Max 7

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377662429,1377662429,abde595116f6e8b60ec9ce81554c05de11fd456e
abde595116f6e8b60ec9ce81554c05de11fd456e,abde5951,altos/telemetrum-v2.0: Fix MMA6555 SPI pin assignment,"altos/telemetrum-v2.0: Fix MMA6555 SPI pin assignment

For TM v2.0, it's on PB 3-5, not PE13-15

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377660962,1377662202,454a41359b94e9bcf8582420abc359bbab9d8176
454a41359b94e9bcf8582420abc359bbab9d8176,454a4135,altos: Rename TeleMetrum v2.0 ADC sense members,"altos: Rename TeleMetrum v2.0 ADC sense members

Use sense_a and sense_m instead of sense[2]

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377282356,1377662202,6aade70be0a7669d65a8606753d21e4eef5592cd
6aade70be0a7669d65a8606753d21e4eef5592cd,6aade70b,altos: Add TeleMetrum v2.0 boot loader,"altos: Add TeleMetrum v2.0 boot loader

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377033656,1377662202,7b0f9b25a56fa8b4aa1c2e9d79c43e6a97cab0c0
7b0f9b25a56fa8b4aa1c2e9d79c43e6a97cab0c0,7b0f9b25,altos: Initial TeleMetrum v2.0 bits,"altos: Initial TeleMetrum v2.0 bits

Adds new telemetry and logging formats along with code for TeleMetrum
v2.0 design.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377024017,1377662202,3ded57394f6dfd7beb9526c031a5c6c6c9926917
a73b02518fcbc9fc0807ed8e141d3a06e8ad8214,a73b0251,altos: Don't use ao_data on cc1111 projects,"altos: Don't use ao_data on cc1111 projects

cc1111 ao_adc.c supplies the needed globals at this point, and linking
both into the program leads to two different versions of each at
different addresses (yay SDCC linker!)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377567962,1377568047,d54156caf856ab5570f050692b333a2c5d991265
d54156caf856ab5570f050692b333a2c5d991265,d54156ca,altos: Make ao_wakeup reentrant,"altos: Make ao_wakeup reentrant

In case we end up invoking it from two places at once.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377567863,1377568047,7e941695aa27e5eaf453ca1128b8d835472410a4
7e941695aa27e5eaf453ca1128b8d835472410a4,7e941695,altos: Check for MS5607 MISO low before sleeping,"altos: Check for MS5607 MISO low before sleeping

If the MISO line goes low before we manage to configure the
interrupts, we'll miss it entirely unless we check the pin explicitly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377567800,1377568047,9b9acb88aa97e8565cdf9342fc59a5aee08e3d34
9b9acb88aa97e8565cdf9342fc59a5aee08e3d34,9b9acb88,altos/telemini-v2.0: Add ao_exti.h depend. Init beeper and usb.,"altos/telemini-v2.0: Add ao_exti.h depend. Init beeper and usb.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377562737,1377562737,7274b77666df9d2cab2854ec1a403d80e5fce73b
7274b77666df9d2cab2854ec1a403d80e5fce73b,7274b776,altos: Use %ld and %lu for MS5607 debug output,"altos: Use %ld and %lu for MS5607 debug output

The value are 'long', so use the right printf format.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377562697,1377562697,4e3955a5b0ac125bd807920c467f959618449fbc
4e3955a5b0ac125bd807920c467f959618449fbc,4e3955a5,altos/cc1111: Wake up non-ADC sensor code each timer tick,"altos/cc1111: Wake up non-ADC sensor code each timer tick

Make sure the MS5607 code gets told to sample every tick

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377562667,1377562667,3b2f83a7d686b5fbc0aaa56d48cb734f353631c8
3b2f83a7d686b5fbc0aaa56d48cb734f353631c8,3b2f83a7,altos/cc1111: Leave pin interrupts completely disabled at init time,"altos/cc1111: Leave pin interrupts completely disabled at init time

Don't even turn in the PICTL bits as that seems to cause the chip to
be unhappy.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377562614,1377562614,8ca98dc8c868c47c372d6b666c36e691fa402824
8ca98dc8c868c47c372d6b666c36e691fa402824,8ca98dc8,altos: Get telemini to copy current MS5607 state to ring.,"altos: Get telemini to copy current MS5607 state to ring.

The ADC code is responsible for actually inserting the non-ADC data
into the ring, so do the copy there.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377562555,1377562555,af9f9cf0c21630562c74fae41773319229bf44d3
af9f9cf0c21630562c74fae41773319229bf44d3,af9f9cf0,cc1111: Hacky pin interrupt support. Only useful for TeleMini v2,"cc1111: Hacky pin interrupt support. Only useful for TeleMini v2

This code is designed to support the MS5607 MISO interrupt bits.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377560565,1377560565,2380a4b9bd69629c78eec0a87ff8681a0524d8d2
2380a4b9bd69629c78eec0a87ff8681a0524d8d2,2380a4b9,"cc1111: Rework ADC configuration a bit, fix Tm V2 ADC usage","cc1111: Rework ADC configuration a bit, fix Tm V2 ADC usage

The Tm v2 ADC code was not actually fetching and storing the ADC
conversion values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377560493,1377560493,aeb1c8a2aa533cb2805f0dbe848e098c8cae2b39
aeb1c8a2aa533cb2805f0dbe848e098c8cae2b39,aeb1c8a2,ao-tools: Use TeleDongle for default ao-dbg target,"ao-tools: Use TeleDongle for default ao-dbg target

Makes more sense than assuming we're still using the old TI developer board.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377560387,1377560387,377a44cbfd5c8a659d2fecabb154726717a41900
377a44cbfd5c8a659d2fecabb154726717a41900,377a44cb,altos: Build more products by default,"altos: Build more products by default

We keep creating more hardware...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377495249,1377495249,e72147e215a982ce701099626424b9a856ac9d09
e72147e215a982ce701099626424b9a856ac9d09,e72147e2,altos: Changes required by cc1111 multi-spi support,"altos: Changes required by cc1111 multi-spi support

These drivers got missed

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377495210,1377495210,af6f4205b00669af40acffc528cc8093b0236cf6
af6f4205b00669af40acffc528cc8093b0236cf6,af6f4205,Bump version to 1.2.9.2,"Bump version to 1.2.9.2

Set version for Airfest testing

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377494986,1377494986,312f6194a4bc75473cb0d61a6d58b66fb1f7c068
312f6194a4bc75473cb0d61a6d58b66fb1f7c068,312f6194,altos/teletiny-v2.0: Support multiple SPI busses on CC1111,"altos/teletiny-v2.0: Support multiple SPI busses on CC1111

Needed for TeleMini v2.0

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371023011,1377494641,2c2bbfd9a1a4b9de42cf566f21f179ff5ede0419
2c2bbfd9a1a4b9de42cf566f21f179ff5ede0419,2c2bbfd9,altos: Add exti and spi to telemini-v2.0,"altos: Add exti and spi to telemini-v2.0

No longer builds like this

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369349579,1377494641,56911f27376b0fe91a464e369bb8aa1531b3c7dc
56911f27376b0fe91a464e369bb8aa1531b3c7dc,56911f27,altos: Make TeleMini v2.0 fit,"altos: Make TeleMini v2.0 fit

Mash lots of storage locations and code around to shrink stuff down to size

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369297071,1377494641,cb844328322fd7d9f4dafb58b322257a70b347e6
cb844328322fd7d9f4dafb58b322257a70b347e6,cb844328,altos: Add 64-bit subtraction,"altos: Add 64-bit subtraction

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369272054,1377494641,5ccd902d0fd2adc40c72982babb60fac4da6a087
5ccd902d0fd2adc40c72982babb60fac4da6a087,5ccd902d,altos: Add 64x64 multiply. Test 64 ops for dest same as either source,"altos: Add 64x64 multiply. Test 64 ops for dest same as either source

The test change is to ensure that the destination may be one of the 64
bit sources.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369267735,1377494641,f7602ae566a5cbf2d2cbb1d68bad7e2d1177a33a
f7602ae566a5cbf2d2cbb1d68bad7e2d1177a33a,f7602ae5,altos: Make 64x16 mul a bit faster,"altos: Make 64x16 mul a bit faster

the unsigned 32x32 multiply really does work, just use it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369258699,1377494641,3114baef45803250a2e5cdd2ee4a9171f2045b0c
3114baef45803250a2e5cdd2ee4a9171f2045b0c,3114baef,altos: Add 64-bit add/mul/shift for SDCC,"altos: Add 64-bit add/mul/shift for SDCC

SDCC doeesn't provide a native 64-bit type (sigh), so
implement the minimal operations necessary for the MS5607 conversion
routine.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369258370,1377494641,d0b4e926ecececa7499a301b6135189be119512e
d0b4e926ecececa7499a301b6135189be119512e,d0b4e926,Initial TeleMini bits,"Initial TeleMini bits

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369252986,1377494640,3ded57394f6dfd7beb9526c031a5c6c6c9926917
3ded57394f6dfd7beb9526c031a5c6c6c9926917,3ded5739,altos: Explicitly list the linker script needed for AVR targets.,"altos: Explicitly list the linker script needed for AVR targets.

Something changed in the binutils-avr package which makes the linker
fail to find the script in the default location.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377494575,1377494575,203951f6e049ec7e95489849a2bfaa01aa19c0c9
203951f6e049ec7e95489849a2bfaa01aa19c0c9,203951f6,Merge branch 'master' into telegps-v0.3,"Merge branch 'master' into telegps-v0.3
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377493227,1377493227,"4babe7310f78338ca36ab9d31ac833eada27485f,b363a628fc6137c3395a48ef13de7a799ec3e2c3"
b363a628fc6137c3395a48ef13de7a799ec3e2c3,b363a628,altos: MS5607 pressure computation for low temperatures was wrong,"altos: MS5607 pressure computation for low temperatures was wrong

Second correction only applies to temps < -15°C, not 15°C.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369272675,1377493187,aa2948803d33dbee6f1eab30370178252df2b56d
aa2948803d33dbee6f1eab30370178252df2b56d,aa294880,altos: Wake up on LPC usart ISR only once,"altos: Wake up on LPC usart ISR only once

Instead of waking up after every character, wait until the FIFO is
empty to reduce overhead

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376754306,1377472968,10f88c46df9a266f62452dc25275c79a3bb0653d
10f88c46df9a266f62452dc25275c79a3bb0653d,10f88c46,"altos: Set default LPC stack to 512 bytes, Em to 384 bytes","altos: Set default LPC stack to 512 bytes, Em to 384 bytes

The default for lpc has been raised to 512 bytes, but Em doesn't have
enough RAM for that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376754198,1377472968,41428d1e1e44a17eea5fda2b34cabafbdebf1464
41428d1e1e44a17eea5fda2b34cabafbdebf1464,41428d1e,altosdroid: Add note to report TeleBT battery level,"altosdroid: Add note to report TeleBT battery level

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376753708,1377472968,e908eb090fc2aaa03b35dc37c3e008b05ad44d80
e908eb090fc2aaa03b35dc37c3e008b05ad44d80,e908eb09,altos: Use installed arm compiler for LPC,"altos: Use installed arm compiler for LPC

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377282258,1377472829,1aed2eb5c7d477a2f3d4fada22980041aba97cb8
1aed2eb5c7d477a2f3d4fada22980041aba97cb8,1aed2eb5,altos/lpc: Stop using burst mode for LPC ADC,"altos/lpc: Stop using burst mode for LPC ADC

Burst mode doesn't stop after one round of conversions, so we end up
getting incorrect values in whatever the last conversion register is.

Just use single conversions and take an interrupt per channel.

Also, slow down the ADC so that our values are more stable -- just
need to make sure we get the whole conversion sequence done 100 times
a second.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377282130,1377472806,4fe47adc7aca54951a50b1c1ae95cb02e46f8d3d
4babe7310f78338ca36ab9d31ac833eada27485f,4babe731,altos: Allow products to disable RDF entirely,"altos: Allow products to disable RDF entirely

TeleGPS doesn't ever want RDF

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377411738,1377411738,a1ec15f4585e23eb67affbe7d9d97261576b198d
a1ec15f4585e23eb67affbe7d9d97261576b198d,a1ec15f4,altos: Add telegps v0.3 product,"altos: Add telegps v0.3 product

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377411713,1377411713,e2f385946132690ca6dc141d7c7830ae0cfe3458
e2f385946132690ca6dc141d7c7830ae0cfe3458,e2f38594,altos: various cc115l driver hacks,"altos: various cc115l driver hacks

Try to recover from TX_FIFO_UNDERFLOW by resetting the chip at idle
time.

Do a calibration phase during setup.

Program power to ramp up to limit key down noise.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1377014084,1377014084,0dd55f66d79f54b450fd8122aecd84d68b810bf4
0dd55f66d79f54b450fd8122aecd84d68b810bf4,0dd55f66,altos: Wake up on LPC usart ISR only once,"altos: Wake up on LPC usart ISR only once

Instead of waking up after every character, wait until the FIFO is
empty to reduce overhead

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376754306,1376754306,a0dd93ccf0920260b41c4003955617fd0cd1c8b4
a0dd93ccf0920260b41c4003955617fd0cd1c8b4,a0dd93cc,"altos: Set default LPC stack to 512 bytes, Em to 384 bytes","altos: Set default LPC stack to 512 bytes, Em to 384 bytes

The default for lpc has been raised to 512 bytes, but Em doesn't have
enough RAM for that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376754198,1376754241,9a22a300009679a14d66214a5d61e9e6a177279f
9a22a300009679a14d66214a5d61e9e6a177279f,9a22a300,altos: Allow ublox to run at other baud rates,"altos: Allow ublox to run at other baud rates

Provides a configuration option to set the ublox serial baud rate to
something other than 57600 baud

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376754033,1376754033,e0a0a747624c2df66ca4a73b5a0de014ea204dca
e0a0a747624c2df66ca4a73b5a0de014ea204dca,e0a0a747,altos: allow projects to override default config values,"altos: allow projects to override default config values

Override default radio power and APRS interval

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376753795,1376753795,bed68ef5a6999b2e23853958502a689a7dbc15b3
bed68ef5a6999b2e23853958502a689a7dbc15b3,bed68ef5,altosdroid: Add note to report TeleBT battery level,"altosdroid: Add note to report TeleBT battery level

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376753708,1376753708,f0e126251360f050b7121f167771c057bda8747e
f0e126251360f050b7121f167771c057bda8747e,f0e12625,Merge branch 'master' into telegps-v0.3,"Merge branch 'master' into telegps-v0.3
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376753611,1376753611,"d95a2c5d1ddce913dcb1d1ab5dc59f6a588ab599,4fe47adc7aca54951a50b1c1ae95cb02e46f8d3d"
4fe47adc7aca54951a50b1c1ae95cb02e46f8d3d,4fe47adc,altosui: AltosDbm class was missing somehow,"altosui: AltosDbm class was missing somehow

This doesn't appear to have been added?

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376753452,1376753452,4ff54bb96f6c00c0c2c7dd32f81403bac331621a
4ff54bb96f6c00c0c2c7dd32f81403bac331621a,4ff54bb9,Merge remote-tracking branch 'origin/master',"Merge remote-tracking branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376748206,1376748206,"fa0859a51576efe231effcb5995f325f9e7e0fcb,01f8df088759ee7e6bc3900a013e0ea4fafaf984"
fa0859a51576efe231effcb5995f325f9e7e0fcb,fa0859a5,altos: Make FAT test program link explicitly against libcrypto,"altos: Make FAT test program link explicitly against libcrypto

For some reason, the MD5_Final symbol isn't resolved when linking only
against libssl.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1376748104,1376748104,324ceea43c115f4bed3a5276e57559c6c76b07c1
01f8df088759ee7e6bc3900a013e0ea4fafaf984,01f8df08,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1375164906,1375164906,"e2ebe60adf061479a1259a5c68b9cd5f5bacf644,15063cbb8f76bffea71575d295ca87b7ceca36d8"
e2ebe60adf061479a1259a5c68b9cd5f5bacf644,e2ebe60a,add a note about callsign matching and case sensitivity to the manual,"add a note about callsign matching and case sensitivity to the manual
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1375164881,1375164881,4bc1f3390b9ebbe07af4bc0f0a1c0915193ddf42
d95a2c5d1ddce913dcb1d1ab5dc59f6a588ab599,d95a2c5d,altos: Remove ao_radio_gpio_bits from normal build,"altos: Remove ao_radio_gpio_bits from normal build

Only needed for the CC115L_TRACE code, and it only builds on STM

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1372109383,1372812924,c542a2ed0f222bd0ec84e4a9651585d441dd7ccf
c542a2ed0f222bd0ec84e4a9651585d441dd7ccf,c542a2ed,altos/lpc: Rename serial port to 'serial0',"altos/lpc: Rename serial port to 'serial0'

This lets existing serial port users find the right function.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1372109341,1372812924,324ceea43c115f4bed3a5276e57559c6c76b07c1
324ceea43c115f4bed3a5276e57559c6c76b07c1,324ceea4,micropeak: Add Download button to menu bar,"micropeak: Add Download button to menu bar

It's the most common activity, after all

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1372812878,1372812878,156e60954fae15bc090984f79cd5594f910ca913
156e60954fae15bc090984f79cd5594f910ca913,156e6095,altosdroid: Just use GPS location provider to build on 4.2,"altosdroid: Just use GPS location provider to build on 4.2

Attempts to use the network provider cause the app to crash

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1372812831,1372812831,e148582217d6e02ac90a68e2bb2532947378d36f
e148582217d6e02ac90a68e2bb2532947378d36f,e1485822,altos: Support mega-style logging without ADC,"altos: Support mega-style logging without ADC

Used for TeleGPS, just exposes the necessary log writing function
without also including the ADC writing code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1372109286,1372109423,261ec8fc7043e9314469e919aa96acc461f7e5f2
261ec8fc7043e9314469e919aa96acc461f7e5f2,261ec8fc,altosui: Add EasyMini USB ids,"altosui: Add EasyMini USB ids

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1372109183,1372109423,0dd148e388944d8d265da51d62806c4a00b2c13d
0dd148e388944d8d265da51d62806c4a00b2c13d,0dd148e3,altos/lpc: Add boot loader,"altos/lpc: Add boot loader

Support the USB boot loader, add USB pull-up support.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1372109033,1372109422,2568b36ae9d38ae1607ec08b84b06e0fe84bd3ba
2568b36ae9d38ae1607ec08b84b06e0fe84bd3ba,2568b36a,altos/telefire-v0.1: Use same LED selection as the v0.2 setup,"altos/telefire-v0.1: Use same LED selection as the v0.2 setup

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371887618,1371887618,58eda6f873f5d6e8e219f769bdf67ce4dbc96fd7
58eda6f873f5d6e8e219f769bdf67ce4dbc96fd7,58eda6f8,altos/lpc: Don't disable all interrupts when disabling one interrupt,"altos/lpc: Don't disable all interrupts when disabling one interrupt

The nvic iser and icer registers read value indicates all enabled
interrupts, icer writes disable the set interrupts. Re-writing icer
with the current value ends up disabling all interrupts, not exactly
what we wanted.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371868859,1371887399,9081d881bc48bf7fdce617d300ac02c1a5962239
9081d881bc48bf7fdce617d300ac02c1a5962239,9081d881,altos/lpc: Remove ao_usb_task structure,"altos/lpc: Remove ao_usb_task structure

It's not used

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371868803,1371887399,23f11b188fc6aacd29e7f01a7d8a40853b7655df
23f11b188fc6aacd29e7f01a7d8a40853b7655df,23f11b18,altos/lpc: Enable brown-out-detector,"altos/lpc: Enable brown-out-detector

Make sure the processor does something sensible when the power disappears.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371868767,1371887399,e9e713bc8ab2080d5c1c38570b112f13c886bd11
e9e713bc8ab2080d5c1c38570b112f13c886bd11,e9e713bc,"altos/telefire: Radio status (no data, weak data, good data) on LEDs","altos/telefire: Radio status (no data, weak data, good data) on LEDs

Instead of blinking RX/TX, report the radio status on the telefire
nodes, just like telelco does. This makes the LEDs on telefire
*exactly the same* as the LEDs on telelco, which seems like a good idea.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371707154,1371707154,d90c2fa650de4cdb008d5e2559463c08da8db934
d90c2fa650de4cdb008d5e2559463c08da8db934,d90c2fa6,altos: PCA9922 LED driver needs Enable driven low to latch values,"altos: PCA9922 LED driver needs Enable driven low to latch values

Driving Enable high means anything going past on the clock and data
pair is reflected on the LEDs, which isn't terribly useful

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371707056,1371707056,572faa19b9a496866e3b589d5eb9f37a680206ab
572faa19b9a496866e3b589d5eb9f37a680206ab,572faa19,altos/cc1111: Fetch RSSI for TeleFire from correct byte,"altos/cc1111: Fetch RSSI for TeleFire from correct byte

Reading the status byte doesn't provide very useful RSSI info

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371706978,1371706978,025beb0fea011d0e3dab59b5d16e7ffae97c613c
025beb0fea011d0e3dab59b5d16e7ffae97c613c,025beb0f,altos/lpc: Get rid of ADC filter,"altos/lpc: Get rid of ADC filter

Now that the source of the Vcc noise has been identified, remove the
unnecessary ADC filtering.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371505952,1371505952,10f3d0084ff1c0b3dbf28c5d44727b514caeee20
10f3d0084ff1c0b3dbf28c5d44727b514caeee20,10f3d008,altosui: Add raw pressure to the AltosUI graph,"altosui: Add raw pressure to the AltosUI graph

A nice addition, and useful when diagnosing baro sensor issues

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371502843,1371502843,298e54856b5f8809b43f24407caa4a6be60822f3
298e54856b5f8809b43f24407caa4a6be60822f3,298e5485,altos/lpc: Get the IRC turned off after boot time,"altos/lpc: Get the IRC turned off after boot time

This involved carefully moving the USB away from the IRC before
turning it off.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371502811,1371502811,b3ad488477def157e277e239e81f164b49725925
b3ad488477def157e277e239e81f164b49725925,b3ad4884,altos: Disable USB on all flight computers when in flight mode,"altos: Disable USB on all flight computers when in flight mode

There was a check to only disable USB on boards with radios, but for
EasyMini, we want to disable USB too for flight mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371502721,1371502721,2e2f3f2556e714833d8b7d0f65877b07b3dc2cb5
2e2f3f2556e714833d8b7d0f65877b07b3dc2cb5,2e2f3f25,altos: Declare m25 write-in-progress as 'ao_port_t',"altos: Declare m25 write-in-progress as 'ao_port_t'

This lets us use port bits greater than 7 for M25 chip selects

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371447136,1371447136,dcf769198863c1b0f1b05f41d0c052a3dbfef247
dcf769198863c1b0f1b05f41d0c052a3dbfef247,dcf76919,altos/lpc: Remove spurious semicolon,"altos/lpc: Remove spurious semicolon

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371447118,1371447118,d040adeef9df4cda31dce603db81dc7ce19ec0d1
d040adeef9df4cda31dce603db81dc7ce19ec0d1,d040adee,"altos/lpc: Don't disable all of the clocks just yet, USB doesn't work","altos/lpc: Don't disable all of the clocks just yet, USB doesn't work

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371447091,1371447091,1676c7dbc3dcce2962be9ef9a58d37c7b48e3c0f
1676c7dbc3dcce2962be9ef9a58d37c7b48e3c0f,1676c7db,"altos/lpc: Turn off more clocks, disable USART for easymini","altos/lpc: Turn off more clocks, disable USART for easymini

Try to reduce noise on the power supply.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371420474,1371420474,be9ee9ed2d041c4ab4e77ee2010fe3c7a1ca6597
be9ee9ed2d041c4ab4e77ee2010fe3c7a1ca6597,be9ee9ed,altos/lpc: Filter ADC inputs,"altos/lpc: Filter ADC inputs

They're amazingly noisy on EasyMini, so just filter them as the only
thing we use them for is battery and pyro numbers.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371284449,1371284505,7361371190bf3805b6d0414e61f697aca7c7cff1
7361371190bf3805b6d0414e61f697aca7c7cff1,73613711,altos/lpc: Make ADC inputs work,"altos/lpc: Make ADC inputs work

They're still very unstable (bouncing around a lot), but at least they
seem to report useful stuff now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1371209891,1371284499,6827d0a7c59d606ea05387465f1ad4d914babd49
6827d0a7c59d606ea05387465f1ad4d914babd49,6827d0a7,altosui: Use preferred units for main deployment height configuration,"altosui: Use preferred units for main deployment height configuration

Show and accept values in the preferred units; create a separate list
of preferred values for each set of units

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1370993480,1370993964,15063cbb8f76bffea71575d295ca87b7ceca36d8
15063cbb8f76bffea71575d295ca87b7ceca36d8,15063cbb,altos/telelco: Add 30ms delay in search after finding a box,"altos/telelco: Add 30ms delay in search after finding a box

This gives the remote boxes time to get back to listening for messages
after receiving the packet from the found box.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1370845089,1370845089,988924b51980ad43e39bc4785a625ff25eb16449
988924b51980ad43e39bc4785a625ff25eb16449,988924b5,altos: Add fast-timer API. Use for quadrature and button drivers,"altos: Add fast-timer API. Use for quadrature and button drivers

This splits the fast-timer portion out of the debounce helper code and
shares that with the quadrature driver which now uses it directly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1370840953,1370840953,72b6c699d355fcd41addb9919d846e63105b9db7
72b6c699d355fcd41addb9919d846e63105b9db7,72b6c699,altos: Add debounce helper. Use in button and quadrature drivers for TeleLCO,"altos: Add debounce helper. Use in button and quadrature drivers for TeleLCO

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368509659,1370805251,47b7e1d819e48aaebf6ffda49effbee041ce8750
47b7e1d819e48aaebf6ffda49effbee041ce8750,47b7e1d8,altos/telefire: Leave siren on all the time. Add siren/strobe debugging.,"altos/telefire: Leave siren on all the time. Add siren/strobe debugging.

The 50% duty cycle wasn't actually loud enough outside.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1370805186,1370805219,187f661c2512e4260d0ca64134de8fad199f5944
187f661c2512e4260d0ca64134de8fad199f5944,187f661c,altos: Add telefire v0.2 support,"altos: Add telefire v0.2 support

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1370797254,1370797254,8ba2035c78293bc312804722249df76dd4692d71
8ba2035c78293bc312804722249df76dd4692d71,8ba2035c,altos: Add driver for 74hc165 shift register,"altos: Add driver for 74hc165 shift register

Just reads one byte from the shift register using the SPI driver and returns it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1370796787,1370796787,3e8b72a9dc5b6c3a0f6132dc2dec04f8c08a1deb
3e8b72a9dc5b6c3a0f6132dc2dec04f8c08a1deb,3e8b72a9,altos: Add pyro operations to regular ignite commands,"altos: Add pyro operations to regular ignite commands

Instead of having separate commands, just mix the two sets together.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369629536,1369629536,4bc1f3390b9ebbe07af4bc0f0a1c0915193ddf42
4bc1f3390b9ebbe07af4bc0f0a1c0915193ddf42,4bc1f339,Set version to 1.2.9.1,"Set version to 1.2.9.1

Mark bits to be used on Monday of NSL 2013

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369618882,1369619443,6f131e740477d29b6623fa336da79e53f765a55b
6f131e740477d29b6623fa336da79e53f765a55b,6f131e74,altos: Make manual pyro firing command work again,"altos: Make manual pyro firing command work again

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369619283,1369619443,5ca472333a3587f0e47d54f5edc287494262ef98
5ca472333a3587f0e47d54f5edc287494262ef98,5ca47233,altos: write pyro fired to correct log field,"altos: write pyro fired to correct log field

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369619222,1369619443,956f4dff1cc521059434743624b1271fb92b96ae
956f4dff1cc521059434743624b1271fb92b96ae,956f4dff,altos: Light pyro charges simultaneously if so configured,"altos: Light pyro charges simultaneously if so configured

Don't try to be nice to the battery, just let the pyro circuit deal
with it and try to get all of the specified circuits going at the same
time if they're configured to do so.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369618753,1369618753,62547a042d042fadec652c5081f96816a8e66970
62547a042d042fadec652c5081f96816a8e66970,62547a04,"altos,altosui: Add pyro state logging for TeleMega","altos,altosui: Add pyro state logging for TeleMega

Only in the log file (no obvious space in the telem packets), but at
least we should be able to check for pyro failures.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369616592,1369616592,277577fecc71e3c52b823938f396cf42be403ebe
277577fecc71e3c52b823938f396cf42be403ebe,277577fe,altos: Add pyro code testing to ao_flight_test for TeleMega,"altos: Add pyro code testing to ao_flight_test for TeleMega

This parses the pyro settings and signals when the pyro channels are
fired in the output.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369616518,1369616518,b1408c13f176f3f021e9face48c4cd33528ee96c
b1408c13f176f3f021e9face48c4cd33528ee96c,b1408c13,ao-tools/ao-mega: Dump 'pyro' state from mega log,"ao-tools/ao-mega: Dump 'pyro' state from mega log

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369616321,1369616321,8083aa731c99d09bdd4a8c216bb11f846734d7df
8083aa731c99d09bdd4a8c216bb11f846734d7df,8083aa73,ao-tools: Add ao-mega tool to parse TeleMega eeprom files,"ao-tools: Add ao-mega tool to parse TeleMega eeprom files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369616278,1369616278,21689ef744ddf43965ccad89dc1133a905011d7f
21689ef744ddf43965ccad89dc1133a905011d7f,21689ef7,altosui: Missing 'break' after selecting 'mega' format detection,"altosui: Missing 'break' after selecting 'mega' format detection

Caused 'mega' logs to be dumped in 'mini' format which didn't work well.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369616042,1369616042,17e0ccccc8619f96d2cf56bd98d63a7e59f5301d
17e0ccccc8619f96d2cf56bd98d63a7e59f5301d,17e0cccc,altosui: Stop downloading mega eeprom on empty block,"altosui: Stop downloading mega eeprom on empty block

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369615810,1369615810,013cba5ed1fde72240a68ec648bd14977f5e48a4
013cba5ed1fde72240a68ec648bd14977f5e48a4,013cba5e,doc: Update description of graph window to note new tabs (config and map),"doc: Update description of graph window to note new tabs (config and map)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369111261,1369181438,e711c708b0d2c8d8c2d72e34a795ad8e9b5ab5de
e711c708b0d2c8d8c2d72e34a795ad8e9b5ab5de,e711c708,Create release notes for 1.2.1,"Create release notes for 1.2.1

Move most of the 1.2 content to the 1.2.1 block

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369111040,1369181438,2344ba81fa51215471099e56518112478bdf2e73
2344ba81fa51215471099e56518112478bdf2e73,2344ba81,Separate out cortex-m0 compiler tests in configure,"Separate out cortex-m0 compiler tests in configure

The summon arm toolchain doesn't work for cortex-m0 parts, but the
linaro toolchain does. Look in /usr/bin for the -m0 compiler but
continue to use /opt/cortex/bin for the -m3 compiler

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369161065,1369161065,85eb75c3251d8e141d7269fc7ffa6197174ea8c3
85eb75c3251d8e141d7269fc7ffa6197174ea8c3,85eb75c3,altos: Can't use inline functions because SDCC doesn't do that,"altos: Can't use inline functions because SDCC doesn't do that

Sigh.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369161044,1369161044,fd5567882b732f8947b44b217552077c82a3d28e
fd5567882b732f8947b44b217552077c82a3d28e,fd556788,Merge branch 'lpc',"Merge branch 'lpc'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369160214,1369160214,"fd55c1fe53adf5c50dcd3ce8296f80871cec73e9,57b4d82dee10b142b820aa306028a288a85214f6"
fd55c1fe53adf5c50dcd3ce8296f80871cec73e9,fd55c1fe,Bump master version to 1.2.9 to avoid confusion with 1.2 releases,"Bump master version to 1.2.9 to avoid confusion with 1.2 releases

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369160193,1369160193,1bffe8caf0294e9cfef2dab1c6b5a8d1d87ac3a2
1bffe8caf0294e9cfef2dab1c6b5a8d1d87ac3a2,1bffe8ca,altos: Set the path for the STM32L compiler explicitly,"altos: Set the path for the STM32L compiler explicitly

This makes sure we use the known toolchain for STM32L builds

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369159695,1369159695,7282fab337dc48d32606276e5f51c057a3bff8cb
7282fab337dc48d32606276e5f51c057a3bff8cb,7282fab3,altosui: Add TeleBT firmware to release,"altosui: Add TeleBT firmware to release

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369159465,1369159465,d9cbef8cd364aae54855cc5bc64fb8c2b22057b0
57b4d82dee10b142b820aa306028a288a85214f6,57b4d82d,Add Mini logging format. Use in EasyMini,"Add Mini logging format. Use in EasyMini

This is a 16-byte record that includes all of the sensor data in each
sensor record, along with records for flight state changes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369030074,1369030074,27e9b93f3d35890a49575b2ead1983ce3c2fc213
27e9b93f3d35890a49575b2ead1983ce3c2fc213,27e9b93f,Merge branch 'master' into lpc,"Merge branch 'master' into lpc
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369021242,1369021242,"a4df2575b4e782e83cc4e9b1d2e5cd2397a97dd8,d9cbef8cd364aae54855cc5bc64fb8c2b22057b0"
d9cbef8cd364aae54855cc5bc64fb8c2b22057b0,d9cbef8c,altos/telemega: The last two igniters are apogee and main,"altos/telemega: The last two igniters are apogee and main

Not the first two. TeleMega v0.3 has these marked on the silk

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020942,1369021196,6735a391c2a1e3be01ac9e68b44ec0974592c11c
a4df2575b4e782e83cc4e9b1d2e5cd2397a97dd8,a4df2575,altos/easymini: Initialize beep and ADC. Declare use of igniter bits.,"altos/easymini: Initialize beep and ADC. Declare use of igniter bits.

This makes easymini actually work!

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020815,1369021159,a87a8e8067d7b2d0ff3a3274af9f1e919b5b7793
a87a8e8067d7b2d0ff3a3274af9f1e919b5b7793,a87a8e80,altos/easymini: Use different pins for igniter outputs,"altos/easymini: Use different pins for igniter outputs

Was using the I2C outputs which are open drain, which makes it
impossible to force them high as needed to driver our igniters.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020754,1369021159,16eb0b04df3d1db65bd40717133abe94db0f2a15
16eb0b04df3d1db65bd40717133abe94db0f2a15,16eb0b04,altos/easymini: MS5607 chip select bits were defined wrong,"altos/easymini: MS5607 chip select bits were defined wrong

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020708,1369021159,455802b7e853956180799c058e9561876d98d831
455802b7e853956180799c058e9561876d98d831,455802b7,altos/easymini: Easymini doesn't have USB connect or VBUS wiring,"altos/easymini: Easymini doesn't have USB connect or VBUS wiring

Disable these in ao_pins.h

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020649,1369021159,35b120c4154df0351c3a802f86dda224a7643068
35b120c4154df0351c3a802f86dda224a7643068,35b120c4,altos/lpc: Force idle mode if USB gets an address during boot time,"altos/lpc: Force idle mode if USB gets an address during boot time

This lets EasyMini be booted to idle mode by simply plugging it into USB.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020473,1369021159,c1f01cd4406063191a51cb68fc4634eabfc60fc2
c1f01cd4406063191a51cb68fc4634eabfc60fc2,c1f01cd4,altos/lpc: Reset SPI device at startup time,"altos/lpc: Reset SPI device at startup time

Wasn't doing the reset sequence correctly (write 0, then write 1).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020425,1369021159,e0ad8b5b5e1b4c7a9ffba9d25f3c32ce708c3ec5
e0ad8b5b5e1b4c7a9ffba9d25f3c32ce708c3ec5,e0ad8b5b,altos/lpc: Configuring wrong pin for SPI1 MOSI,"altos/lpc: Configuring wrong pin for SPI1 MOSI

Was setting configuration for PIO1_21 instead of PIO0_21.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020367,1369021159,b9bb088a36fd351809f4c378356327ffa663c974
b9bb088a36fd351809f4c378356327ffa663c974,b9bb088a,altos/lpc: Allow for alternate SPI SCLK0 pin usage,"altos/lpc: Allow for alternate SPI SCLK0 pin usage

SPI SCLK0 can appear on three different pins; let the application
configure which one it wants.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020313,1369021159,397109139fb9ff27ec7cfb0cafa65d1dbea053bd
397109139fb9ff27ec7cfb0cafa65d1dbea053bd,39710913,altos/lpc: Leave SPI enabled all the time,"altos/lpc: Leave SPI enabled all the time

Might be able to turn it off with some care; more experimentation required.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020251,1369021159,e383d7a28d01729c50f933ceda77ea767d1b8087
e383d7a28d01729c50f933ceda77ea767d1b8087,e383d7a2,altos/lpc: Create TX/RX busy macros for SPI driver,"altos/lpc: Create TX/RX busy macros for SPI driver

Check for both fifo status *and* device busy to make sure the device
is idle before we touch any registers.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369020140,1369021159,07d261c08214837b5d5cac4d2be43e51a0c47868
07d261c08214837b5d5cac4d2be43e51a0c47868,07d261c0,altos/lpc: Fix beeper driver,"altos/lpc: Fix beeper driver

Set prescale limit, not current prescale value (pr instead of pc).
Flip output 1 on PWM match (set emc toggle for channel 1).
Don't hold counter in reset (turn off CRST bit).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369019955,1369021159,3fe11b277dd7268eb445d120c8f9537f95148891
3fe11b277dd7268eb445d120c8f9537f95148891,3fe11b27,altos/lpc: Missing parens around ao_gpio_set macro,"altos/lpc: Missing parens around ao_gpio_set macro

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369019924,1369021159,a78012782c779de3433b91e6b854b2fdbd7230fd
a78012782c779de3433b91e6b854b2fdbd7230fd,a7801278,"altos/lpc: SPI runs off main clock (48MHz), not sysclk (24MHz)","altos/lpc: SPI runs off main clock (48MHz), not sysclk (24MHz)

Update SPI speed definitions to match

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369019868,1369021158,d51c9fda3478f205e4bcdf1b7bf21eb1e0a516bc
d51c9fda3478f205e4bcdf1b7bf21eb1e0a516bc,d51c9fda,altos/lpc: Pull ADC data from the correct registers,"altos/lpc: Pull ADC data from the correct registers

Was just stepping through register space arbitrarily, which would have
worked for EasyMini, but might have failed later if the ADC pin usage
wasn't consecutive.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369019272,1369021158,6343bd774f542a4f915cf1fca2053d03e93bf2c3
6343bd774f542a4f915cf1fca2053d03e93bf2c3,6343bd77,altos/lpc: Don't use loader to place USB endpoint data in USB ram,"altos/lpc: Don't use loader to place USB endpoint data in USB ram

Instead, just assign a fixed address in registers.ld. This avoids a
confusing section in the elf file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369019163,1369021158,35a05041d3ca3e69a146bd3bf8038c0f1cbc1b42
35a05041d3ca3e69a146bd3bf8038c0f1cbc1b42,35a05041,"altos: Add EXTI_PIN_NOCONFIGURE to exti interface, use for MS5607","altos: Add EXTI_PIN_NOCONFIGURE to exti interface, use for MS5607

This asks the EXTI code to not mess with the pin configuration so that
the MS5607 driver can get interrupts on the MISO pin while still using
it for SPI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369019069,1369019069,098fd43a740ee2a782f82b6b71965b60cdba2d62
098fd43a740ee2a782f82b6b71965b60cdba2d62,098fd43a,altos/lpc: Make EXTI code work.,"altos/lpc: Make EXTI code work.

Clear rise/fall bits in ISR to avoid re-entering.
Block interrupts around enable/disable bits.
Create shared _ao_exti_set_enable function to control mask changes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369018824,1369018824,f794e6c95697b034be315632fddb3a5475c43b5b
f794e6c95697b034be315632fddb3a5475c43b5b,f794e6c9,altos: Use ao_spi_get/put_bit in MS5607 driver,"altos: Use ao_spi_get/put_bit in MS5607 driver

Replace open-coded ao_spi_get/put and ao_gpio_set sequences

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369018643,1369018643,b7ab41e4dc92dcd382f4c05459088d8df8b70075
b7ab41e4dc92dcd382f4c05459088d8df8b70075,b7ab41e4,altos/attiny: Fix ao_spi_get_bit/ao_spi_put_bit macros,"altos/attiny: Fix ao_spi_get_bit/ao_spi_put_bit macros

These were never written, so just use ao_spi_get/put_mask.

A precursor to changing how the MS5607 drives the SPI bus

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1369018292,1369018292,49f9cdda5f1812687b82915acc78a9d9136255bf
49f9cdda5f1812687b82915acc78a9d9136255bf,49f9cdda,altos: ignore built files in easymini-v0.1,"altos: ignore built files in easymini-v0.1

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368874470,1368874470,c57e1630002c921739ff22395497d93027d381b6
c57e1630002c921739ff22395497d93027d381b6,c57e1630,altos: Build easymini-v0.1,"altos: Build easymini-v0.1

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368874412,1368874412,278300b2bc98b92cc71ec016ab0fc93eb3696435
278300b2bc98b92cc71ec016ab0fc93eb3696435,278300b2,altos: Initialize SPI for easymini,"altos: Initialize SPI for easymini

Doesn't work very well without this

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368874379,1368874379,cbe5eee76faf386eefe69539935ab318944ac452
cbe5eee76faf386eefe69539935ab318944ac452,cbe5eee7,altos/lpc: Stick USB control structure in USB memory,"altos/lpc: Stick USB control structure in USB memory

No reason to have that in regular ram, and it means we've got space
for large enough stacks now

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368874334,1368874334,3587bfd248e115bb1abb28f71b263575b4e8e367
3587bfd248e115bb1abb28f71b263575b4e8e367,3587bfd2,altos: Add easymini-v0.1 product,"altos: Add easymini-v0.1 product

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368872530,1368872530,c4991db4809ae547fdb245e3cb42517fa7524de5
c4991db4809ae547fdb245e3cb42517fa7524de5,c4991db4,altos/lpc: Use separate interrupt stack,"altos/lpc: Use separate interrupt stack

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368872503,1368872503,5311720525ac73e9d42067b68adf25fc2e054af5
5311720525ac73e9d42067b68adf25fc2e054af5,53117205,altos/lpc: Try a smaller stack.,"altos/lpc: Try a smaller stack.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368872480,1368872480,f5218e2544dcb659aec6c3adee50d61cab1bba3a
f5218e2544dcb659aec6c3adee50d61cab1bba3a,f5218e25,altos/lpc: Add pin interrupt driver,"altos/lpc: Add pin interrupt driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368872381,1368872381,c0d0147251bfcebd753196b74c22c00c3116fd22
c0d0147251bfcebd753196b74c22c00c3116fd22,c0d01472,altos/lpc: Add beep driver,"altos/lpc: Add beep driver

Hardwired to our current beeper pin

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368872335,1368872335,166977c65bddb50d600a3c1e1f278c425b673697
166977c65bddb50d600a3c1e1f278c425b673697,166977c6,altos/lpc: Add ADC driver,"altos/lpc: Add ADC driver

Uses burst mode to get the whole set of values in one interrupt

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368872299,1368872299,ed25a46571d988ccf37ae915dff97b5f00bcf9cf
ed25a46571d988ccf37ae915dff97b5f00bcf9cf,ed25a465,"altos/lpc: add gpio int, spi, adc and ct32b defines to lpc.h","altos/lpc: add gpio int, spi, adc and ct32b defines to lpc.h

Lots more devices

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368872201,1368872243,2b0b7bf1462341718e582223a880f2dfcd79e2ad
2b0b7bf1462341718e582223a880f2dfcd79e2ad,2b0b7bf1,altos/lpc: Clean up broken IOCONF defines,"altos/lpc: Clean up broken IOCONF defines

Missing comment closes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368872158,1368872158,08887678f900adae81dcb1a7f5353d98d127aafd
08887678f900adae81dcb1a7f5353d98d127aafd,08887678,"altos/lpc: Fix ao_enable_input, add ao_enable_analog","altos/lpc: Fix ao_enable_input, add ao_enable_analog

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368872097,1368872097,15ca452b60271e3a0f7327216df04eef5b985240
15ca452b60271e3a0f7327216df04eef5b985240,15ca452b,altos: LPC interrupt priorities are just 0-3,"altos: LPC interrupt priorities are just 0-3

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368872056,1368872056,935a7ff38010ec4ad19f315f8a2a1557c01ae554
935a7ff38010ec4ad19f315f8a2a1557c01ae554,935a7ff3,altos: Add LPC spi driver,"altos: Add LPC spi driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368871997,1368871997,d9b42470e8889b44bb08858a610285410a200ab9
d9b42470e8889b44bb08858a610285410a200ab9,d9b42470,altos: Use ao_port_t in m25 driver,"altos: Use ao_port_t in m25 driver

This uses ao_port_t for all of the chip select masks

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368871358,1368871358,28890aa5893898cd0bb0ac033e491eb307a84ca5
28890aa5893898cd0bb0ac033e491eb307a84ca5,28890aa5,altos: Use ao_data_pres macro in ao_log_tiny,"altos: Use ao_data_pres macro in ao_log_tiny

Now it works on easymini too

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368871321,1368871321,82afe3a3b737c43dbeaad41ea5af1841357297a6
82afe3a3b737c43dbeaad41ea5af1841357297a6,82afe3a3,altos: Check for packet mode before trying to disable it in flight code,"altos: Check for packet mode before trying to disable it in flight code

This is only relevant for telemini

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368870895,1368870895,52063c2679752033135fff928c7686e368d2a825
52063c2679752033135fff928c7686e368d2a825,52063c26,"altos: ao_data_get is in ao_data.c now, not ao_adc.c","altos: ao_data_get is in ao_data.c now, not ao_adc.c

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368870870,1368870870,e4385d29fc1b233b3ad56d4af68a175e760c1751
e4385d29fc1b233b3ad56d4af68a175e760c1751,e4385d29,altos: Allow architecture to define the type of port registers,"altos: Allow architecture to define the type of port registers

LPC11U14 has 32-bit ports, STM32 has 16 bit ports.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368870812,1368870812,ca4f3161258356c06fe1270f7ccdf0d6939e2d34
ca4f3161258356c06fe1270f7ccdf0d6939e2d34,ca4f3161,altos: Move ao_data.c from stm to core,"altos: Move ao_data.c from stm to core

This should be used on every processor

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368870769,1368870769,ac089d4fb930b7dbc4161259fd9bddba94395ebc
ac089d4fb930b7dbc4161259fd9bddba94395ebc,ac089d4f,altos/lpc: Get USB working,"altos/lpc: Get USB working

The lpc demo now has a USB command line.
Also allocates system stack so we know when ram is tight at build time

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368787007,1368787807,185e6d15bcda229949a984910d7394203d301db9
185e6d15bcda229949a984910d7394203d301db9,185e6d15,altos: Allow target-specific USB endpoint specifications,"altos: Allow target-specific USB endpoint specifications

The LPC has only a small number of endpoints, and those are not
configurable. Let the LPC USB driver pick the IN and OUT endpoints by itself.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368755904,1368787807,6c35e21a86ab32bc91eb10a60c071b702fc0f963
6c35e21a86ab32bc91eb10a60c071b702fc0f963,6c35e21a,altos: Finish off LPC USB register definitions,"altos: Finish off LPC USB register definitions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367980037,1368787807,918342016705303baa1630c62c290aaf2dcc2801
918342016705303baa1630c62c290aaf2dcc2801,91834201,altos/lpc: Start adding USB register defines,"altos/lpc: Start adding USB register defines

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366947512,1368787807,91d201abcbe9373360919406427b7e4fb9e1b42e
91d201abcbe9373360919406427b7e4fb9e1b42e,91d201ab,altos/lpc: Start adding USB register definitions,"altos/lpc: Start adding USB register definitions

Just the bare struct, no defines yet.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366668624,1368787807,9bf67798b134ad796c2f4bc9240ee450722148ec
9bf67798b134ad796c2f4bc9240ee450722148ec,9bf67798,altos/lpc: Take advantage of USART TX fifo,"altos/lpc: Take advantage of USART TX fifo

The USART has a 16-byte TX fifo; keep rough track of how full it is to
avoid waiting for an interrupt after every TX byte.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366436438,1368787807,9e8f6ba8b779cd9635f82d6da5f113715c3ee4c7
9e8f6ba8b779cd9635f82d6da5f113715c3ee4c7,9e8f6ba8,altos/lpc: Get USART running,"altos/lpc: Get USART running

Adds a simple demo thread that spews data to the serial port

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366435255,1368787807,f9d0eb3f3154f98abb0c8952d7171f3e7d3de9b2
f9d0eb3f3154f98abb0c8952d7171f3e7d3de9b2,f9d0eb3f,altos/lpc: Get 100Hz timer running,"altos/lpc: Get 100Hz timer running

Use systick, which is built into the ARM core

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366319752,1368787807,04b243e6ef212f54ed284cfbde6d5abb637bf60e
04b243e6ef212f54ed284cfbde6d5abb637bf60e,04b243e6,lpcxpresso: Add ao_demo.c,"lpcxpresso: Add ao_demo.c

Kinda necessary for the demo to build

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366318526,1368787807,bcc65597d3d20f1d58df784100af766cee5f0f20
bcc65597d3d20f1d58df784100af766cee5f0f20,bcc65597,lpc: Initial lpcxpresso bits,"lpc: Initial lpcxpresso bits

This gets the LPC11U14 clock set to the PLL and blinks the LED.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366318453,1368787807,6735a391c2a1e3be01ac9e68b44ec0974592c11c
6735a391c2a1e3be01ac9e68b44ec0974592c11c,6735a391,libaltos: use PurgeComm in Windows altos_close to abort in-progress ops,"libaltos: use PurgeComm in Windows altos_close to abort in-progress ops

Instead of manually signalling the related events, use PurgeComm which
can then abort the operations itself. Also make sure all of the
relevant handles are set to INVALID before closing them to avoid race conditions.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368786890,1368787782,bd8d061d0f63158b5b03814d77cb76fdf5a0abad
bd8d061d0f63158b5b03814d77cb76fdf5a0abad,bd8d061d,libaltos: Build the linux library targets when doing a 'fat' build,"libaltos: Build the linux library targets when doing a 'fat' build

These are necessary for the fat release, so make sure they're built then.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368786440,1368787782,8a19805a6b079450b5afd5fa2334cede8495ae4a
8a19805a6b079450b5afd5fa2334cede8495ae4a,8a19805a,altos/cc1111: Hack on USB driver to make Windows happy,"altos/cc1111: Hack on USB driver to make Windows happy

The Windows modem driver is quite chatty at startup time, getting and
setting the comm parameters each time the device is opened. Sometimes,
when setting the parameters, the cc1111 would STALL EP0.

Most of the time, Windows would happily pass this as an error back to
AltosUI which would then re-try the open (and succeed, most of the
time).

Sometimes, Windows would stall for 30 seconds before passing the error
back. This made the whole UI freeze, and I suspect most people assumed
our app had died.

A bit of analysis with the beagle USB sniffer and I discovered the
STALL settings, but there wasn't any correlation between the data on
the wire and when the STALL would be generated.

So, I found a couple of other cc1111 USB stacks on the net and just
looked to see how our driver differed. There wasn't anything clearly
related, but there were a list of small differences:

 1) Other drivers didn't bother waiting for the hardware to
    ack the USBADDR setting; doing it this way means we can set
    the address *before* acking the setup packet. It'll get
    set eventually, at which point the device will start responding to
    packets again.

    Easy to fix, and saves a bit of code space too.

 2) The other drivers set the STALL bit for setup packets which aren't
    understood. This shouldn't have any effect on 'good' systems as
    those shouldn't ever be generating bogus setup packets anyways.

    The driver already handled the STALL state in the interrupt
    handler, the only requirement was to figure out when to explicitly
    set the STALL bit.

    That required moving the state updating code from the start of the
    ep0 setup handling to the end, after the setup packet had been
    examined and data queued in or out as appropriate.

 3) Our driver explicitly queued an IN packet for any setup request
    that wasn't waiting for an OUT pack. This appears to tie in with
    the USBADDR change above as before I made that change, this change
    caused the driver to fail to respond to most setup packets.

    This was simple once the above change was made, just move the
    generation of the IN packet inside the code that switched to the
    IN state.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368786068,1368787131,4ef0136c27e8f47a1eb38f9cbcd2c61288732d78
4ef0136c27e8f47a1eb38f9cbcd2c61288732d78,4ef0136c,altos: Generate unmodulated carrier for CC1120 test mode,"altos: Generate unmodulated carrier for CC1120 test mode

This sets the deviation to 0, enables the preamble and turns on the
transmitter. It will sit there happily sending a bare carrier forever

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368657179,1368681188,1931e028bebc3cd8df9392e30eb0e888d0799768
1931e028bebc3cd8df9392e30eb0e888d0799768,1931e028,altos: Move MS5607 info from 'v' to 'c s',"altos: Move MS5607 info from 'v' to 'c s'

Makes more sense there.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368595746,1368681188,69b9f613ad36b8039f223ed30f8c75913916d82c
69b9f613ad36b8039f223ed30f8c75913916d82c,69b9f613,altos: Remove some MMA655x debugging printfs,"altos: Remove some MMA655x debugging printfs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368595147,1368681188,0571531066918fdefe9447f3b4192d0c6c477afa
0571531066918fdefe9447f3b4192d0c6c477afa,05715310,altos: Grab SPI mutex until MPU6000 I2C mode is disabled,"altos: Grab SPI mutex until MPU6000 I2C mode is disabled

If other drivers use the SPI bus, the MPU6000 gets confused as its
sitting on the bus looking for I2C messages. Just grab the mutex
before the OS is running and hold onto it until the MPU6000 has been initialized.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368553704,1368681188,9beacd77b3e8106e036e50a67312dfee414fbc51
9beacd77b3e8106e036e50a67312dfee414fbc51,9beacd77,altos: Initialize MPU6000 CS pin for SPI mode,"altos: Initialize MPU6000 CS pin for SPI mode

Without this, we can't talk to the chip very well

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368547309,1368681182,6d553230903ddd0ec522c07be0df975b38ef23d3
6d553230903ddd0ec522c07be0df975b38ef23d3,6d553230,altos: Fix telemega v0.3 igniter order (drogue/main moved). Label ADC dump,"altos: Fix telemega v0.3 igniter order (drogue/main moved). Label ADC dump

telemega moves the igniters around so that E/F are now drogue/main.
Add custom labels for ADC values to make parsing possible

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368550576,1368681101,a4e4eec827d61a05fda52ddb68b55f17b6028d5e
a4e4eec827d61a05fda52ddb68b55f17b6028d5e,a4e4eec8,"altos: gps serial routines are called ao_gps_*, not ao_ublox_*","altos: gps serial routines are called ao_gps_*, not ao_ublox_*

This caused the u-blox driver to use serial port 1 instead of the
project-specified serial port.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368548708,1368681101,461215eea72ff9d64748304e76b08da37ee3dfe9
461215eea72ff9d64748304e76b08da37ee3dfe9,461215ee,altos: Give u-blox 3 seconds after boot before we bug it,"altos: Give u-blox 3 seconds after boot before we bug it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368548514,1368681101,5e9193f6375be27e5f7a0321fd34b6acfe81247f
5e9193f6375be27e5f7a0321fd34b6acfe81247f,5e9193f6,altos: Add 'g' command to ublox GPS code.,"altos: Add 'g' command to ublox GPS code.

Take the gps_dump function from ao_gps_skytraq.c and move it to a new
file so it can be shared with the u-blox driver. That affects every
skytraq and u-blox user as they need to include the new file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368547949,1368681081,cdad289a0803babecd30cbc0a95be99c5caadeb5
cdad289a0803babecd30cbc0a95be99c5caadeb5,cdad289a,altos: Add flash-loader for telescience-v0.2,"altos: Add flash-loader for telescience-v0.2

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368606296,1368606296,116d8570766fbd3ef529111171935637a2e466af
116d8570766fbd3ef529111171935637a2e466af,116d8570,altos: Set u-blox navigation settings,"altos: Set u-blox navigation settings

Airborne mode, < 4g (as good as it gets)
Only use 3D fixes (2D isn't very useful)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368546682,1368546682,fb0fb6f4beab484e7fe55b39d18c1f19778f1211
fb0fb6f4beab484e7fe55b39d18c1f19778f1211,fb0fb6f4,altos: Use symbolic names for ublox packet id,"altos: Use symbolic names for ublox packet id

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368545724,1368545724,1ccfd2d2e4b84e72e5502cb72a7da6372b5e2b47
1ccfd2d2e4b84e72e5502cb72a7da6372b5e2b47,1ccfd2d2,altosui: Generate useful KML files from TeleGPS logs,"altosui: Generate useful KML files from TeleGPS logs

Use GPS altitude when baro altitude is not present.
Don't require flight number.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368518780,1368518780,bdea4c88318a41ade3d3b6b2cbfc097ae3e4f3be
bdea4c88318a41ade3d3b6b2cbfc097ae3e4f3be,bdea4c88,altosui: Use GPS alt + baro height for KML altitude,"altosui: Use GPS alt + baro height for KML altitude

GPS altitude is generally more absolutely correct than baro altitude,
so use that as the nominal pad altitude when generating a KML
file. This results in a KML file that has the flight trace start and
end closer to the ground, which is always nice.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368517114,1368517114,43f94e923a6a87520edcbb8fb4829e6ddf708908
43f94e923a6a87520edcbb8fb4829e6ddf708908,43f94e92,altoslib: Use sequence numbers to track GPS updates to AltosRecord,"altoslib: Use sequence numbers to track GPS updates to AltosRecord

State objects now record what GPS sequence ID they have to know when
the GPS data has been updated. Record objects bump the GPS sequence
each time new GPS data is recorded. This way, record objects aren't
modified as they're iterated over to generate the list of state
objects which makes it possible to iterate multiple times and get the
same resulting set of states.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368516293,1368516293,c88aa32b979f379e3cf316dcb651e264c32a5283
c88aa32b979f379e3cf316dcb651e264c32a5283,c88aa32b,altos/test: ao_gps_test_ublox uses ao_gps_blox.h,"altos/test: ao_gps_test_ublox uses ao_gps_blox.h

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368511166,1368511166,61f5183fb6aff63c1133011b5625814ee56e96da
61f5183fb6aff63c1133011b5625814ee56e96da,61f5183f,altos: Struct used for u-blox testing had lat/lon swapped,"altos: Struct used for u-blox testing had lat/lon swapped

The structs in ao_gps_ublox.h are used only by the test framework, but
it's useful to have that look right anyways.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368511098,1368511098,5a730dd7a78b5ae428bcfe809257dabedc4338f5
5a730dd7a78b5ae428bcfe809257dabedc4338f5,5a730dd7,altos: Switch TeleMega v0.3 to u-blox,"altos: Switch TeleMega v0.3 to u-blox

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368509592,1368509608,d2f0dcc73df612d10ed12d364fe661ccd831f037
d2f0dcc73df612d10ed12d364fe661ccd831f037,d2f0dcc7,altos: Provide a define for the number of sat infos in a telem packet,"altos: Provide a define for the number of sat infos in a telem packet

12 fit, but it's best to use a symbolic constant

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368509545,1368509545,50457f9983ec0a432f1050464382749436e3da94
50457f9983ec0a432f1050464382749436e3da94,50457f99,altos: Add U-Blox GPS driver,"altos: Add U-Blox GPS driver

Uses binary mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368509491,1368509491,125ff0b7c74af4db98a81439ee9f1b92fe8b8833
125ff0b7c74af4db98a81439ee9f1b92fe8b8833,125ff0b7,"altos: Don't bother fixing telelco-v0.1, just disable it","altos: Don't bother fixing telelco-v0.1, just disable it

Lots of stuff to do to make this old project build; just disable it
instead of fixing

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368509362,1368509362,672edb20434248038ef5fbb87f2c0984bd5ad513
672edb20434248038ef5fbb87f2c0984bd5ad513,672edb20,altosuilib: Mistake in the MegaDongle listing -- was set to TeleMega,"altosuilib: Mistake in the MegaDongle listing -- was set to TeleMega

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368509307,1368509307,80a6b0ea5c36c307a8edc79ad10ef7a8ff3d480e
80a6b0ea5c36c307a8edc79ad10ef7a8ff3d480e,80a6b0ea,altoslib: Correct hexfile address ranges,"altoslib: Correct hexfile address ranges

Stop trying to use sentinal values for addresses and just keep a
boolean tracking whether they've been initialized. Avoids precision
errors in the variables.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368509220,1368509220,9bd717e71d69338b1af521b37e8bd975e503398e
9bd717e71d69338b1af521b37e8bd975e503398e,9bd717e7,altosui: Wait for valid callsign/flight when graphing,"altosui: Wait for valid callsign/flight when graphing

Wait for the data record to indicate that the flight value is valid
before setting the graph callsign/flight/serial data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368238878,1368238878,106d212ff5920c39d95751ef6249dc141970412c
106d212ff5920c39d95751ef6249dc141970412c,106d212f,Merge branch 'master-fixes' into stm-flash-fixes,"Merge branch 'master-fixes' into stm-flash-fixes
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368158812,1368158812,"ecb128579e7576fc27c8ca93708f316b9ac91630,09d5d6f546ccef2bfd4941e590f047485bb73d76"
09d5d6f546ccef2bfd4941e590f047485bb73d76,09d5d6f5,micropeak: Use new 'last logdir' preference for MicroPeak save/load dialogs,"micropeak: Use new 'last logdir' preference for MicroPeak save/load dialogs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368158783,1368158783,95a3a089f9c97684918937eecd94dcac77c47696
95a3a089f9c97684918937eecd94dcac77c47696,95a3a089,Information from configure about android build was misprinted,"Information from configure about android build was misprinted

A typo in the script caused it to print either 'yes' or ''

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368158692,1368158692,17eada6e586731defa9fd75316670c2b2b1601ee
17eada6e586731defa9fd75316670c2b2b1601ee,17eada6e,altoslib: Add non-persistent 'last logdir' preference,"altoslib: Add non-persistent 'last logdir' preference

This is used to record the last directory for reading or writing log
files so that the UI can pop back to the same place next time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368158651,1368158651,271e8adbc9549c7b3b4d0ec14e4edb1a6ab715d1
271e8adbc9549c7b3b4d0ec14e4edb1a6ab715d1,271e8adb,Add altosdroid notebook entry for imperial units,"Add altosdroid notebook entry for imperial units

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1368158618,1368158618,887209b61ac3012d0fd2206cf1016c44f59cb432
ecb128579e7576fc27c8ca93708f316b9ac91630,ecb12857,altos: Wait after configuring boot pin before testing it,"altos: Wait after configuring boot pin before testing it

Clearly the pin isn't quite ready just after it's been configured, so
hang around for a while (100 nops) to let things setting down before
testing the value of the pin. Makes booting a lot more reliable.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367215584,1367987427,4a90eec4b8ee4a35711aa74c13b3f30d12c0fe08
4a90eec4b8ee4a35711aa74c13b3f30d12c0fe08,4a90eec4,altos/stm: Create per-product flash loaders,"altos/stm: Create per-product flash loaders

Split the flash loader prototype into pieces so that each product can
build a custom flash loader with very little code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367101984,1367987427,b131c5ac59bbd339a724892586023a43f97c7f90
b131c5ac59bbd339a724892586023a43f97c7f90,b131c5ac,altos: Add ao_boot_chain to telemega v0.3,"altos: Add ao_boot_chain to telemega v0.3

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367048235,1367987426,1695f6af46ea647119d651fc09c97d604d08c736
1695f6af46ea647119d651fc09c97d604d08c736,1695f6af,ao-tools/ao-stmload: Add --verbose flag,"ao-tools/ao-stmload: Add --verbose flag

This dumps out the serial communication so you can see where things go wrong.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367047571,1367987426,f6d6df03826083a244715b88a30ad681f17b4510
f6d6df03826083a244715b88a30ad681f17b4510,f6d6df03,altos: Remove stdio from stm-flash,"altos: Remove stdio from stm-flash

This saves enough memory to fit in under 4kB

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367047536,1367987426,a2e0676f476b0e2bdd5102315ebd5904b57f384a
a2e0676f476b0e2bdd5102315ebd5904b57f384a,a2e0676f,"altos: Get rodata into flash, make sure sections are aligned","altos: Get rodata into flash, make sure sections are aligned

.rodata* needs to be in flash; otherwise strings get left in ram.
Failing to align sections makes the initialized data get dumped into
the wrong place in memory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367047448,1367987426,2e092b383d55bcf9e2a230ccfe85052adb18b254
2e092b383d55bcf9e2a230ccfe85052adb18b254,2e092b38,altos: Make stm-bringup build again,"altos: Make stm-bringup build again

stm requires AO_BOOT_LOADER_BASE now

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367047394,1367987426,0b1797312b34ba2b8121f82605f8d2c419167737
0b1797312b34ba2b8121f82605f8d2c419167737,0b179731,altos: Run self loader when application sets boot addr to 0,"altos: Run self loader when application sets boot addr to 0

This causes the flash loader startup code to fall into the loader when
the application sets the boot address to zero.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367047247,1367987426,e2412e867138635d79ea0fa8d43efc0a6aa19784
e2412e867138635d79ea0fa8d43efc0a6aa19784,e2412e86,altos: Allow STM usb driver to be used without stdio,"altos: Allow STM usb driver to be used without stdio

This lets the self flashing loader be linked without any of the stdio
code, which saves a bunch of memory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367047153,1367987426,afad5ae893a48785f3b50ff4125dc78648343a2d
afad5ae893a48785f3b50ff4125dc78648343a2d,afad5ae8,altos/stm-flash: Check target flash address against AO_BOOT_APPLICATION_BASE,"altos/stm-flash: Check target flash address against AO_BOOT_APPLICATION_BASE

Allows that value to change

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366682915,1367987426,9ae987073f90402821120dbe962fceb4fc9f5435
9ae987073f90402821120dbe962fceb4fc9f5435,9ae98707,ao-tools/ao-stmload: application base moved to 0x08001000,"ao-tools/ao-stmload: application base moved to 0x08001000

And, use a symbolic name so it can be easily moved in the future

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366682352,1367987426,9029722708b54826aa9374555470cb40922c5da5
9029722708b54826aa9374555470cb40922c5da5,90297227,ao-tools: reboot to loader now uses 'X' instead of 'L',"ao-tools: reboot to loader now uses 'X' instead of 'L'

'L' is used by lots of other commands; switch to 'X' which is free.

Sigh. Someday we'll have words for commands instead of just letters

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366682160,1367987426,dfc268e0021e1cd3045f73339a749d292a6a6300
dfc268e0021e1cd3045f73339a749d292a6a6300,dfc268e0,altos: Use flash loader on all STM products,"altos: Use flash loader on all STM products

Includes the boot chain stuff

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366680957,1367987426,8ded61d59888c79ef1f94e664b5fb770841a801a
8ded61d59888c79ef1f94e664b5fb770841a801a,8ded61d5,altos/stm: Provide another 4kB of flash space for apps,"altos/stm: Provide another 4kB of flash space for apps

With the flash loader now < 4kB, we can use the spare 4kB for applications

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366680813,1367987426,6cd015b8b6b02bd8e0ce28f248426ae75c242b53
6cd015b8b6b02bd8e0ce28f248426ae75c242b53,6cd015b8,altos/stm: Shrink stm flash loader to < 4kB,"altos/stm: Shrink stm flash loader to < 4kB

Saves 4kB of flash space for applications.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366680738,1367987426,02681adbc5919bd3713788da352aa36ace619ef4
02681adbc5919bd3713788da352aa36ace619ef4,02681adb,altos/stm: Allow core timer to be excluded from build,"altos/stm: Allow core timer to be excluded from build

This removes all of the support for the base 100Hz timer from the
system, saving space when not needed

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366680631,1367987426,a453e2245996854e722346789f972fd088e33ba8
a453e2245996854e722346789f972fd088e33ba8,a453e224,altos/stm: Don't define task macros when not tasking,"altos/stm: Don't define task macros when not tasking

The necessary data structures aren't defined in this case.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366680596,1367987426,8d0f4bc23eae4f1e085bfb853c995f1fb6b8b594
8d0f4bc23eae4f1e085bfb853c995f1fb6b8b594,8d0f4bc2,altos: Eliminate stdio looping when system has a single stdio source,"altos: Eliminate stdio looping when system has a single stdio source

No need to loop if there's only one

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366680472,1367983013,6f3bbb11880f45284f1f094990ffa32a66bf4560
6f3bbb11880f45284f1f094990ffa32a66bf4560,6f3bbb11,altos: Move ao_notask to core,"altos: Move ao_notask to core

The STM flash loader wants to be taskless too, share this very simple
implementation of sleep/wakeup.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366680288,1367983013,21356aec543dd85426a52469426351ce006a17dd
21356aec543dd85426a52469426351ce006a17dd,21356aec,ao-tools/ao-stmload: Remove IRC dregs in source code,"ao-tools/ao-stmload: Remove IRC dregs in source code

oops.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364167015,1367983013,9df4e874b2785aec4aecce2f767543ee9f638b4f
9df4e874b2785aec4aecce2f767543ee9f638b4f,9df4e874,altosui/altoslib: Move more flashing code from altosui to altoslib,"altosui/altoslib: Move more flashing code from altosui to altoslib

Required a bit of refactoring to eliminate swing types from the
flashing code, but nothing major.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364166921,1367983012,09e0c304b420a12fa1616005db946523c6e5bef1
09e0c304b420a12fa1616005db946523c6e5bef1,09e0c304,altosui & altoslib: Move a pile of debug/programming bits to altoslib,"altosui & altoslib: Move a pile of debug/programming bits to altoslib

Prepare to create external Java utilities to flash devices

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364166068,1367983012,9acd488c5f945511f813d84c3c6f69846d4601e8
9acd488c5f945511f813d84c3c6f69846d4601e8,9acd488c,altosui: Support 32-bit ihx files,"altosui: Support 32-bit ihx files

This just borrows the same 32-bit ihx parsing changes from ao-tools.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364164515,1367983012,c9ba2d17b979410acfa41f9954674757f7f321fc
c9ba2d17b979410acfa41f9954674757f7f321fc,c9ba2d17,"ao-tools/ao-stmload: Fix ELF, add IHX, add self-flashing","ao-tools/ao-stmload: Fix ELF, add IHX, add self-flashing

This splits loading into ELF and IHX paths, and splits flashing into
stlink and self-flashing paths.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364164411,1367983012,1f30b1f14dbab6e6ea94177e459c80732e31e433
1f30b1f14dbab6e6ea94177e459c80732e31e433,1f30b1f1,ao-tools/lib: Add loading support for 32-bit ihx files,"ao-tools/lib: Add loading support for 32-bit ihx files

These place the upper 16 bits of the address in a special record. That
requires handling records in file order, so don't sort them in address
order anymore, instead find the bounds of the loaded data by scanning
them all.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364164224,1367983012,7d98fc5d3f106f3063608a2e5c69d9359061437a
7d98fc5d3f106f3063608a2e5c69d9359061437a,7d98fc5d,altos/stm: Add comments to the .ld files explaining how the romconfig stuff works,"altos/stm: Add comments to the .ld files explaining how the romconfig stuff works

Would be nice to be able to explicitly define addresses for the
romconfig variables, but I can't figure out how to make that
work. Instead, just explicitly load the files in teh right order to
make things land in the right places.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364164062,1367983012,ab1cbc0f51ddf897a3a7a768862d9dfe26a6c14d
ab1cbc0f51ddf897a3a7a768862d9dfe26a6c14d,ab1cbc0f,altos/stm: Add .elf to .ihx rule,"altos/stm: Add .elf to .ihx rule

Uses objcopy -O ihex to extract the initialized bits from an elf file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364163986,1367983012,9362d400d06aa3badfc826d8edbd7c55406b4f7d
9362d400d06aa3badfc826d8edbd7c55406b4f7d,9362d400,altos: Switch ao_stm_flash to read/write binary blocks,"altos: Switch ao_stm_flash to read/write binary blocks

Change from development testing code to something that actually reads
and writes data from the USB link.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364163882,1367983012,a3f668e71751608ea2e38519003446bc6ceb348f
a3f668e71751608ea2e38519003446bc6ceb348f,a3f668e7,altos: Create ihx version of stm-demo,"altos: Create ihx version of stm-demo

Both ao-stmload and the eventual java loader will support ihx files.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364163718,1367983012,5db4d5e5b1272b161102e889e65b9c7bc7928352
5db4d5e5b1272b161102e889e65b9c7bc7928352,5db4d5e5,altos: Add erase command to stm-flash app. Validate addresses.,"altos: Add erase command to stm-flash app. Validate addresses.

This also leaves the code writing fixed values and printing read data
in ascii instead of binary. Useful for debugging, will want changing
for the product.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364030583,1367983012,ac6b4fca0970faa0a537a813242585693b839469
ac6b4fca0970faa0a537a813242585693b839469,ac6b4fca,altos: Fix STM flash programming,"altos: Fix STM flash programming

Wait for flash to go non-busy after writing or erasing a page and
before jumping back out of the RAM code.

Export a separate 'erase' operation for testing.

Re-lock flash after every operation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364030487,1367983012,35ef1f17e3efaa6d586ab7bb301f8133d52023b6
35ef1f17e3efaa6d586ab7bb301f8133d52023b6,35ef1f17,altos: Validate boot chain start address,"altos: Validate boot chain start address

If the first block of boot memory has been smashed, and the start
address is bogus, don't bother trying to jump to the
application. This makes the system more resiliant to flash failures,
presuming the loader erases the first block, programs the other blocks
and then finally comes back to program the first block.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364030335,1367983012,db7f17980c303e442f88c8a4168351dbc2c0b1a0
db7f17980c303e442f88c8a4168351dbc2c0b1a0,db7f1798,altos: Mark .boot section as (NOLOAD),"altos: Mark .boot section as (NOLOAD)

For some reason, the silly linker marks things in section .boot as
data rather than bss, so they'd end up initialized by default. Force
them to be NOLOAD so they preserve values across reboot so that boot
chaining works properly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364030224,1367983012,efc0898d824ebd0abe0b088ed9a8b40c34623ab7
efc0898d824ebd0abe0b088ed9a8b40c34623ab7,efc0898d,altos: Fix up stm-flash output file name. Use discovery LED pins,"altos: Fix up stm-flash output file name. Use discovery LED pins

Include the AltOS version in the file name, just like any other AltOS
program.

Switch the LEDs to the discovery board as we're using
that. Eventually, we'll stop using LEDs entirely.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364030135,1367983012,4bc55ee8fabc9f4c997c2a515d74baada590c93e
4bc55ee8fabc9f4c997c2a515d74baada590c93e,4bc55ee8,altos: Add actual flashing functions to stm-flash app,"altos: Add actual flashing functions to stm-flash app

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1363050868,1367982997,b1a43ce313c85cb7f8f16f7f0647d9d4320ba692
b1a43ce313c85cb7f8f16f7f0647d9d4320ba692,b1a43ce3,altos: Clean up boot loader support,"altos: Clean up boot loader support

Split out code into separate files.
Add support for getting back to boot loader from application.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1363033264,1367982996,56a7cbbf51f5c9ebbfe17d1cc30ed807572af3cc
56a7cbbf51f5c9ebbfe17d1cc30ed807572af3cc,56a7cbbf,altos: Add program flash function,"altos: Add program flash function

And get it loaded to RAM so it can execute correctly.

Nothing calls it yet...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362985312,1367982945,c9c35b100c3fcae661501d2bf89eedc7fceb2e1c
c9c35b100c3fcae661501d2bf89eedc7fceb2e1c,c9c35b10,altos: Make stm-flash capable of switching to application,"altos: Make stm-flash capable of switching to application

This shrinks the base OS load down a bit as well so that stm-flash
fits comfortably in the first 8kB of memory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362974579,1367982943,a6887032b4d217bca5236ea15389218f10d69545
a6887032b4d217bca5236ea15389218f10d69545,a6887032,Add STM self-flashing loader,"Add STM self-flashing loader

This allows the real application to get loaded at 0x2000 and jumps to
that at startup time if the boot pin is set appropriately

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1361693894,1367982760,887209b61ac3012d0fd2206cf1016c44f59cb432
887209b61ac3012d0fd2206cf1016c44f59cb432,887209b6,altos: Sanity check barometer before going to pad mode,"altos: Sanity check barometer before going to pad mode

Make sure the barometer is reporting some sensible value before
letting TM try to fly the rocket.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367980146,1367982481,802ca114ca064a9dd557a82e992653b145f8e660
802ca114ca064a9dd557a82e992653b145f8e660,802ca114,altos: Elide M25 debug output from storage info command,"altos: Elide M25 debug output from storage info command

This is just chip-specific info that no UI actually needs. It takes a
bunch of ROM to write it though, making TeleMetrum not have much space left.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367980087,1367982481,3876b5bfad383119339aea51e2cf301012a1f991
3876b5bfad383119339aea51e2cf301012a1f991,3876b5bf,altos: Set APRS deviation to 3kHz,"altos: Set APRS deviation to 3kHz

I finally found a bunch of references to APRS on the net and they all
appear to assume a 3kHz deviation. Let's see if this works better with
Yaesu radios.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367881732,1367982481,4458b5a3cd3f88188c820cd0763f4e1d99fff311
4458b5a3cd3f88188c820cd0763f4e1d99fff311,4458b5a3,altos/test: Fix warning in ao_aprs_test,"altos/test: Fix warning in ao_aprs_test

Was not forward-declaring ao_radio_send_aprs, causing a warning

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367568426,1367982481,091582c446319fe4a79154153ece5372b2faec83
091582c446319fe4a79154153ece5372b2faec83,091582c4,altos: Use SYSTICK on STM32L,"altos: Use SYSTICK on STM32L

It's probably more power efficient than using one of the timers, and
it's certainly easier to configure.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367423897,1367982481,b7b0ddfddee3f8e21f21d67cd9f522fa50777265
b7b0ddfddee3f8e21f21d67cd9f522fa50777265,b7b0ddfd,altos: Mark GPS telemetry packets with GPS time stamp,"altos: Mark GPS telemetry packets with GPS time stamp

This provides a reasonable accurate indication of the system time when
the GPS location data was received, and also makes sure GPS packets
get some timestamp when no other telemetry is being transmitted.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367423817,1367982481,6a6a5d0afa646564a9277ad3bd80c4225247a27b
6a6a5d0afa646564a9277ad3bd80c4225247a27b,6a6a5d0a,altoslib: Update GPS state even if new state is unlocked,"altoslib: Update GPS state even if new state is unlocked

Otherwise, we can't see fine GPS details while GPS is unlocked, and
that's annoying

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367378720,1367982481,1e9b405e939136d25d937334d1f14f06c7d6127b
1e9b405e939136d25d937334d1f14f06c7d6127b,1e9b405e,altos: Use separate exception stack on STM32L,"altos: Use separate exception stack on STM32L

This reserves 512 bytes of memory for a stack, then makes sure that
exceptions continue to use that stack while processes use the per-task
stack.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367373866,1367982480,ac72d1c298fc553808a8e04a65482d4990f177d7
ac72d1c298fc553808a8e04a65482d4990f177d7,ac72d1c2,altos: Reduce stack usage of FAT driver and logger,"altos: Reduce stack usage of FAT driver and logger

Move some large stack arrays to static storage.
Also eliminates some printf error messages which don't seem that
useful except for debugging.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367373473,1367982480,df70e3e87874d80516c6d43cfe745d511d54f206
df70e3e87874d80516c6d43cfe745d511d54f206,df70e3e8,altos: Open up the DVGA gain to use all of the available settings,"altos: Open up the DVGA gain to use all of the available settings

We usually work in RF quiet areas; let the AGC hardware try all of the
available gain settings.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367305964,1367982480,e18910659e56ea52ee493d8cc4bce4b219d5bb75
e18910659e56ea52ee493d8cc4bce4b219d5bb75,e1891065,altos: Stop using telelco v0.2 top LEDS for radio TX/RX,"altos: Stop using telelco v0.2 top LEDS for radio TX/RX

The top LEDs are now used for signal strength; a red LED indicates
failed communcations, so we don't need to blink stuff and annoy the user.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367305568,1367982480,8744fd5d541955b0920c7d8e2696039cdcfdf1dc
8744fd5d541955b0920c7d8e2696039cdcfdf1dc,8744fd5d,altos: Make cc1120 driver return false on recv timeout,"altos: Make cc1120 driver return false on recv timeout

Was returning an uninitialized value, which was often not zero

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367305533,1367982480,4fe42801f42f2fc2688555f4585dbebc28bb2d61
4fe42801f42f2fc2688555f4585dbebc28bb2d61,4fe42801,altos: Reconfigure CC1120 receiver to match our usage,"altos: Reconfigure CC1120 receiver to match our usage

Open up the AGC to the full range.
Set the AGC ref based on our receive BW (100kHz).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367304823,1367982474,eb0e1720be2aa4fb6729ceada09c18947bfee2bc
eb0e1720be2aa4fb6729ceada09c18947bfee2bc,eb0e1720,"altos: Compute ""real"" RSSI value in radio code as needed","altos: Compute ""real"" RSSI value in radio code as needed

Instead of dragging around the weird CC1111 RSSI values, just compute
a dBm value in a signed 8-bit integer, ao_radio_rssi. Use that
everywhere we need RSSI internally. We leave the weird CC1111 value in
the packet reply as that's what the host expects.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367302825,1367982474,949700f276b80b4eb28f15b5559714f430f227f1
949700f276b80b4eb28f15b5559714f430f227f1,949700f2,altosdroid: Add Notebook entry for reloading telem data option,"altosdroid: Add Notebook entry for reloading telem data option

This lets the user recover the rocket flight data after stopping the
application but before recovering the rocket.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367292256,1367982474,c9f2e6471c11a1f9feb183e05f24c53968098bdb
c9f2e6471c11a1f9feb183e05f24c53968098bdb,c9f2e647,altos: More .gitignore bits,"altos: More .gitignore bits

stm-demo

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367217029,1367982474,ab99d71c4ba97a28ee463170d10712b2de94dc50
ab99d71c4ba97a28ee463170d10712b2de94dc50,ab99d71c,altos: Add a bunch of .gitignore files,"altos: Add a bunch of .gitignore files

Ignore ao_product.h and built binaries

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367216852,1367982474,85d32468210c9989ae52bd29f883c4380af43961
85d32468210c9989ae52bd29f883c4380af43961,85d32468,altos: Add ublox checksum app to generate ublox config lines,"altos: Add ublox checksum app to generate ublox config lines

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367216737,1367982473,257500776935b5950cd7c49f9c799b3174d9232d
257500776935b5950cd7c49f9c799b3174d9232d,25750077,altos: Add .gitignore to kalman test dir,"altos: Add .gitignore to kalman test dir
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367216561,1367982473,5a77a62bce5e5ab5998f24588839f3c8a1cc6221
5a77a62bce5e5ab5998f24588839f3c8a1cc6221,5a77a62b,altos: Build test framework for kalman filter,"altos: Build test framework for kalman filter

This has some known flight data and generates kalman filter
information for them to test

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367216477,1367982473,24a03d0c64fc0b56ad5ccfd6588aa47690ea2a65
24a03d0c64fc0b56ad5ccfd6588aa47690ea2a65,24a03d0c,altos: Ignore ao_aes_test binary,"altos: Ignore ao_aes_test binary

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367216128,1367982473,e2c697af790d53c68154facc19e4096aed5de798
e2c697af790d53c68154facc19e4096aed5de798,e2c697af,altos/test: Add telemega plot helper script,"altos/test: Add telemega plot helper script

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367216090,1367982473,086217bbde6d549cad61bdde728c75d29023d1c6
086217bbde6d549cad61bdde728c75d29023d1c6,086217bb,altos: Add nickle micropeak log parsing code,"altos: Add nickle micropeak log parsing code

I think this was just some debugging stuff, but it doesn't seem useless

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367215887,1367982473,5d46d26d714cc172b5ea493478d9dd3cad323152
5d46d26d714cc172b5ea493478d9dd3cad323152,5d46d26d,altos: Add telelco-v0.2 project,"altos: Add telelco-v0.2 project

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367215794,1367982472,38d4110e59a44687d8a4743b8cd04cbf2761c9d8
38d4110e59a44687d8a4743b8cd04cbf2761c9d8,38d4110e,altos: Allow LCD segments to not be multiplexed across digits,"altos: Allow LCD segments to not be multiplexed across digits

This allows each LCD segment to be individually configured as to which
COM and which SEG drives it, permitting maximum flexibility in wiring.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367215683,1367982472,f09b2fc7fcfb1b3dcb1a46a8b9856092dd59866b
f09b2fc7fcfb1b3dcb1a46a8b9856092dd59866b,f09b2fc7,altos: Clear any broken cc1120 TX fifo bits before transmitting,"altos: Clear any broken cc1120 TX fifo bits before transmitting

This just goes and clears the transmitter before using it, just in
case it got wedged somehow. It also clears the bits while waiting for
the radio to go idle, otherwise it'd never make it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367215518,1367982472,b878ca38045b1bee6ea4d649298727ac3fa197c2
b878ca38045b1bee6ea4d649298727ac3fa197c2,b878ca38,altos: Make cc1120 driver wait for TX finished,"altos: Make cc1120 driver wait for TX finished

Otherwise, we may come in and try to use the radio again too quickly,
causing it to go into a TX fifo error state.

This change watches the MARC status until the transmitter is
explicitly marked as finished.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367215437,1367982472,f677a83348a9568679240ee9d731ab454f289831
f677a83348a9568679240ee9d731ab454f289831,f677a833,altos: Provide timeout value to ao_radio_recv,"altos: Provide timeout value to ao_radio_recv

Instead of using ao_alarm around calls to ao_radio_recv, provide an
explicit timeout value as needed by radio functions with more
complicated system interaction than the cc1111. The timeout is 8 bits
of clock ticks.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367215332,1367982472,0488cd9cffc837e99490a0761216bbc5847ff400
0488cd9cffc837e99490a0761216bbc5847ff400,0488cd9c,altos: Build test framework for AES code,"altos: Build test framework for AES code

Simple CBC-CMAC test with a constant 0 key and constant 0 data for now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367214743,1367982472,3edbaa90fb7cb31fa0bd835a7c6c8930fd6dfeb6
3edbaa90fb7cb31fa0bd835a7c6c8930fd6dfeb6,3edbaa90,altos: Make telemega-v0.3 binary use the right name,"altos: Make telemega-v0.3 binary use the right name

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367130213,1367982472,168188f6650dc9a777d57f9c7a8ff1be957bc892
168188f6650dc9a777d57f9c7a8ff1be957bc892,168188f6,altos/stm: Remove USB EP0 task,"altos/stm: Remove USB EP0 task

Handl EP0 actions from interrupt handler. This allows USB to be used
in a taskless environment, like the STM flash loader

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366680228,1367982472,0b6128d634c49e1790675ae8111e970b1af1f141
0b6128d634c49e1790675ae8111e970b1af1f141,0b6128d6,ao-tools/lib: Deal with binary USB data in debugging output,"ao-tools/lib: Deal with binary USB data in debugging output

Dump non-ascii characters in hex format.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364164172,1367982472,3cbec0292d5167bce5c23eeea95f7a2d13bccc79
3cbec0292d5167bce5c23eeea95f7a2d13bccc79,3cbec029,altos/stm: Always declare all romconfig variables,"altos/stm: Always declare all romconfig variables

I haven't figured out how to assign addresses for specific initialized
variables, so we'll just have to always declare all of them and make
sure that we add new ones at the end.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364163609,1367982472,4551be8b03a795ece94fd303a1f556c63c0a0096
4551be8b03a795ece94fd303a1f556c63c0a0096,4551be8b,altos: Call ao_task_init before initializing any drivers,"altos: Call ao_task_init before initializing any drivers

When using task queues, the sleep queues must be initialized before
any invocation of ao_wakeup or the OS will crash. Just make sure
ao_task_init is always invoked early in the task process to get that done.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364163252,1367982472,6dea353e732b6e19586c844796bc3bb848cc92f8
6dea353e732b6e19586c844796bc3bb848cc92f8,6dea353e,altos: Expose ao_put_string function,"altos: Expose ao_put_string function

This works like puts, except it doesn't add a trailing newline.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362974734,1367982428,1629acba4a63baae2c687ed56a17d02faf45f5e5
1629acba4a63baae2c687ed56a17d02faf45f5e5,1629acba,Allow build without SDCC,"Allow build without SDCC

The AltOS directory handles not building the cc1111 apps when sdcc is
missing already, so don't require it, just whinge if it's missing

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367561642,1367561799,7cce6c205e4595894e033ab8f0acc8064bf9f561
7cce6c205e4595894e033ab8f0acc8064bf9f561,7cce6c20,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1367277883,1367277883,"75f8229d4a8d7c9a28ea3d88fda72af0d1f1ccc2,55915098f2668e3a71568d51a9888dc4bdf40992"
75f8229d4a8d7c9a28ea3d88fda72af0d1f1ccc2,75f8229d,add libssl-dev as a build dep since it's used in FAT filesystem test code,"add libssl-dev as a build dep since it's used in FAT filesystem test code
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1367277108,1367277108,f2a8ac537d254cc08c0be9c16bf2d5cc03fd04fc
f2a8ac537d254cc08c0be9c16bf2d5cc03fd04fc,f2a8ac53,point to pkgconfig content in /opt/cortex so stlink stuff works,"point to pkgconfig content in /opt/cortex so stlink stuff works
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1367276817,1367276817,cef4e3ee95037050ae859fb2fdc0a57373764bd8
55915098f2668e3a71568d51a9888dc4bdf40992,55915098,altosdroid: Add wish for persistent TBT and freq settings,"altosdroid: Add wish for persistent TBT and freq settings

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367104054,1367104054,38a680e1407a80ff8ad19e1a90dd4e87b22fe922
38a680e1407a80ff8ad19e1a90dd4e87b22fe922,38a680e1,altos: All STM ADC users need to declare HAS_ADC_TEMP,"altos: All STM ADC users need to declare HAS_ADC_TEMP

Otherwise we can't configure the ADC unit correctly at boot time

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367048256,1367048321,2717f14567c1fe1bb061024332c8022ef0e06049
2717f14567c1fe1bb061024332c8022ef0e06049,2717f145,altos: Build telemega-v0.3 by default,"altos: Build telemega-v0.3 by default

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1367048171,1367048311,cef4e3ee95037050ae859fb2fdc0a57373764bd8
cef4e3ee95037050ae859fb2fdc0a57373764bd8,cef4e3ee,Merge remote-tracking branch 'origin/master',"Merge remote-tracking branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366953770,1366953770,"fefc021045089ffd00d03e4c4e6cf42a13692828,f3ee7deb6b2fbae7e3c66fe0af0cba36378793f1"
fefc021045089ffd00d03e4c4e6cf42a13692828,fefc0210,altos: Add TeleMega v0.3 support,"altos: Add TeleMega v0.3 support

Includes adding SPI support to the MPU6000 driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366953686,1366953686,38206dd71e70565ded505a1e86257cd49b10bf9b
38206dd71e70565ded505a1e86257cd49b10bf9b,38206dd7,altos: Add MR25 everspin MRAM driver,"altos: Add MR25 everspin MRAM driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366950423,1366950423,4ed83e34d1163c7fae0a205528c60dc83973082a
4ed83e34d1163c7fae0a205528c60dc83973082a,4ed83e34,altos: Make SD card driver compile without radio support,"altos: Make SD card driver compile without radio support

The SD card driver blocks the radio when trying to access the card as
that operation appears very sensitive to RFI. This fix makes the
driver work when there *isn't* a radio driver in the same device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366950339,1366950339,90b0db1ae53182c94bf12d661446fc369d916366
f3ee7deb6b2fbae7e3c66fe0af0cba36378793f1,f3ee7deb,"document need for an ARM Cortex toolchain in /opt/cortex, point to build docs","document need for an ARM Cortex toolchain in /opt/cortex, point to build docs
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1366871199,1366871199,90b0db1ae53182c94bf12d661446fc369d916366
90b0db1ae53182c94bf12d661446fc369d916366,90b0db1a,Re-add telemega outline pictures,"Re-add telemega outline pictures

after the great renaming

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366663984,1366663984,e9a6c4f71e02bb0073dcd030de735904494da81f
e9a6c4f71e02bb0073dcd030de735904494da81f,e9a6c4f7,altos: Re-generate TeleMega bits,"altos: Re-generate TeleMega bits

Lost in the great megametrum rename

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366661703,1366662058,aa7eac32adf4c2cdf441991d02411758f2682d1e
aa7eac32adf4c2cdf441991d02411758f2682d1e,aa7eac32,name change from MegaMetrum to TeleMega,"name change from MegaMetrum to TeleMega
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1366657226,1366657226,8c05f608c8f103649c1e5ec0d5742621e233af78
8c05f608c8f103649c1e5ec0d5742621e233af78,8c05f608,Move cortex toolchain to /opt/cortex,"Move cortex toolchain to /opt/cortex

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366646796,1366646796,6f92ab336a258e8b1ddf58de33d6883251b9532d
6f92ab336a258e8b1ddf58de33d6883251b9532d,6f92ab33,altosdroid: Add request for sat images to AltosDroid Notebook,"altosdroid: Add request for sat images to AltosDroid Notebook

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366596290,1366596290,045da152fae82712b937bc81f02c9531e042cbe0
045da152fae82712b937bc81f02c9531e042cbe0,045da152,altosdroid: Add a few more Notebook entries,"altosdroid: Add a few more Notebook entries

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366595594,1366595594,27afe30176051fca816d85c1be265ac663ef851c
27afe30176051fca816d85c1be265ac663ef851c,27afe301,"altosdroid: Bump APK version, and re-upload.","altosdroid: Bump APK version, and re-upload.

Didn't re-build altoslib for the previous APK!

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366595435,1366595435,759376cd0aac61c5afce31aed27ef98aba791173
759376cd0aac61c5afce31aed27ef98aba791173,759376cd,altos: update .gitignore files,"altos: update .gitignore files

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366595413,1366595413,b4ffb3ed36fc8696603616bf5f31b07fb3829614
b4ffb3ed36fc8696603616bf5f31b07fb3829614,b4ffb3ed,document my snazzy new 4-pin to MM v0.1 debug cable,"document my snazzy new 4-pin to MM v0.1 debug cable
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1366523706,1366523706,45d638634e389bab61b0ee792420609eb8a9ad97
45d638634e389bab61b0ee792420609eb8a9ad97,45d63863,altosdroid: Add Notebook to track feature requests,"altosdroid: Add Notebook to track feature requests

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366515023,1366515023,2e28d3541b8da31ebef5a199baf8f544d238298e
2e28d3541b8da31ebef5a199baf8f544d238298e,2e28d354,libaltos: Delay after opening bluetooth device on linux,"libaltos: Delay after opening bluetooth device on linux

Writes immediately after the open disappear sometimes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366514188,1366514561,02a564bbc3a23b4f90685e8b29083ddb3e4b3563
02a564bbc3a23b4f90685e8b29083ddb3e4b3563,02a564bb,libaltos: Try Bluetooth open 5 times on EBUSY,"libaltos: Try Bluetooth open 5 times on EBUSY

After closing Bluetooth, it can take a second before the device is up
for another connection. Hang around retrying a few times.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366513501,1366514528,6348186397dbef6da912586cea58d6663c511501
6348186397dbef6da912586cea58d6663c511501,63481863,doc: Start filling in details about Altos Droid flight monitoring,"doc: Start filling in details about Altos Droid flight monitoring

This is almost all identical to AltosUI; I think we'll want to share
the two sections.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366512047,1366514429,0d49c16c6c33264952854b9f24bc737d92036449
0d49c16c6c33264952854b9f24bc737d92036449,0d49c16c,doc: Add a bunch of Altos Droid material to the docs,"doc: Add a bunch of Altos Droid material to the docs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366497495,1366514422,6055ee0b7fb99f1b41ece8ba912bdd201ea35b1b
6055ee0b7fb99f1b41ece8ba912bdd201ea35b1b,6055ee0b,"altosdroid: Release v1.2, push to play store.","altosdroid: Release v1.2, push to play store.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366512776,1366512776,49caac78786014d443d9c05f47b5eb3070ec9bd3
49caac78786014d443d9c05f47b5eb3070ec9bd3,49caac78,Merge branch 'altosdroid',"Merge branch 'altosdroid'
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366512667,1366512667,"5b7bbf183e558330d27702aa1bebf205f0e094aa,cbf38c557a2046b6d6af3a9aebc0cef8e0dc5f11"
cbf38c557a2046b6d6af3a9aebc0cef8e0dc5f11,cbf38c55,altosdroid: Make the service class implement locationlistener,"altosdroid: Make the service class implement locationlistener

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366512401,1366512401,c5b31a14e1ceeb9a33e0016f345832344d24ced7
c5b31a14e1ceeb9a33e0016f345832344d24ced7,c5b31a14,altosdroid: fix up 'send last' code.,"altosdroid: fix up 'send last' code.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366512247,1366512247,cc674d8f991a3a055236ad8b51fecd99080540e1
cc674d8f991a3a055236ad8b51fecd99080540e1,cc674d8f,altosdroid: check for mAltosVoice being null.,"altosdroid: check for mAltosVoice being null.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366512110,1366512110,7701e142f9e3a81c536c546c9a0abfb3ba709abc
7701e142f9e3a81c536c546c9a0abfb3ba709abc,7701e142,altosdroid: set tab height based on screen density.,"altosdroid: set tab height based on screen density.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366512088,1366512088,a9e02e32cb10e5b5f17cd555bb28fdc205ac3612
a9e02e32cb10e5b5f17cd555bb28fdc205ac3612,a9e02e32,altosdroid: Add filters for TeleBT bluetooth devices.,"altosdroid: Add filters for TeleBT bluetooth devices.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366512058,1366512058,b0d6e2000d1b48859f5a276a5af254cc1a6cc9ad
b0d6e2000d1b48859f5a276a5af254cc1a6cc9ad,b0d6e200,altosdroid: incorrect property syntax in pad xml,"altosdroid: incorrect property syntax in pad xml

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366512033,1366512033,d1ca6b5805cb5e934e013463448b75dd4a3c864f
d1ca6b5805cb5e934e013463448b75dd4a3c864f,d1ca6b58,altosdroid: whitespace and import tidyup,"altosdroid: whitespace and import tidyup

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1366512003,1366512003,ecfc8a08147cfd179b341475333d68a39c978f0f
ecfc8a08147cfd179b341475333d68a39c978f0f,ecfc8a08,altosdroid: Update distance/bearing on map tab,"altosdroid: Update distance/bearing on map tab

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366496210,1366496210,ff332e640b27c6be37dabef58ebac350ac2347b2
5b7bbf183e558330d27702aa1bebf205f0e094aa,5b7bbf18,improve text in telebt turn-on script,"improve text in telebt turn-on script
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1366482158,1366482158,87d6ed24f3650981ae1ff9bfdb0298d2c01e7575
ff332e640b27c6be37dabef58ebac350ac2347b2,ff332e64,Merge branch 'master' into droid-gps,"Merge branch 'master' into droid-gps
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366220465,1366220465,"b3000609e4010ff4d29debe72ea1866e775af539,87d6ed24f3650981ae1ff9bfdb0298d2c01e7575"
b3000609e4010ff4d29debe72ea1866e775af539,b3000609,altosdroid: Fix integer formatting in tabs,"altosdroid: Fix integer formatting in tabs

Was trying to use AltosDroid.number for integers, which didn't work as
it expected doubles.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366220334,1366220454,c2640c09c76ce32e471dcf6df83095d146bb39a2
87d6ed24f3650981ae1ff9bfdb0298d2c01e7575,87d6ed24,altosui: Disable main deploy setting for TeleGPS,"altosui: Disable main deploy setting for TeleGPS

Just like all of the other flight computer settings, disable the main
deploy altitude configuration for TeleGPS.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366159637,1366220405,a03aaaca60ccb4b44595e5e1c1047d07d8b6d60f
a03aaaca60ccb4b44595e5e1c1047d07d8b6d60f,a03aaaca,altosui: Handle broken network in map tile loading,"altosui: Handle broken network in map tile loading

Handle missing pngfiles in AltosSetMapCache by checking ImageIO.read
for null return.

Do incremental map tile downloading asynchronously so that the UI
doesn't lock up when the network is slow

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366158822,1366220394,5b041769dc926f0aa18072f46abca60b11ede44b
c2640c09c76ce32e471dcf6df83095d146bb39a2,c2640c09,altosdroid: Check for missing values,"altosdroid: Check for missing values

When displaying numbers, check for MISSING values and display nothing

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366147343,1366147343,d5a557004c00d1ae25da04dc63c78b816562a236
d5a557004c00d1ae25da04dc63c78b816562a236,d5a55700,Merge branch 'master' into droid-gps,"Merge branch 'master' into droid-gps
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366093593,1366093593,"6592a5be127a9c95d3b2e7d5aa6ffba71c6748b9,5b041769dc926f0aa18072f46abca60b11ede44b"
5b041769dc926f0aa18072f46abca60b11ede44b,5b041769,altosui: remove debug message from AltosFlightUI,"altosui: remove debug message from AltosFlightUI

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366093555,1366093585,eba3aa949decacd5592472a3cda920aa6a06d96f
6592a5be127a9c95d3b2e7d5aa6ffba71c6748b9,6592a5be,Merge branch 'master' into droid-gps,"Merge branch 'master' into droid-gps
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366093184,1366093184,"c6f85cb149dff8732104521cb62b355e8a0d7148,eba3aa949decacd5592472a3cda920aa6a06d96f"
eba3aa949decacd5592472a3cda920aa6a06d96f,eba3aa94,altoslib: Check for null state.gps before accessing it in eeprom records,"altoslib: Check for null state.gps before accessing it in eeprom records

Used to be we'd set state.gps to garbage before seeing the first GPS
record; now we leave it null, which will cause crashes for code that
doesn't expect it. The code for reading and replaying eeprom data was
not checking and was nicely crashing as a result.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1366092862,1366092862,58dd4b88fe738e005a13dfd69651853ea7f79205
c6f85cb149dff8732104521cb62b355e8a0d7148,c6f85cb1,Merge branch 'master' into droid-gps,"Merge branch 'master' into droid-gps
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365994930,1365994930,"3cd8ff18a7546c1e251747ba26240cb130003ef1,58dd4b88fe738e005a13dfd69651853ea7f79205"
58dd4b88fe738e005a13dfd69651853ea7f79205,58dd4b88,micropeak: Oops. Lost the call to actually start downloading data,"micropeak: Oops. Lost the call to actually start downloading data

Lost when adding the 'help' text somehow; presumably a debugging issue.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365976492,1365976492,778daf0ccbd8a073da33497e33c29400d0ecc464
3cd8ff18a7546c1e251747ba26240cb130003ef1,3cd8ff18,altosdroid: Update UI even if no telem has been received. Center map.,"altosdroid: Update UI even if no telem has been received. Center map.

This allows the receiver location to be displayed even when telemetry
is not.

Center the map on the first valid location, either receiver or
rocket. Update center if a significantly more precise location is received.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365880398,1365880398,192bc28fbe2a8613d0b42e4fb3f7674a1a50abc7
192bc28fbe2a8613d0b42e4fb3f7674a1a50abc7,192bc28f,altosdroid: Get rid of a couple of startup messages,"altosdroid: Get rid of a couple of startup messages

These are just annoying

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365878723,1365878723,e4b6fc3238ad9911fd40ef25accf82a401cb190f
e4b6fc3238ad9911fd40ef25accf82a401cb190f,e4b6fc32,altosdroid: Show our position in the map tab. Squeeze to fit phones,"altosdroid: Show our position in the map tab. Squeeze to fit phones

Shrink everything to fit on phones, then add phone location to the map tab

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365878354,1365878354,2f7015afcca7c6042365d2124d3a5b7219e8e588
2f7015afcca7c6042365d2124d3a5b7219e8e588,2f7015af,Merge branch 'master' into droid-gps,"Merge branch 'master' into droid-gps
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365875464,1365875464,"5077f3ad1967a33712e9ff411e3b2a0b4e1a5c4a,778daf0ccbd8a073da33497e33c29400d0ecc464"
5077f3ad1967a33712e9ff411e3b2a0b4e1a5c4a,5077f3ad,altosdroid: Shrink text so it fits on my phone,"altosdroid: Shrink text so it fits on my phone

Yes, this is a hack; will try to figure out how to make it resizeable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365875426,1365875426,19ef593be9ff3f329e44472735d90c80129d2795
778daf0ccbd8a073da33497e33c29400d0ecc464,778daf0c,Windows: Add all of the AltusMetrum USB IDs to telemetrum.inf,"Windows: Add all of the AltusMetrum USB IDs to telemetrum.inf

This should make Windows load the driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365874754,1365874754,25c01719f17be8da73a859867c14df0fc29b5441
25c01719f17be8da73a859867c14df0fc29b5441,25c01719,libaltos: Retry Windows serial port open five times,"libaltos: Retry Windows serial port open five times

Maybe this helps?

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365743763,1365809869,679401fff981b675dd5a188c64e8940254588800
679401fff981b675dd5a188c64e8940254588800,679401ff,altos: Make sure the packet format is set reasonably for radio test,"altos: Make sure the packet format is set reasonably for radio test

Dunno if this matters, but it might as well be set reasonably

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365761356,1365761356,1430c48cfef1ef21831205f4fadd26ca6c7f5dbe
1430c48cfef1ef21831205f4fadd26ca6c7f5dbe,1430c48c,altoslib: Remove spurious debug message,"altoslib: Remove spurious debug message

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365753359,1365760745,cdbf8053658c71a657005af68202023d0b4af1fe
cdbf8053658c71a657005af68202023d0b4af1fe,cdbf8053,altos: Don't include bufio debug commands by default,"altos: Don't include bufio debug commands by default

We shouldn't need these

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365759757,1365759757,c54bd59780275ece87eafb8143cf0637b35e794c
c54bd59780275ece87eafb8143cf0637b35e794c,c54bd597,altos: Stick a mutex around FAT operations,"altos: Stick a mutex around FAT operations

This allows the command line and logging operations to occur safely in parallel

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365759315,1365759444,7e6e2ca60c65a4fe2bee0bd8b9b89d45a7dbcfb3
7e6e2ca60c65a4fe2bee0bd8b9b89d45a7dbcfb3,7e6e2ca6,altos: Delay while waking up SD card a bit,"altos: Delay while waking up SD card a bit

This seems to make bringing the card from idle to ready mode more
reliable. If you spam the card with requests, it will eventually
whinge and shut down communications.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365756933,1365756933,1f88d345c407e409611448d0e8813ab5a6de0a0b
19ef593be9ff3f329e44472735d90c80129d2795,19ef593b,altosdroid: The Map already draws our location; no receiver marker needed,"altosdroid: The Map already draws our location; no receiver marker needed

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365753895,1365753895,1ec6fb3b9cec0f864d6e65d0cc6b4dd42edd3e16
1ec6fb3b9cec0f864d6e65d0cc6b4dd42edd3e16,1ec6fb3b,altosdroid: Check state.gps != null before using it,"altosdroid: Check state.gps != null before using it

Avoid crashing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365753636,1365753636,02243463adbdfb860f69580f544da9026dc7cbd4
02243463adbdfb860f69580f544da9026dc7cbd4,02243463,altoslib: Remove spurious debug message,"altoslib: Remove spurious debug message

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365753359,1365753359,9212ce268f3a4a9f3f019f23f6eef8b57207d340
9212ce268f3a4a9f3f019f23f6eef8b57207d340,9212ce26,"altosdroid: Compute course from android device to rocket, display it","altosdroid: Compute course from android device to rocket, display it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365751164,1365751164,f02bb1df132443fc27b69f23f382ea87e610f533
f02bb1df132443fc27b69f23f382ea87e610f533,f02bb1df,altoslib: Add range and elevation to AltosGreatCircle,"altoslib: Add range and elevation to AltosGreatCircle

Move the computations from AltosState here so they can be re-used elsewhere.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365749807,1365749936,9a8cc23de5776ea3fa2bdc96cbe63422eb555d63
9a8cc23de5776ea3fa2bdc96cbe63422eb555d63,9a8cc23d,altosdroid: Mike was right -- only need one LocationListener,"altosdroid: Mike was right -- only need one LocationListener

I mis-read the docs and thought we needed two listeners, one for GPS
and one for network position. Looks like we don't

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365745154,1365745154,83ce46c73b0e876f9f630943af19ea97b3a21d3c
83ce46c73b0e876f9f630943af19ea97b3a21d3c,83ce46c7,altosdroid: Send LOCATION and CRC_ERROR messages to UI.,"altosdroid: Send LOCATION and CRC_ERROR messages to UI.

This collects all position changes and crc error increments and sends
them along to the UI for presentation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365744876,1365744876,1f88d345c407e409611448d0e8813ab5a6de0a0b
1f88d345c407e409611448d0e8813ab5a6de0a0b,1f88d345,altosdroid: Hook up the position listeners,"altosdroid: Hook up the position listeners

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365743785,1365743785,81730670b6848bebb2c6a8ac7813419112f2779a
81730670b6848bebb2c6a8ac7813419112f2779a,81730670,doc: Add an outline of an AltosDroid chapter,"doc: Add an outline of an AltosDroid chapter

Not much content yet, but I think this is pretty much the sections we need

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365544405,1365544405,07fb6efc54b8575627572a2113bdbc62914bafb5
07fb6efc54b8575627572a2113bdbc62914bafb5,07fb6efc,altoslib/altosui: Adapt monitor idle to new AltosListenerState,"altoslib/altosui: Adapt monitor idle to new AltosListenerState

Move the receiver battery monitoring to the new spot

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365493105,1365493105,398c02b945a58634c8932f07df2c2be8438da7d1
398c02b945a58634c8932f07df2c2be8438da7d1,398c02b9,altoslib/altosui: Carry receiver status around in AltosListenerState,"altoslib/altosui: Carry receiver status around in AltosListenerState

This moves the crc_errors into the new structure and adds a receiver
battery voltage value there as well. Now the receiver status can be
monitored separately from the flight status. That also means that code
receiving state updates should be prepared to accept missing listener
or flight state values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365492485,1365492636,08eb1e3e1abb1aa4f5ea92b781a2ff8f480006c5
08eb1e3e1abb1aa4f5ea92b781a2ff8f480006c5,08eb1e3e,altos: Monitor battery voltage on telebt,"altos: Monitor battery voltage on telebt

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365468138,1365492636,6ba0df9b440b69bf5bc5f4e435b431adf303fee2
6ba0df9b440b69bf5bc5f4e435b431adf303fee2,6ba0df9b,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1365465757,1365465757,"1d3ab47d82fe005ab6854386c0ffa5771ee49bf6,28adf5541354715b185dbb45b28c97c7d9cf8bcd"
28adf5541354715b185dbb45b28c97c7d9cf8bcd,28adf554,altos: Create telebt-v1.0 product. Remove old telebt products,"altos: Create telebt-v1.0 product. Remove old telebt products

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365464920,1365465198,0c0dc761095a5a77c87c3b4dcd1d42a4e79f6604
1d3ab47d82fe005ab6854386c0ffa5771ee49bf6,1d3ab47d,altos: Create telebt-v1.0 product. Remove old telebt products,"altos: Create telebt-v1.0 product. Remove old telebt products

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365464920,1365464920,0c0dc761095a5a77c87c3b4dcd1d42a4e79f6604
0c0dc761095a5a77c87c3b4dcd1d42a4e79f6604,0c0dc761,altos: Try RDF mode for TX calibration,"altos: Try RDF mode for TX calibration

Trying to get the radio to stop modulating the carrier when
calibrating the radio, we'll try RDF mode which says no preamble or
sync data. This might shift the frequency though?

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1365317316,1365317316,30c397296bcdaceb4c2c9d0509dc591b489ece02
30c397296bcdaceb4c2c9d0509dc591b489ece02,30c39729,altosui: Graph TeleMini flights without crashing,"altosui: Graph TeleMini flights without crashing

Adding maps to the graph UI failed to check for missing GPS data in a
couple of places causing crashes when fed a TeleMini file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364949846,1364949846,67b8bdb4ea8c22688d4f18416593346585595cfa
67b8bdb4ea8c22688d4f18416593346585595cfa,67b8bdb4,altosui: Display current GPS in 'pad' tab for 'startup' staten,"altosui: Display current GPS in 'pad' tab for 'startup' staten

This is the state for telegps, so just display the current GPS info as
we don't know where it started at.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364948980,1364948980,907cc6c50755c0d19b93c15678d6f3022a6ee10b
907cc6c50755c0d19b93c15678d6f3022a6ee10b,907cc6c5,altosui: Hide flight-related tabs for telegps,"altosui: Hide flight-related tabs for telegps

Products without a flight state don't need ascent/descent/landed tabs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364946485,1364946485,e747156d0ea4b62eea30a8f486ee105ee35dcaf5
e747156d0ea4b62eea30a8f486ee105ee35dcaf5,e747156d,altosui: Don't display missing sensor data,"altosui: Don't display missing sensor data

For devices without sensors, don't display temperature, barometric and
accelerometer-derived values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364946427,1364946427,997cdef3fe04acdd566d287e70981f7b7934d0c8
997cdef3fe04acdd566d287e70981f7b7934d0c8,997cdef3,altoslib: Make any incoming telem packet update the RSSI value,"altoslib: Make any incoming telem packet update the RSSI value

Every packet has RSSI info, so use the latest one available. This
makes telegps RSSI available as it never sends sensor packets (having
no sensors).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364946298,1364946298,0cd203e418e73a1f11460425985b7575c2f0a76c
0cd203e418e73a1f11460425985b7575c2f0a76c,0cd203e4,Set telegps USB id to 0025,"Set telegps USB id to 0025

It was accidentally using the same ID as megadongle...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364946233,1364946233,96c32125a780ad6b39c015f4abbae07fead68582
96c32125a780ad6b39c015f4abbae07fead68582,96c32125,altos: Shorten SD initialization timeouts.,"altos: Shorten SD initialization timeouts.

This makes failure when no card is present much quicker.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364946089,1364946089,985df526ec142258ef990d0b55b0a14e13c099b4
985df526ec142258ef990d0b55b0a14e13c099b4,985df526,altos: Horrible kludge -- disable radio while talking with SD card,"altos: Horrible kludge -- disable radio while talking with SD card

The SD card really doesn't like the RFI generated by our enormous
radio, so just lock the radio out while working with the card.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364809175,1364809175,14c63f94f36a95272d91695039abf54efb423a91
14c63f94f36a95272d91695039abf54efb423a91,14c63f94,altos: Add defines for the specific pins used for telegps SPI,"altos: Add defines for the specific pins used for telegps SPI

These aren't needed at this point, but who knows?

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364807414,1364807414,b34370cea662eb245e43aca20a6650b84b55ef6f
b34370cea662eb245e43aca20a6650b84b55ef6f,b34370ce,altos: Retry SD card I/O. Use time for timeouts instead of counts,"altos: Retry SD card I/O. Use time for timeouts instead of counts

Sometimes I/O operations may fail; give the card a chance and retry
the operation in case it works the next time.

Replace the loop counts with loops that check the clock so that
they'll have consistent timeouts even if the CPU or SPI speed changes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364807298,1364807298,b3a41bed39ec1abfc3ab74e9be7dd393e975542b
b3a41bed39ec1abfc3ab74e9be7dd393e975542b,b3a41bed,altos: Provide build hooks for sampling profiler in telegps,"altos: Provide build hooks for sampling profiler in telegps

Might prove useful if the CPU is ever doing anything?

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364807226,1364807226,fae116fbebb9658fe15690ff43dfe8568a58c2a9
fae116fbebb9658fe15690ff43dfe8568a58c2a9,fae116fb,altos: Add a FAT test that re-writes the same file multiple times,"altos: Add a FAT test that re-writes the same file multiple times

This caught a bunch of FAT cluster chain allocation bugs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364807163,1364807163,79d01a571935138b24b86a7181307ee014d248ed
79d01a571935138b24b86a7181307ee014d248ed,79d01a57,altos: Support open on multiple simultaneous FAT files,"altos: Support open on multiple simultaneous FAT files

Need to be able to see the contents of a log file, even if the logger
is running.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364807037,1364807037,0838b6c8797b84cf8df8f92ee20fb6ae79e434d7
0838b6c8797b84cf8df8f92ee20fb6ae79e434d7,0838b6c8,altos: Make sure FAT cluster allocation works for size zero files,"altos: Make sure FAT cluster allocation works for size zero files

There were some rounding errors mis-computing the number of clusters
needed, and the logic to figure out how to re-connect a chain was broken.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364806934,1364806934,76bd204de744c34e5cbf6efa93adb89bc2cb08b3
76bd204de744c34e5cbf6efa93adb89bc2cb08b3,76bd204d,altos: let FAT tracing work in ao_fat_test as needed,"altos: let FAT tracing work in ao_fat_test as needed

This allows the FAT DBG hooks to be enabled even if some other module
turned DBG off.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364806821,1364806821,a764bf06d0975cbf1620b079351c7437053ea1a8
a764bf06d0975cbf1620b079351c7437053ea1a8,a764bf06,altos: Flush the on-board mega log after every sample interval.,"altos: Flush the on-board mega log after every sample interval.

SPI flash parts don't need flushing, but the SD card does. Make sure
the SD card contents are sane after every logging interval has passed
by flushing all dirty blocks to the device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364806717,1364806717,c2de64b10894b366398a8b37ebd2305d9be46d46
c2de64b10894b366398a8b37ebd2305d9be46d46,c2de64b1,altos: Create the log file if it doesn't already exist,"altos: Create the log file if it doesn't already exist

open will return failure unless the file already exists.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364771487,1364771487,659a6915f5ba5129096e55ccc04c975d216546ae
659a6915f5ba5129096e55ccc04c975d216546ae,659a6915,altos: Make ao_fat_readdir return real error values instead of 1/0,"altos: Make ao_fat_readdir return real error values instead of 1/0

This way, we can distinguish between 'something bad happened' and
'you're at the end of the directory'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364771433,1364771433,182ceaac7d91dc6e9ebac6455d5de0c10687796b
182ceaac7d91dc6e9ebac6455d5de0c10687796b,182ceaac,altos: Increase SD card timeout at startup time,"altos: Increase SD card timeout at startup time

Sometimes the SD card takes 'a while' to go into idle mode at first
power up. Just hang around waiting for a long time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364763316,1364763316,d813566cdc4d43a43ed988dde4a3ceeccf24efe6
d813566cdc4d43a43ed988dde4a3ceeccf24efe6,d813566c,altos: Fix command-line FAT filename parsing,"altos: Fix command-line FAT filename parsing

Pad extension with spaces

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364759201,1364759201,db01557ce493c435db177fda78653697ba2afa51
db01557ce493c435db177fda78653697ba2afa51,db01557c,ao-tools/ao-stmload: Be smarter about ELF parsing. Retry open on failure.,"ao-tools/ao-stmload: Be smarter about ELF parsing. Retry open on failure.

Figuring out what goes where is tricky; turns out we want to pull all
of the sections that map inside any program area that is supposed to
be loaded from the file.

So, we walk the program headers, then walk all of the section headers
looking for those that suck data from the same portion of the
file. Compute where in ROM each relevant section goes and build a full
ROM image in memory using that.

This patch also adds code to close and re-open the device if the first
open failed to do what we want. Much nicer to have the computer figure
out when the open succeeded rather than having people re-run the app.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364029838,1364758957,144b44e13ce3361ff59cbb555e84d542455a4e17
144b44e13ce3361ff59cbb555e84d542455a4e17,144b44e1,altos: Unmount file system after each testing pass in ao_fat_test,"altos: Unmount file system after each testing pass in ao_fat_test

Otherwise, we use stale data and 'bad things' happen.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364758772,1364758772,a70139c9a8a177df8f20f525703b13c0aec0fbc7
a70139c9a8a177df8f20f525703b13c0aec0fbc7,a70139c9,altos: Don't add fat commands when building ao_fat_test,"altos: Don't add fat commands when building ao_fat_test

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364758177,1364758177,8b2f211758dfa97230a730b8c4b31e0e711c19c9
8b2f211758dfa97230a730b8c4b31e0e711c19c9,8b2f2117,altos/stm: Always check for idle IN buffer before sending,"altos/stm: Always check for idle IN buffer before sending

Unlike the AVR and CC1111 USB drivers, the STM usb driver queues IN
bytes in a local buffer instead of in the driver; this means that the
driver is queuing bytes while the previous IN packet is queued for the
host, which allows for overlapping execution.

It also means that when the local buffer is full, we must check to see
if the host has picked up the previous IN packet before trying to
queue another IN packet for transmission. This is done by always
waiting for the IN buffer to be ready before sending data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364162697,1364757878,de199601a177fc2d45ad9bd7357111111844d40a
de199601a177fc2d45ad9bd7357111111844d40a,de199601,altos/stm: Add debugging mechanism to STM USB driver,"altos/stm: Add debugging mechanism to STM USB driver

This adds a pile of debugging hooks to the USB driver to try and
isolate various lockup-related issues. It's all disabled by default,
of course.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364162639,1364757868,4f1f3e836393304434130d362771a39f6f8f859a
4f1f3e836393304434130d362771a39f6f8f859a,4f1f3e83,altos: Do not release interrupts from any pollchar function,"altos: Do not release interrupts from any pollchar function

getchar relies on interrupts being blocked across the pollchar calls
and into the sleep call or it may go to sleep with data pending.

This prefixes all pollchar functions with _ to indicate that they are
to be called with interrupts blocked and eliminates all interrupt
manipulation calls from within the pollchar functions.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364162420,1364757864,7afcec1a1dce140dfa569469df4ef42ed407a742
7afcec1a1dce140dfa569469df4ef42ed407a742,7afcec1a,altos: Add sdcard read/write tracing,"altos: Add sdcard read/write tracing

This just dumps info in trace mode about read and write commands

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364757811,1364757811,a0595d94c7deea29d9e3d4bcbc106b9bed5ee103
a0595d94c7deea29d9e3d4bcbc106b9bed5ee103,a0595d94,altos: Move fat mount information to separate command.,"altos: Move fat mount information to separate command.

This makes the mount report precise error information and then prints
that with the 'M' command.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364757748,1364757748,a0628541e1bfc3e4a122cc824188ed53fddf733e
a0628541e1bfc3e4a122cc824188ed53fddf733e,a0628541,altos: Disable CC115L debug commands,"altos: Disable CC115L debug commands

now that it appears to work, leave these disabled by default

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364757663,1364757663,d8826b1ad5487de9345b7dcaf6c75a45117ff538
d8826b1ad5487de9345b7dcaf6c75a45117ff538,d8826b1a,altos: Add SD card writing function,"altos: Add SD card writing function

Now that the FAT code seems to be operational, go back and add
SD writing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364751347,1364751347,649999863c7228ead0225968752d068dc0d30091
649999863c7228ead0225968752d068dc0d30091,64999986,altos: Add logging and telem to telegps,"altos: Add logging and telem to telegps

This turns on telemetry, APRS, RDF and data logging for telegps.

Data is logged as soon as GPS has a date to create the right
filename, using files of the form YYYYMMDD.LOG which just barely fits
in a FAT filename.

Telemetry/RDF/APRS are all separately controllable.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364632429,1364632429,b3d8956df3a3ecb3918b5db4d78b057d68541c33
b3d8956df3a3ecb3918b5db4d78b057d68541c33,b3d8956d,altos: Export ao_fat_sync and ao_fat_full functions,"altos: Export ao_fat_sync and ao_fat_full functions

ao_fat_sync() flushes the bufio data to disk along with any fsinfo
changes. ao_fat_full() returns whether the file system is full.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364632350,1364632350,7455a892e8bf5402e7ff2c4bd2ddad05dfe76638
7455a892e8bf5402e7ff2c4bd2ddad05dfe76638,7455a892,altos: Lock cc115l radio mutex when using global radio values,"altos: Lock cc115l radio mutex when using global radio values

This moves the locking up above the global state variable uses so that
multiple radio users (as if we had any) won't collide.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364632272,1364632272,bd32140df2a595ce66d603b98516bae519327c5d
bd32140df2a595ce66d603b98516bae519327c5d,bd32140d,altos: Configure cc115l sync byte count for each radio mode,"altos: Configure cc115l sync byte count for each radio mode

two sync bytes for packet mode, disable sync for rdf/aprs mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364632218,1364632218,93a9aa703a0173e13b327ed432e6d52e90ebfa1b
93a9aa703a0173e13b327ed432e6d52e90ebfa1b,93a9aa70,altos: Get CC115L radio working.,"altos: Get CC115L radio working.

This involved figuring out which GPIO signal would reliably indicate
that the transmitter was finished; I ended up using the PA_PD bit for
this.

This also converts all of the radio users to the long packet support
as the CC115L has only a 64-byte fifo, not large enough to hold either
an RDF tone or a regular AltOS telemetry packet.

This also renames the public API for sending APRS packets from
ao_radio_send_lots to ao_radio_send_aprs, which is at least more
accurate. The workings of that API haven't changed, just the name.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364601936,1364601936,9aeed244879f90b5b6dab1c7ca095cc001b03fe5
9aeed244879f90b5b6dab1c7ca095cc001b03fe5,9aeed244,altos: Add temporary RF power settings,"altos: Add temporary RF power settings

These expose the raw cc115l and rfpa0133 register settings so that we
can calibrate them against measured power outputs.

I've tested them to verify that they change how much power the board
consumes, so they're clearly doing something...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364584439,1364584439,86e1039e14304ac13db540f2ee3afd4ff170b8b4
86e1039e14304ac13db540f2ee3afd4ff170b8b4,86e1039e,altos: Add FAT32 support. And lots more testing.,"altos: Add FAT32 support. And lots more testing.

Generalizes the FAT code to deal with either 16-bit or 32-bit
versions. The testing code now runs over a variety of disk images to
check for compatibility on all of them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364542343,1364542343,44e418bbecd3a3deae942803141cf115d92f29d2
44e418bbecd3a3deae942803141cf115d92f29d2,44e418bb,altos: seek forward on FAT cluster chain instead of restarting,"altos: seek forward on FAT cluster chain instead of restarting

This improves sequential file performance by taking advantage of any
previous cached cluster/offset pair and starting from there when the
cluster changes rather than starting from scratch at the begining again.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364517494,1364517494,8101e4af199a3d79bff434f788cce9f97aeac53a
8101e4af199a3d79bff434f788cce9f97aeac53a,8101e4af,altos: Add a simple cache for the FAT position->cluster computation,"altos: Add a simple cache for the FAT position->cluster computation

This improves read/write performance with large files by not
re-walking the cluster chain for every operation

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364515022,1364515022,c7b606e93a4e4fbd2c0e883352ed74619ee24cf7
c7b606e93a4e4fbd2c0e883352ed74619ee24cf7,c7b606e9,altos: Clean up fat driver API. Improve fat test,"altos: Clean up fat driver API. Improve fat test

Make FAT api provide reasonable error return values, change the tests
to write and then read a pile of files, checking that the contents are
correct (using md5sum).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364511924,1364511924,d1fe0654b45cc8f944394308cf29945b537becc4
d1fe0654b45cc8f944394308cf29945b537becc4,d1fe0654,altos: Add sanity checking to busy counts in bufio driver,"altos: Add sanity checking to busy counts in bufio driver

Make sure the busy counts don't underflow or overflow.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364511335,1364511335,6fe32e0fc407522101e805cf2653253cb3cee291
6fe32e0fc407522101e805cf2653253cb3cee291,6fe32e0f,altosui: Don't deref null pyros when saving altimeter config,"altosui: Don't deref null pyros when saving altimeter config

The check for no pyro config is to compare npyros against zero rather
than check the length of the pyros array as the latter may be null.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364447513,1364447513,985cd22b941415b1ae2709ae1ab6b60c3d815ec1
985cd22b941415b1ae2709ae1ab6b60c3d815ec1,985cd22b,"altos: Use FTDW, clear DATA bit. Disable backup write protection","altos: Use FTDW, clear DATA bit. Disable backup write protection

The newer(?) chips in telegps didn't like the previous programming
scheme, so go back to fixed time for write, which does an implicit
erase before every write. Also clear the DATA bit, which is only
needed for double word erase/programming.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364435022,1364435022,4a68878a66508e6f1523cd813b2e37bcf2e90ab3
4a68878a66508e6f1523cd813b2e37bcf2e90ab3,4a68878a,"altos: Teleshield has a radio, set HAS_RADIO in ao_pins.h","altos: Teleshield has a radio, set HAS_RADIO in ao_pins.h

Otherwise, lots of random code won't know about the radio..

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364372724,1364372724,561175afebc63ec3d2f8f7305235c9812ceaf501
561175afebc63ec3d2f8f7305235c9812ceaf501,561175af,altos: Add new panic flag for bufio misuse,"altos: Add new panic flag for bufio misuse

Allow the bufio code to signal a fatal error if someone misuses the API

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364372104,1364372104,bd43955ff0c4d39a685b79e91cb62898a5f1b875
bd43955ff0c4d39a685b79e91cb62898a5f1b875,bd43955f,altos: Hook up the FAT16 and SD card support to telegps,"altos: Hook up the FAT16 and SD card support to telegps

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364372055,1364372055,e14834817f78a04b4d9b44a8373119dffd42c966
e14834817f78a04b4d9b44a8373119dffd42c966,e1483481,altos: Add SDCARD and FAT16 filesystem support,"altos: Add SDCARD and FAT16 filesystem support

This adds a fairly primitive FAT16 file system implementation
along with support for SD cards.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364371953,1364371953,747114786512339211d4981a7828c8c6f1f46c20
747114786512339211d4981a7828c8c6f1f46c20,74711478,altos: Fix config to not abort radio recv when no recv is available,"altos: Fix config to not abort radio recv when no recv is available

Use the new radio recv define to skip disabling the receiver when
there isn't a receiver.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364333317,1364333317,237e853b820b01409562b93b82684e5147286806
237e853b820b01409562b93b82684e5147286806,237e853b,altos: Allow radio recv and xmit to be separately configured,"altos: Allow radio recv and xmit to be separately configured

The CC115L is xmit only, so split out the functions and provide
defines to check for xmit or recv separately as needed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364333266,1364333266,4d187460bdcb97bf6d0a3550e4e03c4c223e4cc1
4d187460bdcb97bf6d0a3550e4e03c4c223e4cc1,4d187460,altos/stm: Ensure SPI always sends 0xff during receive,"altos/stm: Ensure SPI always sends 0xff during receive

SD cards require 0xff when fetching data

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364333198,1364333198,136ca0922e968d650e9e420a47d228611a3cb45e
136ca0922e968d650e9e420a47d228611a3cb45e,136ca092,altos: Improve CC115L driver. Generates carrier now.,"altos: Improve CC115L driver. Generates carrier now.

Still no data, but at least the carrier comes up on frequency now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364333148,1364333148,4889b33af9700b9d872364f0cadaf9425cf84a7d
4889b33af9700b9d872364f0cadaf9425cf84a7d,4889b33a,altos: Add RFPA0133 amplifier driver,"altos: Add RFPA0133 amplifier driver

No configuration of power level yet, just the bare driver.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364333085,1364333085,6fe1e32f5361e901b88b63a30f070e67d460ada1
6fe1e32f5361e901b88b63a30f070e67d460ada1,6fe1e32f,altos/telegps: Hook up cc115l driver,"altos/telegps: Hook up cc115l driver

Doesn't actually do anything yet, but should initialize the chip at least

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364194334,1364194334,4ddfb3ea07c2073f8c4d79feaf262c9fb910cfce
4ddfb3ea07c2073f8c4d79feaf262c9fb910cfce,4ddfb3ea,altos: Add cc115l driver (untested),"altos: Add cc115l driver (untested)

Includes support for sending telemetry, RDF and APRS tones

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1364194271,1364194271,15bc83a0eaaa9a43d67fdc3e9f412d5b2c1f06dd
15bc83a0eaaa9a43d67fdc3e9f412d5b2c1f06dd,15bc83a0,ao-tools: Make library support µPusb,"ao-tools: Make library support µPusb

Set baud rate to 9600, look for FTDI-style names

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1363846957,1363846957,50dd268a715224a01f8a6b481670a4ae6621cb28
50dd268a715224a01f8a6b481670a4ae6621cb28,50dd268a,Add telegps initial version,"Add telegps initial version

Just lights up the GPS and USB

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1363846897,1363846897,548cf57d5a5ea323bbfc3605b44c23fc48dec96b
548cf57d5a5ea323bbfc3605b44c23fc48dec96b,548cf57d,ao-tools: add ao-dump-up,"ao-tools: add ao-dump-up

Dumps out a µP log. Useful for µPusb bring-up

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1363669968,1363669968,d171d10d97307a1a1a62e660e9194121b79a09be
d171d10d97307a1a1a62e660e9194121b79a09be,d171d10d,micropeak: Improve download docs and UI,"micropeak: Improve download docs and UI

Add text explaining that the LED and phototransistor must be
touching to both the doc and the UI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1363051015,1363051015,90ee11542b111befa0e96e27292dc548e5c37396
90ee11542b111befa0e96e27292dc548e5c37396,90ee1154,Merge remote-tracking branch 'mjb/altosdroid',"Merge remote-tracking branch 'mjb/altosdroid'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362940986,1362940986,"97efce5f7ff227aaa8990529217d3d10db3443dc,d7973de32adff5402844cc1e1da3eced05265074"
97efce5f7ff227aaa8990529217d3d10db3443dc,97efce5f,altos: re-enable optimization for stm-demo. remove unused bits,"altos: re-enable optimization for stm-demo. remove unused bits

This makes stm-demo run on the discovery board again.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362940909,1362940909,72c5b1429bdfd6e9d2185bad7d0adb281fdf659a
d7973de32adff5402844cc1e1da3eced05265074,d7973de3,altosdroid: Add map polyline between pad and rocket,"altosdroid: Add map polyline between pad and rocket

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362911306,1362911306,b691fc48f5e879045e68e070162af56cd08f03b4
b691fc48f5e879045e68e070162af56cd08f03b4,b691fc48,altosdroid: Add rocket and pad map markers,"altosdroid: Add rocket and pad map markers

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362911248,1362911248,b7c82b867b12ca016164725f3736bc5b55048999
b7c82b867b12ca016164725f3736bc5b55048999,b7c82b86,altosdroid: programmatically create map fragment,"altosdroid: programmatically create map fragment

* Allows reliable fetching of a GoogleMap handle.
* Set map options, initial location (NCR North for now, temporarily)
* Add some info fields below map, and update them accordingly

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362901213,1362901213,8adadf6bd2ba623642675e4beafac4ac98b1916d
8adadf6bd2ba623642675e4beafac4ac98b1916d,8adadf6b,Merge branch 'master' into altosdroid,"Merge branch 'master' into altosdroid
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362900296,1362900296,"d029acad6a992be9b7b4498e70605f8a1e1a4ef6,0c0c6d60cdce39582fa5350e9b016a08e76f27a1"
0c0c6d60cdce39582fa5350e9b016a08e76f27a1,0c0c6d60,altosdroid: Add SDK checks to configure.ac,"altosdroid: Add SDK checks to configure.ac

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362900255,1362900255,c2d966a8ca9dcf6ccf5c268c616cf1384d45002d
c2d966a8ca9dcf6ccf5c268c616cf1384d45002d,c2d966a8,altosdroid: adjust clean targets to get rid of automake warning,"altosdroid: adjust clean targets to get rid of automake warning

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362900171,1362900171,988e9079e20133554acfecc74a109195688c2752
988e9079e20133554acfecc74a109195688c2752,988e9079,ao-tools: Add ao-edit-telem to .gitignore,"ao-tools: Add ao-edit-telem to .gitignore

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362900129,1362900129,72c5b1429bdfd6e9d2185bad7d0adb281fdf659a
d029acad6a992be9b7b4498e70605f8a1e1a4ef6,d029acad,Merge branch 'master' into altosdroid,"Merge branch 'master' into altosdroid
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362895621,1362895621,"eba7b2ef8ef23bdb61b0390e47be6f27ffde31dc,72c5b1429bdfd6e9d2185bad7d0adb281fdf659a"
72c5b1429bdfd6e9d2185bad7d0adb281fdf659a,72c5b142,ao-tools: Add ao-edit-telem,"ao-tools: Add ao-edit-telem

This lets you edit a telemetry file. The only current editing
available is to change the pad location, allowing a flight to be
replayed anywhere in the world.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362890452,1362890452,9b460d38bc2685bca7f530b7749c0e0381f6264c
9b460d38bc2685bca7f530b7749c0e0381f6264c,9b460d38,ao-tools/lib: Add cc_telemetry_unparse,"ao-tools/lib: Add cc_telemetry_unparse

This takes a telemetry structure and generates a string version

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362890371,1362890371,0803da851e2e061affc172fdde6301652d1be755
0803da851e2e061affc172fdde6301652d1be755,0803da85,altosui: Add N/S and E/W to info table lat/lon values,"altosui: Add N/S and E/W to info table lat/lon values

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362890258,1362890258,84d35e4cbd7ea2f681c43496b9b9db84f9dd923f
eba7b2ef8ef23bdb61b0390e47be6f27ffde31dc,eba7b2ef,altosdroid: fix side-to-side scrolling in map tab,"altosdroid: fix side-to-side scrolling in map tab

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362724892,1362724892,e0d9128b7219b4c8ee68245a44b3428e796ca2f1
84d35e4cbd7ea2f681c43496b9b9db84f9dd923f,84d35e4c,Merge remote-tracking branch 'mjb/altosdroid',"Merge remote-tracking branch 'mjb/altosdroid'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362690044,1362690044,"760b1f02c178c600226f39b5e66d8cbadbf4a29b,e0d9128b7219b4c8ee68245a44b3428e796ca2f1"
e0d9128b7219b4c8ee68245a44b3428e796ca2f1,e0d9128b,altosdroid: Auto tab changing,"altosdroid: Auto tab changing

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362645471,1362645471,ecfc568574ababd23b2c4dc1323cb7265c097933
ecfc568574ababd23b2c4dc1323cb7265c097933,ecfc5685,altosdroid: implement Age field updating,"altosdroid: implement Age field updating

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362645442,1362645442,86b742743b26693cf8e56034d4ea68ff277931c1
86b742743b26693cf8e56034d4ea68ff277931c1,86b74274,altosdroid: implement UI updating on tabs,"altosdroid: implement UI updating on tabs

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362645343,1362645343,2a81d637308e680b99d7218ba9e03c9ade6626f1
2a81d637308e680b99d7218ba9e03c9ade6626f1,2a81d637,altosdroid: implement tabs interface,"altosdroid: implement tabs interface

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362645207,1362645207,59dfcbe14622c20aaa7d5b131eece9f4c8db6887
59dfcbe14622c20aaa7d5b131eece9f4c8db6887,59dfcbe1,altosdroid: Import initial versions of XML and Java for Tab content,"altosdroid: Import initial versions of XML and Java for Tab content

* Includes TabsAdapter class borrowed from Support Library sample code
* New ""GoNoGoLights"" class for dealing with the red/green/gray LEDs
* extra required strings in strings.xml
* Couple of support functions in AltosDroid.java
* rudimentary Maps tab - does nothing at present.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362644925,1362644925,d6f1b176f4005af3b6fd16d8c7d22260a3ccdfd8
d6f1b176f4005af3b6fd16d8c7d22260a3ccdfd8,d6f1b176,altosdroid: whitespace cleanup,"altosdroid: whitespace cleanup

DAMN my OCD.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362644447,1362644447,d229d702c8532f477e2ace2af36f2d0cc6e728d3
d229d702c8532f477e2ace2af36f2d0cc6e728d3,d229d702,altosdroid: make AltosDroid.pos() static,"altosdroid: make AltosDroid.pos() static

* Will be used from tabs that display lat/lon

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362644406,1362644406,cf03ddb42042002bfb88e13ecfb89b27e7aeb91e
cf03ddb42042002bfb88e13ecfb89b27e7aeb91e,cf03ddb4,altosdroid: convert spaces to tabs in strings.xml,"altosdroid: convert spaces to tabs in strings.xml

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362642806,1362642806,89f8bb52ea858f059374474c0adda3cd5095a589
89f8bb52ea858f059374474c0adda3cd5095a589,89f8bb52,altosdroid: adjust release Makefile target,"altosdroid: adjust release Makefile target

* Rename target
* Add dependency on unsigned release APK
* use $(ZIPALIGN) variable

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362642581,1362642581,6ff45bef719bafd2c827e479186c8fadf6f779aa
6ff45bef719bafd2c827e479186c8fadf6f779aa,6ff45bef,altosdroid: Symlink red/green/gray LEDs via build system,"altosdroid: Symlink red/green/gray LEDs via build system

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362642496,1362642496,795fba09a3ca273cd2daeeb7d9fed6bae6fa6a86
795fba09a3ca273cd2daeeb7d9fed6bae6fa6a86,795fba09,altosdroid: Adjust build system for GMaps & Tabs support,"altosdroid: Adjust build system for GMaps & Tabs support

* Use SupportV4 library for Tab support
* Use Google Services Lib for Google Maps
* revert to a standard Android target, not Google API's
* Add permissions required for Google Maps to manifest, and API key

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362637419,1362637419,b7dc6045892b33b04ec7c27bdc940b4d3e1b9cbf
b7dc6045892b33b04ec7c27bdc940b4d3e1b9cbf,b7dc6045,altosdroid: adjust Makefile rules,"altosdroid: adjust Makefile rules

separate altoslib linking and, making of external lib directory.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362636343,1362636343,353372425550177cf0531a05706491a96414d12c
353372425550177cf0531a05706491a96414d12c,35337242,altosdroid: use a glob for source files,"altosdroid: use a glob for source files

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362636168,1362636168,1c9a3a5080ca0e21f45c2b7ea889793645796751
1c9a3a5080ca0e21f45c2b7ea889793645796751,1c9a3a50,altosdroid: Only update BuildInfo.java when other source files change,"altosdroid: Only update BuildInfo.java when other source files change

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362635970,1362635970,10042fed36d19c1b21b8f04c57da708afc085b25
10042fed36d19c1b21b8f04c57da708afc085b25,10042fed,altosdroid: Fix up some formatting in manifest,"altosdroid: Fix up some formatting in manifest

(And add flag to allow settings backup by google services)

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362635685,1362635685,5560148ffea1a718a303d999a0f8a625deceef23
760b1f02c178c600226f39b5e66d8cbadbf4a29b,760b1f02,Merge remote-tracking branch 'mjb/master',"Merge remote-tracking branch 'mjb/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362635602,1362635602,"afd2674261e128a0ecff8fbf5dd6a64196b026f6,cbad587b49c565edd2c9356a015d6cfd52df93a3"
5560148ffea1a718a303d999a0f8a625deceef23,5560148f,altosdroid: minor whitespace cleanup,"altosdroid: minor whitespace cleanup

(damn my OCD!)

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362635487,1362635487,9a54e278298540582b91ff3eda476265082e890c
9a54e278298540582b91ff3eda476265082e890c,9a54e278,altosdroid: update copyrights/licensing,"altosdroid: update copyrights/licensing

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1362635192,1362635192,cbad587b49c565edd2c9356a015d6cfd52df93a3
afd2674261e128a0ecff8fbf5dd6a64196b026f6,afd26742,altoslib: Invalidate GPS new data bit when updating state,"altoslib: Invalidate GPS new data bit when updating state

Somehow this line got lost when the GPS ground altitude fix was made.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362455070,1362455070,3605e97ee918b3f87e4c471906f708c3ea027eef
3605e97ee918b3f87e4c471906f708c3ea027eef,3605e97e,ao-tools: Add ao-dumpflash program,"ao-tools: Add ao-dumpflash program

This program dumps the entire flash contents of an AltOS device to
allow for external analysis.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362358432,1362358432,784edcda52d681bbc9302fbc7efb80cb214f71b8
784edcda52d681bbc9302fbc7efb80cb214f71b8,784edcda,libaltos: Open FTDI serial devices twice on Windows.,"libaltos: Open FTDI serial devices twice on Windows.

Looks like the Windows FTDI driver has 'issues' and opening it only
once doesn't work correctly. Just close and re-open the device and it
seems to be perfectly happy.

Who knows?

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362275189,1362275189,cb09076fe16d28e25f5b20b2178cfad10adbeddb
cb09076fe16d28e25f5b20b2178cfad10adbeddb,cb09076f,doc: Add version 1.2 release notes,"doc: Add version 1.2 release notes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362199708,1362199708,c9cba68049f957d69a88150470c086dd6f4a42c0
c9cba68049f957d69a88150470c086dd6f4a42c0,c9cba680,doc: Document how to get TeleMini to 'emergency recovery' mode,"doc: Document how to get TeleMini to 'emergency recovery' mode

TeleMini needs emergency recovery mode in case you forget the radio
parameters and need to get things back to a known state. Add
documentation to describe what this does and how to get it enabled.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362199543,1362199543,113b1146f6ac0ecd423f3fb409e02730604b8aca
113b1146f6ac0ecd423f3fb409e02730604b8aca,113b1146,altosuilib: Disable graph element notifies for each add(),"altosuilib: Disable graph element notifies for each add()

This reduces the number of notify calls made and dramatically speeds
up graph creation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362170044,1362170044,351e4110f519d18bb36747955578e9e5b9aeec7b
351e4110f519d18bb36747955578e9e5b9aeec7b,351e4110,altosuilib: Add setNotify/fireSeriesChanged methods to AltosUIGrapher,"altosuilib: Add setNotify/fireSeriesChanged methods to AltosUIGrapher

This will let the data adding functions disable notifications while
adding all of the graph data, and then send a single notification when
the data sets are complete, which speeds up creating of the graph
elements quite a bit.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1362169714,1362169714,d0bd0093a65b73a178da6ddcafcc4dbaa3caca39
d0bd0093a65b73a178da6ddcafcc4dbaa3caca39,d0bd0093,altos: telescience-v0.2 is an ARM product,"altos: telescience-v0.2 is an ARM product

Move it from SDCC to ARM targets as Jenkins doesn't have an ARM compiler.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1361697641,1361697666,9230f0a5b119044235c0c419e85a83115aae924d
9230f0a5b119044235c0c419e85a83115aae924d,9230f0a5,altos/driver: Make HMC5883 driver build again,"altos/driver: Make HMC5883 driver build again

Adapt to changes in OS interfaces

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1361697616,1361697616,2120d362cefceba69e75996b6391d9558978c01d
2120d362cefceba69e75996b6391d9558978c01d,2120d362,Merge branch 'telescience-v0.2',"Merge branch 'telescience-v0.2'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1361694054,1361694054,"5246acb70b79980de36bd5d0ba0d017529ae9a78,a04c4f7b07e97d568f8f6f56dd363329817fb52c"
5246acb70b79980de36bd5d0ba0d017529ae9a78,5246acb7,Update build version to 1.2,"Update build version to 1.2

Prepare for 1.2 release

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1361694036,1361694036,25435dcbc6416935aa432fc090ea977bfff5d153
25435dcbc6416935aa432fc090ea977bfff5d153,25435dcb,altos/stm: Add more bits to NVIC register definitions,"altos/stm: Add more bits to NVIC register definitions

This cleans up a few values, adds more comments and a few more NVIC fields.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1361693989,1361693989,be8eecc4117a14139e4421ce86b67d29a0f0c3d4
cbad587b49c565edd2c9356a015d6cfd52df93a3,cbad587b,altosdroid: excise old code/xml,"altosdroid: excise old code/xml

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1360919356,1360919356,5e53a485310cc11e6add077fb4bd0b0267734ff0
5e53a485310cc11e6add077fb4bd0b0267734ff0,5e53a485,all: clean up .gitignore files and Makefile clean targets,"all: clean up .gitignore files and Makefile clean targets

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1360918748,1360918748,be8eecc4117a14139e4421ce86b67d29a0f0c3d4
be8eecc4117a14139e4421ce86b67d29a0f0c3d4,be8eecc4,altosui: Fix AltosLanded call to AltosGraphUI,"altosui: Fix AltosLanded call to AltosGraphUI

Changed the argument from String to File but forgot this one.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360611638,1360611638,59365eb4e1f63a1ced1667ac233058a06a8eecef
59365eb4e1f63a1ced1667ac233058a06a8eecef,59365eb4,altosui: Remove graph series which aren't available,"altosui: Remove graph series which aren't available

Make sure all graph series have actual data underlying them by
checking the available data before creating the series objects.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360607687,1360608019,2a9ca1dcd00da2cfdd0a2ea616308dfb64ee80d4
2a9ca1dcd00da2cfdd0a2ea616308dfb64ee80d4,2a9ca1dc,altosui: Stick file basename in graph window title,"altosui: Stick file basename in graph window title

The title was empty before, this seems more useful than that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360607484,1360607484,5a4cd7b9b318ddea5d1dcc71918819f11256ca94
5a4cd7b9b318ddea5d1dcc71918819f11256ca94,5a4cd7b9,altosuilib: rescale axis when enabling data series,"altosuilib: rescale axis when enabling data series

This makes sure new series are visible when you enable them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360607074,1360607375,169a6d51718d6b9fae757df9950d2e960d1c8c1d
169a6d51718d6b9fae757df9950d2e960d1c8c1d,169a6d51,micropeak: Remove Info.plist,"micropeak: Remove Info.plist

It's built from Info.plist.in

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360553630,1360553630,64399500ad1a7ad70452cbda4d60723b5904ca3d
64399500ad1a7ad70452cbda4d60723b5904ca3d,64399500,Build Windows .nsi files in configure script,"Build Windows .nsi files in configure script

These need the library version numbers embedded in them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360551701,1360551701,cbd9dd989a662f41ddcb0c9e0f4453840687fd4a
cbd9dd989a662f41ddcb0c9e0f4453840687fd4a,cbd9dd98,altosui: Add map and GPS data to graph window. Trac #50,"altosui: Add map and GPS data to graph window. Trac #50

See where the rocket landed without having to replay the whole flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360539296,1360548925,f0a125503e502d213711df0d7774d837d4d98447
f0a125503e502d213711df0d7774d837d4d98447,f0a12550,altosui: Display count of erased flights along with their numbers,"altosui: Display count of erased flights along with their numbers

An attempt to clarify what's going on by providing both a count and
the flight numbers.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360536970,1360537099,17455da530833d3db03ee2ace7b15130ed307670
17455da530833d3db03ee2ace7b15130ed307670,17455da5,altosui: Display block number while downloading flights. Track #51,"altosui: Display block number while downloading flights. Track #51

We don't know how long the flight log is, but we can at least provide
a block number in the pacifier to let the user know it's not wedged.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360536706,1360537047,a9cf50c9f29f42cc3ca0daff3c69a4087cf9aa1c
a9cf50c9f29f42cc3ca0daff3c69a4087cf9aa1c,a9cf50c9,altoslib: Fix available flight log storage computation,"altoslib: Fix available flight log storage computation

number of flights was off by one as it was initialized to -1
storage erase unit wasn't getting fetched correctly
flight_log_max is in kB, not B; need to multiply by 1024

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360536048,1360536048,504cf412e8b60b5ff2dea93ed3336f0e058dea62
504cf412e8b60b5ff2dea93ed3336f0e058dea62,504cf412,altosui: Display callsign in connecting message window,"altosui: Display callsign in connecting message window

When waiting for the remote end to respond, display the callsign along
with the frequency so that the user remembers that it's important to
set that too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360534696,1360534696,c2701ae646124f0668c5f2d1df3fc80f0075a9d7
c2701ae646124f0668c5f2d1df3fc80f0075a9d7,c2701ae6,altosui: Interrupt MonitorIdle when changing frequency/callsign,"altosui: Interrupt MonitorIdle when changing frequency/callsign

When switching radio parameters, the local device needs to have the
parameters switched, so interrupt the current operation and start
over, the frequency and callsign will be set the next time through.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360534624,1360534624,cc0ea39fee73417ecd69c020d9eca723ebb2cf65
cc0ea39fee73417ecd69c020d9eca723ebb2cf65,cc0ea39f,altosui: Add callsign to Monitor Idle window (Trac #62),"altosui: Add callsign to Monitor Idle window (Trac #62)

This makes it a lot more obvious that the callsign is relevant to the
Monitor Idle process.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360526316,1360526316,bf88c5f829ea5d32043431945e862a9f6c96740a
bf88c5f829ea5d32043431945e862a9f6c96740a,bf88c5f8,Merge remote-tracking branch 'mjb/master',"Merge remote-tracking branch 'mjb/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360488112,1360488112,"32270296671aac3b3ba15f9c1777bcdd77b9c36c,d05a77992df983b9fa79f0e2b20d2c6b387c180c"
32270296671aac3b3ba15f9c1777bcdd77b9c36c,32270296,altosui: Adjust graph voltage tool-tip value format,"altosui: Adjust graph voltage tool-tip value format

Voltages are always small, so use more of the space for the
fractional value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360485659,1360485659,a5fb03421751b342dcd450caee49a608d8828175
a5fb03421751b342dcd450caee49a608d8828175,a5fb0342,altoslib: Fix a couple of unit functions to make them public,"altoslib: Fix a couple of unit functions to make them public

Nice to be able to use these outside of altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360485146,1360485146,2efd3ad80d4fefa8ccc1b80a2e657dbf9ba0c60f
2efd3ad80d4fefa8ccc1b80a2e657dbf9ba0c60f,2efd3ad8,altosui/altoslib/altosuilib: Switch altosui to shared graph code,"altosui/altoslib/altosuilib: Switch altosui to shared graph code

This adds a configuration tab to the graph window to enable/disable
various plotted values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360484969,1360485032,0169e56ad030c0096b1068d00f06957990dfb31f
0169e56ad030c0096b1068d00f06957990dfb31f,0169e56a,altosuilib/micropeak: Add state markers to micropeak graph,"altosuilib/micropeak: Add state markers to micropeak graph

I think this makes the micropeak graph as functional as the altosui graph

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360470273,1360485032,518b16f64f4be096ceff13ab31b96d6909fe3ae2
518b16f64f4be096ceff13ab31b96d6909fe3ae2,518b16f6,altoslib: Fix altoslib install,"altoslib: Fix altoslib install

Was using AltosLibdir in several places still

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360466658,1360485032,41ede0267250a1d3b26e19cc9dd78f32609f7f0f
41ede0267250a1d3b26e19cc9dd78f32609f7f0f,41ede026,altosuilib: Initialize graph axes units,"altosuilib: Initialize graph axes units

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360466607,1360485032,9d3da1530c1007d5d1f28062b3947f4aa981bfa8
9d3da1530c1007d5d1f28062b3947f4aa981bfa8,9d3da153,altoslib: Add AltosUnits.graph_format,"altoslib: Add AltosUnits.graph_format

This describes the format of numbers used on a graph axis for use with jfreechart

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360404013,1360485032,ab9caa22ea905844a99e08b5f6d3b072f094283e
ab9caa22ea905844a99e08b5f6d3b072f094283e,ab9caa22,micropeak: Use altosuilib graphing functions,"micropeak: Use altosuilib graphing functions

Move these out of micropeak and into shared code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360403958,1360485032,9839b0b62d797a8616fc66038e3f3c68e2a214d0
9839b0b62d797a8616fc66038e3f3c68e2a214d0,9839b0b6,altosuilib: Add graphing routines from MicroPeak,"altosuilib: Add graphing routines from MicroPeak

Make these available for AltosUI too

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360403903,1360485032,fd5e6b80a8be5fac7d913b97570f7e11f70a60ba
fd5e6b80a8be5fac7d913b97570f7e11f70a60ba,fd5e6b80,altosuilib: Remove duplicate AltosUnitsListener.java,"altosuilib: Remove duplicate AltosUnitsListener.java

This lives in altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360403751,1360485032,c6d7776bbe0b7f84e51af88d1ac2b7d35133a0ad
c6d7776bbe0b7f84e51af88d1ac2b7d35133a0ad,c6d7776b,"various updates to the text .. more SMA to BNC adapter references, etc","various updates to the text .. more SMA to BNC adapter references, etc
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1360426176,1360426176,033c2c4c018343b0e86d5e231bc2dc56e643f8ee
033c2c4c018343b0e86d5e231bc2dc56e643f8ee,033c2c4c,update copyright year to 2013,"update copyright year to 2013
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1360424830,1360424830,ed200884f3e4fb895ee17ef38a9b6d3371b59625
ed200884f3e4fb895ee17ef38a9b6d3371b59625,ed200884,add pcb overall dimensions and screw sizes the holes are intended for,"add pcb overall dimensions and screw sizes the holes are intended for
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1360424651,1360424651,e374f8e5a5f12602ef62518fcf672a231080baee
e374f8e5a5f12602ef62518fcf672a231080baee,e374f8e5,doc: Add TeleMetrum and TeleMini drill templates,"doc: Add TeleMetrum and TeleMini drill templates

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360395469,1360395469,c3024b759fcdf8b84a2139c1535c573a31eb5c95
c3024b759fcdf8b84a2139c1535c573a31eb5c95,c3024b75,altos: Add atmosphere.5c,"altos: Add atmosphere.5c

Shared code for building pressure tables

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360003909,1360003909,0e982294961205bef525ecad7172a1f3ab66677f
0e982294961205bef525ecad7172a1f3ab66677f,0e982294,test: Accept micropeak CSV files for micropeak testing,"test: Accept micropeak CSV files for micropeak testing

This interpolates the missing values to provide a reasonable testing
environment for the Micropeak flight firmware.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360000578,1360000578,9aca92a20343a2cf7e05abc7b100852d81f86c0d
9aca92a20343a2cf7e05abc7b100852d81f86c0d,9aca92a2,altos: Document which MPU6000 revs have broken accel values,"altos: Document which MPU6000 revs have broken accel values

From Tridge -- MPU6000 rev C4 and C5 are broken, having accelerometer
values in the wrong range. This commit just adds comments which note
this; experimentation will be required to actually sort out what's
going on.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360000290,1360000290,809eb5b1252a75d489e3ad2fd2a4af701fa0aa52
809eb5b1252a75d489e3ad2fd2a4af701fa0aa52,809eb5b1,micropeak: Update Makefile to versioned Java libraries,"micropeak: Update Makefile to versioned Java libraries

Library names have changed; deal with it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360000207,1360000207,7afd76e70c086003a2cd87ce459fda4188c76ad6
7afd76e70c086003a2cd87ce459fda4188c76ad6,7afd76e7,altoslib: fix Makefile JAR target,"altoslib: fix Makefile JAR target

Was referencing stale classAltosLib.stamp instead of new classaltoslib.stamp

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1360000147,1360000147,8d1d8d2a3c129cdbd55427bcda0f26715b02f1ee
8d1d8d2a3c129cdbd55427bcda0f26715b02f1ee,8d1d8d2a,Add version numbers to java libraries,"Add version numbers to java libraries

Make our private java library names include a version number so we can
ship and install multiple versions at the same time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1359439243,1359439243,5a3c5de6657d1c26e52015a8acec0cd05e294cef
5a3c5de6657d1c26e52015a8acec0cd05e294cef,5a3c5de6,Change AltosLib to altoslib,"Change AltosLib to altoslib

Follow Java conventions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1359431543,1359431543,5eb52f54a616f4e89b718d50d77a7b68cf7a4354
d05a77992df983b9fa79f0e2b20d2c6b387c180c,d05a7799,altosdroid: initial release to Play Store,"altosdroid: initial release to Play Store

* Add release keystore (encrypted)
* Turn off debugging in UI
* add 'sign' target to Makefile.am
* Update version string in AndroidManifest.xml to match released version of altosui.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1359376488,1359376488,3454592169dcb61b81de9af2b631b87e7dd86231
5eb52f54a616f4e89b718d50d77a7b68cf7a4354,5eb52f54,"Mark MicroPeak as a recording altimeter, not a peak-recording altimeter","Mark MicroPeak as a recording altimeter, not a peak-recording altimeter

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1359065919,1359065960,b62097c9d79f848042485234dc46ade60deabc02
b62097c9d79f848042485234dc46ade60deabc02,b62097c9,micropeak: fix 'make clean' and .gitignore,"micropeak: fix 'make clean' and .gitignore

Make git status clean in micropeak dir

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358909402,1358909402,96193d8c09159b81e60851ed90682b9120e15f55
96193d8c09159b81e60851ed90682b9120e15f55,96193d8c,micropeak: Add mac build file Info.plist,"micropeak: Add mac build file Info.plist

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358905765,1358905765,b5c988fb59c1e48baa81b56be9b7b4ab0eebabea
b5c988fb59c1e48baa81b56be9b7b4ab0eebabea,b5c988fb,Add documentation for the MicroPeak USB interface,"Add documentation for the MicroPeak USB interface

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358904884,1358905228,9da66ca607664bb81b0986c121518faa4c1cb9fd
9da66ca607664bb81b0986c121518faa4c1cb9fd,9da66ca6,micropeak: Respect font size preference in MicroPeak stats tab,"micropeak: Respect font size preference in MicroPeak stats tab

This uses the font size preference to adjust the size of the text
shown in the Statistics tab.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358904577,1358905225,3454592169dcb61b81de9af2b631b87e7dd86231
3454592169dcb61b81de9af2b631b87e7dd86231,34545921,altosui: Make initial AltOS window position configurable,"altosui: Make initial AltOS window position configurable

Give the user a choice of nine locations on the screen

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358725325,1358725516,cf03ab3383b679e6617e8ab7004be91e5a727562
cf03ab3383b679e6617e8ab7004be91e5a727562,cf03ab33,altosui: Remove duplicate AltosUIPreferences.java,"altosui: Remove duplicate AltosUIPreferences.java

This lives in altosuilib now. Several files needed imports of
altosuilib added as a result.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358725193,1358725516,e1133481f2208fd16be8196977696da2cce430f3
e1133481f2208fd16be8196977696da2cce430f3,e1133481,altosui: All of the Altos class is actually in AltosUILib now,"altosui: All of the Altos class is actually in AltosUILib now

Remove all of the duplicate content, shrinking AltosLib to a simple alias

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358725060,1358725516,5d35fd843299b5ff09a36220e6ecd8aefceb9b2c
5d35fd843299b5ff09a36220e6ecd8aefceb9b2c,5d35fd84,altosui/micropeak: Let native window system place windows,"altosui/micropeak: Let native window system place windows

Instead of forcing windows to our choice of positions, let the host
window pick reasonable locations. This avoids having all of our
windows appear on top of one another.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358647448,1358725516,aed990c3a37249a111c783336afade7ecdda7546
aed990c3a37249a111c783336afade7ecdda7546,aed990c3,altosi: callsign could not be configured for AltosUI,"altosi: callsign could not be configured for AltosUI

An extra local variable called callsign_value was hiding the object
field by the same name and preventing it from getting set to the right value

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358652638,1358652702,4646beb421ab5bec612dfe5e3c57e790b1f41203
4646beb421ab5bec612dfe5e3c57e790b1f41203,4646beb4,Tag version 1.1.9.3,"Tag version 1.1.9.3

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358574834,1358574834,ce3c9e6be6fde51fb02d692f1ef1222fb5ada8c9
ce3c9e6be6fde51fb02d692f1ef1222fb5ada8c9,ce3c9e6b,micropeak: Fetch Mac and Windows drivers when creating packages,"micropeak: Fetch Mac and Windows drivers when creating packages

This downloads the FTDI drivers from FTDI during the build process

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358402732,1358448082,bd84dfd8e53d8939281993e062015f67c0dd9fa2
a04c4f7b07e97d568f8f6f56dd363329817fb52c,a04c4f7b,Merge branch 'master' into telescience-v0.2,"Merge branch 'master' into telescience-v0.2
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358378566,1358378566,"0c2fa9614ffe22901ba0fd089e1e02c362f9fbe0,bd84dfd8e53d8939281993e062015f67c0dd9fa2"
bd84dfd8e53d8939281993e062015f67c0dd9fa2,bd84dfd8,micropeak: Show decimeters in stats window,"micropeak: Show decimeters in stats window

We're promising this kindof accuracy, so we'd best show it off

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358378311,1358378484,540309240a8515116120dbd4403902282ed8c27b
540309240a8515116120dbd4403902282ed8c27b,54030924,altos: Add Kalman filter to MicroPeak,"altos: Add Kalman filter to MicroPeak

This filters altitudes more accurately and also allows tracking of
acceleration, which is used to discard height data generated by
ejection charge noise

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358378149,1358378484,249ee968305ae6e8fcf0a10e5cf9cc5826bd81dd
249ee968305ae6e8fcf0a10e5cf9cc5826bd81dd,249ee968,altos: Add computation of MicroPeak Kalman correction coefficients,"altos: Add computation of MicroPeak Kalman correction coefficients

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358378011,1358378484,dd60d85d07b881ac03294a8cf607e469f2e69610
dd60d85d07b881ac03294a8cf607e469f2e69610,dd60d85d,altos: Correct model error covariance matrix,"altos: Correct model error covariance matrix

Finally found a couple of decent references on how to set the model
(process) error covariance matrix. The current process matrix turns
out to be correct for a continuous kalman filter (which isn't
realizable, of course). For a discrete filter, the error in modeled
acceleration (we model it as a constant) needs to be propogated to the
speed and position portions of the matrix.

The correct matrix is seen in this paper:

On Reduced-Order Kalman Filters For GPS Position Filtering
	J. Shima
	6/2/2001

This references an older paper which is supposed to describe the
derivation of the matrix:

Singer, R.A., “Estimating Optimal Tracking Filter Performance for Manned Maneuvering Targets,”
IEEE Transactions of Aerospace and Electronic Systems, AES-5, July 1970, pp. 473-483.

This change has a minor effect on the computed correction
coefficients; it should respond more reasonably to acceleration
changes now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358377272,1358378484,994ff76a064dcbd3113db771cd9cd9591fd68dea
0c2fa9614ffe22901ba0fd089e1e02c362f9fbe0,0c2fa961,Merge remote-tracking branch 'origin/telescience-v0.2' into telescience-v0.2,"Merge remote-tracking branch 'origin/telescience-v0.2' into telescience-v0.2
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358361628,1358361628,"456120d201d72c89576a0c8d69b2fcba44169507,f2b59cf3d30425bc4b12f37e86832e40b7702d3d"
456120d201d72c89576a0c8d69b2fcba44169507,456120d2,Merge branch 'master' into telescience-v0.2,"Merge branch 'master' into telescience-v0.2
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358361580,1358361580,"f24c4219de9563cf0ef24b763ce54d961c182696,994ff76a064dcbd3113db771cd9cd9591fd68dea"
994ff76a064dcbd3113db771cd9cd9591fd68dea,994ff76a,doc: Add simplesect headers to release notes,"doc: Add simplesect headers to release notes

This makes it easy to see which changes are from each version of the software.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358361475,1358361532,f64fe671b7b4e2389219d672bcea978d0539d4ae
f64fe671b7b4e2389219d672bcea978d0539d4ae,f64fe671,document what the 'Age' value in the AltosUI display means,"document what the 'Age' value in the AltosUI display means
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1358358364,1358358412,670034eef48d63cdaec8d271fa93da984ffe2ea9
f2b59cf3d30425bc4b12f37e86832e40b7702d3d,f2b59cf3,document what the 'Age' value in the AltosUI display means,"document what the 'Age' value in the AltosUI display means
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1358358364,1358358364,a866431e9a063830b407f749ff97a730831e5e4e
f24c4219de9563cf0ef24b763ce54d961c182696,f24c4219,altos: Change CC1120 SPI speed to 4MHz.,"altos: Change CC1120 SPI speed to 4MHz.

Most of the chip can run at 8MHz, but extended register access is
limited to 6.1MHz. Instead of pushing things, just run the SPI bus at
4MHz.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358141906,1358141906,a866431e9a063830b407f749ff97a730831e5e4e
a866431e9a063830b407f749ff97a730831e5e4e,a866431e,altos: Crank fast SPI on STM to 8MHz,"altos: Crank fast SPI on STM to 8MHz

With the GPIO pins set to 10MHz now, we can run SPI at the maximum
possible speed (8MHz).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358139010,1358139254,8d885616e2e522b8aea5e7d5398f16d330a0cffa
8d885616e2e522b8aea5e7d5398f16d330a0cffa,8d885616,altos: Set STM GPIO output speed for SPI pins correctly,"altos: Set STM GPIO output speed for SPI pins correctly

The GPIO pin settings affect the output impedence, and hence the
maximum speed for SPI. Cranking these to suitable values allows SPI to
run at full speed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358138927,1358139254,f2810aa33fc6fe254761a0044c62c7b23e59e6bc
f2810aa33fc6fe254761a0044c62c7b23e59e6bc,f2810aa3,altos: Build telescience-v0.2,"altos: Build telescience-v0.2

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358138888,1358138888,3645cb6578ec2a11ab7b0f6d435c6de22ca02a9f
3645cb6578ec2a11ab7b0f6d435c6de22ca02a9f,3645cb65,Update avr ao_spi_slave code to match API changes,"Update avr ao_spi_slave code to match API changes

Made the interface use void * for pointers and uint16_t for lengths

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358101919,1358101972,7883744526156879ad63256ab12d959df56d5252
7883744526156879ad63256ab12d959df56d5252,78837445,altos: Initial telescience bits,"altos: Initial telescience bits

These might do something, and should at least bring up USB

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358050298,1358050298,d374d6be7eb040457f4df6c38b5d057f26ee741c
670034eef48d63cdaec8d271fa93da984ffe2ea9,670034ee,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1358013442,1358013442,"8c5ebaf88b459b09924753a8077393a7b0639133,d374d6be7eb040457f4df6c38b5d057f26ee741c"
d374d6be7eb040457f4df6c38b5d057f26ee741c,d374d6be,micropeak: Record samples before boost detect,"micropeak: Record samples before boost detect

This saves a ring of 16 samples while waiting for boost, and then goes
back through those looking for the first sample higher than the ground
and writes the remaining ones to the log so that we get a more
complete log of the flight

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1358012731,1358012731,85baf657e7ea6debbed9effc6f8daff7ef09a5d8
85baf657e7ea6debbed9effc6f8daff7ef09a5d8,85baf657,altosui: Reference altosuilib.jar and altoslib.jar from original dirs,"altosui: Reference altosuilib.jar and altoslib.jar from original dirs

The symlinks may not be created when the build is getting run as the
dependencies aren't in place (thanks, automake).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357890161,1357890161,962e3bd0461f187cd599ba54e7129c84f97d4c4d
962e3bd0461f187cd599ba54e7129c84f97d4c4d,962e3bd0,"altosui,micropeak: Link altoslib.jar and altosuilib.jar before compiling","altosui,micropeak: Link altoslib.jar and altosuilib.jar before compiling

The symlinks for the libraries have to be present before compiling stuff.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357884696,1357884696,9f6b1570277c326c00d5da274f608fbdeb91c911
9f6b1570277c326c00d5da274f608fbdeb91c911,9f6b1570,micropeak: Note when libaltos fails,"micropeak: Note when libaltos fails

Not getting any device list back from MicroUSB means the library
wasn't found, so pop up a dialog box explaining the situation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357882943,1357883311,c3e807ffcd34d514f36bc11adbae9337991a1743
c3e807ffcd34d514f36bc11adbae9337991a1743,c3e807ff,micropeak: Create 'micropeak' script correctly,"micropeak: Create 'micropeak' script correctly

Add altoslibdir, remove -cp argument

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357882895,1357883311,98e74150040e444ed6480ef3d107caa54c205ef9
98e74150040e444ed6480ef3d107caa54c205ef9,98e74150,micropeak: Demonstrate how to hide various parts of the graph,"micropeak: Demonstrate how to hide various parts of the graph

This just shows how to disable a series and axis; it's not used here.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357882695,1357883311,505ef49a041740fe7cbb5c537b68d22e5fb6c0be
505ef49a041740fe7cbb5c537b68d22e5fb6c0be,505ef49a,micropeak: Report recorded apogee instead of searching flight data,"micropeak: Report recorded apogee instead of searching flight data

This makes sure we report the true apogee value instead of looking for
the maximum height value in the flight data, in case the flight
recording ended before the apogee was reached.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357882638,1357883311,e94f9547a566c74c30b6321bc073b8bdcb071604
e94f9547a566c74c30b6321bc073b8bdcb071604,e94f9547,Fix up 'make fat' to build all libs and micropeak too,"Fix up 'make fat' to build all libs and micropeak too

There are now three libraries to build for both altosui and micropeak.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357882464,1357883311,12a9bd0479db25cbe45c0385913315cc1e0bc892
12a9bd0479db25cbe45c0385913315cc1e0bc892,12a9bd04,libaltos: Need to check for tty/ttyACMx before ttyACMx,"libaltos: Need to check for tty/ttyACMx before ttyACMx

Otherwise, we'll find 'tty' when looking for 'ttyACMx' and no good
will come from that

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357881980,1357883311,1ed6b13e87c1cc2d6618b6ba3a293ea6e3b5752e
1ed6b13e87c1cc2d6618b6ba3a293ea6e3b5752e,1ed6b13e,Merge remote-tracking branch 'origin/micropeak-logging',"Merge remote-tracking branch 'origin/micropeak-logging'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357883292,1357883292,"acff2f466031fd1a8533fc315411c3734a8bacc6,d409417ff8e9ed9d406bf1c04542a4ecb574768b"
acff2f466031fd1a8533fc315411c3734a8bacc6,acff2f46,altos: Time out reading packet data from cc1120 after 100ms,"altos: Time out reading packet data from cc1120 after 100ms

Sometimes the radio will give a spurious wakeup indicating that a
preamble seems to have arrived, but no packet data will appear. In
this case, abandon the packet reception and go back to waiting for a
preamble again. This releases the SPI bus for other users and also
avoids missing packets.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357882052,1357883058,f715b5da3424adacc5a7f1e001e1dd7fa6f50385
f715b5da3424adacc5a7f1e001e1dd7fa6f50385,f715b5da,altoslib: Clean up AltosRecord clone methods,"altoslib: Clean up AltosRecord clone methods

Make the AltosRecord version abstract and then implement suitable
versions in each subclass by creating copying constructors for each
class.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357774141,1357883051,42733d2823b1ecf54c03881fc120067868c0ff4c
42733d2823b1ecf54c03881fc120067868c0ff4c,42733d28,altoslib: Don't smash existing GPS pad alt after boost,"altoslib: Don't smash existing GPS pad alt after boost

Leave the existing GPS pad altitude value in place after boost by
checking to see if it was ever computed before resetting it to the
barometric pad altitude. This makes GPS height values relative to the pad.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357773826,1357883045,d7d259c7b3eedcc1c185d2b7e3c33e829bd7ce96
8c5ebaf88b459b09924753a8077393a7b0639133,8c5ebaf8,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1357708337,1357708337,"59f355f5288b42b2e47743d06e41e55819a55f64,d7d259c7b3eedcc1c185d2b7e3c33e829bd7ce96"
d409417ff8e9ed9d406bf1c04542a4ecb574768b,d409417f,altosui: Create .dmg file for Mac OS X installations,"altosui: Create .dmg file for Mac OS X installations

Easier for users than a zip file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357507225,1357507225,2582e9b45bb81ff70fbd5c8581370c8c1b5bd5e5
2582e9b45bb81ff70fbd5c8581370c8c1b5bd5e5,2582e9b4,micropeak: Add ReadMe.rtf to Mac distribution,"micropeak: Add ReadMe.rtf to Mac distribution

There are *two* steps to installing MicroPeak on Mac OSX. Best help
out the poor user by explaining that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357506000,1357506000,0f05b1996122b6c6bce81ca33e85c2a65c3ded18
0f05b1996122b6c6bce81ca33e85c2a65c3ded18,0f05b199,micropeak: Create Mac OS X package,"micropeak: Create Mac OS X package

Includes the FTDI driver and the MicroPeak app

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357505545,1357505545,d663da13db60e1200535282ee1a0ea6305cad98c
d663da13db60e1200535282ee1a0ea6305cad98c,d663da13,micropeak: Suggest filenames for saving data,"micropeak: Suggest filenames for saving data

Uses the format '<year>-<month>-<day>-flight-<number>.mpd'

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357412366,1357412366,0c9eecfae02e8499e7c3d53a4386f026c54b04cd
0c9eecfae02e8499e7c3d53a4386f026c54b04cd,0c9eecfa,micropeak: Create .dmg file for apple. Create micropeak-jdb script,"micropeak: Create .dmg file for apple. Create micropeak-jdb script

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357411100,1357411100,20d54cae1eeca6c5d05bfacbafd77c8aa72247c9
20d54cae1eeca6c5d05bfacbafd77c8aa72247c9,20d54cae,micropeak: Use new libaltos entry point for FTDI devices,"micropeak: Use new libaltos entry point for FTDI devices

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357411050,1357411050,e7e71e2042f2bfc24adcc57cecfe26368eb03e8a
e7e71e2042f2bfc24adcc57cecfe26368eb03e8a,e7e71e20,micropeak: Move raw view caret to top. Make raw text uneditable,"micropeak: Move raw view caret to top. Make raw text uneditable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357411010,1357411010,70c7674b53d77e9995a235bb2dc455cb53d9e81e
70c7674b53d77e9995a235bb2dc455cb53d9e81e,70c7674b,micropeak: Remove debug printf for command line,"micropeak: Remove debug printf for command line

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357411000,1357411000,746ae98829a0fc15577ae0f7b506112178f481e3
746ae98829a0fc15577ae0f7b506112178f481e3,746ae988,Add separate code path for listing FTDI devices,"Add separate code path for listing FTDI devices

This lets the library do different things for FTDI devices, as is
required on Windows (for instance)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357410920,1357410920,ca284d8bef2f4bd360eaec58048ba9abdafc55bd
ca284d8bef2f4bd360eaec58048ba9abdafc55bd,ca284d8b,micropeak: Use data.export for Raw display. Change to MPH,"micropeak: Use data.export for Raw display. Change to MPH

data.export already knows how to format stuff, so use that to
construct the raw data presentation for the GUI too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357265680,1357265680,81088b42b3ea899c8d1b3f09ee4fe24378fa03c9
81088b42b3ea899c8d1b3f09ee4fe24378fa03c9,81088b42,micropeak: Export in lots of units,"micropeak: Export in lots of units

meters, feet, mach and gs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357263619,1357263619,f20781010a6560b7b359af269c502d098917c446
f20781010a6560b7b359af269c502d098917c446,f2078101,micropeak: Add command line export option,"micropeak: Add command line export option

micropeak --export <foo.mpd> will create <foo.csv> full of useful data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357263061,1357263061,36e9603f74b85776ac049758021b51909161aeb1
36e9603f74b85776ac049758021b51909161aeb1,36e9603f,micropeak: Add Mac OS Info.plist file,"micropeak: Add Mac OS Info.plist file

needed to build a Mac OS X application

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357263029,1357263029,722dc277dee915dcd09d3d65c0ee19173b114ef7
722dc277dee915dcd09d3d65c0ee19173b114ef7,722dc277,micropeak: Change graph tooltip units on the fly,"micropeak: Change graph tooltip units on the fly

Make sure the tooltips show the right units when they change

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357173044,1357173044,9e4c5b0a6ed3594cff6ab71398c172daa7c67177
9e4c5b0a6ed3594cff6ab71398c172daa7c67177,9e4c5b0a,micropeak: Use JTextArea instead of TextArea,"micropeak: Use JTextArea instead of TextArea

Looks nicer and doesn't appear to have the same weird clipping problem

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357172373,1357172373,1979063928f1cdfc75c01ec098164c2822a5138d
1979063928f1cdfc75c01ec098164c2822a5138d,19790639,altosuilib: Fix install issues on Linux,"altosuilib: Fix install issues on Linux

altosuilib.jar wasn't getting installed
micropeak was using the wrong name

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357171669,1357171669,31fa139578a86821844e3e2efb1a84bdea4f1370
31fa139578a86821844e3e2efb1a84bdea4f1370,31fa1395,micropeak: Add view of raw data in GUI,"micropeak: Add view of raw data in GUI

Looks just like the export file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357158284,1357158284,2c423d9287c6b9ea7233f5e3430682cb1c865da1
2c423d9287c6b9ea7233f5e3430682cb1c865da1,2c423d92,micropeak: Add CSV export,"micropeak: Add CSV export

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357155872,1357155872,93d640de65a1ecedfef89c96521c21632f96f372
93d640de65a1ecedfef89c96521c21632f96f372,93d640de,micropoint: Add MicroDataPoint,"micropoint: Add MicroDataPoint

This holds height/speed/accel data all in one place

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357154531,1357154531,0933f2ed5791cfdc28242cd60be3942556f4ed20
0933f2ed5791cfdc28242cd60be3942556f4ed20,0933f2ed,altoslib: Remove unused fake product_micropeak_serial,"altoslib: Remove unused fake product_micropeak_serial

Code cleanups have made this no longer useful

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357152536,1357152536,eb670e9b7576563d747ae5c9416371f145455ec1
eb670e9b7576563d747ae5c9416371f145455ec1,eb670e9b,altosui: Remove duplicate AltosUSBDevice,"altosui: Remove duplicate AltosUSBDevice

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357149009,1357149220,dc404bee7163a369eb1d95e0942b676bd3f95574
dc404bee7163a369eb1d95e0942b676bd3f95574,dc404bee,altosui: Use shared AltosUIListener,"altosui: Use shared AltosUIListener

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357148502,1357148502,f0bbd3e2571336b5f5872759b5010148325efbaa
f0bbd3e2571336b5f5872759b5010148325efbaa,f0bbd3e2,altosui: Use shared AltosUIFrame and AltosUIDialog,"altosui: Use shared AltosUIFrame and AltosUIDialog

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357148413,1357148413,ae09bd641a86970763380f3028f987ffcb791020
ae09bd641a86970763380f3028f987ffcb791020,ae09bd64,altosui: Use shared AltosFontListener class,"altosui: Use shared AltosFontListener class

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357148016,1357148016,8af405f1ac4d1b930f10465fd0270a49176f16d1
8af405f1ac4d1b930f10465fd0270a49176f16d1,8af405f1,altosui: Use shared AltosDeviceDialog,"altosui: Use shared AltosDeviceDialog

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357147895,1357147895,605b752080827bb59fcff5af9f1eab9fd5dad76b
605b752080827bb59fcff5af9f1eab9fd5dad76b,605b7520,altosui: Remove AltosVersion.java,"altosui: Remove AltosVersion.java

Version data now stored in AltosUIVersion.java

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357146550,1357146550,5ce43661834920c3a8f3a1b6e1c555fb952b512d
5ce43661834920c3a8f3a1b6e1c555fb952b512d,5ce43661,altosui: Use altosuilib for configuration,"altosui: Use altosuilib for configuration

Start moving to shared UI code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357146401,1357146401,8a5666bcf4949b846589c000e1620afe39593f57
8a5666bcf4949b846589c000e1620afe39593f57,8a5666bc,libaltos: Remove a couple of spurious debug printfs,"libaltos: Remove a couple of spurious debug printfs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357146382,1357146382,9efc57e4052e3c11218973f7666ad18ea5cf2a5a
9efc57e4052e3c11218973f7666ad18ea5cf2a5a,9efc57e4,Rename AltosConfigureUI to AltosUIConfigure,"Rename AltosConfigureUI to AltosUIConfigure

Leave AltosConfigureUI for AltosUI

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357110914,1357110914,103eaa674be7582437aa850f0fd82788e10f244b
103eaa674be7582437aa850f0fd82788e10f244b,103eaa67,micropeak: Check CRC on downloaded,"micropeak: Check CRC on downloaded

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357110604,1357110604,4dae5b876b089c17c87c72df2ad2fa5ec4f1657c
4dae5b876b089c17c87c72df2ad2fa5ec4f1657c,4dae5b87,Build micropeak by default,"Build micropeak by default

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357110209,1357110209,3ac109132d1878abbd277ae21215716326404781
3ac109132d1878abbd277ae21215716326404781,3ac10913,Build installable versions of MicroPeak GUI,"Build installable versions of MicroPeak GUI

Makes windows/mac/linux versions. Windows version appears to work on
Wine at least.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357093223,1357093223,d94ceed48be439f368d597bf06ed1e8adc4ef46b
d94ceed48be439f368d597bf06ed1e8adc4ef46b,d94ceed4,micropeak: Add 'Close' menu item. Fix start location,"micropeak: Add 'Close' menu item. Fix start location

Let the window system pick a spot to place the application
windows. This avoids having them all sit on top of one another.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357089055,1357089055,982b272920fcb444fd399941cabe613d8ac7104b
982b272920fcb444fd399941cabe613d8ac7104b,982b2729,micropeak: Fix chart colors,"micropeak: Fix chart colors

Need to apply custom colors after setting the theme

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357088251,1357088251,d83587c3c66b730cc54ca153714eee520ee40b2c
d83587c3c66b730cc54ca153714eee520ee40b2c,d83587c3,micropeak is code complete now.,"micropeak is code complete now.

Added save and download functionality. Removed 'new' from file menu.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1357083011,1357083011,65b512c890a3ccf487655b79305ab1cfcf49259c
65b512c890a3ccf487655b79305ab1cfcf49259c,65b512c8,Merge remote-tracking branch 'origin/master' into micropeak-logging,"Merge remote-tracking branch 'origin/master' into micropeak-logging
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356992699,1356992699,"434e946aa79b5a7e60799f996887bc6467889b92,d7d259c7b3eedcc1c185d2b7e3c33e829bd7ce96"
434e946aa79b5a7e60799f996887bc6467889b92,434e946a,Allow CC1120 to sit on other SPI busses,"Allow CC1120 to sit on other SPI busses

Reading the incoming data bypasses the SPI API and touches the SPI
data register directly; which port that is needs to be specified in
the pins file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356992557,1356992557,2bd6aca54fc465995d6985c8799cd0d016c9a543
2bd6aca54fc465995d6985c8799cd0d016c9a543,2bd6aca5,micropeak: Add flight stats pane,"micropeak: Add flight stats pane

Shows graph or stats in alternate panes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356992246,1356992246,56a1210a7b04a3623d19ec282f26fecc79c126dd
56a1210a7b04a3623d19ec282f26fecc79c126dd,56a1210a,micropeak: Use altosuilib,"micropeak: Use altosuilib

This removes a pile of code stolen from altosui

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356982977,1356982977,6db192898eebf750c4d51516eff7916bc4da493b
6db192898eebf750c4d51516eff7916bc4da493b,6db19289,altoslib: Add units change notification list,"altoslib: Add units change notification list

This allows the UI to automatically respond to changes in the
preferred units.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356982733,1356982733,03496dc47372c40f7faae1766b0e729a1feeab7c
03496dc47372c40f7faae1766b0e729a1feeab7c,03496dc4,Create altosuilib to share code between altosui and micropeak,"Create altosuilib to share code between altosui and micropeak

Need to convert altosui to using it, but that shouldn't be hard

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356982376,1356982598,f7a56152808c7838c1886884bb77de2705ab076c
d7d259c7b3eedcc1c185d2b7e3c33e829bd7ce96,d7d259c7,"altos: megadongle radio int is C13, not C14","altos: megadongle radio int is C13, not C14

Hard to get interrupts when listening to the wrong pin

Signed-off-by: Keith Packard <keithp@gag.com>
",,,,Keith Packard,keithp@gag.com,Keith Packard,keithp@gag.com,1356761131,1356761131,b70ca5eaf1c3d60bd9adf6835e1247f4147ca9c8
f7a56152808c7838c1886884bb77de2705ab076c,f7a56152,Merge remote-tracking branch 'origin/master' into micropeak-logging,"Merge remote-tracking branch 'origin/master' into micropeak-logging
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356760213,1356760213,"daf8776f8646ba187f1a17f7aae797503bed3f2a,b70ca5eaf1c3d60bd9adf6835e1247f4147ca9c8"
59f355f5288b42b2e47743d06e41e55819a55f64,59f355f5,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1356759026,1356759026,"099d2b0ea59d825bd69a3fbb5523b9cbb9430ce8,b70ca5eaf1c3d60bd9adf6835e1247f4147ca9c8"
b70ca5eaf1c3d60bd9adf6835e1247f4147ca9c8,b70ca5ea,altos: Fix MegaDongle CC1120 chip select pin,"altos: Fix MegaDongle CC1120 chip select pin

It's on A0, not C5

Signed-off-by: Keith Packard <keithp@gag.com>
",,,,Keith Packard,keithp@gag.com,Keith Packard,keithp@gag.com,1356748546,1356748546,a6e116515f5e4522adbfcd1900885c2a6034b57c
a6e116515f5e4522adbfcd1900885c2a6034b57c,a6e11651,altos: Fix cc1120 debug code to build on megadongle,"altos: Fix cc1120 debug code to build on megadongle

RDF function had changed, and APRS isn't available on megadongle.

Signed-off-by: Keith Packard <keithp@gag.com>
",,,,Keith Packard,keithp@gag.com,Keith Packard,keithp@gag.com,1356748473,1356748473,57487e78b90465a21c87cf30deb0aeaba0887332
daf8776f8646ba187f1a17f7aae797503bed3f2a,daf8776f,Lots more work on the MicroPeak application,"Lots more work on the MicroPeak application

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356741288,1356741288,9da9adc2718928de2af65a68cddbcc636cc3e9e8
099d2b0ea59d825bd69a3fbb5523b9cbb9430ce8,099d2b0e,update stlink-pins document to make it clear 4-pin MicroMaTch is our,"update stlink-pins document to make it clear 4-pin MicroMaTch is our
standard STM32L programming connector, and the big MM thing was v0.1 only
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1356734184,1356734184,034dfc4f9bef049b1fb5704873dd76f6a3a9949d
9da9adc2718928de2af65a68cddbcc636cc3e9e8,9da9adc2,Add file chooser for MicroPeak,"Add file chooser for MicroPeak

Needs reasonable directory tracking

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356475549,1356475549,bf8e1b6eecb2bae12ffdbd730bd6ec12ccdaf23a
bf8e1b6eecb2bae12ffdbd730bd6ec12ccdaf23a,bf8e1b6e,Start building MicroPeak GUI tool,"Start building MicroPeak GUI tool

Download, save and analyze MicroPeak flight data

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356474209,1356474209,868ef0c9c4b208c02a87180b0eede329369bdc77
868ef0c9c4b208c02a87180b0eede329369bdc77,868ef0c9,Merge branch 'master' into micropeak-logging,"Merge branch 'master' into micropeak-logging
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356474042,1356474042,"669cde8a87d88ceae89e369c1d38b88c9f8198cf,57487e78b90465a21c87cf30deb0aeaba0887332"
669cde8a87d88ceae89e369c1d38b88c9f8198cf,669cde8a,Move libaltos to top level,"Move libaltos to top level

This will let it be shared by the new MicroPeak gui

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1356473959,1356474012,d7d35b0bd86b912c43a21a275347fca201079847
57487e78b90465a21c87cf30deb0aeaba0887332,57487e78,altos: Actually record ground averages for 6dof sensor,"altos: Actually record ground averages for 6dof sensor

This gets the long-term averages for the 6dof sensors recorded into
the first flight log record.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355901320,1355901320,244415c515f21328cffe88d1369949a4af49a177
244415c515f21328cffe88d1369949a4af49a177,244415c5,"altosui: Clean up graph a bit, remove shapes, improve tooltips","altosui: Clean up graph a bit, remove shapes, improve tooltips

Sometimes graphs would get shapes at each datapoint which was
annoyingly cluttered. And, the tooltips used a format that was
difficult to interpret.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355900376,1355900511,b1d37be4c024e9690107c693d9819229025966fa
d7d35b0bd86b912c43a21a275347fca201079847,d7d35b0b,altos: Add distinct LED pattern before writing log data,"altos: Add distinct LED pattern before writing log data

Otherwise, the whole log looks like a an extra altitude digit.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355819977,1355819977,23dc9a63ae8bc982d9352cfb7a3f508d8a08c374
23dc9a63ae8bc982d9352cfb7a3f508d8a08c374,23dc9a63,altos: Make micropeak 'serial' interface work,"altos: Make micropeak 'serial' interface work

I prototyped the mpserial interface on a breadboard and tuned the
circuit to register the LED correctly. Then adjusted the serial code
to send bits at the right speed and format.

The logging contents are now in hexdecimal with a CCITT CRC-16
computed to verify correct reception.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355813929,1355813929,fc2e5beb9173663e1e37a9b5a7b6eea1046222f7
b1d37be4c024e9690107c693d9819229025966fa,b1d37be4,altos: Average MPU6000 values on ground for later use,"altos: Average MPU6000 values on ground for later use

Having long-term ground averages recorded to the eeprom file will make
post-flight analysis of the data better.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355792621,1355792621,b6c9e8ffc87481a23ba90fa22df7c9421e2cd6a6
b6c9e8ffc87481a23ba90fa22df7c9421e2cd6a6,b6c9e8ff,altos: Re-enable beeper on megametrum,"altos: Re-enable beeper on megametrum

I turned it off during radio testing and forgot to fix that before committing...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355705535,1355705535,dd7c30324461b2aed83b86bfe4323180664123cf
dd7c30324461b2aed83b86bfe4323180664123cf,dd7c3032,altos: Add new MARC status pin interrupt bits to megadongle,"altos: Add new MARC status pin interrupt bits to megadongle

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355702913,1355702913,dfff41c2bec16fe4c7b198a4720eb40d8e740ac4
dfff41c2bec16fe4c7b198a4720eb40d8e740ac4,dfff41c2,Merge branch 'aprs' into 'master',"Merge branch 'aprs' into 'master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355702801,1355702834,"22a58b0f9b82ea8c7abeda79ca7a4cd21c3dc93c,00bc1a090a294e103370b8ab0a0fe5d7a2acfe92"
22a58b0f9b82ea8c7abeda79ca7a4cd21c3dc93c,22a58b0f,altos: Wire up another CC1120 GPIO to get MARC status changes,"altos: Wire up another CC1120 GPIO to get MARC status changes

When the radio drops out of RX or TX mode due to an error, it changes
the MARC status, and sends pulse down a configured GPIO. Use this to
tell when something 'bad' happened during TX or RX so that we can
recover from losing the SPI bus in the middle of transmission or
reception.

Without this, the radio would change state and we'd never know,
leaving the radio code waiting for an interrupt that would never arrive.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355702645,1355702645,4e3ac3f2038cc3a43252fc8f820a1373a637ab83
4e3ac3f2038cc3a43252fc8f820a1373a637ab83,4e3ac3f2,altos: Test APRS rounding by using coordinates near the boundary,"altos: Test APRS rounding by using coordinates near the boundary

This selects lat/lon and altitude near the rounding boundary to check
that the resulting APRS data is correctly computed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355693505,1355693505,9bc701ce1132f04ec90ef22e6a7a90c67918737b
9bc701ce1132f04ec90ef22e6a7a90c67918737b,9bc701ce,altos: Document what HAS_BOOT_RADIO does in the m25 driver,"altos: Document what HAS_BOOT_RADIO does in the m25 driver

HAS_BOOT_RADIO causes the m25 driver to abort any ongoing receive in
case that is holding the SPI bus.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355693420,1355693420,6b4cfd8719e3fd4a2904369e176182c870a3b43c
6b4cfd8719e3fd4a2904369e176182c870a3b43c,6b4cfd87,altos: Round APRS data correctly,"altos: Round APRS data correctly

Apply rounding once at the start of the computation, then truncate
after that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355693371,1355693371,cf47efdc86f0b421fcf4389669fbecf6fa3f5934
00bc1a090a294e103370b8ab0a0fe5d7a2acfe92,00bc1a09,"altoslib: unconfigured radio frequency data is now -1, not 0","altoslib: unconfigured radio frequency data is now -1, not 0

This changed when AltosConfigData was cleaned up, so now frequency
settings must check for positive numbers rather than non-zero.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355693154,1355693154,034dfc4f9bef049b1fb5704873dd76f6a3a9949d
034dfc4f9bef049b1fb5704873dd76f6a3a9949d,034dfc4f,doc: Add warning about matching battery voltage.,"doc: Add warning about matching battery voltage.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355612827,1355612827,4925a6f2f4edd5b54641a5240030e5c0e3e95db6
4925a6f2f4edd5b54641a5240030e5c0e3e95db6,4925a6f2,doc: Add paragraph noting differences in JST polarity,"doc: Add paragraph noting differences in JST polarity

Looks like the 'standard' polarity for 3.7V lipos using JST connectors
in RC aircraft is swapped from what Spark Fun uses. Note that in the
docs to try and keep people from wrecking hardware.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355611642,1355611642,6fa1ec0dbf2a4eda8d061c67b3779b83b88f29f0
6fa1ec0dbf2a4eda8d061c67b3779b83b88f29f0,6fa1ec0d,Merge branch 'micropeak-1.1',"Merge branch 'micropeak-1.1'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355542190,1355542190,"f1409311761d65e85ac08c38c9b9a0114cc8f535,73422bf72e07b169bfe37b02518b9e7479931971"
f1409311761d65e85ac08c38c9b9a0114cc8f535,f1409311,altoslib: Discard previous flight state on SN change,"altoslib: Discard previous flight state on SN change

A previous change discarded previous *telemetry* state, but failed to
discard any previous overall flight state. This would reset some of
the data fields, but wouldn't reset the GPS state and max measurements.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355542129,1355542129,8dbe8abd034a2d1ee2ec0380ec376722a4ecbd71
8dbe8abd034a2d1ee2ec0380ec376722a4ecbd71,8dbe8abd,altoslib: Only list flight logs for boards that we know have them,"altoslib: Only list flight logs for boards that we know have them

Boards that don't have flight logs will generate a nice 'Syntax Error'
and fail to initialize.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355542076,1355542076,688a9458bb03a81e71554c14295d1baacbbbd530
fc2e5beb9173663e1e37a9b5a7b6eea1046222f7,fc2e5beb,altos: Log baro readings for MicroPeak,"altos: Log baro readings for MicroPeak

This logs barometric data every 192ms (more or less) to the 504
remaining bytes of internal EEPROM storage in the ATtiny85. This
provides 48.192 seconds of logging.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355512299,1355512299,73422bf72e07b169bfe37b02518b9e7479931971
73422bf72e07b169bfe37b02518b9e7479931971,73422bf7,altos: Note that Lithium battery may be included with MicroPeak,"altos: Note that Lithium battery may be included with MicroPeak

I'm not willing to say that we'll always be able to include a battery,
but we can certainly try, and they're certainly cheap enough that we
should.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355381616,1355381616,c8866fbae2b00b1d7a7ddf89a3f971a75d3dcd60
688a9458bb03a81e71554c14295d1baacbbbd530,688a9458,Merge branch 'micropeak-1.1',"Merge branch 'micropeak-1.1'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355380619,1355380619,"816c6b5d087694a9db9c34cc5ec7671a1487d9b9,c8866fbae2b00b1d7a7ddf89a3f971a75d3dcd60"
c8866fbae2b00b1d7a7ddf89a3f971a75d3dcd60,c8866fba,doc: Update MicroPeak doc to include EEPROM and programming info,"doc: Update MicroPeak doc to include EEPROM and programming info

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355380505,1355380605,a4678cd848da994dc893b75790e4c9a86e54d895
816c6b5d087694a9db9c34cc5ec7671a1487d9b9,816c6b5d,Merge branch 'micropeak-1.1',"Merge branch 'micropeak-1.1'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355339414,1355339414,"a4a841828924ee37f5201d4ff0aec38459f2d802,a4678cd848da994dc893b75790e4c9a86e54d895"
a4678cd848da994dc893b75790e4c9a86e54d895,a4678cd8,altos: Log in-flight data for MicroPeak,"altos: Log in-flight data for MicroPeak

This logs the low 16 bits of the pressure value to the remaining
on-chip eeprom. It can be read out with a standard AVR programming
dongle.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355338908,1355339000,07a45c50429389ae7b51e12bc847d34fb1577bc6
07a45c50429389ae7b51e12bc847d34fb1577bc6,07a45c50,altos: Add load-slow target for MicroPeak,"altos: Add load-slow target for MicroPeak

This sets the programming clock to 1/4 of the 250kHz clock used by the
MicroPeak firmware, allowing the device to be reprogrammed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355338623,1355338623,69447d8ad3f5a1e1f59939477afc7720a437fadc
69447d8ad3f5a1e1f59939477afc7720a437fadc,69447d8a,altos: Tim Van Milligan suggestion for µP -- delay before showing last flight,"altos: Tim Van Milligan suggestion for µP -- delay before showing last flight

This gives the user time to move their finger out of the way of the LED.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355298210,1355298210,d309fcff54fe6904fb860f33c15fcb7d1c96e91b
a4a841828924ee37f5201d4ff0aec38459f2d802,a4a84182,Merge branch 'micropeak-1.1',"Merge branch 'micropeak-1.1'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355265763,1355265763,"b26e837a6f18641aae9372aab22168849ff10812,d309fcff54fe6904fb860f33c15fcb7d1c96e91b"
d309fcff54fe6904fb860f33c15fcb7d1c96e91b,d309fcff,altos: Increase MicroPeak blink times a bit,"altos: Increase MicroPeak blink times a bit

make the 0 longer (1 sec now), and make the time between digits longer
(also 1 sec now)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355265713,1355265713,c233ef67f42c14cb1d0e0542a9523b279f826af5
b26e837a6f18641aae9372aab22168849ff10812,b26e837a,Merge branch 'micropeak-1.1',"Merge branch 'micropeak-1.1'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355106811,1355106811,"1489c7f75f7b9ce547ac49c157b440c4f9131ef4,c233ef67f42c14cb1d0e0542a9523b279f826af5"
c233ef67f42c14cb1d0e0542a9523b279f826af5,c233ef67,altos: Use alt_t value to hold displayed height in micropeak,"altos: Use alt_t value to hold displayed height in micropeak

Heights are 32 bits (to get .1 meter resolution) in micropeak; make
sure we have enough bits while blinking out the computed value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355106513,1355106513,defd5d0784a754be30e3295067fbc85a108ad172
defd5d0784a754be30e3295067fbc85a108ad172,defd5d07,altos: Make sure pa to altitude conversion is done with 32 bits,"altos: Make sure pa to altitude conversion is done with 32 bits

We need 32 bits to hold intermediate values, even if the final
altitude is reported in only 16 bits.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355106469,1355106469,24948ea1d41f2a7c96ac09e35d1250909e5726ae
24948ea1d41f2a7c96ac09e35d1250909e5726ae,24948ea1,altos: Store altitude in 32-bits for MicroPeak,"altos: Store altitude in 32-bits for MicroPeak

Needs all 32 bits to store .1 meter resolution

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1355092355,1355092355,285fccfa82d89b0decc3b44f413eef9d0c8f1e63
cf47efdc86f0b421fcf4389669fbecf6fa3f5934,cf47efdc,altos: Stop including profiling and stack guard code in megametrum,"altos: Stop including profiling and stack guard code in megametrum

These take CPU time and memory and are intended only for debugging

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354949374,1354949374,4339d5c8e6373119e5377fe5c883b6b0e6ce37f6
4339d5c8e6373119e5377fe5c883b6b0e6ce37f6,4339d5c8,altos: Fix aprs test to not allow callsign configuration,"altos: Fix aprs test to not allow callsign configuration

There's no configuration to take a callsign from...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354930697,1354930697,abf82991b8e69754ebc4857ce78ac4a4b01f16e4
abf82991b8e69754ebc4857ce78ac4a4b01f16e4,abf82991,altosui: Add APRS interval configuration to UI,"altosui: Add APRS interval configuration to UI

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354930515,1354930515,bd05421991b596fe9cf73ee25c9046b0fb4e32f7
bd05421991b596fe9cf73ee25c9046b0fb4e32f7,bd054219,Merge branch 'master' into aprs,"Merge branch 'master' into aprs
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354930450,1354930450,"1f797066857b171b19829e2bb7187b8faf37d07c,1489c7f75f7b9ce547ac49c157b440c4f9131ef4"
1489c7f75f7b9ce547ac49c157b440c4f9131ef4,1489c7f7,altosui: Call config UI from AltosConfigData directly,"altosui: Call config UI from AltosConfigData directly

Don't make AltosConfig have a pile of config code, stick that in
AltosConfigData instead. This uses a new interface, AltosConfigValues
to get from AltosConfigData to the UI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354930068,1354930068,c10f9a438ed5789479d21c78153ca7f14c05534c
1f797066857b171b19829e2bb7187b8faf37d07c,1f797066,altos: Use configured callsign in APRS packets,"altos: Use configured callsign in APRS packets

Instead of hard-coding my own call sign...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354929602,1354929602,b28323ce91d23db5e1c3cbd1309c72aafcfbe235
b28323ce91d23db5e1c3cbd1309c72aafcfbe235,b28323ce,altos: Make APRS interval configurable,"altos: Make APRS interval configurable

This provides a separate configuration value for APRS, allowing the
interval between APRS reports to vary.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354929512,1354929512,f8a704268f0978a39b9c7983e049ef55914f7280
f8a704268f0978a39b9c7983e049ef55914f7280,f8a70426,altos: Fix up APRS packet sending code in cc1120 driver,"altos: Fix up APRS packet sending code in cc1120 driver

This fixes the FIFO management, ensuring that the data are streamed
into the radio fast enough to keep the packet continuous. Sounds like
it works, but testing with an actual APRS receiver is required.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354904125,1354904125,748e42ebf1dfb1efd5dec6ddd93f5c7aeedeb01d
748e42ebf1dfb1efd5dec6ddd93f5c7aeedeb01d,748e42eb,Merge branch 'master' into aprs,"Merge branch 'master' into aprs
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354904051,1354904051,"75912f8af04cecc0bbffecb2072d465c3744d4e8,c10f9a438ed5789479d21c78153ca7f14c05534c"
c10f9a438ed5789479d21c78153ca7f14c05534c,c10f9a43,altos: fix functions calling pollchar to use 'int' to hold the value,"altos: fix functions calling pollchar to use 'int' to hold the value

AO_READ_AGAIN doesn't fit in a char anymore now that stdio is 8-bit
clean, everyone using pollchar must use an 'int' variable to capture
the whole value from pollchar.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354903551,1354903939,16fd9009d8b034fd8d208115317f65fabe10072a
16fd9009d8b034fd8d208115317f65fabe10072a,16fd9009,altosui: Use AltosConfigData for altosui configuration dialog,"altosui: Use AltosConfigData for altosui configuration dialog

Instead of a separate config language parser, share with altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354897942,1354897942,e572651b36ad557d716fb14e76e3eec132e5ebdf
e572651b36ad557d716fb14e76e3eec132e5ebdf,e572651b,altoslib: Make AltosConfigData parse all of the config data,"altoslib: Make AltosConfigData parse all of the config data

It was missing quite a few. This also speeds up parsing of config from
TeleScience, TeleBT and TeleTerra by not listing flight info on those
products (where it doesn't make sense).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354842519,1354842519,cb4f2b62d50aca615bd4f9f230a1736880125e3e
cb4f2b62d50aca615bd4f9f230a1736880125e3e,cb4f2b62,altoslib: Make AltosMs5607 capable of parsing ms5607 info lines,"altoslib: Make AltosMs5607 capable of parsing ms5607 info lines

This moves the parsing from AltosMs5607Query

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354842445,1354842445,b4e86af6de52ea0bacf80e3936b6cd17c1cbf898
b4e86af6de52ea0bacf80e3936b6cd17c1cbf898,b4e86af6,altos: Change 'flight-number' to 'current-flight',"altos: Change 'flight-number' to 'current-flight'

Avoids ambiguity with stored flight info, which starts lines with 'flight'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354842377,1354842377,9d095eb1987f35d0d4e6540bf335e1faaa7c86ec
9d095eb1987f35d0d4e6540bf335e1faaa7c86ec,9d095eb1,altos: Shrink 'ao_version' by calling printf fewer times,"altos: Shrink 'ao_version' by calling printf fewer times

Each printf call costs quite a bit of code space on the cc1111, so
instead of making multiple short calls, make one longer one.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354840176,1354840176,ce12787b56f699166cafe4cdee9e2a4d8e66ebed
75912f8af04cecc0bbffecb2072d465c3744d4e8,75912f8a,altos: Send APRS packets even during ascent,"altos: Send APRS packets even during ascent

If you're using APRS, presumably you want to watch the rocket going up too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354818646,1354818646,1f84c0adbfa494ddc7dbe276796d999560be9438
1f84c0adbfa494ddc7dbe276796d999560be9438,1f84c0ad,"altos: Allow telemetry, rdf and APRS to be individually controlled","altos: Allow telemetry, rdf and APRS to be individually controlled

But, only when APRS is available so that TeleMetrum and TeleMini don't
change behaviour

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354818494,1354818494,f661da527fb4a3a492f5322e2a718d441e1cde83
f661da527fb4a3a492f5322e2a718d441e1cde83,f661da52,altos: Hook up APRS to telemetry loop,"altos: Hook up APRS to telemetry loop

Send APRS packet once every 2 seconds

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354818219,1354818219,c1e6fa32b856b91afa355cd272d2d7287d3ccca1
c1e6fa32b856b91afa355cd272d2d7287d3ccca1,c1e6fa32,altos: Hook APRS up to the radio,"altos: Hook APRS up to the radio

This adds an arbitrary-length packet writing function to the radio
code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354817531,1354817531,51ef826372f466f44901c4c609ed6a987d30fda4
51ef826372f466f44901c4c609ed6a987d30fda4,51ef8263,altos: Prepare APRS for use within altos itself,"altos: Prepare APRS for use within altos itself

Make all variables static, const-ify constants, change the public
name of the single entry point.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354779587,1354779587,74969483736381858484dca9ebb528d9d2d73f5b
74969483736381858484dca9ebb528d9d2d73f5b,74969483,altos: Start restructuring APRS code to create and send packets,"altos: Start restructuring APRS code to create and send packets

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354775026,1354775026,933d654ec917d9794e87407a7e579438bb738d54
933d654ec917d9794e87407a7e579438bb738d54,933d654e,altos: Remove a bunch of time bits from the APRS code,"altos: Remove a bunch of time bits from the APRS code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354772267,1354772267,684f53d67379cf2ae696fab93d81e49208dfa43c
684f53d67379cf2ae696fab93d81e49208dfa43c,684f53d6,altos: Remove APRS sine-wave table,"altos: Remove APRS sine-wave table

We're generating a lovely square wave, which appears to be decoded
just fine thankyouverymuch.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354772045,1354772045,b79f448818126258174044a23db5b4f330fd5986
b79f448818126258174044a23db5b4f330fd5986,b79f4488,altos: More APRS trimming,"altos: More APRS trimming

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354771529,1354771529,0bb7200f85db1bc6e39e72e671be9a7aef9c8f09
0bb7200f85db1bc6e39e72e671be9a7aef9c8f09,0bb7200f,altos: Remove more unused APRS code,"altos: Remove more unused APRS code

Getting down to a reasonable amount of code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354771375,1354771375,d717edd18a35376811d6be0d0c7522ee8cc426f9
d717edd18a35376811d6be0d0c7522ee8cc426f9,d717edd1,altos: Reduce printf calls in APRS packet generation,"altos: Reduce printf calls in APRS packet generation

Merge all of the data into a single printf call

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354770817,1354770817,3e1254c4f3261f66d8070250898fe906eb80d8f2
3e1254c4f3261f66d8070250898fe906eb80d8f2,3e1254c4,altos: Strip out everything but the basic position reporting from APRS,"altos: Strip out everything but the basic position reporting from APRS

Any useful data will be sent over the digital link; APRS is strictly
for position tracking

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354770499,1354770499,fe820a8a2dc6248b5edb96a9521536d41b936116
fe820a8a2dc6248b5edb96a9521536d41b936116,fe820a8a,Signed-off-by: Keith Packard <keithp@keithp.com>,"Signed-off-by: Keith Packard <keithp@keithp.com>

altos: Switch APRS to standard position reporting form

Stop using NMEA sentences for position
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354770119,1354770119,03f844ddcd95166211451fda0b20f9b15496294e
03f844ddcd95166211451fda0b20f9b15496294e,03f844dd,altos: Add missing ao_aprs.h file,"altos: Add missing ao_aprs.h file

This has defines for the planned APRS interface

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354767095,1354767095,8b1f186a574c22cebd9daba9d352ec82556c3b28
8b1f186a574c22cebd9daba9d352ec82556c3b28,8b1f186a,altos: Generate all of the APRS messages,"altos: Generate all of the APRS messages

Note that two of them are in NMEA form, which some receivers appear
not to parse

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354767054,1354767054,0c2c47dd7af2fc95de852178c4244daba02f44ed
0c2c47dd7af2fc95de852178c4244daba02f44ed,0c2c47dd,altos: Add test scaffolding for APRS,"altos: Add test scaffolding for APRS

This moves some test code out of ao_aprs.c and into ao_aprs_test.c,
and then adds Makefile fragments to compile and run the resulting
program, creating a wav file as output

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354765449,1354765449,d65751fded3321b8a350e4140c44f87fec95aab2
d65751fded3321b8a350e4140c44f87fec95aab2,d65751fd,altos: Make aprs code output encoded packets to stdout,"altos: Make aprs code output encoded packets to stdout

This generates a .wav file containing a single APRS packet. This has
been tested and appears to be successfully decoded by an APRS receiver.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354764627,1354764627,024e35dc6a0356adfc801a023d5ec208cf3996cb
024e35dc6a0356adfc801a023d5ec208cf3996cb,024e35dc,altos: Add Pico Beacon code as ao_aprs.c,"altos: Add Pico Beacon code as ao_aprs.c

Pico Beacon hooks a GPS to an AD9954 DDS radio chip with a PIC. It
directly synthesizes the necessary AX.25 packets to do APRS
reporting. We're going to appropriate the code for use in Mega Metrum
to (optionally) broadcast APRS packets.

	http://ad7zj.net/kd7lmo/aprsbeacon_code.html

Signed-off-by: Keith Packard <keithp@keithp.com>
(
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354730356,1354730356,ce12787b56f699166cafe4cdee9e2a4d8e66ebed
ce12787b56f699166cafe4cdee9e2a4d8e66ebed,ce12787b,altos: Break out GPS speed resetting sequence,"altos: Break out GPS speed resetting sequence

To set the GPS speed, we delay for 1/2 sec, change speed, then delay
for another 1/2 sec.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354643101,1354643101,d1778937e136fdecf8607dd9b358cf972d87ca34
d1778937e136fdecf8607dd9b358cf972d87ca34,d1778937,altos: shrink ao_companion_status by merging printf calls,"altos: shrink ao_companion_status by merging printf calls

Multiple printf calls are longer than one big one, so merge these
together to save some code space

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354643036,1354643036,f6f440767eece896507903e6e58849f11088829f
f6f440767eece896507903e6e58849f11088829f,f6f44076,Another ao-mega addition which shouldn't be here,"Another ao-mega addition which shouldn't be here

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354639685,1354639685,1f52e8afce514a6b943c92aaa6d7189d11d9fe76
1f52e8afce514a6b943c92aaa6d7189d11d9fe76,1f52e8af,"ao-tools. Oops, let 'ao-mega' slip into build.","ao-tools. Oops, let 'ao-mega' slip into build.

This is a tool to parse ao-mega eeprom files; not sure it'll be that
useful, and it's certainly not usable *yet*.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354613643,1354613643,d4d5d411679d074295d4722f4887fd1cf4f0906c
d4d5d411679d074295d4722f4887fd1cf4f0906c,d4d5d411,ao-sky-flash: Clean up debug printfs a bit,"ao-sky-flash: Clean up debug printfs a bit

This makes debugging output a bit cleaner

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354613439,1354613439,5f6b3790667d9b92370b4fe0dad5626929fea2ba
5f6b3790667d9b92370b4fe0dad5626929fea2ba,5f6b3790,altos: Make skytraq reflashing code try both 9600 and 4800 baud,"altos: Make skytraq reflashing code try both 9600 and 4800 baud

This lets it communicate with the ROM code which boots at 4800 baud
instead of 9600 baud.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354337507,1354337507,dd8b2eadab12965d232640449b1d1c9f2484238c
dd8b2eadab12965d232640449b1d1c9f2484238c,dd8b2ead,ao-tools: Add ao-sky-flash to update GPS firmware,"ao-tools: Add ao-sky-flash to update GPS firmware

This uses a new feature of AltOS to directly connect the GPS chip to
the USB link to reprogram the former.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354325800,1354325800,860d0526737295c695f8e6a790d72b49eb4a686d
860d0526737295c695f8e6a790d72b49eb4a686d,860d0526,altos: Add support for reflashing skytraq GPS chips,"altos: Add support for reflashing skytraq GPS chips

This simply switches the skytraq port to 115200 baud and then
essentially connects it directly to the USB port by forwarding bytes
in both directions.

Once started, the only way out is to reboot the board.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354320643,1354320643,c90ece979f3c95cc6c557c5a2ba8f4a0ce78e173
c90ece979f3c95cc6c557c5a2ba8f4a0ce78e173,c90ece97,altos: Expose GPS serial fifo on MegaMetrum,"altos: Expose GPS serial fifo on MegaMetrum

Necessary for direct access by the GPS reflashing code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354320521,1354320521,ae0ddb0f866a26867f0147e0811717810f74c9ef
ae0ddb0f866a26867f0147e0811717810f74c9ef,ae0ddb0f,altos: Add ao_task_minimize_latency to reduce IRQ delays,"altos: Add ao_task_minimize_latency to reduce IRQ delays

When set, this causes the task switching code to avoid blocking IRQs
while looking for an idle task as that can increase IRQ latencies
enough to drop characters at 115200 baud on the cc1111. Note that this
*also* eliminates the ability to use low power modes as we cannot know
at any point whether some interrupt has come along and woken a task.

Has no effect when using task queues as those require IRQs to be
blocked while looking at the queue. Shouldn't be a problem there
though as the check for no running tasks is very cheap.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354320319,1354320319,f2c2d04f07253a90c4f7da49df43c3969119516b
f2c2d04f07253a90c4f7da49df43c3969119516b,f2c2d04f,altos: Use ao_xmemcpy in ao_log_telem.c,"altos: Use ao_xmemcpy in ao_log_telem.c

This eliminates the libc generic version in TeleTerra

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354320264,1354320264,7db14905af5cbbfa47d1a2026cce6aea9e5aae7a
7db14905af5cbbfa47d1a2026cce6aea9e5aae7a,7db14905,altos: Add support for 115200 baud serial rates,"altos: Add support for 115200 baud serial rates

Necessary for flashing skytraq chips

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354320225,1354320225,0b65402361f36a0c722977bcb63edb26fda0db28
0b65402361f36a0c722977bcb63edb26fda0db28,0b654023,altos: Make stdio 8-bit clean by making pollchar return int,"altos: Make stdio 8-bit clean by making pollchar return int

We were stealing one value (0xff) in the return value from pollchar to
indicate 'not ready yet'. Instead of doing that, use the integer value
-1 and have pollchar return an int instead of a char. That
necessitated cleaning a few other bits to make sure that 0xff wouldn't
get promoted to -1 on accident.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354320067,1354320067,0fa9ce23dd63846337872d6d666a469512614d07
0fa9ce23dd63846337872d6d666a469512614d07,0fa9ce23,altos: Share cc1111 reset/debug-start code,"altos: Share cc1111 reset/debug-start code

These sequences are very similar, differing only in whether the dbg
clock line is toggled while holding reset low for a while.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354317059,1354317059,cb01d968f21a171682e6358641edaf5eef815a66
cb01d968f21a171682e6358641edaf5eef815a66,cb01d968,altos: Shrink cc1111/ao_dbg.c a bit,"altos: Shrink cc1111/ao_dbg.c a bit

Share code for osequence of ao_dbg_long_delay(); ao_dbg_send_bits()

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354316731,1354316731,81648829defbaf49fc98c4520540f7a20c50c417
81648829defbaf49fc98c4520540f7a20c50c417,81648829,altos: Share getnibble function,"altos: Share getnibble function

Two implementations of the same function, one in cc1111/ao_dbg.c and
the other in core/ao_send_packet.c.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354316661,1354316661,289ead258e217bc10493caab12a8b477f1bc2865
289ead258e217bc10493caab12a8b477f1bc2865,289ead25,altos: Make TeleBalloon v1.1 build again,"altos: Make TeleBalloon v1.1 build again

This is untested, but at least it builds now

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1354250211,1354250317,ceea0e75ac42acac4a20bf88f34bb93fd2768f4c
ceea0e75ac42acac4a20bf88f34bb93fd2768f4c,ceea0e75,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1353440258,1353440258,"7738ddc5dcf4a9609ae2b066a783e3c9fa03d3be,285fccfa82d89b0decc3b44f413eef9d0c8f1e63"
7738ddc5dcf4a9609ae2b066a783e3c9fa03d3be,7738ddc5,"let upstream version rule, don't force use of Debian version in firmware","let upstream version rule, don't force use of Debian version in firmware
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1353440186,1353440186,fa3beed645c7bff08d22a657daffe75059dc7b88
285fccfa82d89b0decc3b44f413eef9d0c8f1e63,285fccfa,altos: Slow down micropeak report timing,"altos: Slow down micropeak report timing

This makes reading the LED a lot easier.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353263777,1353263777,8ff0db3979405357003b52022e564a3da75ec3fb
8ff0db3979405357003b52022e564a3da75ec3fb,8ff0db39,"altos: micropeak LED is orange now, not blue","altos: micropeak LED is orange now, not blue

Change the names around to match

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353263739,1353263739,ba3532a8ca7083b09fde5827faeb95f0c2f3b07c
ba3532a8ca7083b09fde5827faeb95f0c2f3b07c,ba3532a8,doc: Minor updates to the micropeak docs,"doc: Minor updates to the micropeak docs

Mention light issue in quick start guide. Update run-time estimate to
40 hours (measured over 44 hours)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353262852,1353262852,1df3e6402489480e30600304bf024481902f9425
1df3e6402489480e30600304bf024481902f9425,1df3e640,"altos: Clean everything, even if we don't have compilers","altos: Clean everything, even if we don't have compilers

This ensures that stale bits aren't left if PATH isn't set right when
'make clean' is called.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353262514,1353262514,c4737c81ee2da826b38cc52efbfb09017e6825ca
c4737c81ee2da826b38cc52efbfb09017e6825ca,c4737c81,altoslib: Reset telem tracking state when switching altimeters,"altoslib: Reset telem tracking state when switching altimeters

This discards any local state when the new telem packet has a
different serial number

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353262429,1353262429,fcb801b145e1ae6f1c0b3418a99245d34dbf5aa4
fcb801b145e1ae6f1c0b3418a99245d34dbf5aa4,fcb801b1,altoslib: Allow flight number to be zero,"altoslib: Allow flight number to be zero

It's zero when there's no storage space on the device. Instead of
waiting for non-zero flight number, wait for the seen_flight bit to be
set in the telem tracking state

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353262229,1353262229,c494eecc51f7d80e24e5db7af0021c56cb6871d4
c494eecc51f7d80e24e5db7af0021c56cb6871d4,c494eecc,"altoslib: MegaMetrum data telem packets have sensor data, not flight no","altoslib: MegaMetrum data telem packets have sensor data, not flight no

Setting the seen_flight bit without a flight number leads to bogus
file names

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353262118,1353262118,70c9fc74a68fdb92569eb73295cfa154cf3768f4
70c9fc74a68fdb92569eb73295cfa154cf3768f4,70c9fc74,altos: Make Tm recovery mode set RF cal and callsign too,"altos: Make Tm recovery mode set RF cal and callsign too

This lets us connect to Tm even if someone messes up the RF
calibration or callsign info

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353261054,1353261054,fa3beed645c7bff08d22a657daffe75059dc7b88
fa3beed645c7bff08d22a657daffe75059dc7b88,fa3beed6,altos: fix cc1120 radio test - state wasn't made static,"altos: fix cc1120 radio test - state wasn't made static

so whether the radio got turned on was random.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353257191,1353257191,e037fbc004e1aa7d631ae999e587bdde2f6b71c9
e037fbc004e1aa7d631ae999e587bdde2f6b71c9,e037fbc0,altoslib: Add (disabled) conversion for MS5611,"altoslib: Add (disabled) conversion for MS5611

In case we actually end up shipping an MS5611-based board at some
point, it will be nice to have the java code on hand

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353202441,1353253602,0606dc013d8b89fd5de0548af0de20fdab5c27d4
0606dc013d8b89fd5de0548af0de20fdab5c27d4,0606dc01,doc: Start updating AltOS documentation for multi-arch,"doc: Start updating AltOS documentation for multi-arch

Now that AltOS supports many processors, start updating the
documentation to match.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1353133157,1353133157,b3205a1d246e5ed229256aa787f26e6e122b7a2f
b3205a1d246e5ed229256aa787f26e6e122b7a2f,b3205a1d,altos: Build megadongle when possible,"altos: Build megadongle when possible

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351817542,1351817542,793b950083d09ead4f6230e041ad43aa9f5f2179
793b950083d09ead4f6230e041ad43aa9f5f2179,793b9500,altos/megadongle: Add megadongle product,"altos/megadongle: Add megadongle product

Looks a lot like teledongle from a feature perspective.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351792301,1351792301,f74d724f92b335d6c0674d0f1fcc650b729401df
f74d724f92b335d6c0674d0f1fcc650b729401df,f74d724f,altos: Remove legacy telemetry from ao_monitor when not needed,"altos: Remove legacy telemetry from ao_monitor when not needed

For products not supporting LEGACY_MONITOR, remove the (undefined)
structs from the ao_monitor union.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351792203,1351792203,e4d931cd99a7c91803584b71670e30c0d00217df
e4d931cd99a7c91803584b71670e30c0d00217df,e4d931cd,altos: Remove 'volatile' from ao_rssi.c globals,"altos: Remove 'volatile' from ao_rssi.c globals

No need for this, the variables aren't changed at interrupt time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351792157,1351792157,86f8b92149d1027b1d6d6b1cae097cfe47b02090
86f8b92149d1027b1d6d6b1cae097cfe47b02090,86f8b921,altos/stm: Support LEDs on multiple ports,"altos/stm: Support LEDs on multiple ports

Split out the bits in a fairly simplistic fashion so that we support
no more than 16 LEDs still.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351792088,1351792088,fcdaa0d748058a7f52a1bdc1a1627dc394762e5a
fcdaa0d748058a7f52a1bdc1a1627dc394762e5a,fcdaa0d7,altos/attiny: Remove debugging code which frobs PB1,"altos/attiny: Remove debugging code which frobs PB1

This was clearly stuck there to debug something; not a good idea...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351652211,1351657887,af8cb40851a5cf5e3bd06ddd85e4e2df16bfbad2
af8cb40851a5cf5e3bd06ddd85e4e2df16bfbad2,af8cb408,altos/micropeak: Run MS5607 at max resolution for micropeak,"altos/micropeak: Run MS5607 at max resolution for micropeak

We've got lots of time, so get the highest resolution baro data available.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351651485,1351657887,371da0c909098092db7b596496df9d58eed43703
371da0c909098092db7b596496df9d58eed43703,371da0c9,altos/micropeak: Clock micropeak at 250kHz to save power,"altos/micropeak: Clock micropeak at 250kHz to save power

This reduces average current consumption from 2mA to .4mA. This
makes the battery last longer, but also gets the current under
something that the typical CR1025 battery can support. Would be nice
to reduce current even further; cheap CR1025 batteries still seem to
fade a bit at this current level.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351651268,1351651268,e8a4a00a5bb333d4ee9601d53242a82dfe0372c2
e8a4a00a5bb333d4ee9601d53242a82dfe0372c2,e8a4a00a,altos/attiny: Don't initialize the CS pin in the general SPI setup,"altos/attiny: Don't initialize the CS pin in the general SPI setup

Let the CS pin be configured by the driver, which can set the correct
value before enabling the output.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351651195,1351651195,f7d2613bb0a6ab1c63e3f6252a3a2358fdfbc691
f7d2613bb0a6ab1c63e3f6252a3a2358fdfbc691,f7d2613b,altos/micropeak: Set boost detect to 10m. Add 30s boost delay.,"altos/micropeak: Set boost detect to 10m. Add 30s boost delay.

Wait for 30 seconds before even starting look for boost. This provides
an opportunity to close up the airframe, potentially causing pressure
gradients seen by the baro sensor.

Also, require a 10m vertical motion before triggering boost. This
should limit accidental boost detect while capturing any actual flights.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351555625,1351556003,0d0ece403028e8a4453cc380575ed95c5e00ddb7
0d0ece403028e8a4453cc380575ed95c5e00ddb7,0d0ece40,doc: Add micropeak manual,"doc: Add micropeak manual

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351536563,1351536563,424638446b7c7bb3f4aa6b4764d3e68175dcbf8c
424638446b7c7bb3f4aa6b4764d3e68175dcbf8c,42463844,altos: Build micropeak when avr-gcc is available,"altos: Build micropeak when avr-gcc is available

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351536538,1351536538,e9ea0ad4024532fd6f87bb6708bf76b0c7aa1c5b
e9ea0ad4024532fd6f87bb6708bf76b0c7aa1c5b,e9ea0ad4,altos/micropeak: Switch to MS5607 sensor. Require 4m for boost. Elide dead code,"altos/micropeak: Switch to MS5607 sensor. Require 4m for boost. Elide dead code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351536437,1351536437,0623bc06a77536b903da09acbd12999d0ed05360
0623bc06a77536b903da09acbd12999d0ed05360,0623bc06,altos/attiny: Update to new interrupt macros,"altos/attiny: Update to new interrupt macros

Add ao_arch_block/release_interrupts macros to attiny architecture

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351536182,1351536182,a46c9398a5f02ff4b52b7a4309a51498560cadb5
a46c9398a5f02ff4b52b7a4309a51498560cadb5,a46c9398,Merge remote-tracking branch 'mjb/altosdroid',"Merge remote-tracking branch 'mjb/altosdroid'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351285712,1351285712,"e57ab2a7bfb69c0ef9b5b7fa8e53e20a500e7c6c,56023cf5da9deede9fe627fe327783eceecf08f7"
e57ab2a7bfb69c0ef9b5b7fa8e53e20a500e7c6c,e57ab2a7,altos: Provide ao_task_alarm_tick to reduce per-tick cost,"altos: Provide ao_task_alarm_tick to reduce per-tick cost

Cache the next wakeup time and check that before jumping to the task
code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351197730,1351285624,ccf0faa7d26d56deca7928b521d07be40504466a
ccf0faa7d26d56deca7928b521d07be40504466a,ccf0faa7,altos: Leave interrupts disabled while checking for task to run,"altos: Leave interrupts disabled while checking for task to run

Otherwise, we run the risk of an interrupt waking a task after we've
decided to idle the CPU.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351197654,1351285624,9b978cd467f9128f3069765dd8fbf8abad3459a4
9b978cd467f9128f3069765dd8fbf8abad3459a4,9b978cd4,altos: Clean up stm arch macros a bit.,"altos: Clean up stm arch macros a bit.

Turn a bunch of the macros into inline functions.
Clean up the reboot method to use the stm_scb structure.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351197493,1351197493,7ee031bdab33cc6a1e2a7995a7c3a43f3a64b687
7ee031bdab33cc6a1e2a7995a7c3a43f3a64b687,7ee031bd,"altos: Clean up cc1111 architecture macros a bit, removing cli/sei","altos: Clean up cc1111 architecture macros a bit, removing cli/sei

Just reformatting changes, aside from the removal of cli/sei

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351197347,1351197347,ff6a439cd24e239abd97107ecedf12dca71e59a5
ff6a439cd24e239abd97107ecedf12dca71e59a5,ff6a439c,altos: Wrap ao_container_of value in parens,"altos: Wrap ao_container_of value in parens

Keeps the cast from being separated from the value when used
in expressions.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351197223,1351197223,f221c78e6237e0a118ebe85c25e433fe16a7735d
f221c78e6237e0a118ebe85c25e433fe16a7735d,f221c78e,altos: Switch drivers to ao_arch_block/release_interrupts,"altos: Switch drivers to ao_arch_block/release_interrupts

Stop using cli/sei, which are avr-specific

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351189542,1351189542,963f7715be6c67056bbd8bbe898639adac64fc29
56023cf5da9deede9fe627fe327783eceecf08f7,56023cf5,altosdroid: more restrictive commit no. matching,"altosdroid: more restrictive commit no. matching

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1351150760,1351150760,bb3f42daffafb497639c2c678f6106ce54523ff3
bb3f42daffafb497639c2c678f6106ce54523ff3,bb3f42da,altosdroid: more reliable branch detection,"altosdroid: more reliable branch detection

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1351150319,1351150498,963f7715be6c67056bbd8bbe898639adac64fc29
963f7715be6c67056bbd8bbe898639adac64fc29,963f7715,Bump version to 1.1.9.2,"Bump version to 1.1.9.2

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351149177,1351149177,282f0451dd141db3304ab73e4020a849e59721eb
282f0451dd141db3304ab73e4020a849e59721eb,282f0451,Merge remote-tracking branch 'mjb/altosdroid',"Merge remote-tracking branch 'mjb/altosdroid'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351148941,1351148941,"0680d62d57496cea7ae4f1ef317c46e689b28e21,78e1de481bfdbf7c7bb908c317b23c8ee275c84f"
0680d62d57496cea7ae4f1ef317c46e689b28e21,0680d62d,altos/megametrum: Depend on Makefile contents for build,"altos/megametrum: Depend on Makefile contents for build

This ensures that everything is rebuilt when the Makefile changes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351148667,1351148834,b49c751749dcd3e78991463c098f8d916f52179d
b49c751749dcd3e78991463c098f8d916f52179d,b49c7517,altos: Add task queues.,"altos: Add task queues.

This replaces the array-based scheduler with a queue-based one
instead. It should have the same basic scheduling semantics, but it
walks shorter lists for each operation, making it much more efficient
when the system has a lot of tasks.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351147855,1351148834,4b13d3c659240e5a8347b1ba7ab0bf1d8355eba3
4b13d3c659240e5a8347b1ba7ab0bf1d8355eba3,4b13d3c6,altos: Add stack-guard code. Uses STM MPU to trap stack overflow.,"altos: Add stack-guard code. Uses STM MPU to trap stack overflow.

This marks the lowest portion of the stack as inaccessible to the CPU,
causing the processor to fault when it reaches it. The fault then
generates a panic message so that the user can know what happened.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351144015,1351148834,e80fa6de4ccc5c4851eab9fb941f9282d2e3eb16
e80fa6de4ccc5c4851eab9fb941f9282d2e3eb16,e80fa6de,altos: Replace __critical usage with ao_arch_critical as needed,"altos: Replace __critical usage with ao_arch_critical as needed

sdcc offers __critical as a machine-independent way to block
interrupts, but as gcc doesn't, we need to use a compiler-independent
construct instead. ao_arch_critical has been around since the AVR
port, but some old __critical usages remained.

This fixes a bunch of random hangs when communicating with MM over USB
or the radio as the various stdio loops were running without
interrupts blocked between the test and the sleep.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351143332,1351148834,b119e19604aa557a40e848c60d98a67b5f259bbd
b119e19604aa557a40e848c60d98a67b5f259bbd,b119e196,altos: profiling on STM32L,"altos: profiling on STM32L

Add sample-based profiling, using a 1kHz timer

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351055869,1351148834,7d34811ba035367bbf26a8510265754f3fbb5a95
7d34811ba035367bbf26a8510265754f3fbb5a95,7d34811b,altos: Add ao_arch_block/release_interrupts to avr and cc1111,"altos: Add ao_arch_block/release_interrupts to avr and cc1111

Stop using cli/sei for AVR, add replacement to __critical for cc1111

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351146098,1351148834,09aa379fc57cd4f30c18c7bda2532a79109354c2
09aa379fc57cd4f30c18c7bda2532a79109354c2,09aa379f,altos: Force beep timer regs reload when enabling beeper,"altos: Force beep timer regs reload when enabling beeper

Without this, there can be a long delay between asking for the beeper
and having it actually start sounding.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351148100,1351148834,097c931c979d3652ef8e279ba66bb7ce758f37a3
097c931c979d3652ef8e279ba66bb7ce758f37a3,097c931c,"altos: When slave mode first starts, accept any packet","altos: When slave mode first starts, accept any packet

This eliminates the packet sequence matching for the first packet,
allowing outstanding send data to arrive from the master instead of
ignoring packets with data until they match the seqno

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351147969,1351148834,978c16105dd334a4a2807140dbbcc7f306a6b581
978c16105dd334a4a2807140dbbcc7f306a6b581,978c1610,altosui: Allow AltosConfig to abort before serial line starts,"altosui: Allow AltosConfig to abort before serial line starts

Check to see if the serial line is active before trying to close it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1351148145,1351148834,055f3232decc07e064d596469b81cf9869411c2d
78e1de481bfdbf7c7bb908c317b23c8ee275c84f,78e1de48,altosdroid: Add version information to UI,"altosdroid: Add version information to UI

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1351065258,1351065258,5ad62b07bef41921b46cb7251072dc24290ee4c9
5ad62b07bef41921b46cb7251072dc24290ee4c9,5ad62b07,altosdroid: Add branch to BuildInfo,"altosdroid: Add branch to BuildInfo

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1351065129,1351065129,37a09f1edc57924dabcf2a71794a42e37b5a354c
055f3232decc07e064d596469b81cf9869411c2d,055f3232,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1351006716,1351006716,"8ca58e20208495ce63b8256a8ffa43932867e8d5,9e60fa214ad2c48fbe8f7e5c437681aa35d249fa"
8ca58e20208495ce63b8256a8ffa43932867e8d5,8ca58e20,remove local copy of launch-sites.txt and reference to old web location,"remove local copy of launch-sites.txt and reference to old web location
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1351006397,1351006397,23b0c2fe95dbfaa4a8ce603b56b75d12d2c17d8c
37a09f1edc57924dabcf2a71794a42e37b5a354c,37a09f1e,altosdroid: match only the current version tag,"altosdroid: match only the current version tag

Don't match non version tags - and always return the long format of
git describe, rather than just the tag (when the tag is on the current
commit).

Split the commit number/hash more reliably by removing the version tag
from the result first.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1350973372,1350973843,9e60fa214ad2c48fbe8f7e5c437681aa35d249fa
9e60fa214ad2c48fbe8f7e5c437681aa35d249fa,9e60fa21,Merge remote-tracking branch 'mjb/altosdroid',"Merge remote-tracking branch 'mjb/altosdroid'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350970771,1350970771,"27c31572f4f63c2282e1cc583f4402337fcb548a,4b41561abf9144e73995ccc18eadad7936d1dd15"
27c31572f4f63c2282e1cc583f4402337fcb548a,27c31572,altosui: Allow any non-basestation to be configured,"altosui: Allow any non-basestation to be configured

TelePyro has some configuration bits.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350970726,1350970726,79f4e684713cff6bf999cac52f5d9525a6f7d278
79f4e684713cff6bf999cac52f5d9525a6f7d278,79f4e684,altos: make check-avr-mem utility executable,"altos: make check-avr-mem utility executable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350967152,1350967152,d4ea2e7c3ed84fb6f4e880da6c5ddf2a83d3ef61
d4ea2e7c3ed84fb6f4e880da6c5ddf2a83d3ef61,d4ea2e7c,altos: Allow pyro flight state config to be set,"altos: Allow pyro flight state config to be set

Without these lines, flight state compares can't be shown or set.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350967098,1350967098,e80d7cd18fa4dac98d941e86b5956403a7170966
e80d7cd18fa4dac98d941e86b5956403a7170966,e80d7cd1,altos: Let AVR products override the stack size. Set telepyro to 104,"altos: Let AVR products override the stack size. Set telepyro to 104

Otherwise, telepyro doesn't have enough ram...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350967045,1350967045,20496608ca287e65302193ee1afe9f0cad3a36e1
20496608ca287e65302193ee1afe9f0cad3a36e1,20496608,altoslib: capitalize 'Invalid' state name appropriately,"altoslib: capitalize 'Invalid' state name appropriately

It shouldn't ever appear, but it seemed wrong to have it not match the
rest of the strings.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350966972,1350966972,fe00d1169c65cb289f77093cf281efbd0a5d4e64
fe00d1169c65cb289f77093cf281efbd0a5d4e64,fe00d116,altosui/altoslib: Add support for configuring pyro channels,"altosui/altoslib: Add support for configuring pyro channels

This provides a UI on devices which have pyro channels other than
main/apogee.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350966906,1350966906,fd619a01bf3489b1df017aca20362757b087ec11
fd619a01bf3489b1df017aca20362757b087ec11,fd619a01,altos: Add state comparisons to pyro channel conditions,"altos: Add state comparisons to pyro channel conditions

Let pyro channels block waiting for flight state changes. This
allows for pyro channels to be synchronized with the main iginiter
channels.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350921128,1350921128,8cb09f8a3e2dae5f7f3d2d3dbbc81ba40b491e75
4b41561abf9144e73995ccc18eadad7936d1dd15,4b41561a,altosdroid: add autogenerated BuildInfo.java,"altosdroid: add autogenerated BuildInfo.java

* Generated by shell script that parses git describe
* Makefile rule to call script on every run
* also includes eclipse hooks to call shell script on build

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1350860107,1350886678,8cb09f8a3e2dae5f7f3d2d3dbbc81ba40b491e75
8cb09f8a3e2dae5f7f3d2d3dbbc81ba40b491e75,8cb09f8a,altosdroid: AltosState now has speed and max_speed funcs,"altosdroid: AltosState now has speed and max_speed funcs

These pull out the appropriate baro/accel speed values and may use
some fancier values in future.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350878241,1350878241,e4ee3a35dbb1586f65adada0eaf34b7b4e5432eb
e4ee3a35dbb1586f65adada0eaf34b7b4e5432eb,e4ee3a35,altoslib: Add AltosRecordNone.java,"altoslib: Add AltosRecordNone.java

oops. forgot a file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350874262,1350874262,e16c33545640f745cec8dc595b2343359efced57
e16c33545640f745cec8dc595b2343359efced57,e16c3354,altos/test: Use MMA655X in ao_flight_test_mm. Add run-mm to plot mm data,"altos/test: Use MMA655X in ao_flight_test_mm. Add run-mm to plot mm data

Pull MMA655X data out of eeprom file when available. Switch build to
using MMA655x by default.

Clone run-one to plot a single mm flight

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350865576,1350865576,f789b0b94eb01e3875f7711ce053658c31e75fad
f789b0b94eb01e3875f7711ce053658c31e75fad,f789b0b9,altosui: Handle .mega files in Landed tab 'Graph Flight' button,"altosui: Handle .mega files in Landed tab 'Graph Flight' button

Need to check for .mega files here too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350864008,1350864008,6a1a1dae3e00bfcddf31c447f915245a7d42e566
6a1a1dae3e00bfcddf31c447f915245a7d42e566,6a1a1dae,altos: Document mega log packet types,"altos: Document mega log packet types

Just add comments to ao_log.h so it's easy to remember which labels go
with each record.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350863700,1350863700,89c621be35e1a6d3394b0e143391fcf2d94d7b41
89c621be35e1a6d3394b0e143391fcf2d94d7b41,89c621be,altoslib: Parse GPS .mega file entries for reply/graphing,"altoslib: Parse GPS .mega file entries for reply/graphing

The .mega file parsing had a pile of leftovers from when it was cloned
from the .eeprom file parsing code. Replace all of that with the right
parsing bits so that GPS data will be presented correctly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350863603,1350863603,7894c27b2b2c3c46a7c107c8acd5977830f006cf
7894c27b2b2c3c46a7c107c8acd5977830f006cf,7894c27b,altoslib: Move computed state from AltosRecord to AltosState,"altoslib: Move computed state from AltosRecord to AltosState

Make AltosRecord simply track the raw data and have AltosState hold
all computed values, including cross-packet averages and computed speeds.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350861194,1350861194,dec2e455935a71dec13b84bb886252b7f4a1a641
dec2e455935a71dec13b84bb886252b7f4a1a641,dec2e455,altoslib: Compute accelerometer speed from megametrum eeprom data,"altoslib: Compute accelerometer speed from megametrum eeprom data

Duplicates code from the TM eeprom state tracking code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350853867,1350853867,dcadf5e55f076604b0b168be0060026110e263ed
dcadf5e55f076604b0b168be0060026110e263ed,dcadf5e5,altoslib: remove a couple of TM log record types from MM log parsing,"altoslib: remove a couple of TM log record types from MM log parsing

PRESSURE and DEPLOY log records don't occurin MM eeprom files.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350853832,1350853832,1f5a453cb4650fc97cc990a9e42242278c29cc04
1f5a453cb4650fc97cc990a9e42242278c29cc04,1f5a453c,altoslib: MegaMetrum eeprom never loses GPS date,"altoslib: MegaMetrum eeprom never loses GPS date

TeleMetrum had a firmware bug that would fail to record the GPS date
and time correctly, that was hacked around in altosui, but isn't
needed for MegaMetrum. Remove those hacks from the MM path.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350852120,1350852120,84a144e8b479550406323bc3b2cf89026b770746
84a144e8b479550406323bc3b2cf89026b770746,84a144e8,altosui: Correct megametrum eeprom filename date,"altosui: Correct megametrum eeprom filename date

Was fetching day-of-month from the year field

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350849760,1350849760,db0bbf76b5d739b5d7628bc9139dc8fecd501ac3
db0bbf76b5d739b5d7628bc9139dc8fecd501ac3,db0bbf76,altosui: Add new filename filters,"altosui: Add new filename filters

Allow the user to restrict filenames to telem, eeprom or mega files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350849725,1350849725,eea141b2f35722bad4cd31d9484d6d794646f815
eea141b2f35722bad4cd31d9484d6d794646f815,eea141b2,altos/stm: Stop spewing clock out PA8 pin,"altos/stm: Stop spewing clock out PA8 pin

This was used to debug the clock bringup, but is not useful anymore,
and probably a bad idea to boot.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350849663,1350849663,7f664da148ae15d46d179d8ecede6fc0bc710ffb
7f664da148ae15d46d179d8ecede6fc0bc710ffb,7f664da1,Merge branch 'master' into pwmin-new,"Merge branch 'master' into pwmin-new
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350604168,1350604168,"3aba5eb5a75dff3e7c8778561c533903eacb110a,23b0c2fe95dbfaa4a8ce603b56b75d12d2c17d8c"
23b0c2fe95dbfaa4a8ce603b56b75d12d2c17d8c,23b0c2fe,"altosui: Re-add a couple of ""unused"" values","altosui: Re-add a couple of ""unused"" values

The values in these calls aren't needed, but the side-effects are, so
add them back in.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350602378,1350602378,05173876d5984a54929db486c9ce1e19bde79526
05173876d5984a54929db486c9ce1e19bde79526,05173876,Bump version to 1.1.9.1,"Bump version to 1.1.9.1

Prepare for Rocketober/Thrustration

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350601379,1350601379,ceb42f4c96076b01ac05577c9fe461b66e72d30d
ceb42f4c96076b01ac05577c9fe461b66e72d30d,ceb42f4c,altos/megametrum: Switch back to using the MS5607,"altos/megametrum: Switch back to using the MS5607

We're planning to ship the MS5607

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350599681,1350599681,5a55501660ebab3b858a48483c5df1cfb4e858e4
5a55501660ebab3b858a48483c5df1cfb4e858e4,5a555016,Merge branch 'master' into mm-ms5611,"Merge branch 'master' into mm-ms5611

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350598732,1350598732,"0361235c9ef56738ba0e97be88a85afef0ce8268,440365bd17d804c2f574c35164612cf1682397d7"
3aba5eb5a75dff3e7c8778561c533903eacb110a,3aba5eb5,altos: Build telescience-pwm product when possible,"altos: Build telescience-pwm product when possible

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350452014,1350452014,f34f0ac7f355149446374a4c82dbf004919bc2dd
f34f0ac7f355149446374a4c82dbf004919bc2dd,f34f0ac7,altos: Add telescience-pwm product,"altos: Add telescience-pwm product

Split out special PWM-sampling telescience product

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350451264,1350451930,14698c424f833dc6d2fb38f69f5f661804cf8303
14698c424f833dc6d2fb38f69f5f661804cf8303,14698c42,altos: Only enable PWM on telescience_pwm product,"altos: Only enable PWM on telescience_pwm product

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350451045,1350451045,ac318c19594569532f1fa53b639eefa28d9b7c34
ac318c19594569532f1fa53b639eefa28d9b7c34,ac318c19,telescience: correctly calculating rate values with higher resolution,"telescience: correctly calculating rate values with higher resolution
",,,,Robert Garbee,robert@gag.com,Keith Packard,keithp@keithp.com,1342658460,1350450998,da7ac5e95575f6aa1d2514748869771b7686c0e1
da7ac5e95575f6aa1d2514748869771b7686c0e1,da7ac5e9,ICP3 working,"ICP3 working
",,,,Robert Garbee,robert@gag.com,Keith Packard,keithp@keithp.com,1342643045,1350450991,ed5aa2329985ffbaba74514e0555f67fc378a8d8
ed5aa2329985ffbaba74514e0555f67fc378a8d8,ed5aa232,Timer 3 working with slower clock and all 16 bits.,"Timer 3 working with slower clock and all 16 bits.
",,,,Robert Garbee,robert@gag.com,Keith Packard,keithp@keithp.com,1342640487,1350450985,1d7e6f5dcb29535cde9b7dfd6998d7889baf835b
1d7e6f5dcb29535cde9b7dfd6998d7889baf835b,1d7e6f5d,"first work on PWM input to TeleScience, 'p' command displays timer 1","first work on PWM input to TeleScience, 'p' command displays timer 1
",,,,Robert Garbee,robert@gag.com,Keith Packard,keithp@keithp.com,1342553028,1350450973,1747ab07dab6f4e977e0c3e83b57510cd668e369
1747ab07dab6f4e977e0c3e83b57510cd668e369,1747ab07,telescience: steal last adc channel for icp3 most recent value,"telescience: steal last adc channel for icp3 most recent value
Make the ICP3 rpm counter use in ao_adc_avr.c optional

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Robert Garbee,robert@gag.com,Keith Packard,keithp@keithp.com,1342719620,1350450672,440365bd17d804c2f574c35164612cf1682397d7
440365bd17d804c2f574c35164612cf1682397d7,440365bd,altosui: Accept serial number of zero for eeprom download,"altosui: Accept serial number of zero for eeprom download

AVR-based products don't have a valid serial number, and so usually
report 0. Accept this by making the 'no serial number' case check for
negative values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350449663,1350449663,4d6d90e15db30991bf81060a0876ae8adb843c75
4d6d90e15db30991bf81060a0876ae8adb843c75,4d6d90e1,altos/avr: Use ISR_BLOCK to disable interrupts during slave ISR,"altos/avr: Use ISR_BLOCK to disable interrupts during slave ISR

This avoids enabling and then immediatly disabling them

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350446938,1350446938,b8d8b23ca5e6c2d3a19f8aeda2764b43d25eb9d6
b8d8b23ca5e6c2d3a19f8aeda2764b43d25eb9d6,b8d8b23c,altosui: Print exception stack trace when tracking flights,"altosui: Print exception stack trace when tracking flights

More useful in fixing the problem

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350432845,1350432845,ef9cb19d8b210e02eaa1c657833c1bd5fc619ad8
ef9cb19d8b210e02eaa1c657833c1bd5fc619ad8,ef9cb19d,altosui: Handle missing pad distance in descent tab,"altosui: Handle missing pad distance in descent tab

When the GPS isn't locked, the distance from the pad cannot be
computed and is left missing. Not crashing in this case is more useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350432784,1350432784,60880bda2153ba3122c7102cd2bacbcca73b9e0d
60880bda2153ba3122c7102cd2bacbcca73b9e0d,60880bda,altos/telelco: Make the RSSI led turn red when no packet is received,"altos/telelco: Make the RSSI led turn red when no packet is received

This involved splitting out the notion of ever having received an
answer and having received an answer from the last query.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350285897,1350285897,5f31f6652f4b0898214d06d009af823a1ed3b96a
5f31f6652f4b0898214d06d009af823a1ed3b96a,5f31f665,altos/telelco: 10ms is not enough time to get a packet back,"altos/telelco: 10ms is not enough time to get a packet back

Not reliable, so bump to 20ms

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350285868,1350285868,fdc00ec143022356bf8cdbb28812f045b439c549
fdc00ec143022356bf8cdbb28812f045b439c549,fdc00ec1,altos/telelco: Only display every 10th box number during scan,"altos/telelco: Only display every 10th box number during scan

This reduces the scan time to about 4 seconds, which seems tolerable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350284877,1350284877,c6069e38d6d2f9b37aa8671c41b4a470d92996a4
c6069e38d6d2f9b37aa8671c41b4a470d92996a4,c6069e38,altos/telelco: Crank up SPI speed to cc1111,"altos/telelco: Crank up SPI speed to cc1111

The cc1111 can handle up to 3MHz, so use 2MHz. Also, crank down the
packet wait time to 10ms, which should be plenty long for the remote
box to receive and return a packet.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350284817,1350284817,80227c08444d5c82fd43320644cdeec6f34fee1b
80227c08444d5c82fd43320644cdeec6f34fee1b,80227c08,altos/stm: Declare all SPI bus speeds,"altos/stm: Declare all SPI bus speeds

Just list them all so users can pick what they like

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350284770,1350284770,44c13005f34fdf7d4831e86e1f3e8729e9b67a68
44c13005f34fdf7d4831e86e1f3e8729e9b67a68,44c13005,altos/telelco: Actually set pad when it changes,"altos/telelco: Actually set pad when it changes

Oops. Lost the actual assignment to the current pad

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350283258,1350283258,b042f3d6e6b3241cd5e55cf893242ea599d3c0e9
b042f3d6e6b3241cd5e55cf893242ea599d3c0e9,b042f3d6,altos/telelco: Handle case where no boxes are present,"altos/telelco: Handle case where no boxes are present

Don't infinite loop looking for something which isn't there

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350282289,1350282289,56ebb0a2f50fd56f4f0b0c695e516bee8fae36fb
56ebb0a2f50fd56f4f0b0c695e516bee8fae36fb,56ebb0a2,altos/telelco: Only present valid pads,"altos/telelco: Only present valid pads

Limit pad display to valid pads, skipping missing ones.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350281805,1350281805,84c56b1e92fca181207c468ea6351db3c2f196fb
84c56b1e92fca181207c468ea6351db3c2f196fb,84c56b1e,altos/telefire: Report valid channels instead of valid pins,"altos/telefire: Report valid channels instead of valid pins

Now that pins don't match channels 1:1, make sure that the report back
to the LCO names the channels instead of the pin numbers.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350281084,1350281084,91b8c8b20cead2836ec835f44b4ca0cf06cbf518
91b8c8b20cead2836ec835f44b4ca0cf06cbf518,91b8c8b2,altos/test: Display MPU6000 values in ao_flight_test_mm output,"altos/test: Display MPU6000 values in ao_flight_test_mm output

No computation yet, just making the values visible in the output

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350165886,1350165886,c6eec0bec06d2e246ea3c9552818ad3180c1e318
c6eec0bec06d2e246ea3c9552818ad3180c1e318,c6eec0be,altos: Define full-scale gyro and accel values for MPU6000,"altos: Define full-scale gyro and accel values for MPU6000

This lets other code convert MPU6000 readings into canonical units

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350165840,1350165840,5caf56e89678637c1afa79700a2fa09aa67dea9b
5caf56e89678637c1afa79700a2fa09aa67dea9b,5caf56e8,"altos: When missing MMA655x, create fake Z accel value","altos: When missing MMA655x, create fake Z accel value

This avoids overwriting the MPU6000 y acceleration value so that other
computations using that value can work unmodified.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350165762,1350165762,321d0f68c04a5a9c6ea7874081e6245d44c48bb4
321d0f68c04a5a9c6ea7874081e6245d44c48bb4,321d0f68,altos/test: Add ao_flight_test_mm,"altos/test: Add ao_flight_test_mm

This reads mega metrum eeprom files and runs the flight code over it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350160743,1350160743,0ec77f5c90e0b930488ae2ab75efcbba8a3bd1d8
0ec77f5c90e0b930488ae2ab75efcbba8a3bd1d8,0ec77f5c,altos: Eliminate implicit 1 byte offset in uint16/int16 functions,"altos: Eliminate implicit 1 byte offset in uint16/int16 functions

Make callers explicitly compute the full offset

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350160649,1350160649,2733d1b71bbac2c5ef4a2c3a1992ba448e981267
2733d1b71bbac2c5ef4a2c3a1992ba448e981267,2733d1b7,altos: Split out ms5607 conversion code for use in ao_flight_test,"altos: Split out ms5607 conversion code for use in ao_flight_test

Makes the conversion code available even where the driver isn't needed

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350160542,1350160542,46abd248fb2eb84f161672ffce121b2203d42be0
46abd248fb2eb84f161672ffce121b2203d42be0,46abd248,altos: struct ao_log_mega doesn't have a ground temp value,"altos: struct ao_log_mega doesn't have a ground temp value

There's no averaged ground temperature recorded in the flight system
to save there, so just remove the field

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350160468,1350160468,eea1c8da986f9dbd0ca58c926a2bbe01721c1bda
eea1c8da986f9dbd0ca58c926a2bbe01721c1bda,eea1c8da,altos: Document a few member offsets in struct ao_log_record,"altos: Document a few member offsets in struct ao_log_record

Incomplete, but useful even so

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350160425,1350160425,c607bd1442e60fec1421955c996f6aad1d98647a
c607bd1442e60fec1421955c996f6aad1d98647a,c607bd14,altosui: Parse .mega files from command line,"altosui: Parse .mega files from command line

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350160376,1350160376,162a21dc423c2883a54f7d2a154871ae714d1552
162a21dc423c2883a54f7d2a154871ae714d1552,162a21dc,altos: Add .gitignore for micropeak,"altos: Add .gitignore for micropeak

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350077234,1350077234,6cfb2d3b1c75916ee69d069519edc675e37e1aa1
6cfb2d3b1c75916ee69d069519edc675e37e1aa1,6cfb2d3b,altos: Add (untested) driver for AT24C i2c flash parts,"altos: Add (untested) driver for AT24C i2c flash parts

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350077168,1350077168,b9bf8e01e243508297f28b102cb2477dc1bc74df
b9bf8e01e243508297f28b102cb2477dc1bc74df,b9bf8e01,altos: Add initial micropeak implementation,"altos: Add initial micropeak implementation

Blinks out max height in decimeters, stores previous flight data to
internal eeprom.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350076961,1350076961,9c732effeb2ef4a4d8bc9599febed74a6ec2f466
9c732effeb2ef4a4d8bc9599febed74a6ec2f466,9c732eff,altos: Allow products to define which LED to panic with,"altos: Allow products to define which LED to panic with

Continue to use AO_LED_RED by default.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350076717,1350076717,767b74e1466ad4e31746340081d6d60e40359425
767b74e1466ad4e31746340081d6d60e40359425,767b74e1,"altos: Megametrum uses altitude-pa.h, not altitude.h","altos: Megametrum uses altitude-pa.h, not altitude.h

Make sure megametrum gets rebuilt as needed when the various
altitude-pa related files change

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350076099,1350076099,64500ab11ab76d2309608f8e02a1dd9658963b3e
64500ab11ab76d2309608f8e02a1dd9658963b3e,64500ab1,altos: Add attiny architecture files,"altos: Add attiny architecture files

These are designed to work with the ATtiny85 processor, but can
presuambly be easily adapted to others in that series

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350075897,1350075897,16bad3b6ab65cf31b19152127cb6af69142c5c12
16bad3b6ab65cf31b19152127cb6af69142c5c12,16bad3b6,altos: Include struct ao_data declaration only when used,"altos: Include struct ao_data declaration only when used

Leave it out for products that don't have a ring of sensor data

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350075808,1350075808,7751c9cbc630f7251b8988f8da68be9a54ff552c
7751c9cbc630f7251b8988f8da68be9a54ff552c,7751c9cb,altos: Clean up types in Pa conversion testing code. Only test to 40km,"altos: Clean up types in Pa conversion testing code. Only test to 40km

A couple of missing 'int' declarations.
Only test to 40km as above that there aren't enough data points to do
anything reasonable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350075749,1350075749,866d10b3faa96f6c5a2c495a2c12a0d2bc8259ef
866d10b3faa96f6c5a2c495a2c12a0d2bc8259ef,866d10b3,altos: Elide ao_altitude_to_pa in flight firmware,"altos: Elide ao_altitude_to_pa in flight firmware

Only the conversion testing code needs to get back from altitude to
pressure, so don't include that code in other environments.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350075676,1350075676,68308908afbd1f04b17056d2be408c89b3578c86
68308908afbd1f04b17056d2be408c89b3578c86,68308908,altos: Parameterize altitude table access and initialization,"altos: Parameterize altitude table access and initialization

This allows projects to store the altitude data in different
representations or with different access modes.

By default, altitude data is stored in meters, but the initializers
include decimeter values so those can be used instead if desired.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350075590,1350075590,175380a436efa35bbfae2ee5e29e12e9ef86fbde
175380a436efa35bbfae2ee5e29e12e9ef86fbde,175380a4,altos: Use alt_t for all Pascal-based altitude data,"altos: Use alt_t for all Pascal-based altitude data

This allows alt_t to be overridden for systems using the MS5607/MS5611
sensors

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350075469,1350075469,be0a28ee7a6fbd98fc8113db8501bb791a112fa0
be0a28ee7a6fbd98fc8113db8501bb791a112fa0,be0a28ee,altos: Allow for other mutex implementations,"altos: Allow for other mutex implementations

Allow projects to replace ao_mutex_get and ao_mutex_put with macros

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350075333,1350075333,6a3ee911353291b04e161d50a181ed4211d467a2
6a3ee911353291b04e161d50a181ed4211d467a2,6a3ee911,altos: Allow projects to specify clock at other than 100Hz,"altos: Allow projects to specify clock at other than 100Hz

Leave the default at 100Hz, but allow it to be overridden

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350075277,1350075277,7795d8309b3e1147bc37d31a0adde42d7dee6cd1
7795d8309b3e1147bc37d31a0adde42d7dee6cd1,7795d830,altos: Prepare ms5607 driver for use in non-tasking products,"altos: Prepare ms5607 driver for use in non-tasking products

Micropeak doesn't have tasking, prepare the ms5607 driver for that

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350074227,1350074454,a07b8ba166e05e7d1722c59651ef00e9fb7580d5
a07b8ba166e05e7d1722c59651ef00e9fb7580d5,a07b8ba1,altos: Split task definitions out to ao_task.h,"altos: Split task definitions out to ao_task.h

And only include them if using tasks

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1350073877,1350073877,3f059f8878a79b3154a19b6803fbc367eda80dc9
3f059f8878a79b3154a19b6803fbc367eda80dc9,3f059f88,altos/telefire: Add siren/strobe support,"altos/telefire: Add siren/strobe support

This also involved hacking up the code to allow for non-zero offsets
for the pad firing and continuity pins.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349904487,1349904487,422799d9be36ef71b63c1c0fd80d5e76da802949
0361235c9ef56738ba0e97be88a85afef0ce8268,0361235c,altos: Fix up ms5607 and mma655x commands to work again,"altos: Fix up ms5607 and mma655x commands to work again

These just display the most recently fetched values

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349763859,1349763859,39c5738acdfdf0c87b64de6135fe107971cfa12b
39c5738acdfdf0c87b64de6135fe107971cfa12b,39c5738a,altos: Go back to recording sensor data in globals,"altos: Go back to recording sensor data in globals

Instead of trying to get things into the ring from a variety of
functions, go back to the simpler method of storing them in globals
and having the ADC code just pluck out the most recent values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349762656,1349762656,16bbe9d25856259d2694751c364b668638e4a971
422799d9be36ef71b63c1c0fd80d5e76da802949,422799d9,altos: Compute desired frequency when upgrading from pre-1.1,"altos: Compute desired frequency when upgrading from pre-1.1

Instead of just smashing the frequency to 434.550, compute the
frequency from the old radio channel value

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349758795,1349758795,d4b1dffeef3e9ea96e143f74782e4da7d116c0d4
16bbe9d25856259d2694751c364b668638e4a971,16bbe9d2,altos/megametrum: Try running accel and baro in parallel again,"altos/megametrum: Try running accel and baro in parallel again

Now that the baro sensor appears to be working, try running
conversions in parallel to see if that makes the accel cal happy

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349649641,1349649641,6d47dd1d9104745cf68bef23b066c5033ca30a84
6d47dd1d9104745cf68bef23b066c5033ca30a84,6d47dd1d,altos/stm: Set SPI clock high for disabled SPI busses,"altos/stm: Set SPI clock high for disabled SPI busses

This should avoid an accidental low->high transition when switching
between multiple SPI busses.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349577555,1349577555,35cb2dc51708ab572a4c72422e5902a313eda58e
d4b1dffeef3e9ea96e143f74782e4da7d116c0d4,d4b1dffe,altos/telefire: Make sure armed alarm goes off on time,"altos/telefire: Make sure armed alarm goes off on time

Instead of turning the alarm off when a packet is received after the
deadline, just do it in the thread which is awake all of the time.

This prevents the alarm from sticking on when the LCO box is turned
off while the arming key is on.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349573115,1349573115,2cac8c572ce533ded89dae9a412b4d1b5c748342
35cb2dc51708ab572a4c72422e5902a313eda58e,35cb2dc5,altos/stm: Clean up SPI pin configuration code,"altos/stm: Clean up SPI pin configuration code

Make sure none of the pin configurations are being used at startup
time. Split out the pin configuration into separate functions.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349571383,1349571383,41add569413bf3ec564195963277c81f2d2da798
41add569413bf3ec564195963277c81f2d2da798,41add569,altos/drivers: Use data ring values for MS5607 presentation,"altos/drivers: Use data ring values for MS5607 presentation

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349569315,1349569315,0b28eefe6b32033a0e85731aa38af7e07a8b45f5
0b28eefe6b32033a0e85731aa38af7e07a8b45f5,0b28eefe,altos/megametrum: Make MS5607 driver hold SPI bus for whole operation,"altos/megametrum: Make MS5607 driver hold SPI bus for whole operation

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349569270,1349569270,c676ad8048d10ad9da22ea3acf19e4e1872103ff
c676ad8048d10ad9da22ea3acf19e4e1872103ff,c676ad80,altos/megametrum: Use mma655x for acceleration measurements now,"altos/megametrum: Use mma655x for acceleration measurements now

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349568359,1349568359,82fdc42d61340e6b76580ff12a9e1bea59eb8079
82fdc42d61340e6b76580ff12a9e1bea59eb8079,82fdc42d,Merge branch 'master' into mm-ms5611,"Merge branch 'master' into mm-ms5611
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349286268,1349286268,"6b8881a7bdb9f89306a700e9a8853b00df29bf5d,2cac8c572ce533ded89dae9a412b4d1b5c748342"
2cac8c572ce533ded89dae9a412b4d1b5c748342,2cac8c57,altos: Re-enable the ms5607 and mma655x acquisition threads,"altos: Re-enable the ms5607 and mma655x acquisition threads

These were disabled to help with testing in Argonia

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349286208,1349286208,fdd08cc093134c5f87dab9533b99a042a699381b
6b8881a7bdb9f89306a700e9a8853b00df29bf5d,6b8881a7,altos/megametrum: Commit for boards with MS5611 baro sensor,"altos/megametrum: Commit for boards with MS5611 baro sensor

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1349275848,1349275848,fdd08cc093134c5f87dab9533b99a042a699381b
fdd08cc093134c5f87dab9533b99a042a699381b,fdd08cc0,"altos: Provide MS5611 configuration option, HAS_MS5611","altos: Provide MS5611 configuration option, HAS_MS5611

MS5611 and MS5607 use slightly different conversion functions. Alas,
there doesn't appear to be a way to tell them apart in software. This
patch adds the necessary conversion changes and makes them depend on a
compile-time configuration option.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1348897195,1349275530,dc7216d286cc7fe8007f5208ad97a630166572f3
dc7216d286cc7fe8007f5208ad97a630166572f3,dc7216d2,altos: Shrink Pa to altitude table,"altos: Shrink Pa to altitude table

This improves the computation of the table enough that errors from a
470 entry table are almost all < 0.5m.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1348226957,1348226957,7c6231ecef2e4f978a0de452a17a2a24e6e68827
7c6231ecef2e4f978a0de452a17a2a24e6e68827,7c6231ec,Bump revision to 1.2 development branch,"Bump revision to 1.2 development branch

With 1.1 out the door, this now starts the 1.2 development series

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1348133604,1348133604,2f2734bb418f5c3a89fa3f1bf1b98ce4cfe432e1
2f2734bb418f5c3a89fa3f1bf1b98ce4cfe432e1,2f2734bb,Merge remote-tracking branch 'mjb/altosdroid',"Merge remote-tracking branch 'mjb/altosdroid'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1348133419,1348133419,"e69a433fd93b9f6bd2297d8045eb075fee29e73b,3fe5c2f9fc01258d45c20070e9874d76bc6c8c07"
e69a433fd93b9f6bd2297d8045eb075fee29e73b,e69a433f,Merge remote-tracking branch 'mjb/prefs_interface',"Merge remote-tracking branch 'mjb/prefs_interface'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1348133411,1348133411,"19243ecc9b5bbdcc069ae24acf1ca807322c84d8,6e0d672b8a516a604d8ea1abd2bed113c608143f"
19243ecc9b5bbdcc069ae24acf1ca807322c84d8,19243ecc,Merge remote-tracking branch 'mjb/altosui_mjb',"Merge remote-tracking branch 'mjb/altosui_mjb'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1348133395,1348133395,"90c1b6db8d1f401a992fe44983b3df64739fe263,0ef8b7148784ed5bcbea21dde313fb02f50ef734"
3fe5c2f9fc01258d45c20070e9874d76bc6c8c07,3fe5c2f9,altosdroid: initial implementation of telemetry logging.,"altosdroid: initial implementation of telemetry logging.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347968870,1347968870,0541201d4afe3e5d7913465e1db10e586d7182bb
0541201d4afe3e5d7913465e1db10e586d7182bb,0541201d,altoslib: make parts of AltosLog public for usage outside altoslib.,"altoslib: make parts of AltosLog public for usage outside altoslib.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347968826,1347968826,c058ec2d6070458a0b7d3ef56041e985412ee565
c058ec2d6070458a0b7d3ef56041e985412ee565,c058ec2d,"altos{lib,ui,droid}: move OS specific code out of altoslib","altos{lib,ui,droid}: move OS specific code out of altoslib

This is to allow the usage of AltosLog on Android - no swing, so
we need to push the ""home directory"" code used to pick a default
telemetry logging path - using the PreferencesBackend interface
for now.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347968777,1347968777,36e684724e327dbd4319411ef0602fafb4d0c073
36e684724e327dbd4319411ef0602fafb4d0c073,36e68472,altosdroid: cosmetic re-order of methods,"altosdroid: cosmetic re-order of methods

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347968598,1347968598,8f11a6d2c3de228c3cefb95a7d1a76d53e532acd
8f11a6d2c3de228c3cefb95a7d1a76d53e532acd,8f11a6d2,altosdroid: simplify keys() method,"altosdroid: simplify keys() method

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347968531,1347968531,f79b445cc29fc1e424f99c97e71c7d3637bf4ba6
f79b445cc29fc1e424f99c97e71c7d3637bf4ba6,f79b445c,altosdroid: Update Makefile.am,"altosdroid: Update Makefile.am

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347968292,1347968292,fe8ab96e8727c25c04cac473cafb264cf7e80156
90c1b6db8d1f401a992fe44983b3df64739fe263,90c1b6db,further refinment of Releasing document,"further refinment of Releasing document
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347829946,1347829946,7a0cce7fa0c802b1597fef94cfaf00aa0c28c988
7a0cce7fa0c802b1597fef94cfaf00aa0c28c988,7a0cce7f,releasing 1.1.1,"releasing 1.1.1
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347825561,1347825561,0cd443d5e55b2c3b97ecf53389ff76bc4bc6018f
0cd443d5e55b2c3b97ecf53389ff76bc4bc6018f,0cd443d5,Add release notes for version 1.1.1,"Add release notes for version 1.1.1

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347824313,1347824313,cb48dd0b03b445437f751028e8383610b65b0a68
fe8ab96e8727c25c04cac473cafb264cf7e80156,fe8ab96e,"altosdroid: implement AltosPreferencesBackend, and initialize.","altosdroid: implement AltosPreferencesBackend, and initialize.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347802173,1347802173,52d3cad4f744140e1aa06fdfc0d49a0cf8734fd4
52d3cad4f744140e1aa06fdfc0d49a0cf8734fd4,52d3cad4,Merge branch 'prefs_interface' into altosdroid,"Merge branch 'prefs_interface' into altosdroid
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347791224,1347791224,"31f5a02654cbf172beed25f4c518dfb7be8c714e,6e0d672b8a516a604d8ea1abd2bed113c608143f"
cb48dd0b03b445437f751028e8383610b65b0a68,cb48dd0b,altos: Fix telemini sdcdb init file,"altos: Fix telemini sdcdb init file

Set the driver source path for the debugger

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347788365,1347788365,3520bbf1ed6461d1ce7af001c529563a3cffa3c9
3520bbf1ed6461d1ce7af001c529563a3cffa3c9,3520bbf1,altosui: Gather Tm sensor data in Monitor Idle mode,"altosui: Gather Tm sensor data in Monitor Idle mode

Tm is pretty much the same as TM for the analog sensors, it's just
missing the accelerometr. Use the same code for constructing an
AltosRecord for it

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347782300,1347782300,31f5a02654cbf172beed25f4c518dfb7be8c714e
31f5a02654cbf172beed25f4c518dfb7be8c714e,31f5a026,altos: Need to use 16-bit counts for ao_xmem functions,"altos: Need to use 16-bit counts for ao_xmem functions

Trying to use 8-bit counts is a nice optimization which fails when the
count is larger than 255, as is the case with clearing the flash block
in the AT45 driver. This bug resulted in the inability to erase
flights on TeleMetrum v1.0 boards.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347666964,1347666964,b898cf0a2abf2b0478d5afc5aca030c6b4c8bd0b
b898cf0a2abf2b0478d5afc5aca030c6b4c8bd0b,b898cf0a,altosui: Show over-ground-distance in Descent tab,"altosui: Show over-ground-distance in Descent tab

Helps to know where the rocket might land.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347652771,1347652771,f36f73b2d02b72201683cf5795851034bbd6f28e
f36f73b2d02b72201683cf5795851034bbd6f28e,f36f73b2,altosui: Remove debugging from KML export,"altosui: Remove debugging from KML export

Left in from testing the Eeprom export bug

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347652734,1347652734,97ab77d548964115e4b41ad5952194fcd1455c96
97ab77d548964115e4b41ad5952194fcd1455c96,97ab77d5,altosui: Fix Landed tab units,"altosui: Fix Landed tab units

And clean up the whole flight value reporting code base. It would be
nice to create a separate class to make this easier; at present
there's a bunch of customization embedded in how values are presented
in each tab.

Reported by: Bdale Garbee <bdale@gag.com>
Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347646382,1347646382,43e646657502f6162fa02f37fd2bd5aa3e29a1a8
43e646657502f6162fa02f37fd2bd5aa3e29a1a8,43e64665,altoslib: Update GPS seen_values in AltosEepromIterable,"altoslib: Update GPS seen_values in AltosEepromIterable

Otherwise, KML export won't ever get GPS data to write.

Reported by: Bob Brown <prefect@kloudbusters.org>
Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347646137,1347646137,7b6dd9105ba36aa11d6d0ee6e0823965b9beffb9
7b6dd9105ba36aa11d6d0ee6e0823965b9beffb9,7b6dd910,altoslib: Remove duplicate seen_ values in AltosEepromIterable,"altoslib: Remove duplicate seen_ values in AltosEepromIterable

These are defined in AltosRecord; duplicating them is not a good plan

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347646099,1347646099,eefcfa94f360f8c5a7233370d4178525bccbb22f
6e0d672b8a516a604d8ea1abd2bed113c608143f,6e0d672b,altosui: remove un-used import,"altosui: remove un-used import

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347583401,1347601913,f985ea055d935b10ae9ae8441fe808ba2c13c99e
f985ea055d935b10ae9ae8441fe808ba2c13c99e,f985ea05,altosui: revert AltosUIPreferences init() method,"altosui: revert AltosUIPreferences init() method

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347542842,1347601913,9335a74694df00c4876055e7c98661236646f6e5
9335a74694df00c4876055e7c98661236646f6e5,9335a746,altosui: Add return to try/catch.. duh,"altosui: Add return to try/catch.. duh

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347541733,1347601913,d5e199c34ff5a02a4c4cc917c3f0eec32eae72a9
d5e199c34ff5a02a4c4cc917c3f0eec32eae72a9,d5e199c3,altosui: add missing try/catch,"altosui: add missing try/catch

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347541619,1347601912,26c83bc0981036651a89c29771b2ad52c8fb0396
26c83bc0981036651a89c29771b2ad52c8fb0396,26c83bc0,"altosui/altoslib: bug fixes, update Makefile.am","altosui/altoslib: bug fixes, update Makefile.am

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347541433,1347601912,08345b8909922f2ff8f9ed8b4497b9cbea6b26e9
08345b8909922f2ff8f9ed8b4497b9cbea6b26e9,08345b89,"altosui/altoslib: Add call to …Preferences.init() with backend object, remove static init()","altosui/altoslib: Add call to …Preferences.init() with backend object, remove static init()

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347540836,1347601912,17127847300de9a6782b901926a3fcb9ef021b78
17127847300de9a6782b901926a3fcb9ef021b78,17127847,altoslib: Add AltosPreferencesBackend.java to Makefile.am,"altoslib: Add AltosPreferencesBackend.java to Makefile.am

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347540394,1347601912,d875b459b5e9f7bcbbbbe318f947b0451ce6738f
d875b459b5e9f7bcbbbbe318f947b0451ce6738f,d875b459,"altosui/altoslib: add methods to interface, fix imports/exceptions in BT code","altosui/altoslib: add methods to interface, fix imports/exceptions in BT code

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347540299,1347601912,67b618409a0d34fff26cac6025bc159ff92ede9c
67b618409a0d34fff26cac6025bc159ff92ede9c,67b61840,"altosui: add missing methods for Backend, fix BT code.","altosui: add missing methods for Backend, fix BT code.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347540016,1347601878,ec036e8fe057f4b641ba9ee17d6dce2689816047
ec036e8fe057f4b641ba9ee17d6dce2689816047,ec036e8f,"altoslib/altosui: begin moving preferences ""backend"" into interface","altoslib/altosui: begin moving preferences ""backend"" into interface

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347539149,1347601878,0ef8b7148784ed5bcbea21dde313fb02f50ef734
0ef8b7148784ed5bcbea21dde313fb02f50ef734,0ef8b714,altosui: comment out obsolete code - could probably remove the file.,"altosui: comment out obsolete code - could probably remove the file.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347585444,1347585444,6daf71d0af7ffdbbfdb7436edd536bc811850d42
6daf71d0af7ffdbbfdb7436edd536bc811850d42,6daf71d0,altosui: add type to … implements Comparable.,"altosui: add type to … implements Comparable.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347585408,1347585408,d3d69bdecfcb45d1e3a8c6b10c80eef1afcc2310
d3d69bdecfcb45d1e3a8c6b10c80eef1afcc2310,d3d69bde,altosui: comment out/remove dead code,"altosui: comment out/remove dead code

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347585376,1347585376,c9fa8faabb6f7fb59714c42e1029ce3d71c52ff8
c9fa8faabb6f7fb59714c42e1029ce3d71c52ff8,c9fa8faa,"altosui: access class variables by class, not instance","altosui: access class variables by class, not instance

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347585336,1347585336,f9e1c5949a24e27897587b0b0ca00e089f362215
f9e1c5949a24e27897587b0b0ca00e089f362215,f9e1c594,altosui: remove redundant catches,"altosui: remove redundant catches

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347585307,1347585307,38fb6c070ffaf820d524fecce540d91fc6dda57b
38fb6c070ffaf820d524fecce540d91fc6dda57b,38fb6c07,altosui: comment out un-used classes and associated imports,"altosui: comment out un-used classes and associated imports

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347585271,1347585271,ce1b19a012a2c1c623b03efb93b881e297736718
ce1b19a012a2c1c623b03efb93b881e297736718,ce1b19a0,altosui: comment out un-used fields and methods,"altosui: comment out un-used fields and methods

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347585215,1347585215,382c54a0d052c8975b57c995ef83bc8934bde242
382c54a0d052c8975b57c995ef83bc8934bde242,382c54a0,altosui: remove un-used imports,"altosui: remove un-used imports

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1347584998,1347584998,eefcfa94f360f8c5a7233370d4178525bccbb22f
eefcfa94f360f8c5a7233370d4178525bccbb22f,eefcfa94,add note about checking doc copyright date and revision history to Releasing,"add note about checking doc copyright date and revision history to Releasing
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347574422,1347574422,2441090f26c3df66a6ce48d64e64384ce9e5ef82
2441090f26c3df66a6ce48d64e64384ce9e5ef82,2441090f,doc: Add revision history for 1.1. Update copyright date,"doc: Add revision history for 1.1. Update copyright date

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347574353,1347574382,320d90c376dccfe1599505e3b485df8d46e34bb3
320d90c376dccfe1599505e3b485df8d46e34bb3,320d90c3,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347572197,1347572197,"9a7d6431777ce3377b788ddac6cb9fadd53c039c,2e6c6a6c15a7cff9f20b70a4cf58697da1302f01"
2e6c6a6c15a7cff9f20b70a4cf58697da1302f01,2e6c6a6c,doc: Document imperial units and groundstation configuration,"doc: Document imperial units and groundstation configuration

What it says on the tin.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347521727,1347521727,9728b20a4ad9576ac1022dc9a5771f5a3eb92b3d
9a7d6431777ce3377b788ddac6cb9fadd53c039c,9a7d6431,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347519510,1347519510,"2439f53ea21c84f7c510dc191dde025ada24281f,9728b20a4ad9576ac1022dc9a5771f5a3eb92b3d"
9728b20a4ad9576ac1022dc9a5771f5a3eb92b3d,9728b20a,altosui: Exit with an error status when file processing fails,"altosui: Exit with an error status when file processing fails

If the user provides any files on the command line, and if processing
them fails in some way, exit immediately with an error indication.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347519378,1347519378,0564f9b13d4e3050b0a45fc1c4f710ab2b1f9d81
0564f9b13d4e3050b0a45fc1c4f710ab2b1f9d81,0564f9b1,altosui: Leave new_gps indication until gps value is used,"altosui: Leave new_gps indication until gps value is used

During replay, AltosState may not see a new GPS value as soon as it
lands in the state field as additional records with the same timestamp
may come in after the GPS record.

Instead of resetting the new_gps indication when the new record is
created, wait until the new_gps indication is seen by the AltosState
update code and have that clear the new_gps indication.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347514857,1347519253,7e237920abb582d7ceb3e1925b11a848575ac68a
7e237920abb582d7ceb3e1925b11a848575ac68a,7e237920,altosui: Stop downloading eeprom data on a block full of invalid data,"altosui: Stop downloading eeprom data on a block full of invalid data

When no valid records are found within an eeprom block, we assume that
no more data will be found within the entire storage area.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347510745,1347510934,07d9ba938f2742da1bce5d8df55cbc236207a981
2439f53ea21c84f7c510dc191dde025ada24281f,2439f53e,document workaround for 'make fat' not building altoslib,"document workaround for 'make fat' not building altoslib
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347508225,1347508225,07d9ba938f2742da1bce5d8df55cbc236207a981
07d9ba938f2742da1bce5d8df55cbc236207a981,07d9ba93,update Releasing for non-native versioning and builds on debian branch,"update Releasing for non-native versioning and builds on debian branch
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347501007,1347501007,fe009534ce6846b6db96cac8f6c2d53ba8010d91
fe009534ce6846b6db96cac8f6c2d53ba8010d91,fe009534,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347500991,1347500991,"69d42b26223b45df4167aa3baafba100ad71baab,8ee29fe48771dd22a0c5428761ee53a728495d11"
8ee29fe48771dd22a0c5428761ee53a728495d11,8ee29fe4,altosui: Serialize data access in TD config code,"altosui: Serialize data access in TD config code

Setting the values was being done in the UI thread instead of the
Serial thread, which left the serial thread with uninitialized values
when it went to update the displayed value for the current
frequency. All fixed now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347491261,1347491261,19e35de47157923670b1864ce7b04f8d82f3bdea
19e35de47157923670b1864ce7b04f8d82f3bdea,19e35de4,altosui: Lock access to preferences data,"altosui: Lock access to preferences data

These are accessed by several different threads, so keep things sane
by just holding locks across all access.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347491219,1347491219,1b5340c2b75c500011355c4889da443c4b9c4891
1b5340c2b75c500011355c4889da443c4b9c4891,1b5340c2,altosui: Add multi-sized icons to all windows,"altosui: Add multi-sized icons to all windows

This lets the window system pick a better size for presentation

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347480421,1347481599,3e4fc0b3953655eb720372d9b4274cd4bca19556
3e4fc0b3953655eb720372d9b4274cd4bca19556,3e4fc0b3,Reference specific dependent jars in the AltosUI launchers,"Reference specific dependent jars in the AltosUI launchers
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1347462342,1347462342,f0f4f907042e12815284abe1b63ae2d4a5a2d598
f0f4f907042e12815284abe1b63ae2d4a5a2d598,f0f4f907,doc: Mention changes to flight data download UI,"doc: Mention changes to flight data download UI

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347442259,1347442259,42bbe15512533f2d958b8219a02fbd256593092a
42bbe15512533f2d958b8219a02fbd256593092a,42bbe155,altosui: Initialize flight velocity to zero when reading eeprom files,"altosui: Initialize flight velocity to zero when reading eeprom files

Otherwise, the integration of velocity will start at MISSING and get
stranger. Fortunately, we know the initial velocity of the rocket when
sitting on the pad.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347441992,1347441992,b3c3c6eabd6837f0e72acee3906c8f71c6f0030e
b3c3c6eabd6837f0e72acee3906c8f71c6f0030e,b3c3c6ea,altosui: Don't say a decimal point for distances in meters,"altosui: Don't say a decimal point for distances in meters

Useful for distances in miles, but not meters.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347431840,1347431840,87f9a8923656f275f74cfb6c8c6a57bbe59e74f8
87f9a8923656f275f74cfb6c8c6a57bbe59e74f8,87f9a892,altosui: Initialize imperial units checkbox with correct value,"altosui: Initialize imperial units checkbox with correct value

Use imperial units preference instead of serial debug preference. Cut
& paste programming failure...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347431786,1347431786,3fa5fbdfd1ab257028f272fbc32759b39608ddaf
69d42b26223b45df4167aa3baafba100ad71baab,69d42b26,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347431181,1347431181,"3e9078cb1077e7ad0d845f10c2ad0a007df76d29,3fa5fbdfd1ab257028f272fbc32759b39608ddaf"
3fa5fbdfd1ab257028f272fbc32759b39608ddaf,3fa5fbdf,Clean up Windows event handles on com port close,"Clean up Windows event handles on com port close

This avoids having to wait for the receiver to timeout before we can
open the same com port again.

This patch also adds a bit more debugging -- it prints Windows error
messages to stdout along with the file/line where the error was generated.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347429859,1347429859,1a154ce0b9fc3ea360d6bc7e17d6debb2da94438
1a154ce0b9fc3ea360d6bc7e17d6debb2da94438,1a154ce0,Include AltosLib.jar in windows install,"Include AltosLib.jar in windows install

Otherwise, altosui doesn't do much.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347426197,1347426226,4563624638884b7b2f16cd4d396c00690e045999
3e9078cb1077e7ad0d845f10c2ad0a007df76d29,3e9078cb,releasing 1.1,"releasing 1.1
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347423442,1347423442,e5a55dbf265354e7c94be3e2be53c2d5c8fba056
4563624638884b7b2f16cd4d396c00690e045999,45636246,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1347421818,1347421818,"11fbcf5e30e0cd09f2d6b448911d2ef62b7f29c7,e5a55dbf265354e7c94be3e2be53c2d5c8fba056"
11fbcf5e30e0cd09f2d6b448911d2ef62b7f29c7,11fbcf5e,Added the feature to AC to default --with-android to $ANDROID_SDK (if set),"Added the feature to AC to default --with-android to $ANDROID_SDK (if set)
Fixed typos in altosui/Makefile.am (had removed JCOMMON, but it's from AC)
Jenkins changes:
- added android sdk
- will now record artifacts: altoslib/AltosLib.jar,altosui/altosui.jar,**/*.apk
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1347421684,1347421684,95268d681c9a6652d84db383f55a4fe8a4ac5173
e5a55dbf265354e7c94be3e2be53c2d5c8fba056,e5a55dbf,Use ft/s for imperial speeds,"Use ft/s for imperial speeds

Bob Brown thinks this unit will be more useful than mph

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347404016,1347404016,73d05650eae1d3958e02e9ffde2020a2438eccbb
73d05650eae1d3958e02e9ffde2020a2438eccbb,73d05650,Add Version 1.1 release notes.,"Add Version 1.1 release notes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347402645,1347402760,7ae3e4cea1cd180ff18b5293a67b4520cc8292be
7ae3e4cea1cd180ff18b5293a67b4520cc8292be,7ae3e4ce,altosui: Imperial units for graphs too,"altosui: Imperial units for graphs too

Just to be consistent

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347350405,1347402760,95268d681c9a6652d84db383f55a4fe8a4ac5173
95268d681c9a6652d84db383f55a4fe8a4ac5173,95268d68,Reverted package name to 'altosui' from 'AltosUI',"Reverted package name to 'altosui' from 'AltosUI'
Also added emacs backup regex (*~) to .gitignore
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1347386071,1347386071,13c64f6fb5764c6a0f3520cf4e48a75d78e163db
13c64f6fb5764c6a0f3520cf4e48a75d78e163db,13c64f6f,Add appropriate Java build deps as given from autoconf,"Add appropriate Java build deps as given from autoconf
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1347385464,1347385464,8e506274a35eccacd2d4523faa08d279a201753f
8e506274a35eccacd2d4523faa08d279a201753f,8e506274,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1347381562,1347381562,"0bc3ed53aa8972c7080d6335f609cd9d0df1c79d,1fc97dd9875a7639533a34438c4c7c999412eb3a"
0bc3ed53aa8972c7080d6335f609cd9d0df1c79d,0bc3ed53,Use explicit build deps for altosui (avoids * wildcarding),"Use explicit build deps for altosui (avoids * wildcarding)
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1347381434,1347381434,708e7937cba52982b91244cf89bfbff46d346135
1fc97dd9875a7639533a34438c4c7c999412eb3a,1fc97dd9,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347381304,1347381304,"8397d2b041824ddf1cc0b82926f10da8aae3264f,4420d4a9fc011ed970af506ef771dfb81580b666"
8397d2b041824ddf1cc0b82926f10da8aae3264f,8397d2b0,update Debian build-deps in preparation for 1.1 release,"update Debian build-deps in preparation for 1.1 release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1347381240,1347381240,c2ebebc4967043b16380b8ec8800862993005358
4420d4a9fc011ed970af506ef771dfb81580b666,4420d4a9,Fix Latin-1 encoded copyright symbols in AltosDroid java code,"Fix Latin-1 encoded copyright symbols in AltosDroid java code

Otherwise, we get complaints when compiling these files.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347349788,1347349788,708e7937cba52982b91244cf89bfbff46d346135
708e7937cba52982b91244cf89bfbff46d346135,708e7937,Changed package name from altosui to AltosUI,"Changed package name from altosui to AltosUI
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1347314067,1347314067,c2ebebc4967043b16380b8ec8800862993005358
c2ebebc4967043b16380b8ec8800862993005358,c2ebebc4,Test commit (comment) to confirm push works,"Test commit (comment) to confirm push works
",,,,Tom Marble,tmarble@info9.net,Tom Marble,tmarble@info9.net,1347306637,1347306637,67da878f740a387d0092631ad672e024d26e4192
67da878f740a387d0092631ad672e024d26e4192,67da878f,altosui: Use units conversion functions everywhere.,"altosui: Use units conversion functions everywhere.

Provide a configuration option to select imperial units and use them everywhere

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347293764,1347293764,66a1e07efcac9324d33a1eca0dfb58a2724b667a
66a1e07efcac9324d33a1eca0dfb58a2724b667a,66a1e07e,altoslib: Add imperial units conversion support,"altoslib: Add imperial units conversion support

""Redneck"" mode support

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347293643,1347293643,51836cedce41d8b36eac34c69370489162aaa2b5
51836cedce41d8b36eac34c69370489162aaa2b5,51836ced,Bump version to 1.0.9.7,"Bump version to 1.0.9.7

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347224577,1347224577,e45c47c52f9cc9c43b81148e0e58fdedb3af1eb8
e45c47c52f9cc9c43b81148e0e58fdedb3af1eb8,e45c47c5,altos/telelco: Search for available firing nodes at boot time,"altos/telelco: Search for available firing nodes at boot time

Query for available firing nodes, limiting device selections to those found.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347224481,1347224481,77775711d414227b3ed97859d1b21ab1c689a724
77775711d414227b3ed97859d1b21ab1c689a724,77775711,altos/telefire: Add steady warble when the LCO arm switch is on,"altos/telefire: Add steady warble when the LCO arm switch is on

And make debugging a run-time option too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347224309,1347224309,f2933103be122414a9b1795b37003b7a2aa9f3d7
f2933103be122414a9b1795b37003b7a2aa9f3d7,f2933103,altos/stm: Fix basic time interval to 10ms -- was 10.1ms,"altos/stm: Fix basic time interval to 10ms -- was 10.1ms

Counting from 0 to 100 takes 10.1ms, so count to 99 instead.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347224236,1347224236,0339583996fc57a666f8d3007a0f4b1034039a73
0339583996fc57a666f8d3007a0f4b1034039a73,03395839,altos/spiradio: Label LEDs so that the radio code can use them,"altos/spiradio: Label LEDs so that the radio code can use them

Mark which should be on for TX and which for RX

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347224195,1347224195,3fa71c497a5bf576974e70af06762f75734e6699
3fa71c497a5bf576974e70af06762f75734e6699,3fa71c49,altos: Try to get remote cmac time closer to reality,"altos: Try to get remote cmac time closer to reality

Record the time after the packet was sent, but before the return
packet arrives to try and more closely approximate the time the packet
arrived at the other end.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347223856,1347223856,27ab744c6eec9243b7aa14161eec2fbf7003531e
27ab744c6eec9243b7aa14161eec2fbf7003531e,27ab744c,altos: Clean up flight data definitions,"altos: Clean up flight data definitions

These just shuffle the various definitions of data macros around to
make the include files more sensible looking.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347223583,1347223583,ced6a020d6d94b1c63837a7ab5b0091b7b8ea3c9
ced6a020d6d94b1c63837a7ab5b0091b7b8ea3c9,ced6a020,altos: include ao_arch_funcs.h at the very end of ao.h,"altos: include ao_arch_funcs.h at the very end of ao.h

Move it below the definition of the ms5607 init function

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347223425,1347223425,e053da3e7cb5a4c9ebbffd245cb5d83932183b22
e053da3e7cb5a4c9ebbffd245cb5d83932183b22,e053da3e,altos: Allow products without MS5607,"altos: Allow products without MS5607

The define for a missing MS5607 was wrong, so anything using the fancy
multi-sensor data code would break without an MS5607 in place.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347221517,1347221517,bb5ab29b6744b382bb2f09486a7a6db7d12a3608
bb5ab29b6744b382bb2f09486a7a6db7d12a3608,bb5ab29b,ao_tools/ao-send-telem: Only start real-time on valid states,"ao_tools/ao-send-telem: Only start real-time on valid states

Check state to make sure it is < ao_flight_landed to keep invalid
states from switching to real-time playback mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347221407,1347221407,47d87872c11a63a435fe5b703a4ce33503790d96
47d87872c11a63a435fe5b703a4ce33503790d96,47d87872,altoslib: Add in a bunch of java files mising after Mike's cleanups,"altoslib: Add in a bunch of java files mising after Mike's cleanups

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347221367,1347221367,e2b458a448106ba1ab207f0ea6824b56927d8547
e2b458a448106ba1ab207f0ea6824b56927d8547,e2b458a4,Merge remote-tracking branch 'mjb/altoslib_mjb',"Merge remote-tracking branch 'mjb/altoslib_mjb'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347221027,1347221027,"9682e9e6fe730417a77b47795fbe1f06c9a51177,3fe932206f40f4d6f83a4ef49e064109a7a3de92"
9682e9e6fe730417a77b47795fbe1f06c9a51177,9682e9e6,altosui: Use helper functions to access arrays in AltosLib class,"altosui: Use helper functions to access arrays in AltosLib class

These deal with out-of-range values correctly, instead of causing
exceptions that will just break stuff.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347218972,1347218972,d65d921b9b2340fa23d3b55b4ae755324d392303
d65d921b9b2340fa23d3b55b4ae755324d392303,d65d921b,altosui: Catch errors in state value when saving flight logs,"altosui: Catch errors in state value when saving flight logs

Use AltosLib.state_name() instead of directly accessing the
state_to_string array so that any invalid state values are caught and
replaced with 'invalid' instead of raising an exception.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1347218408,1347218408,c5e98d2b226824f2012e5710ac4b1596b9f0bfb1
3fe932206f40f4d6f83a4ef49e064109a7a3de92,3fe93220,altoslib: move distinct classes to separate files.,"altoslib: move distinct classes to separate files.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346998783,1346998783,da053875c12b25b627e83430c3a956a994b435d5
da053875c12b25b627e83430c3a956a994b435d5,da053875,altoslib: remove obsolete class,"altoslib: remove obsolete class

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346998747,1346998747,218c73b5bd5bd5673dc6f259f62b39541c52d6ff
218c73b5bd5bd5673dc6f259f62b39541c52d6ff,218c73b5,altoslib: move distinct classes to separate files,"altoslib: move distinct classes to separate files

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346998273,1346998273,42170d0e3a3b68a9d3db69714e043f7273a714fb
42170d0e3a3b68a9d3db69714e043f7273a714fb,42170d0e,altoslib: remove duplicate AltosGPSQuery class,"altoslib: remove duplicate AltosGPSQuery class

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346998221,1346998221,82f798e7b1343a56203af2e89790f6de9ab9f98d
82f798e7b1343a56203af2e89790f6de9ab9f98d,82f798e7,altoslib: remove duplicate AltosIdleMonitor class,"altoslib: remove duplicate AltosIdleMonitor class

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346998177,1346998177,88667f7b7dff52eaf5e30f8f83fed0d7f767268d
88667f7b7dff52eaf5e30f8f83fed0d7f767268d,88667f7b,altoslib: rename AltosIdleRecordTM.java to AltosGPSQuery.java,"altoslib: rename AltosIdleRecordTM.java to AltosGPSQuery.java

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346998065,1346998065,bbbe1846346b4ba61330f535a12b7a5029877ee6
bbbe1846346b4ba61330f535a12b7a5029877ee6,bbbe1846,altoslib: remove dead code,"altoslib: remove dead code

(if object creation fails, an exception will be thrown - not return null)

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346997200,1346997200,02d31db3d3255568cc348a41aa37a461d63ffde2
02d31db3d3255568cc348a41aa37a461d63ffde2,02d31db3,altoslib: resolve argument/variable ambiguity,"altoslib: resolve argument/variable ambiguity

(and comment out set_flags() which had no corresponding variable anyway)

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346997147,1346997147,639f3e5e5171769429eac9e2f17a7b315fd62135
639f3e5e5171769429eac9e2f17a7b315fd62135,639f3e5e,altoslib: comment out unused methods,"altoslib: comment out unused methods

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346996365,1346996365,369c5e23ac6d65bab4b456ed86737576ac61102f
369c5e23ac6d65bab4b456ed86737576ac61102f,369c5e23,"altoslib: access static variables via class, not instance","altoslib: access static variables via class, not instance

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346996129,1346996129,b02c17b26e028a6f3a46781211a86a18272da4d0
b02c17b26e028a6f3a46781211a86a18272da4d0,b02c17b2,altoslib: comment out un-used variables,"altoslib: comment out un-used variables

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346996057,1346996057,20bc23ddb90f8a6da1f7ea70f02cf3a038059d32
20bc23ddb90f8a6da1f7ea70f02cf3a038059d32,20bc23dd,altoslib: Remove un-needed imports,"altoslib: Remove un-needed imports

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346995927,1346995927,6d8858ca1899c8b64f107ebb45711efbb7b8d62a
c5e98d2b226824f2012e5710ac4b1596b9f0bfb1,c5e98d2b,altos: Fix radio slave to run lights in the normal way,"altos: Fix radio slave to run lights in the normal way

These were left in a debug mode, toggling instead of flashing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346980053,1346980053,01820c3e95fe85d2bee648d41809f1a753f81020
01820c3e95fe85d2bee648d41809f1a753f81020,01820c3e,"Revert ""first work on PWM input to TeleScience, 'p' command displays timer 1""","Revert ""first work on PWM input to TeleScience, 'p' command displays timer 1""

PWM bits not suitable for master

This reverts commit e93c6bcc799d76d4ff425815e2601a25e6796229.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346476516,1346476516,3ccc4a13e3f76bec864d61b0cdfd57c76c6baadb
3ccc4a13e3f76bec864d61b0cdfd57c76c6baadb,3ccc4a13,"Revert ""Timer 3 working with slower clock and all 16 bits.""","Revert ""Timer 3 working with slower clock and all 16 bits.""

PWM bits not suitable for master

This reverts commit 49b1ff4c614d24977b33cd17b583acc87acff476.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346476502,1346476502,8c743857525eff778d067068356dec486b9fefa2
8c743857525eff778d067068356dec486b9fefa2,8c743857,"Revert ""ICP3 working""","Revert ""ICP3 working""

PWM bits not suitable for master

This reverts commit 75d6aa6f798606f1a6c5a46542065dda81e63b2a.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346476489,1346476489,294b1ec85a37e375a0ac70cbffc6398309d63a7f
294b1ec85a37e375a0ac70cbffc6398309d63a7f,294b1ec8,"Revert ""telescience: correctly calculating rate values with higher resolution""","Revert ""telescience: correctly calculating rate values with higher resolution""

PWM bits not suitable for master

This reverts commit ada6f2dfc045e77cb9499f20cdec1b4a54ef0db1.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346476467,1346476467,ec9e1186dce079a2f2b7be8050216ddb1bc1af66
ec9e1186dce079a2f2b7be8050216ddb1bc1af66,ec9e1186,Merge remote-tracking branch 'mjb/freq_menu',"Merge remote-tracking branch 'mjb/freq_menu'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346469856,1346469856,"503eabd0e351ecdffda1416b7d00f8ef1d6913c9,6d31f8d15ef4bf75ae039dd7b1a6a615d00eb215"
503eabd0e351ecdffda1416b7d00f8ef1d6913c9,503eabd0,altos: Get mma655x driver limping along,"altos: Get mma655x driver limping along

This appears to drive the chip correctly to see values from the accelerometer.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346469580,1346469580,48a3e6e073e927e456ef4e456e512f6fb8e3b9ee
48a3e6e073e927e456ef4e456e512f6fb8e3b9ee,48a3e6e0,altos: Fix mma665x pin assigment for mma655x,"altos: Fix mma665x pin assigment for mma655x

It's on PE13-PE15, not PA5-PA7

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346464933,1346464933,f9af7819de086d9179c3a4d1df7c88ab67a7d7c7
f9af7819de086d9179c3a4d1df7c88ab67a7d7c7,f9af7819,altos: Add custom panic noise for self-test failures,"altos: Add custom panic noise for self-test failures

Make it easier to tell which component is failing self test

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346464881,1346464881,6d8858ca1899c8b64f107ebb45711efbb7b8d62a
6d31f8d15ef4bf75ae039dd7b1a6a615d00eb215,6d31f8d1,altoslib: add missing manufacturer parsing for AltosConfigData,"altoslib: add missing manufacturer parsing for AltosConfigData

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346392433,1346392433,4e3ac2b624f68dd5a8f6dd7a33eb10cd78497964
4e3ac2b624f68dd5a8f6dd7a33eb10cd78497964,4e3ac2b6,altosdroid: invert channel/freq ordering,"altosdroid: invert channel/freq ordering

Matches Channel Selector in altosui

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346391742,1346391742,80bc985f79e616e5327aed4f7acc9bca71b8db54
80bc985f79e616e5327aed4f7acc9bca71b8db54,80bc985f,altosdroid: also display channel numbers,"altosdroid: also display channel numbers

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346388653,1346388653,b6a21856c68ca8cca93eb755285be1927acb91e7
b6a21856c68ca8cca93eb755285be1927acb91e7,b6a21856,ao-send-telem: fix frequency set command,"ao-send-telem: fix frequency set command

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346387950,1346387950,543ecb530d6fdf188a746ac59b72544e69bad830
543ecb530d6fdf188a746ac59b72544e69bad830,543ecb53,altosdroid: complete frequency change dialog,"altosdroid: complete frequency change dialog

Also implement Service IPC to action request.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346387901,1346387901,f1a9fff865e0b226a97ad5d6eaaac64bd5e5d410
f1a9fff865e0b226a97ad5d6eaaac64bd5e5d410,f1a9fff8,altosdroid: Start a hacked-up frequency dialog,"altosdroid: Start a hacked-up frequency dialog

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346386063,1346386063,6d8858ca1899c8b64f107ebb45711efbb7b8d62a
6d8858ca1899c8b64f107ebb45711efbb7b8d62a,6d8858ca,altos: another .gitignore file,"altos: another .gitignore file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346362204,1346362204,ab9d5bf13e6f1735a0463f4bcab13d65170b7015
ab9d5bf13e6f1735a0463f4bcab13d65170b7015,ab9d5bf1,altos: ao_cc_spi.h isn't necessary for telelco,"altos: ao_cc_spi.h isn't necessary for telelco

The SPI radio defines are in ao_radio_spi.h

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346362133,1346362133,b635cb26ba54c8f5c6a958e0ab0bc4d34d33b635
b635cb26ba54c8f5c6a958e0ab0bc4d34d33b635,b635cb26,Merge remote-tracking branch 'mjb/master',"Merge remote-tracking branch 'mjb/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346361878,1346361878,"354c1fed7f06c2c45c661e7265c2ac4bc47e2750,a8ecf3aa4e88d4c76643fb541fb1d5535a454aba"
354c1fed7f06c2c45c661e7265c2ac4bc47e2750,354c1fed,altos: Add a bunch of .gitignore entries,"altos: Add a bunch of .gitignore entries

Clean up the git status output

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346361771,1346361771,2c59954fdf204f443d9bb28c4a66a30f925ef348
2c59954fdf204f443d9bb28c4a66a30f925ef348,2c59954f,"altos: Shuffle LCO functions around, add telelco first cut","altos: Shuffle LCO functions around, add telelco first cut

Pull LCO functions shared between LCO UI and command line into
ao_lco_funcs.c.

Import bits for telelco.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346361412,1346361412,72d44d14aefcb754b871835aec8d265771357212
72d44d14aefcb754b871835aec8d265771357212,72d44d14,altos: Disable debug printfs and fix pad ignite time for telefire,"altos: Disable debug printfs and fix pad ignite time for telefire

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346361297,1346361297,583458772746317b98fced907ec780edff465888
a8ecf3aa4e88d4c76643fb541fb1d5535a454aba,a8ecf3aa,altosdroid: Implement voice just like altosui,"altosdroid: Implement voice just like altosui

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346317721,1346317721,2e6af70c87e7cc62a92b09bbbde745a31d83b5eb
2e6af70c87e7cc62a92b09bbbde745a31d83b5eb,2e6af70c,altosdroid: Move bluetooth check to first task,"altosdroid: Move bluetooth check to first task

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346317686,1346317686,519887571cee2840024c5c8f4b7f0e5c352d3323
519887571cee2840024c5c8f4b7f0e5c352d3323,51988757,"altosdroid: add rssi/serial/flight, and re-work UI ordering","altosdroid: add rssi/serial/flight, and re-work UI ordering

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346289809,1346289809,14022b002d2201fb3ca28292d976c90e2d9a15a2
14022b002d2201fb3ca28292d976c90e2d9a15a2,14022b00,altosdroid: rename ambiguous TextView name,"altosdroid: rename ambiguous TextView name

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346289784,1346289784,91606c89828e60d8cf9a5ea4ff75b951d6fc042a
91606c89828e60d8cf9a5ea4ff75b951d6fc042a,91606c89,"altosdroid: formatting/whitespace, correct ids","altosdroid: formatting/whitespace, correct ids

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346289698,1346289698,2137a112b4217d84041f749b8aa5eb8f4d330ba0
2137a112b4217d84041f749b8aa5eb8f4d330ba0,2137a112,altosdroid: rework lat/lon to more common format,"altosdroid: rework lat/lon to more common format

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346289610,1346289610,c32325af6605e78c1d1147d466f3ea12ce94124a
c32325af6605e78c1d1147d466f3ea12ce94124a,c32325af,altosdroid: rename azimuth/altitude to elevation/height respectively.,"altosdroid: rename azimuth/altitude to elevation/height respectively.

(Matches altoslib, altosui, altos)

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346289581,1346289581,8ffa4f9a474026f5a6523b26919a78565e0ed74c
8ffa4f9a474026f5a6523b26919a78565e0ed74c,8ffa4f9a,"altosdroid: move units into code, to match altosui","altosdroid: move units into code, to match altosui

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346289200,1346289200,17b6ffb6c090112367eac944494f0fa58da453c7
583458772746317b98fced907ec780edff465888,58345877,Merge remote-tracking branch 'mjb/master',"Merge remote-tracking branch 'mjb/master'

Pull in Mike's fancy new AltosDroid bits
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346264964,1346264964,"aea10c107dff2643677a9c8d1fc41e14f4a66049,17b6ffb6c090112367eac944494f0fa58da453c7"
aea10c107dff2643677a9c8d1fc41e14f4a66049,aea10c10,"altos: spiradio debug serial is port 1, not port 0","altos: spiradio debug serial is port 1, not port 0

The SPI link uses port 0; it seems like the having the two try to
share the same wires is a bad plan.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346264736,1346264736,3e7e8e21f2bb823cb6e74c73d0feddbc3a891107
3e7e8e21f2bb823cb6e74c73d0feddbc3a891107,3e7e8e21,altos: SPI radio - use 1->0 for 'done' and 0->1 for 'ready',"altos: SPI radio - use 1->0 for 'done' and 0->1 for 'ready'

This changes how the SPI radio protocol uses the interrupt
line. Instead of a pulse indicating operation done, this now uses a 0
value for done and a 1 value for ready. The key distinction is that
the master can tell when the slave is waiting for the next command
instead of hoping that it got done 'soon enough'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346264593,1346264593,1b6ed262460ee75fb5bb684d13d19c26c7ea750b
1b6ed262460ee75fb5bb684d13d19c26c7ea750b,1b6ed262,altos: fix ao_pad debug output for query command,"altos: fix ao_pad debug output for query command

Igniter status is an array these days.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346264522,1346264522,442f1bfc89528103e2c28f768c954b956e39afc5
442f1bfc89528103e2c28f768c954b956e39afc5,442f1bfc,altos: Use updated pad protocol for lco commands,"altos: Use updated pad protocol for lco commands

Stop using the older single-channel protocol and switch to the new
multi-channel protocol

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346264469,1346264469,7f64e62356bcfcd6ba8a88b09251793481bcd56c
7f64e62356bcfcd6ba8a88b09251793481bcd56c,7f64e623,altos: Note changes to configured AES key for SPI radio convenience,"altos: Note changes to configured AES key for SPI radio convenience

Keep a sequence number to mark when the AES key is changed so that the
radio code can avoid sending the key before every CMAC radio operation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346264357,1346264357,1a7d2faf76a46271532102e217c2dd5515e38b72
1a7d2faf76a46271532102e217c2dd5515e38b72,1a7d2faf,altos: Wait for IN dma complete on slave SPI send,"altos: Wait for IN dma complete on slave SPI send

SPI send double buffered, so the DMA completes one byte too early. Use
the recv DMA to know when the SPI transfer is complete.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346264202,1346264202,98f65994ee547feb8cca63ff4ed0fefd3fb2d37d
17b6ffb6c090112367eac944494f0fa58da453c7,17b6ffb6,altosdroid: initial attempt at a UI.,"altosdroid: initial attempt at a UI.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346245266,1346245266,cb8f01745c9e8f258f96358b46e1caf17d6b0c9f
98f65994ee547feb8cca63ff4ed0fefd3fb2d37d,98f65994,altos: Oops. forgot ao_data.c,"altos: Oops. forgot ao_data.c

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346220302,1346220302,3a3982ceb721910c6a4f75badebb62baa6c6568e
3a3982ceb721910c6a4f75badebb62baa6c6568e,3a3982ce,altos: Add spiradio Makefile,"altos: Add spiradio Makefile

git add doesn't add Makefile by default.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346218990,1346220023,fc9841ee5e92318471b6bec09b7075a788ab8872
fc9841ee5e92318471b6bec09b7075a788ab8872,fc9841ee,altos: Mostly working SPI radio link,"altos: Mostly working SPI radio link

This includes long delays to avoid overrunning the cc1111 input,
otherwise it works pretty well. The delays mean that we can't capture
the reply to a cmac command though, so more work is needed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346202782,1346220023,27a879b4069ccedf8bbe39d7dbecf45000f29d8c
27a879b4069ccedf8bbe39d7dbecf45000f29d8c,27a879b4,altos: Include the radio_cmac debug commands in telefire,"altos: Include the radio_cmac debug commands in telefire

Just temporary debugging

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346202747,1346220023,eb1a9a8c3f3d3993d5986925bc4ad112c2bbc119
eb1a9a8c3f3d3993d5986925bc4ad112c2bbc119,eb1a9a8c,altos: Explicitly erase memory in STM eeprom driver.,"altos: Explicitly erase memory in STM eeprom driver.

This seems to make the STM32L152 happier

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346202634,1346220023,3fe5a70d9ac2114ee554813b1dbb3019a3e4aff7
3fe5a70d9ac2114ee554813b1dbb3019a3e4aff7,3fe5a70d,altos: Track protocol changes to ao_pad debug messages,"altos: Track protocol changes to ao_pad debug messages

Make the debug output build again.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346202539,1346220023,18b5021e99c1eef32d2d85f619c84e89cecae7a7
18b5021e99c1eef32d2d85f619c84e89cecae7a7,18b5021e,altos: Stop providing debug commands in seven-segment driver,"altos: Stop providing debug commands in seven-segment driver

The radio_cmac debug commands use the same letter, and this code works now...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346202475,1346220023,78cd26eec77adda23ef1b5ca2d91027f1e059868
78cd26eec77adda23ef1b5ca2d91027f1e059868,78cd26ee,altos: Move radio_cmac test funcs from ao_lco_cmd.c to new file,"altos: Move radio_cmac test funcs from ao_lco_cmd.c to new file

These are useful in the firing node for testing as well, so move them
to be shared.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346202425,1346220022,f2d919a2147025daa332957cda6d91959e4731ab
f2d919a2147025daa332957cda6d91959e4731ab,f2d919a2,"altos: When sharing radio DMA for AES, use it for in instead of out","altos: When sharing radio DMA for AES, use it for in instead of out

We look at the out_done value, but not the in_done value; if we use
the radio DMA for out, we would have to use ao_radio_dma_done to check
for completion. This way, we can ignore that value and use the
existing ao_aes_dma_out_done value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346202310,1346220022,31b42b99edbb976534ac432c07e218f13d1f5f9b
31b42b99edbb976534ac432c07e218f13d1f5f9b,31b42b99,altos: Fix ao_delay function and move from per-chip code to ao_task.c,"altos: Fix ao_delay function and move from per-chip code to ao_task.c

ao_delay hasn't been chip-specific for a long time, and it had a bug
in not calling ao_clear_alarm.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346202232,1346220022,ac5d053e6d766d243b7a425ae19779810c350125
ac5d053e6d766d243b7a425ae19779810c350125,ac5d053e,ao-stmload: Always round up load amount to 4 byte boundary,"ao-stmload: Always round up load amount to 4 byte boundary

The flashing code doesn't deal with partial writes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346202145,1346220022,68df2b1173e82d48f7857ad2e9325e6a9cbbedfd
68df2b1173e82d48f7857ad2e9325e6a9cbbedfd,68df2b11,altos: Enable STM SYSCFG when routing EXTI,"altos: Enable STM SYSCFG when routing EXTI

The EXTI routing information is in the syscfg unit, so that needs to
be powered up or writes to its registers will be lost.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346132747,1346220022,c677f26852b70bcbb303382c306ce06664fde028
c677f26852b70bcbb303382c306ce06664fde028,c677f268,altos: No need to initialize EXTI priorities at startup time,"altos: No need to initialize EXTI priorities at startup time

They all get set to the correct value when enabled.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346132720,1346220022,5ed88fb72c3e3ecf3333c700d838667db71cfbdc
5ed88fb72c3e3ecf3333c700d838667db71cfbdc,5ed88fb7,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

Conflicts:
	debian/control
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1346218793,1346218793,"adbe64c5a9402b7c5075a444a12629131b663877,621d0930244f25165d2ac5da596dcc87e253b965"
adbe64c5a9402b7c5075a444a12629131b663877,adbe64c5,libelf-dev added to build deps,"libelf-dev added to build deps
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1346218620,1346218620,15ebd9c75aa57572040e3b1ee41e6f3eb8cf92ee
cb8f01745c9e8f258f96358b46e1caf17d6b0c9f,cb8f0174,altosdroid: update Makefile.am for source file changes.,"altosdroid: update Makefile.am for source file changes.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346152804,1346152804,c220369953d351f49a5f45bfb5e317859d3a9843
c220369953d351f49a5f45bfb5e317859d3a9843,c2203699,altosdroid: Add Dumper class for testing,"altosdroid: Add Dumper class for testing

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346149572,1346149572,6c985c2b0433a08add3bbf55fdb30102157b4ede
6c985c2b0433a08add3bbf55fdb30102157b4ede,6c985c2b,altosdroid: add timer to stop service,"altosdroid: add timer to stop service

* Stops when no UI clients, and no bluetooth connection remains

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346148626,1346148626,781bdb6c15b7dd3cc2280b08a2f47ce0f92cf53f
781bdb6c15b7dd3cc2280b08a2f47ce0f92cf53f,781bdb6c,"altosdroid: do service start/bind/unbind in start/stop, not create/destroy.","altosdroid: do service start/bind/unbind in start/stop, not create/destroy.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346148574,1346148574,ea5fe9e95a888d623329d17d048ee360ea114ad1
ea5fe9e95a888d623329d17d048ee360ea114ad1,ea5fe9e9,altosdroid: move methods around,"altosdroid: move methods around

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346148529,1346148529,c6d667a6ac0decfde5bc8a180b14774e9942dd0c
c6d667a6ac0decfde5bc8a180b14774e9942dd0c,c6d667a6,altosdroid: tidy up old messages,"altosdroid: tidy up old messages

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346148499,1346148499,5c7370dcd7a65c81a3c903a71167e07cfcbade53
5c7370dcd7a65c81a3c903a71167e07cfcbade53,5c7370dc,"altosdroid: stop sending device name, just send config data","altosdroid: stop sending device name, just send config data

* Kinda complicated, but ultimately more sensible
* Just send the config data as an arg to MSG_CONNECTED
* keep retrying connection till we actually get config data

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346148459,1346148459,5ce8c63850dbc6462d7c41ce917e0e06672ec0ab
5ce8c63850dbc6462d7c41ce917e0e06672ec0ab,5ce8c638,altosdroid: whitespace,"altosdroid: whitespace

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346148014,1346148014,df7b74909c3794b7b2397275e7fce9226cb99489
df7b74909c3794b7b2397275e7fce9226cb99489,df7b7490,altosdroid: override add_reply() to add android based debugging,"altosdroid: override add_reply() to add android based debugging

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346147980,1346147980,9d0f187f06c411f0d82e13ee4f2faea789ed9e79
9d0f187f06c411f0d82e13ee4f2faea789ed9e79,9d0f187f,altosdroid: more logical name for connection_lost() method.,"altosdroid: more logical name for connection_lost() method.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346147955,1346147955,7664ecc0003151d3f05537f17914df2bf48e4275
7664ecc0003151d3f05537f17914df2bf48e4275,7664ecc0,altosdroid: rework ConnectThread,"altosdroid: rework ConnectThread

* Start input_thread after connection, otherwise it's painful to kill
  on connect failure.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346147927,1346147927,502b24eb2c9c76e4e2bdcc79be0b71a869488b37
502b24eb2c9c76e4e2bdcc79be0b71a869488b37,502b24eb,altosdroid: fix a connection retry having a null pointer,"altosdroid: fix a connection retry having a null pointer

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346147740,1346147740,c7bef83fd553987f83c0bf7ff37ef941872564fe
c7bef83fd553987f83c0bf7ff37ef941872564fe,c7bef83f,altosdroid: fix double call of stopAltosBluetooth(),"altosdroid: fix double call of stopAltosBluetooth()

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346147645,1346147645,150a726e125aa7d181c00348ddd1791fd84164e5
150a726e125aa7d181c00348ddd1791fd84164e5,150a726e,altosdroid: Miscellaneous comments/debug/etc cleanup,"altosdroid: Miscellaneous comments/debug/etc cleanup

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346147581,1346147581,162c640d382b9f823573578fe97584adc94cd9b6
162c640d382b9f823573578fe97584adc94cd9b6,162c640d,altosdroid: miscellaneous cleanup,"altosdroid: miscellaneous cleanup

* Copyright info
* whitespace
* comments
* unused imports

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346132265,1346132265,ae03d8e87985b9f746e9e22b2394a0a5b4f39f1c
ae03d8e87985b9f746e9e22b2394a0a5b4f39f1c,ae03d8e8,altosdroid: Add passing of Device Config at connect,"altosdroid: Add passing of Device Config at connect

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346132201,1346132201,03563c765d8b0ab3689c91b2b533c68e11650577
03563c765d8b0ab3689c91b2b533c68e11650577,03563c76,"altosdroid: Add new ""TelemetryReader"" class to handle Telemetry","altosdroid: Add new ""TelemetryReader"" class to handle Telemetry

* Add MSG_TELEMETRY messages to both AltosDroid and TelemetryService
  to handle passing of AltosState object all the way back to the UI.
* Remove linkedblockinglist from TelemetryService
* (MSG_TELEMETRY is a rename of MSG_INCOMING_TELEM in AltosDroid)
* commented code in case statement inside AltosDroind - won't work with
  the objects it is currently passed.
* Add new ""MSG_DEVCONFIG"" message to AltosDroid - allows TelemetryService
  to pass information about the connected device back to the UI.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346132111,1346132111,ed653a1e6dc8884cb171af1406fd0999ef125a4d
ed653a1e6dc8884cb171af1406fd0999ef125a4d,ed653a1e,altosdroid: create connected() method,"altosdroid: create connected() method

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346131569,1346131569,fa8668931cbbc1506560222f2db7e427b514a351
621d0930244f25165d2ac5da596dcc87e253b965,621d0930,altos: Add spiradio product,"altos: Add spiradio product

Implements the SPI radio protocol

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346100731,1346100731,61d094f281431e9f11f806454981da8e1245fb5c
61d094f281431e9f11f806454981da8e1245fb5c,61d094f2,altos: sdcdb rc file for telefire,"altos: sdcdb rc file for telefire

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346100713,1346100713,c31d07fb35a5b4d283facf649bed3f0f9802d1fc
c31d07fb35a5b4d283facf649bed3f0f9802d1fc,c31d07fb,altos: Add SPI linked radio API,"altos: Add SPI linked radio API

Forward the necessary radio functions over the SPI link

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346100547,1346100547,0f3483f93137f41a61f3fcbe06afcaffb1b9e17b
0f3483f93137f41a61f3fcbe06afcaffb1b9e17b,0f3483f9,altos: Clean up radio APIs,"altos: Clean up radio APIs

Move api to ao_radio_cmac.h include file.
Expose ao_radio_test as standard API.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346100436,1346100436,85fd7ab504a9fac1de90bbe7df8ea477a092c2b0
85fd7ab504a9fac1de90bbe7df8ea477a092c2b0,85fd7ab5,altos: Build telelco and spiradio when possible,"altos: Build telelco and spiradio when possible

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346100356,1346100356,467acda662de8b96e7d0df729c2e4761686b82a1
467acda662de8b96e7d0df729c2e4761686b82a1,467acda6,altos: Expose a signed version of the tick count,"altos: Expose a signed version of the tick count

Useful when doing time comparisons.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346100275,1346100275,e7443bf350afe273e87a884915ea1e7662630cd3
e7443bf350afe273e87a884915ea1e7662630cd3,e7443bf3,altos: Specify the LCD duty cycle for stm-demo,"altos: Specify the LCD duty cycle for stm-demo

This is the demo for the large 7-segment displays and needs static drive

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346100158,1346100158,708d49e498bbdc59bb5af9bf4ca5fcea5689547a
708d49e498bbdc59bb5af9bf4ca5fcea5689547a,708d49e4,altos: Test multiple quadrature devices. Export quadrature count.,"altos: Test multiple quadrature devices. Export quadrature count.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346100073,1346100073,8bfe8157cd9fe488d1ee961f200ffa0866322f2c
8bfe8157cd9fe488d1ee961f200ffa0866322f2c,8bfe8157,altos: Seven segment display driver,"altos: Seven segment display driver

Hex numbers and the decimal point.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346099924,1346099924,28c3923b6180e24a77aecc7162bb2852cec7d770
28c3923b6180e24a77aecc7162bb2852cec7d770,28c3923b,altos: More SPI slave changes for cc1111 driver,"altos: More SPI slave changes for cc1111 driver

Don't enable DMA in the other direction when doing slave transfers.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346099834,1346099834,a27b9b5c36cf748e415ba210c8d8ae72d8227a98
a27b9b5c36cf748e415ba210c8d8ae72d8227a98,a27b9b5c,altos: Add SPI slave get/put macros to cc1111,"altos: Add SPI slave get/put macros to cc1111

Theese don't try to drive the chip select line

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346099739,1346099739,304909b7534768bfc8da62954effb37ba86806ea
304909b7534768bfc8da62954effb37ba86806ea,304909b7,altos: Provide interface for STM LCD driver.,"altos: Provide interface for STM LCD driver.

This provides a simple function interface for driving the LCD segments
in the STM chip. It also uses the update complete interrupt to block
LCD users during flush.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346099652,1346099652,c1168f40223ca09df23215f2e2fc445a8a03aea9
c1168f40223ca09df23215f2e2fc445a8a03aea9,c1168f40,altos: Rename drivers/ao_lco to drivers/ao_lco_cmd,"altos: Rename drivers/ao_lco to drivers/ao_lco_cmd

These contain command line functions for testing the cmac and lco
features. Now that there's a telelco-specific ao_lco interface file,
it's useful to have both for testing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1346099561,1346099561,f89e7de20374141b367205aa517a08ee203bfaf3
fa8668931cbbc1506560222f2db7e427b514a351,fa866893,altosdroid: Let a freshly connected client know what the device name is!,"altosdroid: Let a freshly connected client know what the device name is!

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346053307,1346053307,9a41508d92f95012a37bb75603e6e48a2c405204
9a41508d92f95012a37bb75603e6e48a2c405204,9a41508d,altosdroid: Add Connected/Connect_failed messages,"altosdroid: Add Connected/Connect_failed messages

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346053289,1346053289,e121ec3ae634f41979717281a28af5e4a38e8f3a
e121ec3ae634f41979717281a28af5e4a38e8f3a,e121ec3a,altosdroid: don't need keys for Bundles anymore,"altosdroid: don't need keys for Bundles anymore

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346053230,1346053230,afac4d6c82916eea67ac838cd22806bd73db00a9
afac4d6c82916eea67ac838cd22806bd73db00a9,afac4d6c,altosdroid: Toast() requests don't need Bundles,"altosdroid: Toast() requests don't need Bundles

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346053193,1346053193,18c380120fe37a4bdc8f295e86c6c4413d1aa037
18c380120fe37a4bdc8f295e86c6c4413d1aa037,18c38012,altosdroid: really don't need to store a local copy of the device name,"altosdroid: really don't need to store a local copy of the device name

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346053149,1346053149,6441437d3b0e848b225a3d6c78ab00e2590c6988
6441437d3b0e848b225a3d6c78ab00e2590c6988,6441437d,altosdroid: remove complexity around message passing,"altosdroid: remove complexity around message passing

* Don't really need to use bundles
* TelemetryService: Use a local variable to store the bluetooth device object

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1346053036,1346053036,58d2b70575f3616a056d2356a737b3be15ed3d66
f89e7de20374141b367205aa517a08ee203bfaf3,f89e7de2,altos: Trigger sample complete when all data are ready,"altos: Trigger sample complete when all data are ready

This has each sensor mark a bit in the current data record which is
then sent for processing when all of the data are present.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345999996,1345999996,dec1481786ad54e22634e32109b5ed6e5483938e
dec1481786ad54e22634e32109b5ed6e5483938e,dec14817,altos: Shrink STM stack size,"altos: Shrink STM stack size

512 bytes should be enough for anybody.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345999947,1345999947,d13d0fbfcb0fd6d8a1af46f6270a968d746c830e
d13d0fbfcb0fd6d8a1af46f6270a968d746c830e,d13d0fbf,altos: Make ao_cur_task_index track ao_cur_task in ao_yield,"altos: Make ao_cur_task_index track ao_cur_task in ao_yield

This keeps the two main task references (index and pointer) in
agreement during task switching, avoiding an extra assignment at the
end of the task switching loop.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345999774,1345999774,1c9baa88d6cd931c66d453674322908eb267ba4c
1c9baa88d6cd931c66d453674322908eb267ba4c,1c9baa88,altos: Make 'pad' driver useful with telefire v0.1,"altos: Make 'pad' driver useful with telefire v0.1

This reports correct status bits over the radio and to the LEDs for
all four channels, and also makes the firing test command control all
four relays.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345999625,1345999625,ea4db73328e865fd658b573da256ca0004c69c61
ea4db73328e865fd658b573da256ca0004c69c61,ea4db733,altos: Add debug command for 74hc597 driver,"altos: Add debug command for 74hc597 driver

This dumps the current state of the 74hc597 chip.

Note that this shows that the 74hc597 driver doesn't work, and that
the circuit used in telefire v0.1 can't work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345999503,1345999503,89f1a685a02c7808cf03853aa9a5ee50c6baf49e
89f1a685a02c7808cf03853aa9a5ee50c6baf49e,89f1a685,altos: Allow sharing of radio DMA with aes engine,"altos: Allow sharing of radio DMA with aes engine

otherwise, telefire doesn't have enough DMA channels.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345999414,1345999414,7ecb429fe4682faf209452b1738ff3c8096fc5d5
58d2b70575f3616a056d2356a737b3be15ed3d66,58d2b705,altosdroid: begin adding TextToSpeech support.,"altosdroid: begin adding TextToSpeech support.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345981113,1345981113,11896d22b7bc6e34e3f6109d28f8b6a2d37e6c25
11896d22b7bc6e34e3f6109d28f8b6a2d37e6c25,11896d22,altosdroid: whitespace cleanup,"altosdroid: whitespace cleanup

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345981090,1345981090,f8211fee3c8a5de6925eadca2679441801ac793e
f8211fee3c8a5de6925eadca2679441801ac793e,f8211fee,altosdroid: Send device name and connected state back to TelemetryService,"altosdroid: Send device name and connected state back to TelemetryService

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345981078,1345981078,8fdde3e74c6dce35f90f4575ce6914516fc56aba
8fdde3e74c6dce35f90f4575ce6914516fc56aba,8fdde3e7,altosdroid: re-work connect/thread handling in AltosBluetooth,"altosdroid: re-work connect/thread handling in AltosBluetooth

* Much more resilient to failure
* handles multiple blocked threads better

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345981053,1345981053,dba71db022ae4a9f7c5fd128b90caa73aa4e99da
dba71db022ae4a9f7c5fd128b90caa73aa4e99da,dba71db0,altosdroid: remove old commented code,"altosdroid: remove old commented code

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980899,1345980899,38827db5131a2681243649c76bfd1d7d9801f9ba
38827db5131a2681243649c76bfd1d7d9801f9ba,38827db5,altosdroid: add handling when restarting BT. delay start after stop.,"altosdroid: add handling when restarting BT. delay start after stop.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980885,1345980885,30d107882b62edf4e6d48923209da6ce3dabeef7
30d107882b62edf4e6d48923209da6ce3dabeef7,30d10788,altosdroid: set devicename and pass on to clients,"altosdroid: set devicename and pass on to clients

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980868,1345980868,d95b84b56c63002788939b93b6ce949d921a4892
d95b84b56c63002788939b93b6ce949d921a4892,d95b84b5,altosdroid: Send current state to client on connect,"altosdroid: Send current state to client on connect

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980645,1345980645,cf94a86f37284b53e89b13a7eeb871db647c61ba
cf94a86f37284b53e89b13a7eeb871db647c61ba,cf94a86f,altosdroid: add missing break; (just in case!),"altosdroid: add missing break; (just in case!)

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980600,1345980600,24fe48f66f94c99b8197a612afe6f98e980e9796
24fe48f66f94c99b8197a612afe6f98e980e9796,24fe48f6,altosdroid: debugging statements,"altosdroid: debugging statements

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980565,1345980565,2ef1723091b0c491ef445474844376185ca4102b
2ef1723091b0c491ef445474844376185ca4102b,2ef17230,altosdroid: forgot change to IncomingHandler constructor call. oops!,"altosdroid: forgot change to IncomingHandler constructor call. oops!

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980539,1345980539,d40f96fcc961cfbf6af67fc84591d2660d065ca0
d40f96fcc961cfbf6af67fc84591d2660d065ca0,d40f96fc,altosdroid: Strings and Layout changes,"altosdroid: Strings and Layout changes

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980506,1345980506,3d6fc5fe462531e05ca4b9be1a421490e067a28b
3d6fc5fe462531e05ca4b9be1a421490e067a28b,3d6fc5fe,altosdroid: lots of debugging statements,"altosdroid: lots of debugging statements

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980418,1345980418,31bffa435cec2098c7ab5c42c829ba6e1578b5d2
31bffa435cec2098c7ab5c42c829ba6e1578b5d2,31bffa43,altosdroid: need sendMessageToClients() for setState().. oops!,"altosdroid: need sendMessageToClients() for setState().. oops!

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980253,1345980253,a9ec3c96288b7ea4e40586321a0a98edf0c8fee5
a9ec3c96288b7ea4e40586321a0a98edf0c8fee5,a9ec3c96,altosdroid: Need access to handler inside AltosBluetooth,"altosdroid: Need access to handler inside AltosBluetooth

* Also move add_monitor() call

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980213,1345980213,d7173e814c49826f39bba1ff6b024819c555860c
d7173e814c49826f39bba1ff6b024819c555860c,d7173e81,altosdroid: reflect change in message name,"altosdroid: reflect change in message name

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345980001,1345980001,215d78f06093bd8a8b08a85cae0f1f34aee2a6ec
215d78f06093bd8a8b08a85cae0f1f34aee2a6ec,215d78f0,altosdroid: begin adding state support,"altosdroid: begin adding state support

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345979946,1345979946,fe6680dd3b4c31b3d4edc3f06a142f02bcb879df
fe6680dd3b4c31b3d4edc3f06a142f02bcb879df,fe6680dd,altosdroid: init device variable... oops!,"altosdroid: init device variable... oops!

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345979809,1345979809,2c5513c51b187ad26a59b193b401f38c35141d27
2c5513c51b187ad26a59b193b401f38c35141d27,2c5513c5,"altosdroid: Rename Connect message, add connected message","altosdroid: Rename Connect message, add connected message

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345979764,1345979764,a6373e84393312ed0fbf22285c704819c2011588
a6373e84393312ed0fbf22285c704819c2011588,a6373e84,altosdroid: init telem blocking list.. oops!,"altosdroid: init telem blocking list.. oops!

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345979649,1345979649,21359f600354e8ee840e839e61ef97d30f3586fc
21359f600354e8ee840e839e61ef97d30f3586fc,21359f60,altosdroid: disable NotificationManager stuff for now,"altosdroid: disable NotificationManager stuff for now

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345979613,1345979613,54baecc208a40606e3242b2cbd5e66567053646f
54baecc208a40606e3242b2cbd5e66567053646f,54baecc2,altosdroid: Convert handlers to use weakreferences,"altosdroid: Convert handlers to use weakreferences

* Also renamed bluetooth start/stop methods

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345979568,1345979568,bf7def1a7b93867dfe16fe6499ee028747634c41
bf7def1a7b93867dfe16fe6499ee028747634c41,bf7def1a,altosdroid: Remove Binder import from TelemetryService,"altosdroid: Remove Binder import from TelemetryService

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345951738,1345951738,5f4c47389a3d0d10d659a2e00fc74a150b5fed88
5f4c47389a3d0d10d659a2e00fc74a150b5fed88,5f4c4738,altosdroid: Add State constants for future usage,"altosdroid: Add State constants for future usage

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345951716,1345951716,6ffcc82d8d18d3f05d4f5881e50dda298b43c114
6ffcc82d8d18d3f05d4f5881e50dda298b43c114,6ffcc82d,altosdroid: begin adding IPC to TelemetryService,"altosdroid: begin adding IPC to TelemetryService

* And add imports for LinkedBlockingQueue... oops!

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345951689,1345951689,a33333b97e810f50db36f345aab71a3200feccc3
a33333b97e810f50db36f345aab71a3200feccc3,a33333b9,altosdroid: remove old Binder from TelemetryService,"altosdroid: remove old Binder from TelemetryService

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345951459,1345951459,b69796991c1da6baf245349fcc4392668b9b5570
b69796991c1da6baf245349fcc4392668b9b5570,b6979699,altosdroid: begin adding IPC to main thread,"altosdroid: begin adding IPC to main thread

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345951397,1345951397,bcd53483ccf4bbb2f163a011faae6d19a7bbed0d
bcd53483ccf4bbb2f163a011faae6d19a7bbed0d,bcd53483,altosdroid: Add TBT initialisation to AltosBluetooth,"altosdroid: Add TBT initialisation to AltosBluetooth

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345951343,1345951343,ef29a197ce3318404f37e8a0b24d235e8b024a1f
ef29a197ce3318404f37e8a0b24d235e8b024a1f,ef29a197,altosdroid: Add debugging statements to AltosBluetooth,"altosdroid: Add debugging statements to AltosBluetooth

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345951317,1345951317,fb8cd14cca61ca59b95c23e71505607b4509d4ed
fb8cd14cca61ca59b95c23e71505607b4509d4ed,fb8cd14c,altosdroid: Add input thread for reading from TBT,"altosdroid: Add input thread for reading from TBT

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345951296,1345951296,5ce132b3366cd120499fcbe22b5fbe96d21b8584
5ce132b3366cd120499fcbe22b5fbe96d21b8584,5ce132b3,altosdroid: Move constructor for AltosBluetooth,"altosdroid: Move constructor for AltosBluetooth

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345951242,1345951242,b59e7d0b201290f2cb0fd494ef28c1402e11ba3b
b59e7d0b201290f2cb0fd494ef28c1402e11ba3b,b59e7d0b,altosdroid: clean up stub functions in AltosBluetooth.java,"altosdroid: clean up stub functions in AltosBluetooth.java

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345951124,1345951124,d184638be79dafd6fb43df21040eb52402f54ea5
d184638be79dafd6fb43df21040eb52402f54ea5,d184638b,altosdroid: AltosBluetooth.java,"altosdroid: AltosBluetooth.java

* clean up variables/comments

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345950672,1345950672,bad155538c4630c62ade80afd20830aad37c287e
bad155538c4630c62ade80afd20830aad37c287e,bad15553,altosdroid: AltosBluetooth.java,"altosdroid: AltosBluetooth.java

* Clean up imports
* Convert from reflection to using Well Known UUID for SPP.
* clean up local variables
* Add debug conditionals to logging
* remove references to socket type

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345950615,1345950615,c9689a3ef65ea9da5a7009834add789737ffb6a9
c9689a3ef65ea9da5a7009834add789737ffb6a9,c9689a3e,altosdroid: Clean up imports in TelemetryService,"altosdroid: Clean up imports in TelemetryService

* Begin adding AltosLib usage

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345950234,1345950234,ffdfc08c317f503e30604d058749b24c3ca7bafa
ffdfc08c317f503e30604d058749b24c3ca7bafa,ffdfc08c,altosdroid: Add service start/bind/unbind to AltosDroid,"altosdroid: Add service start/bind/unbind to AltosDroid

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345950023,1345950023,95a34caa8343997bcf7d8969ee8ae3124efcb573
95a34caa8343997bcf7d8969ee8ae3124efcb573,95a34caa,altosdroid: Remove AltosLib import from main thread,"altosdroid: Remove AltosLib import from main thread
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345949824,1345949824,cfe93315fc0e4b01a95b8e59f24aca96b5a66daf
cfe93315fc0e4b01a95b8e59f24aca96b5a66daf,cfe93315,altosdroid: whitespace,"altosdroid: whitespace

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345949719,1345949719,3f3da6626ef41b2cab116d6299d2a89cbf7718a9
3f3da6626ef41b2cab116d6299d2a89cbf7718a9,3f3da662,altosdroid: Re-locate TextView initialisation,"altosdroid: Re-locate TextView initialisation

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345949694,1345949694,917f519a4e876087590a3a260fbbccf4c0ac3e31
917f519a4e876087590a3a260fbbccf4c0ac3e31,917f519a,altosdroid: remove UI components/imports no longer used,"altosdroid: remove UI components/imports no longer used

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345949646,1345949646,80bf63702175322053f2b38c4fff56b653ab7c70
80bf63702175322053f2b38c4fff56b653ab7c70,80bf6370,altosdroid: excise BluetoothChatService example code,"altosdroid: excise BluetoothChatService example code

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345949550,1345949550,372840b4ebfd3da3cd713b6bc6a8ffc8cd6b6b8c
372840b4ebfd3da3cd713b6bc6a8ffc8cd6b6b8c,372840b4,altosdroid: remove TelemetryService activities,"altosdroid: remove TelemetryService activities

service start/stop will be handled by AltosDroid/itself now.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345949328,1345949328,24503eb330bf887f5c76afe2aaa9c9f2ce177460
24503eb330bf887f5c76afe2aaa9c9f2ce177460,24503eb3,altosdroid: whitespace (spaces to tabs) (part2),"altosdroid: whitespace (spaces to tabs) (part2)

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345949049,1345949049,7aab6e6b6e361455a7515fe6db7b0e9a6e4c786c
7aab6e6b6e361455a7515fe6db7b0e9a6e4c786c,7aab6e6b,altosdroid: whitespace (spaces to tabs) (part1),"altosdroid: whitespace (spaces to tabs) (part1)

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345948176,1345948176,0f3597389977f86a8c1bdff1b7f46107c43ef306
0f3597389977f86a8c1bdff1b7f46107c43ef306,0f359738,altosdroid: Update copyrights,"altosdroid: Update copyrights

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1345941684,1345941684,fc9aed1ef3485d259722c9b89e19969e0afe257c
7ecb429fe4682faf209452b1738ff3c8096fc5d5,7ecb429f,altos: Configure telefire SPI and LEDs correctly,"altos: Configure telefire SPI and LEDs correctly

This places the telefire SPI bus on USART1 option 2 and
marks the various LED functions with symbolic names.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345794415,1345794415,310c1d0bf83448eb12e5d64ac09a4279c25fd258
310c1d0bf83448eb12e5d64ac09a4279c25fd258,310c1d0b,altos: telelaunch doesn't need ao_radio_cmac_init,"altos: telelaunch doesn't need ao_radio_cmac_init

This function was used to initialize the LCO functions, which were
moved to ao_lco.c a few commits back, so ao_radio_cmac_init doesn't
even exist anymore.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345794275,1345794275,6581fa1641882198c870c2f7b1340794b9d47f29
6581fa1641882198c870c2f7b1340794b9d47f29,6581fa16,altos: Get ao_pad.c working on telefire v0.1,"altos: Get ao_pad.c working on telefire v0.1

Monitor all four channels, allow any channel to be fired.
Turn on power LED at startup time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345794152,1345794152,83e0d4352041b3964ea7a133b0f67da9ebaa1c77
83e0d4352041b3964ea7a133b0f67da9ebaa1c77,83e0d435,altos: Split out LCO functions from ao_radio_cmac.c to ao_lco.c,"altos: Split out LCO functions from ao_radio_cmac.c to ao_lco.c

These functions are not used in the telelaunch or telefire nodes, so
don't force them to be included.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345794027,1345794027,c64999c39d6d9242f98bdc9312436c3333115bfd
c64999c39d6d9242f98bdc9312436c3333115bfd,c64999c3,altos: Have radio_cmac turn on LEDs as appropriate,"altos: Have radio_cmac turn on LEDs as appropriate

Use AO_LED_RX and AO_LED_TX defines if present to control LEDs during
radio operations.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345793986,1345793986,a8e9906513227600599da12b268ff5f807ae98c7
a8e9906513227600599da12b268ff5f807ae98c7,a8e99065,altos: Add 'ao_led_set_mask' in the PCA9922 driver,"altos: Add 'ao_led_set_mask' in the PCA9922 driver

This lets a subset of the LEDs be controlled independent of other LED settings.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345793695,1345793695,50b58d703b8b48005a3ca9ad4e3603d6f7ac1430
50b58d703b8b48005a3ca9ad4e3603d6f7ac1430,50b58d70,altos: Make cc1111 SPI pins configurable,"altos: Make cc1111 SPI pins configurable

Allow either USART in any configuration. Still only supports one SPI
bus though.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345793618,1345793618,7a0ed0ff4192060854d69e640de2c30105eb2f62
7a0ed0ff4192060854d69e640de2c30105eb2f62,7a0ed0ff,altos: Disable telefire 'pad' listener when testing radio,"altos: Disable telefire 'pad' listener when testing radio

Ensures that the radio testing won't block waiting for a firing mode
packet to arrive.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345793233,1345793233,659c0cd3ee4b9581c12ac2cd1b4162bf07a921ce
659c0cd3ee4b9581c12ac2cd1b4162bf07a921ce,659c0cd3,altosui: Check for JRE 1.7 in Windows installer,"altosui: Check for JRE 1.7 in Windows installer

altosui runs fine with version 1.7 (on Linux at least), so allow that
version to satisfy the java check instead of requiring the user to
down-grade to 1.6

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345395736,1345395736,ab1279cc6a683595631d7ac8bed7b36e0c8a691c
ab1279cc6a683595631d7ac8bed7b36e0c8a691c,ab1279cc,Here's the button driver and event queue logic,"Here's the button driver and event queue logic

These were neglected in the commit which was supposed to include them

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345355507,1345355507,93db8febda03d9a02c5c1ccdc6ad44eaf00a433b
93db8febda03d9a02c5c1ccdc6ad44eaf00a433b,93db8feb,altos: Add MMA655X driver,"altos: Add MMA655X driver

Just debug code at this point, will complete on real hardware

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345350394,1345350394,8457ca81adc9d62a7ffe56a7c0c36f2fcadaa682
8457ca81adc9d62a7ffe56a7c0c36f2fcadaa682,8457ca81,altos/cc1111: Document SPI bus pin options,"altos/cc1111: Document SPI bus pin options

Just a comment in the source code about which pins each option selects.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345350334,1345350334,f46d94ca5c969c88dd307d1b684d6fafa2157020
f46d94ca5c969c88dd307d1b684d6fafa2157020,f46d94ca,altos: Use split SPI bus for MS5607 sensor,"altos: Use split SPI bus for MS5607 sensor

Leave CS low while releasing the SPI bus when waiting for conversion
complete -- other SPI bus users will use another set of pins.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345350256,1345350256,a1a48aa9ee0bf7fa6720b34c0f544485caea7cac
a1a48aa9ee0bf7fa6720b34c0f544485caea7cac,a1a48aa9,altos: Allow STM SPI bus on multiple pin sets,"altos: Allow STM SPI bus on multiple pin sets

This allows multiple STM pin groups to be used for each SPI
bus. Useful for the MS5607 sensor which signals conversion complete on
the MISO line.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1345350118,1345350118,00abbbb79de67dc95176fe48b23ce3e8614e8d3a
00abbbb79de67dc95176fe48b23ce3e8614e8d3a,00abbbb7,ao-send-telem: make --realtime work,"ao-send-telem: make --realtime work

(add ""break;"" to the case statement for options)

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1344366469,1344366469,9456332fc16269270a2e9b7ef0b54523800cfe27
9456332fc16269270a2e9b7ef0b54523800cfe27,9456332f,Merge branch 'master' of git://git.gag.com/fw/altos,"Merge branch 'master' of git://git.gag.com/fw/altos
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1344365355,1344365355,"bd02349111ae0f39b320e6a10a330051ddc39fdf,4d4ad34aec0c75c66162b992f1e52947e4685730"
4d4ad34aec0c75c66162b992f1e52947e4685730,4d4ad34a,Merge remote-tracking branch 'mjb/master',"Merge remote-tracking branch 'mjb/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344365300,1344365300,"c7f228503870c44dfd278ede8b0980dbac73d3c7,8e4ebd1f6eb928b5cb7bcda4ed88851aa9e61bdf"
bd02349111ae0f39b320e6a10a330051ddc39fdf,bd023491,Merge branch 'master' of git://git.gag.com/fw/altos,"Merge branch 'master' of git://git.gag.com/fw/altos
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1344365216,1344365216,"8e4ebd1f6eb928b5cb7bcda4ed88851aa9e61bdf,c7f228503870c44dfd278ede8b0980dbac73d3c7"
8e4ebd1f6eb928b5cb7bcda4ed88851aa9e61bdf,8e4ebd1f,Add ao-send-telem to .gitignore,"Add ao-send-telem to .gitignore

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1344365103,1344365103,fc9aed1ef3485d259722c9b89e19969e0afe257c
c7f228503870c44dfd278ede8b0980dbac73d3c7,c7f22850,altos: Fix .sdcdbrc file for telebt-v0.1,"altos: Fix .sdcdbrc file for telebt-v0.1

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344364336,1344364336,c58f3d1a373b20fac3f51037008bcc40955f1348
c58f3d1a373b20fac3f51037008bcc40955f1348,c58f3d1a,altos: Oops. Serial 1 stdin was busted by typo,"altos: Oops. Serial 1 stdin was busted by typo

A typo in the symbol used to enable stdin wakeups from serial1 caused
the input to pend until some other wakeup occurred.

This also makes the serial1 hw flow control pin selects in config 2
work right, although those aren't used by any current product

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344364247,1344364247,46f87373bc8c28442273ee4f8da3a352223150f5
46f87373bc8c28442273ee4f8da3a352223150f5,46f87373,altos: Add button driver and event queue,"altos: Add button driver and event queue

With this, a single task can wait for any button or quadrature input
device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344318832,1344318832,11046bc89b3ce6386f1005fc8476b08f54d6f5fb
11046bc89b3ce6386f1005fc8476b08f54d6f5fb,11046bc8,altos: Support multiple quadrature encoders.,"altos: Support multiple quadrature encoders.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344315298,1344315298,5f7e61c749b02ed16e368502062e39b0471e9257
5f7e61c749b02ed16e368502062e39b0471e9257,5f7e61c7,altos: Fix up quadrature driver,"altos: Fix up quadrature driver

Mostly works now, should work reliably with a bit of input filtering.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344309632,1344309632,ab379493dbe9923db8e458d2f4e0344df17d331c
ab379493dbe9923db8e458d2f4e0344df17d331c,ab379493,Signed-off-by: Keith Packard <keithp@keithp.com>,"Signed-off-by: Keith Packard <keithp@keithp.com>

altos: Test quadrature driver
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344306902,1344306902,b0b52ca73bc836336ecc70247a9ed1dd633920d9
b0b52ca73bc836336ecc70247a9ed1dd633920d9,b0b52ca7,altos: Add quadrature driver,"altos: Add quadrature driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344306874,1344306874,6171892fa32e8a662a494ec6ba28a82fddc68589
6171892fa32e8a662a494ec6ba28a82fddc68589,6171892f,altos: Add ao_gpio_get and ao_exti_set_mode,"altos: Add ao_gpio_get and ao_exti_set_mode

Needed to support general GPIO interrupts

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344306824,1344306824,de701d5a234cd21930cf92c9cabebb0e230da9b5
de701d5a234cd21930cf92c9cabebb0e230da9b5,de701d5a,altos: Build ao_kalman.h from cc1111 subdirs as needed,"altos: Build ao_kalman.h from cc1111 subdirs as needed

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344203920,1344203920,b80d1f4e8a2df3ace64468a38a815a4f982aa179
fc9aed1ef3485d259722c9b89e19969e0afe257c,fc9aed1e,Adjust service to be persistent.,"Adjust service to be persistent.

* Run as a foreground service -> high priority
* Notification set to display as ""Ongoing"".

Changed logo to be in colour at keithp's request. Greyscale logos still present as *_g.png

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1330248609,1344201999,af34baf5dc587bee4cffa699ef383f85dde8c7cd
b80d1f4e8a2df3ace64468a38a815a4f982aa179,b80d1f4e,move from Debian packaged sdcc to new cc1111 package forked from 2.9.0-5,"move from Debian packaged sdcc to new cc1111 package forked from 2.9.0-5
",,,,Bdale Garbee,bdale@gag.com,Keith Packard,keithp@keithp.com,1339380264,1344194510,0f82021186565fda10df7893b95deae4a1f32778
0f82021186565fda10df7893b95deae4a1f32778,0f820211,src/cc1111: Enable SPI slave mode,"src/cc1111: Enable SPI slave mode

This is untested...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344194245,1344194245,39594fdb3e30a1a25dd894c217e3d9d773bab972
39594fdb3e30a1a25dd894c217e3d9d773bab972,39594fdb,src/cc1111: Allow serial0 without serial1,"src/cc1111: Allow serial0 without serial1

The ao_serial_speed structure is needed by serial0 too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344194185,1344194185,2610b316eb939c1532061646b05207fcd54d984f
2610b316eb939c1532061646b05207fcd54d984f,2610b316,src/cc1111: Add ao_gpio_set macro,"src/cc1111: Add ao_gpio_set macro

Allows general GPIO-using code to run on cc1111

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344194136,1344194136,82a37d70e3cacf792c1aa18f8c0d2a19d6f321ed
82a37d70e3cacf792c1aa18f8c0d2a19d6f321ed,82a37d70,altosui: Move 'implements Runnable' from AltosSerial to AltosLink,"altosui: Move 'implements Runnable' from AltosSerial to AltosLink

AltosLink is the class providing the 'run' method, after all...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1344146328,1344146328,2e7e304e67bc1e094282c8668fa8cccf09f9c9b4
af34baf5dc587bee4cffa699ef383f85dde8c7cd,af34baf5,Reduce size of textview.,"Reduce size of textview.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1343907506,1343907506,359d7353fd7b7d4d537db04c5e89724502333ff8
359d7353fd7b7d4d537db04c5e89724502333ff8,359d7353,AltosDroid: Begin re-working Bluetooth code,"AltosDroid: Begin re-working Bluetooth code

* Move to using explicit 'magic' UUID, rather than java reflection
* Re-work UI to make it more useful for testing
* Use Insecure RFCOMM only, and remove code that differentiates.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1343902164,1343902164,c5304ac976dd44344a0b70ae3622e1f2d112a147
c5304ac976dd44344a0b70ae3622e1f2d112a147,c5304ac9,Fix min/target SDK versions,"Fix min/target SDK versions

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1343899223,1343899223,7481d06bebc2dc1473f451971d8b744c9da4e726
7481d06bebc2dc1473f451971d8b744c9da4e726,7481d06b,Merge branch 'master' of ssh://mjb@git.ethernal.org/~/git/altos,"Merge branch 'master' of ssh://mjb@git.ethernal.org/~/git/altos
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1343899095,1343899095,"599e28b2242c79bdd0960ef16e580e51a2fa3795,c56dead72f65e7468017656347dba531ab2ca480"
599e28b2242c79bdd0960ef16e580e51a2fa3795,599e28b2,Re-work external lib support for newer Android SDK,"Re-work external lib support for newer Android SDK

* Remove older *.properties methods of locating lib dir
* clean up Eclipse classpath file
* adjust Makefile.am to link AltosLib.jar into libs/

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1343899014,1343899014,59588ba34159b27c02e1a886b46497ecfa0cf4d3
c56dead72f65e7468017656347dba531ab2ca480,c56dead7,Ignore autogenerated file: altosui/Info.plist,"Ignore autogenerated file: altosui/Info.plist

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1343721935,1343721935,fb79f8fb358f8df25674336cd558fc3998cb7d9e
fb79f8fb358f8df25674336cd558fc3998cb7d9e,fb79f8fb,Don't build ao-stmload if stlink is not available.,"Don't build ao-stmload if stlink is not available.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1343721874,1343721874,59588ba34159b27c02e1a886b46497ecfa0cf4d3
2e7e304e67bc1e094282c8668fa8cccf09f9c9b4,2e7e304e,altos: Add driver for STM internal flash,"altos: Add driver for STM internal flash

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1343616488,1343616488,843fcab46d633e5bb6959286adeb68e41a4c30a3
843fcab46d633e5bb6959286adeb68e41a4c30a3,843fcab4,altos: Add telefire-v0.1,"altos: Add telefire-v0.1

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1343616296,1343616462,e4d244eefa4c779cd9c8a91389bf998c54705b72
e4d244eefa4c779cd9c8a91389bf998c54705b72,e4d244ee,altos: Add software AES implementation,"altos: Add software AES implementation

This is untested

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1343616173,1343616173,21e39811bd234c6f66ab7644864fcc1b8c316998
21e39811bd234c6f66ab7644864fcc1b8c316998,21e39811,altos/cc1111: Fix serial 0 option 2 pins definitions,"altos/cc1111: Fix serial 0 option 2 pins definitions

tx/rx are 4/5, rts/cts are 2/3

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1343615810,1343615810,743dca54012758d3ae54312d542b34afa88495cd
743dca54012758d3ae54312d542b34afa88495cd,743dca54,altosui: Remove duplicate values from info table. Add altitude,"altosui: Remove duplicate values from info table. Add altitude

No need to have state/call/serial/flight data, those are all in the
header. Having altitude makes Monitor Idle slightly more useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1343615715,1343615715,0bf21399d3d47d58410df4c6ce89fc20fcd42c89
0bf21399d3d47d58410df4c6ce89fc20fcd42c89,0bf21399,altosui: Handle Monitor Idle errors better,"altosui: Handle Monitor Idle errors better

Deal with missing data by checking for MISSING in more places.
Handle serial communication failures during send by reporting back
from libaltos.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1343615640,1343615640,59588ba34159b27c02e1a886b46497ecfa0cf4d3
59588ba34159b27c02e1a886b46497ecfa0cf4d3,59588ba3,Add ability to re-play telemetry through TeleDongle,"Add ability to re-play telemetry through TeleDongle

This adds a new command to TeleDongle to send arbitrary data, and then
creates a new tool, 'ao-send-telem' that replays existing telemetry
files through TeleDongle.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1343604143,1343604143,52e920bc7a98edf5c6f2ad0bd59d581011dcd5c9
52e920bc7a98edf5c6f2ad0bd59d581011dcd5c9,52e920bc,altos: Move ao_radio_cmac.c to core (it doesn't depend on hardware),"altos: Move ao_radio_cmac.c to core (it doesn't depend on hardware)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342995507,1342995507,233ab58df8ac8e1fdeab8d4c2f6c8c9d3f6e7be1
233ab58df8ac8e1fdeab8d4c2f6c8c9d3f6e7be1,233ab58d,altosui: Move AltosIgnite.java to altoslib,"altosui: Move AltosIgnite.java to altoslib

To be shared with altosdroid eventually

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342983224,1342983257,38f66a31174dd367e39d717c527f555add60a9d4
38f66a31174dd367e39d717c527f555add60a9d4,38f66a31,tools: Use pkgconfig to find stlink for ao-stmload,"tools: Use pkgconfig to find stlink for ao-stmload

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342811057,1342811092,e033a72d3f420e18ed24354c7dfc7e1317a03fb6
e033a72d3f420e18ed24354c7dfc7e1317a03fb6,e033a72d,Add stlink pinout,"Add stlink pinout

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342807702,1342811092,15ebd9c75aa57572040e3b1ee41e6f3eb8cf92ee
15ebd9c75aa57572040e3b1ee41e6f3eb8cf92ee,15ebd9c7,altosui: Delay starting KML output for flight and GPS coords,"altosui: Delay starting KML output for flight and GPS coords

Don't start outputing KML data until the telem record containing
flight number and GPS coordinates are present.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342716380,1342716509,ada6f2dfc045e77cb9499f20cdec1b4a54ef0db1
ada6f2dfc045e77cb9499f20cdec1b4a54ef0db1,ada6f2df,telescience: correctly calculating rate values with higher resolution,"telescience: correctly calculating rate values with higher resolution
",,,,Robert Garbee,robert@gag.com,Robert Garbee,robert@gag.com,1342658460,1342658460,e2b472bbb2418fc13be42dbc7c52beb88479c46d
e2b472bbb2418fc13be42dbc7c52beb88479c46d,e2b472bb,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Robert Garbee,robert@gag.com,Robert Garbee,robert@gag.com,1342643127,1342643127,"75d6aa6f798606f1a6c5a46542065dda81e63b2a,b242f2756a8d9419a9bdba890b9e6b73560bdc19"
75d6aa6f798606f1a6c5a46542065dda81e63b2a,75d6aa6f,ICP3 working,"ICP3 working
",,,,Robert Garbee,robert@gag.com,Robert Garbee,robert@gag.com,1342643045,1342643045,49b1ff4c614d24977b33cd17b583acc87acff476
49b1ff4c614d24977b33cd17b583acc87acff476,49b1ff4c,Timer 3 working with slower clock and all 16 bits.,"Timer 3 working with slower clock and all 16 bits.
",,,,Robert Garbee,robert@gag.com,Robert Garbee,robert@gag.com,1342640487,1342640487,e93c6bcc799d76d4ff425815e2601a25e6796229
b242f2756a8d9419a9bdba890b9e6b73560bdc19,b242f275,altosdroid: Start adding an AltosLink subclass for android,"altosdroid: Start adding an AltosLink subclass for android

Will talks over bluetooth while providing an AltosLink APi

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342595034,1342595034,f164e48cbeff521d45737794e2046a08322951d6
f164e48cbeff521d45737794e2046a08322951d6,f164e48c,altosui: Make scan UI handle incremental telem data,"altosui: Make scan UI handle incremental telem data

The new telem format doesn't send everything in each telem packet, so
we need to handle updating information incrementally in the scan
results. This involved clearing old scan data when switching
frequencies and then updating existing entries with new data as it arrives.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342594911,1342594911,a698cd68968fc0be5f96b1729cdea2f65d2ccbf6
a698cd68968fc0be5f96b1729cdea2f65d2ccbf6,a698cd68,altos: Toggling telemetry monitoring would replay the telem queue,"altos: Toggling telemetry monitoring would replay the telem queue

Using the 'm' command to turn telem off and back on would end up going
around the whole telemetry queue replaying everything there as the
wait loop would exit when disabling monitoring even if the ring was empty.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342594753,1342594753,9fd5e3c28fb0fd6da8641e7dd18b9912866d1b75
9fd5e3c28fb0fd6da8641e7dd18b9912866d1b75,9fd5e3c2,"altos: With debug cables disconnected, CC1120 seems happy at +16dBm","altos: With debug cables disconnected, CC1120 seems happy at +16dBm

Let's see how it goes...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342584367,1342584367,700818c8ff0518e79bff2f0e80b2cc3cb3b48bf0
700818c8ff0518e79bff2f0e80b2cc3cb3b48bf0,700818c8,altosui: Accept variations in spacing for igniter status reply,"altosui: Accept variations in spacing for igniter status reply

Megametrum uses different white space; just deal with it here.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342584298,1342584298,f6921c9040b1f1fc4408d163532b0695a3611195
f6921c9040b1f1fc4408d163532b0695a3611195,f6921c90,altoslib: Move idle monitor managing code to altoslib,"altoslib: Move idle monitor managing code to altoslib

More stuff to be shared (potentially)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342584263,1342584263,b4be63627e146c7c868b5b3468d34880a561cfba
b4be63627e146c7c868b5b3468d34880a561cfba,b4be6362,"altos: Megametrum ADC values are 12 bits, discard low 4 for telemetry","altos: Megametrum ADC values are 12 bits, discard low 4 for telemetry

We've only got space for 8 bits for the ADC values for pyro channels,
discard the low 4 bits instead of the low 8 bits.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342583095,1342583095,97c1cfee929a35dd1596dc02ce519b80132f3c5c
97c1cfee929a35dd1596dc02ce519b80132f3c5c,97c1cfee,altoslib: Don't use MISSING values in max computations,"altoslib: Don't use MISSING values in max computations

Early telemetry state may be missing critical data, don't use MISSING
values in computing max ranges.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342583011,1342583011,99b7eaf8d1b312443b842d078fb8464032b3a39b
99b7eaf8d1b312443b842d078fb8464032b3a39b,99b7eaf8,altoslib: Fix MM conversion functions,"altoslib: Fix MM conversion functions

Pressure is already reported in Pa, no need to convert that.
Voltage divider computations were backwards.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342582962,1342582962,a5d873d47b3b16ca32559b4de668bf07b25eddb0
e93c6bcc799d76d4ff425815e2601a25e6796229,e93c6bcc,"first work on PWM input to TeleScience, 'p' command displays timer 1","first work on PWM input to TeleScience, 'p' command displays timer 1
",,,,Robert Garbee,robert@gag.com,Robert Garbee,robert@gag.com,1342553028,1342553028,a5d873d47b3b16ca32559b4de668bf07b25eddb0
a5d873d47b3b16ca32559b4de668bf07b25eddb0,a5d873d4,altos: Place STM config values at fixed addresses for re-use,"altos: Place STM config values at fixed addresses for re-use

Just like cc1111, stick the serial number and radio calibration values
at known fixed addresses so that when re-flashing the board, we can go
find the existing values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342513492,1342513492,20877ae9de8bb5d3a29e2a96024e53afbd396f55
20877ae9de8bb5d3a29e2a96024e53afbd396f55,20877ae9,Add ao-stmload tool,"Add ao-stmload tool

This loads an ELF image through the STlink programming interface using
the stlink utility library

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342513125,1342513125,eda636c5f309b85282b4142118ee65673d28d137
eda636c5f309b85282b4142118ee65673d28d137,eda636c5,altosui: Skip unknown data when parsing ADC for idle monitoring,"altosui: Skip unknown data when parsing ADC for idle monitoring

This resolves an infinite loop when talking to megametrum.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342478180,1342478180,52196975c447851f14619213c1de5101d334eebc
52196975c447851f14619213c1de5101d334eebc,52196975,altosui: Move serial datastream parser to altoslib,"altosui: Move serial datastream parser to altoslib

instead of having it in altosui

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342478111,1342478111,0edb5616a70fd480317acc99ec3c28c662aa8556
0edb5616a70fd480317acc99ec3c28c662aa8556,0edb5616,altos: megametrum depends on ao_companion.h,"altos: megametrum depends on ao_companion.h

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342478041,1342478041,5860f75677ee20fcf35ab89a6b62f3e14a1c32f5
5860f75677ee20fcf35ab89a6b62f3e14a1c32f5,5860f756,altos: Enable pyro channel control in telepyro,"altos: Enable pyro channel control in telepyro

This should make the board actually work now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342477946,1342477946,3ce645a79b54e22d7835c6e390a22a5ad501a339
3ce645a79b54e22d7835c6e390a22a5ad501a339,3ce645a7,altos: Add manual firing command for extra pyro channels,"altos: Add manual firing command for extra pyro channels

In parallel with the existing igniter commands, this tests the
programmable pyro channels

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342477829,1342477829,6581eefbdbd8d3e94f615bdf11652a000d131c8e
6581eefbdbd8d3e94f615bdf11652a000d131c8e,6581eefb,altos: Use 'HAS_ORIENT' to enable orientation selection in pyro code,"altos: Use 'HAS_ORIENT' to enable orientation selection in pyro code

Don't expose orientation options when no orientation data is available

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342477678,1342477678,1887ca3d7d4a0259686f8c1e68d1e47c47b4ab84
1887ca3d7d4a0259686f8c1e68d1e47c47b4ab84,1887ca3d,altos: Pass flight dynamics to companion boards,"altos: Pass flight dynamics to companion boards

Necessary for TelePyro

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342477547,1342477547,90507d4f7ef77b0870a032b1d9809898c2924721
90507d4f7ef77b0870a032b1d9809898c2924721,90507d4f,altos: Make ao_tick_count visible,"altos: Make ao_tick_count visible

Necessary to fetch it when interrupts are already disabled as we can't
call ao_time then.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342477461,1342477461,184e2ff4790974733df57facdeeb96bfe692ab54
184e2ff4790974733df57facdeeb96bfe692ab54,184e2ff4,altos: Remove some debug code from avr ADC driver,"altos: Remove some debug code from avr ADC driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342477281,1342477281,e7ca3a7849b3cbbb38143d35fe86972290bd4e61
e7ca3a7849b3cbbb38143d35fe86972290bd4e61,e7ca3a78,altos: Make sure telepyro ao_product.h is built before .o files,"altos: Make sure telepyro ao_product.h is built before .o files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342477092,1342477092,4de789331098abc24abcb9390a35aef889a41784
4de789331098abc24abcb9390a35aef889a41784,4de78933,altos: Make storage addresses datatype configurable,"altos: Make storage addresses datatype configurable

No sense using 32 bits for tiny hardware

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342475273,1342475273,84d5e00d417af4924594908d19346bb965089cdd
84d5e00d417af4924594908d19346bb965089cdd,84d5e00d,src: Add driver for AVR internal eeprom. Use for telepyro config.,"src: Add driver for AVR internal eeprom. Use for telepyro config.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342475080,1342475080,2a23030031c31267fc4f14accd9220f285c03b61
2a23030031c31267fc4f14accd9220f285c03b61,2a230300,altos: No space for pyro help on TP v0.1,"altos: No space for pyro help on TP v0.1

AVR doesn't have enough ram to hold the help messages, and we can't
use them in flash.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342474849,1342474849,366217e86a4c353012b5102322ee6927f7b27a21
366217e86a4c353012b5102322ee6927f7b27a21,366217e8,altos: Remove unused 'func' from ao_config_set,"altos: Remove unused 'func' from ao_config_set

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342474745,1342474745,81b7b58c9df01847fa47747deeff8c3c91304ad1
81b7b58c9df01847fa47747deeff8c3c91304ad1,81b7b58c,altos/avr: Remove debugging command from USB driver,"altos/avr: Remove debugging command from USB driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342474678,1342474678,42a51becf4b76f23dbd4f5f80f8879ce696aa543
42a51becf4b76f23dbd4f5f80f8879ce696aa543,42a51bec,altos/avr: Remove debugging printf in avr stdio startup,"altos/avr: Remove debugging printf in avr stdio startup

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342474611,1342474611,0cfd22baa6af44e053428c30c1a95cf5551b68af
0cfd22baa6af44e053428c30c1a95cf5551b68af,0cfd22ba,src: Add explicit 'pin' argument to ao_enable_output,"src: Add explicit 'pin' argument to ao_enable_output

This lets the cc1111 use the atomic bit operation instead of a mask,
which is immune to interrupt issues as well as being a shorter code sequence.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342259057,1342259057,37032e4b0cbac4c823e3dd18e60ad8900e9ceff1
37032e4b0cbac4c823e3dd18e60ad8900e9ceff1,37032e4b,altos/megametrum: Support the four additional pyro channels,"altos/megametrum: Support the four additional pyro channels

These use the new pyro code to allow for some flexibility in programming.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342254590,1342254590,82b50fc1b7f2c6af7264fbad2c35508abc15e81e
82b50fc1b7f2c6af7264fbad2c35508abc15e81e,82b50fc1,altos/stm: Expose ao_gpio_set which sets a specific GPIO pin,"altos/stm: Expose ao_gpio_set which sets a specific GPIO pin

Will need versions for other architectures

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342254535,1342254535,726e0f2c547b6bae1f1e640e2c1155c0b9631a9b
726e0f2c547b6bae1f1e640e2c1155c0b9631a9b,726e0f2c,stm: running out of memory in MM -- reduce stack to 668 bytes,"stm: running out of memory in MM -- reduce stack to 668 bytes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342254511,1342254511,d90587535676f9492f0fde6b974353158104ef88
d90587535676f9492f0fde6b974353158104ef88,d9058753,altos: Add arbitrary pyro channel support,"altos: Add arbitrary pyro channel support

Programmed by specifying a conjunction of flight conditions that
trigger the igniter to fire.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342254398,1342254398,09633cac697e37d770b2b666ab20cab30628484f
09633cac697e37d770b2b666ab20cab30628484f,09633cac,altos/stm: Force STM stack to start at the top of RAM,"altos/stm: Force STM stack to start at the top of RAM

Using a fixed size means crashing if there's not enough space for
that, or wasting memory if there's too much.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342254254,1342254254,b5f6d4e5251a825395c93916afa3af659c678498
b5f6d4e5251a825395c93916afa3af659c678498,b5f6d4e5,altosui: Abstract remote connection timeout stuff,"altosui: Abstract remote connection timeout stuff

This moves some of the logic for managing when to present the 'cancel'
dialog for remote operations to altoslib.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342059332,1342059332,f078a591cf2fafe89bb1bb883f49d80750129d44
f078a591cf2fafe89bb1bb883f49d80750129d44,f078a591,altosui: Remove a bunch of debugging printfs,"altosui: Remove a bunch of debugging printfs

These aren't useful at this point.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342042133,1342042133,846a6298e4a8bfbe87bb24d7b0802c0bf6f233be
846a6298e4a8bfbe87bb24d7b0802c0bf6f233be,846a6298,Report RSSI values in monitor idle UI (trac #44),"Report RSSI values in monitor idle UI (trac #44)

This adds a new 's' command to TeleDongle to report RSSI value from last
received packet, and then has AltosUI request that value when closing
the remote link.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342040010,1342040010,cf44ea354c2d1780cee343132c6058e11e9eefa3
cf44ea354c2d1780cee343132c6058e11e9eefa3,cf44ea35,altos: Fix gcc compiler warnings in GPS code,"altos: Fix gcc compiler warnings in GPS code

unused variables and mis-matches in printf format codes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342039952,1342039952,fe70611c3c7d4b8cce3b5292f0ec549f3191bf86
fe70611c3c7d4b8cce3b5292f0ec549f3191bf86,fe70611c,altos: Create macros to convert from/to radio RSSI representation,"altos: Create macros to convert from/to radio RSSI representation

AO_RSSI_FROM_RADIO and AO_RADIO_FROM_RSSI.

Removes a bunch of open-coded versions of the same function.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342039856,1342039856,18431c88c8a6cb267922b97192e8b7ddb88d0e7e
18431c88c8a6cb267922b97192e8b7ddb88d0e7e,18431c88,"altos: Have 'make clean' remove all programs, even old ones","altos: Have 'make clean' remove all programs, even old ones

This makes sure that changing version numbers doesn't leave old
compiled output lying around.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342039766,1342039766,726f47c8a07f060aed930e1d102a1e8b5a5c7aed
726f47c8a07f060aed930e1d102a1e8b5a5c7aed,726f47c8,altos: remove optimization for 'help' that confuses cc1111 compiler,"altos: remove optimization for 'help' that confuses cc1111 compiler

The cc1111 compiler gets this very wrong and prints piles of garbage

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342039645,1342039645,7be98836e69a222b2f9f4baacddcf12d168e2207
7be98836e69a222b2f9f4baacddcf12d168e2207,7be98836,Add megametrum outline to doc dir,"Add megametrum outline to doc dir

And install it alongside telemetrum-outline

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342039254,1342039586,cc5d106f014f714a9a2d5f595a2de0da8f7da80a
cc5d106f014f714a9a2d5f595a2de0da8f7da80a,cc5d106f,altos: Ignore megametrum built files,"altos: Ignore megametrum built files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1342039207,1342039207,675ccd41e3b668cd4e1d2dd282dd317a00d00151
675ccd41e3b668cd4e1d2dd282dd317a00d00151,675ccd41,Get AltOS version numbers into Mac 'about' dialog,"Get AltOS version numbers into Mac 'about' dialog

Generate Info.plist from Info.plist.in to correctly set the VERSION
information. This also changes some strings around to make them look better

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341992121,1341992121,46407f7f3e4d2b6e74b3a2e90b38736a792cfc54
46407f7f3e4d2b6e74b3a2e90b38736a792cfc54,46407f7f,altos: Force 434.550Mhz by connecting  debug gnd and clk (trac #41),"altos: Force 434.550Mhz by connecting  debug gnd and clk (trac #41)

Check for pin P2_2 low at startup and set the frequency to
434.550MHz. This value won't get written to flash, so rebooting again
will restore the configured frequency.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341985319,1341985319,aa305da7e5dc182c99c09e422c053d85ed48d5d5
aa305da7e5dc182c99c09e422c053d85ed48d5d5,aa305da7,altos: Continuously update ground state while on pad (trac #42),"altos: Continuously update ground state while on pad (trac #42)

Average data for 5 seconds, wait 5 seconds and if still in pad mode,
replace the existing data with the new data. This should avoid
averaging in boost data while still keeping things reasonably current.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341983384,1341983384,0b92164143aaf0d2aa3d5d742484391c16545289
0b92164143aaf0d2aa3d5d742484391c16545289,0b921641,altos: Set HAS_FLIGHT_DEBUG=1 to include the flight debugging commands,"altos: Set HAS_FLIGHT_DEBUG=1 to include the flight debugging commands

This leaves USB enabled, and adds the 'F' command to dump
internal flight state.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341983308,1341983308,fb60d87b02c0fc83a0b4268212f0b6b740c984e3
fb60d87b02c0fc83a0b4268212f0b6b740c984e3,fb60d87b,altos: Signal continuity over radio in pad mode (trac #40),"altos: Signal continuity over radio in pad mode (trac #40)

This is especially useful for telemini which has no beeper, allowing
you to hear the continuity signal while at the pad over the air.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341977719,1341977719,bca72b782a2909ecedef15ad589292647221ca56
bca72b782a2909ecedef15ad589292647221ca56,bca72b78,altos: Add 'void' parameter to ao_fec_decode callback parameter,"altos: Add 'void' parameter to ao_fec_decode callback parameter

This keeps the compiler from whinging about the lack of a prototype.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341977642,1341977642,aafa8859ecb27383f697b98f6991643b44f4721a
aafa8859ecb27383f697b98f6991643b44f4721a,aafa8859,altos: Save some memory.,"altos: Save some memory.

A few minor space savings in ao_cmd.c and ao_config.c.  Don't build
unused conversion functions ao_altitude_to_pres and ao_temp_to_dC

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341977551,1341977551,a60c5a728530e4659a6750d8d5b87000735d4531
a60c5a728530e4659a6750d8d5b87000735d4531,a60c5a72,altos: Improve ao_flight_test a bit,"altos: Improve ao_flight_test a bit

Add -i flag to include flight description
Have run-tests know how many failures to expect
Add run_baro to plot a single flight using the baro-only mode

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341958500,1341958500,b89d37d357273b97050c00d7fe12022e32799fa8
b89d37d357273b97050c00d7fe12022e32799fa8,b89d37d3,altos: add some (unused) test code for different soft-decision sizes,"altos: add some (unused) test code for different soft-decision sizes

This lets us experiment with hard-decision and other possible
soft_decision bit depths.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341958435,1341958435,6694cedd560a7ea9520ef11472c2770b489187c0
6694cedd560a7ea9520ef11472c2770b489187c0,6694cedd,altos: Eliminate compiler warnings when building ao_flight_test,"altos: Eliminate compiler warnings when building ao_flight_test

We turn on a pile of warnings for that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341958398,1341958398,1ae3f467a1d7be2fc3b1a45ba12568a3a25a0099
1ae3f467a1d7be2fc3b1a45ba12568a3a25a0099,1ae3f467,altos: Rename *_mm.c back to *.c,"altos: Rename *_mm.c back to *.c

Was just a temporary hack to keep cc1111 products building during MM development.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341958296,1341958296,702ca87983594880d7926d2317d63802af82746e
702ca87983594880d7926d2317d63802af82746e,702ca879,altos: remove stale ao_flight.c and ao_sample.c,"altos: remove stale ao_flight.c and ao_sample.c

The mega-metrum versions are now the official versions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341958054,1341958054,31b05454ec8d90b89fa3039563ff0e86ae80b2a0
31b05454ec8d90b89fa3039563ff0e86ae80b2a0,31b05454,altos: Move profiling settings to Makefile,"altos: Move profiling settings to Makefile

Instead of splitting the changes across Makefile and ao_pins.h, put
them both in Makefile to simplify enabling profiling.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341374540,1341374540,939ad8bfd640ed55116703a58f87af06e75ef87e
939ad8bfd640ed55116703a58f87af06e75ef87e,939ad8bf,altos: Crank up the gaussian noise in the FEC test,"altos: Crank up the gaussian noise in the FEC test

This lets us check to make sure our receive performance isn't
degrading at all, instead of just making sure we can receive
perfect packets well.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341374461,1341374461,e8ab00cc45e48230e3b2018ce959114d3fedd228
e8ab00cc45e48230e3b2018ce959114d3fedd228,e8ab00cc,altos: Viterbi performance improvments. Down to 5.7ms for command decode,"altos: Viterbi performance improvments. Down to 5.7ms for command decode

Stealing more of Phil's good ideas, decoding a command mode packet has
been reduced from 9ms to 5.7ms. Lots more comments to help future-me
figure out how this code works.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341374375,1341374375,ea957f9e6144f8411ac84ee2905700f55f5a6e8a
ea957f9e6144f8411ac84ee2905700f55f5a6e8a,ea957f9e,altosui: Fix flight data download for TM. Look for MM flights when graphing,"altosui: Fix flight data download for TM. Look for MM flights when graphing

A couple of minor fixes, the first to not force the log format so that
TM/Tm data will be downloaded correctly and the second to expand the
set of files to include '.mega' files when plotting data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341300583,1341300583,933fc7e4c2f617e49e1cfdf45b83695290b51456
933fc7e4c2f617e49e1cfdf45b83695290b51456,933fc7e4,altos: Do not block igniters on the radio mutex.,"altos: Do not block igniters on the radio mutex.

Blocking igniters on the radio mutex fails when doing igniter testing
over the RF link; the packet receiver task will never release the
mutex and the CPU at the same time, causing the system to lock up.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1341297850,1341297943,50b343d389039eae082e82b8ac0b76ae3e2b3ad4
50b343d389039eae082e82b8ac0b76ae3e2b3ad4,50b343d3,"extend cross-compiler availability logic to all target CPUs, not just ARM","extend cross-compiler availability logic to all target CPUs, not just ARM
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1341206660,1341206660,f0ec8416f2e308e40e1b9f34a7c2549989fee5fb
f0ec8416f2e308e40e1b9f34a7c2549989fee5fb,f0ec8416,conditionalize build of ARM binaries on presence of arm-none-eabi-gcc in PATH,"conditionalize build of ARM binaries on presence of arm-none-eabi-gcc in PATH
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1341082833,1341082833,edbc5d27c8c2936b59ff5289276d9198b501ebc8
edbc5d27c8c2936b59ff5289276d9198b501ebc8,edbc5d27,altos: Declare cc1111 accel_ref as unsigned so the math works,"altos: Declare cc1111 accel_ref as unsigned so the math works

If accel_ref is signed, then the careful shifting and dividing dance
necessary to correct for changes in the relationship between the 5V
and 3.3V supplies always generates zero.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340930616,1340930616,ccf64117662fc800a07b3a25e52255b80f8b5eaf
ccf64117662fc800a07b3a25e52255b80f8b5eaf,ccf64117,Update version to 1.0.9.6,"Update version to 1.0.9.6

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340926979,1340926979,ca1bc20735a170a77066f5f37e0ad728899a3989
ca1bc20735a170a77066f5f37e0ad728899a3989,ca1bc207,altos: Disable MS5607 interrupt in the handler,"altos: Disable MS5607 interrupt in the handler

Avoids having the interrupt re-raised multiple times until the reading
task finally wakes up.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340924756,1340924756,572e1664938c7ce6c308b36779f6a412959e03f1
572e1664938c7ce6c308b36779f6a412959e03f1,572e1664,altos: Track missed HMC5883 interrupts,"altos: Track missed HMC5883 interrupts

When it fails to signal conversion complete to the CPU, keep track of
that and report it with the rest of the current data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340863887,1340863887,79dbe1a5e46d7f0b8929400897631ab969cd2bc0
79dbe1a5e46d7f0b8929400897631ab969cd2bc0,79dbe1a5,altos: Increase default STM stack to 648 bytes,"altos: Increase default STM stack to 648 bytes

512 seems cozy given the printf implementation we're using and the
extensive interrupts.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340863756,1340863756,aab7b31b71aa7c87c5a5003084e4b7773c30835f
aab7b31b71aa7c87c5a5003084e4b7773c30835f,aab7b31b,altos: panic if MPU6000 self test fails,"altos: panic if MPU6000 self test fails

Don't try to fly if the board isn't working right.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340863536,1340863536,f9f65211c378849270a6138fda05ed2a166f7d82
f9f65211c378849270a6138fda05ed2a166f7d82,f9f65211,altos: Disable mag sensor for megametrum,"altos: Disable mag sensor for megametrum

It doesn't work unless USB is connected or occasionally while the
debug port is enabled. It's mystic.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340863465,1340863465,dd623b21cb904238c6d903b6936ff2f8ebf6f339
dd623b21cb904238c6d903b6936ff2f8ebf6f339,dd623b21,altos: Allow megametrum to be built without using the mag sensor,"altos: Allow megametrum to be built without using the mag sensor

I'm having trouble getting it working reliably, so we'll like disable it
for now. This patch makes that possible.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340863413,1340863413,bd21c050fd8b96b33ab6859c942bf55cf2b91868
bd21c050fd8b96b33ab6859c942bf55cf2b91868,bd21c050,altos: Make profiling Viterbi decoder more useful,"altos: Make profiling Viterbi decoder more useful

This blocks starting the decoder until all of the data have arrived so
that the time spent in the decoder is easily computed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340851672,1340851672,407cefae9cb95c5910b3bd79851776c48729e06b
407cefae9cb95c5910b3bd79851776c48729e06b,407cefae,altos: Unroll viterbi state loop for >30% performance boost,"altos: Unroll viterbi state loop for >30% performance boost

9.3ms vs 14.7ms, a clear win.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340851522,1340851522,4f258fe565dc3e58b83761bfa1a2276946012163
4f258fe565dc3e58b83761bfa1a2276946012163,4f258fe5,altos: Clean up STM I2C clock computations,"altos: Clean up STM I2C clock computations

Fix both clock time and rise time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340842737,1340842737,84f9a525c64491afa9b7a565e3c10a4cee106e14
84f9a525c64491afa9b7a565e3c10a4cee106e14,84f9a525,altos: Clean up radio CRC handling,"altos: Clean up radio CRC handling

Make the FEC code just set the CRC_OK bit like the cc1111 radio does;
eliminates a bunch of weird conventions across the FEC API.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340842664,1340842664,b0b7f5da2d29716959c6793d744e47a3d435c247
b0b7f5da2d29716959c6793d744e47a3d435c247,b0b7f5da,altos: get MPU6000 I2C link working reliably,"altos: get MPU6000 I2C link working reliably

This slows the i2c bus to 100kHz (yuck), sets the rise time to spec
(it was way off) and adds more delays during bus setup. I've run this
for hours now without trouble. Will try to adjust things back to fast
mode and see if I can make that work as 100kHz isn't fast enough to
reliably get data at 100 samples/sec.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340833115,1340833115,e63d624f9670b5e2e002fcd5f24b80cf7f1effdf
e63d624f9670b5e2e002fcd5f24b80cf7f1effdf,e63d624f,altos: reorder stm USB state stores to avoid races,"altos: reorder stm USB state stores to avoid races

Must set ao_usb_in_pending before telling USB about new data or an
interrupt could arrive at the wrong time to clear it.

Same for ao_usb_in_flushed.

Without these changes, I've seen the USB bus lock up on occasion,
waiting for an IN packet to consume data, but with no IN data pending
in the hardware.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340832956,1340832956,08a4ed8fe794a2b2b52147bd5535fe0954822e95
08a4ed8fe794a2b2b52147bd5535fe0954822e95,08a4ed8f,altos: include targe SPI speed in get request,"altos: include targe SPI speed in get request

STM needs it to be provided when enabling the SPI device, so just fix
AVR and cc1111 to do the same.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340832893,1340832893,1a1d4a557a30e2e743936b828b654187ec562ca8
1a1d4a557a30e2e743936b828b654187ec562ca8,1a1d4a55,altos: Wait for i2c START condition before setting interrupt bits,"altos: Wait for i2c START condition before setting interrupt bits

This seems better than the random loop that it replaces, but I still
have no idea why this is required; it doesn't coorespond to the docs
at all...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340790387,1340790387,9695a217e13f9d194b6dc40e2696017e5f8e8176
9695a217e13f9d194b6dc40e2696017e5f8e8176,9695a217,altos: disable FEC debug on MM,"altos: disable FEC debug on MM

Seems to work; we'll leave the code around in case something bad
happens later.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340785352,1340785352,b96eece8e42df0713fc92d47b6bb27604c0168a2
b96eece8e42df0713fc92d47b6bb27604c0168a2,b96eece8,altos: Clean up cc1120 driver a bit,"altos: Clean up cc1120 driver a bit

Make some variables static, remove stale debug code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340785320,1340785320,a00aff5ee93ea9763b5c0466fcecc823cad135ef
a00aff5ee93ea9763b5c0466fcecc823cad135ef,a00aff5e,altos: Don't try to grab radio while firing MM igniters,"altos: Don't try to grab radio while firing MM igniters

If you're in idle mode, you stop forever as the packet mode receiver
will own the radio mutex forever.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340785243,1340785243,8fc643c9768f0db31a248331681af9490f5715af
8fc643c9768f0db31a248331681af9490f5715af,8fc643c9,altos: stm i2c debug code was calling flush() even when disabled,"altos: stm i2c debug code was calling flush() even when disabled

The fancy stm i2c debugging code had calls to flush() that were
invoked outside of the conditionals leading to all kinds of fun --
flush() may re-enable interrupts, yield or do all kinds of wacky
stuff, none of which is appropriate from the middle of a device driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340785145,1340785145,0285696e5280fc64774b6c3a2fcdaa36bd36ae7c
0285696e5280fc64774b6c3a2fcdaa36bd36ae7c,0285696e,altos: mpu6000 requires a delay during start,"altos: mpu6000 requires a delay during start

I have no idea why this is required, but the mpu6000 will not come up
and run if this isn't present.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340785071,1340785071,4847595e0383e5ff9c5a373f3c7f2af8c210c50a
4847595e0383e5ff9c5a373f3c7f2af8c210c50a,4847595e,altos: ao_ignite.c is no longer cc1111 specific,"altos: ao_ignite.c is no longer cc1111 specific

Move it to core

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340778300,1340778392,8efac8eb99a9aabb45d9fbf742e4be91e4b331a5
8efac8eb99a9aabb45d9fbf742e4be91e4b331a5,8efac8eb,altos: Add debugging code to check for stack overflow,"altos: Add debugging code to check for stack overflow

Stack overflow often happens from interrupt handlers sitting on top of
a task stack. Check for this during ao_wakeup as that is often called
during interrupt processing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340778064,1340778064,ebeac02a990da3fa6dd71487141d0bc6f78b42de
ebeac02a990da3fa6dd71487141d0bc6f78b42de,ebeac02a,altos: Enable full flight computer functionality in MegaMetrum,"altos: Enable full flight computer functionality in MegaMetrum

This turns on everything that currently works

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340778017,1340778017,fb2b83fcd28199d8c686e676d46d6ecfbf706f37
fb2b83fcd28199d8c686e676d46d6ecfbf706f37,fb2b83fc,altos: Create a 32-bit 1MHz timer for use in profiling execution,"altos: Create a 32-bit 1MHz timer for use in profiling execution

This provides a simple method for getting high-resolution timer data
to use in performance tuning code. It's not used by default anywhere.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340777924,1340777924,097b337eb9b7deff13d5dcdafddec9bec3868b93
097b337eb9b7deff13d5dcdafddec9bec3868b93,097b337e,altos: Abort radio receive when using flash memory on megametrum,"altos: Abort radio receive when using flash memory on megametrum

Radio receive camps on the SPI bus, making it impossible to access
flash memory. Abort any pending receive operation when trying to get
to the flash part.

Yes, this is a total hack.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340777820,1340777820,1ae69a1c2ce7e45db9d9c175bc63867eff68ebe5
1ae69a1c2ce7e45db9d9c175bc63867eff68ebe5,1ae69a1c,altos: Make gcc happy with ao_telemetry_set_interval,"altos: Make gcc happy with ao_telemetry_set_interval

Using unsigned locals made GCC sad as it was compared with a signed value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340777754,1340777754,c4036bf6e7997b618f89a05dd1214c16066ba2b2
c4036bf6e7997b618f89a05dd1214c16066ba2b2,c4036bf6,altos: Turn radio-related bits of ao_flight_mm.c,"altos: Turn radio-related bits of ao_flight_mm.c

Now that MM has full radio functionality, we can make it work right.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340777653,1340777653,b5f5fd92109ac6f4909a81303d52bc9220cc2520
b5f5fd92109ac6f4909a81303d52bc9220cc2520,b5f5fd92,altos: custom hex printer for telemetry packets,"altos: custom hex printer for telemetry packets

Using printf is way too slow with pdclib; just hand-write hex byte output.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340777594,1340777594,f1ae622eff60e05c1f5d8f822a3cf6a85750c6cc
f1ae622eff60e05c1f5d8f822a3cf6a85750c6cc,f1ae622e,altos: Optimize FEC encode and decode,"altos: Optimize FEC encode and decode

Integrate interleaving, CRC and padding within the decode/encode
functions.

Provide for ISR priorities so that the 1120 RX interrupt takes
precedence over the other interrupts or we risk losing bits.

Optimize the viterbi decoder a bit (goes from 10ms per packet to 7ms
per packet).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340777470,1340777470,936ecad62596f34773afb7460b10f63df7d0896d
936ecad62596f34773afb7460b10f63df7d0896d,936ecad6,altos: Add GPS logging code for MegaMetrum,"altos: Add GPS logging code for MegaMetrum

MM uses a different logging format with larger log blocks, so
restructure the GPS logging code to fill them up

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340777258,1340777258,33f8f7add27a02d24b0671da353b59762224c1ee
33f8f7add27a02d24b0671da353b59762224c1ee,33f8f7ad,altos: Make cc1111 radio control functions static,"altos: Make cc1111 radio control functions static

No need to publish these; they're all private to cc1111

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340777142,1340777142,03dc80d15a2f8fe9d7340351226dadd8bc3cfdb9
03dc80d15a2f8fe9d7340351226dadd8bc3cfdb9,03dc80d1,altos: Clean up usage of port parameters,"altos: Clean up usage of port parameters

Make stm port parameters always be pointers; this avoids the confusion
where some macros took '&port' and others took a bare 'port', and also
unifies code to run on other processors in a consistent fashion.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340776918,1340776918,f11f05c5d634de2a80c34d0d3dc93925980f52e6
f11f05c5d634de2a80c34d0d3dc93925980f52e6,f11f05c5,altosui: Make libaltos recognise new USB ids,"altosui: Make libaltos recognise new USB ids

libaltos has a small range of 'AltusMetrum' products to avoid opening
other devices. We've got more IDs, so open up the range.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340774450,1340774450,9dcb4e2ab60ecf0cc7371c1b1a620be952fa8776
9dcb4e2ab60ecf0cc7371c1b1a620be952fa8776,9dcb4e2a,altosui: AltosSerial and AltosLink both tried to provide frequency setting,"altosui: AltosSerial and AltosLink both tried to provide frequency setting

AltosLink owns all of the device configuration, so remove that from
AltosSerial and make sure that AltosLink provides the right function
signatures (wasn't using the new direct frequency setting command).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340774341,1340774341,eab18714ed9eabbcef0ff81b07427da042a58ccc
eab18714ed9eabbcef0ff81b07427da042a58ccc,eab18714,altos: rename ao_viterbi.c to ao_fec_rx.c,"altos: rename ao_viterbi.c to ao_fec_rx.c

Keep it parallel with ao_fec_tx.c

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340774204,1340774204,09761fe0f6ed40ff74317fbb47d6a74068fb4ce4
09761fe0f6ed40ff74317fbb47d6a74068fb4ce4,09761fe0,altos: Incremental viterbi decode,"altos: Incremental viterbi decode

Decode radio input one interleave block at a time. This overlaps the
decode computation with the packet reception, leading to lower latency
in an attempt to keep up with the transmitter.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340632296,1340632296,628076aa90e7bc9a894646e417dd8e1fe149b60d
628076aa90e7bc9a894646e417dd8e1fe149b60d,628076aa,altos: decode cc1120 received packets,"altos: decode cc1120 received packets

Call the fec decode function, compute RSSI and check CRC

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340631514,1340631514,70cf32e89df19bde5185339fc703532c8a5b8be6
70cf32e89df19bde5185339fc703532c8a5b8be6,70cf32e8,altos: Get cc1120 packet reception working,"altos: Get cc1120 packet reception working

Interrupt-per-bit, but it seems to work

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340625814,1340625814,246174b32bb6cf827d240c32d6a51c3513a08c37
246174b32bb6cf827d240c32d6a51c3513a08c37,246174b3,altos: Forgot ao_telemetry.h,"altos: Forgot ao_telemetry.h

Not much builds without this...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340625796,1340625796,b292c14790fc225029cba3f80ce8ad6c5652bc4e
b292c14790fc225029cba3f80ce8ad6c5652bc4e,b292c147,altos: improve FEC apis to reduce data copying,"altos: improve FEC apis to reduce data copying

Integrate interleaving and whitening into encode and decode steps.
Add CRC checking function for receive.

Make ao_fec_test program round-trip the data and verify correctness.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340492742,1340492742,74f6a1a8c8fa9d5bb8d74c99782310b431dd4727
74f6a1a8c8fa9d5bb8d74c99782310b431dd4727,74f6a1a8,altos: Add ao_viterbi.c to megametrum build,"altos: Add ao_viterbi.c to megametrum build

It's not used yet, just wanted to see how big the resulting object
file was (492 bytes).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340443470,1340443470,566a0c277de01963922cabc80db8ec3a129923bd
566a0c277de01963922cabc80db8ec3a129923bd,566a0c27,altos: fix comment about decoding last byte of FEC data,"altos: fix comment about decoding last byte of FEC data

There aren't *any* forward bits to use when decoding the last byte.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340443388,1340443388,83549f8bde42c3fddbdc817540c869dc8aefd013
83549f8bde42c3fddbdc817540c869dc8aefd013,83549f8b,altos: Make ao_fec_tx_test build cleanly with -Wall,"altos: Make ao_fec_tx_test build cleanly with -Wall

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340442832,1340442832,f7bf07dfdad260c1f219064957ef08fb480bf20f
f7bf07dfdad260c1f219064957ef08fb480bf20f,f7bf07df,altos: optimize Viterbi implementation,"altos: optimize Viterbi implementation

Minimize data usage, make data arrays static

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340442778,1340442778,ff8de3af193839de4bacfd07ade7a5f9ac0bf5b3
ff8de3af193839de4bacfd07ade7a5f9ac0bf5b3,ff8de3af,altos: incremental viterbi decode,"altos: incremental viterbi decode

Decode bits incrementally. Don't bother decoding the last byte; it's
always a pad byte.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340438082,1340438082,047e95421c87c5d056038797b48f759bedabf245
047e95421c87c5d056038797b48f759bedabf245,047e9542,altos: Start optimizing viterbi decoder,"altos: Start optimizing viterbi decoder

Only need two cost arrays (previous and next). Create constant
full-width decoder table instead of expanding bits into bytes for each
decode step.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340433071,1340433071,cbf79a0f9cb859d04e8e03d627219cb2bf49611f
cbf79a0f9cb859d04e8e03d627219cb2bf49611f,cbf79a0f,altos: Add the simplest possible viterbi decoder,"altos: Add the simplest possible viterbi decoder

I think I understand how it works now. It's not exactly speedy, and it
uses a lot of memory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340431922,1340431922,75e4521ec42a368cebc67a07f8713d7a854ea265
75e4521ec42a368cebc67a07f8713d7a854ea265,75e4521e,altos: Move FEC code to core,"altos: Move FEC code to core

It's not a driver as it's not specific to the 1120 chip

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340297557,1340297557,0b5548d6ced67201311e1072d37fbedd3d9929c9
0b5548d6ced67201311e1072d37fbedd3d9929c9,0b5548d6,ao-tools: Support MM telemetry packets in ao-telem,"ao-tools: Support MM telemetry packets in ao-telem

Parse the new packet formats

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340297477,1340297477,6f421818fd7062f03bfaf9e606d6a4cfdcb13b49
6f421818fd7062f03bfaf9e606d6a4cfdcb13b49,6f421818,altosui: Support MM telemetry packets,"altosui: Support MM telemetry packets

Required restructuring the whole telemetry system to provide abstract
interfaces to flight data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340297418,1340297418,ff5b0ba90e73a83360a2e8a7e9969ed2c3ce1514
ff5b0ba90e73a83360a2e8a7e9969ed2c3ce1514,ff5b0ba9,altos: Crank down STM SPI speed for MM,"altos: Crank down STM SPI speed for MM

The cc1120 is noisy enough to break SPI data transfers at 4MHz, so
crank things down to 1MHz. It's ""stable"" now, but clearly needs a
filter and shorter traces.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340297210,1340297210,d2bd95edb6f77daeb1e8f043c4a239c248728e0c
d2bd95edb6f77daeb1e8f043c4a239c248728e0c,d2bd95ed,altos: Add full MM telemetry,"altos: Add full MM telemetry

Create two new telemetry packets to hold all of the MM data.

This patch also splits the telemetry structures out of ao.h

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340297142,1340297142,419a801131c1034f1fa149a67850290431cbda72
419a801131c1034f1fa149a67850290431cbda72,419a8011,altos: Configure STM LCD driver for giant LCD digits,"altos: Configure STM LCD driver for giant LCD digits

These devices require static mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1340296750,1340296750,611f37607fadcdc9908d67456f844a452ad4a87a
611f37607fadcdc9908d67456f844a452ad4a87a,611f3760,altos: Make sure ao_storage_config is set before reading config block,"altos: Make sure ao_storage_config is set before reading config block

ao_storage_read does in fact call ao_storage_setup, but we need the
value of ao_storage_config *before* calling ao_storage_read, so call
ao_storage_setup first.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339985495,1339985495,ae3662c56effda9f0516c7d6ffd2d5f56b859593
ae3662c56effda9f0516c7d6ffd2d5f56b859593,ae3662c5,altos: hack STM serial number to 58,"altos: hack STM serial number to 58

otherwise altosui won't record telemetry

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339985168,1339985168,976a8375932ddb46ca3100863b0a892732c0923e
976a8375932ddb46ca3100863b0a892732c0923e,976a8375,altos: make cc1120 ao_radio_send re-entrant,"altos: make cc1120 ao_radio_send re-entrant

It gets called from multiple tasks, so put local data on the stack.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339985093,1339985093,629f43e7c7abbff33e14b168a08a4b6a9c88b937
629f43e7c7abbff33e14b168a08a4b6a9c88b937,629f43e7,altos: Add telemetry to megametrum,"altos: Add telemetry to megametrum

Now that the radio works

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339985062,1339985062,9b24f413da0b6d989b32e8654a91c8deee4c81dd
9b24f413da0b6d989b32e8654a91c8deee4c81dd,9b24f413,ao-tools: add rudimentary support for MM telemetry to ao-telem,"ao-tools: add rudimentary support for MM telemetry to ao-telem

Just pretends they're TM packets for now

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339984970,1339984970,4cb46b8a84a0dd5b8fcb479d7aa5157480e1bc67
4cb46b8a84a0dd5b8fcb479d7aa5157480e1bc67,4cb46b8a,altosui: Add rudimentary MM support to altosui,"altosui: Add rudimentary MM support to altosui

Decoded the MM sensor packets as if they were TM packets.
Add the USB ids.
Add class of 'altimeter' devices and match those instead of just
telemetrum as appropriate.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339984884,1339984884,55747ce210d7d80d5b4fdaaf9dc7ee0f7bc8b0a3
55747ce210d7d80d5b4fdaaf9dc7ee0f7bc8b0a3,55747ce2,altosui: Move product definitions from AltosUI to AltosLib,"altosui: Move product definitions from AltosUI to AltosLib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339984736,1339984736,e6d236fdc615625fbbf28377453f920729e49b0f
e6d236fdc615625fbbf28377453f920729e49b0f,e6d236fd,altos: Software implemenation of CC1111 radio encoding,"altos: Software implemenation of CC1111 radio encoding

Add CRC, whitening, FEC and interleaving routines for transmission
path to allow cc1120 to send telem packets to cc1111.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339975020,1339975020,1a294852b3607947f0f86bf236785456d8719e5f
1a294852b3607947f0f86bf236785456d8719e5f,1a294852,altos: Be more careful about register save/restore in ao_yield,"altos: Be more careful about register save/restore in ao_yield

Make sure the general registers are all saved before messing with any
of them. Then, explicitly use r0 to save/restore apsr and primask.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339974873,1339974873,9d3fe2a80d0925e3eded6d738d05c5b4ea61504c
9d3fe2a80d0925e3eded6d738d05c5b4ea61504c,9d3fe2a8,altos: Don't lose IRQ disabled state in ao_sleep,"altos: Don't lose IRQ disabled state in ao_sleep

Using ao_arch_critical around the wchan setting will force interrupts
to be re-enabled before ao_yield records the state of that bit,
potentially causing problems with functions not atomically testing and
sleeping.

Tasks that need to set wchan with interrupts disabled should have
interrupts disabled when entering ao_sleep already.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339974738,1339974738,4e6d96816e6604ee8d9bb49345a1c1211699a655
4e6d96816e6604ee8d9bb49345a1c1211699a655,4e6d9681,altos: ao_storage_read already calls ao_storage_setup,"altos: ao_storage_read already calls ao_storage_setup

No need to call twice.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339974683,1339974683,ca310342d7b0bd1b78318cae38d920b8690dfd36
ca310342d7b0bd1b78318cae38d920b8690dfd36,ca310342,altosui: Catch timeout errors when setting up TD telem monitoring,"altosui: Catch timeout errors when setting up TD telem monitoring

Close the port in this case so it can be used for other things.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339974583,1339974583,58e005375ca29dec6091d87159055004e7f19605
58e005375ca29dec6091d87159055004e7f19605,58e00537,altos: Use interrupts to wake up after RDF transmission.,"altos: Use interrupts to wake up after RDF transmission.

Also clean up the debug output

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339962223,1339962223,5df94f74522357e062f4ec2786ff825381b2fb10
5df94f74522357e062f4ec2786ff825381b2fb10,5df94f74,altos: Crank cc1120 power down to 0dBm to avoid crashing CPU,"altos: Crank cc1120 power down to 0dBm to avoid crashing CPU

Looks like RFI from the transmitter is confusing the CPU; lower the
1120 power output from +14dBm to +0dBm to keep the CPU happy.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339962152,1339962152,e856df474c386b8df3d2bd9e87b766ae0439efbf
e856df474c386b8df3d2bd9e87b766ae0439efbf,e856df47,altos: Reduce STM SPI data rate to 4MHz,"altos: Reduce STM SPI data rate to 4MHz

cc1120 doesn't want more than 6.1MHz, otherwise it gets very angry.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339825277,1339825277,e09e35471e788b88909ff01037fb8e0e4eabcd7d
e09e35471e788b88909ff01037fb8e0e4eabcd7d,e09e3547,altos: Start making cc1120 radio work,"altos: Start making cc1120 radio work

RDF tones and radio calibration work now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339825230,1339825230,c2949ea15c59215834fedac7646f50c8a09f716f
c2949ea15c59215834fedac7646f50c8a09f716f,c2949ea1,altos: Fix cc1120 packet mode datarate and config,"altos: Fix cc1120 packet mode datarate and config

Was using the wrong function

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339825117,1339825117,1b7e4c29bf9608bfc972ae28b53cc823f4c37f92
1b7e4c29bf9608bfc972ae28b53cc823f4c37f92,1b7e4c29,altos: Make sure cc1120 is initialized correctly at startup time,"altos: Make sure cc1120 is initialized correctly at startup time

Check to make sure it pulls down MISO when CS is enabled.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339824730,1339824730,27c95adf35e646840b9bd562497eea0dc96bb9bb
27c95adf35e646840b9bd562497eea0dc96bb9bb,27c95adf,altos: use 'b' command for radio beep,"altos: use 'b' command for radio beep

'B' is used by the baro data dumper.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339824696,1339824696,93e6d0a2c0b60e7bedd34f06ba63b468dcc8e013
93e6d0a2c0b60e7bedd34f06ba63b468dcc8e013,93e6d0a2,altos: Fix RDF mode data rate and PKT_CFG0 value,"altos: Fix RDF mode data rate and PKT_CFG0 value

Changes tone to the desired 1kHz frequency and ensures the PKT_CFG0
has the right value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339824603,1339824603,c96e60bedeb00d28c36436c12b803fd8cbadce26
c96e60bedeb00d28c36436c12b803fd8cbadce26,c96e60be,altos: Actually write cc1120 register values,"altos: Actually write cc1120 register values

Helps to not use 'read' mode when writing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339824535,1339824535,97d163c88ed8c8f64a9714018863d0b6eedab38f
97d163c88ed8c8f64a9714018863d0b6eedab38f,97d163c8,altos: Configure cc1120 frequency,"altos: Configure cc1120 frequency

Set default conversion value, and pull the selected frequency
calibration data out of the config block.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339824468,1339824468,a5a7df405c242593cbc828d5b66bbfc141a35947
a5a7df405c242593cbc828d5b66bbfc141a35947,a5a7df40,Temporarily disable packet and telem on MM,"Temporarily disable packet and telem on MM

While work on the radio code progresses

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339824366,1339824366,baf1be1def01266512e67068948bf19b04ead6aa
baf1be1def01266512e67068948bf19b04ead6aa,baf1be1d,Allow product to override maximum number of command lists (NUM_CMDS),"Allow product to override maximum number of command lists (NUM_CMDS)

Just in case some product wants to save memory, or have more.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1339824190,1339824190,bfbd1d82f4c25120a97840a1bd4787680823afd8
bfbd1d82f4c25120a97840a1bd4787680823afd8,bfbd1d82,altosdroid: Add files necessary to build application,"altosdroid: Add files necessary to build application

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338934525,1338934525,b8c363d9411fd5e79e3f806894dbc12bcc106b88
b8c363d9411fd5e79e3f806894dbc12bcc106b88,b8c363d9,altosui: More changes to migrate code to altoslib,"altosui: More changes to migrate code to altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338868585,1338868585,5634192a6036c6c7b47d224e2988e81bb71a4557
5634192a6036c6c7b47d224e2988e81bb71a4557,5634192a,altosui: attempt to get ms5607 data into .mega files was misinformed,"altosui: attempt to get ms5607 data into .mega files was misinformed

The ms5607 'p' command also means 'go into packet mode', which nicely
broke attempts to communicate with teledongle

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338868533,1338868533,705891be53e298ac6ced4ba02b87d2f6d1085b34
705891be53e298ac6ced4ba02b87d2f6d1085b34,705891be,altos: Make cc1111 products all depend on ao_arch.h and ao_arch_func.h,"altos: Make cc1111 products all depend on ao_arch.h and ao_arch_func.h

Ensures that files get recompiled as needed

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338868476,1338868476,a9ad342ae4c34626df4f2891da4c7f6d2c14d73e
a9ad342ae4c34626df4f2891da4c7f6d2c14d73e,a9ad342a,altos: Other half of the ms5607 prom reporting patch,"altos: Other half of the ms5607 prom reporting patch

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338868433,1338868433,dec5cbee22f13c47690b0c6bf7ca724ef132fe5e
dec5cbee22f13c47690b0c6bf7ca724ef132fe5e,dec5cbee,altos: typo in ao_monitor prevented ground station from including code,"altos: typo in ao_monitor prevented ground station from including code

This created ground station software that couldn't actually receive
and report telemetry packets.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338868386,1338868386,e687a9bafc696998b47fd0300fbc89dece09509c
e687a9bafc696998b47fd0300fbc89dece09509c,e687a9ba,altos: Make 'v' command dump pressure sensor ROM values,"altos: Make 'v' command dump pressure sensor ROM values

Avoids needing a new command

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338868358,1338868358,1832e2f76c844e97a2bd11226b003fb2af8057db
1832e2f76c844e97a2bd11226b003fb2af8057db,1832e2f7,altos: fix test builds of non-accel flight code,"altos: fix test builds of non-accel flight code

Remove references to accel variables when building baro-only flight
test code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338868295,1338868295,06afa2c3e78ea5bc9f1eb4913ee35c0eab0ac1bf
06afa2c3e78ea5bc9f1eb4913ee35c0eab0ac1bf,06afa2c3,altos: Legacy telemetry needs original ADC record,"altos: Legacy telemetry needs original ADC record

The legacy telemetry packets included the raw ADC structure directly,
so make sure that doesn't change further, allowing teledongle firmware
to remain compatible with old TM firmware.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338868210,1338868210,f1b14932149153a096961fff94191778f88581d9
f1b14932149153a096961fff94191778f88581d9,f1b14932,altos: Remove unused AES code from teledongle and tidongle,"altos: Remove unused AES code from teledongle and tidongle

Leave this out as neither of these products need it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338868155,1338868155,718a8affe1df98eacfd707b5c8c34f9456dcff14
718a8affe1df98eacfd707b5c8c34f9456dcff14,718a8aff,altos: Remove accel_ref from pre v1.1 TM firmware,"altos: Remove accel_ref from pre v1.1 TM firmware

V1.0 needs RAM space for flash buffer, leaving too little room for
this extra data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338868034,1338868034,7a19d6790a9800f925c8de24aac71796351e2c04
7a19d6790a9800f925c8de24aac71796351e2c04,7a19d679,altos: More cleanups for moving files to altoslib,"altos: More cleanups for moving files to altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338863338,1338863338,f86dac643081987c8994ab57a96640d5e91b342a
f86dac643081987c8994ab57a96640d5e91b342a,f86dac64,altoslib: Clean up random rebase failures,"altoslib: Clean up random rebase failures

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338692380,1338692380,dd43a2ae7594f062a8980d1756a07488ee54b447
dd43a2ae7594f062a8980d1756a07488ee54b447,dd43a2ae,altoslib: Move new sensor library code into altoslib,"altoslib: Move new sensor library code into altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338691367,1338691367,0772020c969a69c3b0a705de7362340a9732daab
0772020c969a69c3b0a705de7362340a9732daab,0772020c,Build altosdroid,"Build altosdroid
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1331954865,1338691195,e81163ed875dc93a618baf9278f43ed7dd0f730e
e81163ed875dc93a618baf9278f43ed7dd0f730e,e81163ed,Add local.properties to .gitignore,"Add local.properties to .gitignore

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Keith Packard,keithp@keithp.com,1329968584,1338691195,392c878000e9909d37dae6342df3d6cb8f217a1b
392c878000e9909d37dae6342df3d6cb8f217a1b,392c8780,Add TelemetryService.java and associated files,"Add TelemetryService.java and associated files

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Keith Packard,keithp@keithp.com,1329968486,1338691195,69e6df07976a56b49e07c242cd6e5b2cbd2a578d
69e6df07976a56b49e07c242cd6e5b2cbd2a578d,69e6df07,Move altoslib sources to top dir,"Move altoslib sources to top dir

No sense having them live deep in the file system.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1329969648,1338691195,9b659904109f992b8a3e61efb94e81cdb19af1c9
9b659904109f992b8a3e61efb94e81cdb19af1c9,9b659904,Demonstrate using AltosLib from altosdroid,"Demonstrate using AltosLib from altosdroid

Get things hooked up so that we can use AltosLib functions from the
android application; it's a bit of a hack at present, but appears to
work. Some more 'official' technique would be nice...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1329968244,1338691195,a018724e40f2a4c0bae8b3d5c77bb90328ad4314
a018724e40f2a4c0bae8b3d5c77bb90328ad4314,a018724e,Ignore generated altoslib files,"Ignore generated altoslib files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1329948923,1338691192,025eb09b5de9b50de143da9f36bc02818e018ba9
025eb09b5de9b50de143da9f36bc02818e018ba9,025eb09b,Build Android local.properties from local.properties.in,"Build Android local.properties from local.properties.in

Make sure the SDK path is set correctly

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1329907141,1338691171,3a80545d4ecedc4b98a9ee8296ab6abbbf64312d
3a80545d4ecedc4b98a9ee8296ab6abbbf64312d,3a80545d,Add $HOME/android as an SDK location,"Add $HOME/android as an SDK location

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Keith Packard,keithp@keithp.com,1329907225,1338691118,091affece185dcd0832a55b0befeacaa182a57bb
091affece185dcd0832a55b0befeacaa182a57bb,091affec,doc: Add companion SPI message protocol doc,"doc: Add companion SPI message protocol doc

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1326480030,1338691109,bb5b5312a0c6102b12f3d4710ef213f0f6c67412
bb5b5312a0c6102b12f3d4710ef213f0f6c67412,bb5b5312,altosui: Clean up a few 'fat' build rules,"altosui: Clean up a few 'fat' build rules

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325998609,1338691082,fc86ae58c3a296730fa99010cc27b8b3c2c3b780
fc86ae58c3a296730fa99010cc27b8b3c2c3b780,fc86ae58,Add altosdroid/Makefile.am,"Add altosdroid/Makefile.am
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325809841,1338691082,dfa059b22bf15de3f25328aeef4fdb8e5ca664dc
dfa059b22bf15de3f25328aeef4fdb8e5ca664dc,dfa059b2,"Add AltusMetrum Logo as app icon, and change app name","Add AltusMetrum Logo as app icon, and change app name

Signed-off-by: Mike Beattie <mike@ethernal.org>
Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Mike Beattie,mike@ethernal.org,Keith Packard,keithp@keithp.com,1325739704,1338691082,402f1e76909229fc0c3b54743ba577b657495faf
402f1e76909229fc0c3b54743ba577b657495faf,402f1e76,altosdroid: build android bits when possible,"altosdroid: build android bits when possible

Locate android sdk automatically

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325739280,1338691082,a48e4d40729e736929632ec422fd189ecdfba33b
a48e4d40729e736929632ec422fd189ecdfba33b,a48e4d40,altosdroid: import code from mjb,"altosdroid: import code from mjb

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325737986,1338691050,81465a20049da40cd8d3cda920d6585ffe87bfe3
81465a20049da40cd8d3cda920d6585ffe87bfe3,81465a20,altosui: Move java altoslib to top level,"altosui: Move java altoslib to top level

This will be shared with other (android) java code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325737722,1338691049,d6df16525927d8096d1c0cccf4c86bf4c6599d53
d6df16525927d8096d1c0cccf4c86bf4c6599d53,d6df1652,Add altoslib/.gitignore,"Add altoslib/.gitignore
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325573028,1338691049,02b53b7f592b78b2fec4f4a17b6b3e114d2bf3c5
02b53b7f592b78b2fec4f4a17b6b3e114d2bf3c5,02b53b7f,altosui: Fix AltosTelemetryReader move,"altosui: Fix AltosTelemetryReader move

Lost the provided link value causing a crash.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325572938,1338691049,9fb15d397890c7e78bf3c1438f142f62bfc2bd35
9fb15d397890c7e78bf3c1438f142f62bfc2bd35,9fb15d39,altosui: Remove unused files,"altosui: Remove unused files

Left around from development, these aren't useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325572908,1338691049,5270a0f1416baef5fde08547c6c98d97f973ae95
5270a0f1416baef5fde08547c6c98d97f973ae95,5270a0f1,altosui: Move telemetry reader &c to altoslib,"altosui: Move telemetry reader &c to altoslib

Move all of the device and file reading code into altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325572541,1338691046,93305717ac4c993c88d9144d797ca64d26db97c5
93305717ac4c993c88d9144d797ca64d26db97c5,93305717,altosui: Move AltosState.java to altoslib,"altosui: Move AltosState.java to altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325571218,1338690891,a5ac5c37ea385e3a2b2703c6f125b4e3b55e867a
a5ac5c37ea385e3a2b2703c6f125b4e3b55e867a,a5ac5c37,altosui: Pull most of AltosSerial into AltosLink,"altosui: Pull most of AltosSerial into AltosLink

Share basic command processing across java users

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325570747,1338690815,18914b9a84bbd8c4364a1568bb07dcc2b04ad7ba
18914b9a84bbd8c4364a1568bb07dcc2b04ad7ba,18914b9a,altosui: Move AltosGreatCircle.java to altoslib,"altosui: Move AltosGreatCircle.java to altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325567565,1338690670,027863b737190bccc3b5cd032d77587396d0c5c4
027863b737190bccc3b5cd032d77587396d0c5c4,027863b7,altosui: Move AltosEepromTeleScience.java to altoslib,"altosui: Move AltosEepromTeleScience.java to altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325567314,1338690669,346df410f570a67cda057550a067fa2b451b785d
346df410f570a67cda057550a067fa2b451b785d,346df410,altosui: Move more eeprom stuff to altoslib,"altosui: Move more eeprom stuff to altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325567102,1338690622,a4ccdd253a9873c16f194a63a79f0c26feaafa29
a4ccdd253a9873c16f194a63a79f0c26feaafa29,a4ccdd25,altosui: Move eeprom managment code to library,"altosui: Move eeprom managment code to library

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325566677,1338690474,89aa06cfdcb02de1894ccb01aed97782f9eec9b2
89aa06cfdcb02de1894ccb01aed97782f9eec9b2,89aa06cf,altosui: Move AltosEepromChunk.java to lib,"altosui: Move AltosEepromChunk.java to lib

Also fixes install issues with split lib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325566036,1338690474,b273b8b298540b1a6d0a87b1cf61df1fbf62e013
b273b8b298540b1a6d0a87b1cf61df1fbf62e013,b273b8b2,altosui: Finish moving AltosConfigData to altoslib,"altosui: Finish moving AltosConfigData to altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325565556,1338690474,4c88b0ca96758b663c82395e63b338043d1c1a10
4c88b0ca96758b663c82395e63b338043d1c1a10,4c88b0ca,altosui: Move AltosConfigData.java to library,"altosui: Move AltosConfigData.java to library

Create a new 'AltosLink' which exposes how to talk to the remote
device abstractly via 'get_reply' and 'printf' methods.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325565278,1338690472,ead8f1cfca2c454d18dce56479899f2b423d8bdd
ead8f1cfca2c454d18dce56479899f2b423d8bdd,ead8f1cf,altosui: Add back in the split-out Altos constants as AltosLib,"altosui: Add back in the split-out Altos constants as AltosLib

These were pulled out of Altos.java, but not added back to git

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325565155,1338690392,3c2f601139d36761de6a8a2210545d082ef16133
3c2f601139d36761de6a8a2210545d082ef16133,3c2f6011,altosui: Complete split out of separate java library,"altosui: Complete split out of separate java library

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325554019,1338690389,40ee170753f4fd422c848e34a8da104683b7c8a2
40ee170753f4fd422c848e34a8da104683b7c8a2,40ee1707,altosui: Clean swing/awt bits out of altoslib,"altosui: Clean swing/awt bits out of altoslib

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325549811,1338690063,71636c1ed7cbe075921391605d1ac4edaa6ee52b
71636c1ed7cbe075921391605d1ac4edaa6ee52b,71636c1e,move a file back,"move a file back
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325549626,1338690053,6510e8495fc5e8057b6092963def4d78978625a0
6510e8495fc5e8057b6092963def4d78978625a0,6510e849,altosui: Split out lots of the altosui code to a shared library,"altosui: Split out lots of the altosui code to a shared library

To be shared with the Android application eventually

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325549369,1338689779,97663f922e236f4ee7bd08277ca80d419b5cd10f
97663f922e236f4ee7bd08277ca80d419b5cd10f,97663f92,altosui: Split out UI-specific preferences,"altosui: Split out UI-specific preferences

Prepare to create library shared with android application.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325547914,1338689349,c9e52287751867d9e451146ccde78109609d30d7
c9e52287751867d9e451146ccde78109609d30d7,c9e52287,altosui: Fixed width format for new IMU values.,"altosui: Fixed width format for new IMU values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338689168,1338689168,9aa7993ee31bdfd6890ad7262a0375c07464ee76
9aa7993ee31bdfd6890ad7262a0375c07464ee76,9aa7993e,altos: Intgrate hmc5883 sensor into adc ring,"altos: Intgrate hmc5883 sensor into adc ring

Creates a task to poll the mag sensor and place the data into the
sensor data ring.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338682140,1338682347,69a8907ecbb7ca0e8526aeea0dc7490a191a0f8b
69a8907ecbb7ca0e8526aeea0dc7490a191a0f8b,69a8907e,altos: Get HMC5883 driver limping along,"altos: Get HMC5883 driver limping along

Not pushing data into the ring yet, but the chip appears to work now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338681442,1338681442,97317d332f21c42860747c4ecde633bd0228ef52
97317d332f21c42860747c4ecde633bd0228ef52,97317d33,altos: Reset i2c controller at boot time,"altos: Reset i2c controller at boot time

In case it's wedged.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338681401,1338681401,64e2e66a5239541b15f43172655cfb3560bec79b
64e2e66a5239541b15f43172655cfb3560bec79b,64e2e66a,altos: Fix broken EXTI edge mode selections. Clear pending exti on enable,"altos: Fix broken EXTI edge mode selections. Clear pending exti on enable

Make sure the edge mode registers are set according to the requested
mode.

Clear any pending interrupt when enabling to avoid spurious isr call

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338681282,1338681282,8d425ffba84ec6f632e8c0d44105de73242a86a9
8d425ffba84ec6f632e8c0d44105de73242a86a9,8d425ffb,altos: Route correct GPIO line to interrupt controller,"altos: Route correct GPIO line to interrupt controller

Which GPIO a particular pin interrupt comes from is selected by the
SYSCFG EXTICR registers; set these when an exti interrupt is configured.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338681226,1338681226,1353b277f8314fbddef81c743bd6ea229364fd18
1353b277f8314fbddef81c743bd6ea229364fd18,1353b277,altos: Enable some debugging during flight mode on MM,"altos: Enable some debugging during flight mode on MM

Until we've got the radio working, there's no way to see inside the MM
state without using USB. Add a diagnostic command to dump out the
internal flight state variables.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338674280,1338674280,c04af7533bd3fd3f3260338c0753fde966131720
c04af7533bd3fd3f3260338c0753fde966131720,c04af753,altos: Add support for MegaAccel daughter card.,"altos: Add support for MegaAccel daughter card.

Switches all acceleration computation to using the MegaAccel
accelerometer to ensure support for high-g flights.

MPU6000 values continue to be logged as normal

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338617258,1338617258,1824761f5b98e92485e2dd347b1c4d043ec207e2
1824761f5b98e92485e2dd347b1c4d043ec207e2,1824761f,altosui: Quick hacks to download megametrum data and convert to CSV,"altosui: Quick hacks to download megametrum data and convert to CSV

Very little useful data crunching is done, but at least we can save
and convert files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338605485,1338605485,ab85337aa942cb73a08bd3b783771179773b9a67
ab85337aa942cb73a08bd3b783771179773b9a67,ab85337a,altos: Timers clock base depends on perhipheral bus prescalers too,"altos: Timers clock base depends on perhipheral bus prescalers too

For some weird reason, a non-unity perhipheral bus clock scaler
affects the base of the various timers; this left the 100Hz tick
running at 200Hz.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338604533,1338604533,ff4f3a56e09d595abbe32293cbdf1fe368633c49
ff4f3a56e09d595abbe32293cbdf1fe368633c49,ff4f3a56,altos: megametrum has logging,"altos: megametrum has logging

This makes sure the various other subsystems know about it, like the
'v' command.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338604501,1338604501,6806103bad98385c0ec122d400f981eb81c59dd3
6806103bad98385c0ec122d400f981eb81c59dd3,6806103b,altos: add high-z accel and mag sensor to megametrum logging,"altos: add high-z accel and mag sensor to megametrum logging

These nicely fill the 32-byte sensor log record

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338604457,1338604457,e5aebfe0203de9e69712fac291c8cd0d3a96a385
e5aebfe0203de9e69712fac291c8cd0d3a96a385,e5aebfe0,altos: Mark full and mega logging correctly in 'v' command,"altos: Mark full and mega logging correctly in 'v' command

Make sure megametrum reports 'log format 5'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338604398,1338604398,7fce3ddf5e7e92a14cefb7fcf35e4014df744987
7fce3ddf5e7e92a14cefb7fcf35e4014df744987,7fce3ddf,Bump to 1.0.9.5,"Bump to 1.0.9.5

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338227284,1338227284,47bc9b2a39b7a8d3ef3fe8acc7fbf0512695e548
47bc9b2a39b7a8d3ef3fe8acc7fbf0512695e548,47bc9b2a,altos: Clear stm i2c transfer timeout alarm,"altos: Clear stm i2c transfer timeout alarm

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338227248,1338227248,8164cd95db62e4564b3a9ba5c06a74c870c03841
8164cd95db62e4564b3a9ba5c06a74c870c03841,8164cd95,altos: Remove debug printf from accel auto-cal,"altos: Remove debug printf from accel auto-cal

Otherwise, this goes way too slow

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338227211,1338227211,ee61fb8ccb47f94b7c39e803f5a0248840d1eea6
ee61fb8ccb47f94b7c39e803f5a0248840d1eea6,ee61fb8c,altos: Clean up ADC selection for cc1111,"altos: Clean up ADC selection for cc1111

Depend directly on product defines instead of trying to guess

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338227153,1338227153,2df9113a22f4f67707d9ee777bd6b23ff671b105
2df9113a22f4f67707d9ee777bd6b23ff671b105,2df9113a,altos: All cc1111 products have a radio,"altos: All cc1111 products have a radio

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338227130,1338227130,a53b8b84283eb62157b0f8ecd8061f61a4b6bd6f
a53b8b84283eb62157b0f8ecd8061f61a4b6bd6f,a53b8b84,altos: Shrink telemetry generation code,"altos: Shrink telemetry generation code

otherwise TM doesn't build anymore

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338227085,1338227085,43e558738c76afd72fc01660884be3158f44470d
43e558738c76afd72fc01660884be3158f44470d,43e55873,altos: Try to get hmc5883 working,"altos: Try to get hmc5883 working

No joy yet

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338227047,1338227047,9f5e4cf7d8204016e023cf439d93de1203dc406e
9f5e4cf7d8204016e023cf439d93de1203dc406e,9f5e4cf7,altos: Make teleterra v0.2 compile with new ao_data struct,"altos: Make teleterra v0.2 compile with new ao_data struct

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338164619,1338164619,5dd5e0284c8b26b0d4ce69c64bb7864e0ae83db7
5dd5e0284c8b26b0d4ce69c64bb7864e0ae83db7,5dd5e028,altos: Make telepyro-v0.1 build with new ao_data struct,"altos: Make telepyro-v0.1 build with new ao_data struct

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338162309,1338162309,29edf6d901432a1afc65900ff599c963edac5a2b
29edf6d901432a1afc65900ff599c963edac5a2b,29edf6d9,altos: Make telescience-v0.1 build with new ao_data struct,"altos: Make telescience-v0.1 build with new ao_data struct

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338162241,1338162241,5fd869b244f8f2b76258dc31a5507a73fd47cf1d
5fd869b244f8f2b76258dc31a5507a73fd47cf1d,5fd869b2,altos: Make telenano build with new ao_data structure,"altos: Make telenano build with new ao_data structure

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338161472,1338161472,627b904b36e129ff2ead436a626699abfc3b3211
627b904b36e129ff2ead436a626699abfc3b3211,627b904b,altos: Make stm-demo compile with new ao_data structure,"altos: Make stm-demo compile with new ao_data structure

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338161367,1338161367,090dc9aecdf4cfd1ac727325ae141d441c5b28aa
090dc9aecdf4cfd1ac727325ae141d441c5b28aa,090dc9ae,altos: Make telemini-v1.0 compile with new ao_data structure,"altos: Make telemini-v1.0 compile with new ao_data structure

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338161203,1338161203,98e992b65d366d9f79d7d2dd2dd4d1886dd1d9c4
98e992b65d366d9f79d7d2dd2dd4d1886dd1d9c4,98e992b6,altos: Make telemetrum-v1.0 build with new ao_data structure,"altos: Make telemetrum-v1.0 build with new ao_data structure

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338161117,1338161117,ce8153472069ed56b24ac36f297ac569d1f767d4
ce8153472069ed56b24ac36f297ac569d1f767d4,ce815347,altos: Make telemetrum-v1.1 compile with new ao_data structure,"altos: Make telemetrum-v1.1 compile with new ao_data structure

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338161049,1338161049,ed635545e0b965901032ed2c3474ffe997c73de3
ed635545e0b965901032ed2c3474ffe997c73de3,ed635545,ignore pa to altitude conversion file,"ignore pa to altitude conversion file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338159165,1338159165,dd73c9b441f7672fb9982c4caeb5178df30f5d2b
dd73c9b441f7672fb9982c4caeb5178df30f5d2b,dd73c9b4,altos: Split out mm-specific versions of sampling code,"altos: Split out mm-specific versions of sampling code

Avoid breaking telemetrum (too much) by splitting this stuff apart.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338158850,1338158850,9eeba439ce8c9dc1def8528f96b6a67c6578d656
9eeba439ce8c9dc1def8528f96b6a67c6578d656,9eeba439,altos: Don't start ADC ring until the other sensors have a valid value,"altos: Don't start ADC ring until the other sensors have a valid value

Yes, this is still an ugly kludge, but it's easy.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338158760,1338158760,d01c10eff4b70af13347969a7cece8730cf1a3f1
d01c10eff4b70af13347969a7cece8730cf1a3f1,d01c10ef,altos: Data packet tick count does not live in adc structure,"altos: Data packet tick count does not live in adc structure

It was moved to the global structure. Having two is confusing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338158678,1338158678,78423f3fc5164ea9fd428606419784c1700ad5c5
78423f3fc5164ea9fd428606419784c1700ad5c5,78423f3f,Get megametrum ready to at least log flight data,"Get megametrum ready to at least log flight data

Doesn't track flight state changes correctly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1338009486,1338009486,0239e4dfe587528524b6380bbf6d9583047e52d6
0239e4dfe587528524b6380bbf6d9583047e52d6,0239e4df,altos: Poll mpu6000 values every tick and stash them locally.,"altos: Poll mpu6000 values every tick and stash them locally.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1337401427,1337401427,34bb17bc1a3d8a1c95b5e57f059e7a1747e17a03
34bb17bc1a3d8a1c95b5e57f059e7a1747e17a03,34bb17bc,altos: Finish ms5607 support,"altos: Finish ms5607 support

This has the MS5607 polling once each tick for pressure and
temperature and then saving that in a global variable. The command UI
provides for dumping the prom data so that an eeprom file can have
raw sensor data along with the conversion factors necessary to compute
useful values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1337397395,1337397541,5d8b9d524d6424ff98dcc4155fe8b8bd892b6d8f
5d8b9d524d6424ff98dcc4155fe8b8bd892b6d8f,5d8b9d52,altos: Add conversion between Pa and meters,"altos: Add conversion between Pa and meters

To be used with the MS5607 which generates data in calibrated units.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1337396697,1337397541,1541fc0bde71f503b1ae5757497e9e1e6d023111
1541fc0bde71f503b1ae5757497e9e1e6d023111,1541fc0b,altos: Check MS5607 CRC. Clean up MS5607 API,"altos: Check MS5607 CRC. Clean up MS5607 API

It's not ready for flight yet, but at least it's sensible now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336457697,1337397541,6a62edd4a1f01a6ee380c3aabaff3f437e8d6f1e
6a62edd4a1f01a6ee380c3aabaff3f437e8d6f1e,6a62edd4,altos: Conditional byte swapping in mpu6000 driver,"altos: Conditional byte swapping in mpu6000 driver

Only needed on LSB machines.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336457654,1337397540,6a973f788563ccc66b01cc7557a004dabef18d09
6a973f788563ccc66b01cc7557a004dabef18d09,6a973f78,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1337181233,1337181233,"d387f246b24502642b76aad04eb3e0f1a5b78a05,da2c920b9f3378d5a18551e008c1da5dace1e0ef"
d387f246b24502642b76aad04eb3e0f1a5b78a05,d387f246,"build-dep on default-jdk instead of openjdk-6-jdk, closes: #655580","build-dep on default-jdk instead of openjdk-6-jdk, closes: #655580
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1337180984,1337180984,7b0b6bcc40891d8dd106d091d3af8107b2941c66
da2c920b9f3378d5a18551e008c1da5dace1e0ef,da2c920b,altosui: Try to make telem tick counts match eeprom,"altosui: Try to make telem tick counts match eeprom

telem files can have an extra wrap or two of tick count if they start
recording a long time before the flight. Account for this so that the
CSV file output from each have matching tick values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336452833,1336452833,b5b898264077fcada29e73efa28dcbe4729f2709
b5b898264077fcada29e73efa28dcbe4729f2709,b5b89826,altosui: Output recorded clock tick in CSV files,"altosui: Output recorded clock tick in CSV files

This allows eeprom and telem files to be correlated accurately

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336452791,1336452791,73c26f39b1a08fcc13e23a5b1a4293bc7df9f163
73c26f39b1a08fcc13e23a5b1a4293bc7df9f163,73c26f39,altos: Hacking at cc1120 driver,"altos: Hacking at cc1120 driver

Still doesn't work, but this adds a ton more register definitions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336452732,1336452732,318b564486aa9965bbad54c71e51fcb32b414162
318b564486aa9965bbad54c71e51fcb32b414162,318b5644,altos: Get mpu6000 working,"altos: Get mpu6000 working

This initializes the device appropraitely, and provides a command to
dump the current values in converted form.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336452685,1336452685,af949c67eeb9dc310b1430d3435d241adccfc0a9
af949c67eeb9dc310b1430d3435d241adccfc0a9,af949c67,altos: stm: pass DMA buffer index to DMA completion callback,"altos: stm: pass DMA buffer index to DMA completion callback

This lets the user know which DMA has finished.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336452626,1336452626,dd7699cf8daded17ac41abf5c5170cfb599b6ff5
dd7699cf8daded17ac41abf5c5170cfb599b6ff5,dd7699cf,altos: stm: delay during USB config with pull-up off,"altos: stm: delay during USB config with pull-up off

This makes sure that a reboot will reliably cause the device to
disconnect from the USB bus.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336452564,1336452564,744d05e6037ffc11688a9faa9c7b5dcda4065ee3
744d05e6037ffc11688a9faa9c7b5dcda4065ee3,744d05e6,altos: stm: share i2c_stop code between send and recv,"altos: stm: share i2c_stop code between send and recv

This waits for the stop signal to appear on the bus, necessary before
starting another transaction.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336452437,1336452437,ddaf501ddcfc1a5f74a1ef1b6b76e1c82d89c77a
ddaf501ddcfc1a5f74a1ef1b6b76e1c82d89c77a,ddaf501d,altos: stm i2c DMA for large recv appears to work,"altos: stm i2c DMA for large recv appears to work

Transaction appears to be clean on the i2c bus now; correct number of
bytes received, and the nack and stop at the right time. This tests >
2 length reads; should try that too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336373653,1336373653,fad6cda3d081d438b18305611f37fe05335aa372
fad6cda3d081d438b18305611f37fe05335aa372,fad6cda3,altos: megametrum needs ao_mpu6000.h,"altos: megametrum needs ao_mpu6000.h

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336370005,1336370005,f66f5de7a6cae71948da777ad0638bc6267a710f
f66f5de7a6cae71948da777ad0638bc6267a710f,f66f5de7,altos: Switch megametrum compile to -Os,"altos: Switch megametrum compile to -Os

Looks like gcc has compiler bugs with -O0

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336369976,1336369976,0f0cc91ce8e9807dca48a5c0c53d821f5060e245
0f0cc91ce8e9807dca48a5c0c53d821f5060e245,0f0cc91c,altos: STM i2c work.,"altos: STM i2c work.

Start now driven by interrupts
Send now done with DMA and interrupts

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1336369653,1336369653,69feb1e3d94a028d04529edb015654bafd06353b
69feb1e3d94a028d04529edb015654bafd06353b,69feb1e3,ao-tools: Add GPS and rssi printing to ao-telem,"ao-tools: Add GPS and rssi printing to ao-telem

This prints all of the basic telemetrum messages now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1335921161,1335921161,8b08095b3d41e21684a10bddfb54431019da5af6
8b08095b3d41e21684a10bddfb54431019da5af6,8b08095b,"altos: Report latest telemetry data, rather than using the oldest","altos: Report latest telemetry data, rather than using the oldest

ao_sample_adc points to the *next* ADC entry, rather than the most
recent one. Step back one entry to get the latest valid data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1335895729,1335895729,7b0b6bcc40891d8dd106d091d3af8107b2941c66
7b0b6bcc40891d8dd106d091d3af8107b2941c66,7b0b6bcc,altos: Add hmc5883 and mpu6000 drivers to megametrum build,"altos: Add hmc5883 and mpu6000 drivers to megametrum build

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1335421760,1335421760,e0b8c614ec4d11f432963e48d94e4497d31a9ddc
e0b8c614ec4d11f432963e48d94e4497d31a9ddc,e0b8c614,altos: Add mpu6000 and hmc5883 stubs,"altos: Add mpu6000 and hmc5883 stubs

No real drivers here yet, just some testing stubs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1335421678,1335421678,0266e08dbf19e2204fb5f758d5d0f944d2afff7d
0266e08dbf19e2204fb5f758d5d0f944d2afff7d,0266e08d,altos: Add STM I2C recv and stop funcs,"altos: Add STM I2C recv and stop funcs

Recv doesn't appear to work with more than one byte

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1335421617,1335421617,962476911aaab17fd482593a0e8b95fe47de2f29
962476911aaab17fd482593a0e8b95fe47de2f29,96247691,altos: Oopsed the STM DMA channels for I2C1,"altos: Oopsed the STM DMA channels for I2C1

TX is 6, RX is 7

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1335421543,1335421543,5f55d0490017faa19b8d70b1742e4a45266c7e79
5f55d0490017faa19b8d70b1742e4a45266c7e79,5f55d049,altosui: Mac OS Lion Java default heap space is too small (Trac #37),"altosui: Mac OS Lion Java default heap space is too small (Trac #37)

Increase it to 512M in the Info.plist file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334978776,1334978898,1489263b895a2a825e29d0560c9b1dbba8a3f431
1489263b895a2a825e29d0560c9b1dbba8a3f431,1489263b,altos: Starting to write cc1120 driver,"altos: Starting to write cc1120 driver

This does ""something"" in radio test mode, appearing to generate a
730MHz signal.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334685678,1334685678,cc305ea231ae22278abf91c0d9925f5992945369
cc305ea231ae22278abf91c0d9925f5992945369,cc305ea2,altosui: Add apogee lockout configuration,"altosui: Add apogee lockout configuration

Provide suggested values of 5/10/15/20 seconds.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334436816,1334437469,b4ab9f5dfa9f2a50e0528acf0a1fdeaa1f9bc523
b4ab9f5dfa9f2a50e0528acf0a1fdeaa1f9bc523,b4ab9f5d,altosui: Read frequency from device while configuring ground station,"altosui: Read frequency from device while configuring ground station

Missed this when adding the TD config UI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334436757,1334437469,5c8af6d35ebfc8fd896dfbf9928ec8f9dbfa531f
5c8af6d35ebfc8fd896dfbf9928ec8f9dbfa531f,5c8af6d3,altos: Remove debug printf from cc1111 check-stack script,"altos: Remove debug printf from cc1111 check-stack script

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334430328,1334437469,6cb744e305116a738b5d71686c6748f6f08c12ea
6cb744e305116a738b5d71686c6748f6f08c12ea,6cb744e3,altos: Respect apogee lockout time in flight algorithm,"altos: Respect apogee lockout time in flight algorithm

This prevents any apogee detection from occurring until the specified
number of seconds after boost. This also prevents the switch from
accel+baro to baro only mode in the Kalman filter.

The test frame work is also changed to look for Apogee lockout: in the
eeprom input file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334430134,1334437469,9a8fec1b6d8f3346f988882ffb03d7d0e45b3c81
9a8fec1b6d8f3346f988882ffb03d7d0e45b3c81,9a8fec1b,altos: Clean up test scripts,"altos: Clean up test scripts

The flight test scripts were using invalid bash syntax. Clean that up
and also switch the default flight directory to my new
~/misc/rockets/flights directory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334430032,1334437469,e9f6fca7cfe796cbd86ae9d8f1ebe31bba7251db
e9f6fca7cfe796cbd86ae9d8f1ebe31bba7251db,e9f6fca7,altos: Correct STM USB driver,"altos: Correct STM USB driver

Configure endpoint registers correctly now.
Restructure code to make sure we send the right IN packets.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334367509,1334437469,1a84d34fa08f43a5f79b1a5f8d8de7674d04647d
1a84d34fa08f43a5f79b1a5f8d8de7674d04647d,1a84d34f,altos: Check all USE_SERIAL_*_STDIO when computing AO_NUM_STDIOS,"altos: Check all USE_SERIAL_*_STDIO when computing AO_NUM_STDIOS

AO_NUM_STDIOS is allocated based on the total number of possible stdio
values. Now that multiple serial stdio are possible, make sure to
check all of them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334367346,1334437469,3c67543f3e5fddc6a8850f33ac519ccd55b607f0
3c67543f3e5fddc6a8850f33ac519ccd55b607f0,3c67543f,altos: Set USB Interrupt endpoint interval to maximum allowed,"altos: Set USB Interrupt endpoint interval to maximum allowed

We don't ever send anything over this channel, so there's no sense
asking the host to poll it very often.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334367292,1334437469,0667261e03b3fd403e97d02ea6204b007bb13f58
0667261e03b3fd403e97d02ea6204b007bb13f58,0667261e,altos: Pull more interfaces out of ao.h and move to separate files,"altos: Pull more interfaces out of ao.h and move to separate files

This moves the aes, btm, companion, lcd and packet interfaces out of ao.h

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334335160,1334437469,2b4a53342980618b193cbee5b803e56f7c937893
2b4a53342980618b193cbee5b803e56f7c937893,2b4a5334,altos: ao_telelaunch.c got left in src directory,"altos: ao_telelaunch.c got left in src directory

Should live in product/ao_telelaunch.c

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334334960,1334437469,040a6eb119451026e1ec7c3a6a8e76b439c632d5
040a6eb119451026e1ec7c3a6a8e76b439c632d5,040a6eb1,altos: Massive product config cleanup,"altos: Massive product config cleanup

Support multiple serial ports more cleanly

Split out parts of ao.h into separate feature header files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334267467,1334437469,f952f9c285e2718a433c8c720c9b5d9c369e7036
f952f9c285e2718a433c8c720c9b5d9c369e7036,f952f9c2,altos: Start adding apogee lockout support,"altos: Start adding apogee lockout support

Remove radio channel support too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334267412,1334437469,6d1606895f70c6bca20c25084107f90bd0b613ec
6d1606895f70c6bca20c25084107f90bd0b613ec,6d160689,"altos: Switch stm-demo to HSE clock, add USB","altos: Switch stm-demo to HSE clock, add USB

Requires that SB17 be soldered shut so that the MCO from the STlink
CPU is available the target for HSE input.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334212288,1334434923,49ac2828510e8b5fcba7e31631dac0580a455011
49ac2828510e8b5fcba7e31631dac0580a455011,49ac2828,altos: Rework how STM clocks are initialized.,"altos: Rework how STM clocks are initialized.

Clean all of the RCC configuration up after turning on the clocks.
Use the MSI clock during initialization to avoid messing around with
the HSI clock temporarily.

Allow for an external clock on the HSE line.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334212213,1334434923,93ef7e4a23d13540615f1a9782e1d58ddb7f258e
93ef7e4a23d13540615f1a9782e1d58ddb7f258e,93ef7e4a,altos: Use new USB driver in megametrum-v0.1 product,"altos: Use new USB driver in megametrum-v0.1 product

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334212178,1334434922,d432307a3c2709634350eaa1262b935028d073d3
d432307a3c2709634350eaa1262b935028d073d3,d432307a,altos: Add STM USB driver,"altos: Add STM USB driver

Emulates the usual CDC-ACM device

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334212125,1334434922,afd52a8b54fe31577d939a161ea9cf5ad48e3a43
afd52a8b54fe31577d939a161ea9cf5ad48e3a43,afd52a8b,altos: Add STM ao_arch_reboot implementation,"altos: Add STM ao_arch_reboot implementation

Uses the AIRCR register to force a reset

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334211990,1334434922,150881f86f8d90b5867507889441990d18223e62
150881f86f8d90b5867507889441990d18223e62,150881f8,altos: Add register definitions for STM syscfg and usb,"altos: Add register definitions for STM syscfg and usb

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334211936,1334434922,0dd9e1dd62656a931f9559af6da9131f704f83f9
0dd9e1dd62656a931f9559af6da9131f704f83f9,0dd9e1dd,altos: Add support for multiple SPI busses and sharing device drivers,"altos: Add support for multiple SPI busses and sharing device drivers

The STM32L151 has several SPI busses, and we want to use more than
one, so add a 'bus' parameter to the SPI interfaces. To avoid wasting
time on AVR and CC1111 processors which only use one SPI bus, elide
those parameters from the actual functions by wrapping them with
macros.

Configuring chip select is now all macroized so that each chip can
have its own version, allowing the STM to share the various SPI device
drivers with the cc1111 and avr processors. Note that only the M25
driver has been ported; porting the others is 'trivial', but not
necessary at this point.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334039263,1334434869,35e3c47da895bdd868b9b66b98bca64bd82db862
35e3c47da895bdd868b9b66b98bca64bd82db862,35e3c47d,altos: make megametrum beeper test keep beeping,"altos: make megametrum beeper test keep beeping

Used to measure the beep frequency.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334035559,1334035559,9804528e249db256e020d4b5340ba6216d3474f0
9804528e249db256e020d4b5340ba6216d3474f0,9804528e,altos: Check for cc1111 flash overflow,"altos: Check for cc1111 flash overflow

The linker is supposed to do this, but it ignores the static
initializer data added after the code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334035513,1334035513,d15c4976ed9c23c861e620eb9c429d1cb7eedbee
d15c4976ed9c23c861e620eb9c429d1cb7eedbee,d15c4976,altos: Increase STM SPI speed to PCLK/4,"altos: Increase STM SPI speed to PCLK/4

The pressure sensor seems happy at this speed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334035476,1334035476,0cd682ef0c8cdcf364b7e173ff3a9f84e485c113
0cd682ef0c8cdcf364b7e173ff3a9f84e485c113,0cd682ef,altos: Move MS5607 configuration to ao_pins.h,"altos: Move MS5607 configuration to ao_pins.h

Which SPI port and where chip select is to be found are product specific.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334035432,1334035432,3909fca0a3f918121888a415f9bf9bca99505366
3909fca0a3f918121888a415f9bf9bca99505366,3909fca0,altos: Add missing parens in ao_ms5607.h,"altos: Add missing parens in ao_ms5607.h

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334035378,1334035378,c5bbfc7244faaae41c7b581644c3c253e9b7f462
c5bbfc7244faaae41c7b581644c3c253e9b7f462,c5bbfc72,"altos: Reduce MS5607 reset delay, increase conversion delay","altos: Reduce MS5607 reset delay, increase conversion delay

Reset doesn't take very long, while doing a conversion seems to take
more than 10ms.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334035306,1334035306,51aef5d4fc29986353ad887f4a67ed2fe35f8c8e
51aef5d4fc29986353ad887f4a67ed2fe35f8c8e,51aef5d4,altos: Make STM clock configuration per-product. Fix 32MHz CPU speed,"altos: Make STM clock configuration per-product. Fix 32MHz CPU speed

This moves all of the STM clock configuration into ao_pins.h so that
each product can configure it separately. While doing this, I
discovered that the flash memory mode (64-bit, prefetch, latency 1)
wasn't actually getting set, which is why the CPU refused to work at
32MHz.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334035053,1334035053,1dcfbb05531767e67df45c2799a2fe533834fb71
1dcfbb05531767e67df45c2799a2fe533834fb71,1dcfbb05,altos: Add beeper driver to STM arch,"altos: Add beeper driver to STM arch

Drives the MegaMetrum beeper

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1334028499,1334028588,67044cca5b463772491d0712d0ce07a8f897a476
67044cca5b463772491d0712d0ce07a8f897a476,67044cca,altos: Test I2C code on discovery board.,"altos: Test I2C code on discovery board.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333955443,1333955443,0a198dfcd1b0defe194feaf301f4586e5573d6e9
0a198dfcd1b0defe194feaf301f4586e5573d6e9,0a198dfc,altos: ARM -O0 flag appears to generate buggy code,"altos: ARM -O0 flag appears to generate buggy code

Use -Os always, which is annoying...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333955401,1333955401,597c3df668ccf656d8c014f665c154a03166577c
597c3df668ccf656d8c014f665c154a03166577c,597c3df6,altos: Make ms5607 driver do something,"altos: Make ms5607 driver do something

It's loading prom values and converting sensor data, but it's getting
the wrong answer at present.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333955358,1333955358,e9362841b1075a2ae59eecc73137b20e700567a8
e9362841b1075a2ae59eecc73137b20e700567a8,e9362841,altos: add STM I2C driver.,"altos: add STM I2C driver.

Not well tested yet...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333955300,1333955300,e027247a9ef82746c26bcb8d0a851a0fa06511de
e027247a9ef82746c26bcb8d0a851a0fa06511de,e027247a,altos: Slow STM SPI down a bit so the MS5607 returns values,"altos: Slow STM SPI down a bit so the MS5607 returns values

It's still not working right, but at least it returns something other
than all zeros...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333955195,1333955195,059f09dbca4703c25b42389b54c6510331c39485
059f09dbca4703c25b42389b54c6510331c39485,059f09db,altos: Allow STM DMA channels to be reserved for one use,"altos: Allow STM DMA channels to be reserved for one use

This allows a single user of a DMA channel to reserve it for use
without needing to lock the mutex; this is required for DMA from the
ADC to work on megametrum as it wants to start DMA from an interrupt
handler, which cannot block on a mutex.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333955118,1333955118,f7cfbbce2b94b5ac0094a0e34e1766fe1ceb12c8
f7cfbbce2b94b5ac0094a0e34e1766fe1ceb12c8,f7cfbbce,altos: Show temperature in stm-demo,"altos: Show temperature in stm-demo

Use the ADC to show current temperature

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333856117,1333856117,98aa481741b8fbc617545beda3d295b53de90716
98aa481741b8fbc617545beda3d295b53de90716,98aa4817,altos: Use 384 cycle ADC sample time,"altos: Use 384 cycle ADC sample time

This is plenty fast, and provides nice stable readings.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333856007,1333856007,0bce68e6a0abc19f49c573331164d13643c9bee5
0bce68e6a0abc19f49c573331164d13643c9bee5,0bce68e6,altos: Add STM temperature sensor calibration data,"altos: Add STM temperature sensor calibration data

Each stm32l has two-point factory temperature calibration data.
Provide access to that for displaying temperature data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333855918,1333855918,a41628c97e90770890cce1d6f580e92c1cad1a7f
a41628c97e90770890cce1d6f580e92c1cad1a7f,a41628c9,altos: Add ADC support to megametrum firmware,"altos: Add ADC support to megametrum firmware

Measures all MM igniter and battery voltages.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333850153,1333850153,9b9357f48597a034211affb3f18fc6089816456d
9b9357f48597a034211affb3f18fc6089816456d,9b9357f4,altos: Add ADC tests to stm-demo,"altos: Add ADC tests to stm-demo

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333850120,1333850120,b5e9d14b4e3e8f29ad8a7bb9b339890be4bcfa2f
b5e9d14b4e3e8f29ad8a7bb9b339890be4bcfa2f,b5e9d14b,altos: STM SPI is not using interrupts itself,"altos: STM SPI is not using interrupts itself

All SPI transfers are done via DMA, so the DMA interrupts suffice.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333850072,1333850072,5e41d1e03680af9806c599aad80b9b64dd719f9b
5e41d1e03680af9806c599aad80b9b64dd719f9b,5e41d1e0,altos: Add support for STM ADC,"altos: Add support for STM ADC

DMA-based driver for the STM analog to digital converter.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333849992,1333849992,fa96ee3db9b57cc2a88e9edd74bb9efcc228ccf3
fa96ee3db9b57cc2a88e9edd74bb9efcc228ccf3,fa96ee3d,altosui: remove debug printf from AltosFlightStats,"altosui: remove debug printf from AltosFlightStats

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333849451,1333849451,e56038b65ba1c6413ba9942be3c092644986f126
e56038b65ba1c6413ba9942be3c092644986f126,e56038b6,"altosui: When computing flight stats, auto-detect boost time","altosui: When computing flight stats, auto-detect boost time

Detect when boost actually starts by looking for the last low
acceleration value before the recorded boost time. This improves the
computation of the boost state data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333848996,1333848996,20066268d8d1853055d0afe108584db34b425fcb
20066268d8d1853055d0afe108584db34b425fcb,20066268,altosui: Integrate accel speed from very start of eeprom record,"altosui: Integrate accel speed from very start of eeprom record

Don't wait for the flight computer to have detected boost--that's
often several samples after boost actually occurred, which can leave a
bunch of acceleration out of the speed computation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333848926,1333848926,d35c4df12a3d8e2dab5d41f8d918ff4237f91e46
d35c4df12a3d8e2dab5d41f8d918ff4237f91e46,d35c4df1,altos: Add ability to change radio frequency in TeleTerra,"altos: Add ability to change radio frequency in TeleTerra

Provide a way to set the frequency locally.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333785693,1333786257,4700f63937786e8f6e9b4882363234a33eb54c46
4700f63937786e8f6e9b4882363234a33eb54c46,4700f639,altos: Make ao_config_set_radio public,"altos: Make ao_config_set_radio public

Allows other bits of code to reset the radio parameters.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333785666,1333785666,a0a650a2be007b0436bd527d6c18f36eef6fbe2b
a0a650a2be007b0436bd527d6c18f36eef6fbe2b,a0a650a2,altos: Force radio channel to zero when setting frequency,"altos: Force radio channel to zero when setting frequency

Otherwise, the actual radio frequency will include the channel offset,
which is not useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333783550,1333783550,c7119405a3dd7128120374a2a001bc98ef523619
c7119405a3dd7128120374a2a001bc98ef523619,c7119405,altos: Make ao_freq_to_set reentrant,"altos: Make ao_freq_to_set reentrant

Save a bunch of data space this way.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333783526,1333783526,d0d0d20c20e5eeacbc9a1ec1c93141a2044830fb
d0d0d20c20e5eeacbc9a1ec1c93141a2044830fb,d0d0d20c,altos: Shorten help strings,"altos: Shorten help strings

Save a bit of code space

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333783499,1333783499,8405efb6ca68c8216413b94e7acbdf51af00554a
8405efb6ca68c8216413b94e7acbdf51af00554a,8405efb6,altos: Save memory in ao_config.c,"altos: Save memory in ao_config.c

Shorten help messages.
Stop setting aes_key on products not using aes key.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333783435,1333783435,41a8383ccd29351f3a88a374f9456d6efb71b9a0
41a8383ccd29351f3a88a374f9456d6efb71b9a0,41a8383c,altos: Save memory in ao_cmd.c,"altos: Save memory in ao_cmd.c

Shrink a couple of help strings
move a variable in ao_cmd from data to pdata.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333783361,1333783361,5f63065a16b65618b39314880c72074f0a8b5550
5f63065a16b65618b39314880c72074f0a8b5550,5f63065a,altos: Add fake install/uninstall targets for stm-bringup,"altos: Add fake install/uninstall targets for stm-bringup

Keep global 'make install' from failing.
Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333783322,1333783322,5569e4df50648a3ec131ba5e244da9b67d1a67db
5569e4df50648a3ec131ba5e244da9b67d1a67db,5569e4df,altosui: Radio channel gets set to zero by altos when frequency is set,"altosui: Radio channel gets set to zero by altos when frequency is set

Just remember what the channe is going to get set to.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333783263,1333783263,2db6b0f58811ffc44a468c8fbcacc08d37edd26c
2db6b0f58811ffc44a468c8fbcacc08d37edd26c,2db6b0f5,altos: Shuffle stm-demo SPI test code around a bit,"altos: Shuffle stm-demo SPI test code around a bit

Move a debug printf beyond the chip select boundary to
allow for more accurate timing.

Send four bytes instead of just one.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333777249,1333777249,89201cdf2062b7319a0da4e266e4d6edba1493f8
89201cdf2062b7319a0da4e266e4d6edba1493f8,89201cdf,altos: Declare stm DMA address registers as volatile void *,"altos: Declare stm DMA address registers as volatile void *

Eliminates a cast when assigning to them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333777217,1333777217,0bcc23c3be1a20a362fea268901c600f9f0d287a
0bcc23c3be1a20a362fea268901c600f9f0d287a,0bcc23c3,altos: Disable DMA unit when idle,"altos: Disable DMA unit when idle

Should save a bit of power

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333777185,1333777185,20926b62a87154a846cb950dc542c737cd54826d
20926b62a87154a846cb950dc542c737cd54826d,20926b62,altos: Disable STM SPI transceiver when idle,"altos: Disable STM SPI transceiver when idle

Should save a bit of power.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333777152,1333777152,9b12bc445fe482306e4587ad60c6d2daf65a60f3
9b12bc445fe482306e4587ad60c6d2daf65a60f3,9b12bc44,"altos: Add DMA, SPI and MS5607 drivers","altos: Add DMA, SPI and MS5607 drivers

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333760827,1333760827,2a04ac8dff1bfc3efba8c7e4dc9c1a827496dbdf
2a04ac8dff1bfc3efba8c7e4dc9c1a827496dbdf,2a04ac8d,"altos: megametrum builds an ELF file, not an IHX file","altos: megametrum builds an ELF file, not an IHX file

Name it appropriately.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333432829,1333432829,cf1e4d60e1fcd75fa734365a2666ea8930938128
cf1e4d60e1fcd75fa734365a2666ea8930938128,cf1e4d60,altos: Move SPI functions to architecture-specific location,"altos: Move SPI functions to architecture-specific location

Some architecture specific stuff needs to use core altos code, so
create new ao_arch_funcs.h files per architecture that get pulled in
at the end of ao.h

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333432734,1333432734,c09d155328bd446bb84ac1068d380cceb884df22
c09d155328bd446bb84ac1068d380cceb884df22,c09d1553,altos: Oops. Set per-USART STM baud rate register instead of usart1,"altos: Oops. Set per-USART STM baud rate register instead of usart1

Was accidentally always setting usart1 instead of the per-usart
register. Didn't work too well for other usarts...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333420073,1333420161,440226df03a85cd0047d876b57b2a3410bfb2b02
440226df03a85cd0047d876b57b2a3410bfb2b02,440226df,be explicit in a couple places about only using single-cell LiPo batteries,"be explicit in a couple places about only using single-cell LiPo batteries
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1333238005,1333238005,4ca52908c8b3f98a79588981f6878025250f0924
4ca52908c8b3f98a79588981f6878025250f0924,4ca52908,use explicit path not $(HOME) to find ARM toolchain for now,"use explicit path not $(HOME) to find ARM toolchain for now
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1333233819,1333233819,246618baf9b8803e5ae4e650eb46740d1128a010
246618baf9b8803e5ae4e650eb46740d1128a010,246618ba,add config file for gdb use with MegaMetrum via Olimex dongle,"add config file for gdb use with MegaMetrum via Olimex dongle
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1333233791,1333233791,b89f11139fae7ae722ed78d342a169ed2bf5c948
b89f11139fae7ae722ed78d342a169ed2bf5c948,b89f1113,Build megametrum-v0.1 by default,"Build megametrum-v0.1 by default
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333223054,1333223065,bbf31b8591f89e2a1fcc7dac5f42d730a81473d2
bbf31b8591f89e2a1fcc7dac5f42d730a81473d2,bbf31b85,altos: Add stub cc1120 driver,"altos: Add stub cc1120 driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1333223038,1333223065,1f2b75518169c4f2da9762de46bf1d9a71a04d17
1f2b75518169c4f2da9762de46bf1d9a71a04d17,1f2b7551,altos: Move cc1111 DMA engine interface to cc1111/ao_arch.h from ao.h,"altos: Move cc1111 DMA engine interface to cc1111/ao_arch.h from ao.h

It's hardware specific

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332996872,1333223065,47a9925f16f6a13b173c49d3873d91fc7cf6d46e
47a9925f16f6a13b173c49d3873d91fc7cf6d46e,47a9925f,altos: Move cc1111 AES driver to cc1111 directory,"altos: Move cc1111 AES driver to cc1111 directory

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332996810,1333223065,93ae5f6ce09fa71ebd34f77a884684b3670c8b44
93ae5f6ce09fa71ebd34f77a884684b3670c8b44,93ae5f6c,openocd config file for MegaMetrum,"openocd config file for MegaMetrum
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1333222155,1333222155,b711768da6310a1b06f3b995a280587fed5f26cd
b711768da6310a1b06f3b995a280587fed5f26cd,b711768d,Bump version to 1.0.9.4,"Bump version to 1.0.9.4

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332996344,1332996344,0993595035a2813deba6991fa25bc0d475f2e6bb
0993595035a2813deba6991fa25bc0d475f2e6bb,09935950,altos: Add ao_freq.c to megametrum build,"altos: Add ao_freq.c to megametrum build

I think this will be needed to compute radio settings on the cc1120

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332996302,1332996302,a157edbe1bf7fffd5a6041f7b1760674addd2229
a157edbe1bf7fffd5a6041f7b1760674addd2229,a157edbe,stm-demo does not use altitude.h,"stm-demo does not use altitude.h
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332706085,1332995824,c1531fb26461b9f4ec39672bbfaeb70e6f4d1056
c1531fb26461b9f4ec39672bbfaeb70e6f4d1056,c1531fb2,Use -Os for STM apps. Fix altos.ld to matchall .rodata* sections,"Use -Os for STM apps. Fix altos.ld to matchall .rodata* sections

Without .rodata*, it would stick the flash copy of the data on top of
any further .rodata* sections. Fortunately, the linker catches that
and complains...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332492152,1332995824,f2c110fb4531144f18f62200e4127738c84e87f1
f2c110fb4531144f18f62200e4127738c84e87f1,f2c110fb,Get config stuff hooked up for MegaMetrum,"Get config stuff hooked up for MegaMetrum

This stubs out enough stuff to let ao_config link and work

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332489353,1332995824,0bda768c2be5b81bec13f21d4d3bb6a11a8e88fa
0bda768c2be5b81bec13f21d4d3bb6a11a8e88fa,0bda768c,Add preliminary MegaMetrum v0.1 support,"Add preliminary MegaMetrum v0.1 support

This turns on an LED, enables the internal R/C clock, hooks USART3 to
the GPS chip and USART1 to the console.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332488627,1332995824,c27e211796a64b6bbacfe6a1516e9872fdb0853e
c27e211796a64b6bbacfe6a1516e9872fdb0853e,c27e2117,Use new Makefile.defs in stm-demo,"Use new Makefile.defs in stm-demo

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332488597,1332995824,d7ddfd4e6d75e50ca64a342181f5c52e9f4919af
d7ddfd4e6d75e50ca64a342181f5c52e9f4919af,d7ddfd4e,Use 16-bits for STM32 LED mask. Export serial I/O functions,"Use 16-bits for STM32 LED mask. Export serial I/O functions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332488533,1332995824,606d866153cb639a2400cbedbc45046372ad1b30
606d866153cb639a2400cbedbc45046372ad1b30,606d8661,Allow skytraq to be on non-default serial port,"Allow skytraq to be on non-default serial port

Provide ao_gps_getchar, ao_gps_putchar and ao_gps_set_speed hooks to
let product specify functions for serial access.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332488448,1332995824,25184baa36c20e3d661f94e642a33e8aae179d60
25184baa36c20e3d661f94e642a33e8aae179d60,25184baa,Allow for more than 8 LEDs,"Allow for more than 8 LEDs

Provide hook for architecture-specific LED mask (AO_LED_TYPE)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332488409,1332995824,87ca5c9c5f9cea1b9e14468e4694ce6acc21955a
87ca5c9c5f9cea1b9e14468e4694ce6acc21955a,87ca5c9c,Clean up STM build by moving common defs to Makefile.defs,"Clean up STM build by moving common defs to Makefile.defs

Shortens default Makefile a bit

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332487146,1332995824,41a3fded116a3101789df44647d0eb06be07a25b
41a3fded116a3101789df44647d0eb06be07a25b,41a3fded,Make stm-demo display a scrolling message,"Make stm-demo display a scrolling message

Instead of trying to frob the LEDs, which are now owned by the serial
port.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332486287,1332995824,9b5e98a3407b369803109bfc1409e4f8b6e848ba
9b5e98a3407b369803109bfc1409e4f8b6e848ba,9b5e98a3,Flush LCD changes each time the text is updated,"Flush LCD changes each time the text is updated

Rather than requiring the caller to do it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332486261,1332995824,6337b5f522be11926a6490d7bb27a4f7795da569
6337b5f522be11926a6490d7bb27a4f7795da569,6337b5f5,Automatically set ALTERNATE pin mode when setting alternate function,"Automatically set ALTERNATE pin mode when setting alternate function

When selecting an alternate function, set the pin to alternate mode as
well; there's no sense requiring two separate calls everywhere.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332486209,1332995823,c9e61a4f1f0ce5e5177a2252e8b7a02a578e77f1
c9e61a4f1f0ce5e5177a2252e8b7a02a578e77f1,c9e61a4f,Allow any STM usart to be used for stdio,"Allow any STM usart to be used for stdio

This also adds the alternate pin configurations for the other two
usarts

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332486158,1332995823,bf060b3e3ed655bbb8464f342d0a0b1745a06173
bf060b3e3ed655bbb8464f342d0a0b1745a06173,bf060b3e,Allow for more than one serial port in core AltOS,"Allow for more than one serial port in core AltOS

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332486110,1332995823,d236a5c7cd6e9b1d7192e801d63b4bd348cc2f12
d236a5c7cd6e9b1d7192e801d63b4bd348cc2f12,d236a5c7,Move LCD string output code to ao_lcd_font.c,"Move LCD string output code to ao_lcd_font.c

It's all very specific to the 14-segment display, so
stick it there.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332471750,1332995823,6da2f5846f2d28ea1f09f60ef2cc3f68113ac62a
6da2f5846f2d28ea1f09f60ef2cc3f68113ac62a,6da2f584,Add LCD device driver to STM32L port,"Add LCD device driver to STM32L port

This enables the 6-digit 14-character display on the STM32L discovery
board and provides an ascii output to it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332470609,1332995823,a953ac32033ded18adf0cb3ca20134385fcd0a6d
a953ac32033ded18adf0cb3ca20134385fcd0a6d,a953ac32,Add defines for LCD controller and RTC clocking,"Add defines for LCD controller and RTC clocking

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332470538,1332995823,f6e557bc2f0bd6d4272ed00dd09554d27a83be89
f6e557bc2f0bd6d4272ed00dd09554d27a83be89,f6e557bc,Actually enable usarts with the new usart code,"Actually enable usarts with the new usart code

And move USART1 to PB6/PB7 to avoid conflicting with
the LCD pins.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332470483,1332995823,03fbc18ea17a9e77a1d4d8e0ddb97abbe5da3658
03fbc18ea17a9e77a1d4d8e0ddb97abbe5da3658,03fbc18e,Clean up multiple serial port support for STM32L,"Clean up multiple serial port support for STM32L

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332372246,1332995823,f560c961ae4fedec0c9f11d5b3635fcb0d67ed8e
f560c961ae4fedec0c9f11d5b3635fcb0d67ed8e,f560c961,Add support for multiple serial ports on STM32L,"Add support for multiple serial ports on STM32L

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332371906,1332995823,faf2bea4fdb3dca7fbed35423a4fe4459ee92ceb
faf2bea4fdb3dca7fbed35423a4fe4459ee92ceb,faf2bea4,Save/restore PRIMASK register on Cortex-M3,"Save/restore PRIMASK register on Cortex-M3

This preserves the interrupt-enabled bit across context switches

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332181540,1332995823,6a14bee42a8431c909bcd74b0acec57329bc0284
6a14bee42a8431c909bcd74b0acec57329bc0284,6a14bee4,Don't disable interrupts before saving interrupt flag on AVR,"Don't disable interrupts before saving interrupt flag on AVR

This ignores the interrupt disabled state, so we'd always leave
ao_yield with interrupts disabled.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332181483,1332995823,7662a0096a860cddac413a310305fe842830c3b5
7662a0096a860cddac413a310305fe842830c3b5,7662a009,Add .gitignore file to stm-bringup,"Add .gitignore file to stm-bringup

Ignore generated binaries

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332134991,1332995823,4be74ef0d13114707fd8217907a5ec457f886160
4be74ef0d13114707fd8217907a5ec457f886160,4be74ef0,Fix STM LED driver and blink LEDs on discovery board,"Fix STM LED driver and blink LEDs on discovery board

This adds a task to blink the LEDs, after first fixing up the LED
output code to enable the GPIO and talk to the right pins for the
discovery board.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332134803,1332995823,ab6ea9043b592c25948a70b6204d613756a9a250
ab6ea9043b592c25948a70b6204d613756a9a250,ab6ea904,Basic OS running on STM32L,"Basic OS running on STM32L

This gets stm-demo working

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332133802,1332995823,0cc01d378ae96325e429ad608b953661582939b0
0cc01d378ae96325e429ad608b953661582939b0,0cc01d37,Add AO_PANIC_STACK,"Add AO_PANIC_STACK

Provide a panic code for stack overflow.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332133760,1332995822,1ca46760cf903860dccb4864578558a1abb6e0fa
1ca46760cf903860dccb4864578558a1abb6e0fa,1ca46760,"When debugging, send ao_panic message to ao_debug_out","When debugging, send ao_panic message to ao_debug_out

Use the low-level debug hooks to get the panic state sent to the
serial port.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332133728,1332995822,4bfce11873f34af9621c60f83a8355f85769f6d3
4bfce11873f34af9621c60f83a8355f85769f6d3,4bfce118,"When debugging, send pre-init output to ao_debug_out","When debugging, send pre-init output to ao_debug_out

Before tasking is running, send output to ao_debug_out to help debug
system initialization.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332133627,1332995822,93481fd3d9305a107b88c8a64de4194a6d94dc0e
93481fd3d9305a107b88c8a64de4194a6d94dc0e,93481fd3,Incorrect type in ao_task_info for wchan,"Incorrect type in ao_task_info for wchan

Would truncate 32-bit pointers on arm.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332133546,1332995822,8ba5344514f8ed51f6fd69ca09f6c7035c4fd0da
8ba5344514f8ed51f6fd69ca09f6c7035c4fd0da,8ba53445,Add stm-demo program,"Add stm-demo program

This runs AltOS and talks over the serial port.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1331968019,1332995822,1d1b24bb20dec09145fbaa6fe6897898d47dd16e
1d1b24bb20dec09145fbaa6fe6897898d47dd16e,1d1b24bb,These were moved to the src/stm directory,"These were moved to the src/stm directory

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1331954669,1332995822,b8100ea5042013bb4eed67907b4e9d4e5c196df2
b8100ea5042013bb4eed67907b4e9d4e5c196df2,b8100ea5,Add stm bringup timers and move most of the setup code to the stm dir,"Add stm bringup timers and move most of the setup code to the stm dir

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1331954611,1332995822,9279fd42793123784ce83ca151df6f4630487722
9279fd42793123784ce83ca151df6f4630487722,9279fd42,Add STM platform and stm-bringup demo program,"Add STM platform and stm-bringup demo program

The stm-bringup doesn't run altos, it just initializes the device and
writes stuff over a serial port. Works on the STM32L Discovery board
at least, should do stuff on other boards too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1331954469,1332995822,e2f13aa43ba79becbff6c9bfc18c665a58d96185
e2f13aa43ba79becbff6c9bfc18c665a58d96185,e2f13aa4,Add example STM32L programs,"Add example STM32L programs

This loads to flash and sends data over the serial link.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1331933137,1332995822,3c7d1f6cfffb43299041f2850a48177f4e9b83a5
3c7d1f6cfffb43299041f2850a48177f4e9b83a5,3c7d1f6c,"'stdin' is a special name in some compiler environments, don't use it.","'stdin' is a special name in some compiler environments, don't use it.

Switch to 'in' in the prototype for altos_serial_set_stdin.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1329906363,1332995822,bdfcc9112c41c494de23594963980a730b625cc4
bdfcc9112c41c494de23594963980a730b625cc4,bdfcc911,altosui: Disable launch controller button,"altosui: Disable launch controller button

The launch controller should just be a separate program.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332920969,1332920969,cf1e95810559584705d0b8a787375938c68e07c6
cf1e95810559584705d0b8a787375938c68e07c6,cf1e9581,altosui: Add Configure Ground Station dialog (trac #29),"altosui: Add Configure Ground Station dialog (trac #29)

Allows the user to configure the teledongle frequency without opening
up the flight monitor window, and also shows the teledongle fixed
values like radio calibration, serial number and software version.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332920272,1332920539,d60862fce6ac27a97ad6337eea32a4b48645d158
d60862fce6ac27a97ad6337eea32a4b48645d158,d60862fc,altos: Make sure config values are loaded in 'c s' command,"altos: Make sure config values are loaded in 'c s' command

ao_config_get may not have been called when ao_config_show is invoked
by the user, so make sure the config values are loaded before showing
uninitialized data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332920317,1332920396,b98f75dbcccd40c8cbf32c3bfd21bd6f5648b861
b98f75dbcccd40c8cbf32c3bfd21bd6f5648b861,b98f75db,altosui: Sanity check values from device configuration,"altosui: Sanity check values from device configuration

If someone has down-graded and re up-graded the firmware, the config
entries may be garbage. Sanity check them to avoid crashing the UI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332914057,1332914057,b6c7ae2c1f8cba7351cd139c49322280d9d3af47
b6c7ae2c1f8cba7351cd139c49322280d9d3af47,b6c7ae2c,altos: Reset config version if it's too large as well,"altos: Reset config version if it's too large as well

Any future config values will get trashed if we down grade the
firmware, so we must reset the firmware version whenever it gets
written.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332913988,1332913988,3f0379db7067eaf104892a82b9c49142087adece
3f0379db7067eaf104892a82b9c49142087adece,3f0379db,altosui: Make 'monitor idle' work with older TeleMetrum firmware (trac #28),"altosui: Make 'monitor idle' work with older TeleMetrum firmware (trac #28)

Older TM firmware did not have the 'done' line at the end of the GPS
report, rather it would just stop after showing the Flags value. Check
the TM version and stop looking for GPS data when the Flags line appears.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332910933,1332910985,7a9baabaf33db5e30eb4ef8f923a4fd96fd28fb4
7a9baabaf33db5e30eb4ef8f923a4fd96fd28fb4,7a9baaba,altosui: Mark data 'Age' in monitor idle UI too,"altosui: Mark data 'Age' in monitor idle UI too

Just like with the flight monitor UI, it's nice to know how old the
data in the monitor idle UI is, in case the data link to the TM isn't reliable.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332910198,1332910198,2f19f9a0eaba22789fdc07a52849e8aaf6fe4695
2f19f9a0eaba22789fdc07a52849e8aaf6fe4695,2f19f9a0,altosui: Catch attempt to set radio frequency to 0.0 -- use default,"altosui: Catch attempt to set radio frequency to 0.0 -- use default

Monitor idle was setting the frequency to 0, which takes a while with
the new native radio frequency setting code. Don't do that, instead
pull out the preferred frequency for that, as is done in other places
where a frequency of 0.0 is used.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332910123,1332910123,170510bb183715e9ba580b180f20657d6602644e
170510bb183715e9ba580b180f20657d6602644e,170510bb,altosui: Find actual landing time when computing stats (trac #23),"altosui: Find actual landing time when computing stats (trac #23)

Look for the last time the height went from >10m to <2m from the
nominal landing altitude and use that as the landing time when
computing things like main descent speed, time under main etc.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332908011,1332908151,0952224c36eba25db34bd147d2d579c66b15bbf8
0952224c36eba25db34bd147d2d579c66b15bbf8,0952224c,altosui: Change flight data saving UI to separate download/delete selections,"altosui: Change flight data saving UI to separate download/delete selections

First pop up a dialog to select flights for download. Download
them. Then, after that, pop up a *new* dialog to select flights for
delete. Offer to delete all of the downloaded flights by default. Then
delete the flights.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332897891,1332897891,7dd1d62676c1e605fe69a4c0acfe7638c6b79aa5
7dd1d62676c1e605fe69a4c0acfe7638c6b79aa5,7dd1d626,altos: Optimize ao_freq_to_set a bit,"altos: Optimize ao_freq_to_set a bit

Reduces size from 327 bytes to 287 bytes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332897545,1332897545,d77a4ea206d627635159f35c76c744687d4e633b
d77a4ea206d627635159f35c76c744687d4e633b,d77a4ea2,altosui: Show only supported telemetry version,"altosui: Show only supported telemetry version

Make it clear in the UI which telemetry versions are supported,
providing the combobox only for new firmware which supports all versions.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332874719,1332874719,d8ebb83e64d66fa159e75aa560d39d80bb6d9d04
d8ebb83e64d66fa159e75aa560d39d80bb6d9d04,d8ebb83e,altosui: Configure radio with new direct frequency setting,"altosui: Configure radio with new direct frequency setting

Instead of computing the radio setting in altosui, let the radio do it directly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332869912,1332870334,c1d12a117b36de7fe8dd992959b890bfd1163e81
c1d12a117b36de7fe8dd992959b890bfd1163e81,c1d12a11,Do radio settings solely by frequency,"Do radio settings solely by frequency

Compute the radio setting needed based on the calibration value
provided and the requested frequency.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332830135,1332830135,c2550d72aee371676d2f09316051567681e53a7c
c2550d72aee371676d2f09316051567681e53a7c,c2550d72,altosui: Use ConcurrentHashMap for maps,"altosui: Use ConcurrentHashMap for maps

This data structure is accessed by multiple threads, so it needs to be
re-entrant.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332824704,1332824704,8610fdae8f47e1e8b6e8525227cc912664ecfafd
8610fdae8f47e1e8b6e8525227cc912664ecfafd,8610fdae,altosui: Show time since last packet in flight status window,"altosui: Show time since last packet in flight status window

Makes it easy to see when the UI is wedged, and when telemetry data
are being successfully received.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332824653,1332824653,392a3107b9e9cc8c1ea51df6ff5ec54817adbc65
392a3107b9e9cc8c1ea51df6ff5ec54817adbc65,392a3107,altosui: Restructure telemetry classes to be more sane,"altosui: Restructure telemetry classes to be more sane

 * Make AltosTelemetryRecord be a class, rather than an interface.

 * Inherit from this for AltosTelemetryRecordLegacy and
   AltosTelemetryRecordRaw.

 * Remove bogus AltosTelemetryRecordGeneral class.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1332817894,1332817894,77639dae0fb9975219c2e211ea6dd6c7965eeea2
77639dae0fb9975219c2e211ea6dd6c7965eeea2,77639dae,altos: Require callsign match in packet code,"altos: Require callsign match in packet code

Ignore packets with mismatching callsigns to avoid accidental
connections between devices controlled by different stations.

As a special case, if the device is configured with the default
callsign (N0CALL), then let anyone connect. This allows configuration
of new devices without needing to change the ground station callsign.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1317192643,1332814814,1b4a4c7b6a0c3f93267f33482f490e7aa25c2158
1b4a4c7b6a0c3f93267f33482f490e7aa25c2158,1b4a4c7b,doc: Add companion SPI message protocol doc,"doc: Add companion SPI message protocol doc

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1326480030,1326683928,5d42ded7ebdb0c134c8dac61f41525c37d81ae61
5d42ded7ebdb0c134c8dac61f41525c37d81ae61,5d42ded7,"update turnon_telemetrum to v1.2, add more turnon scripts","update turnon_telemetrum to v1.2, add more turnon scripts
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1326476663,1326476663,f450f8bc70f857053b26c4379f54a318062e89a1
f450f8bc70f857053b26c4379f54a318062e89a1,f450f8bc,altos: Set correct registers for serial0 baud,"altos: Set correct registers for serial0 baud

oops. not going to work very well setting serial 1.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325658479,1325658479,c6821ae734a7efaf2e069f6c5edf9605a9dbe125
c6821ae734a7efaf2e069f6c5edf9605a9dbe125,c6821ae7,altos: flush stdout when fifo from arduino serial port is empty,"altos: flush stdout when fifo from arduino serial port is empty

This avoids leaving bytes pending inside altos

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325652385,1325652385,65b9b5d0d91fef2c7452dc77017f31f176672304
65b9b5d0d91fef2c7452dc77017f31f176672304,65b9b5d0,Build teleshield by default,"Build teleshield by default
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325652161,1325652161,7a42f2e0f145d2d520aed8e241fa39f7cb62b19f
7a42f2e0f145d2d520aed8e241fa39f7cb62b19f,7a42f2e0,altos: Add support for UART0 in async mode,"altos: Add support for UART0 in async mode

And copy bytes from it to stdout.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325652075,1325652075,085625ff3992454b59583d95a3c415597c51f754
085625ff3992454b59583d95a3c415597c51f754,085625ff,altos: More _asm -> __asm changes,"altos: More _asm -> __asm changes

Missed a few last time

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325288548,1325288548,614ab6a991258a5caad0ca12ae35d0288a5b7503
614ab6a991258a5caad0ca12ae35d0288a5b7503,614ab6a9,altos: Clean up for SDCC 3.1 - more keywords,"altos: Clean up for SDCC 3.1 - more keywords

_asm -> __asm
sbit -> __sbit
remove variables named 'data'

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325288312,1325288312,bbb94a6a25a106316414a9a281e924f6c56e9f38
bbb94a6a25a106316414a9a281e924f6c56e9f38,bbb94a6a,altos: SDCC 3.1 wants __at instead of at,"altos: SDCC 3.1 wants __at instead of at

Older SDCC would accept __at, so just replace all occurances unconditionally.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325276855,1325276855,4783ac9653fd4f816f839452795e0d2e52129d5b
4783ac9653fd4f816f839452795e0d2e52129d5b,4783ac96,altos: Switch teleshield to use radio slave mode,"altos: Switch teleshield to use radio slave mode

And bring it up at startup time by default

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325029674,1325029674,791c137728dd3398bd7275be13cc9e6be96d7af4
791c137728dd3398bd7275be13cc9e6be96d7af4,791c1377,altos: Add teleshield directory and bring-up code,"altos: Add teleshield directory and bring-up code

This is cobbled together from various existing bits, but should at
least provide some ability to test a teleshield board.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1325029048,1325029048,eff8611e3eb19853b06acfcd7e978c9046cd5f78
eff8611e3eb19853b06acfcd7e978c9046cd5f78,eff8611e,altos: Create TeleMetrum v1.2 directory,"altos: Create TeleMetrum v1.2 directory

The hardware is software-compatible with v1.1, but it's nice to have
the right version number in all of the files.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1324170306,1324170575,6baf6f41040f7b074d8cc84ef75e254c5d2b466b
6baf6f41040f7b074d8cc84ef75e254c5d2b466b,6baf6f41,altosui: googleearth doesn't accept spaces between coordinates anymore,"altosui: googleearth doesn't accept spaces between coordinates anymore

it got pickier for some reason; let's not put spaces in now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1324169884,1324169884,dbf7c0c59854e040b65f068069d80716f02fc1bc
dbf7c0c59854e040b65f068069d80716f02fc1bc,dbf7c0c5,altos: Fix pad orientation for pre-1.1 boards,"altos: Fix pad orientation for pre-1.1 boards

They use a different code path for accel as they don't have the
VCC compensation code in place.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321254202,1321254202,c1e293ff4953b51c19af8b52f2999419ea84e7e5
c1e293ff4953b51c19af8b52f2999419ea84e7e5,c1e293ff,altos: Add startup and config (view only) pages to TT,"altos: Add startup and config (view only) pages to TT

The config page needs a pile of work before it's useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321154380,1321154380,02b4e52a5349217df43105eaa1fff6bfc7dac4cc
02b4e52a5349217df43105eaa1fff6bfc7dac4cc,02b4e52a,altos: Enable packet master and debug in TT,"altos: Enable packet master and debug in TT

The code was already getting linked in, so we might as well use it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321154333,1321154333,e7044fd95472449e2fb860cef902fa458b91ccac
e7044fd95472449e2fb860cef902fa458b91ccac,e7044fd9,altos: Fix sdcdb settings for telemetrum v1.0,"altos: Fix sdcdb settings for telemetrum v1.0

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321154303,1321154303,7f9e76e0d3492dcc8bf4b5b1f07c3c727cfdc0ef
7f9e76e0d3492dcc8bf4b5b1f07c3c727cfdc0ef,7f9e76e0,altos: Trim skytraq NMEA messages. Shrink NMEA header matching code,"altos: Trim skytraq NMEA messages. Shrink NMEA header matching code

Tell the skytraq to not bother sending a bunch of the NMEA messages
that we don't parse.

Explicitly look for 'G' follows by 'P' instead of having some general
header matching code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321152854,1321152854,d3dcb9451f40506abced72783966104645a73bc7
d3dcb9451f40506abced72783966104645a73bc7,d3dcb945,altos: Allow TT/TBT reports to escape landed state,"altos: Allow TT/TBT reports to escape landed state

The TM altitude reporting code kept beeping out state and altitude
forever, which isn't very useful on TBT or TT.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321152722,1321152722,0f7d7a4fbede63b51208bf051e08aa73dfbf35a0
0f7d7a4fbede63b51208bf051e08aa73dfbf35a0,0f7d7a4f,altos: Remove LCD debugging code,"altos: Remove LCD debugging code

This isn't needed anymore.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321152691,1321152691,430b439b9a5cc98b32273a233505de2c2f975c59
430b439b9a5cc98b32273a233505de2c2f975c59,430b439b,altosui: Add ao_lcd_cursor_on/off,"altosui: Add ao_lcd_cursor_on/off

This shows or hides a blinking cursor on the LCD.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321152663,1321152663,75a8490a7bee2a2c7afd559b13f1d9c40c2aa08f
75a8490a7bee2a2c7afd559b13f1d9c40c2aa08f,75a8490a,altos: Add configurable set of channels for TT,"altos: Add configurable set of channels for TT

This adds the channel list for TT, which will be configured by
AltosUI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321152557,1321152557,2ba946fea29ff134ffaeaea9d7932f4bd4e953aa
2ba946fea29ff134ffaeaea9d7932f4bd4e953aa,2ba946fe,altos: Export 'ao_cmd_is_white' for use by other code,"altos: Export 'ao_cmd_is_white' for use by other code

This function tests the current input character.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321152487,1321152487,20282ef00afe70e3f3193f6f0200254cb2c33e93
20282ef00afe70e3f3193f6f0200254cb2c33e93,20282ef0,altos: Set default flight log max to 127k on TM v0.1,"altos: Set default flight log max to 127k on TM v0.1

The flash part on v0.1 boards is only 128kB.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321152428,1321152428,5972c642f0de0789e90268bfa19ef8b51c06eebc
5972c642f0de0789e90268bfa19ef8b51c06eebc,5972c642,altos: Handle internal and external telem monitoring requests,"altos: Handle internal and external telem monitoring requests

Record separate internal vs external monitoring state, allowing
both to happen at the same time, and when either is turned off, the
other keeps working.

This also adds disable/enable so that other radio users can
temporarily take over the radio; monitoring will resume when the other
radio user is finished.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321152276,1321152276,ef7f86453d686a49882e8c1b88a59228c4c631a9
ef7f86453d686a49882e8c1b88a59228c4c631a9,ef7f8645,altos: Check pdata+xdata memory usage during build,"altos: Check pdata+xdata memory usage during build

The sdcc linker doesn't check the sum of pdata+xdata memory usage, it
only ensures that xdata itself is small enough. This doesn't keep
xdata below the end of usable ram on the cc1111 though (0xfe000).

Fix up the check-stack program to also make sure all of xdata fits in
available memory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321151873,1321151873,2bce71eba9f44b6fcf64e307c8174824c3a0fb57
2bce71eba9f44b6fcf64e307c8174824c3a0fb57,2bce71eb,altos: Set SPI fill value each time it is used.,"altos: Set SPI fill value each time it is used.

This ensures that the final MOSI pin value will be high after a
receive is finished.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321151569,1321151771,0a705b62829d492e3a48c81077907cee61afb860
0a705b62829d492e3a48c81077907cee61afb860,0a705b62,altos: Initialize DMA config address at boot time,"altos: Initialize DMA config address at boot time

Instead of resetting these each time a transfer is started, just set
them once at boot time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321151506,1321151506,4de8bf6da4d725bb0514d032b0708c5cf420e8fa
4de8bf6da4d725bb0514d032b0708c5cf420e8fa,4de8bf6d,altos: debounce buttons,"altos: debounce buttons

Provide API to clear out any button events that happen during startup,
and then discard button events 'too close' together.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321151456,1321151456,ad41b5820c2e252627959e4627473f07784be23e
ad41b5820c2e252627959e4627473f07784be23e,ad41b582,altos: Build TeleTerra v0.2 by default,"altos: Build TeleTerra v0.2 by default

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321151378,1321151378,f6db11c3c87725c809c518f5f19b07325faf9c84
f6db11c3c87725c809c518f5f19b07325faf9c84,f6db11c3,altosui: Deal with serial port exceptions a bit better,"altosui: Deal with serial port exceptions a bit better

This catches a few exceptions and tries to make sure the serial port
is closed afterwards.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321150218,1321150218,b132eefc5f63412bb4a98a4bb72b9055e40d5d42
b132eefc5f63412bb4a98a4bb72b9055e40d5d42,b132eefc,altos: Make ao_xmem funcs require __xdata void * instead of casting,"altos: Make ao_xmem funcs require __xdata void * instead of casting

Having an explicit cast in the ao_xmem wrapper macros caused the
compiler to generate garbage values for pdata addresses, making the
upper byte 0x00 instead of the required 0xf0. Removing the
casts from the ao_xmem macros exposed this problem, so a new
PDATA_TO_XDATA macros was added, along with a CODE_TO_XDATA macro
which serve to cast pointers, with suitable address modifications, so
that things work again.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321079417,1321079417,7ecde50fbebe68a2e2200a2f8d081fd37074f840
7ecde50fbebe68a2e2200a2f8d081fd37074f840,7ecde50f,altosui: Make UI Look&Feel configurable,"altosui: Make UI Look&Feel configurable

Saves the preferred style and uses that for all current and new windows.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321079062,1321079062,713bd503902526c17a7657c18be947ef8fa6a47a
713bd503902526c17a7657c18be947ef8fa6a47a,713bd503,altos: Shrink Skytraq NMEA parsing - common nmea_finish code,"altos: Shrink Skytraq NMEA parsing - common nmea_finish code

This shares the checksum testing across all three lines, saving
another 103 bytes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321060688,1321060688,d3e8275572550b700563b3bde73cd7a43b608f17
d3e8275572550b700563b3bde73cd7a43b608f17,d3e82755,altos: shrink Skytraq NMEA parsing more,"altos: shrink Skytraq NMEA parsing more

This cuts another 78 bytes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321060299,1321060299,8266d8d39c0103e68ef3e476b9639574d9a48771
8266d8d39c0103e68ef3e476b9639574d9a48771,8266d8d3,altos: Shrink code size of Skytraq NMEA parser,"altos: Shrink code size of Skytraq NMEA parser

Just mess around with the code to make it smaller. These patches save
173 bytes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1321059258,1321059364,df08b2f6de464f4546c1809b931eb4910d88b558
df08b2f6de464f4546c1809b931eb4910d88b558,df08b2f6,altos: A bunch of missing .gitignore files (mostly),"altos: A bunch of missing .gitignore files (mostly)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319702471,1319702502,a7b285ec0945830b8b31877115157ddd12d6a9fb
a7b285ec0945830b8b31877115157ddd12d6a9fb,a7b285ec,altos: Add i2c driver for avr chip,"altos: Add i2c driver for avr chip

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319702265,1319702265,0669f0d74fc24c4f1925a45a9975b7a49a65b692
0669f0d74fc24c4f1925a45a9975b7a49a65b692,0669f0d7,altosui: Only update GPS data when new GPS information arrives,"altosui: Only update GPS data when new GPS information arrives

Track which telemetry packets are actually producing new GPS
information and only update the GPS average position and count of
stable GPS reports with new GPS info, instead of on every telemetry packet.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319701763,1319701763,c7e14a2750d437e8b77d68a944a0711e7a0c882b
c7e14a2750d437e8b77d68a944a0711e7a0c882b,c7e14a27,altos: Fix distance/bearing computations. Deal with large values,"altos: Fix distance/bearing computations. Deal with large values

Lots of little math errors dealing with large distances; easily tested
as the GPS currently reports lat 24 lon 121, which is a long ways from
Portland.

Now reports distances in km when large, otherwise in m.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319700935,1319700935,da330c5975b9f565d059ef8084dfdacc20f34246
da330c5975b9f565d059ef8084dfdacc20f34246,da330c59,altos: Bring up basic TeleTerra v0.2 UI,"altos: Bring up basic TeleTerra v0.2 UI

Lots of fun stuff here -- multiple panes of information.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319694551,1319694551,8e4cceedb5b758faae684978299e667c4bb06f4d
8e4cceedb5b758faae684978299e667c4bb06f4d,8e4cceed,altos: Flip button IRQ initialization around,"altos: Flip button IRQ initialization around

This matches what the docs suggest

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319408642,1319408642,90e738a3379d258a48a7c92f6708040fc39c373a
90e738a3379d258a48a7c92f6708040fc39c373a,90e738a3,altos: Fix battery voltage computation.,"altos: Fix battery voltage computation.

Full scale is 4.95V, not 3.333V.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319408450,1319408450,f70553106707e3496d07eecb83f0c0a1acad7f77
f70553106707e3496d07eecb83f0c0a1acad7f77,f7055310,altos: Add battery voltage sampling driver,"altos: Add battery voltage sampling driver

For devices without a full ADC compliment, this just samples the
battery pin and converts to mV.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319406692,1319406692,7e7a10c06a0486e9f869e361e46f2c98db9897b0
7e7a10c06a0486e9f869e361e46f2c98db9897b0,7e7a10c0,altos: Add button driver and sample user,"altos: Add button driver and sample user

Hook up the teleterra buttons and have them beep

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319404139,1319404139,8e2736226fcd7c1ab1ba93a5ebac9b285ebf4733
8e2736226fcd7c1ab1ba93a5ebac9b285ebf4733,8e273622,src/teleterra-v0.2: Initialize more hardware,"src/teleterra-v0.2: Initialize more hardware

Initialize the flash storage and flight state reporting beeper.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319399735,1319399735,07d4477b2e8477e96a2f155a25f95e14a9a47efa
07d4477b2e8477e96a2f155a25f95e14a9a47efa,07d4477b,altos/teleterra_0_2: Initialize LCD driver,"altos/teleterra_0_2: Initialize LCD driver

Initialize the LCD for testing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319399465,1319399465,85b259c5bba7edbd2a79471bb1104bcf3904d536
85b259c5bba7edbd2a79471bb1104bcf3904d536,85b259c5,src/teleballoon-v1.1: Use Tm style initial state stuff,"src/teleballoon-v1.1: Use Tm style initial state stuff

Come up in pad mode unless someone talks to us while in idle mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319234306,1319234306,eb61f7aa2c8b692bd892b85e782f249187c80e5c
eb61f7aa2c8b692bd892b85e782f249187c80e5c,eb61f7aa,altos: Add teleballoon-v1.1 directory,"altos: Add teleballoon-v1.1 directory

This is an alternate firmware load for telemetrum v1.1.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1319221843,1319221914,a10aa835a06b71e2cefeb6b10daaf8cc394603b6
a10aa835a06b71e2cefeb6b10daaf8cc394603b6,a10aa835,altos: Add LEGACY_MONITOR defines to more programs,"altos: Add LEGACY_MONITOR defines to more programs

Make all monitoring programs define whether they want all of the old
telemetry formats too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318744480,1318744480,aef732fc9cdf527a18f2959d6fb7903e832209da
aef732fc9cdf527a18f2959d6fb7903e832209da,aef732fc,ao-bringup: Make it build with source restructuring,"ao-bringup: Make it build with source restructuring

Source code all moved around, need to find the header files in new directories.x

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318744442,1318744442,0debe7ffc2aab2b4d08f42e488cb783ae91c36ab
0debe7ffc2aab2b4d08f42e488cb783ae91c36ab,0debe7ff,altos: Add TeleTerra v0.2 product,"altos: Add TeleTerra v0.2 product

This includes most of the necessary drivers.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318397453,1318397453,65873a3ad1d8e8b5ec002be2576c6f496543306a
65873a3ad1d8e8b5ec002be2576c6f496543306a,65873a3a,altos: oops -- forgot to add the cc1111 string code,"altos: oops -- forgot to add the cc1111 string code

This is required for all cc1111 builds now; it provides xdata string
functions.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318397364,1318397364,badda0d910c56135401dce9adc9e6abebdba2ad7
badda0d910c56135401dce9adc9e6abebdba2ad7,badda0d9,altos: Split out arch-specific bits of LCD driver,"altos: Split out arch-specific bits of LCD driver

The arch-specific section just puts a single nibble to the device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318397282,1318397282,47c2c0b79dc516d2566ae149605b7d70ef2dca98
47c2c0b79dc516d2566ae149605b7d70ef2dca98,47c2c0b7,Bump to 1.0.9.3,"Bump to 1.0.9.3

TeleScience and TelePyro now work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318388284,1318388284,652c024ed37bfed5de17f45c772796d5cbe4599f
652c024ed37bfed5de17f45c772796d5cbe4599f,652c024e,altos/telescience: Add more header dependencies,"altos/telescience: Add more header dependencies

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318380535,1318381052,75960500d1f290fa9f82183431443ac122f12c19
75960500d1f290fa9f82183431443ac122f12c19,75960500,altos/avr: telescience doesn't have room for the flash write code,"altos/avr: telescience doesn't have room for the flash write code

This is useful for debugging the SPI and flash drivers, but not
necessary in production code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318380491,1318381052,b80f8ffb61566cbd134c399ea6ccf9290075490b
b80f8ffb61566cbd134c399ea6ccf9290075490b,b80f8ffb,altos/avr: Must leave space for init stack in ram,"altos/avr: Must leave space for init stack in ram

The stack used during system initialization lives at the top of RAM,
so leave some space for that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318380351,1318381052,f1573a752425121d4c6a14285f1eb0fef3a8bea5
f1573a752425121d4c6a14285f1eb0fef3a8bea5,f1573a75,altos/avr: Shrink default stack size to use less ram,"altos/avr: Shrink default stack size to use less ram

Not that we have any way of knowing how much stack we're using, but at
least this seems to work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318380288,1318381052,cb837d9bb9e6736fcdfca7692b1f9490ea090838
cb837d9bb9e6736fcdfca7692b1f9490ea090838,cb837d9b,altos: Allow ao_science_slave to not log data,"altos: Allow ao_science_slave to not log data

This is mostly for debugging with flash writes disabled.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318378380,1318381052,ac0bebc44bc657b303db4c41fa0c9624f3df9f4f
ac0bebc44bc657b303db4c41fa0c9624f3df9f4f,ac0bebc4,altos: Make HAS_STORAGE_DEBUG define consistent,"altos: Make HAS_STORAGE_DEBUG define consistent

This allows products to include the 'w' command for testing flash
writing as needed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318378316,1318381052,3a28846d3ff8f82b0e97c211b9debf6d67ee5af5
3a28846d3ff8f82b0e97c211b9debf6d67ee5af5,3a28846d,altos/avr: Clear SPI receive buffer before clocking new data in,"altos/avr: Clear SPI receive buffer before clocking new data in

I don't know why this is necessary, but the receive buffer gets
'extra' data added somehow.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318378245,1318381052,e60c470b426b7be08a33133e7d8c94201d7e96d4
e60c470b426b7be08a33133e7d8c94201d7e96d4,e60c470b,altos/avr: Pull-up on the SPI slave select pin,"altos/avr: Pull-up on the SPI slave select pin

This makes the board work even when disconnected from TeleMetrum.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318376680,1318381052,af4470f8025116179ef83726a8287e47c465907b
af4470f8025116179ef83726a8287e47c465907b,af4470f8,altos/avr: Register stdio handler when using serial for stdin,"altos/avr: Register stdio handler when using serial for stdin

This code was left in a bit of a mess; just clean it up.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318376642,1318376642,3bda859caf1501f8408703dca81412d70ba00e04
3bda859caf1501f8408703dca81412d70ba00e04,3bda859c,altos/avr: telescience does not have a serial port,"altos/avr: telescience does not have a serial port

The USART is used for SPI to talk to the flash part.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318376544,1318376544,0a186e92c5773c5d908e9cee889d645a8172dcdc
0a186e92c5773c5d908e9cee889d645a8172dcdc,0a186e92,altos/avr: Make ao_arch_critical argument be a statement,"altos/avr: Make ao_arch_critical argument be a statement

Wrap the argument to ao_arch_critical in do { } while (0); to make
sure it gets correctly checked as a statement.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318376375,1318376375,f3453068b0feb640b9d11dbeb021c535ce8b4a31
f3453068b0feb640b9d11dbeb021c535ce8b4a31,f3453068,altos/avr: Print newline after dumping ADC values,"altos/avr: Print newline after dumping ADC values

Cleans up the formating a bit.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318376346,1318376346,06b044629951b06c7ec9b0105b89f51b2880ebd0
06b044629951b06c7ec9b0105b89f51b2880ebd0,06b04462,"altos/avr: SPI mutex is now held by the caller, not the SPI driver","altos/avr: SPI mutex is now held by the caller, not the SPI driver

SPI transactions generally require a read followed by a write, with
the chip select held the whole time. As a result, the SPI bus must be
held across multiple transactions. To make this reliable, the caller
must hold the SPI mutex, instead of the underlying SPI driver.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318370584,1318370584,5d1361c95f94125cda244b4cc5e55c2fb77b680b
5d1361c95f94125cda244b4cc5e55c2fb77b680b,5d1361c9,altosui: Deal with missing state transitions in FlightStats window,"altosui: Deal with missing state transitions in FlightStats window

Any missing start/end times are pinned to the end of the flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318180165,1318180165,5c82b07471f017171c58a6968adf79901f46a987
5c82b07471f017171c58a6968adf79901f46a987,5c82b074,altosui: Deal with telem data that goes backwards in time,"altosui: Deal with telem data that goes backwards in time

The new telemetry stuff can send packets with older timestamps, so
sort telem packets read from disk to create an in-order record of the flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318179304,1318180151,636b7b368e67346b0796cd84fbfd71e10966d61f
636b7b368e67346b0796cd84fbfd71e10966d61f,636b7b36,altos: Respond to telemetry rate changes immediately,"altos: Respond to telemetry rate changes immediately

Instead of waiting for the previous telemetry interval to expire,
immediately switch to the new telemetry rate. This will provide
more telemetry data early in the boost.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318177316,1318177316,ca036c5616c3e745c0b878ed90618d4ff710c0e5
ca036c5616c3e745c0b878ed90618d4ff710c0e5,ca036c56,altos: Improve TM v1.0 apogee estimate,"altos: Improve TM v1.0 apogee estimate

v1.0 boards have noisy accelerometer data caused by interactions
between RF transmission and the accelerometer measurements; this noise
generates a negative bias in the accelerometer readings. The net
effect is that the estimated speed is lower than the actual speed,
causing early an apogee estimate.

By increasing the sigma value for accelerometer data, the kalman
filter 'trusts' the acceleration data less, putting more weight on the
barometer data. This causes the estimated time of apogee to be closer
to the correct value.

This reduces the response to changes in acceleration.

This new value is applied solely to TeleMetrum v1.0 boards. v1.1
boards correct for this error, and hence can use the correct sigma
value for the accelerometer.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318133992,1318134196,26d7eb7149da8c797d7e704d75f73af2d2aa52c2
26d7eb7149da8c797d7e704d75f73af2d2aa52c2,26d7eb71,Bump to 1.0.9.2,"Bump to 1.0.9.2

(1.1 RC 2). Flown at Oktoberfest 2011 on 10/09/2011 (we hope)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318131094,1318131094,aad03e3cab4c328e53d3df47b6dac1d3f7a49229
aad03e3cab4c328e53d3df47b6dac1d3f7a49229,aad03e3c,altosui: Remove igniter voltages from chart.,"altosui: Remove igniter voltages from chart.

These are just annoying; when we add the ability to turn stuff on/off
on the fly, we can add them to the list of available items.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318111677,1318111677,6a7363b3ba99310bd44c9b66f6f5159e46762be4
6a7363b3ba99310bd44c9b66f6f5159e46762be4,6a7363b3,altos: Ignore ejection bumps when doing boost re-detect,"altos: Ignore ejection bumps when doing boost re-detect

An ejection charge looks an awful lot like an extra (really small)
motor burn. Ignore them by averaging the acceleration during
fast/coast using a /64 exponential decay filter.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318096265,1318096774,82604193ed0c522c1fba0072b504fe88b027f1ee
82604193ed0c522c1fba0072b504fe88b027f1ee,82604193,ao-telem: Add new program to convert telem data to ascii,"ao-telem: Add new program to convert telem data to ascii

This reads telem files and displays them in ascii form. It's not done,
and it's not documented, but it's a start.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318096224,1318096224,cbf5a649c8b7101bef9d57e48e42ac775e758c79
cbf5a649c8b7101bef9d57e48e42ac775e758c79,cbf5a649,altosui: Allow for multiple instances of each state in the graph,"altosui: Allow for multiple instances of each state in the graph

With the new boost re-detect code, we can get multiple instances of
boost/fast/coast, so make sure each are displayed in the graph.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318095998,1318095998,f9b0b7423c0640f729d61a91de6ff96ffe4b486e
f9b0b7423c0640f729d61a91de6ff96ffe4b486e,f9b0b742,altosui: Max acceleration across boost instead of all ascent,"altosui: Max acceleration across boost instead of all ascent

This ignores ejection bumps, making the max acceleration far more useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318095817,1318095817,258b75498916183ed250d3abb3282fe3d843e7a1
258b75498916183ed250d3abb3282fe3d843e7a1,258b7549,altos: Write xdata versions of memory functions,"altos: Write xdata versions of memory functions

These are significantly smaller than the general pointer versions from
libc on the cc1111.

Signed-off-by: Keith Packard <keithp@keithp.com>

Conflicts:

	src/Makefile.proto
	src/cc1111/ao_adc.c
	src/cc1111/ao_packet_master.c
	src/core/ao.h

Fix up the new makefiles
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1318002789,1318002872,128bbfa150f88c09f7adde2434b7bf0b5a9ed556
128bbfa150f88c09f7adde2434b7bf0b5a9ed556,128bbfa1,Merge remote-tracking branch 'origin/simple-quiet' into multiarch,"Merge remote-tracking branch 'origin/simple-quiet' into multiarch

Conflicts:
	configure.ac

fix version number
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1317998516,1317998516,"f6f54d70b768dca1715ddddea64a4df00d82b09e,246864b0597ddd397aba39be1fe39df0df189433"
f6f54d70b768dca1715ddddea64a4df00d82b09e,f6f54d70,Merge remote-tracking branch 'uniarch/master' into multiarch,"Merge remote-tracking branch 'uniarch/master' into multiarch

Conflicts:
	src/core/ao_cmd.c

Use ao_arch_reboot after waiting for a second
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1317998414,1317998414,"1c344b760776cd5d8c0297d8db9bf02687381b4e,0d10e25766b96f5660e213115cf27b71ff164405"
0d10e25766b96f5660e213115cf27b71ff164405,0d10e257,altos: TM: Don't turn on packet slave mode until idle/invalid state,"altos: TM: Don't turn on packet slave mode until idle/invalid state

Leave the packet link disabled until we've checked the
accelerometer. That way, we cannot accidentally get to idle mode when
the rocket is on the rail.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1317182814,1317998222,fba1d605a627d03f9587ec060c45fb5d3e96aaeb
fba1d605a627d03f9587ec060c45fb5d3e96aaeb,fba1d605,altos: Delay reboot by a second to avoid re-entering idle mode,"altos: Delay reboot by a second to avoid re-entering idle mode

TM and Tm go into idle mode if they receive a packet after boot
time. When tebooting the device over the packet link, the packet
master would be (rapidly) polling the device for additional data and
so the device would invariably receive a packet during bootup and go
into idle mode again.

Delay the reboot by a second to give the controller time to disable
the master end of the packet link.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1317063028,1317998222,fc4173ff882dd9718f34ed043276ef612783dfe0
1c344b760776cd5d8c0297d8db9bf02687381b4e,1c344b76,Merge remote-tracking branch 'origin/master' into multiarch,"Merge remote-tracking branch 'origin/master' into multiarch

Conflicts:
	configure.ac

Fix version number and location of ao.h header
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1317998099,1317998099,"4ed53ef838afd4e922deb1c721a311974527525a,fc4173ff882dd9718f34ed043276ef612783dfe0"
fc4173ff882dd9718f34ed043276ef612783dfe0,fc4173ff,add run-time dependency on libjfreechart-java,"add run-time dependency on libjfreechart-java
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1317106748,1317106748,989aae5b18856e3420ea5b7a26ddd8dccae9d6d3
989aae5b18856e3420ea5b7a26ddd8dccae9d6d3,989aae5b,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1316900099,1316900099,"0552fbed34c9698dac30c239df2a823a8502b3f3,e44f1ffb7104d70f5c9b9a90529ddbe1b75da074"
0552fbed34c9698dac30c239df2a823a8502b3f3,0552fbed,"include 1.0.1 release notes in docs, closes: #642705","include 1.0.1 release notes in docs, closes: #642705
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314745193,1316900056,5c3a0263d292cb0675f608d0ef085d13e51ce6ba
4ed53ef838afd4e922deb1c721a311974527525a,4ed53ef8,altos: Debug code for telepyro doesn't fit in telescience,"altos: Debug code for telepyro doesn't fit in telescience

Just too many strings.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1316798673,1316798673,f1328d22aab4378c4fb6f0c24dbee95948ca836c
f1328d22aab4378c4fb6f0c24dbee95948ca836c,f1328d22,Dump test conversion of ADC0,"Dump test conversion of ADC0
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1316672464,1316672464,9b498a6b1327f543c73145e02ff16e76d09f2fe4
9b498a6b1327f543c73145e02ff16e76d09f2fe4,9b498a6b,Dump ADC registers,"Dump ADC registers
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1316670896,1316671027,7bc007ed45af8fe9ef5daeb7844f183cd9a49035
7bc007ed45af8fe9ef5daeb7844f183cd9a49035,7bc007ed,altos: Fix make-kalman to run under dash,"altos: Fix make-kalman to run under dash

Dash can't deal with >&, so use the old-school > file 2>&1

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1316654035,1316671026,74d5dea5d5ef91db823018b631613d15c6da085d
74d5dea5d5ef91db823018b631613d15c6da085d,74d5dea5,fix bashism that prevents building with /bin/sh->/bin/dash,"fix bashism that prevents building with /bin/sh->/bin/dash
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1316644972,1316644972,f68f22f527104cdffa1f5e398a51a466a13ff1fb
f68f22f527104cdffa1f5e398a51a466a13ff1fb,f68f22f5,add missing sense_h entry in TelePyro table,"add missing sense_h entry in TelePyro table
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1316644942,1316644942,16aa67fc77b82a9d051f205037b27a5384e3e3b7
16aa67fc77b82a9d051f205037b27a5384e3e3b7,16aa67fc,altos: missing ao_log_single.c,"altos: missing ao_log_single.c

Neglected to add this file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1316640270,1316640270,7a02d4bace05cc829522933b9df6b82a9e17336f
7a02d4bace05cc829522933b9df6b82a9e17336f,7a02d4ba,altos: Add TelePyro v0.1 support,"altos: Add TelePyro v0.1 support

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1316629843,1316630705,0820f5c6dfe067590f36e8201a4049719dcf3d7c
0820f5c6dfe067590f36e8201a4049719dcf3d7c,0820f5c6,altos: Support staging by going back to boost as needed,"altos: Support staging by going back to boost as needed

Detect additional motor burns by looking for high positive
acceleration in coast or fast modes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1316630456,1316630705,c8a00bb9ccdf0d4257f037c2bf996ce5e6b0b0c0
c8a00bb9ccdf0d4257f037c2bf996ce5e6b0b0c0,c8a00bb9,altos: Pre-compute RDF packet len at compile time,"altos: Pre-compute RDF packet len at compile time

Instead of computing the RDF packet len at run time, which takes a
pile of code space.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1316630364,1316630705,abf17522c206b465375b73a004a6d67bfa714ba3
abf17522c206b465375b73a004a6d67bfa714ba3,abf17522,altos: SPI slave code is now per-product,"altos: SPI slave code is now per-product

We can't write general purpose SPI slave code as we must eliminate
any latency because the SPI ports have no buffering.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1316630171,1316630704,b2d4e49bfe88aa61ca36fb1af8f3088c5754304c
246864b0597ddd397aba39be1fe39df0df189433,246864b0,Update to version 1.0.2,"Update to version 1.0.2

Bdale is planning to fly this version on 9/17.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1316222876,1316222876,eaa7d7c7dd445ade7d8e3228306785f9a545b89a
eaa7d7c7dd445ade7d8e3228306785f9a545b89a,eaa7d7c7,altos: Silence radio while firing igniters,"altos: Silence radio while firing igniters

Hold the radio mutex while firing igniters to reduce potential
interactions between the two.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1315151356,1315151356,d1e81db87ce0f89fd0b7651ca00979498cd00b78
d1e81db87ce0f89fd0b7651ca00979498cd00b78,d1e81db8,altos: Delay restart of RDF at apogee,"altos: Delay restart of RDF at apogee

Instead of immediately trying to send RDF at apogee, start it after
the usual RDF interval to avoid doing RDF while firing the apogee igniter.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1315151285,1315151285,93b8f40bb451c9ec152490d1f431ab18f8ecb7d1
e44f1ffb7104d70f5c9b9a90529ddbe1b75da074,e44f1ffb,include 1.0.1 release notes in docs,"include 1.0.1 release notes in docs
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314745193,1314745193,5c3a0263d292cb0675f608d0ef085d13e51ce6ba
b2d4e49bfe88aa61ca36fb1af8f3088c5754304c,b2d4e49b,altos: Split avr clock initialization to ao_clock.c,"altos: Split avr clock initialization to ao_clock.c

This will be shared with the attiny code for TeleTerra v0.1

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314652939,1314652939,e66fd72664aae7c000dce9c528803e28e7918fdf
e66fd72664aae7c000dce9c528803e28e7918fdf,e66fd726,altos: don't beep igniter continuity for telenano,"altos: don't beep igniter continuity for telenano

Without any igniters, it's not nice to annoy people.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314576206,1314576206,122c4101164d598e655fa9ad8473053d30ff4212
122c4101164d598e655fa9ad8473053d30ff4212,122c4101,altos: Report continuity in telebt,"altos: Report continuity in telebt

Report continuity values from remote altimeter

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314575755,1314575755,9b9568a637ffdbc67225271005f2b996ee08a0df
9b9568a637ffdbc67225271005f2b996ee08a0df,9b9568a6,altos: add 'report' to telebt,"altos: add 'report' to telebt

This beeps out flight state changes and max altitude at landing, just
like the altimeter.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314574781,1314574781,31e3255b6cbfaf95c0e97e2d1ec8de72f845994c
31e3255b6cbfaf95c0e97e2d1ec8de72f845994c,31e3255b,altosui: Report error message back from libaltos,"altosui: Report error message back from libaltos

This includes changing all of the error dialogs to show the error
message rather than just the file name.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314571830,1314571830,cf72c2f5a69a736c28a9b63e124d510ef41a9f5d
cf72c2f5a69a736c28a9b63e124d510ef41a9f5d,cf72c2f5,altosui: Add bluetooth bits back in,"altosui: Add bluetooth bits back in

Stub out functions on mac/windows for now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314571801,1314571801,3d478a39f2ede7b805bbe568cc1c8ecc176d7a04
3d478a39f2ede7b805bbe568cc1c8ecc176d7a04,3d478a39,"altos: Add the BT serial debug code back in, disabled","altos: Add the BT serial debug code back in, disabled

This code is useful whenever the BT stuff is acting up, so just leave
the source in place, turned off by default.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314571505,1314571505,8eaa1c4697a3cfc2406e1adadc3094f7f712341a
8eaa1c4697a3cfc2406e1adadc3094f7f712341a,8eaa1c46,altos: Add pragma to eliminate unreachable code warning on SDCC,"altos: Add pragma to eliminate unreachable code warning on SDCC

This pragma was removed as GCC doesn't support it; make it conditional
on SDCC so that we eliminate a warning message.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314571412,1314571412,7c6a3195dec6ac68f5d7b3f883ccc2c316384e76
7c6a3195dec6ac68f5d7b3f883ccc2c316384e76,7c6a3195,altos: Blink on telem packet receive instead of toggle,"altos: Blink on telem packet receive instead of toggle

Toggling the LED was too confusing; just blink for 100ms each time a
packet comes in.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314571345,1314571345,cff737c290347b61ba16584880c2f4c436b95042
cff737c290347b61ba16584880c2f4c436b95042,cff737c2,altos: Remove RSSI reporting from telebt,"altos: Remove RSSI reporting from telebt

Telebt uses one LED for bluetooth connection and the other for telem
packet reception leaving none for RSSI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314571240,1314571240,27835686648e14b030f6f7ec1fc0c0fd1c387ea4
27835686648e14b030f6f7ec1fc0c0fd1c387ea4,27835686,altos: Add RSSI blinking to new-style telemetry code,"altos: Add RSSI blinking to new-style telemetry code

Pull the RSSI data out locally and set the RSSI led blinking when
using the variable-length TELEM output mechanism.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314571092,1314571092,6f231a3e512ff7fdd87a399a72c7c36f283394f3
6f231a3e512ff7fdd87a399a72c7c36f283394f3,6f231a3e,Bump version to 1.0.9.0,"Bump version to 1.0.9.0

Make it distinct from any production version

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314570041,1314570041,e53557373e539d591a03d02db146b27d08c7eba3
e53557373e539d591a03d02db146b27d08c7eba3,e5355737,altos: Start logging telemetry data right at boot time,"altos: Start logging telemetry data right at boot time

Anything logging telemetry data should just start logging packets as
soon as they boot.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314569909,1314569909,b33a92e372327158ab21c1bb2d091c58761efe10
5c3a0263d292cb0675f608d0ef085d13e51ce6ba,5c3a0263,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314560377,1314560377,93b8f40bb451c9ec152490d1f431ab18f8ecb7d1
b33a92e372327158ab21c1bb2d091c58761efe10,b33a92e3,altos: Share log code between telescience and telebt. Add telebt log,"altos: Share log code between telescience and telebt. Add telebt log

Telescience and telebt both log data in 32-byte chunks, so share some
code which manages that between the two products. Add simple telemetry
logging to telebt.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314483583,1314483583,7e2b5e2957ddcb808723081ca7e046a28b7e70e5
7e2b5e2957ddcb808723081ca7e046a28b7e70e5,7e2b5e29,altosui: launch controller button needs to move over,"altosui: launch controller button needs to move over

monitor idle was inserted into position 2,2

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314477034,1314477034,bc827699be4ed9ac60a7e862e6532791968bf685
bc827699be4ed9ac60a7e862e6532791968bf685,bc827699,altos: Fix up telelaunch Makefile,"altos: Fix up telelaunch Makefile

Adding all of the mising sources

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314476881,1314476881,8a1cbef0e316e38c80b71d3bac15641fe56e0a99
8a1cbef0e316e38c80b71d3bac15641fe56e0a99,8a1cbef0,altos: Add HAS_LOG for products that log to eeprom,"altos: Add HAS_LOG for products that log to eeprom

Some products have eeprom for config, but none for logging (like telelaunch)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314476848,1314476848,6afbc1876cd63f64e8975e300692f95a43866f5f
6afbc1876cd63f64e8975e300692f95a43866f5f,6afbc187,altos: ao_launch belongs in cc1111,"altos: ao_launch belongs in cc1111

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314476820,1314476820,9adf2c9c40ea1da2637ed809dc0d004e47844440
9adf2c9c40ea1da2637ed809dc0d004e47844440,9adf2c9c,"altos: add ao_aes/radio_cmac to tidongle, teledongle and telebt","altos: add ao_aes/radio_cmac to tidongle, teledongle and telebt

All of these can do the telelco stuff at this point.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314476723,1314476723,b3c95582774355c991d0a9f27d0a86881e643e62
b3c95582774355c991d0a9f27d0a86881e643e62,b3c95582,altos: move igniter defines back to ao_pins.h,"altos: move igniter defines back to ao_pins.h

so that ao_launch gets them too

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314476681,1314476681,6b2db651a1dbc7ea97fce802b5f10b88be1ab42b
6b2db651a1dbc7ea97fce802b5f10b88be1ab42b,6b2db651,altos: Add makefile for telelaunch,"altos: Add makefile for telelaunch

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314474130,1314474336,02df2141e5a67afc16acd01a6c60f3cc61052b93
02df2141e5a67afc16acd01a6c60f3cc61052b93,02df2141,altosui: Hook up the launch controller UI from the main button box,"altosui: Hook up the launch controller UI from the main button box

Provide a button to start the launch controller UI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312263943,1314474336,4568bc796a6c362ebf7f72ee9a5fa4a9a3c4ba6a
4568bc796a6c362ebf7f72ee9a5fa4a9a3c4ba6a,4568bc79,altosui: Add primitive UI for TeleLaunch,"altosui: Add primitive UI for TeleLaunch

Display status along with arm and fire buttons.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312243704,1314474336,be117376179126824439d98379079025ca0b245a
be117376179126824439d98379079025ca0b245a,be117376,altos: Keep relay closed while firing launcher,"altos: Keep relay closed while firing launcher

Instead of opening the relay while checking the desired state, keep it
closed until the state goes off.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312243609,1314474336,bc1b94df4d6b92e794ec93d9c1682ae5f61efa61
bc1b94df4d6b92e794ec93d9c1682ae5f61efa61,bc1b94df,altos: Finish up primitive telelaunch protocol,"altos: Finish up primitive telelaunch protocol

This adds two commands to teledongle, one to query and one to actually
fire the igniter. These will (eventually) want to be replaced with
something nicer.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1311312345,1314474336,4299b5a36a2f6f9f7bbbc3a1b935dd2357c1fb0f
4299b5a36a2f6f9f7bbbc3a1b935dd2357c1fb0f,4299b5a3,altos: Implement remote launch protocol,"altos: Implement remote launch protocol

Uses the radio_cmac module to provide secure communication.
Keeps igniter closed for 500ms.
Provides remote status for arming and ignition.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1311303845,1314474333,776df9ce2e7b4fa5cedda326988e66c614299af4
776df9ce2e7b4fa5cedda326988e66c614299af4,776df9ce,altos: Get AES CBC-MAC packet transfers running,"altos: Get AES CBC-MAC packet transfers running

This just has simple command-line based packet transfers for testing.

This also adds special ao_telelaunch bits where the launch control
code will live.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1311230764,1314473626,bd0bf00081bb24af5cd67a9351b0b0c1a041d0d3
bd0bf00081bb24af5cd67a9351b0b0c1a041d0d3,bd0bf000,altos: More work on AES bits,"altos: More work on AES bits

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310851501,1314473626,a731d240f802d37524ce84c3c6acf22bcda4d522
a731d240f802d37524ce84c3c6acf22bcda4d522,a731d240,altos: Start work on AES and raw radio interfaces.,"altos: Start work on AES and raw radio interfaces.

We probably don't want this raw radio interface, but it's a start.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310781093,1314473626,f145be3fc4ee94fdb5c1e2406b6c11d38bdbbd9b
f145be3fc4ee94fdb5c1e2406b6c11d38bdbbd9b,f145be3f,altos: Start telelaunch product,"altos: Start telelaunch product

Looks a lot like TM, but without the flight code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310612507,1314473626,859ee0268b9f2e1f5933019f1231d857a1cac4da
859ee0268b9f2e1f5933019f1231d857a1cac4da,859ee026,altosui: Add USB IDs for telelaunch and telelco to java bits,"altosui: Add USB IDs for telelaunch and telelco to java bits

telelaunch is 0x000f
telelco is 0x0010

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310612398,1314473617,b10fbbf0830053a39e4640a53598b1c027615c63
b10fbbf0830053a39e4640a53598b1c027615c63,b10fbbf0,altos: Add 'send all baro' compile-time option,"altos: Add 'send all baro' compile-time option

This option creates a new packet type that delivers full sensor-rate
barometer telemetry data to allow for off-line analysis of flight
algorithms using all of the data, rather than the slower rate provided
either over telemetry or stored in the eeprom file.

Define AO_SEND_ALL_BARO and this will get built in. Perhaps this could
be a run-time option...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312263853,1314472361,1c46c419704f661064d200432eb7efeeb11b3859
1c46c419704f661064d200432eb7efeeb11b3859,1c46c419,altos: re-order ao_task to match single-arch code,"altos: re-order ao_task to match single-arch code

This is just for testing to make the new build match the old build
exactly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314416807,1314417385,c32893ce79835a8f861d6ef414644c2ff9769ff6
c32893ce79835a8f861d6ef414644c2ff9769ff6,c32893ce,altos: Integrate telescience support,"altos: Integrate telescience support

Adds a few drivers including an LCD driver

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314396163,1314417385,8125acc030574afed6f23aa8aa302d9c768bb04e
93b8f40bb451c9ec152490d1f431ab18f8ecb7d1,93b8f40b,more release process doc updates,"more release process doc updates
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314377575,1314377575,9451ae5e4ea6ecfa512ba93197351682d4d043dc
9451ae5e4ea6ecfa512ba93197351682d4d043dc,9451ae5e,update release process docs,"update release process docs
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314377478,1314377478,01aee9ebe517ed657692e0a39a31ae0ddfb5b8b0
01aee9ebe517ed657692e0a39a31ae0ddfb5b8b0,01aee9eb,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314376785,1314376785,bc399d97a8424a5262f66a03e3bc403f793bb337
bc399d97a8424a5262f66a03e3bc403f793bb337,bc399d97,roll back packaging changelog for rebuild,"roll back packaging changelog for rebuild
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314376724,1314376724,13e6e799070a1469cbc2ff990379ee520b8f0e6a
13e6e799070a1469cbc2ff990379ee520b8f0e6a,13e6e799,roll release notes version from 1.0 to 1.0.1,"roll release notes version from 1.0 to 1.0.1
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314376198,1314376198,1d15c841ad276127edae0345bd316c30731fffbf
1d15c841ad276127edae0345bd316c30731fffbf,1d15c841,ignore generated log file,"ignore generated log file
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314375875,1314375875,58a74c3c3dcd01509224326cffeb67a3e809e4e6
58a74c3c3dcd01509224326cffeb67a3e809e4e6,58a74c3c,fix telemini firmware path name,"fix telemini firmware path name
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314374835,1314374835,0a92eb2fa6b213533691288d8f99d72b80312983
0a92eb2fa6b213533691288d8f99d72b80312983,0a92eb2f,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314373386,1314373386,3cea033ec928c21b9f7b810898ed3c3cc536d2ce
3cea033ec928c21b9f7b810898ed3c3cc536d2ce,3cea033e,get ready for a 1.0.1 release,"get ready for a 1.0.1 release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314373306,1314373306,674231773256bacd7acb4b5718c47412e47b813f
674231773256bacd7acb4b5718c47412e47b813f,67423177,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314373021,1314373021,"08e3d54bacf8b38a7c33e420a0bc19bcc7acedd4,3bfe8df44b575ca430ffaa051e20faa955a06c03"
08e3d54bacf8b38a7c33e420a0bc19bcc7acedd4,08e3d54b,moving git-buildpackage config into .git/ since it is fairly specific to,"moving git-buildpackage config into .git/ since it is fairly specific to
Bdale's build environment, and doesn't need to be in the source package
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314372954,1314372954,93ecaf7f18f8f4c15953c2e80dc9e1b20d04fdfa
8125acc030574afed6f23aa8aa302d9c768bb04e,8125acc0,altos: get avr-demo to build. Pull in AVR drivers and LCD driver,"altos: get avr-demo to build. Pull in AVR drivers and LCD driver

This completes the basic task of making an AVR version of altos by
getting the Teensy 'avr-demo' program to build.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314338133,1314338244,e9fab7dc99a0e7c22b511c5919adf7df85213252
e9fab7dc99a0e7c22b511c5919adf7df85213252,e9fab7dc,"altos: add GCC/SDCC compat macros, init_stack, save_context and GCC stdio hooks","altos: add GCC/SDCC compat macros, init_stack, save_context and GCC stdio hooks

More arch-indepdency bits.

GCC stdio is different from SDCC, so create suitable code in
avr/ao_avr_stdio.c

Create macros to initialize the task stack frame and save the task
context.

Add GCC/SDCC type definition compatibility macros

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314335076,1314335076,a588092a7d76dab92e4ab11e0fdb457d2ddc9025
a588092a7d76dab92e4ab11e0fdb457d2ddc9025,a588092a,"altos: AVR changes - create ao_arch.h files, define ao_arch_reboot","altos: AVR changes - create ao_arch.h files, define ao_arch_reboot

Start pulling changes needed for avr port; architecture-specific code
will live in <architcture>/ao_arch.h. This first change defines
the ao_arch_reboot macro to reboot the microcontroller.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314331856,1314331856,9513be7f9d3d0b0ec29f6487fa9dc8f1ac24d0de
9513be7f9d3d0b0ec29f6487fa9dc8f1ac24d0de,9513be7f,altos: Restructure altos build to prepare for multi-arch support,"altos: Restructure altos build to prepare for multi-arch support

Split out sources into separate directories:

	core:		architecture and product independent bits
	cc1111:		cc1111-specific code
	drivers:	architecture independent drivers
	product:	product-specific sources and Makefile fragments
	util:		scripts for building stuff

This should have no effect on the built products, but testing is encouraged

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314330224,1314330551,3bfe8df44b575ca430ffaa051e20faa955a06c03
3bfe8df44b575ca430ffaa051e20faa955a06c03,3bfe8df4,altos: Clear callsign on initial config load,"altos: Clear callsign on initial config load

Before being written the first time, ao_config will get set to 0xff
when the config storage is read. This leaves the tail of the callsign
filled with invalid bytes. Zero the whole thing before loading the
default callsign to make sure any extra bytes are set correctly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314320565,1314320880,93ecaf7f18f8f4c15953c2e80dc9e1b20d04fdfa
93ecaf7f18f8f4c15953c2e80dc9e1b20d04fdfa,93ecaf7f,update TeleMini turnon script now that we've made a stable firmware release,"update TeleMini turnon script now that we've made a stable firmware release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314308790,1314308790,c3314dae2d3df82e188daf6ba8520cce833592c6
c3314dae2d3df82e188daf6ba8520cce833592c6,c3314dae,use multimaint-merge to make Debian changelogs less ugly,"use multimaint-merge to make Debian changelogs less ugly
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314264985,1314264985,f9d87de0e2681c2ec5753f4fffef0e61a3a9e144
f9d87de0e2681c2ec5753f4fffef0e61a3a9e144,f9d87de0,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314260573,1314260573,41998645c04a2ee856dec272b40c2dc5913291d3
41998645c04a2ee856dec272b40c2dc5913291d3,41998645,add a postinst to remove sources.list.d fragment delivered by old private,"add a postinst to remove sources.list.d fragment delivered by old private
versions of this package, no longer needed once we have official packages
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314260177,1314260177,d65e4f6b0a8ba8f67c8a916f2e8be0ec5c75f47d
d65e4f6b0a8ba8f67c8a916f2e8be0ec5c75f47d,d65e4f6b,"really, I mean it, no longer deliver the sources.list fragment","really, I mean it, no longer deliver the sources.list fragment
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314259549,1314259549,0579bd5de9e7686d227a16951dd520439ca5472b
0579bd5de9e7686d227a16951dd520439ca5472b,0579bd5d,we need a main category in the desktop file,"we need a main category in the desktop file
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314258932,1314258932,3ec03792adebbeadc9c0d4985c6f51877e8ab969
3ec03792adebbeadc9c0d4985c6f51877e8ab969,3ec03792,update desktop file for consistency with package section,"update desktop file for consistency with package section
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314258491,1314258491,0b1d5b678f0e36fbe09d4d3babffb77f857f098d
0b1d5b678f0e36fbe09d4d3babffb77f857f098d,0b1d5b67,rewind packaging changelog to last tagged version,"rewind packaging changelog to last tagged version
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314257851,1314257851,f0891fc2e4fa4fd6dd5c2bfc74e4514de986a295
f0891fc2e4fa4fd6dd5c2bfc74e4514de986a295,f0891fc2,"ao-view is no longer included in the altos package, so have the old-style","ao-view is no longer included in the altos package, so have the old-style
Debian menu entry point to altosui instead
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314257718,1314257718,a7ee1049519bf46b3864666999249876009fc3bf
a7ee1049519bf46b3864666999249876009fc3bf,a7ee1049,changes in preparation for upload to Debian,"changes in preparation for upload to Debian
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314257706,1314257706,2992184f7a032c95e22023080fbc26443ed786f5
2992184f7a032c95e22023080fbc26443ed786f5,2992184f,don't deliver sources.list fragment in official Debian packages,"don't deliver sources.list fragment in official Debian packages
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314257436,1314257436,3fc92a529dae410a41038cce38c6a44f5e58bd1f
3fc92a529dae410a41038cce38c6a44f5e58bd1f,3fc92a52,prepare to release,"prepare to release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314256307,1314256307,73abe19acf709c00f5352ec12e8cd6edae1d1963
73abe19acf709c00f5352ec12e8cd6edae1d1963,73abe19a,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

Conflicts:
	doc/altusmetrum.xsl
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314254089,1314254089,"1bd781da934c738e0c9294197c7eb622b0710a9a,5158493c8df527e7527057c719c75248609eb3dc"
1bd781da934c738e0c9294197c7eb622b0710a9a,1bd781da,more tweaks,"more tweaks
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314253967,1314253967,242344d3e32e7c7cd9270d708555923fa888e4d8
5158493c8df527e7527057c719c75248609eb3dc,5158493c,doc: Remove duplicate documentation about max flight log,"doc: Remove duplicate documentation about max flight log

This was described in detail in both the System Operation and AltosUI
chapters. Remove the duplicate from the AltosUI chapter.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314253262,1314253262,e268798dc260311f5f0167909481b41c9d27fc1c
e268798dc260311f5f0167909481b41c9d27fc1c,e268798d,Merge remote-tracking branch 'origin/master',"Merge remote-tracking branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314252404,1314252404,"458f816ad23fd6784757b13b244057d4be64260e,242344d3e32e7c7cd9270d708555923fa888e4d8"
458f816ad23fd6784757b13b244057d4be64260e,458f816a,"doc: Describe max flight log, ignite mode and pad orientation","doc: Describe max flight log, ignite mode and pad orientation

These describe what these configuration parmaeters do, not how to set them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314252361,1314252361,94a1b220bbfbb64b9772f3ee64a8e9d353d65e94
242344d3e32e7c7cd9270d708555923fa888e4d8,242344d3,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

Conflicts:
	doc/altusmetrum.xsl
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314251498,1314251498,"5c1cf7492b82e63a9db9d0238ecbcd2b59486893,94a1b220bbfbb64b9772f3ee64a8e9d353d65e94"
5c1cf7492b82e63a9db9d0238ecbcd2b59486893,5c1cf749,tweak tweak tweak,"tweak tweak tweak
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314251431,1314251431,edfb553bb4fa5b0c7c6c658505b2a99d05fb13bf
94a1b220bbfbb64b9772f3ee64a8e9d353d65e94,94a1b220,doc: Move the remaining command-mode descriptions to the appendix,"doc: Move the remaining command-mode descriptions to the appendix

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314250196,1314250327,edfb553bb4fa5b0c7c6c658505b2a99d05fb13bf
edfb553bb4fa5b0c7c6c658505b2a99d05fb13bf,edfb553b,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314249836,1314249836,"c74ab82a7b7a6ad6f79129a9ef5954270e7e8f11,ec96f11666f9cbd98e16caeccd5d399978bde81b"
c74ab82a7b7a6ad6f79129a9ef5954270e7e8f11,c74ab82a,more changes,"more changes
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314249825,1314249825,50769fbbeaaf61111d363411e0ef0b2868681cf4
ec96f11666f9cbd98e16caeccd5d399978bde81b,ec96f116,doc: Updating Firmware is now a separate chapter,"doc: Updating Firmware is now a separate chapter

The Flash Image paragraph references it, change the reference wording.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314249629,1314249629,11099fab63d32f53d0f2e04a7ab04392e39b5963
11099fab63d32f53d0f2e04a7ab04392e39b5963,11099fab,doc: Move updating device firmware section to separate chapter,"doc: Move updating device firmware section to separate chapter

This isn't central to operation of the devices, so move it out to a
separate chapter

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314249509,1314249509,50769fbbeaaf61111d363411e0ef0b2868681cf4
50769fbbeaaf61111d363411e0ef0b2868681cf4,50769fbb,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314249320,1314249320,"425fa995aeaccc1ec9ecf011f185b4406df61541,d92c173615a5fb0278ff6878595bed3f8d813e03"
425fa995aeaccc1ec9ecf011f185b4406df61541,425fa995,more tweaking,"more tweaking
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314249315,1314249315,65ca6f0d7c96432413868274b2cfdea4b76683e4
d92c173615a5fb0278ff6878595bed3f8d813e03,d92c1736,doc: use 'radio link' to refer to packet command mode,"doc: use 'radio link' to refer to packet command mode

Make sure 'radio link' doesn't refer to telemetry and eliminate use of
'RF link' and other similar but not identical phrases.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314249159,1314249159,65ca6f0d7c96432413868274b2cfdea4b76683e4
65ca6f0d7c96432413868274b2cfdea4b76683e4,65ca6f0d,more tweaks,"more tweaks
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314248603,1314248603,09981cd024297fd4ef093c7468de2b9d5f3c2691
09981cd024297fd4ef093c7468de2b9d5f3c2691,09981cd0,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314247359,1314247359,"a476e76622b6fa70bf7c8883d2a2a64a382fbd78,03c8b2702a45a12c4748cd1ec801d720c816d9e9"
a476e76622b6fa70bf7c8883d2a2a64a382fbd78,a476e766,more doc tweaks,"more doc tweaks
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314247353,1314247353,d4e1aa92b6ce2f3e4c51029595d1d44a7f2f14a0
03c8b2702a45a12c4748cd1ec801d720c816d9e9,03c8b270,doc: Move Packet Command Mode section to System Operations chapter,"doc: Move Packet Command Mode section to System Operations chapter

It makes far more sense here.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314247188,1314247188,221157af586c6fd7368ee858a390f38bc5ed50f5
221157af586c6fd7368ee858a390f38bc5ed50f5,221157af,doc: Describe packet command mode a bit better.,"doc: Describe packet command mode a bit better.

Include comments about TeleMini in the introduction, and then explain
a bit better what the best method of reliably initiating packet
command mode are (start operation, then boot telemini).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314246665,1314246875,d4e1aa92b6ce2f3e4c51029595d1d44a7f2f14a0
d4e1aa92b6ce2f3e4c51029595d1d44a7f2f14a0,d4e1aa92,more doc tweaking,"more doc tweaking
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314246455,1314246455,6eff8d5831dde8e690586cd2a97ddf1595cd2674
6eff8d5831dde8e690586cd2a97ddf1595cd2674,6eff8d58,doc: Document pad-mode 'on-board data logging' indicator,"doc: Document pad-mode 'on-board data logging' indicator

There wasn't any documentation for this field in the 'Launch Pad' tab.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314244768,1314244862,ca0879ba6e5295b4fa790705f742eb647a462ea0
ca0879ba6e5295b4fa790705f742eb647a462ea0,ca0879ba,doc: Spelling corrections in altusmetrum.xsl,"doc: Spelling corrections in altusmetrum.xsl

Lots of minor spelling errors.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314243729,1314243873,963649aa064acfe75d2ff4babd9a0d35dc254e86
963649aa064acfe75d2ff4babd9a0d35dc254e86,963649aa,doc tweaks through chap 3,"doc tweaks through chap 3
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314243561,1314243561,3d88e0493ab446d7c7011786390d30618a72d045
3d88e0493ab446d7c7011786390d30618a72d045,3d88e049,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314242786,1314242786,"02d65453225a3807e61b2ac6e2a26da31a05bd45,5a9972d41a87d4204c6c93cacf14e2962cc1c59c"
5a9972d41a87d4204c6c93cacf14e2962cc1c59c,5a9972d4,altos/windows: Get latest JRE 1.6 version (Version 6 update 27),"altos/windows: Get latest JRE 1.6 version (Version 6 update 27)

No reason to download stale java bits.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314242549,1314242549,cbfbaabb39f9f7709d00cf3dc63cc1bc7563062e
cbfbaabb39f9f7709d00cf3dc63cc1bc7563062e,cbfbaabb,altosui: Make flight monitor font size configurable,"altosui: Make flight monitor font size configurable

Tiny netbooks aren't tall enough for the 'usual' font size, so provide
a smaller option. Then provide a bigger option, just because.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314238383,1314239711,9849883a754a73b861dd7be530753ff5c2abb499
9849883a754a73b861dd7be530753ff5c2abb499,9849883a,altosui: Don't trust companion telemetry record 'channels' count,"altosui: Don't trust companion telemetry record 'channels' count

It can be bogus, allowing the code to walk off the end of the
allocated data array.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314175708,1314176687,4d94e8f9f807a0bbeab0cdead011e74eeca1d1b6
02d65453225a3807e61b2ac6e2a26da31a05bd45,02d65453,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314172382,1314172382,1d286dab223e6c44a25180f944ccb5ba8ed9d5f5
1d286dab223e6c44a25180f944ccb5ba8ed9d5f5,1d286dab,prepare for another rebuild,"prepare for another rebuild
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314172314,1314172314,82634eae16f9691a6c70a48d0858a399814631f2
82634eae16f9691a6c70a48d0858a399814631f2,82634eae,add pkg-config to the build deps,"add pkg-config to the build deps
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314172256,1314172256,cf2823cab40aa450375c108bae8ed6b051fbefe5
cf2823cab40aa450375c108bae8ed6b051fbefe5,cf2823ca,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314171928,1314171928,bf6f00693c394f885d3378415dc7c8a1815a31ed
bf6f00693c394f885d3378415dc7c8a1815a31ed,bf6f0069,roll changelog back in prep for another test build,"roll changelog back in prep for another test build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314171839,1314171839,06aee245eb74e839e50226fa2ddb967c3977fe7c
06aee245eb74e839e50226fa2ddb967c3977fe7c,06aee245,another test round,"another test round
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314171713,1314171713,4d94e8f9f807a0bbeab0cdead011e74eeca1d1b6
4d94e8f9f807a0bbeab0cdead011e74eeca1d1b6,4d94e8f9,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314171538,1314171538,"4b5369dc3da2fc8441eeacbf094537b0cf52240d,3b0a9a1c87390747492bfef435ac8e0829ec748f"
3b0a9a1c87390747492bfef435ac8e0829ec748f,3b0a9a1c,altosui: Try to get dialogs to look a little better,"altosui: Try to get dialogs to look a little better

grid bag constraints are not my friend.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314170976,1314170976,2165e82327faaada23f0503b8e49b80f938b746c
2165e82327faaada23f0503b8e49b80f938b746c,2165e823,altosui: Add tool-tips to config dialogs,"altosui: Add tool-tips to config dialogs

Provides more information about the various settings, and, when
they're disabled, tells the user why.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314169791,1314169791,63808e0392f43633f92fee137d968e969dd364c9
63808e0392f43633f92fee137d968e969dd364c9,63808e03,"Remove stale tools (ao-dumplog, ao-postflight, ao-view)","Remove stale tools (ao-dumplog, ao-postflight, ao-view)

These tools have all been supplanted by altosui at this point, and
keeping them around increases the build dependencies by quite a lot.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314166800,1314166800,186dfc7c72aa7eba281f29f917088e49e44c2ddc
186dfc7c72aa7eba281f29f917088e49e44c2ddc,186dfc7c,altosui: Use system look&feel,"altosui: Use system look&feel

Turn on the 'be less ugly bit'

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314165117,1314165266,192881b7cae49af375cc2b8b7305c937079ee724
4b5369dc3da2fc8441eeacbf094537b0cf52240d,4b5369dc,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314157037,1314157037,99316a17a9642a207c45610e7cc1c33c2600ece0
99316a17a9642a207c45610e7cc1c33c2600ece0,99316a17,rewind changelog to 0.9.6.0 for rebuild,"rewind changelog to 0.9.6.0 for rebuild
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314156833,1314156833,192881b7cae49af375cc2b8b7305c937079ee724
192881b7cae49af375cc2b8b7305c937079ee724,192881b7,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314151861,1314151861,fc7e46b1215ea2b4cc138ed77d8eaa122369b15f
fc7e46b1215ea2b4cc138ed77d8eaa122369b15f,fc7e46b1,turn off auto-tagging during Debian build,"turn off auto-tagging during Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314151814,1314151814,998adccc1c4f8f6c44833bbf4a52d9441748b996
998adccc1c4f8f6c44833bbf4a52d9441748b996,998adccc,altosui: add tool-tips to the button box.,"altosui: add tool-tips to the button box.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314150967,1314150967,754b9591574c12ddd6e4ab590c6a5f3806b80213
754b9591574c12ddd6e4ab590c6a5f3806b80213,754b9591,libaltos: fix Mac OS X function signatures,"libaltos: fix Mac OS X function signatures

altos_list_start was declared to take a (int time) parameter for some reason.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314131363,1314131363,fa6df3fa21e8f09e70371e6c6cc7827a533b4fe6
fa6df3fa21e8f09e70371e6c6cc7827a533b4fe6,fa6df3fa,altosui: Update mac os X library,"altosui: Update mac os X library

This has been tested on 32-bit OS X and it works; dunno about
64-bit.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314081328,1314081328,955989147f90a4fd22c1375d1b41425dae4e7dd1
955989147f90a4fd22c1375d1b41425dae4e7dd1,95598914,altosui: Reset all config data on 'reset' command,"altosui: Reset all config data on 'reset' command

This lets you switch altimeters without getting any stale data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314081295,1314081295,d249da3fb064754753bd20cd2ca1e5ffcce294ca
d249da3fb064754753bd20cd2ca1e5ffcce294ca,d249da3f,altosui: Only 'show' config dialog once,"altosui: Only 'show' config dialog once

Otherwise, the dialog jumps back to the initial position each time the
data is updated.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314081232,1314081232,e9254c3472e42d93181674b2c3cd80fe6eea696e
e9254c3472e42d93181674b2c3cd80fe6eea696e,e9254c34,altosui: fix 'magic' string to signal end of config data,"altosui: fix 'magic' string to signal end of config data

Was using ""done"", which happens to be displayed by the 'l'
command. Switch to 'all finished' which doesn't appear in the config
data output. Yes, this method is a kludge.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314081156,1314081156,4aebe65b089e4b825a5ae238b81e2181bd88175a
4aebe65b089e4b825a5ae238b81e2181bd88175a,4aebe65b,altosui: Can't configure flight log max on TeleMini,"altosui: Can't configure flight log max on TeleMini

It's only got space for one flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314081114,1314081114,3a84e8e0cc86481c301f4335843a0e1a94bad5c0
3a84e8e0cc86481c301f4335843a0e1a94bad5c0,3a84e8e0,altosui: Make monitor-idle display correct 'On-board data logging' status,"altosui: Make monitor-idle display correct 'On-board data logging' status

Count number of stored flights and see if there's space for another
one.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314079950,1314081055,afe6aba9cb91e93234ffee2a22eee40f848ddedd
afe6aba9cb91e93234ffee2a22eee40f848ddedd,afe6aba9,altosui: Add --summary option to dump flight stats to stdout,"altosui: Add --summary option to dump flight stats to stdout

useful for quickly capturing sense of a flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314062734,1314062734,4e2fd7ae76c23aa8da1390ebcbd8f45276cd7a32
4e2fd7ae76c23aa8da1390ebcbd8f45276cd7a32,4e2fd7ae,altosui: Show filename in AltosGraph window,"altosui: Show filename in AltosGraph window

Makes it easier to tell multiple windows apart

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314062694,1314062694,f4ea46dc205454411c224ada7805f813989efd4a
f4ea46dc205454411c224ada7805f813989efd4a,f4ea46dc,altosui: Add date/time/serial/flight to flight stats tab,"altosui: Add date/time/serial/flight to flight stats tab

And switch to using the AltosConvert units conversions functions.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314062621,1314062621,b4c71ba56c471720c72853057d0a527825a78fa0
b4c71ba56c471720c72853057d0a527825a78fa0,b4c71ba5,altosui: Capture date/time/serial/flight in AltosFlightStats,"altosui: Capture date/time/serial/flight in AltosFlightStats

Time is the time when boost was detected.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314062541,1314062541,5ef731bd87c6d2a71a4edcc69a218eaf1aa7c465
5ef731bd87c6d2a71a4edcc69a218eaf1aa7c465,5ef731bd,altosui: Add a few simple unit conversions,"altosui: Add a few simple unit conversions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314062495,1314062495,b83d8eca433ed5796835f6a09271f50c7f27cc81
b83d8eca433ed5796835f6a09271f50c7f27cc81,b83d8eca,doc: Add Installation Recommendations chapter,"doc: Add Installation Recommendations chapter

Document installation suggestions, including mounting, RFI, antenna
issues and ground testing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314058682,1314058806,a0f62b8569c5535a2598cfb6ab52db79f0a52f92
a0f62b8569c5535a2598cfb6ab52db79f0a52f92,a0f62b85,doc: Add note about telemetry disable mode to 1.0 release notes,"doc: Add note about telemetry disable mode to 1.0 release notes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1314058663,1314058806,393d231b9689cd1c358600ee76e0e808f89670c8
393d231b9689cd1c358600ee76e0e808f89670c8,393d231b,altosui: Attempt to make both 32- and 64-bit windows DLLs,"altosui: Attempt to make both 32- and 64-bit windows DLLs

We'll see if they work...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313992365,1314058806,d5bd40847b17c32405dfba864a2a5a3b19aa7e85
d5bd40847b17c32405dfba864a2a5a3b19aa7e85,d5bd4084,altosui/windows: Fix a bunch of windows compiler warnings.,"altosui/windows: Fix a bunch of windows compiler warnings.

Some of these may have actually been serious -- a write length was
getting stored in a signed char...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313989973,1314058806,2353d83be15b398754c2564f95374c6ea0f8de92
2353d83be15b398754c2564f95374c6ea0f8de92,2353d83b,altos-fat/windows: Check and install Java 1.6 as needed,"altos-fat/windows: Check and install Java 1.6 as needed

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313989924,1314058806,a08826292ebd802a1ff2effccac3b96fd061c47d
a08826292ebd802a1ff2effccac3b96fd061c47d,a0882629,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1314050935,1314050935,"3366cfe6145f64cdb04654854d5390c671a288e3,55be3db2e31fe97e7f351e3c490b8bc4cf7192b2"
55be3db2e31fe97e7f351e3c490b8bc4cf7192b2,55be3db2,altosui: Clean up command line processing. Add --graph,"altosui: Clean up command line processing. Add --graph

Make the command line processing a bit less ad-hoc, track 'mode' of
processing and deal with all files on the command line.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313979534,1313979666,6823ad5e48fc0a19791d96f886b5689f88c4311b
6823ad5e48fc0a19791d96f886b5689f88c4311b,6823ad5e,altos/altosui: Add ability to disable telemetry/rdf completely,"altos/altosui: Add ability to disable telemetry/rdf completely

This turns off the telemetry system so that it never transmits telemetry
or RDF tones. In idle mode, it will still accept packet mode connections.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313715722,1313865411,a08e7ac8bd3840b699c9a1ffc6b1e115b2b84bad
a08e7ac8bd3840b699c9a1ffc6b1e115b2b84bad,a08e7ac8,Bump version to 0.9.7,"Bump version to 0.9.7

Bdale is flying 0.9.6 at chili blaster, make sure later firmware gets
a later version number.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313865355,1313865355,f2b0900f8b83fcb3085f3d042ffd961ffd758d5d
f2b0900f8b83fcb3085f3d042ffd961ffd758d5d,f2b0900f,altos: Merge common config code in ao_config.c,"altos: Merge common config code in ao_config.c

This shuffles code around in ao_config.c to share some common code
segments for starting and committing config changes.

This also stops printing out changes as they are made which aren't
needed by the UI code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313864933,1313865163,67f28c58db0deca8f8050d33e97ad96017f4baaa
67f28c58db0deca8f8050d33e97ad96017f4baaa,67f28c58,altosui: Disable 'max flight log' config when there are stored flights,"altosui: Disable 'max flight log' config when there are stored flights

When flights are stored in flash, the maximum flight log value cannot
be changed as the flight data might need to be moved around in
memory. Check for this case by looking for stored flights and
disabling the combo box when storage is not empty.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313864397,1313864629,fcff63baf8fde1174571a2c7c860099e19dbf629
fcff63baf8fde1174571a2c7c860099e19dbf629,fcff63ba,altosui: remove debug printf in pad pane,"altosui: remove debug printf in pad pane

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313862208,1313864505,048b3eb45169e572f33c68ff152b89db9ef97d31
3366cfe6145f64cdb04654854d5390c671a288e3,3366cfe6,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1313854084,1313854084,787e4305a05e344c018abb872f788749203690d7
787e4305a05e344c018abb872f788749203690d7,787e4305,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1313853869,1313853869,605627d03eeb9f34026a84134992ad061b5b3946
605627d03eeb9f34026a84134992ad061b5b3946,605627d0,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1313815670,1313815670,ef7f60df841f1eb22b9cec0d7f68cf2c003d6b30
048b3eb45169e572f33c68ff152b89db9ef97d31,048b3eb4,altosui: Add 'On-board Data Logging' indicator to pad tab,"altosui: Add 'On-board Data Logging' indicator to pad tab

This shows whether the on-board data memory is full, or is ready to
record the flight. This is indicated in the telemetry stream by a
flight number of '0'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313381501,1313381501,adb7d345963ab9981c49c7cc68c6b4d7156dce46
adb7d345963ab9981c49c7cc68c6b4d7156dce46,adb7d345,altosui: Ancient log files used 'apogee' for 'coast' state,"altosui: Ancient log files used 'apogee' for 'coast' state

2009-07-18-serial-004-flight-000 says 'apogee' for the apogee-detect
phase of the flight; map this to coast so that this flight replays
correctly (although the log terminates at apogee...)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313381382,1313381382,4f64d66295a8f76680af8cfda4650aa4c4f8576d
4f64d66295a8f76680af8cfda4650aa4c4f8576d,4f64d662,altos: Lost change that reported flight 0 when log memory was full,"altos: Lost change that reported flight 0 when log memory was full

commit 52ac83fedbfd380d14d4df2e79992bbdfba3552a added coded to check
for a full flight log and complain with a special tone.

It also reported flight 0 over telemetry, and that part of the patch
got lost when moving to the new telemetry format. This patch
resurrects that piece.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313374790,1313374790,ef7f60df841f1eb22b9cec0d7f68cf2c003d6b30
ef7f60df841f1eb22b9cec0d7f68cf2c003d6b30,ef7f60df,altosui: Respect storage limits in flight log max config,"altosui: Respect storage limits in flight log max config

Compute the maximum flight log using the data returned from the 'f'
command (total storage and erase block size). Limit menu to choices
which fall within this limit, complain if the user asks for too big a value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313305254,1313305254,746d6a472a20243a8c0eacc8edf8e81e0641bc17
746d6a472a20243a8c0eacc8edf8e81e0641bc17,746d6a47,altosui: don't set channel when using radio setting,"altosui: don't set channel when using radio setting

altos now sets the radio back to channel 0 when the radio setting is
changed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313305207,1313305207,709485f20fb039f8dd087c8491c5f5a76718ae53
709485f20fb039f8dd087c8491c5f5a76718ae53,709485f2,altos: use raw height while waiting for landing,"altos: use raw height while waiting for landing

This avoids any noise introduced by the kalman filter, making landing
detection much more reliable. This patch also changes the interval to
10s so that the height bounds can be increased to 4m.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313305083,1313305083,aa71c2cdcb417eba2a2d30792ece9a47b8b3fc82
aa71c2cdcb417eba2a2d30792ece9a47b8b3fc82,aa71c2cd,altos: Reset radio channel to zero when using radio setting,"altos: Reset radio channel to zero when using radio setting

Otherwise, it's hard to set the frequency over the radio link.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313305015,1313305015,7f74761051f2a5ab45b82c4dd79a8569376bbe2e
7f74761051f2a5ab45b82c4dd79a8569376bbe2e,7f747610,altos: Correct AO_CONFIG_MINOR from 6 to 7,"altos: Correct AO_CONFIG_MINOR from 6 to 7

Forgot to bump this when adding radio setting.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313304966,1313304966,924d56a4d2d8b16530cd378b18cfc5d6e08420ed
924d56a4d2d8b16530cd378b18cfc5d6e08420ed,924d56a4,altos: AltosSerial.flush_input shouldn't discard Interrupted exceptions,"altos: AltosSerial.flush_input shouldn't discard Interrupted exceptions

The eeprom download code wants to interrupt serial communication so
that it can stop downloading stuff in the middle of a run. Make
flush_input pass the exception along instead of discarding it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313295015,1313295015,dcd15032eec45f3fdd003050710ebd5b85052662
dcd15032eec45f3fdd003050710ebd5b85052662,dcd15032,altosui: Eliminate inter-chunk flush_input calls,"altosui: Eliminate inter-chunk flush_input calls

Once the serial line is nicely synchronized, we don't need to flush
input between chunks. This speeds up eeprom downloading quite a bit.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313294959,1313294959,3ba7b6196f68078f4ed4538c4e7fe30699dfe908
3ba7b6196f68078f4ed4538c4e7fe30699dfe908,3ba7b619,altosui: Devices with log-format can also delete flights,"altosui: Devices with log-format can also delete flights

Any device with either flight-log-max or log-format can delete flights.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313294746,1313294746,03e201e1acc8742399054e4ad36b533120ea1612
03e201e1acc8742399054e4ad36b533120ea1612,03e201e1,altosui: Add support for TeleScience eeprom download,"altosui: Add support for TeleScience eeprom download

Using the existing eeprom methods, fetch and save TeleScience eeprom
data, storing to a filename generated from the serial/flight from the
TM connected to the TS board.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313285975,1313286372,5a3e96bef31959a287b8696778d7d8cf911a7dc4
5a3e96bef31959a287b8696778d7d8cf911a7dc4,5a3e96be,altosui: Clean up eeprom parsing a bit,"altosui: Clean up eeprom parsing a bit

Export basic parsing and checksum functions for shared use.
Create 'erased' function to check a chunk of eeprom data for data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313285778,1313286372,b0ec30de37aa822ba66d25ceaa8cf8dc967b4371
b0ec30de37aa822ba66d25ceaa8cf8dc967b4371,b0ec30de,altos: wait 10s for companion to boot,"altos: wait 10s for companion to boot

In case the companion is delayed while booting, retry the setup 10
times with a 1s delay between tries.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313285468,1313286372,41e5be32819d305c8268e6f992be91411ea13435
41e5be32819d305c8268e6f992be91411ea13435,41e5be32,altos: Send serial/flight to companion board,"altos: Send serial/flight to companion board

Lets the companion log them for later matching with TeleMetrum log

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313285400,1313286372,fa7dd04741bf3fd9cedc59ed3b45b69ef9312609
fa7dd04741bf3fd9cedc59ed3b45b69ef9312609,fa7dd047,altos: Send SPI message at flight state changes,"altos: Send SPI message at flight state changes

Get the companion board starting its data logging as soon as possible
after boost starts.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313210485,1313286372,c7f540330c040c521f9d7626009a406e704a5e41
c7f540330c040c521f9d7626009a406e704a5e41,c7f54033,altosui: Add companion support to the flight UI and CSV conversion,"altosui: Add companion support to the flight UI and CSV conversion

Shows the companion data in a new tab. Also put companion data into
CSV file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313186314,1313286372,18369c58e62bc64b969a7cf8be3103aa33c6d4aa
18369c58e62bc64b969a7cf8be3103aa33c6d4aa,18369c58,altos: Check for companion init packet validity was busted,"altos: Check for companion init packet validity was busted

Was using board_id == ~board_id instead of board_id ==
~board_id_inverse.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313155753,1313286372,aa642cf55c43188e9a21198d828d7ea90ff54280
aa642cf55c43188e9a21198d828d7ea90ff54280,aa642cf5,altos: add the 'L' command to show the status of a linked companion board,"altos: add the 'L' command to show the status of a linked companion board

This prints out whether there is a board connected, along with the
various values fetched from it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313152925,1313286372,f87f0787fa5aa528674f3f4919eb22646c87c25a
f87f0787fa5aa528674f3f4919eb22646c87c25a,f87f0787,altos: Make sure companion task exits cleanly when done,"altos: Make sure companion task exits cleanly when done

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313152875,1313286372,ebe2ffb29944abc4d6a35889c7b5f3d9f2871077
ebe2ffb29944abc4d6a35889c7b5f3d9f2871077,ebe2ffb2,altos: Put SPI in slower mode when talking to companion board,"altos: Put SPI in slower mode when talking to companion board

The AVR CPU on the other side just can't go very fast. This reduces
the SPI clock by a factor of 16, just under 200kHz. As the companion
commands are reasonably short, this shouldn't have a huge effect on
overall SPI utilization.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313152696,1313286372,30abbdc7ffcfc809b4a3fc31486fe968161ea225
30abbdc7ffcfc809b4a3fc31486fe968161ea225,30abbdc7,altos: Add SPI-based companion board support,"altos: Add SPI-based companion board support

This sends current flight state information and retrieves companion
data to include in telemetry.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310255956,1313286372,578c4b17b8f62f2727654ebda78ee139f9fe13fa
578c4b17b8f62f2727654ebda78ee139f9fe13fa,578c4b17,altos: Don't try to use non-basestations for remote eeprom download,"altos: Don't try to use non-basestations for remote eeprom download

Companion boards may also have eeprom data to fetch; don't try to use
them as a radio.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313285918,1313286292,bf06af154e232d4caa1585a1d6d5279a075292e4
bf06af154e232d4caa1585a1d6d5279a075292e4,bf06af15,altos/altosui: Report log format in the version command,"altos/altosui: Report log format in the version command

This will make it easier to figure out what the contents of the flash
should look like from altosui; the current 'guessing' mechanism will
not scale to many more formats.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313210636,1313286266,c2f2f519dbc8ce233ab36222088c1be6b1362f01
c2f2f519dbc8ce233ab36222088c1be6b1362f01,c2f2f519,altos: re-write a bit of GPS parsing code to reduce size,"altos: re-write a bit of GPS parsing code to reduce size

Use a local variable while computing hdop.
Place the next incoming character in data instead of pdata.

Saved a surprising amount of memory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313285318,1313286266,7bcf25606cd5892d58295649f3d475d284494ee8
7bcf25606cd5892d58295649f3d475d284494ee8,7bcf2560,altos: shrink text space from ao_config.c,"altos: shrink text space from ao_config.c

Eliminate redundant config initializers by setting minor to zero and
letting upgrade code handle all of the new values.

Stop computing (fake) frequency when showing radio channel
Stop computing feet when showing main deploy height

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313151969,1313286266,313d740b5284b24f1cc7a1ba5779136b55d49ebe
313d740b5284b24f1cc7a1ba5779136b55d49ebe,313d740b,libaltos: Mis-allocated device list in libaltos,"libaltos: Mis-allocated device list in libaltos

Would overrun mis-allocated array, causing chaos.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313285587,1313286266,3b87dd6f46922cf5f98deb2dffa2148c4244e48e
3b87dd6f46922cf5f98deb2dffa2148c4244e48e,3b87dd6f,ao-tools: ao-list was crashing with more than 3 devices connected,"ao-tools: ao-list was crashing with more than 3 devices connected

the list of devices was getting realloced for each new device, but
that realloc was too small.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313272814,1313286266,640422c028a2be898aa3a9048a0f6fad2e43dd8d
640422c028a2be898aa3a9048a0f6fad2e43dd8d,640422c0,altos: remove monitor disable stubs from altimeter code,"altos: remove monitor disable stubs from altimeter code

Monitor mode in the ground-station boards must be disabled when the
radio is going to be used for another purpose, or the radio parameters
changed. That places monitor-mode disable calls in other parts of the
system which are shared with the altimeter code.

Elide the ao_set_monitor calls for builds which do not include any
monitoring code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313104294,1313104294,1d13460412046c53f36466193329caaa657bb278
1d13460412046c53f36466193329caaa657bb278,1d134604,altos: Apply igniter boot pulse-width reduction to telemini,"altos: Apply igniter boot pulse-width reduction to telemini

TeleMini needs the same fix as TeleMetrum to reduce startup igniter
pulses.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313103587,1313103720,b520c32bcddabd42c07ceafa827694a3ae23a76f
b520c32bcddabd42c07ceafa827694a3ae23a76f,b520c32b,altos: Pull igniter pins low as soon as possible at boot time,"altos: Pull igniter pins low as soon as possible at boot time

This reduces the pulse width on the igniter circuit caused by the
default cc1111 pin configuration at powerup time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313103478,1313103478,566b16e67be38c6425e616a5c38d641c4e1a9b12
566b16e67be38c6425e616a5c38d641c4e1a9b12,566b16e6,doc: Add 1.0 release notes.,"doc: Add 1.0 release notes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313041406,1313041873,a07b07d48f71b9a11e73a82db075cc57bad0c09f
a07b07d48f71b9a11e73a82db075cc57bad0c09f,a07b07d4,"doc: Add release notes, include them in altusmetrum doc. Shuffle altusmetrum","doc: Add release notes, include them in altusmetrum doc. Shuffle altusmetrum

This adds release notes and includes them in the main altusmetrum doc
as well as making stand-alone html available for inclusion in the website.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313039672,1313039672,5aa3e49f794ba5ed2680016f3dca47d67ae99836
5aa3e49f794ba5ed2680016f3dca47d67ae99836,5aa3e49f,doc: Add telemetry docs to debian/linux/mac/windows packages,"doc: Add telemetry docs to debian/linux/mac/windows packages

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313026325,1313026325,7283deaa91e752acc45018ef2ea2f560b09af354
7283deaa91e752acc45018ef2ea2f560b09af354,7283deaa,"doc: Describe 'stats' tab in Graph UI, 'Graph Flight' button.","doc: Describe 'stats' tab in Graph UI, 'Graph Flight' button.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313025736,1313025736,21837e0026c87635abf4baf2c6c574a7b274f449
21837e0026c87635abf4baf2c6c574a7b274f449,21837e00,doc: Document Ignite Mode and Pad Orientation configuration options,"doc: Document Ignite Mode and Pad Orientation configuration options

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313025250,1313025250,967c9d5ee691f87bf0d1e49ba055eb366e513e6a
967c9d5ee691f87bf0d1e49ba055eb366e513e6a,967c9d5e,doc: Update altusmetrum.xsl for v1.0 software and TeleMini,"doc: Update altusmetrum.xsl for v1.0 software and TeleMini

Add TeleMini references and sections as appropriate, update AltosUI
docs to describe new bits.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313023438,1313023438,be65308182363ca87db69db530297933324f3806
be65308182363ca87db69db530297933324f3806,be653081,Bump version to 0.9.6.0,"Bump version to 0.9.6.0

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313017285,1313017285,9f5623c8c32a38eaeb63fa74ab370025ac015d52
9f5623c8c32a38eaeb63fa74ab370025ac015d52,9f5623c8,altosui: Move launch-sites.txt file to altusmetrum.org,"altosui: Move launch-sites.txt file to altusmetrum.org

The official URL is now:

	http://www.altusmetrum.org/AltOS/launch-sites.txt

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313013644,1313013644,4962bcf1ce15c21a946ea718bd676b901f0f2bd0
4962bcf1ce15c21a946ea718bd676b901f0f2bd0,4962bcf1,altosui: Plot reasonable data from Tm files,"altosui: Plot reasonable data from Tm files

Don't plot acceleration based on baro data.
Display baro speed if accel speed isn't available.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313012121,1313012121,01b9352eb8ca0e4e2d023ce973c4e863cdcc0c51
01b9352eb8ca0e4e2d023ce973c4e863cdcc0c51,01b9352e,altosui: Prune telemetry file graphs to just the flight,"altosui: Prune telemetry file graphs to just the flight

Remove data earlier than 1 second before boost and data after landing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313012079,1313012079,9e1487b1a5db0afd1d23c86d82c60b1c1a62aab0
9e1487b1a5db0afd1d23c86d82c60b1c1a62aab0,9e1487b1,altosui: Add a 'Graph Flight' button to the 'landed'  tab,"altosui: Add a 'Graph Flight' button to the 'landed'  tab

This lets you see the results of a flight as soon as the rocket lands
using the telemetry data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313010501,1313010501,6ac604d11de44cd824f09e4b467264a2b74be7bd
6ac604d11de44cd824f09e4b467264a2b74be7bd,6ac604d1,Altosui: Add flight statistics tab to graph window,"Altosui: Add flight statistics tab to graph window

Provide basic flight stats alongside the flight graph.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1313008526,1313008526,94d9a2c36fabdf24d6a0b985851e95e4eb181fd9
94d9a2c36fabdf24d6a0b985851e95e4eb181fd9,94d9a2c3,altosui: Ship TeleMini v1.0 firmware with fat blobs,"altosui: Ship TeleMini v1.0 firmware with fat blobs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312939699,1312939699,a680ce61bdcffeacb7f0e4dcef71a03cb7cfe07d
a680ce61bdcffeacb7f0e4dcef71a03cb7cfe07d,a680ce61,altosui: Ensure serial code tracks reply nesting correctly,"altosui: Ensure serial code tracks reply nesting correctly

Trap any exceptional return conditions from 'get_reply' to make sure
in_reply gets decremented.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312939639,1312939639,12bfa6cc42e3689f09abae2bd2584cbacf2aa2e0
12bfa6cc42e3689f09abae2bd2584cbacf2aa2e0,12bfa6cc,altosui: Don't export product defs from libaltos,"altosui: Don't export product defs from libaltos

As we add new products, that would change the ABI generated for java,
invaliding old library versions sitting around for windows and mac.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312939567,1312939567,81ad44d4b6d9ad2f6b91d0906e8543da82da424f
81ad44d4b6d9ad2f6b91d0906e8543da82da424f,81ad44d4,altos: Switch telemini from v0.1 to v1.0,"altos: Switch telemini from v0.1 to v1.0

TeleMini production boards are firmware compatible with the v0.1
design, so instead of creating another product, just rename the
existing one.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312925203,1312925203,f3985ef8bc69bcec13ce155567a8ed7c5c6051cb
f3985ef8bc69bcec13ce155567a8ed7c5c6051cb,f3985ef8,altosui: Add close button to 'fire' dialog,"altosui: Add close button to 'fire' dialog

Easier to hit than the tiny close box in the frame.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312861294,1312861294,cbf54a826d12c49b1b1996be247869d5ff4e2236
cbf54a826d12c49b1b1996be247869d5ff4e2236,cbf54a82,altosui: Make set of telemetries to use while scanning configurable,"altosui: Make set of telemetries to use while scanning configurable

with a preference to remember across application runs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312861124,1312861124,7146311d9df541e075b4450cf9656a9aa7ffdd93
7146311d9df541e075b4450cf9656a9aa7ffdd93,7146311d,altosui: Reading serial from swing thread only bad if remote,"altosui: Reading serial from swing thread only bad if remote

Make the warning on this condition based on whether the link is remote.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312861094,1312861094,2662c577a895c96fce7b2bf815b9e752d2dfbde6
2662c577a895c96fce7b2bf815b9e752d2dfbde6,2662c577,altosui: Remove unused AltosConfigData from AltosTelemetryReader,"altosui: Remove unused AltosConfigData from AltosTelemetryReader

Now that AltosSerial manages this data, it's not needed here.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312854839,1312854839,13eacb49de4312509c3a729a31dcda4d601f8a8b
13eacb49de4312509c3a729a31dcda4d601f8a8b,13eacb49,altosui: Flush radio setting to serial device,"altosui: Flush radio setting to serial device

When changing frequencies, make sure the device hears about it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312854807,1312854807,97cf285d041062ae473c2823438b81c8fffe7f67
97cf285d041062ae473c2823438b81c8fffe7f67,97cf285d,altosui: Remove debugging printfs from AltosSerial,"altosui: Remove debugging printfs from AltosSerial

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312854783,1312854783,364102d29ff4de0c252774f26417587fa88b7467
364102d29ff4de0c252774f26417587fa88b7467,364102d2,altosui: Show AltosFrequency in scan results,"altosui: Show AltosFrequency in scan results

Include frequency and description instead of just frequency.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312854731,1312854731,d4cc16e111229b02d1081e2693ace0b33f662498
d4cc16e111229b02d1081e2693ace0b33f662498,d4cc16e1,altosui: Save frequency after setting it in AltosFlightUI,"altosui: Save frequency after setting it in AltosFlightUI

Otherwise we'll just save the old frequency.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312854676,1312854676,81bb6f42d8b859195ea5a35806c42d98ba82e8e1
81bb6f42d8b859195ea5a35806c42d98ba82e8e1,81bb6f42,altosui: Have single radio_to_frequency function,"altosui: Have single radio_to_frequency function

This takes all three radio params (setting, cal, channel) and computes
the current frequency.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312854585,1312854655,c8c01684fa011acf3bbe5c3ebbc84aa8e8457a5e
c8c01684fa011acf3bbe5c3ebbc84aa8e8457a5e,c8c01684,altosui: A few misc cleanups.,"altosui: A few misc cleanups.

Initialize radio_setting as it won't be set for older devices ever.
Remove unused set_radio_frequency function from AltosConfigUI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312854456,1312854456,dd383b86b9a13d7af2d6b07f4fb85ccc666ed898
dd383b86b9a13d7af2d6b07f4fb85ccc666ed898,dd383b86,altosui: Must set radio calibration before radio setting,"altosui: Must set radio calibration before radio setting

Setting the radio calibration erases any previous radio setting as
the radio calibration change invalidates any previously computed radio
setting for a specific frequency.

Hence, the radio setting must be configured *after* the radio
calibration value lest it be ignored.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312854336,1312854336,40544dbfe09c64f7764a5f0686415805611fab25
40544dbfe09c64f7764a5f0686415805611fab25,40544dbf,altos: minor type in comment about accel correction,"altos: minor type in comment about accel correction

Kurt Roeckx found a typo in the equations describing how the
accelerometer is corrected by the 5V reference measurement.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312850764,1312850764,a315b200cd0da1a964f5395cd59660be1b49672b
a315b200cd0da1a964f5395cd59660be1b49672b,a315b200,altosui: Pull out BlueTooth support,"altosui: Pull out BlueTooth support

This leaves the code in place, but commented out so that it isn't used
until we've got a bluetooth device ready for use.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312831908,1312831908,a65daf94e8fe3e22f770ef76d9104c3dd11d0330
a65daf94e8fe3e22f770ef76d9104c3dd11d0330,a65daf94,altosui: altimeter is not spelled altimter,"altosui: altimeter is not spelled altimter

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312831530,1312831530,84ba927f503f81543dec286c4881be30bb5e60c5
84ba927f503f81543dec286c4881be30bb5e60c5,84ba927f,Set version to 0.9.5.0,"Set version to 0.9.5.0

Make the frequency-based systems distinct

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312794328,1312830841,0e3e4f9c1e6a6bf972514f12c9d622258aa2aec2
0e3e4f9c1e6a6bf972514f12c9d622258aa2aec2,0e3e4f9c,altosui: Convert from channels to frequencies,"altosui: Convert from channels to frequencies

Major areas:

 * Preferences are stored as frequencies instead
   of channels

 * Serial configuration is done using frequencies

 * UI is presented with frequency lists

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312793249,1312830809,f03ca0ab8799bfa5100eaa2577cfd7b9c37d05bf
f03ca0ab8799bfa5100eaa2577cfd7b9c37d05bf,f03ca0ab,altosui: Add dialogs to configure 'common' frequencies,"altosui: Add dialogs to configure 'common' frequencies

These are stored in preferences, but not yet hooked up to the TM/TD
configure dialogs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312753949,1312830809,ba5dc35388d28c5769eaabc970c4d4b8c2c2ff9c
ba5dc35388d28c5769eaabc970c4d4b8c2c2ff9c,ba5dc353,altos: Add ability to set arbitrary radio frequency,"altos: Add ability to set arbitrary radio frequency

This adds a separate config parameter to control the raw radio
frequency setting, allowing the user to select an arbitrary frequency
instead of being forced to choose one of the 10 pre-defined 'channels'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312438073,1312830808,e1e5c9b3e24670e9f58c6f7389eafb3338efdb40
e1e5c9b3e24670e9f58c6f7389eafb3338efdb40,e1e5c9b3,altos: Remove pad_orientation functions from non-accel devices,"altos: Remove pad_orientation functions from non-accel devices

Anything without an accelerometer can't detect pad orientation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312830525,1312830783,7207a95823dc2a27906759528dd88256cb20679f
7207a95823dc2a27906759528dd88256cb20679f,7207a958,altosui: Change button to 'Configure Altimeter',"altosui: Change button to 'Configure Altimeter'

Now that we've got more than one model.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312830240,1312830783,30670732ca3f5a34025ab4bc4c69afa45637b4d6
30670732ca3f5a34025ab4bc4c69afa45637b4d6,30670732,altos: Correct flight log max on Tm to 5k,"altos: Correct flight log max on Tm to 5k

Was using the wrong #define name to check for Tm/Tn devices that use
internal flash for data storage.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312829903,1312830782,a67c16958df8e60b131b01e00fd5bca590af0e7d
a67c16958df8e60b131b01e00fd5bca590af0e7d,a67c1695,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1312817933,1312817933,4a507898d6de631bb2e8ed4aa3e0933d97222323
4a507898d6de631bb2e8ed4aa3e0933d97222323,4a507898,rewind changelog for re-build of 0.9.4.5,"rewind changelog for re-build of 0.9.4.5
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1312817699,1312817699,5082b4998b8a9787e0e2f4d96d912e434aa9b81a
5082b4998b8a9787e0e2f4d96d912e434aa9b81a,5082b499,clean up all existing lintian warnings,"clean up all existing lintian warnings
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1312817478,1312817478,f26c7172a1b2b5344fae6ede562f2da7a56b80e3
f26c7172a1b2b5344fae6ede562f2da7a56b80e3,f26c7172,build depend on bluetooth dev package,"build depend on bluetooth dev package
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1312811654,1312811654,3cad81b0ebb52352c66643a2587e94a2b693a2d2
3cad81b0ebb52352c66643a2587e94a2b693a2d2,3cad81b0,stop doing automatic tag push during builds,"stop doing automatic tag push during builds
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1312810728,1312810728,ebaad64525119c0fdacf382adc2c99e5df5be23f
ebaad64525119c0fdacf382adc2c99e5df5be23f,ebaad645,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1312810643,1312810643,6f9f75cbfccf975204ab847ca0e9cf86188716c6
6f9f75cbfccf975204ab847ca0e9cf86188716c6,6f9f75cb,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1312810547,1312810547,7c94945690a6ff5cbf872026fd6411a30089c7b1
7c94945690a6ff5cbf872026fd6411a30089c7b1,7c949456,simplify version in last changelog entry so git-dch is less confused,"simplify version in last changelog entry so git-dch is less confused
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1312810389,1312810389,6d5e5b0be237d5448aa9d15decd6127cf41ca7b2
6d5e5b0be237d5448aa9d15decd6127cf41ca7b2,6d5e5b0b,update version for a Bdale build for use turning on TeleMini v1.0,"update version for a Bdale build for use turning on TeleMini v1.0
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1312810242,1312810242,6492218fc316f8cf6214a577807a8dd0a80a9b6a
6492218fc316f8cf6214a577807a8dd0a80a9b6a,6492218f,altos/altosui: Add pad orientation configure option,"altos/altosui: Add pad orientation configure option

Allow TeleMetrum to be operated with the antenna pointing downwards on
the pad. This provides some additional flexibility when designing an
ebay.

The accelerometer calibration levels are flipped around to match, so
no re-calibration should be required.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312337276,1312337276,11a2bb8e28df7ed87542f2ee726f877971f5d52a
11a2bb8e28df7ed87542f2ee726f877971f5d52a,11a2bb8e,altosui: Add idle monitor dialog,"altosui: Add idle monitor dialog

This monitors a telemetrum device in idle mode, either directly or through a
teledongle, allowing the GPS status and batteries to be monitored
without resorting to placing the device in pad mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312332113,1312333417,3cc2eed6cdafe788a8617ab45c6664077e76411e
3cc2eed6cdafe788a8617ab45c6664077e76411e,3cc2eed6,altosui: Simple timeouts don't work with query data,"altosui: Simple timeouts don't work with query data

To get the query to come back, it's best to abort and retry the
command, other wise the command may have been lost to the previous
connection.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312333312,1312333417,37c41c962ea4631e62307a57d2ce6572b87fd743
37c41c962ea4631e62307a57d2ce6572b87fd743,37c41c96,altosui: Parse accel cal from 'c s' command,"altosui: Parse accel cal from 'c s' command

These fields weren't used before, so the code to parse them hadn't
been written.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312332062,1312332062,95201e7fe4a6a7ec42321e8dbad3aea3bbf4c840
95201e7fe4a6a7ec42321e8dbad3aea3bbf4c840,95201e7f,altosui: Standard text field in flight UI needs more width (now 20),"altosui: Standard text field in flight UI needs more width (now 20)

Latitude and longitude take more than 16 characters.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312332002,1312332002,82e04a0e3a3296288a524ec582785a36fd644331
82e04a0e3a3296288a524ec582785a36fd644331,82e04a0e,altos: Require sequencing through 'main' state before landing,"altos: Require sequencing through 'main' state before landing

The old version of the code would permit the flight to go straight
from 'drogue' to 'landed' without passing through 'main' at all. This
meant that a false landing detection would leave the main charge
unfired, potentially causing the airframe to land on drogue alone.

Requiring that the flight sequence pass through main ensures that the
main charge will get fired at the right time, although if the airframe
lands higher than that altitude, it will not go to 'landed' mode ever.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312276163,1312276163,6c55bf35b11ae3ddae152795072d69e98184bac1
6c55bf35b11ae3ddae152795072d69e98184bac1,6c55bf35,altos: Reduce height averaging filter time constant,"altos: Reduce height averaging filter time constant

Using the longer time constant could lead to false landing detection
just after apogee, which is definitely not a good idea.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312274975,1312275213,e19a117b99e8374ca0e8e35948e23bc672ad1a32
e19a117b99e8374ca0e8e35948e23bc672ad1a32,e19a117b,altos: Average height values for landing detection,"altos: Average height values for landing detection

Instead of using the direct output of the kalman filter and hoping
that is quiet enough to detect landing, filter that with a long
exponential decay filter and then check to make sure that doesn't
change more than 2m in 5 seconds as a trigger for landing detection.

Tested with existing telemetrum flight logs and it correctly detects
landing in all cases.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1312263218,1312270208,146a0ab223e8d9b376125d1e59f597f6d7851a9b
146a0ab223e8d9b376125d1e59f597f6d7851a9b,146a0ab2,altos: Add ability to read new TELEM files to ao_flight_test,"altos: Add ability to read new TELEM files to ao_flight_test

Not that telem files are currently very useful as the kalman filter
gets completly confused by the variable steps caused by missing data, but...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310953795,1310953795,6795d353be91df96a571cebc237e6a54a065a380
6795d353be91df96a571cebc237e6a54a065a380,6795d353,altosui: Change continutity colors to yellow/magenta,"altosui: Change continutity colors to yellow/magenta

Makes them stand apart from the accel/speed lines

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310946250,1310946250,7f6cce5749724dbb836aaa27bbeedf977106f6f3
7f6cce5749724dbb836aaa27bbeedf977106f6f3,7f6cce57,Add HARA Bragg Farms site,"Add HARA Bragg Farms site

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310946221,1310946221,6796d9e253a808824ba32cdb008da8bf302780fc
6796d9e253a808824ba32cdb008da8bf302780fc,6796d9e2,Fix NCR Pawnee location,"Fix NCR Pawnee location

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310943193,1310943193,ddef3e4ec1b3ff86b164f83807c34c2a78f73eb8
ddef3e4ec1b3ff86b164f83807c34c2a78f73eb8,ddef3e4e,altosui: Mark preload site location with red circles (like launch),"altosui: Mark preload site location with red circles (like launch)

Just to show where on the map the official launch location is.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310942707,1310942707,1f3f3d575572eff33a2bc7a53d4691e59a428450
1f3f3d575572eff33a2bc7a53d4691e59a428450,1f3f3d57,altosui: Add a bunch more site locations,"altosui: Add a bunch more site locations

BALLS, Rio Rancho, METRA, QRS Cedar Grove and Hudson Ranch

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310940595,1310940595,fef42e0d9e0a20bdbd32e052749fc63575515e1c
fef42e0d9e0a20bdbd32e052749fc63575515e1c,fef42e0d,altosui: Add launch-sites.txt,"altosui: Add launch-sites.txt

Contains a few of our favorites.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310927353,1310927353,81cac174c80ee42d9e94c6500da7c4c760c3ce67
81cac174c80ee42d9e94c6500da7c4c760c3ce67,81cac174,altosui: Download list of site locations for map preloading,"altosui: Download list of site locations for map preloading

The current URL for this is:
http://gag.com/~keithp/launch-sites.txt

The format is:
<site-name>:<lat>:<lon>

lat and lon are both in signed decimal degrees.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310927147,1310927147,f7cd8317bf78ece334e1ceb0263b875ca43bbbd2
f7cd8317bf78ece334e1ceb0263b875ca43bbbd2,f7cd8317,Merge branch 'preload-maps',"Merge branch 'preload-maps'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310915864,1310915864,"51796e2f1ebce3ee8dc1ac90648381410c1379ee,a482d904a3f391c3a24df3660acb3f3696aa6766"
51796e2f1ebce3ee8dc1ac90648381410c1379ee,51796e2f,"altos, altosui: Add igniter mode (dual, apogee, main)","altos, altosui: Add igniter mode (dual, apogee, main)

This provides for redundant charges for either apogee or main.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1306175549,1310915649,1332ed55192f22525f31574f60fae4c6579e6f7f
1332ed55192f22525f31574f60fae4c6579e6f7f,1332ed55,Set version to 0.9.4.4,"Set version to 0.9.4.4

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310915595,1310915649,7bb11b716ccb6c80701bc3f34ecf9bef97cbbfc9
a482d904a3f391c3a24df3660acb3f3696aa6766,a482d904,altosui: Make sure degree and minute values are visible (map preload),"altosui: Make sure degree and minute values are visible (map preload)

Set min size to preferred size so that the value remains visible
instead of snapping to 0 pixels wide.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1310882929,1310882929,1681c57cbbfc5214dbc2a519e54ce9f29ffe3921
1681c57cbbfc5214dbc2a519e54ce9f29ffe3921,1681c57c,altosui: Remove a bunch of sitemap debugging printfs,"altosui: Remove a bunch of sitemap debugging printfs

Seems to work, let's get less chatty

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310881414,1310881414,0a4d934f6e2914bfe2d965630543f029a1576c11
0a4d934f6e2914bfe2d965630543f029a1576c11,0a4d934f,altosui: Display full map preload area in view.,"altosui: Display full map preload area in view.

This involved fixing the map view to support arbitrary sizes, and then
exposing a synchronous tile loading API so that the progress bar could
be used to show tile loading progress.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310880884,1310880884,abb8510b97ce9cbbff0275cc31f74780fe1ce138
abb8510b97ce9cbbff0275cc31f74780fe1ce138,abb8510b,Merge branch 'scan-telemetry' into preload-maps,"Merge branch 'scan-telemetry' into preload-maps
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310875597,1310875597,"0929ee32f753255cbe1474988cb41a5a86d29a0e,00e6981c2e0a668864fcf391932855cd8942140c"
00e6981c2e0a668864fcf391932855cd8942140c,00e6981c,altosui: Flush telemetry lines before starting to watch for scan results,"altosui: Flush telemetry lines before starting to watch for scan results

This prevents pending telemetry lines from being incorrectly
attributed to the wrong channel/telemetry.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310875506,1310875575,cbd14ba103ee5e3c5eec18e3a4ff13c320b98634
0929ee32f753255cbe1474988cb41a5a86d29a0e,0929ee32,altosui: Try to avoid resize weirdness with map preloading,"altosui: Try to avoid resize weirdness with map preloading

grid bag + box does some strange stuff, this appears to avoid the
worst of the interactions.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310863040,1310874452,225073fd822f9861a83d65386c29fda9b37bf273
225073fd822f9861a83d65386c29fda9b37bf273,225073fd,altosui: Add map preloading GUI,"altosui: Add map preloading GUI

Provide a way to manually enter latitude and longitude, preview the
map area while downloading a 9x9 grid of map tiles to be used when
monitoring flights without network access.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310859460,1310874452,cbd14ba103ee5e3c5eec18e3a4ff13c320b98634
cbd14ba103ee5e3c5eec18e3a4ff13c320b98634,cbd14ba1,altosui: Set 'seen' bits in legacy telemetry packet reader,"altosui: Set 'seen' bits in legacy telemetry packet reader

Otherwise, the 'scan' code won't show detected flight computers.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310874291,1310874370,e905042879147dd86241bf2dcc7437e5a6eb7578
e905042879147dd86241bf2dcc7437e5a6eb7578,e9050428,altosui: Initialize channel and telemetry before use in ScanUI,"altosui: Initialize channel and telemetry before use in ScanUI

Otherwise we try to use telemetry format 0, which means 'no telemetry'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310874237,1310874364,941b90a4905e34936d24a25ca90ac04eb6f5a792
941b90a4905e34936d24a25ca90ac04eb6f5a792,941b90a4,"altosui: Generalize and centralize telemetry constants, parse v0.8 telemetry","altosui: Generalize and centralize telemetry constants, parse v0.8 telemetry

Move telemetry constants to Altos class, adding functions to compute
names and lengths. Generalize users of these values to use all of the
known values.

Add support for v0.8 TeleMetrum telemetry

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310863080,1310863731,7ef786276b5d5c7d17c3fe4f36aa41db61a9742f
7ef786276b5d5c7d17c3fe4f36aa41db61a9742f,7ef78627,altosui: Finish radio scanning UI,"altosui: Finish radio scanning UI

Scans all channels and telemetry formats, presenting visible devices
in a list. Entries from the list may be selected, in which case a
monitor window pops up with the appropriate configuration.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310851388,1310851605,ebcba28b3c09925869b617880d2919e5d0e059f0
ebcba28b3c09925869b617880d2919e5d0e059f0,ebcba28b,altosui: Configuration telemetry record includes flight number,"altosui: Configuration telemetry record includes flight number

Mark the reported altos record as including flight information.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310851181,1310851605,d4375bc737655546c2d40f49acdfc2e60ebfea5a
d4375bc737655546c2d40f49acdfc2e60ebfea5a,d4375bc7,altosui: Remove debugging printf from AltosLog,"altosui: Remove debugging printf from AltosLog

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310851154,1310851605,f32a55ac9a3ebbde2b41782f22491e72258fe05a
f32a55ac9a3ebbde2b41782f22491e72258fe05a,f32a55ac,altosui: Pop up monitor window from scan dialog,"altosui: Pop up monitor window from scan dialog

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310263212,1310851605,8c20030ea4eb8e068e1ba88e01d07dfbc27bd7db
8c20030ea4eb8e068e1ba88e01d07dfbc27bd7db,8c20030e,altosui: Start adding support for scanning radio for available devices,"altosui: Start adding support for scanning radio for available devices

This is untested.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310262075,1310851604,7bb11b716ccb6c80701bc3f34ecf9bef97cbbfc9
7bb11b716ccb6c80701bc3f34ecf9bef97cbbfc9,7bb11b71,Set version to 0.9.4.3 for Bdale 2011-7-16 flights,"Set version to 0.9.4.3 for Bdale 2011-7-16 flights

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310781221,1310781221,0d0cf6f9a1b14a1b66aee3845964cd33d1f035c2
0d0cf6f9a1b14a1b66aee3845964cd33d1f035c2,0d0cf6f9,altos: new versions of sdcc require __ prefixes for custom keywords,"altos: new versions of sdcc require __ prefixes for custom keywords

Fortunately, 2.9.1 appears to accept either, so we can switch now and
prepare for sdcc 3.0.0.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310242197,1310242197,8f80f5705d64469bcfb00ff11aee68364edb271b
8f80f5705d64469bcfb00ff11aee68364edb271b,8f80f570,altosui: Don't show missing igniter and gps values,"altosui: Don't show missing igniter and gps values

The new telemetry stuff leaves state.gps always set (but empty), which
seems fine, we just need to look at state.gps.connected to see if
there's a GPS receiver on board.

For TeleNano, we also want to hide the igniter status fields as they
won't have any data present.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310013537,1310013537,80ca066a825646f833ca609190c76c5252118d9a
80ca066a825646f833ca609190c76c5252118d9a,80ca066a,altosui: Build device constants into .java code,"altosui: Build device constants into .java code

This eliminates a depedency on updates to the system helper library,
which means we don't have to provide a new library on all platforms
just to support a new USB id.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1310013398,1310013503,504ab7ab355652d5d01094c927089029596a0753
504ab7ab355652d5d01094c927089029596a0753,504ab7ab,altos: product defines are always in ao_product.h,"altos: product defines are always in ao_product.h

When all products were built in a single directory, each one had a
separate version of ao_product.h. Now that they all reside in
sub-directories, each directory has its own ao_product.h

This change is needed so that other modules in the system can use the
product defines; otherwise, ao_product.h was not built at the right time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309999741,1309999741,81cf2e833bedbc1ace8fd310e9e94bfb7673d428
81cf2e833bedbc1ace8fd310e9e94bfb7673d428,81cf2e83,altos: Ensure low-rate telem packets interleave with sensor telem packets,"altos: Ensure low-rate telem packets interleave with sensor telem packets

To avoid over-committing the radio link, we want to send only
one low rate packet after each sensor packet. However, the
initializations for this were incorrect, causing the configuration and
location packets to be sent at the same time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309995797,1309995797,5ca6400fd8a360b64d8f96f50d5595a7fd17762d
5ca6400fd8a360b64d8f96f50d5595a7fd17762d,5ca6400f,altos: Remove ao_telemetry_orig.c and ao_telemetry_tiny.c,"altos: Remove ao_telemetry_orig.c and ao_telemetry_tiny.c

All products use the common ao_telemetry.c code now

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309994334,1309994386,0154d13756bcb09f009981ee5e4bd27fd04b8788
0154d13756bcb09f009981ee5e4bd27fd04b8788,0154d137,altos: Switch Tm and Tn to common telemetry code,"altos: Switch Tm and Tn to common telemetry code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309994362,1309994386,b65140a0139075adeddaccf0f4d5c7a75fac4757
b65140a0139075adeddaccf0f4d5c7a75fac4757,b65140a0,altos: Switch flash drivers __xdata to __pdata,"altos: Switch flash drivers __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309992745,1309992745,038d7b25ba833da4be458409670d3f95e8aaf17b
038d7b25ba833da4be458409670d3f95e8aaf17b,038d7b25,altos: Switch ao_flight and ao_flight_nano __xdata to __pdata,"altos: Switch ao_flight and ao_flight_nano __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309992712,1309992712,3742b36a528f114c3b1873caa4f39581145b76da
3742b36a528f114c3b1873caa4f39581145b76da,3742b36a,altos: Switch ao_dbg.c __xdata to __pdata,"altos: Switch ao_dbg.c __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991281,1309992515,6903b6464db7eb803de8bf9b897c45431f7a1d63
6903b6464db7eb803de8bf9b897c45431f7a1d63,6903b646,altos: Switch ao_config.c __xdata to __pdata,"altos: Switch ao_config.c __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991252,1309992515,6893752900385ee51cc4cf75e1b672202de7578a
6893752900385ee51cc4cf75e1b672202de7578a,68937529,altos: switch ao_cmd __xdata to __pdata,"altos: switch ao_cmd __xdata to __pdata

Saves code space

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991169,1309992515,2ec986f08ce8d4635f4435bb0042b405d93edc40
2ec986f08ce8d4635f4435bb0042b405d93edc40,2ec986f0,altos: Switch const for __code in struct ao_cmds,"altos: Switch const for __code in struct ao_cmds

This saves quite a bit of code space when accessing these values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309992304,1309992514,355db71f4511adff8abcb2caded61c12fe8b7ee9
355db71f4511adff8abcb2caded61c12fe8b7ee9,355db71f,altos: Switch ao_usb.c __xdata to __pdata,"altos: Switch ao_usb.c __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309992092,1309992514,359baab005c274a0841268c615c23b3ffef813cf
359baab005c274a0841268c615c23b3ffef813cf,359baab0,altos: Switch ao_telemetry.c __xdata to __pdata,"altos: Switch ao_telemetry.c __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309992066,1309992514,f2f8ade6994aa3a69fd08f19c4403ceb8cea295d
f2f8ade6994aa3a69fd08f19c4403ceb8cea295d,f2f8ade6,altos: Switch ao_stdio.c __data to __pdata,"altos: Switch ao_stdio.c __data to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991984,1309992514,9ba0da9247ea424a7a147aa85daae0d5e6316b81
9ba0da9247ea424a7a147aa85daae0d5e6316b81,9ba0da92,altos: Switch ao_serial.c __xdata to __pdata,"altos: Switch ao_serial.c __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991926,1309992514,86b41d4c2b8a9fa4507cdb75302e0cedebb103cb
86b41d4c2b8a9fa4507cdb75302e0cedebb103cb,86b41d4c,altos: Switch ao_sample.c __xdata to __pdata,"altos: Switch ao_sample.c __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991909,1309992514,803bf106caf5d6b5ac12eb00a941647c7325edd1
803bf106caf5d6b5ac12eb00a941647c7325edd1,803bf106,altos: Switch ao_rssi.c __xdata to __pdata,"altos: Switch ao_rssi.c __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991854,1309992514,002f167fc2709aaf1a4984aaa0a3519a97749d5f
002f167fc2709aaf1a4984aaa0a3519a97749d5f,002f167f,altos: Switch ao_report.c __xdata to __pdata,"altos: Switch ao_report.c __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991835,1309992514,5203ddaac692bfd82a01368da9fb66c25e9e14c1
5203ddaac692bfd82a01368da9fb66c25e9e14c1,5203ddaa,altos: Switch ao_log.c and ao_log_big.c __xdata to __pdata,"altos: Switch ao_log.c and ao_log_big.c __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991805,1309992514,62267144d189967fcd0724b6dfbdbab3cb6fb414
62267144d189967fcd0724b6dfbdbab3cb6fb414,62267144,altos: Switch ao_ignite and ao_gps_sirf __xdata to __pdata,"altos: Switch ao_ignite and ao_gps_sirf __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991632,1309992514,92047ff86c79c2b18ef565a4560b06fe00d6f159
92047ff86c79c2b18ef565a4560b06fe00d6f159,92047ff8,altos: Switch ao_gps_skytraq and ao_gps_sirf __xdata to __pdata,"altos: Switch ao_gps_skytraq and ao_gps_sirf __xdata to __pdata

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309991513,1309992514,64860be02b3efa6f784a259249cfa6d14545fbd3
64860be02b3efa6f784a259249cfa6d14545fbd3,64860be0,altos: Shrink ao_add_task by rolling up a memset loop,"altos: Shrink ao_add_task by rolling up a memset loop

This has a dramatic effect. By pulling the 'stack' variable into
registers it reduces the size of this function from 550 to 231 bytes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309985345,1309985478,480b48837db31987b947e4d32248965d4a16be03
480b48837db31987b947e4d32248965d4a16be03,480b4883,altos: Shrink ao_config_callsign_set,"altos: Shrink ao_config_callsign_set

Replacing a hand-coded memset with a function call, using static space
instead of stack space for an array.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309983685,1309983685,41c230cac359b4459ca93196d08704b7d35447c7
41c230cac359b4459ca93196d08704b7d35447c7,41c230ca,"altos: Shrink ao_cmd_put16, ao_cmd_hex and ao_cmd","altos: Shrink ao_cmd_put16, ao_cmd_hex and ao_cmd

No functional changes, just reduces code size.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309981091,1309981091,481577a29380afe6750ef7c4e928daff837cbc49
481577a29380afe6750ef7c4e928daff837cbc49,481577a2,altosui: Compress telemetry records marked with the same time,"altosui: Compress telemetry records marked with the same time

Split telemetry transmits multiple packets with the same
timestamp. Merge those into a single record when read from a file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309934322,1309934322,7cfd43663cde5ebdf04e4face076d79ff6329ac3
7cfd43663cde5ebdf04e4face076d79ff6329ac3,7cfd4366,altosui: Remove debug printf.,"altosui: Remove debug printf.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309934308,1309934308,d0335f83c54df0b23c28d04d34c212a1bdffadd0
d0335f83c54df0b23c28d04d34c212a1bdffadd0,d0335f83,altosui: Add main/drogue voltages to default graph,"altosui: Add main/drogue voltages to default graph

Until we get a UI for changing the graph elements, lets add a few more
potentially useful values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309934271,1309934271,c1f859170b37864b816eb561318dbfb1cafaeed6
c1f859170b37864b816eb561318dbfb1cafaeed6,c1f85917,altosui: Elide missing values from graphs,"altosui: Elide missing values from graphs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309934220,1309934251,72575dcb9cfbb5c1ccdb3510b9962a6f60ca3fa3
72575dcb9cfbb5c1ccdb3510b9962a6f60ca3fa3,72575dcb,altosui: Elide nul bytes at end of telemetry string values,"altosui: Elide nul bytes at end of telemetry string values

All telemetry fields are fixed length, so any embedded strings are
padded with nul bytes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309934150,1309934150,6ac34f9c8efd464194137ac4ce8228bf9d7d83be
6ac34f9c8efd464194137ac4ce8228bf9d7d83be,6ac34f9c,doc: Add section about TeleDongle USB line format,"doc: Add section about TeleDongle USB line format

Describe the format of the TELEM lines sent over USB from TeleDongle
to the host.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309934102,1309934102,edf6252450e06fd42fa6dde3acd127baa8fa6d36
edf6252450e06fd42fa6dde3acd127baa8fa6d36,edf62524,altos: Adapt to changes in telemetry Configuration packet,"altos: Adapt to changes in telemetry Configuration packet

Apogee delay added. flight_log_max changed to two bytes (in kB now).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309927493,1309927493,938949e39aac834a1c0912f8f307f74fe41418cc
938949e39aac834a1c0912f8f307f74fe41418cc,938949e3,doc: Chang Config and Location packets,"doc: Chang Config and Location packets

Config packets get apogee delay, and have flight_log_max shrunk to two
bytes.

Location packets get climb_rate added.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309927342,1309927342,4132ac5896114e5f3d8fb3f219422e8933078cf4
4132ac5896114e5f3d8fb3f219422e8933078cf4,4132ac58,altosui: Parse remaining standard telemetry packets,"altosui: Parse remaining standard telemetry packets

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309927304,1309927304,ef3ce687d73c1274ce5368432f4d449b063ce5c0
ef3ce687d73c1274ce5368432f4d449b063ce5c0,ef3ce687,altos: Complete new telemetry switchover,"altos: Complete new telemetry switchover

This involved rewriting the GPS code to use the telemetry structures
directly so that a memcpy could be used to transfer the data to the
telemetry packets, saving a bunch of code space, along with fixing up
the gps testing programs to deal with the structure changes.

In addition, the teledongle code needed to have the monitoring code
split into separate radio receiver and USB writer threads as the
packets are now back-to-back, and hence come too fast to wait for the
USB data to be sent to the host after each one.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309847961,1309847961,359681f23e2f71bc8f4975a4a76ae28c08ecab2e
359681f23e2f71bc8f4975a4a76ae28c08ecab2e,359681f2,altos: Add split telemetry code,"altos: Add split telemetry code

This sends every packet every time, which isn't correct, but should be
useful for testing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309828143,1309828143,b51e5466f7a125db873edd1fa9bd3881d7e98aad
b51e5466f7a125db873edd1fa9bd3881d7e98aad,b51e5466,altos: Shrink help text,"altos: Shrink help text

Reduce const space taken by command help text.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309828099,1309828099,9e5e4c1ad82d621ceb7286f72c87eeaf5976f9bf
9e5e4c1ad82d621ceb7286f72c87eeaf5976f9bf,9e5e4c1a,altos: Add sat info to GPS report command,"altos: Add sat info to GPS report command

Plan to use this to report current flight computer state in idle mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309828008,1309828008,06b6f78e22be38a26bfe11ed4d4b659d5b13f00c
06b6f78e22be38a26bfe11ed4d4b659d5b13f00c,06b6f78e,altos: Shrink const space in ao_config,"altos: Shrink const space in ao_config

Eliminate separate 'cmd' and 'help' struct entries.
Use \0 trick in cmd strings to eliminate whitespace.
Edit help text.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309827889,1309827889,d3c26e534d8df34cfbf29b70cd1b2692493ce150
d3c26e534d8df34cfbf29b70cd1b2692493ce150,d3c26e53,altos: teledongle does not need ao_packet_slave.c,"altos: teledongle does not need ao_packet_slave.c

TeleDongle doesn't provide slave interfaces, so remove ao_packet_slave
from the TD build

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309827831,1309827831,c763a3f9cf2bf055e9705ce5ff4bc172f445037d
c763a3f9cf2bf055e9705ce5ff4bc172f445037d,c763a3f9,Version strings must be < 8 bytes long,"Version strings must be < 8 bytes long

The new telemetry packets include the version string, so make sure its
less than 8 characters long

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309827772,1309827772,a08173197d5533ecb395102ed34e751135660d06
a08173197d5533ecb395102ed34e751135660d06,a0817319,doc: Fix a few minor telemetry doc mistakes,"doc: Fix a few minor telemetry doc mistakes

Multiple 'accel' entries in the Sensor packet.
Swap ground_accel and ground_pres to group accel cal data

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309827719,1309827719,98df3ba984acf3b47a09949bbea0f3264f711f5b
98df3ba984acf3b47a09949bbea0f3264f711f5b,98df3ba9,doc: Complete initial telemetry description,"doc: Complete initial telemetry description

Finish describing the contents and modulation scheme for telemetry
data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309814275,1309814275,06e82bd2c2a5eea153a053e542df9bc3537e9a01
06e82bd2c2a5eea153a053e542df9bc3537e9a01,06e82bd2,doc: Add telemetry format description,"doc: Add telemetry format description

Document the telemetry packet contents.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309596633,1309596633,7fd9b8f720add559b262e81d61ededc9df16ca94
7fd9b8f720add559b262e81d61ededc9df16ca94,7fd9b8f7,altosui: Support raw telemetry from TeleDongle,"altosui: Support raw telemetry from TeleDongle

Use raw telemetry frames when TeleDongle supports them, this involves
parsing the hex dump of the packet instead of having teledongle take
the packet apart. Only the legacy format is working at this point; the
altos bits for the new split telemetry frames is not written yet.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309248180,1309248180,cb239b7161feea8646425b1f5788c3c82ae24321
cb239b7161feea8646425b1f5788c3c82ae24321,cb239b71,altos: ao_radio_recv needs byte count *including* rssi and status,"altos: ao_radio_recv needs byte count *including* rssi and status

That's two more than the actual packet length.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1309248068,1309248068,336224a08327cadc95f6e5b564a4ddc64aaad8f8
336224a08327cadc95f6e5b564a4ddc64aaad8f8,336224a0,altos: Start adding new telemetry frame definitions,"altos: Start adding new telemetry frame definitions

These use the initial 24 bytes per frame plan, which will probably get
changed to 32 bytes per frame.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1308929511,1309227402,5e111fdf1f23203baeeb490ae1b69402ebd513b8
5e111fdf1f23203baeeb490ae1b69402ebd513b8,5e111fdf,altos: Add checksum to TELEM output lines,"altos: Add checksum to TELEM output lines

Verify the received telemetry lines to protect against OS data loss

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1308929472,1309227402,489a68ba8e3bc360e2e8fc887e4c4b840b5a0dd3
489a68ba8e3bc360e2e8fc887e4c4b840b5a0dd3,489a68ba,altos: Add arbitrary telemetry packet monitoring,"altos: Add arbitrary telemetry packet monitoring

This adds the ability to monitor arbitrary telemetry packets (up to
128 bytes), moving the telemetry data parsing up to the host.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1308770854,1309227402,0e67b6890dd3a06665239f8dfd2e69266d055e46
0e67b6890dd3a06665239f8dfd2e69266d055e46,0e67b689,altos: Rename telemetry to telemetry_orig,"altos: Rename telemetry to telemetry_orig

This makes room to create a new multi-packet telemetry format without
changing anything yet.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1308770805,1309227402,dc0b49dcbaa2d0a69e002c151337b6e9fd3060d9
dc0b49dcbaa2d0a69e002c151337b6e9fd3060d9,dc0b49dc,altosui: Handle old TeleDongle receiving kalman telemetry packets,"altosui: Handle old TeleDongle receiving kalman telemetry packets

The telemetry packets now send the kalman height/speed/accel values
instead of the ad-hoc values. If received by an old TeleDongle box,
the speed value will be of the form 0x8000abcd, which will be printed
as a 32-bit value by TeleDongle. We only want the abcd part, which is
the speed * 16. Detect this automatically and compute the correct
values for all three.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1307081790,1307081790,4d27e281f81aee88adff3d84085356ec310e4b92
4d27e281f81aee88adff3d84085356ec310e4b92,4d27e281,Switch version to 0.9.4,"Switch version to 0.9.4

For Mayhem, so we can tell what version each board is running

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1306381082,1306381082,479bdffa35d0b8d4e48868c8d20f3cb1549521ab
479bdffa35d0b8d4e48868c8d20f3cb1549521ab,479bdffa,"Revert ""altos: Debugging TBT issues -- check pin configuration after boot""","Revert ""altos: Debugging TBT issues -- check pin configuration after boot""

This reverts commit 514348055630edec12224c4b0964240b929759a3.

Looks like this was never a problem.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304751323,1304751323,66bdf0e066bc0bb7a326a6c2a9c88b69e5c1be66
66bdf0e066bc0bb7a326a6c2a9c88b69e5c1be66,66bdf0e0,altos: clear CPU port 1 interrupt flag when handled,"altos: clear CPU port 1 interrupt flag when handled

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304748767,1304748767,8be559baa979c15e78f8dba7879b383dbe3936d3
8be559baa979c15e78f8dba7879b383dbe3936d3,8be559ba,altos: Hook up the P1 ISR for TeleBT v0.1 bt_link line,"altos: Hook up the P1 ISR for TeleBT v0.1 bt_link line

Otherwise, we're heading off into the weeds...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304747955,1304747955,23f441b95e55fbee709382b05d325bc021285766
23f441b95e55fbee709382b05d325bc021285766,23f441b9,altos: Initialize beeper for telebt,"altos: Initialize beeper for telebt

Needed to get sounds to come out

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304747394,1304747394,514348055630edec12224c4b0964240b929759a3
514348055630edec12224c4b0964240b929759a3,51434805,altos: Debugging TBT issues -- check pin configuration after boot,"altos: Debugging TBT issues -- check pin configuration after boot

Make sure the serial pins are configured as peripherals
Make sure the ser_reset and bt_link pins are going the right direction.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304746978,1304746978,22e3ac0eb014b8255029763ae8180ad3527ba306
22e3ac0eb014b8255029763ae8180ad3527ba306,22e3ac0e,altos: Add beeper to TBT v0.1,"altos: Add beeper to TBT v0.1

It's available, let's use it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304746952,1304746952,6d858b64ee0e8c227c149d2af6d2d634536964f4
6d858b64ee0e8c227c149d2af6d2d634536964f4,6d858b64,altos: pull TBT v0.1 ser_reset line low,"altos: pull TBT v0.1 ser_reset line low

This line resets the BT module if held low for three seconds.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304745151,1304745151,3336d0f726afd1d43cf62280940e5fb91dab2e91
3336d0f726afd1d43cf62280940e5fb91dab2e91,3336d0f7,altos: Fix BT link status pin for real TBT hardware,"altos: Fix BT link status pin for real TBT hardware

The prototype used P2_1, while the real hardware uses P1_7. Lots of
defines to make this work...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304741599,1304741599,19bfa3882a2d95fcade256c2d63ad24f794281e5
19bfa3882a2d95fcade256c2d63ad24f794281e5,19bfa388,altos: Use USART configuration 1 with flow control for TBT,"altos: Use USART configuration 1 with flow control for TBT

It's just wired that way.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304739238,1304739303,d9cc27641fe1778c098b065bf110be7823e6c9f4
d9cc27641fe1778c098b065bf110be7823e6c9f4,d9cc2764,altos: Add telebt-v0.1 to Makefile,"altos: Add telebt-v0.1 to Makefile

Doesn't get built without it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304726258,1304726292,c360e5c04e30421e9ea2f7006b7d35aef35f1edd
c360e5c04e30421e9ea2f7006b7d35aef35f1edd,c360e5c0,first cut at a telebt turn on script,"first cut at a telebt turn on script
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1304726237,1304726237,c1760cebd47d0f03808f3204c0fcb1183f754e50
c1760cebd47d0f03808f3204c0fcb1183f754e50,c1760ceb,altos: Add preliminary telebt v0.1 defines,"altos: Add preliminary telebt v0.1 defines

This should make the telebt v0.1 binary that works on the real hardware.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1304721896,1304721896,72a03baa73698fc1213a74320e6253c2380dd8fa
72a03baa73698fc1213a74320e6253c2380dd8fa,72a03baa,altosui: Fix BT manage dialog so that the device lists resize,"altosui: Fix BT manage dialog so that the device lists resize

This makes the device scrolling lists fill any extra space when the
window is resized.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303797642,1303797642,e3bf13a38d24e95b16df1e2f01952d10f24cda10
e3bf13a38d24e95b16df1e2f01952d10f24cda10,e3bf13a3,altosui: Move AltosIgniteUI device open out of Swing thread,"altosui: Move AltosIgniteUI device open out of Swing thread

Eliminate more blocking code from the Swing thread.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303797308,1303797308,109344d54d3fa4f79342fd1ea2a3f4085475e30c
109344d54d3fa4f79342fd1ea2a3f4085475e30c,109344d5,altosui: Display reader name (usually the device) when an I/O error occurs,"altosui: Display reader name (usually the device) when an I/O error occurs

Access the reader name directly from the reader object instead of a
local variable (which wasn't getting set anyways).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303795720,1303795720,aa5caf6310f074109472e6f55d8bd9751fb75c4c
aa5caf6310f074109472e6f55d8bd9751fb75c4c,aa5caf63,altosui: Fix TeleBT name in flight monitor title,"altosui: Fix TeleBT name in flight monitor title

Was getting the product number, not the product name.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303791981,1303791981,2e7b7b80432bb251ac39efa1fa05d32b5f250e14
2e7b7b80432bb251ac39efa1fa05d32b5f250e14,2e7b7b80,altosui: Separate out flash debug code to separate thread,"altosui: Separate out flash debug code to separate thread

This avoids blocking the Swing thread while waiting for the serial
device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303791427,1303791427,214cd69c0e4a1617ed5cde8fc2f46a4cee6ecced
214cd69c0e4a1617ed5cde8fc2f46a4cee6ecced,214cd69c,altos: add telebt-v0.0 Makefile,"altos: add telebt-v0.0 Makefile

Git doesn't like to add these.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303624258,1303624258,d41edb3384b6336f3482e61b0c9f9400a8b4f519
d41edb3384b6336f3482e61b0c9f9400a8b4f519,d41edb33,altosui: Make flight data download work through TeleBT,"altosui: Make flight data download work through TeleBT

This required flushing input before reading data blocks and adjusting
some delays.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303252179,1303252179,44fb71ca3e5bccd5f601fc5a2d5da7292050b1d6
44fb71ca3e5bccd5f601fc5a2d5da7292050b1d6,44fb71ca,Merge branch 'telemini' into telebt,"Merge branch 'telemini' into telebt
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303247199,1303247199,"2ebdb888f6792de70b3132950a988d49752d264e,c269e263a6accd815ed5d08c0f5a6c3d5b9d3853"
2ebdb888f6792de70b3132950a988d49752d264e,2ebdb888,altosui: Eliminate ao_cmd_filter hook,"altosui: Eliminate ao_cmd_filter hook

Disabling status messages means we don't need to filter them out of
the input stream.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303246879,1303246879,7f5c9986dfa2d130b6c8c14308638cce49391a6e
7f5c9986dfa2d130b6c8c14308638cce49391a6e,7f5c9986,altos: remove BT logging code,"altos: remove BT logging code

This was used to debug the serial line startup.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303245750,1303245750,0195ff442c1da5d363dfda3f88f41865d0c6b469
0195ff442c1da5d363dfda3f88f41865d0c6b469,0195ff44,altos: Remove bt debug command,"altos: Remove bt debug command

This will permit some additional cleanups.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303245070,1303245070,ce7cf0c5ddc5405f6f474f4e20752fc0b02f3ecb
ce7cf0c5ddc5405f6f474f4e20752fc0b02f3ecb,ce7cf0c5,altos: Simplify BT communications,"altos: Simplify BT communications

Eliminate stdio I/O wrappers

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303244860,1303244860,e3d501940718428135e04995dff7fef691c08a20
e3d501940718428135e04995dff7fef691c08a20,e3d50194,altos: Solidify BT connections,"altos: Solidify BT connections

Use delays while sending commands to BT module.
Don't use BT for stdio until the module is initialized.
Add \r to name setting command
Don't require 'connected' signal for command input.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303244419,1303244419,6b5957d5f6f8181da7be98c9bce49a0ec0b4a713
6b5957d5f6f8181da7be98c9bce49a0ec0b4a713,6b5957d5,altosui: Wait two seconds after bluetooth connect XXX,"altosui: Wait two seconds after bluetooth connect XXX

""something"" isn't quite ready to communicate right after the device is
connected, so we stick a delay in. There should be a better fix.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303234888,1303234888,8de9d3cbfcd1db7b554fb761296a8de09aafc8c3
8de9d3cbfcd1db7b554fb761296a8de09aafc8c3,8de9d3cb,altos: Add delays to bt startup sequence,"altos: Add delays to bt startup sequence

The BT device takes a few seconds after power-up before it is ready to
receive commands.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303233947,1303233947,17f38e045fcd8ca0224095c0b2b7b098df77a8d8
17f38e045fcd8ca0224095c0b2b7b098df77a8d8,17f38e04,altosui: Use persistent list of bluetooth devices for device dialogs,"altosui: Use persistent list of bluetooth devices for device dialogs

Store a list of known bluetooth devices as preferences. Always include
those in device dialogs with an option to go browse for more devices
in both the device dialog and the Configure AltosUI dialog.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303227820,1303227820,f249e5926f5fd9f86c41e7f0a414193533d4d8b0
f249e5926f5fd9f86c41e7f0a414193533d4d8b0,f249e592,altosui: Make bluetooth dialog modal,"altosui: Make bluetooth dialog modal

This allows it to be displayed correctly while the device dialog box
(also modal) is up.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1303168598,1303168598,84163eee7847a09fe78f8762b28f857d76bf5755
84163eee7847a09fe78f8762b28f857d76bf5755,84163eee,altosui: Make AltosBTDevice implement AltosDevice interface,"altosui: Make AltosBTDevice implement AltosDevice interface

This will allow the use of either USB or BT devices through the
AltosDevice interface.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1302801750,1302801750,9cdef76c1275b343099d0d01af82d7eadd36a410
9cdef76c1275b343099d0d01af82d7eadd36a410,9cdef76c,altosui: Create abstract AltosDevice class,"altosui: Create abstract AltosDevice class

This will wrap either USB or BT devices. The USB device constants have
been moved to Altos.java

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1302801149,1302801149,5b3f18b38d80aa041b971204bf7a94278bd9584a
5b3f18b38d80aa041b971204bf7a94278bd9584a,5b3f18b3,altosui: Add primitive bluetooth device manager UI.,"altosui: Add primitive bluetooth device manager UI.

This isn't useful, but does inquire for available bluetooth devices
and show them in a list.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1302317175,1302799629,8dd455204cf8712fa8c142b0c0517cec1bf5fd0f
c269e263a6accd815ed5d08c0f5a6c3d5b9d3853,c269e263,altos: Write a few pre-launch samples for Tm/Tn devices,"altos: Write a few pre-launch samples for Tm/Tn devices

Record pre-launch samples in a small ring and flush that to flash when
launch is detected. This provides a complete record of the flight,
rather than simply starting after launch detect.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1302799128,1302799128,a0fb471ce10642fc4a4bd40e4a81f8d6fe7a7c21
a0fb471ce10642fc4a4bd40e4a81f8d6fe7a7c21,a0fb471c,altosui: oops - lost state changes when downloading eeprom data.,"altosui: oops - lost state changes when downloading eeprom data.

This would cause the reader to just keep reading past the end of the
flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1302751658,1302751658,7f49d694e776819e03b2c708e1c4ee23ba311430
7f49d694e776819e03b2c708e1c4ee23ba311430,7f49d694,altos/altosui: Log averaged baro sensor data in Tm/Tn,"altos/altosui: Log averaged baro sensor data in Tm/Tn

Instead of logging the best height guess from the kalman filter, log
barometer data. The logged data consists of the average value betwen
log points to reduce noise.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1302414792,1302414792,835ab3a8c2741a09b27de58c37439a193c9919ce
8dd455204cf8712fa8c142b0c0517cec1bf5fd0f,8dd45520,altosui: Add low-level Bluetooth APIs,"altosui: Add low-level Bluetooth APIs

Adds the JNI functions to query and connect to arbitrary
bluetooth devices.

Adds Java wrappers to construct a list of proximate bluetooth devices.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1302282835,1302282835,bf1c7df5301a1727e871a8447f835fe75bdce3fc
bf1c7df5301a1727e871a8447f835fe75bdce3fc,bf1c7df5,altosui: Add TeleBT USB device support,"altosui: Add TeleBT USB device support

TeleBT can work just like a TeleDongle over USB.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1302282770,1302282770,1a54a58d72147888f783a3caf364479efff4ed9b
1a54a58d72147888f783a3caf364479efff4ed9b,1a54a58d,altos: Use PIO(6) on BTM to monitor BT connection. Fix BTM init.,"altos: Use PIO(6) on BTM to monitor BT connection. Fix BTM init.

PIo(6) appears to be an active-low indication of the Bluetooth
connection status. Hook this up using an interrupt to track the
link state instead of using in-band status messages.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1302238838,1302238838,f28efe271f9670473249574f6bcf6e160fe58c7b
f28efe271f9670473249574f6bcf6e160fe58c7b,f28efe27,Merge branch 'telemini' into telebt,"Merge branch 'telemini' into telebt
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301711722,1301711722,"8db5c52f1c76a05020e4e0afbe4ea27485ad9f82,835ab3a8c2741a09b27de58c37439a193c9919ce"
835ab3a8c2741a09b27de58c37439a193c9919ce,835ab3a8,altosui: Add missing AltosTelemetryMap.java file,"altosui: Add missing AltosTelemetryMap.java file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301711700,1301711700,c0971abc02b05d136aea257f3f40ba3b22b1d441
8db5c52f1c76a05020e4e0afbe4ea27485ad9f82,8db5c52f,altos: Clean up BT serial communcations,"altos: Clean up BT serial communcations

Disable echo on both ends in command mode to eliminate looping error
values.

Switch to 57600 baud to improve performance.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301703968,1301703968,a5d60fdb9c969c1516feb76a16001c9688112c4c
a5d60fdb9c969c1516feb76a16001c9688112c4c,a5d60fdb,altos: Make cmd echo per-connection instead of global,"altos: Make cmd echo per-connection instead of global

Allow different connections to use different echo values, permitting
the packet link to turn off echo while the USB link still has it on.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301703907,1301703907,4e2c18249e16c98cf5f7dccdf8d3b84bc473863a
4e2c18249e16c98cf5f7dccdf8d3b84bc473863a,4e2c1824,altos: Clean up serial initialization,"altos: Clean up serial initialization

Flush serial input buffers when switching speeds.
Ensure pin configuration is correct.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301701692,1301701692,92386f2e8419c4df125692cc998eb72ec49bf991
92386f2e8419c4df125692cc998eb72ec49bf991,92386f2e,altos: Clean up usage of serial port for stdio,"altos: Clean up usage of serial port for stdio

Code wanting to use this must invoke ao_add_stdio; that way
the link can be configured before command processing starts.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301692376,1301692376,9f8a96a8516e13878b329dbf1da855ed9a3219c4
9f8a96a8516e13878b329dbf1da855ed9a3219c4,9f8a96a8,altos: Make ao_serial_drain public,"altos: Make ao_serial_drain public

Allow external code to discard serial input

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301692304,1301692304,4f243a282f9aeb7433ccb2942850d380a091e603
4f243a282f9aeb7433ccb2942850d380a091e603,4f243a28,altos: Remove serial monitor command,"altos: Remove serial monitor command

This takes up space and isn't that useful these days

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301692237,1301692237,39bde78edc863d9d2ef50a59b8f28ab6274892b4
39bde78edc863d9d2ef50a59b8f28ab6274892b4,39bde78e,altos: Allow any stdio to be used with packet forwarding,"altos: Allow any stdio to be used with packet forwarding

There's no reason to restrict packet forwarding to work only from
USB.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301692117,1301692117,01952da35a57ae4da062facb26b3c6d7de29190f
01952da35a57ae4da062facb26b3c6d7de29190f,01952da3,altos: Provide for a pre-filter on commands,"altos: Provide for a pre-filter on commands

This allows for external code to see each command line before it is
processed and potentially skip it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301692043,1301692043,359ba0d9fc2c5947e6adc98bebcd061069c61e79
359ba0d9fc2c5947e6adc98bebcd061069c61e79,359ba0d9,altos: expose set of available stdio values,"altos: expose set of available stdio values

This lets external code manipulate which connection to communicate
over.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301691898,1301691898,ce18eaa28b1385c962c09459cbc5f20e234d9ad5
ce18eaa28b1385c962c09459cbc5f20e234d9ad5,ce18eaa2,altos: Add P2SEL_*_MASK defines to cc1111.h,"altos: Add P2SEL_*_MASK defines to cc1111.h

These are used to avoid having the code ""know"" which selections are 1
and which are 0 bits.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301691805,1301691805,8e74cf6d1c70a7a17d01c20f6831571245392498
8e74cf6d1c70a7a17d01c20f6831571245392498,8e74cf6d,altos: Add initial TeleBT code,"altos: Add initial TeleBT code

Prototyping with a TeleMetrum v0.1 board and a serial link to a
bluetooth module.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301630294,1301630347,c0971abc02b05d136aea257f3f40ba3b22b1d441
c0971abc02b05d136aea257f3f40ba3b22b1d441,c0971abc,altos: Make ao_flight_test show true height but report saturated height,"altos: Make ao_flight_test show true height but report saturated height

To simulate a saturated baro sensor, clip baro data at a specified
altitude. Continue to report the 'true' altitude in the output so that
the resulting graphs are useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301630118,1301630118,8a14142e7b37031a51409f121b913fe793bf3603
8a14142e7b37031a51409f121b913fe793bf3603,8a14142e,"altos: Baro useful ceiling is MSL, not AGL","altos: Baro useful ceiling is MSL, not AGL

Use MSL instead of AGL for detecting over-range baro sensor values.
Always trust baro sensor during descent; it'll get there eventually.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301629992,1301629992,a9dae18a664f70b668159487015e61be7f776926
a9dae18a664f70b668159487015e61be7f776926,a9dae18a,altos: Reflect ao_flight split in ao_flight_test dependencies,"altos: Reflect ao_flight split in ao_flight_test dependencies

Need to rebuild ao_flight_test when any of the flight sources change

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301629875,1301629875,f558cfa1df77c36a459168c1953d0945ee5a7f9f
f558cfa1df77c36a459168c1953d0945ee5a7f9f,f558cfa1,altosui: Only plot acceleration when present in data file,"altosui: Only plot acceleration when present in data file

Eliminates a bogus axis and data line for devices which do not have an
accelerometer.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301510883,1301510883,a9df9fc257eb2d7038d66ac7c2539aae4474bf12
a9df9fc257eb2d7038d66ac7c2539aae4474bf12,a9df9fc2,altosui: Parse and export Max flight log value,"altosui: Parse and export Max flight log value

New configuration field might as well get dumped to the .csv files.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301510827,1301510827,87bff181a95f6bf92c2cec350d331ba6af779e80
87bff181a95f6bf92c2cec350d331ba6af779e80,87bff181,altos: Enable logging during nano flights,"altos: Enable logging during nano flights

Not having logging wasn't very useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301447507,1301447507,011e37f27b3926a42c8c1a74e0f179bb48829ec7
011e37f27b3926a42c8c1a74e0f179bb48829ec7,011e37f2,altos: Run RDF beacon after apogee instead of waiting for landing,"altos: Run RDF beacon after apogee instead of waiting for landing

This provides tracking when GPS fails, or on TeleMini.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301447446,1301447446,08e6bbef2c3529dfd468ef221c526fc9f3ed5b81
08e6bbef2c3529dfd468ef221c526fc9f3ed5b81,08e6bbef,altos: ao_sample_preflight was exiting preflight mode immediately,"altos: ao_sample_preflight was exiting preflight mode immediately

Need to stay in pre-flight mode until we've gotten enough sensor data
to calibrate things appropriately. The conversion from a unified
ao_flight.c file was just broken here.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301418526,1301418526,56d045040c49728a854741e99545766f3723da5e
56d045040c49728a854741e99545766f3723da5e,56d04504,altosui: Don't display 0000-00-00 for missing flight log dates,"altosui: Don't display 0000-00-00 for missing flight log dates

With Tm/Tn not having GPS to get the current date, it's no longer
unusual to have no date for a flight log, so don't show the 0000-00-00
piece in that case.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301416767,1301416767,8ade7d99f02df825e70d0a964b4648156101ef78
8ade7d99f02df825e70d0a964b4648156101ef78,8ade7d99,altosui: Display exception messages from swing thread,"altosui: Display exception messages from swing thread

Flight log management exceptions were getting displayed from the log
serial I/O thread instead of the swing thread. That's a bad plan.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301416703,1301416703,2f9be009ef26e3d7539f5932d267d7a8a7bcb7eb
2f9be009ef26e3d7539f5932d267d7a8a7bcb7eb,2f9be009,altosui: Make deployment testing handle Connecting... dialog,"altosui: Make deployment testing handle Connecting... dialog

Supporting the Connecting... dialog requires moving all serial
communication to a separate thread. This was done by creating a worker
thread and command queue to communicate between the UI and the serial line.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301416631,1301416631,573edcd7dfe10ac3251396eae88eece55d82bcb6
573edcd7dfe10ac3251396eae88eece55d82bcb6,573edcd7,altosui: Make flight log downloading handle 'Connecting...' dialog,"altosui: Make flight log downloading handle 'Connecting...' dialog

This required moving all of the serial communication to a separate
thread and making the bulk of the download operation run after that
has finished.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301380682,1301380682,c71a145daefb86d2c1297abec68e54bd951e3adf
c71a145daefb86d2c1297abec68e54bd951e3adf,c71a145d,altosui: Clean up packet link connecting dialog,"altosui: Clean up packet link connecting dialog

Make sure the dialog is destroyed after use (otherwise, it hangs
around on the screen sometimes).

Switch timeout before showing dialog to 500ms -- that brings the
dialog up less often when unnecessary.

Use 'timeout_started' boolean to indicate whether the I/O thread has
queued the dialog for display and whether it needs to queue a call to
close it down.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301380505,1301380505,c6e7e812d67f91c63ba4982f7a899a72584027de
c6e7e812d67f91c63ba4982f7a899a72584027de,c6e7e812,altos: Create custom nano flight code,"altos: Create custom nano flight code

No igniters, just 'pad/drogue/landed' modes (where 'drogue' ==
'flying'). A constant 1Hz telemetry and RDF rate.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301361530,1301361530,c754759a2d503633d527da4ebb20eb859cd506fd
c754759a2d503633d527da4ebb20eb859cd506fd,c754759a,altos: Split up flight code into separate flight/sample/kalman bits,"altos: Split up flight code into separate flight/sample/kalman bits

The flight code mashed together data processing, filtering and actual
flight managament into one giant pile. Split things up so that we
have:

 ao_sample.c: Sensor data processing. Reads the ring, handles calibration
 ao_kalman.c: Filter the data to track the accel/speed/height values
 ao_flight.c: Flight state management, specific to rocketry.

The plan is to re-use ao_sample.c and ao_kalman.c for hardware not
specifically designed for rocketry, like TeleNano.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301360084,1301360084,006de838bbb096b9443863a46b8a125b1e6b5600
006de838bbb096b9443863a46b8a125b1e6b5600,006de838,altosui: Handle serial calls from swing thread,"altosui: Handle serial calls from swing thread

Calls from the swing thread cannot be canceled as there's no way to
put up the cancel dialog. In this case, simply use the 5 second
timeout and fail if no communication occurs within that amount of time.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301212087,1301212087,f23d0f3cbf1fb0c8eab497e266625f6410b69ba3
f23d0f3cbf1fb0c8eab497e266625f6410b69ba3,f23d0f3c,altosui: Tell serial device which frame to use for timeout dialogs,"altosui: Tell serial device which frame to use for timeout dialogs

For the timeout dialog to appear, a frame must be configured for it to
appear near. This patch sends the frame from the eeprom download
functions to the serial code. That path doesn't yet work as the eeprom
download is still trying to talk to the serial device from the swing
event thread, which prevents the cancel dialog from working.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301211979,1301211979,067b21993e9a97fceadb355e571e5610535336a8
067b21993e9a97fceadb355e571e5610535336a8,067b2199,altosui: Allow radio channel to be configured over the radio link,"altosui: Allow radio channel to be configured over the radio link

TeleMini/TeleNano can't be configured via USB, so we need to allow
the radio channel to be set over the radio link.

This change carefully sets the new radio channel, disables the remote
link and then sets the teledongle channel to the new value and brings
the link back up.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301210018,1301210018,91a75279b6d306ba9d068a28c64917d5312122e8
91a75279b6d306ba9d068a28c64917d5312122e8,91a75279,altosui: Off-by-one error in telemetry format configuration UI,"altosui: Off-by-one error in telemetry format configuration UI

The telemetry format menu uses 0 for full and 1 for tiny, but the
telemetry configuration uses 1 for full and 2 for tiny. One direction
(config to UI) was right, the other (UI to config) was wrong.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301209921,1301209921,7ce8c9081e703d1405c2595ab9bda0cfa218c6c4
7ce8c9081e703d1405c2595ab9bda0cfa218c6c4,7ce8c908,altos: full logging must flush pending data before checking state,"altos: full logging must flush pending data before checking state

Flight state must be checked only after any pending data have been
written to the log as the 'current' flight state is only valid when
the pending data values have been processed. This ensures that the
'boost' state is not marked until the full ring of data is
written. This ensures that the data processing code can find the
barometer values from before boost to get an idea of the ground
pressure value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301207934,1301207934,3945d8f986d8f4bd3186a2cbaed5186e49d59839
3945d8f986d8f4bd3186a2cbaed5186e49d59839,3945d8f9,altos: Variable log rate in full logging code too,"altos: Variable log rate in full logging code too

With the fixed ADC rate used to get better data during flight, the
logging code now needs to vary the data storage rate so that descent
data is recorded at 10 samples/second while ascent data is recorded at
1 sample per second. Having the logging code do this itself eliminates
any interaction with the flight code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301206536,1301206536,97517ee585462c2d355f23f999fb8d9ebd908ec1
97517ee585462c2d355f23f999fb8d9ebd908ec1,97517ee5,altosui: Allow TM config connection to be canceled.,"altosui: Allow TM config connection to be canceled.

This leaves the config UI connection attempt running and pops up a
dialog box when it takes 'too long' in the remote case so that users
with Tm or Tn devices can bring up the UI, and then boot the Tm/Tn
without needing to time things carefully.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301122882,1301126363,2c121f1ef495e8af3eb39210baa40e212b691894
2c121f1ef495e8af3eb39210baa40e212b691894,2c121f1e,altosui: swing hide/show methods are deprecated,"altosui: swing hide/show methods are deprecated

I don't know why, but they are, so just replace them with
setVisible calls.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301115849,1301115849,b155647472ddfacb07c5ffa832e4d1f4a13ad342
b155647472ddfacb07c5ffa832e4d1f4a13ad342,b1556474,altosui: Remove extra AltosEepromBlock layer,"altosui: Remove extra AltosEepromBlock layer

This was interposed between the download layer and the eeprom layer to
hold a eeprom block full of flight log records. The addition of the tiny
log format required reworking the code to hold chunks full of eeprom
data without regard to their content, so this content-specific layer
didn't seem useful anymore.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301115678,1301115840,011615d40b3cb1d1c0ab9fa41e139e263a6a51e7
011615d40b3cb1d1c0ab9fa41e139e263a6a51e7,011615d4,altosui: Add support for downloading TeleMini/TeleNano flight logs,"altosui: Add support for downloading TeleMini/TeleNano flight logs

Splits the eeprom downloading code into eeprom block downloading and
separate eeprom data parsing so that the new data logging format can
share the data downloading code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301114071,1301114144,dea80af81b388cc3d7073444919f4e98b12fa730
dea80af81b388cc3d7073444919f4e98b12fa730,dea80af8,altosui: Remove a bunch of debug printfs from the eeprom manager code,"altosui: Remove a bunch of debug printfs from the eeprom manager code

Just noise on stdout.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1301113790,1301113790,7f5b5848ad6ef5c808638a29c3dc0101b56ed11e
7f5b5848ad6ef5c808638a29c3dc0101b56ed11e,7f5b5848,altosui: Add telemetry format menu and preferences,"altosui: Add telemetry format menu and preferences

Switches the TeleDongle between full and tiny telemetry packet
formats, saving the last used format for each teledongle in the
application preferences.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300921723,1300921723,f3e68341f6f5daaf26dd162e4f9a06c29988986a
f3e68341f6f5daaf26dd162e4f9a06c29988986a,f3e68341,altosui: Add support for telemetry version 4,"altosui: Add support for telemetry version 4

New telemetry format needed to support TeleNano and TeleMini

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300912077,1300912077,1e976a105423f2da1842f70da531c9051ba88a7f
1e976a105423f2da1842f70da531c9051ba88a7f,1e976a10,Add description to test flights,"Add description to test flights
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300844551,1300844551,93040ef4d0bd90ec5ae052f22243cd56adfb300a
93040ef4d0bd90ec5ae052f22243cd56adfb300a,93040ef4,Add ao_kalman.h to .gitignore,"Add ao_kalman.h to .gitignore
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300844405,1300844405,43a94380032300a2e33e1faa1efe93e858e0a2cf
43a94380032300a2e33e1faa1efe93e858e0a2cf,43a94380,altos: Exit flight test at landing. Allow description in test flight list,"altos: Exit flight test at landing. Allow description in test flight list

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300844259,1300844259,32364c9e0d346e0e5d517e18d4e90b8ff2fa944f
32364c9e0d346e0e5d517e18d4e90b8ff2fa944f,32364c9e,altos: Ignore alt error for fast->coast. Allow larger error for baro apogee.,"altos: Ignore alt error for fast->coast. Allow larger error for baro apogee.

With the fixed kalman filter, transitions across mach don't cause
bumps in the merged filter.

And, with working kalman bits, the signal for broken baro detection is
stronger and so we can allow for baro apogee detection in cases where
noise occurs close to apogee.

Bump the kalman filter to trust the baro less so that the model tracks
across mach.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300844018,1300844018,3d2042ccc2d29e4cb8ea39c5c69d07cb7e3daeea
3d2042ccc2d29e4cb8ea39c5c69d07cb7e3daeea,3d2042cc,altos: Restore sensible kalman values,"altos: Restore sensible kalman values

Now that the kalman code seems to work correctly, restore the sensor
errors and model errors to match reality

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300780508,1300798414,7d7b476564a16eda81ab3406f70a21995e1b464e
7d7b476564a16eda81ab3406f70a21995e1b464e,7d7b4765,altos: Fix up flight code testing,"altos: Fix up flight code testing

This automates flight code testing by reporting mis-detected apogee or
main events.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300798312,1300798414,a80d3836cfce3d4cfa7a71068539415c2dc421cd
a80d3836cfce3d4cfa7a71068539415c2dc421cd,a80d3836,altos: Missing parens and some bad arithmetic in the kalman code,"altos: Missing parens and some bad arithmetic in the kalman code

Fixed point computations are a pain.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300798229,1300798414,f30de5766c1eefb18c7d024a2cf10ce02de41071
f30de5766c1eefb18c7d024a2cf10ce02de41071,f30de576,altos: Add ao_flight_debug code,"altos: Add ao_flight_debug code

Trace the kalman filter to make sure it's working.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300796945,1300798414,f3053b1f3c85d4fd84b3c6cc87858f433166df34
f3053b1f3c85d4fd84b3c6cc87858f433166df34,f3053b1f,altos: Clean up some debug stuff in ao_flight.c,"altos: Clean up some debug stuff in ao_flight.c

Remove some spurious printf debugging.
Remove an attempt at discovering broken accelerometer code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300781047,1300798414,6864e06d88a5b908cffa7c4cd2be8969ff46ce4d
6864e06d88a5b908cffa7c4cd2be8969ff46ce4d,6864e06d,"altos/kalman: Kalman terms can be > 1, use 32-bit fixed point","altos/kalman: Kalman terms can be > 1, use 32-bit fixed point

Because speed and acceleration are scaled by 16, it's fairly common
for the kalman terms to end up larger than 1. Instead of trying to
fuss with 16-bit values and shifts, just use 32-bit values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300780264,1300780264,c14d6c5ace1d67bd948273ceb7eb6807b29c3806
c14d6c5ace1d67bd948273ceb7eb6807b29c3806,c14d6c5a,altos: Compute a 'trust' value for the barometer,"altos: Compute a 'trust' value for the barometer

Instead of making the baro use/don't-use decision binary, use a 'trust
value' which slowly migrates from baro+accel to accel-only mode. This
eliminates bumps in the data from a rapid shift.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300751483,1300751483,7b009b2efe3af8722c358c304c2243652594e0d5
7b009b2efe3af8722c358c304c2243652594e0d5,7b009b2e,altos: Switch telemetrum over to kalman filter,"altos: Switch telemetrum over to kalman filter

This changes the full telemetry stream to include kalman data instead
of the old ad-hoc flight data. It's compatible in that the packet
sizes are the same so teledongle can receive either and figure out
which it has received.

A few plotting and testing tools are added to make validating the new
code easier.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300740171,1300740171,20427ae4965f756aac0cedc5179a1c45b9a781f2
20427ae4965f756aac0cedc5179a1c45b9a781f2,20427ae4,altos: Add nickle kalman implementation.,"altos: Add nickle kalman implementation.

This generates the constants needed to implement Kalman filtering in
the flight firmware.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300705167,1300705167,ca3f03ef5c09446bebf0f5734f36a0248c457b1d
ca3f03ef5c09446bebf0f5734f36a0248c457b1d,ca3f03ef,altos: Add .sdcdbrc file for teledongle,"altos: Add .sdcdbrc file for teledongle

My sdcdb script uses this to set command line options automatically

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300604139,1300604139,be838db49d999426a9dd02c0166fe161722f1e61
be838db49d999426a9dd02c0166fe161722f1e61,be838db4,altos: New telemetry report format (version 4). Supports tiny telemetry.,"altos: New telemetry report format (version 4). Supports tiny telemetry.

This completely replaces the version 3 format with a much simpler and
easier to parse scheme. It's described in detail in ao_telem.h, but
the basic idea is that the whole line is split into name/value pairs,
separated by whitespace. Every name is unique, and the values are
either strings or integers. No extraneous formatting or units are
provided.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300603988,1300604111,ad6bb342d237988404fa32540b38c61d6ddc1f0d
ad6bb342d237988404fa32540b38c61d6ddc1f0d,ad6bb342,altos: The kalman code requires a constant sample rate,"altos: The kalman code requires a constant sample rate

The kalman function can't handle a variable sample rate, so keep the
ADC running at full speed for the whole flight instead of slowing it
down after apogee.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300603862,1300603862,31feb7777f73fed61193d3404f457ea1a081fe9c
31feb7777f73fed61193d3404f457ea1a081fe9c,31feb777,altos: Split telenano main from telemini,"altos: Split telenano main from telemini

Eventually, telenano will run different code; prepare for this by
creating a telenano-specific main routine.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300603781,1300603781,8950df02382f5f0aea5bac078fdf7134b98c43ed
8950df02382f5f0aea5bac078fdf7134b98c43ed,8950df02,altos: Split out tiny telemetry from full telemetry,"altos: Split out tiny telemetry from full telemetry

The TeleMini and TeleNano boards do not have either GPS or
accelermeters, and they also run the kalman filter which produces
standard unit measurements for the flight height/speed/accel
values. This makes the telemetry significantly
different. ao_telemetry_tiny.c sends the required data.

Note that TeleNano sends the same telemetry as telemini at this point;
there are a couple of values which are not useful, but the overhead of
sending them is small enough that the hassle of having three telemetry
formats seemed excessive.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300603578,1300603578,5ba75e95c98d3e441a58d6f75d328d579e1997fe
5ba75e95c98d3e441a58d6f75d328d579e1997fe,5ba75e95,altos: Make telemetry interval more consistent,"altos: Make telemetry interval more consistent

Instead of using a delay between telemetry packets, use a telemetry
period and compute an appropriate delay each time. This requires
changing the ascent telemetry from a 50ms delay to a 100ms interval,
to provide a regular 10 packets-per-second rate. Before, we counted on
the telemetry packet taking about 50ms to send so that we would
receive about 10 per second.

This also eliminates delays during descent for RDF tones -- those will
get transmitted in the interval between telemetry packets without
interrupting the spacing of those packets.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300603304,1300603304,3f0bc801fd08a613c681504f0d1f9374486a2487
3f0bc801fd08a613c681504f0d1f9374486a2487,3f0bc801,altos: Configure packet size from send/recv parameters.,"altos: Configure packet size from send/recv parameters.

Instead of setting the packet size at configuration time, use the
provided packet size to the send/recv functions to configure the
radio. This eliminates many configuration calls, leaving us with 'RDF'
mode and 'packet' mode, the latter working for telemetry and the
bi-directional link.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300602680,1300602680,5c28b9312d90a3a66016abc641c20bcd852d69f8
5c28b9312d90a3a66016abc641c20bcd852d69f8,5c28b931,altos: Don't init packet slave on TD. Make slave start optional,"altos: Don't init packet slave on TD. Make slave start optional

Oops. TeleDongle was starting the packet slave code, which kinda
wrecked its ability to receive telemetry packets. This patch simply
removes the packet slave code from teledongle as it cannot be used
(yet), it also makes the packet slave code initialization take a
parameter which controls whether to start that by default; in the
future, perhaps TeleDongle will gain a command to start packet slave mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300602435,1300602435,e980b251e5a4d25410710a9aa89ef940e06b0d93
e980b251e5a4d25410710a9aa89ef940e06b0d93,e980b251,altosui: Add software version to Configure AltosUI dialog,"altosui: Add software version to Configure AltosUI dialog

Show this somewhere so we can figure out what is installed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300585432,1300585675,1aeb759c48f475ffaaae787515e080440c8386c3
1aeb759c48f475ffaaae787515e080440c8386c3,1aeb759c,altos: Baro-only boards must not detect launch on accel or speed data,"altos: Baro-only boards must not detect launch on accel or speed data

The baro sensor generates too much noise to use small changes in
computed speed or acceleration to cause a false launch detect.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300562888,1300562888,7a4f6d5ad55637cde97a1e2f247f92df59bc2e14
7a4f6d5ad55637cde97a1e2f247f92df59bc2e14,7a4f6d5a,altos: Write height values to log for nano/mini,"altos: Write height values to log for nano/mini

This is a lot more useful than the old filtered pressure data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300507275,1300507275,c985bb6a19c710409629f3c095332ba7afcf5248
c985bb6a19c710409629f3c095332ba7afcf5248,c985bb6a,altos/test: Add scripts to run lots of flights through the code,"altos/test: Add scripts to run lots of flights through the code

This runs a long list of flights (there's a user-specific path
pointing at the flights) and squawks if the baro and dual flight
computers don't match.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300505819,1300505819,dbe915795c66995805b5f37e6eb698cf2c143e61
dbe915795c66995805b5f37e6eb698cf2c143e61,dbe91579,altos: Fix mini/nano default log size to available flash space,"altos: Fix mini/nano default log size to available flash space

Also, remove accel cal code from boards without accel

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300505172,1300505172,5db94e1e230bade966a997aa83165405a9ec9d83
5db94e1e230bade966a997aa83165405a9ec9d83,5db94e1e,Merge branch 'telemini' of ssh://git.gag.com/scm/git/fw/altos into telemini,"Merge branch 'telemini' of ssh://git.gag.com/scm/git/fw/altos into telemini
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1300504359,1300504359,"1a8f45e7b720d01d3ff0c35ed1caaf8cbe0c3119,cbb968f5cf03625d453d84dc535758072a2c04c7"
1a8f45e7b720d01d3ff0c35ed1caaf8cbe0c3119,1a8f45e7,fix up script to work and have reasonable texts,"fix up script to work and have reasonable texts
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1300504332,1300504332,32c51840c792a737019fbc9fe42f2ca073b71827
cbb968f5cf03625d453d84dc535758072a2c04c7,cbb968f5,altos: Add TeleNano support,"altos: Add TeleNano support

This just uses the TeleMini bits, which should work fine for now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300504045,1300504045,32c51840c792a737019fbc9fe42f2ca073b71827
32c51840c792a737019fbc9fe42f2ca073b71827,32c51840,"altos: Tiny logging fixes. Scan at start, stop when land or full.","altos: Tiny logging fixes. Scan at start, stop when land or full.

Initialize the flight log for tiny systems by scanning the log area to
find the current flight number and log area bounds.

Stop logging data when the flight is over, or when the log area is
full.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300502986,1300502986,62eae8a17d870e8ac6937ba23da01a5fbc652c6c
62eae8a17d870e8ac6937ba23da01a5fbc652c6c,62eae8a1,altos: Add kalman filters for baro-only boards,"altos: Add kalman filters for baro-only boards

This adds a baro-only kalman filter to track the state of the rocket,
and then uses it to control flight events instead of the existing
ad-hoc mechanisms.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300492391,1300492391,c826fab31f8aea25a942b6bb8435d4b04c1bef10
c826fab31f8aea25a942b6bb8435d4b04c1bef10,c826fab3,altos: Add tiny logging for TeleMini/TeleNano,"altos: Add tiny logging for TeleMini/TeleNano

This splits the logging code into management of the log space within
storage and separate code to actually write suitable log entries.  A
new log writing module, ao_log_tiny, is added which writes only
altimeter data at a fairly low data rate for devices using on-chip
storage.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300402810,1300402810,8b546b474b7b6c5b4169b4c1ca09c6f17ebb3ae5
8b546b474b7b6c5b4169b4c1ca09c6f17ebb3ae5,8b546b47,ignore new flight test file,"ignore new flight test file
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1299843661,1300333156,82707a05af0eb2d54f46b58805c95cdf4e5a3703
82707a05af0eb2d54f46b58805c95cdf4e5a3703,82707a05,altos: Internal flash ops block when running from flash,"altos: Internal flash ops block when running from flash

The docs say that if you are executing from flash, then the CPU will
stall after a flash write or erase command is started until the
operation is complete. Take advantage of that to simplify the flash
code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300333010,1300333010,1d8579f973bfe1047ee91f03555e74abdc483e69
1d8579f973bfe1047ee91f03555e74abdc483e69,1d8579f9,altos: oops -- altitude reporting wasn't pausing between signals,"altos: oops -- altitude reporting wasn't pausing between signals

need to actually alternate the LED/tone with some space so you can
count.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299544303,1300316258,d007bccf6cb36d24a9c7c48de7d80759ac6f2e37
d007bccf6cb36d24a9c7c48de7d80759ac6f2e37,d007bccf,ao-load: Make usb descriptor rewriting optional,"ao-load: Make usb descriptor rewriting optional

TeleMini and TeleNano don't have USB descriptors to rewrite when
loading firmware, so allow them to be missing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299542278,1300316258,57d83f51377fb58018f422e42d74f29b86a821d2
57d83f51377fb58018f422e42d74f29b86a821d2,57d83f51,bringup: Add script for telemini,"bringup: Add script for telemini

Copied from teledongle with a few obvious changes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299540401,1300316258,ddd7485f05d0cad8f5b3e1ee9b9a4d2812ea1837
ddd7485f05d0cad8f5b3e1ee9b9a4d2812ea1837,ddd7485f,altos: Switch pins around for TeleMini,"altos: Switch pins around for TeleMini

TeleMini has fewer sensors and uses P0 for igniters instead of P2.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299513791,1300316258,f8afc2641c779fc312a42a6358187d8716ebe61a
f8afc2641c779fc312a42a6358187d8716ebe61a,f8afc264,altos: Switch LED usage for TeleMini around,"altos: Switch LED usage for TeleMini around

We're using the LEDs instead of tones, so make red mean 'low tone',
green mean 'middle tone' and both mean 'high tone'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299484331,1300316258,fc5d014721a7e5a7b22f07eb4ab0bb3c764473fe
fc5d014721a7e5a7b22f07eb4ab0bb3c764473fe,fc5d0147,ao_intflash: Avoid overwriting code,"ao_intflash: Avoid overwriting code

Require firmware to specify the end of its codespace in its Makefile,
and use this to determine where the start of available flash is. Should
give compile time errors if either there's no room left for storage, or
if there's not enough room for code.
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1298700408,1300316258,0e4c55d78852415e79f7318471f4d00c89703b78
0e4c55d78852415e79f7318471f4d00c89703b78,0e4c55d7,altos: Add TeleMini v1.0,"altos: Add TeleMini v1.0

This adds initial code for the telemini board, a two channel
flight computer with digital telemetry and a barometric sensor.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299474237,1300316258,2d41358c80f2eb8b6e98d699149bb941a6671475
2d41358c80f2eb8b6e98d699149bb941a6671475,2d41358c,altos: Start with packet slave running. Turn off in pad mode.,"altos: Start with packet slave running. Turn off in pad mode.

Instead of turning slave mode on in idle mode, start with it running
and disable it in pad mode instead. This means packet mode is
available in startup mode too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299474052,1300316257,1e56ed44e562f808addfd76bfb352f981db94094
1e56ed44e562f808addfd76bfb352f981db94094,1e56ed44,altos/test: Add baro-only flight test program,"altos/test: Add baro-only flight test program

This builds the flight code in baro-only mode for testing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299477548,1300316257,e339ffd8bd8b9e3f4758017ba355028000cb612e
e339ffd8bd8b9e3f4758017ba355028000cb612e,e339ffd8,altos/test: Use ao_convert.c instead of hand-coded pres → alt func,"altos/test: Use ao_convert.c instead of hand-coded pres → alt func

Fix up ao_convert.c so that it can be used within the flight test code
instead of having a (broken) copy of the code there.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299477472,1300316257,02611efea0c485d78fad08c696c1f56e868d36b8
02611efea0c485d78fad08c696c1f56e868d36b8,02611efe,"altos: Make serial, usb, beeper and accelerometer optional components","altos: Make serial, usb, beeper and accelerometer optional components

Not all boards will have these, so fix places that use them to deal
with that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299473785,1300316257,fdd15a254c6fab5ba2d02320ba0ceb3e6a56354c
fdd15a254c6fab5ba2d02320ba0ceb3e6a56354c,fdd15a25,ao_intflash: Use internal flash for storage,"ao_intflash: Use internal flash for storage

Makes any free pages at end of CC1111's internal flash available via
the ao_storage API.
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1298684910,1300316257,8f1bd11b61d9423c62162f7bbe573fc69fd75269
8f1bd11b61d9423c62162f7bbe573fc69fd75269,8f1bd11b,aoview: remove -s option.,"aoview: remove -s option.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300309806,1300309806,45395c7825184efb835d5b165fa132be20c7f6fe
45395c7825184efb835d5b165fa132be20c7f6fe,45395c78,Bump published version number to 0.9.1,"Bump published version number to 0.9.1
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300309722,1300309722,9f3d26cadf37880d2c9223f59271d295b11c4c2a
9f3d26cadf37880d2c9223f59271d295b11c4c2a,9f3d26ca,altosui: Missed jcommon.jar in the Mac OS install image,"altosui: Missed jcommon.jar in the Mac OS install image

This caused graphing to fail on Mac OS X

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1300309513,1300309556,6e340c87d3198647cf075ed520a82703b0d59beb
6e340c87d3198647cf075ed520a82703b0d59beb,6e340c87,altos: Oops. Lost a couple of commands when merging the doc patch,"altos: Oops. Lost a couple of commands when merging the doc patch

I didn't merge this carefully enough and managed to lose the 'f'
and 'e' commands, which are kinda useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299486377,1299486377,8cdf4fb051c22b35c251d90bc288551f7c2898bf
8cdf4fb051c22b35c251d90bc288551f7c2898bf,8cdf4fb0,src/ao_cmd: Shave off bytes from doc strings,"src/ao_cmd: Shave off bytes from doc strings

Switch to using { func, ""X args\0Desc"" } to specify command, saving
a char field by looking at help[0] instead, and reduce help length by
doing alignment with printf instead of hardcoded spaces.
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1298769072,1299484906,2cfe205de4242398e69c9e7c613af0d2a7094686
2cfe205de4242398e69c9e7c613af0d2a7094686,2cfe205d,"Revert ""src/ao_gps_skytraq.c: Update logging rate to 10Hz""","Revert ""src/ao_gps_skytraq.c: Update logging rate to 10Hz""

This reverts commit b080e933a65d268aaaec8cfd5f617a13d5babc43.

10Hz data isn't any better than 1Hz data; it still doesn't like going
upwards rapidly.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1299484861,1299484861,249cd3b63d97581b068fff988e0cd7fcd5bf493e
249cd3b63d97581b068fff988e0cd7fcd5bf493e,249cd3b6,altosui: Display eeprom parsing errors to user,"altosui: Display eeprom parsing errors to user

When reading the eeprom, any parsing errors (most likely bad
checksums) indicate some kind of problem with either the hardware or
the flight software. Display these to the user and do not erase the
flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1298106361,1298106713,629a7637871b24fe6d1204aaa7185d84933d4639
629a7637871b24fe6d1204aaa7185d84933d4639,629a7637,"altosui: Always read whole eeprom block, even at end of flight","altosui: Always read whole eeprom block, even at end of flight

Instead of stopping early, continue reading the whole eeprom block so
that the extra serial data doesn't end up confusing the next user of
the serial line, which may well be reading the next flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1298106259,1298106713,7ca2cf1b7e03b8453b45b45e313a33ad65da9ad5
7ca2cf1b7e03b8453b45b45e313a33ad65da9ad5,7ca2cf1b,"altosui: Mark empty eeprom records 'invalid', don't generate exception","altosui: Mark empty eeprom records 'invalid', don't generate exception

When reading empty eeprom records, mark them as 'invalid', but don't
generate an exception as it's normal to read these at the end of the
flight log.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1298106120,1298106713,690feb166fd2bc6b6dfc26828f1efe9f5f1c6c0d
690feb166fd2bc6b6dfc26828f1efe9f5f1c6c0d,690feb16,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1298098561,1298098561,0630e7d6d8cf6abf0fe07f9a6df40ee472cce1ef
0630e7d6d8cf6abf0fe07f9a6df40ee472cce1ef,0630e7d6,tie bringup scripts to Bdale's bench TeleDongle,"tie bringup scripts to Bdale's bench TeleDongle
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1298084058,1298084058,b080e933a65d268aaaec8cfd5f617a13d5babc43
b080e933a65d268aaaec8cfd5f617a13d5babc43,b080e933,src/ao_gps_skytraq.c: Update logging rate to 10Hz,"src/ao_gps_skytraq.c: Update logging rate to 10Hz

Send commands to skytraq to update baud rate to 57,600 bps, and
set NMEA output rate to 10Hz.
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1298058555,1298073854,aad7103dcf44e69a5a30e008836cce5542ea33e2
aad7103dcf44e69a5a30e008836cce5542ea33e2,aad7103d,src/ao_gps_skytraq: simplify parsing code,"src/ao_gps_skytraq: simplify parsing code

Added macros to make correctly constructing skytraq commands easier.
Simplified code path for NMEA processing marginally.
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1298053037,1298073854,fe5123fa801f5dafed8b052da607899d1ef20500
fe5123fa801f5dafed8b052da607899d1ef20500,fe5123fa,ao_radio: generalise setup of packet size,"ao_radio: generalise setup of packet size
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1296637977,1298073854,8b09cc1825645a57c256f38a2f9586ddecf6bda5
8b09cc1825645a57c256f38a2f9586ddecf6bda5,8b09cc18,altos/test: auto-configure acceleration parameters from the log file,"altos/test: auto-configure acceleration parameters from the log file

The flight test code had static accelerometer configuration values,
making it impossible to use data from different boards without
recompiling. As the eeprom and telem log files both contain the
necessary data, parse that instead.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1298052166,1298052280,d3bc27fabb6159ce58b14d0f7929b0f46f67c378
d3bc27fabb6159ce58b14d0f7929b0f46f67c378,d3bc27fa,altos/test: Add dependencies in the Makefile for ao_flight_test,"altos/test: Add dependencies in the Makefile for ao_flight_test

Yes, it would be nice to automate dependency generation here, but I
can't be bothered.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1298051641,1298052280,c3080fdafff5212f267ba7c765a2f083435be799
c3080fdafff5212f267ba7c765a2f083435be799,c3080fda,ao-load: fix usage message to note that '=' is required for options,"ao-load: fix usage message to note that '=' is required for options

The usage message was suggesting incorrect command line syntax; long
options use '=' between the option name and value, not whitespace.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1298051497,1298052280,a09501ab714c0638410d06f80903a8769d93c688
a09501ab714c0638410d06f80903a8769d93c688,a09501ab,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295466445,1295466445,2bb83d90aa03d825ca1b751418c91b194b72f1f9
2bb83d90aa03d825ca1b751418c91b194b72f1f9,2bb83d90,elide changelog entries or re-release of 0.9,"elide changelog entries or re-release of 0.9
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295466362,1295466362,9541ccd9ff9e67e0862ca31706358d8308fc85d8
9541ccd9ff9e67e0862ca31706358d8308fc85d8,9541ccd9,update turnon script to prefer TeleDongle as programmer,"update turnon script to prefer TeleDongle as programmer
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295466160,1295466160,159fda30fe57349660c5e2d95017144ea3f5d7db
159fda30fe57349660c5e2d95017144ea3f5d7db,159fda30,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295465213,1295465213,97f4f2e0d28eec1cf19d2d25140e42f6ac277700
97f4f2e0d28eec1cf19d2d25140e42f6ac277700,97f4f2e0,altos: Program default flight log max value for new boards,"altos: Program default flight log max value for new boards

New boards have no config space values at all, and so they need each
value to be set. Yes, this should be fixed so that there aren't two
copies of these assignments.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295464912,1295464912,480587cf514ba21885b24c3b8fcb98d6b76ea8f4
480587cf514ba21885b24c3b8fcb98d6b76ea8f4,480587cf,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295420725,1295420725,6244f2316267738781e31a773b377bcf8c476918
6244f2316267738781e31a773b377bcf8c476918,6244f231,prepare to release,"prepare to release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295420685,1295420685,3c72103866f041107af49e01a5ccb6d4e6b6ac80
3c72103866f041107af49e01a5ccb6d4e6b6ac80,3c721038,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295420142,1295420142,4ae724fe1d2ca0d712321c4fdc2200ff46d77428
4ae724fe1d2ca0d712321c4fdc2200ff46d77428,4ae724fe,we need an install target to prevent parent dir make from failing,"we need an install target to prevent parent dir make from failing
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295420076,1295420076,ca7b549fbf62019b01a6e6c85da50645ea9a4502
ca7b549fbf62019b01a6e6c85da50645ea9a4502,ca7b549f,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295419688,1295419688,9a5666f42d4d90a0a488fd0a85ae9914944fe0be
9a5666f42d4d90a0a488fd0a85ae9914944fe0be,9a5666f4,doc: Build with 'make all' from top level. Build with 'make fat',"doc: Build with 'make all' from top level. Build with 'make fat'

This will make sure the docs are up-to-date for both regular and
fat builds.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295419585,1295419585,72a04d679d06aaad9c2b4297fefd585fc393ce2e
72a04d679d06aaad9c2b4297fefd585fc393ce2e,72a04d67,fat: Add docs to Linux package,"fat: Add docs to Linux package

Oops. Missed this one.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295419147,1295419147,5d91c250179f44ca17c26fff36718b7026aa8ee0
5d91c250179f44ca17c26fff36718b7026aa8ee0,5d91c250,fat: Add firmware for v1.1 and docs to mac/windows/linux installers,"fat: Add firmware for v1.1 and docs to mac/windows/linux installers

We'll need to be sure to update this each time we add a product.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295418855,1295418942,26c4cc3054b1c7c9ed6ce3c2f21f6254b3245718
26c4cc3054b1c7c9ed6ce3c2f21f6254b3245718,26c4cc30,freshen copyright year,"freshen copyright year
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295418543,1295418543,e2e20f6ce8a9c2bca36fde5730ccd7151377ec6f
e2e20f6ce8a9c2bca36fde5730ccd7151377ec6f,e2e20f6c,"add 0.9 revision entry, with caveat about telemetry format change","add 0.9 revision entry, with caveat about telemetry format change
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295417922,1295417922,27e6dbbe95ae9b361d60576e0cbadb66792307f3
27e6dbbe95ae9b361d60576e0cbadb66792307f3,27e6dbbe,doc: Add v0.9 features from altosui to documentation.,"doc: Add v0.9 features from altosui to documentation.

New flight download UI and new config items.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295411998,1295412252,92d7841edcfc8a841f71f7f97cc541f8e55c4627
92d7841edcfc8a841f71f7f97cc541f8e55c4627,92d7841e,doc: Don't delete telemetrum-outline.pdf,"doc: Don't delete telemetrum-outline.pdf

This has a drilling template for the board.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295411970,1295412252,c411dce69be58238b8312c2fd7405cbe8b5d4a5a
c411dce69be58238b8312c2fd7405cbe8b5d4a5a,c411dce6,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295396831,1295396831,da42f406e88ccc821cd45d5a94d5afec65ec50e9
da42f406e88ccc821cd45d5a94d5afec65ec50e9,da42f406,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295283017,1295283017,"ea4cdfb87e03ecfb974f98305671265b6fb95372,cf550f9b96fa94d8db559e01df0e265bb1c7b572"
ea4cdfb87e03ecfb974f98305671265b6fb95372,ea4cdfb8,update documentation to reflect reality that modifying a board or separate,"update documentation to reflect reality that modifying a board or separate
pyro battery is not as simple as one trace cut on v1.0 and v1.1 boards
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295282985,1295282985,afd3d3cdb8c2291c1c7cda7908392d68cd04f87f
cf550f9b96fa94d8db559e01df0e265bb1c7b572,cf550f9b,doc: Remove mention of ao_wake_task,"doc: Remove mention of ao_wake_task

This has been removed from the altos sources, so remove it from the
docs too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295249025,1295249025,4b71c4f4ed6cae23a7f4a2e7ae697da9ec614898
4b71c4f4ed6cae23a7f4a2e7ae697da9ec614898,4b71c4f4,altos: Use 5V reference data to correct accelerometer measurements.,"altos: Use 5V reference data to correct accelerometer measurements.

When the 3.3V and 5V values shift relative to each other (usually due
to changes in power consumption), the measured acceleration will
appear to shift. This patch converts the 3.3V referenced acceleration
value into a 5V referenced acceleration, eliminating this error.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295123213,1295243570,2887fe7affc0706dbeb2f04df9a00a9b799903ed
2887fe7affc0706dbeb2f04df9a00a9b799903ed,2887fe7a,altos: Optimize fetching of ADC data in flight code,"altos: Optimize fetching of ADC data in flight code

This stores the address of the desired sample in a local variable and
then fetches through that. Saves quite a few instructions.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295123157,1295238276,2681a17500913cbaf3966f09380bb1d6b59e3863
2681a17500913cbaf3966f09380bb1d6b59e3863,2681a175,altos: Sample the accelerometer reference voltage on v1.1 boards,"altos: Sample the accelerometer reference voltage on v1.1 boards

This places the 5v reference samples in an array parallel to the basic
ADC values. It doesn't do anything with the values, just stores them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295122712,1295238276,69290588980bb15732a99eca5c911a3b6e9a37b9
69290588980bb15732a99eca5c911a3b6e9a37b9,69290588,altos: Ensure flight code gets first crack at new ADC data,"altos: Ensure flight code gets first crack at new ADC data

Instead of having everyone wait on the raw ADC ring, have the flight
code wait on that and have everyone else wait for the flight code to
finish looking at the data and move its pointer forwards.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295122322,1295238274,1b8d7313504240ed04e0747e9b0f6e9a83d323e2
1b8d7313504240ed04e0747e9b0f6e9a83d323e2,1b8d7313,altos: Auto-calibrate linux-based flight testing code,"altos: Auto-calibrate linux-based flight testing code

Use the provided ground acceleration average to set the two
accelerometer calibration values so that the flight code will
detect pad/idle mode correctly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295222235,1295238253,afd3d3cdb8c2291c1c7cda7908392d68cd04f87f
afd3d3cdb8c2291c1c7cda7908392d68cd04f87f,afd3d3cd,Rework invalid accel cal detection code,"Rework invalid accel cal detection code

Slightly reduces code space.

Uncalibrated accelerometer now enters invalid state as well.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1295229820,1295229820,3566dee1cf83870396a0bb164f5549dd3faf58f5
3566dee1cf83870396a0bb164f5549dd3faf58f5,3566dee1,altosui: Remove spurious colons from eeprom selection headers,"altosui: Remove spurious colons from eeprom selection headers

This colons make the presentation a bit confusing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295217631,1295217631,ab31b1c737d8fd32af482e5b06699f1b832a25a1
ab31b1c737d8fd32af482e5b06699f1b832a25a1,ab31b1c7,altos: Add DATA_TO_XDATA to linux test harness,"altos: Add DATA_TO_XDATA to linux test harness

The flight test harness needs to expose every function used by the
flight code in some form, and this macro is about to become used.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295081782,1295217329,add2802a8a33336180fe6856241a7f4a8200e89c
add2802a8a33336180fe6856241a7f4a8200e89c,add2802a,altos: Added check for out of bounds accel,"altos: Added check for out of bounds accel

Chose invalid flight mode instead of idle to give user feedback.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Keith Packard,keithp@keithp.com,1295089830,1295217329,58838c0b96a91da0bd0cd77c3ff312b589c08136
58838c0b96a91da0bd0cd77c3ff312b589c08136,58838c0b,altos: Added check for an accel value above 1.5g,"altos: Added check for an accel value above 1.5g

When detecting flight or idle mode, this should indicate
that accel cal values are out of whack.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Keith Packard,keithp@keithp.com,1295086886,1295217329,118fe84c9ff1cc9d1653e67a2315e22e19d60a14
118fe84c9ff1cc9d1653e67a2315e22e19d60a14,118fe84c,altos: average 512 accel/baro samples at startup instead of 1000,"altos: average 512 accel/baro samples at startup instead of 1000

This lets us use a simple shift instead of a divide, saving a huge
amount of code space.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295119591,1295217329,8a775b8f9ecefa143050653d74dfd218b32b9bb5
8a775b8f9ecefa143050653d74dfd218b32b9bb5,8a775b8f,altos: Restructure skytraq NMEA parsing code to save some space,"altos: Restructure skytraq NMEA parsing code to save some space

Splitting this into several smaller functions appears to make SDCC
generate better code.
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1295139285,1295217294,7a35b2d7048669a96256d4ea0086299f8a0cb1df
7a35b2d7048669a96256d4ea0086299f8a0cb1df,7a35b2d7,altos: Flush log when full,"altos: Flush log when full

When the log storage is full, make sure any pending writes are flushed
out so that the last bit isn't lost.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295160158,1295217294,47ee4597e55749e8f66f61a585ea32776979bf80
47ee4597e55749e8f66f61a585ea32776979bf80,47ee4597,altos: TELEMETRY PROTOCOL CHANGE. Switch to 16-bit serial numbers.,"altos: TELEMETRY PROTOCOL CHANGE. Switch to 16-bit serial numbers.

What a terrible mistake! The flight computer serial numbers were
recorded in only 8 bits, so serial numbers > 255 would get truncated.

There's really no fix other than bumping the field to 16 bits and
reflashing every TM and TD on the planet. Very unfortunate.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295137510,1295217167,b22ba359a02297e39a446cbd5ef51e63b795624a
b22ba359a02297e39a446cbd5ef51e63b795624a,b22ba359,doc: inkscape tracks the filename inside the document,"doc: inkscape tracks the filename inside the document

telemetrum-outline.svg was renamed from telemetrum.svg and inkscape
appears to care.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295121950,1295217156,d0a841b285fb398f0be72183ec3c9d1e358419a9
d0a841b285fb398f0be72183ec3c9d1e358419a9,d0a841b2,altosui: Require 4 sats to light up the 'GPS locked' light.,"altosui: Require 4 sats to light up the 'GPS locked' light.

This tracks the same GPS signal requirement needed for 'GPS ready' and
ensures that we have a 3d fix.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295121763,1295217147,1bfdce6fc3367fdf03e0dc7ddd94da18723b8ba3
1bfdce6fc3367fdf03e0dc7ddd94da18723b8ba3,1bfdce6f,altosui: Ensure serial device is closed after eeprom download finishes,"altosui: Ensure serial device is closed after eeprom download finishes

As this code is all event-driven, track which events will trigger
further work and block closing the device in those specific cases,
ensuring that all other code paths end up closing the device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295217038,1295217038,987039b8f0b1d889aca9109d4c6a83f034ff64a7
987039b8f0b1d889aca9109d4c6a83f034ff64a7,987039b8,altosui: Remove debug message when eeprom downloads are complete.,"altosui: Remove debug message when eeprom downloads are complete.

This message isn't useful now that this code appears to work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295216997,1295216997,fb534aae15f0f1e5d69790e159d0287b6b8a514a
fb534aae15f0f1e5d69790e159d0287b6b8a514a,fb534aae,altosui: Use long input flush timeout when remote.,"altosui: Use long input flush timeout when remote.

100ms isn't long enough to capture pending remote serial input, so use
300 ms in that mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295216915,1295216915,d4add23186b3586c99579d83efdc003f79e9bf7a
d4add23186b3586c99579d83efdc003f79e9bf7a,d4add231,altosui: Make serial debug more complete and accurate,"altosui: Make serial debug more complete and accurate

Display all serial input, including telemetry.
Wait to display serial output until flush time, to debug missing flushing.
Show when devices are opened and closed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295216778,1295216778,deb3c7b9206be0c9c46f75d35c8f766c26d9838f
deb3c7b9206be0c9c46f75d35c8f766c26d9838f,deb3c7b9,altosui: Reset eeprom download instance variables before reading flight,"altosui: Reset eeprom download instance variables before reading flight

To deal with downloading multiple flights in a single invocation, make
sure all relevant instance variables are set back to start of flight
download values each time a log is read.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295160217,1295216388,eec9eb2e81535e62c52fbb2e57a2d33f88f92c1a
eec9eb2e81535e62c52fbb2e57a2d33f88f92c1a,eec9eb2e,Close serial port if Download/Delete dialog is cancelled.,"Close serial port if Download/Delete dialog is cancelled.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1295204213,1295204213,df1c6ab3ac079199b5a12328c9ff5cfa6ac29b36
df1c6ab3ac079199b5a12328c9ff5cfa6ac29b36,df1c6ab3,Convert EepromSelect dialog to use a GridBag,"Convert EepromSelect dialog to use a GridBag

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1295178007,1295178007,fef302656f21ae0ab4772f72979cbb7f071da89a
fef302656f21ae0ab4772f72979cbb7f071da89a,fef30265,Re-order and re-arrange eeprom download dialog,"Re-order and re-arrange eeprom download dialog

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1295162719,1295162719,35adb7c98fe02e84fff70c1bee22bfa019cfacc2
35adb7c98fe02e84fff70c1bee22bfa019cfacc2,35adb7c9,doc: Add telemetrum mounting template in svg and pdf forms,"doc: Add telemetrum mounting template in svg and pdf forms

telemetrum-outline.svg and telemetrum-outline.pdf

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295070299,1295070366,fdba0f24afd59becc499d750bbdb80aea86066ac
fdba0f24afd59becc499d750bbdb80aea86066ac,fdba0f24,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295053276,1295053276,646e1926cdf56e2cf2425413ce716e6999b64a58
646e1926cdf56e2cf2425413ce716e6999b64a58,646e1926,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295053260,1295053260,d908c2ebd0b11a54cfd922a192249d0f0df0ddb0
d908c2ebd0b11a54cfd922a192249d0f0df0ddb0,d908c2eb,altosui: Add preference for serial debugging.,"altosui: Add preference for serial debugging.

This dumps serial input/output to stdout.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295052456,1295052509,fcaee12a64d5e195b55b8f77c19dfc0c57ef5d58
fcaee12a64d5e195b55b8f77c19dfc0c57ef5d58,fcaee12a,altosui: Ensure serial line is flushed after disabling remote link,"altosui: Ensure serial line is flushed after disabling remote link

Flush the '~' character.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295052439,1295052509,2d154be89246e111a36f7c2700effbb2c97da541
2d154be89246e111a36f7c2700effbb2c97da541,2d154be8,altosui: Show dialog after successful delete or when no flights,"altosui: Show dialog after successful delete or when no flights

Make sure the user always sees confirmation for flight log management.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1295052290,1295052509,b490455807d1c70c81785ed8931a07ab44e8e421
b490455807d1c70c81785ed8931a07ab44e8e421,b4904558,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295040679,1295040679,97b1ca994599ad262400eb3c685799582f7f1b94
97b1ca994599ad262400eb3c685799582f7f1b94,97b1ca99,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1295040649,1295040649,d794ef9e0fbe4d13259db1bbd69f01717c14400b
d794ef9e0fbe4d13259db1bbd69f01717c14400b,d794ef9e,altos: check for valid flight number in ao_log_delete,"altos: check for valid flight number in ao_log_delete

Zero is not a valid flight number, and ao_log_flight uses that to
indicate 'no flight in this slot'. Check the user-provided input for
zero before looking through the slots.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294864886,1294864886,8801b8c1947bd39f7c985b91a2ba8dbc81bcc91a
8801b8c1947bd39f7c985b91a2ba8dbc81bcc91a,8801b8c1,altosui: Add eeprom 'manage' ui to download and delete multiple flights,"altosui: Add eeprom 'manage' ui to download and delete multiple flights

This shows the list of available flights and provides options to
download and/or delete each one.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294864845,1294864845,440d52e34364fdeeddc76a2d744cc6d1c934364f
440d52e34364fdeeddc76a2d744cc6d1c934364f,440d52e3,altosui: Add support for parsing list of flights from the 'l' command,"altosui: Add support for parsing list of flights from the 'l' command

This adds parsing support to enumerate the available flights, but does
not yet provide any UI to use it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294810087,1294810087,7ad419d81c90ef6a16656970466313767fef830f
7ad419d81c90ef6a16656970466313767fef830f,7ad419d8,altos: oops -- 'e' command was only showing 7 of the 8 bytes per line,"altos: oops -- 'e' command was only showing 7 of the 8 bytes per line

Just a silly off-by-one error when printing out the data received from flash.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294810001,1294810001,bd2480fd757b67557d9c7de42e402034002c3e37
bd2480fd757b67557d9c7de42e402034002c3e37,bd2480fd,altosui: Split eeprom download code apart,"altosui: Split eeprom download code apart

Create separate 'download config data', 'read single record' and 'read
block' functions. This code will be shared with future multi-log
reading code for new firmware.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294789164,1294789164,c437b14b7fc7afdfc7b809a04d7fa29d5e742307
c437b14b7fc7afdfc7b809a04d7fa29d5e742307,c437b14b,altos: Remove redundant initialization of ao_interval variables,"altos: Remove redundant initialization of ao_interval variables

These are all initialized in the ao_flight_drogue state transition.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1294462810,1294462810,57de960b8148bf485607898c3d66af6994d76481
57de960b8148bf485607898c3d66af6994d76481,57de960b,altos: Remove unused accel_vel_mach and accel_vel_boost variables,"altos: Remove unused accel_vel_mach and accel_vel_boost variables

Presumably left-over debugging code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1294462353,1294462353,ca66f86a899c191b6362a334417fc84a79349677
ca66f86a899c191b6362a334417fc84a79349677,ca66f86a,altosui: Add configuration of flight log size,"altosui: Add configuration of flight log size

This adds to the TeleMetrum configuration UI the ability to set the
maximum flight log size.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294461989,1294462075,52ac83fedbfd380d14d4df2e79992bbdfba3552a
52ac83fedbfd380d14d4df2e79992bbdfba3552a,52ac83fe,altos: Check for full log and complain,"altos: Check for full log and complain

Reports special tone along with the continuity checks.
Reports flight 0 in telemetry.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294460799,1294460799,00891b40754962ef6530b237ef52017bb58112d5
00891b40754962ef6530b237ef52017bb58112d5,00891b40,altos: Check requested log max size against available space,"altos: Check requested log max size against available space

Make sure the amount of memory requested for a single log isn't more
than is available on the device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294460709,1294460709,bbddcae2a15b6d430e84956ddf26955aa9173cc0
bbddcae2a15b6d430e84956ddf26955aa9173cc0,bbddcae2,altos: Optimize Morse code generation,"altos: Optimize Morse code generation

This reduces the size of data and code needed to report the
flight states

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Anthony Towns,aj@erisian.com.au,Keith Packard,keithp@keithp.com,1294460305,1294460305,73620c41017c1774d6190dfd4be5b742eb64f8d3
73620c41017c1774d6190dfd4be5b742eb64f8d3,73620c41,altos: ensure erase mark is written when erasing flights,"altos: ensure erase mark is written when erasing flights

It was getting called only when *failing* to erase a flight (oops),
secondly, it wasn't getting written because ao_storage_flush wasn't
getting called.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294460008,1294460160,edd22ee49adf60c35f2fe6ba97c111b7ad4131c2
edd22ee49adf60c35f2fe6ba97c111b7ad4131c2,edd22ee4,altos: report flight log offsets in hex block numbers instead of bytes,"altos: report flight log offsets in hex block numbers instead of bytes

makes them compatible with the 'e' command.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294451766,1294451766,1cc08af4f4a1ff61fc0deca3bdd95e8a5ca8ec5c
1cc08af4f4a1ff61fc0deca3bdd95e8a5ca8ec5c,1cc08af4,altos: white space fix,"altos: white space fix

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294451754,1294451754,d8c9684239b67a69a4a3d24202a6df0d73c4f7f5
d8c9684239b67a69a4a3d24202a6df0d73c4f7f5,d8c96842,altos: Speed up at45 and 25lc erase speeds,"altos: Speed up at45 and 25lc erase speeds

No need to read the block to be erased before erasing it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294451694,1294451694,2722703bd848b07a02d3ce0c83a502eca52a9f1d
2722703bd848b07a02d3ce0c83a502eca52a9f1d,2722703b,altos: support storage of multiple flights.,"altos: support storage of multiple flights.

This adds the logging support for dealing with multiple flights

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294441119,1294441228,a9b210bc33cd95e7108ab51925fdf0d5e8deaf7e
a9b210bc33cd95e7108ab51925fdf0d5e8deaf7e,a9b210bc,altos: Add configuration parameter for maximum flight log size,"altos: Add configuration parameter for maximum flight log size

This parameter will permit available storage to be split into multiple
separate flight logs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294423511,1294441151,3bcf14f12f6681888c3162d0f33ef2d454eb75dd
3bcf14f12f6681888c3162d0f33ef2d454eb75dd,3bcf14f1,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1294386770,1294386770,408a3e04362d626778640dd0ce7d356d3863de53
408a3e04362d626778640dd0ce7d356d3863de53,408a3e04,altos: Mark end of available flight list with 'done' to make the UI,"altos: Mark end of available flight list with 'done' to make the UI
code easier to write

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294385893,1294385893,e991f52276248fa08d96fbecc458bc478e98d299
e991f52276248fa08d96fbecc458bc478e98d299,e991f522,altos: Rip out 'optimization' in ao_log_scan,"altos: Rip out 'optimization' in ao_log_scan

Remove premature optimization to avoid re-scanning the flight logs for
the best empty entry.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294385731,1294385731,569a1dac55b70c30f01afa7bcb74442ecdd85d85
569a1dac55b70c30f01afa7bcb74442ecdd85d85,569a1dac,altos: Move common storage code to ao_storage.c. Add M25P80 driver,"altos: Move common storage code to ao_storage.c. Add M25P80 driver

This reworks the storage API so that you erase blocks and then store
data to them so that the M25P80 driver will work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294382258,1294382258,e4ba9bf4291bf17c777c8c3ef7c71e4a30b9947a
e4ba9bf4291bf17c777c8c3ef7c71e4a30b9947a,e4ba9bf4,altos: Require manual flight erasing.,"altos: Require manual flight erasing.

This supports flash chips that require larger erase blocks.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294364098,1294364098,ddcc94da4326f9ce954bd31a46b36165c58e6c18
ddcc94da4326f9ce954bd31a46b36165c58e6c18,ddcc94da,altos: Simplify storage API,"altos: Simplify storage API

This removes the config-specific APIs and exposes global variables for
the available storage space, block size and config storage location.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294347099,1294347099,f3f1b1488bdc92fa9277dc549ba9f3210a8d4c8c
f3f1b1488bdc92fa9277dc549ba9f3210a8d4c8c,f3f1b148,"altos: packet and usb i/o routines use 'char', not 'uint8_t'","altos: packet and usb i/o routines use 'char', not 'uint8_t'

Just fixing the type of a local variable holding a character
passed from the packet link to usb.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1294342115,1294342115,5688af4e4d7ca8e559d758257e79b7979f1cc924
5688af4e4d7ca8e559d758257e79b7979f1cc924,5688af4e,altos: Add telemetrum-v1.1 directory,"altos: Add telemetrum-v1.1 directory

This just clones the v1.0 build; changes will be added on top of this.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1293081236,1293081459,9f7296b3feab872bf51fc369ade69cc1e7cf7a3f
9f7296b3feab872bf51fc369ade69cc1e7cf7a3f,9f7296b3,altos: Split out SPI driver.,"altos: Split out SPI driver.

For TM with the companion connector, the SPI bus will be shared among
multiple devices. Split out the existing SPI code into a common
driver, with the SPI bus protected by a mutex.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1293080782,1293081456,51c410c1c952e0e9bcf1b2c438813de63753be5f
51c410c1c952e0e9bcf1b2c438813de63753be5f,51c410c1,windows: Update NSIS installer file to use compatibility IDs,"windows: Update NSIS installer file to use compatibility IDs

This allows the file to contain a single InitDriverSetup function,
making things shorter and (I hope) clearer.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290932694,1293079180,4a42f9d5c20dcaf5fd7591ccf9e32c6130d9d538
4a42f9d5c20dcaf5fd7591ccf9e32c6130d9d538,4a42f9d5,windows: Add compatibility IDs to telemetrum.inf,"windows: Add compatibility IDs to telemetrum.inf

This will allow the .nsi file to reference just the compatibility ID
instead of needing to have all of the USB IDs listed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290932534,1293079180,484b44e81b655f1ecb48256095382a56d2839bae
484b44e81b655f1ecb48256095382a56d2839bae,484b44e8,altos: eliminate ao_wake_task,"altos: eliminate ao_wake_task

Waking up a task waiting on some random object is a bad idea. Fix
the waiters to look for suitable signalling.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290821980,1293079180,07213dc34fa20470a4b36a327a83d75b0f010ebb
07213dc34fa20470a4b36a327a83d75b0f010ebb,07213dc3,altos: clean up radio abort paths. Share radio code.,"altos: clean up radio abort paths. Share radio code.

Instead of aborting the DMA and radio operation and expecting that to
be handled reasonably by the radio receiving task, rewrite things so
that the abort function just wakes the receiving task while that
terminates the DMA and cleans up the radio.

This eliminates all kinds of nasty bugs dealing with radio abort
smashing the radio registers at the wrong time, or interrupting a
radio transmission.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290816855,1293079180,b62580855c5144f5bc7e0172289bce08814d9472
b62580855c5144f5bc7e0172289bce08814d9472,b6258085,"altosui: move maps to subdir, fix E/W mismatch","altosui: move maps to subdir, fix E/W mismatch
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1292262018,1292262018,b8d2eb5509096fd5bd04598b1312077659109620
b8d2eb5509096fd5bd04598b1312077659109620,b8d2eb55,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1291187717,1291187717,ea95c060f8bd959cefc60dd6d411151f3c91384e
ea95c060f8bd959cefc60dd6d411151f3c91384e,ea95c060,fix symlink paths in rules file,"fix symlink paths in rules file
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1291187525,1291187525,f95220b6f0cc74928e0e7d7c7e1f443eafc32a02
f95220b6f0cc74928e0e7d7c7e1f443eafc32a02,f95220b6,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1291187003,1291187003,ea7130e953622884afc348265f5a4c58f9876823
ea7130e953622884afc348265f5a4c58f9876823,ea7130e9,modify Debian package build to deliver one copy of background.png for,"modify Debian package build to deliver one copy of background.png for
the themes and symlink it into place for gdm and slim
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1291186858,1291186858,3696b30a8d1eb351353d84b5f7af8eeff55c468b
3696b30a8d1eb351353d84b5f7af8eeff55c468b,3696b30a,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1291092433,1291092433,11b3f9ff715017a2dec02003275885334f22c009
11b3f9ff715017a2dec02003275885334f22c009,11b3f9ff,releasing 0.8.1,"releasing 0.8.1
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1291092362,1291092362,5f3f11e11dff9b9f4d1dde279c0d474de0de12a5
5f3f11e11dff9b9f4d1dde279c0d474de0de12a5,5f3f11e1,Add minimal release testing plan to Releasing,"Add minimal release testing plan to Releasing

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1291092109,1291092109,f0a4deee23984a8f779917bbeaf74a66a0abf592
f0a4deee23984a8f779917bbeaf74a66a0abf592,f0a4deee,"Move ""Releasing"" to top level","Move ""Releasing"" to top level

This file documents the AltOS release process for all systems.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1291091667,1291091667,b727156ef0a7fb6e442ca28be27eb344a213ecf8
b727156ef0a7fb6e442ca28be27eb344a213ecf8,b727156e,windows: Add jfreechart.jar and jcommon.jar to windows install image,"windows: Add jfreechart.jar and jcommon.jar to windows install image

These are necessary for the Graph Data button to do anything useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1291090655,1291091449,3e2220a180f95971d222a597d2057ca328c27356
3e2220a180f95971d222a597d2057ca328c27356,3e2220a1,adding Bdale's release process document to the source tree,"adding Bdale's release process document to the source tree
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1291091354,1291091354,61a924099800494b589cbbb87c65b552ccbd8394
61a924099800494b589cbbb87c65b552ccbd8394,61a92409,fix an Altos vs Altus typo in the docs,"fix an Altos vs Altus typo in the docs
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1291066827,1291066827,e840b6594b8a939f148fa7231e1b06a280d94074
e840b6594b8a939f148fa7231e1b06a280d94074,e840b659,fix section layering,"fix section layering
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1291009363,1291009363,f39698bbc12afdfadfac56c90030e16db93cf4fc
f39698bbc12afdfadfac56c90030e16db93cf4fc,f39698bb,fix publish target in doc/Makefile,"fix publish target in doc/Makefile
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290998763,1290998763,13cea7a96821165a10a8b2433af1da7508882b0a
13cea7a96821165a10a8b2433af1da7508882b0a,13cea7a9,moved doc dir in web content to AltOS tree,"moved doc dir in web content to AltOS tree
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290995311,1290995311,6f3c72462af86a7d9dec20f4c813a524a5be9fbb
6f3c72462af86a7d9dec20f4c813a524a5be9fbb,6f3c7246,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290994337,1290994337,a375942979dbcd8239d8c0addb10616e6048f6ea
a375942979dbcd8239d8c0addb10616e6048f6ea,a3759429,rewind changelog to recover from stupid build failure,"rewind changelog to recover from stupid build failure
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290994286,1290994286,263cf6c4fc5c1a240d719bb0ceb33393864fb3d6
263cf6c4fc5c1a240d719bb0ceb33393864fb3d6,263cf6c4,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290993840,1290993840,2615289265b6f8fa08827be794b4eee569fc6333
2615289265b6f8fa08827be794b4eee569fc6333,26152892,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290993797,1290993797,5e23bcc2d2ad33a839fedd2158213098a05cd9ae
5e23bcc2d2ad33a839fedd2158213098a05cd9ae,5e23bcc2,declaring 0.8 released,"declaring 0.8 released
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290993691,1290993691,b09d3e11c32abd07f8e11b483ac4b57148f4f2d8
b09d3e11c32abd07f8e11b483ac4b57148f4f2d8,b09d3e11,windows: Bump .inf file version,"windows: Bump .inf file version
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290928121,1290928121,42c2394ccc1a1ee6dc134ed963a4f79acf031d0b
42c2394ccc1a1ee6dc134ed963a4f79acf031d0b,42c2394c,windows: more .inf file hacking,"windows: more .inf file hacking

Add a LayoutFile reference
Add the FakeModemCopyFileSection

Copy AltosMetrum.Install section to AltusMetrum.Install.NT section. I
don't know what this might do; existing files seem inconsistent.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290927890,1290927890,26369a92398f4ebe3fcd54ce34cebffae0cfdf07
26369a92398f4ebe3fcd54ce34cebffae0cfdf07,26369a92,windows: remove some non-existent .inf file section references,"windows: remove some non-existent .inf file section references

The mfglt and VerboseResultCodes sections are not present in the .inf
file, so remove refernces to them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290926371,1290926371,641c5373724d34c3adfcf42420a528d6bba736b9
641c5373724d34c3adfcf42420a528d6bba736b9,641c5373,windows: try harder to get windows install to work,"windows: try harder to get windows install to work

Add devIDs to .nsi file. Fix install section name mapping from the
hot-plug info.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290926118,1290926118,cd414e2c04ce5ecbc75f19325a6d6f82cd489fb3
cd414e2c04ce5ecbc75f19325a6d6f82cd489fb3,cd414e2c,altosui: Correct windows hardware IDs for nsis installer file,"altosui: Correct windows hardware IDs for nsis installer file

Need real hardware IDs (encoded USB ids) to get windows to
auto-install the driver?

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290904229,1290904229,f834b22905db87557f729f942607dc363b013694
f834b22905db87557f729f942607dc363b013694,f834b229,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290749493,1290749493,da3b39d6b1b5ba48686c2a4add4b5448fd5711af
da3b39d6b1b5ba48686c2a4add4b5448fd5711af,da3b39d6,changed main document name from telemetrum-doc to altusmetrum,"changed main document name from telemetrum-doc to altusmetrum
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290749341,1290749341,ab6c9c983a2830bc8807e1b75d2576141b73632d
ab6c9c983a2830bc8807e1b75d2576141b73632d,ab6c9c98,update fat target in Makefiles to reflect move of altosui and libaltos,"update fat target in Makefiles to reflect move of altosui and libaltos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290738602,1290738602,b8f05cdc0e9b4a96852eed9d38ff6d5950e2d2ed
b8f05cdc0e9b4a96852eed9d38ff6d5950e2d2ed,b8f05cdc,altosui: Clean up flash code to ensure swing gets called from right thread,"altosui: Clean up flash code to ensure swing gets called from right thread

This moves all of the flash code to a separate thread and passes
messages back to the swing thread to keep the UI up to date.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290734968,1290734968,adbb14c63d85b7a54223f88ac623571456f4a462
adbb14c63d85b7a54223f88ac623571456f4a462,adbb14c6,altosui: Remove gratuitous threading from device flashing UI,"altosui: Remove gratuitous threading from device flashing UI

There's no need for a thread here, and swing doesn't want us to use
one anyways.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290731284,1290731419,7f88520089660845009148b69bfcea6c9dff9672
7f88520089660845009148b69bfcea6c9dff9672,7f885200,altosui: Flight data download GUI operations called only from main thread,"altosui: Flight data download GUI operations called only from main thread

Swing doesn't like UI functions being called from non-dispatch thread,
so fix up the eeprom download code to use SwingUtilities.invokeLater
to make sure this works right.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290730998,1290731419,6d3612e267cd4c1e7fdd74fc33952b3f26f870f5
6d3612e267cd4c1e7fdd74fc33952b3f26f870f5,6d3612e2,altosui: Eliminate unnecessary thread from config UI,"altosui: Eliminate unnecessary thread from config UI

There's no reason to use a thread to run a dialog box, and
swing doesn't like threads anyways.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290730177,1290731419,12fb7f0e70cd244475d84469f93283112478d1e1
12fb7f0e70cd244475d84469f93283112478d1e1,12fb7f0e,altosui: Only call swing display functions from main thread.,"altosui: Only call swing display functions from main thread.

Swing insists that all display functions be called from a single
thread, and the flight window wasn't following this for display
updates. Use SwingUtilities.invokeLater to make sure the flight UI
updates happen in the right context.

Fixes a UI freeze on Mac OS.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290729402,1290731419,b74cec6cd0bc043f53e9e28472765aa343136813
b74cec6cd0bc043f53e9e28472765aa343136813,b74cec6c,Updated AltOS PKGBUILD to track makefile changes,"Updated AltOS PKGBUILD to track makefile changes
",,,,Bob Finch,w9ya@qrparci.net,Bdale Garbee,bdale@gag.com,1290717048,1290717736,f88bde21d76a4ff91099a5051153ebace1619978
f88bde21d76a4ff91099a5051153ebace1619978,f88bde21,altosui: Hack up standalone makefile to maybe build altosui again,"altosui: Hack up standalone makefile to maybe build altosui again

This isn't tested, but at least the paths are more likely to be correct

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290712615,1290712615,3d98440d53378aaa6da87ed65e9abb2f96f7ee49
3d98440d53378aaa6da87ed65e9abb2f96f7ee49,3d98440d,altosui: Make windows bits build after moving altosui directory,"altosui: Make windows bits build after moving altosui directory

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290712588,1290712588,4893ed50bc14772986ac02f9b39928f1882da923
4893ed50bc14772986ac02f9b39928f1882da923,4893ed50,"Revert ""altos: Don't abort radio transmissions with ao_radio_abort""","Revert ""altos: Don't abort radio transmissions with ao_radio_abort""

This reverts commit 54468e5dc567aaac5c5c20e921859b7cec28bb88.

With this patch in place, TD could not be placed in 'packet' mode.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290671648,1290672118,cb08bc264c71ca972027392b42f347a03df76a43
cb08bc264c71ca972027392b42f347a03df76a43,cb08bc26,doc: Rename telemetrum-doc as altusmetrum,"doc: Rename telemetrum-doc as altusmetrum

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290668108,1290668108,554bdd25e132dbaec322bc11f94093d2c2e78751
554bdd25e132dbaec322bc11f94093d2c2e78751,554bdd25,"doc: Add more authors, fix URL formatting, note that AltosUI actually exists","doc: Add more authors, fix URL formatting, note that AltosUI actually exists

Add aj and bfinch as authors. Insert an acknowledgements section. Fill
in the Fire Igniter section in the AltosUI chapter. Then change the
section talking about the future plans for Java to mention that they
actually exist now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290667773,1290667773,bcf78b67717374b5971820021b83061e2e9734cf
bcf78b67717374b5971820021b83061e2e9734cf,bcf78b67,doc: Reformat altos to use sections for each function,"doc: Reformat altos to use sections for each function

This places them in the TOC, making them easier to find.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290663558,1290663558,51c7741040d95c5deece939dae5e4136cc04afc4
51c7741040d95c5deece939dae5e4136cc04afc4,51c77410,Merge branch 'buttonbox',"Merge branch 'buttonbox'

Conflicts:
	doc/telemetrum-doc.xsl

Pull the buttbox version of the docs in as it had been updated.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290661252,1290661252,"d1dbe3b69e6f95ef8ecd4cf959863b922ab47c66,4e47c44d335276cf0dc5ed3a0756e50c98c1b9b9"
4e47c44d335276cf0dc5ed3a0756e50c98c1b9b9,4e47c44d,manually fold in documentation work from the master branch,"manually fold in documentation work from the master branch
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290660293,1290660293,8a68c1da253c0b29a7cb9c7540c20585ad6e3dec
8a68c1da253c0b29a7cb9c7540c20585ad6e3dec,8a68c1da,tweak rev history,"tweak rev history
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290658913,1290658913,7cd1c7765d137df711caeeb69abaaba1b36e0a65
7cd1c7765d137df711caeeb69abaaba1b36e0a65,7cd1c776,fix missing section close in Site Map content,"fix missing section close in Site Map content
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290657216,1290657216,db2b19b8f0d452d682d53c7ed0ff6e359b46efa0
db2b19b8f0d452d682d53c7ed0ff6e359b46efa0,db2b19b8,Merge remote branch 'aj/buttonbox' into buttonbox,"Merge remote branch 'aj/buttonbox' into buttonbox
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290653855,1290653855,"b372f3c0ee4ec49aabe61c169cb1eb9bb4fb2cfc,915f881d61294dc6f5a6a3e8d75567e18492a631"
b372f3c0ee4ec49aabe61c169cb1eb9bb4fb2cfc,b372f3c0,Missing change to top level Makefile to build altosui,"Missing change to top level Makefile to build altosui

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290653446,1290653446,3fbefb3eea981d34a09496cf8abf0119de2e35bf
915f881d61294dc6f5a6a3e8d75567e18492a631,915f881d,"doc: Document altosui ""Site Map"" tab","doc: Document altosui ""Site Map"" tab
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290642750,1290642750,f01096c4b42f9a4720ed0414826c2a283a992545
f01096c4b42f9a4720ed0414826c2a283a992545,f01096c4,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290640250,1290640250,"357826aa9c7b42c59f5d52b8eb016d73b6da0c7f,3fbefb3eea981d34a09496cf8abf0119de2e35bf"
3fbefb3eea981d34a09496cf8abf0119de2e35bf,3fbefb3e,"Move altosui to the top level, placing libaltos inside it.","Move altosui to the top level, placing libaltos inside it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290639477,1290640145,7a50837ea0d92db3f469f197ec8210aee22aa143
357826aa9c7b42c59f5d52b8eb016d73b6da0c7f,357826aa,"docs: Document altosui ""Graph Data"" button","docs: Document altosui ""Graph Data"" button
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290640054,1290640054,7811e6dfa6caf10251da7df7c24b98cdc3787892
7811e6dfa6caf10251da7df7c24b98cdc3787892,7811e6df,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290638856,1290638856,"71b1949e50f4533bcf44537da65b19bc67863c8e,7a50837ea0d92db3f469f197ec8210aee22aa143"
7a50837ea0d92db3f469f197ec8210aee22aa143,7a50837e,altosui: Make sure packet mode is turned off when the connection fails,"altosui: Make sure packet mode is turned off when the connection fails

When the packet connection times out, turn packet mode off when
closing the serial port.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290624918,1290624918,7d90e2f6009e060fb59c519f7e564483a7ca6872
7d90e2f6009e060fb59c519f7e564483a7ca6872,7d90e2f6,altosui: Let people fire igniters that don't read as 'ready',"altosui: Let people fire igniters that don't read as 'ready'

This provides for igniter testing with LEDs or other materials that
don't look like regular igniters.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290572264,1290572264,f3233985a132e1d660e6df12d0056b6729f16faf
f3233985a132e1d660e6df12d0056b6729f16faf,f3233985,altosui: Disable radio configation over packet link.,"altosui: Disable radio configation over packet link.

Attempting to configure the radio over the packet link will only end
up confusing the user, so disable it. This also works around a bug in
older TM code which would lock up when trying to do this.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290568171,1290568227,6cd9be22f06f21d12ee2f668989d83d3c61d14c0
6cd9be22f06f21d12ee2f668989d83d3c61d14c0,6cd9be22,altosui: New AltosSerial.set_radio function sets channel/call,"altosui: New AltosSerial.set_radio function sets channel/call

Use this anytime you need to set the device radio channel and call
sign, either for telemetry reception or packet mode origination. This
uses the saved callsign and per-device radio channel number. Do not
use this when opening a telemetrum as there won't be a saved channel number.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290568087,1290568227,ed7cf7d262fcf7c0c677c2fb981582b571de9e5e
ed7cf7d262fcf7c0c677c2fb981582b571de9e5e,ed7cf7d2,altosui: Make AltosSerial.flush_input keep reading while non-empty,"altosui: Make AltosSerial.flush_input keep reading while non-empty

Flushing the input buffer can take a while, especially over the packet
link. Keep reading while stuff is appearing on the reply queue.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290567895,1290568227,3b9db8c82d26a6a2e43d4ca40742fc1bdc502380
3b9db8c82d26a6a2e43d4ca40742fc1bdc502380,3b9db8c8,altos: Make radio test command careful with the radio mutex.,"altos: Make radio test command careful with the radio mutex.

Remember whether the radio test mode is on or off and don't try to do
either of them twice to prevent the mutex from being acquired or
released twice.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290567774,1290568227,54468e5dc567aaac5c5c20e921859b7cec28bb88
54468e5dc567aaac5c5c20e921859b7cec28bb88,54468e5d,altos: Don't abort radio transmissions with ao_radio_abort,"altos: Don't abort radio transmissions with ao_radio_abort

We only want to abort pending radio reception to release the radio for
other use, or to change the radio channel. Let radio transmission
proceed. This fixes a problem with using packet mode to configure the
radio channel; if the packet transmission is aborted, the TM ends up
wedged.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290567469,1290568227,d873dc28f0752aeb58a6263e42bdd5b9095bd392
d873dc28f0752aeb58a6263e42bdd5b9095bd392,d873dc28,altos: remove unused variable from ao_igniter,"altos: remove unused variable from ao_igniter

The 'status' variable used to hold a reported status value from the
igniter after firing, but we ignore that now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290567406,1290568227,f1892b137b1de3d6caf0293bd40ed5c3e4948066
71b1949e50f4533bcf44537da65b19bc67863c8e,71b1949e,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290564851,1290564851,"a79225c215f17fa5218ddd9db4fc3f5c563a9f74,f1892b137b1de3d6caf0293bd40ed5c3e4948066"
f1892b137b1de3d6caf0293bd40ed5c3e4948066,f1892b13,"lose the placeholder on how GPS works, as it's going to be a","lose the placeholder on how GPS works, as it's going to be a
while before I tackle that, if ever.
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290563891,1290563891,853b7112e34212040c4cb7289f9cfdb2f3ea9f90
a79225c215f17fa5218ddd9db4fc3f5c563a9f74,a79225c2,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290563714,1290563714,"84cd5d42d8b5659463544fe2a400758b56478609,853b7112e34212040c4cb7289f9cfdb2f3ea9f90"
853b7112e34212040c4cb7289f9cfdb2f3ea9f90,853b7112,"merge Keith's AltosUI documention into ""the big book""","merge Keith's AltosUI documention into ""the big book""
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290563598,1290563598,737f2fdd012202f453120ece117ae5e859b32082
84cd5d42d8b5659463544fe2a400758b56478609,84cd5d42,altosui: sitemap uses rocket gps if no pad gps,"altosui: sitemap uses rocket gps if no pad gps
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290528812,1290528812,c7119c21baa9d4ca681975b8613ade6593f65577
c7119c21baa9d4ca681975b8613ade6593f65577,c7119c21,altosui: don't switch away from user selected tab,"altosui: don't switch away from user selected tab
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290528696,1290528696,ae55a107f12546dc65f04618c7abc17beb920d73
ae55a107f12546dc65f04618c7abc17beb920d73,ae55a107,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290527626,1290527626,"d1005f68376d695039c314b8d7a68bbf9acbca4f,737f2fdd012202f453120ece117ae5e859b32082"
737f2fdd012202f453120ece117ae5e859b32082,737f2fdd,doc: Add internal documentation for AltOS,"doc: Add internal documentation for AltOS

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290493579,1290493680,5523e7d55ecc8d310e495fa4f5115f7483c42d65
5523e7d55ecc8d310e495fa4f5115f7483c42d65,5523e7d5,add a rudimentary --help for command line use,"add a rudimentary --help for command line use
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290485230,1290485230,22c09781af1df4b38562b577e9926c23e4a397f2
d1005f68376d695039c314b8d7a68bbf9acbca4f,d1005f68,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290471295,1290471295,"9a83e0dc79f7a7467c7814d58daa2a2b89e50972,22c09781af1df4b38562b577e9926c23e4a397f2"
22c09781af1df4b38562b577e9926c23e4a397f2,22c09781,Merge remote branch 'origin/buttonbox' into buttonbox,"Merge remote branch 'origin/buttonbox' into buttonbox
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290470542,1290470542,"b27327a05d249eaf969b67d2a8d12fc6a93841f0,a79606a6507fc01a74910f7959e84c4e9a730714"
b27327a05d249eaf969b67d2a8d12fc6a93841f0,b27327a0,altos: assume igniter worked.,"altos: assume igniter worked.

Many igniters don't go open when fired, so there's no way
to know if they worked. Assume they did as a failed igniter is
unlikely to do anything when fired again anyways.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290470164,1290470164,68323cbb222f1f33198a42abaa0550af22f75a93
68323cbb222f1f33198a42abaa0550af22f75a93,68323cbb,altosui: Close serial port when debug link fails,"altosui: Close serial port when debug link fails

If the debug connection isn't working, close down the serial port when
reporting the failure.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290470007,1290470007,377ee7e90ecd028f984cd1abce96b2efc3b5b977
9a83e0dc79f7a7467c7814d58daa2a2b89e50972,9a83e0dc,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290463624,1290463624,"902735ffbfdd97672d52b09f17cdcd619193fd05,a79606a6507fc01a74910f7959e84c4e9a730714"
a79606a6507fc01a74910f7959e84c4e9a730714,a79606a6,Added PKGBUILDs for deps into contribs,"Added PKGBUILDs for deps into contribs
",,,,Bob Finch,w9ya@qrparci.net,Bdale Garbee,bdale@gag.com,1290453882,1290462625,e7954c820763f80e993f9f822e837725cf36af84
377ee7e90ecd028f984cd1abce96b2efc3b5b977,377ee7e9,altos: Add on/off modes to 'C' command,"altos: Add on/off modes to 'C' command

This lets the user turn the radio on/off and then invoke other commands.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290376997,1290376997,902735ffbfdd97672d52b09f17cdcd619193fd05
902735ffbfdd97672d52b09f17cdcd619193fd05,902735ff,altosui: keep sitemap more centred on rocket,"altosui: keep sitemap more centred on rocket
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290367766,1290367766,b85df38b5611e45cb9296df07b720badf74ac26e
b85df38b5611e45cb9296df07b720badf74ac26e,b85df38b,altosui: improve sitemap scrolling behaviour,"altosui: improve sitemap scrolling behaviour
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290367337,1290367337,4a9ded5b39ed08e13abc2cddba8b712f62b983f2
4a9ded5b39ed08e13abc2cddba8b712f62b983f2,4a9ded5b,AltosSiteMap: ensure buffer around active tile,"AltosSiteMap: ensure buffer around active tile
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290325190,1290325190,ec47bc93a487614714a752cb30ec9fe3d8f72929
ec47bc93a487614714a752cb30ec9fe3d8f72929,ec47bc93,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290319717,1290319717,"0393830f85da5efc96bbdf0d9769b66019c34b33,e7954c820763f80e993f9f822e837725cf36af84"
e7954c820763f80e993f9f822e837725cf36af84,e7954c82,"altosui: When fixing eeprom gps time information, make GPS data valid","altosui: When fixing eeprom gps time information, make GPS data valid

Eeprom files may be missing the GPS time (due to a firmware bug). Working
around this involves finding the next valid GPS time and using that to
create a fake GPS time entry. However, that next GPS time may not
be locked or may have few sats as it is from the boost stage of the
flight. Fix this by simply forcing the fake time packet to have
4 sats and be locked.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290319406,1290319406,84e570d8a8a52e0d358582135ec1b3a12be94c26
0393830f85da5efc96bbdf0d9769b66019c34b33,0393830f,AltosSiteMap: limit nr of tiles to 200x200,"AltosSiteMap: limit nr of tiles to 200x200
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290316415,1290316415,a08b2a6363c194195db92029743f6612676373ce
a08b2a6363c194195db92029743f6612676373ce,a08b2a63,"AltosSiteMap: never accept 0,0 as lat/long","AltosSiteMap: never accept 0,0 as lat/long
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290315801,1290315801,84e570d8a8a52e0d358582135ec1b3a12be94c26
84e570d8a8a52e0d358582135ec1b3a12be94c26,84e570d8,AltosSiteMap: refactor tile collection,"AltosSiteMap: refactor tile collection
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290314710,1290314710,71e487344395a8efc9cd279aad92f601ff4c6d3d
71e487344395a8efc9cd279aad92f601ff4c6d3d,71e48734,AltosSiteMap: thread safe tile addition,"AltosSiteMap: thread safe tile addition
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290312300,1290312300,c040bcd06679484175542208fb564d0271a7fc1b
c040bcd06679484175542208fb564d0271a7fc1b,c040bcd0,AltosSiteMap: try to get new tile construction right,"AltosSiteMap: try to get new tile construction right
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290309576,1290309576,c3994dd82d489289ebc99ff9c5fa88f560c023ac
c3994dd82d489289ebc99ff9c5fa88f560c023ac,c3994dd8,AltosSiteMap: extend map if rocket goes far away,"AltosSiteMap: extend map if rocket goes far away
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290308831,1290308831,835b903727a2eabda8d9659cc46e53301f92897c
835b903727a2eabda8d9659cc46e53301f92897c,835b9037,Merge branch 'sitemap' into buttonbox,"Merge branch 'sitemap' into buttonbox

Conflicts:
	ao-tools/altosui/AltosSiteMap.java
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290302102,1290302102,"440a0f3f5130eb0c8e614691892be8c94e7fd3c3,878913551a1e4e3c8f2b39fa4aeb234880735a1c"
878913551a1e4e3c8f2b39fa4aeb234880735a1c,87891355,AltosSiteMap: explain tile size better,"AltosSiteMap: explain tile size better
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290300922,1290300922,2a7dc3ba36bac81640a9498e0d0caf1470b57c19
440a0f3f5130eb0c8e614691892be8c94e7fd3c3,440a0f3f,altosui: Set site map flight path lines to 6 pixels anti-aliased.,"altosui: Set site map flight path lines to 6 pixels anti-aliased.

Much more visible over the map.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290300912,1290300912,8df185cd95cfecbed8272dd1275d077c5b45535b
2a7dc3ba36bac81640a9498e0d0caf1470b57c19,2a7dc3ba,Merge branch 'buttonbox' into sitemap,"Merge branch 'buttonbox' into sitemap

Conflicts:
	ao-tools/altosui/AltosFlightUI.java
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290300315,1290300315,"e5b1adae9b23b98a6321986f5cd67c9d3166b87f,ece2c86e2641b2cd613791293526c492b1606aa1"
8df185cd95cfecbed8272dd1275d077c5b45535b,8df185cd,Merge remote branch 'aj/sitemap' into buttonbox,"Merge remote branch 'aj/sitemap' into buttonbox

Conflicts:
	ao-tools/altosui/AltosFlightUI.java

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290299748,1290299748,"ece2c86e2641b2cd613791293526c492b1606aa1,1e712647dd6df1e77650db705f3ac32a3c8f6907"
e5b1adae9b23b98a6321986f5cd67c9d3166b87f,e5b1adae,"AltosSiteMap: better gps check, lower zoom","AltosSiteMap: better gps check, lower zoom
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290299679,1290299679,1e712647dd6df1e77650db705f3ac32a3c8f6907
ece2c86e2641b2cd613791293526c492b1606aa1,ece2c86e,altosui: Rewrite info table to mix with scroll pane well. Fix startup size,"altosui: Rewrite info table to mix with scroll pane well. Fix startup size

Using a single table for the info table means that the scroll pane
automatically picks up the table headers and shows them above the
scrollable view.

This patch also fixes the application size at startup so that no
scrollbar is required in the info table, and the window is < 800x600.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290298782,1290298782,37f0201d724693528f37ac7d275f68f90cf94da0
1e712647dd6df1e77650db705f3ac32a3c8f6907,1e712647,altosui: reindent,"altosui: reindent
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290293924,1290293924,a59a204e188e40ec8848a0dc63d6de710cee3039
a59a204e188e40ec8848a0dc63d6de710cee3039,a59a204e,Merge branch 'buttonbox' into sitemap,"Merge branch 'buttonbox' into sitemap
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290293773,1290293773,"82636305021c41d676f5f0f11378724fe0de0079,37f0201d724693528f37ac7d275f68f90cf94da0"
82636305021c41d676f5f0f11378724fe0de0079,82636305,AltosSiteMap: be more polite about preferred size,"AltosSiteMap: be more polite about preferred size
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290293053,1290293053,66ebd954d9c9a44a8db0ee713c682e39306fabd8
37f0201d724693528f37ac7d275f68f90cf94da0,37f0201d,altosui: change descent tab formatting to four columns,"altosui: change descent tab formatting to four columns

This places labels to the left of each field. For igniter voltages,
it uses three columns for the labels.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290292283,1290292283,b47517d4c2e49f6f7b9954d2c85f96397fe1103e
66ebd954d9c9a44a8db0ee713c682e39306fabd8,66ebd954,Add GrabNDrag.java,"Add GrabNDrag.java
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290292104,1290292104,72f5e05f9f0055f2cef8b840812f090556c94338
72f5e05f9f0055f2cef8b840812f090556c94338,72f5e05f,AltosSiteMap: major refactoring,"AltosSiteMap: major refactoring
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290291519,1290291519,51e403145d28ac913e36d205077a613845596be2
b47517d4c2e49f6f7b9954d2c85f96397fe1103e,b47517d4,altosui: re-indent,"altosui: re-indent
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290290797,1290290797,6f8bc2ad20b715343e0510563ab0f14787ef3e07
6f8bc2ad20b715343e0510563ab0f14787ef3e07,6f8bc2ad,AltosDescent: switch elev from height to range,"AltosDescent: switch elev from height to range
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290267292,1290267292,89f44c5587ea4f927d5e398b6af919df0d6561c3
89f44c5587ea4f927d5e398b6af919df0d6561c3,89f44c55,AltosAscent/Descent: tidy up layout,"AltosAscent/Descent: tidy up layout
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290266821,1290266821,9a99cabc1c34c657fc95246192ba6d330f5f22d3
51e403145d28ac913e36d205077a613845596be2,51e40314,AltosSiteMapTile: draw boost circle as well as landed,"AltosSiteMapTile: draw boost circle as well as landed
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290262671,1290262671,25ffe1cc7823895886b4777f310b4bda1c80133b
25ffe1cc7823895886b4777f310b4bda1c80133b,25ffe1cc,AltosSiteMap: automatic fetching of map data,"AltosSiteMap: automatic fetching of map data
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290262036,1290262036,20f714bbe3137de8fb7491b39985021fd1774930
20f714bbe3137de8fb7491b39985021fd1774930,20f714bb,AltosSiteMapTile: seperate map and drawing layers,"AltosSiteMapTile: seperate map and drawing layers
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290257391,1290257391,58f8d069ce9488e2987b8e92caa69fe68cda7569
58f8d069ce9488e2987b8e92caa69fe68cda7569,58f8d069,AltosSiteMap: add autoscroll and grabndrag scroll,"AltosSiteMap: add autoscroll and grabndrag scroll
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290251197,1290251197,74cab8503b51ba6fb05a4d12a031c749e870b0ef
74cab8503b51ba6fb05a4d12a031c749e870b0ef,74cab850,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290241245,1290241245,"0ecf033110084f1a8be98282d7029dc14f70dab5,9a99cabc1c34c657fc95246192ba6d330f5f22d3"
0ecf033110084f1a8be98282d7029dc14f70dab5,0ecf0331,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290240870,1290240870,"081fbd5715f9d3d81d98e149fb95d40447c07a79,71c41eadd12c3ece5fffce7669e4991778046d4e"
9a99cabc1c34c657fc95246192ba6d330f5f22d3,9a99cabc,altosui: Fix channel changing in flight UI to actually work,"altosui: Fix channel changing in flight UI to actually work

Replacing the menu with a combo box required reworking the way events
are delivered from that widget back to the channel changing
function. Just delete the old magic and use the JComboBox action
listener directly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290240838,1290240838,71c41eadd12c3ece5fffce7669e4991778046d4e
71c41eadd12c3ece5fffce7669e4991778046d4e,71c41ead,altosui: Initialize display thread state in constructor instead of run,"altosui: Initialize display thread state in constructor instead of run

Some state will get set before run is called, initializing it there
can be too late.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290240543,1290240543,7920ed5c34b088f45ce4213b061ddd1ffe22cee8
081fbd5715f9d3d81d98e149fb95d40447c07a79,081fbd57,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

Conflicts:
	ao-tools/altosui/AltosFlightUI.java
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290238849,1290238849,"90b9bc4475011bead7117ed72fa5efa0f77b2813,7920ed5c34b088f45ce4213b061ddd1ffe22cee8"
7920ed5c34b088f45ce4213b061ddd1ffe22cee8,7920ed5c,altosui: calling thread.interrupt with null thread doesn't work well,"altosui: calling thread.interrupt with null thread doesn't work well

This was a left-over from debugging the previous patch.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290237531,1290237531,8c8dc3794c7b5fa5a5b43b1c461d6c8bb3ab425d
8c8dc3794c7b5fa5a5b43b1c461d6c8bb3ab425d,8c8dc379,"altosui: When switching log files, don't terminate log thread","altosui: When switching log files, don't terminate log thread

The log thread automatically switches output files when the incoming
telemetry changes. Don't use 'close' for that as 'close' terminates
the log thread as well as closing the file. Create a new
'close_log_file' function which just closes the file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290236955,1290236955,594e80572821f1848db062d0cff18ca8bf0d90ce
594e80572821f1848db062d0cff18ca8bf0d90ce,594e8057,altosui: switch channel selector to combo box. Shorten displayed device names,"altosui: switch channel selector to combo box. Shorten displayed device names

A combo box displays the current value, which is quite nice to
have. Add a 'toShortString' for AltosDevice so that the window frames
and error messages don't have extra spaces generated by the
altos_device toString method.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290235488,1290235691,fa07afc73bc5eccff8464a2def05ad600da33c97
fa07afc73bc5eccff8464a2def05ad600da33c97,fa07afc7,update turnon scripts to use stashed copies of stable release firmware,"update turnon scripts to use stashed copies of stable release firmware
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1290234822,1290234822,9ffc2eb53a47e435f39b02896b0e43ae5f47f450
9ffc2eb53a47e435f39b02896b0e43ae5f47f450,9ffc2eb5,altosui: Use timeouts to recover from broken packet links.,"altosui: Use timeouts to recover from broken packet links.

This puts timeouts every place the system reads from the packet link
and aborts the in-progress operation if it takes more than a second to
get a response.

Also mixed in here are persistent igniter status displays for the
ejection testing UI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290219948,1290219948,68078eab3c07d8dc83302747cf6f3dcb1797c6ce
68078eab3c07d8dc83302747cf6f3dcb1797c6ce,68078eab,doc: Document the 'Flash Image' operation.,"doc: Document the 'Flash Image' operation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290170669,1290170669,b4bdda65488e8ef27d2889cb6cc8eda3c5d50e0a
b4bdda65488e8ef27d2889cb6cc8eda3c5d50e0a,b4bdda65,doc: git ignore generated doc files,"doc: git ignore generated doc files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290169754,1290169754,f0542085de2139ef562af068ec05fa73f47c73b1
f0542085de2139ef562af068ec05fa73f47c73b1,f0542085,doc: Add preliminary altosui documentation,"doc: Add preliminary altosui documentation

Also, update the Makefile to allow for further documents to be added
without a lot of custom rules.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290169609,1290169609,0e7a10f71803d60f8b34c5a91efd220449442769
0e7a10f71803d60f8b34c5a91efd220449442769,0e7a10f7,altosui: Clean up global AltosUI configuration settings dialog,"altosui: Clean up global AltosUI configuration settings dialog

This dialog had a mish-mash of styles and was confusing.
Now it's got a label for each line, and suitable setters for
each element

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290158163,1290158163,8f72f08839346fb225238420324f0edcd070e531
8f72f08839346fb225238420324f0edcd070e531,8f72f088,altosui: Unify datafile selection to AltosDataChooser,"altosui: Unify datafile selection to AltosDataChooser

Instead of having several separate intefaces, use a single dialog for
selecting data files for graph/export/replay.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290158057,1290158135,24ffcf86c43290ce0f70fb4ee0984b3debdb8a5f
24ffcf86c43290ce0f70fb4ee0984b3debdb8a5f,24ffcf86,altosui: Add igniter ground testing code,"altosui: Add igniter ground testing code

Not yet hooked up, but the UI is finished.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1290152490,1290153277,1a4b6e96f823035b113f01d1bdfd61afc1f33e25
90b9bc4475011bead7117ed72fa5efa0f77b2813,90b9bc44,AltosSiteMapTile: adjust scale to 1 nmi per tile,"AltosSiteMapTile: adjust scale to 1 nmi per tile
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290137400,1290137400,fa45336062523838ba8abb08427cdc4d9c7de7a8
fa45336062523838ba8abb08427cdc4d9c7de7a8,fa453360,AltosSiteMapTile: adjust centering calculation,"AltosSiteMapTile: adjust centering calculation
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290136649,1290136649,fda93afcd8aa4133b0e5f008b824d072e338d0ed
fda93afcd8aa4133b0e5f008b824d072e338d0ed,fda93afc,AltosSiteMapTile: autoscale to about 2 nmi per tile,"AltosSiteMapTile: autoscale to about 2 nmi per tile
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290135725,1290135725,483346a03c94b200692f5e6d59f3feee4dcf2ace
483346a03c94b200692f5e6d59f3feee4dcf2ace,483346a0,altosui: tile site maps,"altosui: tile site maps
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290132586,1290132586,939be6793238a275b7682ecc376fed14379cf044
939be6793238a275b7682ecc376fed14379cf044,939be679,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

Conflicts:
	ao-tools/altosui/AltosFlightUI.java
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1290023646,1290023646,"e68fe9454352087889c560d95797922493117acb,1a4b6e96f823035b113f01d1bdfd61afc1f33e25"
1a4b6e96f823035b113f01d1bdfd61afc1f33e25,1a4b6e96,altosui: Add igniter status to ascent and descent tabs,"altosui: Add igniter status to ascent and descent tabs

Monitor igniters during all phases of the flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289918789,1289918789,d0eb41619544ead6d9dab3a8d024a12936c9cdd0
d0eb41619544ead6d9dab3a8d024a12936c9cdd0,d0eb4161,altosui: Cleanup flight UI layout,"altosui: Cleanup flight UI layout

Use common constants for fonts and insets
Shrink fonts so that the window is < 600 pixels tall.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289917200,1289917200,fcca333cda64be35f0c9fb0109eef1be3709dddd
fcca333cda64be35f0c9fb0109eef1be3709dddd,fcca333c,altosui: Add callsign configuration in AltosUI configuration dialog,"altosui: Add callsign configuration in AltosUI configuration dialog

This callsign is used during packet communication.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289915399,1289915399,39e371561469d8e5059638ffa4e7075f391de268
d1dbe3b69e6f95ef8ecd4cf959863b922ab47c66,d1dbe3b6,add a paragraph about forcing TM back to idle mode if an accel cal goes badly,"add a paragraph about forcing TM back to idle mode if an accel cal goes badly
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1289844480,1289844480,566c6486c8815ae241e0b116a93b1a0ff4783831
39e371561469d8e5059638ffa4e7075f391de268,39e37156,altosui: add reboot button to telemetrum configuration UI,"altosui: add reboot button to telemetrum configuration UI

This lets you reconfigure and reboot telemetrum, including over the
radio link.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289834091,1289834168,257e97137325f5dbbd6aa034f20fd6937b67df90
257e97137325f5dbbd6aa034f20fd6937b67df90,257e9713,"altosui: eliminate menu bar, moving elements to buttons.","altosui: eliminate menu bar, moving elements to buttons.

This adds a new 'configure AltosUI' dialog to set the log directory
and voice preferences.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289831915,1289831915,524644d8d8ce3f8a5a914ecfc7e2a8d474d89095
524644d8d8ce3f8a5a914ecfc7e2a8d474d89095,524644d8,"altosui: oops, missed a file in the previous commit","altosui: oops, missed a file in the previous commit

AltosSerialInUseException.java just defines a new exception, thanks to
java for making this live in a separate file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289829884,1289829884,511903704f7e1b22e88dd3e3cc35fd3c0583820e
511903704f7e1b22e88dd3e3cc35fd3c0583820e,51190370,"altosui: With --replay option, exit when replay window is closed","altosui: With --replay option, exit when replay window is closed

Otherwise, the application hangs around forever.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289734017,1289734017,11c95f687b1f68d35fa1a0af2c4e7982b8bb226a
11c95f687b1f68d35fa1a0af2c4e7982b8bb226a,11c95f68,"altosui: Replace flight status table with labels, fix resize.","altosui: Replace flight status table with labels, fix resize.

There's no reason to use a table for the flight status data,
replace that with a selection of widgets instead.

Also, set all of the grid bag constraints for the various flight
status displays so that resize does something sensible.

Adds a scrollbar to the table display so that it can shrink.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289696991,1289696991,dcfa56498d1b65a213b8aba9cbd6c4806532383c
dcfa56498d1b65a213b8aba9cbd6c4806532383c,dcfa5649,altosui: Open serial device at 'new' time. Prohibit duplicate opens.,"altosui: Open serial device at 'new' time. Prohibit duplicate opens.

With the per-serial UI, there's never a reason to create a serial
device without opening it right away. This eliminates the bug caused
by not opening the serial device for telemetry reception.

Serial devices can now be opened only once; this eliminates errors
when trying to reflash or configure devices while receiving telemetry.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289693224,1289693224,8463ffcaca6bcd31e645aba71c171f548dce96d8
8463ffcaca6bcd31e645aba71c171f548dce96d8,8463ffca,altosui: Eliminate unncessary import altosui lines,"altosui: Eliminate unncessary import altosui lines

Java appears to automatically import every module from the current
package.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289690354,1289690354,a6f30fae906bd87dff192c5fd4d10df283f99930
566c6486c8815ae241e0b116a93b1a0ff4783831,566c6486,continuing to work on the docs,"continuing to work on the docs
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1289675952,1289675952,1bdc6166f3bc5ce3f8e55acb1484923781412e21
e68fe9454352087889c560d95797922493117acb,e68fe945,AltosSiteMap: add targeting circles around landing site,"AltosSiteMap: add targeting circles around landing site
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289660341,1289660341,1e7e02987276847274493312202d22222c953149
1e7e02987276847274493312202d22222c953149,1e7e0298,AltosTelemetryReader: actually open serial port,"AltosTelemetryReader: actually open serial port
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289660265,1289660265,9c32b93ef5fb43558fb0179ea1b047e35b7ed6e8
9c32b93ef5fb43558fb0179ea1b047e35b7ed6e8,9c32b93e,Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox,"Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289658551,1289658551,"991541f57f065f429c6ec425efd6ac731280b2c1,a6f30fae906bd87dff192c5fd4d10df283f99930"
a6f30fae906bd87dff192c5fd4d10df283f99930,a6f30fae,altosui: Add RF calibration to TeleMetrum config dialog,"altosui: Add RF calibration to TeleMetrum config dialog

I think that's the last user-settable value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289610142,1289610142,5394548fa5c7bdbfcc01e8aa19e93e1cf6345e2a
1bdc6166f3bc5ce3f8e55acb1484923781412e21,1bdc6166,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1289608363,1289608363,"f1118717780a81f9257d2eed7828b66538deb8a8,5c6a5335a057be0219450b4b9889c647d8d4a012"
f1118717780a81f9257d2eed7828b66538deb8a8,f1118717,fold in content from Keith's email on the re-flashing subject,"fold in content from Keith's email on the re-flashing subject
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1289608341,1289608341,7def9dd0d0a4ce9cf7c65de573100e664f278717
7def9dd0d0a4ce9cf7c65de573100e664f278717,7def9dd0,first cut at instructions on how to re-flash TM and TD devices based on email,"first cut at instructions on how to re-flash TM and TD devices based on email
reply to a user who asked
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1289584734,1289584734,ca931b1c484bd6b64617370e81b16e169fdae1c2
991541f57f065f429c6ec425efd6ac731280b2c1,991541f5,better error behaviour if no map,"better error behaviour if no map
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289569362,1289569362,1bcfa22de7821984149db10cb79913efed36b41e
1bcfa22de7821984149db10cb79913efed36b41e,1bcfa22d,pull up maps for arbitrary locations,"pull up maps for arbitrary locations
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289568580,1289568580,beb6c881ec006241c7d2820c64e5381131d41180
beb6c881ec006241c7d2820c64e5381131d41180,beb6c881,"make infotable scrollable, revert its fontsize to 14","make infotable scrollable, revert its fontsize to 14
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289496266,1289496266,0327c1da01a3f6ede01f05c1d775651a57fd0c68
0327c1da01a3f6ede01f05c1d775651a57fd0c68,0327c1da,tabs -> spaces,"tabs -> spaces
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289491738,1289491738,81e7b43ecad666e2e2310c7c94184f888bc86585
81e7b43ecad666e2e2310c7c94184f888bc86585,81e7b43e,"add site map tab, at least for QRS launches","add site map tab, at least for QRS launches
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289491661,1289491661,5394548fa5c7bdbfcc01e8aa19e93e1cf6345e2a
5394548fa5c7bdbfcc01e8aa19e93e1cf6345e2a,5394548f,Merge remote branch 'aj/buttonbox' into buttonbox,"Merge remote branch 'aj/buttonbox' into buttonbox
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289455881,1289455881,"891e629f6ba20654b614f3ca7211a0f1c92670cb,75f7698b99a661ed17a91748a99699fa6761772a"
75f7698b99a661ed17a91748a99699fa6761772a,75f7698b,add compass bearing during descent,"add compass bearing during descent
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289455592,1289455592,cc0a730de093c49be2a921101d27622b6f592e92
cc0a730de093c49be2a921101d27622b6f592e92,cc0a730d,add compass bearing to voice output,"add compass bearing to voice output
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289455072,1289455072,317ec72a34906faad88c6924e634617b074e71db
317ec72a34906faad88c6924e634617b074e71db,317ec72a,use grayled.png for off,"use grayled.png for off
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289454721,1289454721,8503943e3613f8670b128012b12ff14fb54321d7
8503943e3613f8670b128012b12ff14fb54321d7,8503943e,reduce font size for FlightInfoTable,"reduce font size for FlightInfoTable
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289454343,1289454343,3ffaa5d1c00b28be20fd4a26deb7bd41d953e92a
3ffaa5d1c00b28be20fd4a26deb7bd41d953e92a,3ffaa5d1,read preferences for --replay,"read preferences for --replay
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289454185,1289454185,1f3e091efdfb2fe6f06a066cac60f5d267b94856
1f3e091efdfb2fe6f06a066cac60f5d267b94856,1f3e091e,add --replay command line argument,"add --replay command line argument
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289454037,1289454037,b16b873723ee3e5097e6725c59ce191119439ad7
b16b873723ee3e5097e6725c59ce191119439ad7,b16b8737,use value_font for values,"use value_font for values
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1289453907,1289453907,b0d31910da592e2f67c47c8fc3e15ce8135d5094
891e629f6ba20654b614f3ca7211a0f1c92670cb,891e629f,altos: Use grey leds when unlit - easier to see,"altos: Use grey leds when unlit - easier to see
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289435299,1289435411,b0d31910da592e2f67c47c8fc3e15ce8135d5094
5c6a5335a057be0219450b4b9889c647d8d4a012,5c6a5335,Updated PKGBUILD-git.altos,"Updated PKGBUILD-git.altos

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Bob Finch,w9ya@qrparci.net,Keith Packard,keithp@keithp.com,1288643801,1289435339,ca931b1c484bd6b64617370e81b16e169fdae1c2
b0d31910da592e2f67c47c8fc3e15ce8135d5094,b0d31910,"altosui: Add ascent, descent and landed tabs","altosui: Add ascent, descent and landed tabs

This completes the set of tabs for in-flight status information.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289374472,1289374472,22d00785188a880700cd372528189a7a15278da9
22d00785188a880700cd372528189a7a15278da9,22d00785,altosui: Add tab UI with 'pad' mode.,"altosui: Add tab UI with 'pad' mode.

This creates a multi-tab interface for flight monitoring
and includes a special tab for 'pad' mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289342458,1289342458,eb77e806ded99532dc7eaa39c1893f075b028af6
eb77e806ded99532dc7eaa39c1893f075b028af6,eb77e806,altosui: Create abstract interface for flight data display,"altosui: Create abstract interface for flight data display

This allows the implementation of the flight data display to occur in
the flight UI instead of the display thread.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289326894,1289326894,a0a92c605e238277c9881545a7226e53b5dbc295
a0a92c605e238277c9881545a7226e53b5dbc295,a0a92c60,altosui: Fix more calls to AltosPreferences.channel(),"altosui: Fix more calls to AltosPreferences.channel()

Oops. Two more.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289283446,1289283446,94f4a50d6430cc8280cbdaa9f39d3cb858d0e077
94f4a50d6430cc8280cbdaa9f39d3cb858d0e077,94f4a50d,altosui: Fix channel setting at serial open time,"altosui: Fix channel setting at serial open time

Was using the previous non-device-specific preferences API.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289283046,1289283046,6b17d276271faa8a420a1c8f6be17faaa0c7043c
6b17d276271faa8a420a1c8f6be17faaa0c7043c,6b17d276,altosui: Create buttons for main actions,"altosui: Create buttons for main actions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289282824,1289282889,16916be51d746b1e1057b3219e5bec8f8814259e
16916be51d746b1e1057b3219e5bec8f8814259e,16916be5,altosui: Split out flight monitoring to separate window,"altosui: Split out flight monitoring to separate window

This creates a per-TD (or replay) window to contain the flight
monitoring information, allowing multiple monitors.

This also adds per-TD preferences for monitoring channel.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1289025887,1289282882,811ced628d586134224c1b501b40ce9eb435fc7c
ca931b1c484bd6b64617370e81b16e169fdae1c2,ca931b1c,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1286408864,1286408864,811ced628d586134224c1b501b40ce9eb435fc7c
811ced628d586134224c1b501b40ce9eb435fc7c,811ced62,altosui: Separate out jfreechart and jcommon directories,"altosui: Separate out jfreechart and jcommon directories

This allows these packages to be referenced separately

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1286408547,1286408646,c2c4d515ef9cc2cae8a8f2803e9498bb0794c4ed
c2c4d515ef9cc2cae8a8f2803e9498bb0794c4ed,c2c4d515,altosui: Remove ability to graph data in .csv files,"altosui: Remove ability to graph data in .csv files

There's no reason to support these files when the raw .eeprom or
.telem files which generate them should be used instead.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1286407549,1286408646,d5caf6f2f4d9257e26aa4305b26c02d1b263fa24
d5caf6f2f4d9257e26aa4305b26c02d1b263fa24,d5caf6f2,"remove the csv build dep, as that code will be abandoned","remove the csv build dep, as that code will be abandoned
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1286406875,1286406875,43e23a60780191e3c6f61df44c5dd08cc8604c51
43e23a60780191e3c6f61df44c5dd08cc8604c51,43e23a60,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1286404077,1286404077,8103432bf7adfe6ee5bf3ee42e1672475e6edd5a
8103432bf7adfe6ee5bf3ee42e1672475e6edd5a,8103432b,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1286403993,1286403993,635066cd35fb24cacf8400a477ea4b4e3dd2c39c
635066cd35fb24cacf8400a477ea4b4e3dd2c39c,635066cd,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1286403979,1286403979,4396aaaf34cda3751dcca0eceb05b4ffeb411cde
4396aaaf34cda3751dcca0eceb05b4ffeb411cde,4396aaaf,add build-dep on libcsv-java,"add build-dep on libcsv-java
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1286403922,1286403922,7475ab5804bf3fb12b1b755e850af90d5a15d3eb
7475ab5804bf3fb12b1b755e850af90d5a15d3eb,7475ab58,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1286403575,1286403575,d8a2f4ceb1c70a6be976a78e2264c961de2f2277
d8a2f4ceb1c70a6be976a78e2264c961de2f2277,d8a2f4ce,add build dep on jfreechart lib,"add build dep on jfreechart lib
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1286403525,1286403525,f0d1468ceae065f0cdae6f6ae3323dec5636f073
f0d1468ceae065f0cdae6f6ae3323dec5636f073,f0d1468c,altosui: Add KML file export.,"altosui: Add KML file export.

Command line has switches now, --kml and --csv
Export save dialog has combo box to select kml or csv result.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1285721809,1285721809,5a119fd92532d53e552efe1f7c61e87181fcace0
5a119fd92532d53e552efe1f7c61e87181fcace0,5a119fd9,Merge remote branch 'aj/master',"Merge remote branch 'aj/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1285651687,1285651687,"28da3406426437604125d332e4cda90d459df487,82744c3497d37650b88dee80be7956c4bd1cffb2"
82744c3497d37650b88dee80be7956c4bd1cffb2,82744c34,Add callsign/serial/flight to graph title,"Add callsign/serial/flight to graph title
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1285651627,1285651627,ce7f59fbfb5a94a67a4ceced3cc371b4c6b6e5d1
28da3406426437604125d332e4cda90d459df487,28da3406,altosui: use Altos constants in graphing code,"altosui: use Altos constants in graphing code

The Altos class nicely defines constants for all of the flight states.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1285651616,1285651616,ce7f59fbfb5a94a67a4ceced3cc371b4c6b6e5d1
ce7f59fbfb5a94a67a4ceced3cc371b4c6b6e5d1,ce7f59fb,Hax0r graphing to support telem/eeprom files,"Hax0r graphing to support telem/eeprom files
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1285649101,1285649101,e2b9f47a205348d38756c70e928a2a9183de6884
e2b9f47a205348d38756c70e928a2a9183de6884,e2b9f47a,Merge branch 'master' of git://git.gag.com/fw/altos,"Merge branch 'master' of git://git.gag.com/fw/altos
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1285642547,1285642547,"7ef3ad0c9354c0484c25badc69334b59c7f355e2,803203197e51e71e9c77b3610047fd5bf9a56c56"
803203197e51e71e9c77b3610047fd5bf9a56c56,80320319,altosui: Deal with eeprom dates going backwards across wrap,"altosui: Deal with eeprom dates going backwards across wrap

eeprom timestamps can go backwards as the GPS time stamps are
recorded when the first GPS character is received, but not placed into
the eeprom log until the last GPS packet is complete. If this happens
at the same time the tick count is wrapping, then the tick count will
wrap backwards across the 0 boundary causing time to jump forwards.

Fix this by letting time go backwards across the tick boundary, which
requires that we know when the first 'real' tick is read from the
eeprom file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1285638750,1285638750,fe7eba2e4af36cf29d8dc2378ac6985be04f68c6
fe7eba2e4af36cf29d8dc2378ac6985be04f68c6,fe7eba2e,"altosui: .CSV output: add link quality, gps hdop and sat C/N0 numbers","altosui: .CSV output: add link quality, gps hdop and sat C/N0 numbers

This makes the CSV files contain all of the available information.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1285638665,1285638665,c89a34d1eb25155405b0036baeadc7bbfeade1c2
c89a34d1eb25155405b0036baeadc7bbfeade1c2,c89a34d1,altosui: Create iterables for log file scanning. Split out display threads,"altosui: Create iterables for log file scanning. Split out display threads

Convert from log file reading paradigm to using iterators which is
more idiomatic for java. Split more code out of AltosUI.java,
including the display update threads for telemetry monitoring and
logfile replay.x

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1285632708,1285632708,e66919aa46193bd8c7a1e86fb32a3367dae121f5
7ef3ad0c9354c0484c25badc69334b59c7f355e2,7ef3ad0c,Merge branch 'master' of git://git.gag.com/fw/altos,"Merge branch 'master' of git://git.gag.com/fw/altos
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1285288086,1285288086,"eb74866e919e8c661153847871f5a79e66d37296,e66919aa46193bd8c7a1e86fb32a3367dae121f5"
e66919aa46193bd8c7a1e86fb32a3367dae121f5,e66919aa,altosui: Require 4 sats for 'good' GPS data,"altosui: Require 4 sats for 'good' GPS data

Wait for 10 consecutive GPS reports with at least 4 sats before
reporting ""GPS ready"" state.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1285285971,1285285971,34ca8c00f4be72c314baff4c96f1e2f010948454
34ca8c00f4be72c314baff4c96f1e2f010948454,34ca8c00,altosui: remove unused ReplayThread wrapper classes,"altosui: remove unused ReplayThread wrapper classes

These aren't used now that the replay opener dialog knows how to build
a reader from a filename.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284989449,1284989449,fd010661ced6075f82a961625826665a3d8d1efe
fd010661ced6075f82a961625826665a3d8d1efe,fd010661,altosui: Factor some UI elements into separate classes,"altosui: Factor some UI elements into separate classes

Clean up AltosUI by moving the two main tables to separate class files.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283202004,1284989295,1260589976c1a95848b298497fd251c4ee7d3f93
eb74866e919e8c661153847871f5a79e66d37296,eb74866e,Merge branch 'master' of git://git.gag.com/fw/altos,"Merge branch 'master' of git://git.gag.com/fw/altos
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1284984326,1284984326,"af404b428bd742039afc25ff3850f76bc92c7c29,1260589976c1a95848b298497fd251c4ee7d3f93"
1260589976c1a95848b298497fd251c4ee7d3f93,12605899,altosui: Write raw sensor data to .csv files,"altosui: Write raw sensor data to .csv files

For data export, provide the raw sensor samples instead of the
filtered values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284889949,1284889949,7a4d7110debb88f4e906fee7c46f2badd561809d
7a4d7110debb88f4e906fee7c46f2badd561809d,7a4d7110,altosui: Use recorded ground acceleration when reading eeprom files,"altosui: Use recorded ground acceleration when reading eeprom files

The flight software records 1000 accelerometer samples and records
that in the flight log. Use that value instead of using the very few
samples recorded in the eeprom before boost is detected. This
generates far more accurate accerometer data in the .csv files.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284889843,1284889843,b9623f8ef26491e9fa14e2478295fe6f5cbbd87f
af404b428bd742039afc25ff3850f76bc92c7c29,af404b42,Add JFreeChart to Makefile.am,"Add JFreeChart to Makefile.am
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1284499444,1284499444,61590b8729831cb138b2ba6b88802c208d114753
61590b8729831cb138b2ba6b88802c208d114753,61590b87,Add graphing.,"Add graphing.
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1284497465,1284497465,3d64f5a6511529ca53699190f4d54de1ba62a9bd
3d64f5a6511529ca53699190f4d54de1ba62a9bd,3d64f5a6,Merge branch 'master' of git://git.gag.com/fw/altos,"Merge branch 'master' of git://git.gag.com/fw/altos
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1284182114,1284182114,"ec6da0824474e46de842845d7b53fe1a1dde33ed,b9623f8ef26491e9fa14e2478295fe6f5cbbd87f"
b9623f8ef26491e9fa14e2478295fe6f5cbbd87f,b9623f8e,altosui: Remember directory containing firmware files,"altosui: Remember directory containing firmware files

Instead of forcing the user to navigate to the firmware directory each
time, this remembers the previous directory and starts there.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284178034,1284178034,7f2204e0832b14b1edca4266a2cbc272141ecc2b
7f2204e0832b14b1edca4266a2cbc272141ecc2b,7f2204e0,altosui: set default .csv file name in file save dialog,"altosui: set default .csv file name in file save dialog

This uses setSelectedFile to specify which output filename to make the
default in the save dialog.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284177305,1284177359,7e053ae1f2d09347123ac9fa79e46645378b4c70
7e053ae1f2d09347123ac9fa79e46645378b4c70,7e053ae1,"make the column headers comma separated, too, so they align with the data","make the column headers comma separated, too, so they align with the data
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284136955,1284136955,10310672a83a66dc630718b151d653fc066f8e59
ec6da0824474e46de842845d7b53fe1a1dde33ed,ec6da082,Merge branch 'master' of git://git.gag.com/fw/altos,"Merge branch 'master' of git://git.gag.com/fw/altos
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1284099094,1284099094,"7c2e4114a3a43f919a7a6c967d3f16e5d630f90f,10310672a83a66dc630718b151d653fc066f8e59"
10310672a83a66dc630718b151d653fc066f8e59,10310672,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284098965,1284098965,9d0e89e8ad8926dc8371fa809835a580ae49711d
9d0e89e8ad8926dc8371fa809835a580ae49711d,9d0e89e8,altosui: Stop parsing eeprom file after hitting 'landed' state,"altosui: Stop parsing eeprom file after hitting 'landed' state

Sometimes there are additional records found in the eeprom file; the
reader is mostly worried about not losing anything, so it reads as
much as it can. However, the last record written for any flight is the
'landed' record, so we can stop looking at the file after hitting that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284098699,1284098836,67b6952f7126704478ede5575e5e938d18fcc329
67b6952f7126704478ede5575e5e938d18fcc329,67b6952f,altosui: Fill in time value of last Eeprom record read from file,"altosui: Fill in time value of last Eeprom record read from file

The last record is handled separately, and was missing the code to
compute the time. Sigh.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284098654,1284098836,8b0b584cd0ca7542e65aac0c7897ad7ab4115122
8b0b584cd0ca7542e65aac0c7897ad7ab4115122,8b0b584c,altosui: Remove debug printfs from AltosTelemetryReader,"altosui: Remove debug printfs from AltosTelemetryReader

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284098147,1284098836,a80bfae15f1499c49f7ef47978bf0337d8120892
a80bfae15f1499c49f7ef47978bf0337d8120892,a80bfae1,"rewind packaging changelog, again","rewind packaging changelog, again
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284098254,1284098254,78ce3120e5a53858ca0d43c734aa5d28b4948ce3
78ce3120e5a53858ca0d43c734aa5d28b4948ce3,78ce3120,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284097940,1284097940,71c85613a28c24c3aad7b4aa3299d8677ef1268e
71c85613a28c24c3aad7b4aa3299d8677ef1268e,71c85613,rewind packaging changelog,"rewind packaging changelog
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284097883,1284097883,af200f5b84555de0556b52146379f3934774a3f3
7c2e4114a3a43f919a7a6c967d3f16e5d630f90f,7c2e4114,Merge branch 'master' of git://git.gag.com/fw/altos,"Merge branch 'master' of git://git.gag.com/fw/altos
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1284097801,1284097801,"ddc83b4c401be965a9947782becf20cc8c54e6a2,af200f5b84555de0556b52146379f3934774a3f3"
af200f5b84555de0556b52146379f3934774a3f3,af200f5b,altosui: Fix telemetry file reader to handle tick count wrapping,"altosui: Fix telemetry file reader to handle tick count wrapping

The telemetry reader was ignoring tick count wrapping, so you'd see
time go backwards in jumps. Not useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284096648,1284096712,96ca7051f60ea299e3e05bafbe5717fc83c3afd2
96ca7051f60ea299e3e05bafbe5717fc83c3afd2,96ca7051,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284094203,1284094203,2d5e48c5dc0e822fdf430f43804c1e5e79fdbf84
2d5e48c5dc0e822fdf430f43804c1e5e79fdbf84,2d5e48c5,Add --with-fat-dir configure option to publish finished stand-alone bits,"Add --with-fat-dir configure option to publish finished stand-alone bits

--with-fat-dir specifies a directory to copy the finished
linux/macosx/windows stand-alone (""fat"") packages to. A sub-directory
will be created under the specified directory based on the product
version number and the files copied there.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284092890,1284092890,dd2b77b2a516a055f29191dcdfeb727e637aae86
dd2b77b2a516a055f29191dcdfeb727e637aae86,dd2b77b2,altosui: libaltos.so is built with libtool -- it's in ../libaltos/.libs,"altosui: libaltos.so is built with libtool -- it's in ../libaltos/.libs

It used to be in ../libaltos

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284091169,1284091169,72a5c1258db92d0ddd660bfa875e8e55cab47af7
72a5c1258db92d0ddd660bfa875e8e55cab47af7,72a5c125,altosui: Remove some debug printfs.,"altosui: Remove some debug printfs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284089981,1284089981,031fd9a954f2e3447d0150eb4ecc81af7b620dca
031fd9a954f2e3447d0150eb4ecc81af7b620dca,031fd9a9,Add firmware and libaltos to 'fat' target at top-level,"Add firmware and libaltos to 'fat' target at top-level

This ensures that all of the necessary bits are available to construct
the distribution images.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284089772,1284089827,fcaa480b1dfeb2fd4044f9c4e1b6d50c46fc9984
fcaa480b1dfeb2fd4044f9c4e1b6d50c46fc9984,fcaa480b,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284089360,1284089360,48f57997452e17564e28fe3e37403f6f63d32dea
48f57997452e17564e28fe3e37403f6f63d32dea,48f57997,altosui: conflating USB product and vendor IDs is a bad idea,"altosui: conflating USB product and vendor IDs is a bad idea

We've now got a USB vendor ID called 'altusmetrum' for generic
altusmetrum devices (old USB ID 0x000A) while the general vendor name
for all devices is 'altusmetrum' as well.

This patch splits vendors and products into separate name spaces,
products are prefixed with product_ and vendor with (oddly) vendor_.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284089082,1284089204,632d276118ab04de67561104be650f8fb69a0450
632d276118ab04de67561104be650f8fb69a0450,632d2761,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284086083,1284086083,1ac3d7e3ba52d1b0dc834eaa5d7886c730eaf307
1ac3d7e3ba52d1b0dc834eaa5d7886c730eaf307,1ac3d7e3,initial cut at an altosui man page,"initial cut at an altosui man page
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284086062,1284086062,5c4e437975054d33604402591e1ea2f314932593
5c4e437975054d33604402591e1ea2f314932593,5c4e4379,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284084369,1284084369,0ea75761416bff299233991e961ba25b6c7dcf89
0ea75761416bff299233991e961ba25b6c7dcf89,0ea75761,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284084327,1284084327,"35d70c92307dd478bc619b2f6c5a88e155cdad28,8ee3464d8064ebe1694c7b20177878c0d9961451"
8ee3464d8064ebe1694c7b20177878c0d9961451,8ee3464d,altosui: Display error dialog when AltOS JNI library can't be loaded,"altosui: Display error dialog when AltOS JNI library can't be loaded

Having an error dialog appear at application startup seems better than
simply failing to present the device dialog later on.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284080081,1284080233,4224a7526e51eb8fbf1f0a31bae7ee68c6385095
4224a7526e51eb8fbf1f0a31bae7ee68c6385095,4224a752,altosui: Store libaltos.so in $(libdir)/altos,"altosui: Store libaltos.so in $(libdir)/altos

It's not a public library, so hide it away in a subdirectory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284079966,1284080233,1e4c18777d982061f5e507a4d4f4f1cd4d685268
1e4c18777d982061f5e507a4d4f4f1cd4d685268,1e4c1877,altosui: Need to have JVM include path substituted into libaltos Makefile,"altosui: Need to have JVM include path substituted into libaltos Makefile

The libaltos Makefile needs to find the relevant jni.h file, which is
found in the JVM_INCLUDE path, all nicely located by the configure.ac script.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284079777,1284080233,c286ada6457579d64e9d8ca44b927258b4a561da
35d70c92307dd478bc619b2f6c5a88e155cdad28,35d70c92,"handle versioning of ihx files (poorly) by just wildcarding the file name,","handle versioning of ihx files (poorly) by just wildcarding the file name,
which assumes there's only one matching .. probably ok on Debian?
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284074827,1284074827,c286ada6457579d64e9d8ca44b927258b4a561da
c286ada6457579d64e9d8ca44b927258b4a561da,c286ada6,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284071260,1284071260,6c0ae7e966a81ece35bccbe89d626a58afe899a2
6c0ae7e966a81ece35bccbe89d626a58afe899a2,6c0ae7e9,altosui: remove FATJAR from all-local to avoid building fat .jar file,"altosui: remove FATJAR from all-local to avoid building fat .jar file

the fat .jar file is used in non-native builds to run from a directory
containing all of the freetts jar files along with the altosui jar
file. We don't want this on a real install where freetts is installed separately.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284071118,1284071118,737a64c57a8f979f51c3fa6b3f214520c736cf8a
737a64c57a8f979f51c3fa6b3f214520c736cf8a,737a64c5,altosui: hack to make JAVAROOT directory get created before javac runs,"altosui: hack to make JAVAROOT directory get created before javac runs

This ensures that the JAVAROOT directory gets created by adding it to
the variable used to set the CLASSPATH environment value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284070934,1284070934,b456bd9d7bcd9d968e43c38eeb6fa6ad8c58f895
b456bd9d7bcd9d968e43c38eeb6fa6ad8c58f895,b456bd9d,altosui: fix telemetrum.inf FFFE:000A product names on AMD64 and ia64,"altosui: fix telemetrum.inf FFFE:000A product names on AMD64 and ia64

This appears to matter to Vista. Dunno why.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284070301,1284070443,16980b848651a6b20a0b458446f0a19fb517539d
16980b848651a6b20a0b458446f0a19fb517539d,16980b84,altosui: Add explicit requirement to create classes directory,"altosui: Add explicit requirement to create classes directory

The implicit ordering doesn't appear reliable.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1284070225,1284070443,15da683c2f747baef49c8b8d321a86faede0de30
15da683c2f747baef49c8b8d321a86faede0de30,15da683c,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284069110,1284069110,012e7176954a6b74b3b667317be0f6dc41d7ab70
012e7176954a6b74b3b667317be0f6dc41d7ab70,012e7176,add libtool to build deps,"add libtool to build deps
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284069062,1284069062,3e5824b9a71971ce99bfe38a1e860b421e265f02
3e5824b9a71971ce99bfe38a1e860b421e265f02,3e5824b9,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1284068627,1284068627,3d49d5f69b41c27003dbc5ccf1899014bd13bd99
ddc83b4c401be965a9947782becf20cc8c54e6a2,ddc83b4c,Merge branch 'master' of git://git.gag.com/fw/altos,"Merge branch 'master' of git://git.gag.com/fw/altos
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1283683774,1283683774,"afea6c264c5ebf12f1d629bd4bc724da86d11b7a,3d49d5f69b41c27003dbc5ccf1899014bd13bd99"
3d49d5f69b41c27003dbc5ccf1899014bd13bd99,3d49d5f6,altosui: ensure that 'altosui' script is installed. Pass arguments along.,"altosui: ensure that 'altosui' script is installed. Pass arguments along.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283677506,1283677506,b61fec225ada6a9e252e4c7920101ee18c77cbdc
b61fec225ada6a9e252e4c7920101ee18c77cbdc,b61fec22,altosui: eeprom files place 'boost' time in the flight number record.,"altosui: eeprom files place 'boost' time in the flight number record.

Instead of looking for the first state change record, use the Flight
record to get the boost tick.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283676956,1283676956,6c653a4cba5fef8d49261cf1c024f3e86e9058c6
6c653a4cba5fef8d49261cf1c024f3e86e9058c6,6c653a4c,"altosui: Record flight number when scanning file, not when running","altosui: Record flight number when scanning file, not when running

The very first record in the eeprom is the flight number, but it is
time-stamped with the 'boost' time, and so it gets sorted until much
later, delaying the return of data until the rocket enters boost
mode. This drops all of the nice pad GPS and state date on the floor.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283676756,1283676756,38e1d87c8d449866faac026577fefa9a118428cb
38e1d87c8d449866faac026577fefa9a118428cb,38e1d87c,altosui: Use local .class files in the classpath,"altosui: Use local .class files in the classpath

This ensures that compiling only a few changed files will
locate the old .class files instead of using a stale .jar file.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283675033,1283675033,9941b05a1d03dafd6cd899b5fe999ed769efb1d6
9941b05a1d03dafd6cd899b5fe999ed769efb1d6,9941b05a,altosui: Prevent voice altitude data from queueing up,"altosui: Prevent voice altitude data from queueing up

When flight status changes rapidly, the queue of voice data can get
quite long. This change does two things -- first, it remembers when
the altitude reporting happens due to flight events and delays the
periodic reporting until a suitable time after that, second it ensures
that the voice data has all been delivered before generating a new
altitude report.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283674874,1283674874,4dec5c36702d76dc95beada7c1d3222a638a2cbb
4dec5c36702d76dc95beada7c1d3222a638a2cbb,4dec5c36,altosui: Add AltosVoice.drain() to wait for queued speech to finish,"altosui: Add AltosVoice.drain() to wait for queued speech to finish

drain() blocks until all pending phrases have been processed, allowing
the UI code to avoid pending data that will end up stale by the time
it is emitted.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283674751,1283674751,410ba89eef9c9817eef81b702966cb88820ff7c4
410ba89eef9c9817eef81b702966cb88820ff7c4,410ba89e,altosui: Start idle thread after the rocket leaves the pad,"altosui: Start idle thread after the rocket leaves the pad

This makes the first altitude report time consistently 10 seconds
after launch, instead of some random time depending on when the rocket
launched relative to the time the device connection was made.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283674381,1283674381,6205547ec7191aab0259a8449520e966a96129e6
6205547ec7191aab0259a8449520e966a96129e6,6205547e,"altosui: When replay thread is interrupted, don't make final report","altosui: When replay thread is interrupted, don't make final report

Normally, the replay process makes one final report after the file has
been parsed. However, if the reading process is interrupted to display
something else, this report is just annoying, so don't make it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283674130,1283674130,3d99584fcfe43b22e8581874e0ac77ce3d635d48
3d99584fcfe43b22e8581874e0ac77ce3d635d48,3d99584f,altosui: Add elevation and range data to main display,"altosui: Add elevation and range data to main display

Reported by voice, it's useful to see these on the display as well.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283673798,1283673798,2d58f319a7c1a6a8ccc6a539722009996ba886ab
2d58f319a7c1a6a8ccc6a539722009996ba886ab,2d58f319,altosui: Eeprom files contain only one date; save it.,"altosui: Eeprom files contain only one date; save it.

While reading eeprom files, the GPS record is reconstructed each time
the system sees the first GPS log item (the time field), but as the
date isn't repeated, we need to copy it from the old GPS data record.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283673670,1283673670,b2aa689bf3d61e4a3ebe7c828162d1be20aad0f6
b2aa689bf3d61e4a3ebe7c828162d1be20aad0f6,b2aa689b,altosui: Remove debugging printf from AltosEepromReader,"altosui: Remove debugging printf from AltosEepromReader

These were in place while validing the GPS data reconstruction code
that handles eeprom files missing the first GPS date line due to the
record overwriting bug in old firmware versions.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283673594,1283673594,eb0e7a59f0806734a4c959a3ce7c57f71cbe3986
eb0e7a59f0806734a4c959a3ce7c57f71cbe3986,eb0e7a59,altosui: Return AO_LOG_INVALID instead of exception for eeprom files,"altosui: Return AO_LOG_INVALID instead of exception for eeprom files

When an eeprom file contains an invalid line, just return
AO_LOG_INVALID instead of throwing an exception. This allows us to
replay and parse files with extraneous serial communication.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283673458,1283673458,c3a17c71a45207dd715d537704f161de9219f0d7
c3a17c71a45207dd715d537704f161de9219f0d7,c3a17c71,altosui: Fix linux fat distribution,"altosui: Fix linux fat distribution

Again, use 'cp -p' instead of 'cp -a' to get files into the archive
instead of links. Also, make the shell script 'altosui' instead of
'altosui-fat'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283651362,1283651362,828e9e4c68e3ac90b6ba2e9fd5f131a9975f7e4a
828e9e4c68e3ac90b6ba2e9fd5f131a9975f7e4a,828e9e4c,altosui: Fix up Mac OSX .zip file,"altosui: Fix up Mac OSX .zip file

Must contain 'altosui.jar' instead of altosui-fat.jar.
Also, was using 'cp -a' instead of 'cp -p' which made files
represented by symlinks not end up in the archive.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283650798,1283650798,044fd27449c70474f51b99dec25fd23d3c03a559
044fd27449c70474f51b99dec25fd23d3c03a559,044fd274,altosui: Fix windows installer to ship correct files,"altosui: Fix windows installer to ship correct files

Was shipping altosui.jar instead of altosui-fat.jar

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283649645,1283649701,148b927c3b8bc7b7b5c5356392032faf2b1203d3
148b927c3b8bc7b7b5c5356392032faf2b1203d3,148b927c,Add top-level 'fat' target to aid building distribution files,"Add top-level 'fat' target to aid building distribution files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283648644,1283649701,aed59e1c057c13e28fd368dc2592aa4628211097
aed59e1c057c13e28fd368dc2592aa4628211097,aed59e1c,Add version numbers to released files. Set version to 0.7.1,"Add version numbers to released files. Set version to 0.7.1

Instead of using git revision counts for version numbers, use explicit
versions numbers configured in the configure.ac file. Expose published
files with version numbers.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283648351,1283649701,2808bba3efa1cff133cc060dabff06fab8b75388
2808bba3efa1cff133cc060dabff06fab8b75388,2808bba3,Ignore libtool files.,"Ignore libtool files.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283648332,1283648332,bc183400ab93d5902c52851319999cc77f27bc81
bc183400ab93d5902c52851319999cc77f27bc81,bc183400,altos: add some SDCDB config files,"altos: add some SDCDB config files
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283646917,1283646917,887b11f6b9c81b9f15348d54017e700ca7dc5e55
887b11f6b9c81b9f15348d54017e700ca7dc5e55,887b11f6,Use autotools for altosui and libaltos,"Use autotools for altosui and libaltos

This switches from hand-written Makefiles to automake with libtool
for these parts of the system.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283646437,1283646437,e844e8a0695e27af6f8e3e37a5e3bcc865b862e3
e844e8a0695e27af6f8e3e37a5e3bcc865b862e3,e844e8a0,altosui: Add icons to application and Windows menus.,"altosui: Add icons to application and Windows menus.

Use the altus-metrum icon for an application icon and a windows start
menu/desktop icon.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283588022,1283588022,e9ea28504c646fc25791aab09b9e5faf73e0ac0c
e9ea28504c646fc25791aab09b9e5faf73e0ac0c,e9ea2850,icon: add some icons for application programs,"icon: add some icons for application programs

altus-metrum.ico: Windows ICO file
altus-metrum-16x16.jpg: 16x16 jpg image for java

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283587714,1283587714,f550677df016070430ed38bfa2b2be33f1b8c40a
f550677df016070430ed38bfa2b2be33f1b8c40a,f550677d,altosui: oops. renamed the nsis file to altos-windows.nsi,"altosui: oops. renamed the nsis file to altos-windows.nsi

And forgot to change the dependency in the Makefile

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283584601,1283584601,c0988ddbf104ea729090c2e7e2a28cc6dc9e90f6
c0988ddbf104ea729090c2e7e2a28cc6dc9e90f6,c0988ddb,altosui: ignore built files,"altosui: ignore built files
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283584455,1283584495,ecb4a09535b6a8da0765010489a96e605dbdeb46
ecb4a09535b6a8da0765010489a96e605dbdeb46,ecb4a095,altosui: Add windows installer build using 'nsis',"altosui: Add windows installer build using 'nsis'

nsis happens to be packaged in debian, and it appears to build usable
installers, which is all very cool.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283584391,1283584495,bf22923cd8b4f6f954718358b411b5b10d8e7b4d
bf22923cd8b4f6f954718358b411b5b10d8e7b4d,bf22923c,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283575589,1283575589,59798c6fd11502a9c8b66090c23ba50eb250692e
59798c6fd11502a9c8b66090c23ba50eb250692e,59798c6f,"altosui: Catch I/O errors on telemetry device, report to user","altosui: Catch I/O errors on telemetry device, report to user

This catches the USB device being unplugged and makes sure the
user sees an error dialog in this case.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283543025,1283543025,16d8d6a8853d09f683b13f9cda3c3174a0aab130
16d8d6a8853d09f683b13f9cda3c3174a0aab130,16d8d6a8,altosui: Must flush serial line after configuring for telemetry,"altosui: Must flush serial line after configuring for telemetry

Without flushing the configuration commands to the serial device, it
never sees them as the telemetry input thread doesn't flush.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283542265,1283542866,d4f64e95e31e2335470efc15df2ab357b7d197f3
d4f64e95e31e2335470efc15df2ab357b7d197f3,d4f64e95,"Revert ""altosui: Deal with altos bug setting radio channel while monitoring""","Revert ""altosui: Deal with altos bug setting radio channel while monitoring""

This reverts commit ba65e4aeb952a1cf49a77f1e24e235508fcea71f.

Testing the old code
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283539735,1283539735,71191ecef3ba0e00d0f8a7cd1a24982bfa44ec72
71191ecef3ba0e00d0f8a7cd1a24982bfa44ec72,71191ece,altosui: Allow 'connect to device' when already connected,"altosui: Allow 'connect to device' when already connected

Opening another serial device involves shutting down the display
thread (to reset its state) and spawning another one. Shutting down
the display thread normally closes the serial device as a part of the
process, and if this isn't done before the new serial device is
opened, then the new serial device ends up getting closed too.

Interrupting the display thread and waiting for it to stop before
opening the new serial device solves the problem.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283502633,1283522668,ba65e4aeb952a1cf49a77f1e24e235508fcea71f
ba65e4aeb952a1cf49a77f1e24e235508fcea71f,ba65e4ae,altosui: Deal with altos bug setting radio channel while monitoring,"altosui: Deal with altos bug setting radio channel while monitoring

If the monitoring thread is active, then setting the radio channel can
sometimes cause the monitoring thread to get stuck. I'm not entirely
sure why though. For now, work around the issue by making sure
monitoring is off, and the monitoring thread has stopped, before
changing the radio channel.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283502117,1283522668,e5ef42c2b22c6639d90631dbbb588f9fd2494385
e5ef42c2b22c6639d90631dbbb588f9fd2494385,e5ef42c2,altosui: Report telemetry CRC errors in UI,"altosui: Report telemetry CRC errors in UI

Telemetry CRC errors can signal problems with TeleMetrum or TeleDongle
units, so report them in the UI.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283501544,1283522668,3b3aa448f3a0f44137f7530b04b58967ba5f22f5
3b3aa448f3a0f44137f7530b04b58967ba5f22f5,3b3aa448,altosui: build Mac OS .zip file to include paths,"altosui: build Mac OS .zip file to include paths

Without the paths, the OS X zip file doesn't create a usable
application structure.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283487089,1283522668,cff0d1ef6b338b3d5ad9450d4d5f95df934cb5e4
cff0d1ef6b338b3d5ad9450d4d5f95df934cb5e4,cff0d1ef,altosui: Post error dialog on invalid ROM config values.,"altosui: Post error dialog on invalid ROM config values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283406994,1283522668,8d8980f56a4f2c7d6f2ce667130706e0f04f8ded
8d8980f56a4f2c7d6f2ce667130706e0f04f8ded,8d8980f5,altosui: Remove some debug printfs from AltosRomconfig class,"altosui: Remove some debug printfs from AltosRomconfig class

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283406972,1283522668,5ee6cd41ed189c3166f76558ecada80917f40652
5ee6cd41ed189c3166f76558ecada80917f40652,5ee6cd41,altosui: Hide internal rom config UI helper function,"altosui: Hide internal rom config UI helper function

This was getting mis-used by the flash UI causing the rom dialog
'cancel' button to work just like 'ok'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283406435,1283522668,9a690c9795e8257d2a3225f905117681668a472f
9a690c9795e8257d2a3225f905117681668a472f,9a690c97,altosui: allow flashing to be canceled from the rom config dialog,"altosui: allow flashing to be canceled from the rom config dialog

Was using the rom config class wrong, causing cancel actions to work
just like 'ok' actions. Oops.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283406364,1283522668,2f07ad14a16dbf1b75c71784ceae303825c90ade
2f07ad14a16dbf1b75c71784ceae303825c90ade,2f07ad14,altosui: Abort flashing if debug port isn't working,"altosui: Abort flashing if debug port isn't working

Check each command going over the debug port and make sure it works as
expected. This commit adds checks for initializing the clock,
selecting the desired program counter and running the flash
program.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283406202,1283522668,cf30343aadd5039627a85319872685f743e64b16
cf30343aadd5039627a85319872685f743e64b16,cf30343a,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283403341,1283403341,59a40f6d5a2159b9009a3fa0737bb679efd5b32c
59a40f6d5a2159b9009a3fa0737bb679efd5b32c,59a40f6d,another distclean fix,"another distclean fix
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283403301,1283403301,59ff9180f11063c257746b895a167179b3a4ff7c
59ff9180f11063c257746b895a167179b3a4ff7c,59ff9180,and a few more distclean fixes,"and a few more distclean fixes
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283403196,1283403196,3aafd70257b70b7c11ba9c55749157979bc61ea2
3aafd70257b70b7c11ba9c55749157979bc61ea2,3aafd702,more makefile distclean target work,"more makefile distclean target work
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283403124,1283403124,d5a6ad87c7a9ac03b2e694bed0a54b6cc4322a6f
d5a6ad87c7a9ac03b2e694bed0a54b6cc4322a6f,d5a6ad87,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283403016,1283403016,14fa24ed93b3b1cec08a170004c6fb7f4d74f7e5
14fa24ed93b3b1cec08a170004c6fb7f4d74f7e5,14fa24ed,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283402911,1283402911,83552dfa0d38db9cdf3efc89e64e6c7896467856
83552dfa0d38db9cdf3efc89e64e6c7896467856,83552dfa,add distclean targets to libaltos and altosui to all Debian package to build,"add distclean targets to libaltos and altosui to all Debian package to build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283402874,1283402874,6f24d2a476759104a10b26b54faff2b18b0e208b
6f24d2a476759104a10b26b54faff2b18b0e208b,6f24d2a4,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283402781,1283402781,d079bfe86ed40ff450ece445cf5f5e3970e44cec
d079bfe86ed40ff450ece445cf5f5e3970e44cec,d079bfe8,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283402670,1283402670,a470315e5d822a69ef5304512cf73c604c88e481
a470315e5d822a69ef5304512cf73c604c88e481,a470315e,altosui: Remove Manifest.txt from git repo as it's built now,"altosui: Remove Manifest.txt from git repo as it's built now

This file is built with appropriate contents for each different .jar file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283397291,1283397291,1177e0a684328422be5adc68093d0091a218a824
1177e0a684328422be5adc68093d0091a218a824,1177e0a6,altos: Bounds check Skytraq GPS tracking data array,"altos: Bounds check Skytraq GPS tracking data array

Missing GPS serial data could cause the tracking array reset to
get skipped, causing the array to be overrun, smashing critical data
beyond the array.

This was detected using the 'altosui' flash command to program a
device from TM. Hitting the USB that hard caused TM to crash with a
mutex error (3 beeps) after the ao_gps_task structure was overwritten
with zeros.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283396004,1283396004,775acb89660cdee2f3c54c38297baefe39f2414c
775acb89660cdee2f3c54c38297baefe39f2414c,775acb89,altosui: missed AltosReader.class in the Makefile,"altosui: missed AltosReader.class in the Makefile

This caused clean builds to fail to make this file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283232249,1283232308,bd2b9d958c2b7f846031b076ed51c4fbaaf2d68f
bd2b9d958c2b7f846031b076ed51c4fbaaf2d68f,bd2b9d95,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283228406,1283228406,d006c5e1255433181aca4c8e6a277b2d1bc0841b
d006c5e1255433181aca4c8e6a277b2d1bc0841b,d006c5e1,add runtime dependencies for altos binary package,"add runtime dependencies for altos binary package
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283228377,1283228377,c1c7d731e3774883fa0bb5538be225a59334d124
c1c7d731e3774883fa0bb5538be225a59334d124,c1c7d731,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283219571,1283219571,c35632efb1919764e4b8581ed6fcf2bedd4bd517
c35632efb1919764e4b8581ed6fcf2bedd4bd517,c35632ef,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283218670,1283218670,2a004d17a13b4ff52d892bfdecff8ad3d0823f7c
2a004d17a13b4ff52d892bfdecff8ad3d0823f7c,2a004d17,"don't build all the ""fat"" jar deliverables by default","don't build all the ""fat"" jar deliverables by default
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283218637,1283218637,507e429db6638f82c32449e9c5ca06b46da30134
507e429db6638f82c32449e9c5ca06b46da30134,507e429d,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283216940,1283216940,25764fcd1b65c3a5a817afdb5901ac30e8a5f0c0
25764fcd1b65c3a5a817afdb5901ac30e8a5f0c0,25764fcd,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283216909,1283216909,4790f78aead8a816e5b247c022b2998ce3a94053
4790f78aead8a816e5b247c022b2998ce3a94053,4790f78a,"add a .gitattributes file, configuring the Mac and Windows binary library","add a .gitattributes file, configuring the Mac and Windows binary library
files with the export-ignore attribute, in hopes that this will prevent
them showing up in source packages
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283215730,1283215730,81318e5b7179b0311ab099043ecb04a25d763750
81318e5b7179b0311ab099043ecb04a25d763750,81318e5b,make invocation of 'install' pathless to work on more Unix variants,"make invocation of 'install' pathless to work on more Unix variants
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283213740,1283213740,cbc72399a0f4d7429df0189bcdae683dd491cb9e
cbc72399a0f4d7429df0189bcdae683dd491cb9e,cbc72399,continue even if rm's don't have anything to do,"continue even if rm's don't have anything to do
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1283212616,1283212616,a9a8d23c877e6f6c76857b7c85e3d43b4da1db27
a9a8d23c877e6f6c76857b7c85e3d43b4da1db27,a9a8d23c,altosui: Devices with USB id 0x000a always get listed,"altosui: Devices with USB id 0x000a always get listed

List 'unknown' AltusMetrum devices anytime the UI needs a device
name.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283172551,1283172551,a94900b8862b99b4e317ea0ee3edd2a560f270c7
a94900b8862b99b4e317ea0ee3edd2a560f270c7,a94900b8,altosui: build debian-style altosui too,"altosui: build debian-style altosui too

This adds the dependencies to make sure altosui and altosui.jar get built.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283172503,1283172503,38ac388baf8125c0644b868a7aaf8eba1bdf990d
38ac388baf8125c0644b868a7aaf8eba1bdf990d,38ac388b,"altosui: Build linux, mac and windows archives on Linux","altosui: Build linux, mac and windows archives on Linux

This adds 'fat' archives for each target OS.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283171317,1283171317,35d9a8214252dbe79aeb69ae47d2e5c58a654702
35d9a8214252dbe79aeb69ae47d2e5c58a654702,35d9a821,libaltos: Use overlapped I/O on windows,"libaltos: Use overlapped I/O on windows

Otherwise, reads block writes and vice-versa. Crazy stuff.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283171265,1283171265,c7ba92317ac55272acbde12416448ebd17b983a6
c7ba92317ac55272acbde12416448ebd17b983a6,c7ba9231,altos: Windows sends USB Out packets of 0 length. Ack them.,"altos: Windows sends USB Out packets of 0 length. Ack them.

This was an untested case as no other operating system sents 0-length
out packets (they're not necessary). The correct response is to ACK
them by clearing the OUTPKT_RDY bit so that another packet can be sent.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283169120,1283169120,20a472cfe3369200150ea4ff067ceb28968dbcac
20a472cfe3369200150ea4ff067ceb28968dbcac,20a472cf,libaltos: Add pre-built Windows .dll,"libaltos: Add pre-built Windows .dll

This lets us create the windows distribution on Linux.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283162303,1283162303,0300fe581c949232bc52b05fe9c1f6032cad6b60
0300fe581c949232bc52b05fe9c1f6032cad6b60,0300fe58,libaltos: Add pre-built Mac OS X libaltos.dylib,"libaltos: Add pre-built Mac OS X libaltos.dylib

This allows the mac bits to be built on Linux.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283162185,1283162185,5d48c494325524bbeed10e0dc7300ed44e7e208e
5d48c494325524bbeed10e0dc7300ed44e7e208e,5d48c494,Update telemetrum.inf to include all current USB ids.,"Update telemetrum.inf to include all current USB ids.

Windows 7 has 'encouraged' us to split out each product into a
separate USB ID. telemetrum.inf now has all of them listed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283162006,1283162006,df34bbe7d1c43b12ab6d610fe810b6e1683e4c21
df34bbe7d1c43b12ab6d610fe810b6e1683e4c21,df34bbe7,libaltos: Improve Makefile,"libaltos: Improve Makefile

Builds Windows .dll correctly now and sample app.
Moves linux install target to end so it is not default
Adds .NOTPARALLEL to disable parallel gnumake.
Removes -g debugging flags to shrink file size.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283161789,1283161789,dd5374b8e660012ae4f8b058454fd101e0749ca7
dd5374b8e660012ae4f8b058454fd101e0749ca7,dd5374b8,libaltos: Fix windows build.,"libaltos: Fix windows build.

Need stdlib.h to get calloc/free defined, remove debug printfs, fix
serial timeouts.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283158830,1283158830,63c832394a829f41b8f77d075786530536360349
63c832394a829f41b8f77d075786530536360349,63c83239,altos: shut down packet mode cleanly,"altos: shut down packet mode cleanly

Instead of constantly bashing the packet master thread, let it shut
itself down in an orderly fashion. It will shut down fairly quickly as
all of the activities in that thread are bounded. Otherwise, the
master packet thread might leave mutexes locked and all sorts of other
horrors.

Tested on Linux and Mac OS X and shown to be reliable.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283149347,1283149347,43619c13f749b79c096d1e8fdab3d5cfb5fd85f1
43619c13f749b79c096d1e8fdab3d5cfb5fd85f1,43619c13,altos: Abort radio harder when terminating packet mode.,"altos: Abort radio harder when terminating packet mode.

Make sure the master radio tasks don't get stuck waiting for an
incoming packet again by aborting the radio each time we poke the
tasks.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283146943,1283146943,c4a8569f61eddf690d00337543462235ecbfbe54
c4a8569f61eddf690d00337543462235ecbfbe54,c4a8569f,altos: flush pending output when terminating packet mode,"altos: flush pending output when terminating packet mode

Just in case the last command sent hasn't been transmitted, hang
around for up to a second waiting for the data to get across the link.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283146878,1283146878,1acd3c7ec167b1b18e4ea493e5978c938a91cc89
1acd3c7ec167b1b18e4ea493e5978c938a91cc89,1acd3c7e,libaltos: cjnitest needs altos_flush now,"libaltos: cjnitest needs altos_flush now
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283143519,1283143519,6527357d1f0e94faf9e7dacac10a39875131be7c
6527357d1f0e94faf9e7dacac10a39875131be7c,6527357d,libaltos: Missing OS_LDFLAGS on cjnitest build,"libaltos: Missing OS_LDFLAGS on cjnitest build
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283143426,1283143426,b7fa1ea3338f63b8edcf8aacccb5e519ca0b213f
b7fa1ea3338f63b8edcf8aacccb5e519ca0b213f,b7fa1ea3,libaltos: Mac OS X cannot use 'poll(2)' on serial lines.,"libaltos: Mac OS X cannot use 'poll(2)' on serial lines.

Who ships this stuff, anyway? Instead of blocking, we'll poll every 100ms now,
otherwise, we won't be able to abort the read when the device is closed. Yay!

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283143300,1283143300,e60c59123232915e808cee23ef89eb1a38ced34b
e60c59123232915e808cee23ef89eb1a38ced34b,e60c5912,altosui: discard invalid lines while reading Eeprom flight data,"altosui: discard invalid lines while reading Eeprom flight data

This shouldn't happen, but it's easy enough to get back in sync by just
skipping lines with weird contents.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283143221,1283143221,ae02b1590439d5c8dfb472cf1f83a14fdcfbaf11
ae02b1590439d5c8dfb472cf1f83a14fdcfbaf11,ae02b159,altosui: provide separate flush_input/flush_output for serial. deal with monitor automatically,"altosui: provide separate flush_input/flush_output for serial. deal with monitor automatically

(yes, this should be two patches, but the diffs in AltosSerial were merged together).

First, this replaces the existing flush/flush_reply mess with two simple functions,
one to flush output to the serial device, making sure that all data written will be seen
while we wait for input. The other sucks any pending input off of the serial line and
discards it.

Second, AltosSerial now tracks whether the serial line is being used for telemetry
monitoring. If so, it enables monitoring, otherwise it disables it. Eliminates a
bunch of manual state tracking elsewhere.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283143007,1283143007,edcfb1bdf64772d3b83405ccf99385b8fea5d8e4
edcfb1bdf64772d3b83405ccf99385b8fea5d8e4,edcfb1bd,libaltos: AltusMetrum devices use more than one USB ID.,"libaltos: AltusMetrum devices use more than one USB ID.

List all usb devices, picking those with AltusMetrum IDs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1283128439,1283128439,236685807b63860ad033aa0254ce8f6d8d36d4ef
236685807b63860ad033aa0254ce8f6d8d36d4ef,23668580,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282969569,1282969569,1cda15fdef2d9d3e54354bd5c43a0bcc7e3240cb
1cda15fdef2d9d3e54354bd5c43a0bcc7e3240cb,1cda15fd,fix up for an 0.7 release,"fix up for an 0.7 release
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282969491,1282969491,4c5c7c7f198775c398c1ad2edafb3488384cc297
4c5c7c7f198775c398c1ad2edafb3488384cc297,4c5c7c7f,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282968818,1282968818,42055af5c6f17d14a2f1c6a2b5e1ce6d3b45a615
42055af5c6f17d14a2f1c6a2b5e1ce6d3b45a615,42055af5,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282936399,1282936399,0bd4cc03b3bf23aa32b5ce1921078021d1d8a9c6
0bd4cc03b3bf23aa32b5ce1921078021d1d8a9c6,0bd4cc03,fix path to installed shared library,"fix path to installed shared library
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282936366,1282936366,99c1d9b4ef10ec4ebbee058ce0bb38c954a0a3a6
99c1d9b4ef10ec4ebbee058ce0bb38c954a0a3a6,99c1d9b4,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282934486,1282934486,cf65c6b8056c4af7c26b52ec6f9fbd3400cef638
cf65c6b8056c4af7c26b52ec6f9fbd3400cef638,cf65c6b8,Merge branch 'bdale',"Merge branch 'bdale'

Conflicts:
	debian/control
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282934305,1282934305,"5f2f6a8f9ba56be867888758848bc7f152ccbd47,ae5eff7bc0b63047737223423009707bedcb00f5"
ae5eff7bc0b63047737223423009707bedcb00f5,ae5eff7b,"Revert ""lose the prebuild hook for now while I'm fumbling""","Revert ""lose the prebuild hook for now while I'm fumbling""

This reverts commit a21b6bb60ac1c07ebd161534a4ea63bfde50dcdf.
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282934256,1282934256,de2e71c4923a0282df74dbe37d087c34b4ddd279
de2e71c4923a0282df74dbe37d087c34b4ddd279,de2e71c4,fix man page delivery path,"fix man page delivery path
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282933520,1282933520,a8dbe082960dc9bdd44c6e4b1198423c4e566029
a8dbe082960dc9bdd44c6e4b1198423c4e566029,a8dbe082,install altosui man page,"install altosui man page
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282933108,1282933108,5cc933039e4763b8675611c63b6147b42878a2bb
5cc933039e4763b8675611c63b6147b42878a2bb,5cc93303,"fix permissions on installed jar file, switch from ao-view to altosui in","fix permissions on installed jar file, switch from ao-view to altosui in
the desktop file
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282932979,1282932979,138009e9fad01f79df4c3820fbc206f78688bdce
138009e9fad01f79df4c3820fbc206f78688bdce,138009e9,update Debian standards version,"update Debian standards version
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282932361,1282932361,c280071b7db4e9a7af31dc5740eb8d27f137950e
c280071b7db4e9a7af31dc5740eb8d27f137950e,c280071b,fix up the wrapper's path to the jar file,"fix up the wrapper's path to the jar file
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282932253,1282932253,72a18502e40f55cbba6418dc94315517881cd411
5f2f6a8f9ba56be867888758848bc7f152ccbd47,5f2f6a8f,Merge remote branch 'origin/master' into new-packet-format,"Merge remote branch 'origin/master' into new-packet-format
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282932031,1282932031,"63bd34cd1b5a411489e8c3ab377f0fe0eec11f67,9d1b27fa147fc8b765d5be165ebef7ee0f85bd37"
63bd34cd1b5a411489e8c3ab377f0fe0eec11f67,63bd34cd,altosui: add elevation and range information,"altosui: add elevation and range information

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282931935,1282931935,2923cf5057f9cef110dd547d8677ea5b60e00796
72a18502e40f55cbba6418dc94315517881cd411,72a18502,add an install target for altosui,"add an install target for altosui
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282931484,1282931484,72c33a72ee105ec692dad62d6d9c1ad40b89bfe8
72c33a72ee105ec692dad62d6d9c1ad40b89bfe8,72c33a72,add install target for libaltos,"add install target for libaltos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282931119,1282931119,a21b6bb60ac1c07ebd161534a4ea63bfde50dcdf
a21b6bb60ac1c07ebd161534a4ea63bfde50dcdf,a21b6bb6,lose the prebuild hook for now while I'm fumbling,"lose the prebuild hook for now while I'm fumbling
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282929989,1282929989,9ea94411c9730f7a271366d309ab4827beeeb839
9ea94411c9730f7a271366d309ab4827beeeb839,9ea94411,add a dummy install target,"add a dummy install target
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282929474,1282929474,c443f43f8dee6e0fcbcecf9d09e948fd928b7af4
c443f43f8dee6e0fcbcecf9d09e948fd928b7af4,c443f43f,Merge branch 'new-packet-format' of ssh://git.gag.com/scm/git/fw/altos into new-package-format,"Merge branch 'new-packet-format' of ssh://git.gag.com/scm/git/fw/altos into new-package-format
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282900133,1282900133,"295043112ccde35092945c286596f9045ee6fa05,2923cf5057f9cef110dd547d8677ea5b60e00796"
2923cf5057f9cef110dd547d8677ea5b60e00796,2923cf50,altos: prepare for sdcc 2.9.1,"altos: prepare for sdcc 2.9.1

A few minor language changes -- non-standard keywords are now prefixed
with __, such as 'at', 'interrupt', 'naked'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282893029,1282893029,68967157cee620ebedcc8c2ffd6fc7656532087b
68967157cee620ebedcc8c2ffd6fc7656532087b,68967157,altosui: command line args are converted to csv format,"altosui: command line args are converted to csv format

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282892144,1282892144,7e0506dc2014b7178f52b950e8c1cb820b35f9c6
7e0506dc2014b7178f52b950e8c1cb820b35f9c6,7e0506dc,altosui: Remove debug printf from AltosState.java,"altosui: Remove debug printf from AltosState.java

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282892093,1282892097,49364608b59de7421ab00d87d2685bc3b5f58411
49364608b59de7421ab00d87d2685bc3b5f58411,49364608,"altosui: When parsing saved telem files, errors shouldn't abort file","altosui: When parsing saved telem files, errors shouldn't abort file

Make syntax errors in telem files just skip the current line and move
on to the next one instead of abandoning the whole file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282891986,1282891986,a16db143fc7ca72dc91e7989420049192114642d
a16db143fc7ca72dc91e7989420049192114642d,a16db143,altosui: Serial line is in UTF-8 encoding. Deal with it.,"altosui: Serial line is in UTF-8 encoding. Deal with it.

We read bytes from the serial line and need to convert each line into
a string. So, save the bytes and at EOL, pass the whole mess to the
string constructor with the appropriate encoding info.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282891851,1282891851,0942912163255523d923140c01afbdb5da1c19b5
0942912163255523d923140c01afbdb5da1c19b5,09429121,altosui: Add support for old (version < 3) telemetry files,"altosui: Add support for old (version < 3) telemetry files

This lets the code read telemetry files from pre-released versions of
the software. Not strictly necessary for production, but useful for
analysing old files.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282891777,1282891777,e383595cd281687de903fb6176564bbef270cb83
e383595cd281687de903fb6176564bbef270cb83,e383595c,altosui: AltosEepromReader was mis-setting boost tick,"altosui: AltosEepromReader was mis-setting boost tick

It was supposed to use record.tick instead of the (unset) state.tick
value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282891658,1282891658,651f6102ac79459fc8d5679d852c963dcb5bb3fc
651f6102ac79459fc8d5679d852c963dcb5bb3fc,651f6102,altosui: add rssi and distance/dir from pad to CSV files,"altosui: add rssi and distance/dir from pad to CSV files

Just adds a couple more fields to the CSV files that might be interesting.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282891465,1282891465,3dc67c1401976d6e9e2e942d5a4707a4810a0404
3dc67c1401976d6e9e2e942d5a4707a4810a0404,3dc67c14,altosui: Add AltosGreatCircle constructors,"altosui: Add AltosGreatCircle constructors

This adds constructurs from AltosGPS pairs and also one from empty
args (which defines both distance and bearing as 0).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282891380,1282891380,f0fd423d0bf83bc5c3f9d39e9c09397fbe8caed2
f0fd423d0bf83bc5c3f9d39e9c09397fbe8caed2,f0fd423d,altosui: Move number parsing code to Altos general class,"altosui: Move number parsing code to Altos general class

This moves these shared functions to the global shared class.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282891286,1282891286,68b2b66d7574dfd0bd5e3571b8ffad32ca5d2b73
68b2b66d7574dfd0bd5e3571b8ffad32ca5d2b73,68b2b66d,altos: mark gps date written only after it gets into eeprom,"altos: mark gps date written only after it gets into eeprom

Data logging doesn't start until boost detect occurs. As the GPS date
is only logged once, if that happens before logging is written to the
flash, then the GPS date will never get saved.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282891049,1282891049,aa6c27df5db6bdae59d00affccb891854a6caa18
aa6c27df5db6bdae59d00affccb891854a6caa18,aa6c27df,altos: print GPS state flags in GPS 'g' command,"altos: print GPS state flags in GPS 'g' command

Having the GPS state information can help with GPS debugging.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282863549,1282863549,34055129b4008f6a9833887b12dee39ffa408002
34055129b4008f6a9833887b12dee39ffa408002,34055129,altos: always rebuild ao_product.c to track git version,"altos: always rebuild ao_product.c to track git version

The git version is built into ao_product.c and saved in eeprom log
files, providing useful diagnostics about the firmware revision used
for each flight. However, if ao_product.c isn't recompiled, then the
updated version won't be included. Force recompilation of this file
each time make is run to ensure that the final output contains an
updated version number.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282863429,1282863429,99400fdc0f19ef538fc362dde5c3ab5b7cdac409
99400fdc0f19ef538fc362dde5c3ab5b7cdac409,99400fdc,altosui: flush replies from serial link when entering debug mode,"altosui: flush replies from serial link when entering debug mode

We use replies in debug mode a lot and depend on them matching the
expected parameters. The case which caused trouble was using
TeleMetrum to reprogram TeleDongle -- sending the 'm 0' command (to
disable telemetry monitoring on TeleDongle) to the TeleMetrum caused
it to reply 'Syntax Error' which confused the subsequent flashing
operation. Flushing that reply gets things back in sync.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282693418,1282693418,ba086cc77273efe5397f60dcaccd1e3771441481
ba086cc77273efe5397f60dcaccd1e3771441481,ba086cc7,altosui: write USB serial number string while flashing,"altosui: write USB serial number string while flashing

USB serial number is encoded in UCS2 as a part of the string
descriptors. Place those right after the other rom config bits so that
altosui can find it. altosui is changed to write the serial number there.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282647747,1282647747,220f3afdaa432c65f8ad45be7cdbe5c8a3616db3
220f3afdaa432c65f8ad45be7cdbe5c8a3616db3,220f3afd,altosui: always display romconfig ui while flashing,"altosui: always display romconfig ui while flashing
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282647707,1282647707,f62b2aa08ebfd912b3c732397d43ff9f6162ec88
f62b2aa08ebfd912b3c732397d43ff9f6162ec88,f62b2aa0,altosui: fetch existing romconfig for flashing,"altosui: fetch existing romconfig for flashing
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282647674,1282647674,d93787284c8e514a929edb9f944c98ae0206a33f
d93787284c8e514a929edb9f944c98ae0206a33f,d9378728,altosui: Delay mapping Flash UI until flashing actually starts,"altosui: Delay mapping Flash UI until flashing actually starts

The flash operation may be abandoned before it even starts; this makes
sure the UI doesn't flash up on the screen.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282647549,1282647549,7d44cbd621d2b113ac2b802ef17e3d8a660ce7f2
7d44cbd621d2b113ac2b802ef17e3d8a660ce7f2,7d44cbd6,altosui: disable radio monitoring while using serial line for debugging,"altosui: disable radio monitoring while using serial line for debugging
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282647480,1282647480,7bd220dfd9b3fb0e42eb90c3b37eb7b4169eb21b
7bd220dfd9b3fb0e42eb90c3b37eb7b4169eb21b,7bd220df,altosui: Add ability to create CSV file from telem or eeprom files,"altosui: Add ability to create CSV file from telem or eeprom files

This creates a comma separated value file to export data for
external programs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282634951,1282634951,634a550149e7c344a22a637ba484f115592b1018
634a550149e7c344a22a637ba484f115592b1018,634a5501,altosui: refactor logfile chooser dialog to share more code,"altosui: refactor logfile chooser dialog to share more code

Move file opening logic into logfile chooser as it can be shared that way.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282630505,1282630505,a55b132668a819cc26478a609cb79bd9190deb9d
afea6c264c5ebf12f1d629bd4bc724da86d11b7a,afea6c26,Merge branch 'master' of git://git.gag.com/fw/altos,"Merge branch 'master' of git://git.gag.com/fw/altos
",,,,Anthony Towns,aj@erisian.com.au,Anthony Towns,aj@erisian.com.au,1282629751,1282629751,"0e17853c08f77debef3e8cf82e9cdb6a5079fc9b,9d1b27fa147fc8b765d5be165ebef7ee0f85bd37"
a55b132668a819cc26478a609cb79bd9190deb9d,a55b1326,altosui: Separate out log file choosing dialog to share with CSV generator,"altosui: Separate out log file choosing dialog to share with CSV generator

This dialog will be shared with the CSV file generating code, so split
it out instead of duplicating it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282629696,1282629696,ef8376c4dd8262a34e02b6bb9e19e907ac2f4330
295043112ccde35092945c286596f9045ee6fa05,29504311,Merge branch 'new-packet-format' of ssh://git.gag.com/scm/git/fw/altos into new-package-format,"Merge branch 'new-packet-format' of ssh://git.gag.com/scm/git/fw/altos into new-package-format
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1282626682,1282626682,"2007288da8a83e3aa925e11cc196f1c65aab2e5c,ef8376c4dd8262a34e02b6bb9e19e907ac2f4330"
ef8376c4dd8262a34e02b6bb9e19e907ac2f4330,ef8376c4,altosui: make default Manifest look for built-in freetts,"altosui: make default Manifest look for built-in freetts
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282626510,1282626510,56b906f535ac2f86bcab71addbbcd376d74f6a73
56b906f535ac2f86bcab71addbbcd376d74f6a73,56b906f5,altos: Place rom config variables in fixed location,"altos: Place rom config variables in fixed location

The device serial number and radio calibration values are stored in
flash, mostly so that TeleDongle gets them saved.

Placing them in well-known locations (starting at 0xa0) makes it
possible to find the previous configuration and to re-write it
easily, without requiring the .map file.

altosui doesn't have the .map file parsing code, so it relies upon
this new technique. As a benefit, it reads the old values from the
device before reprogramming it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282626216,1282626216,4c0c099716197ef7539be0cf55bbb164f6804958
4c0c099716197ef7539be0cf55bbb164f6804958,4c0c0997,altosui: Finish device programming code,"altosui: Finish device programming code

Altosui can now reprogram Altusmetrum devices.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282626141,1282626141,bd2b44ddd61fadd8bf8ee6bf783ce019b1be7cc0
bd2b44ddd61fadd8bf8ee6bf783ce019b1be7cc0,bd2b44dd,altosui: Remove debug printf from AltosRomconfig,"altosui: Remove debug printf from AltosRomconfig
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282626098,1282626098,c3f57ffdb6c74de90d982eacd604e658ce9b00a5
c3f57ffdb6c74de90d982eacd604e658ce9b00a5,c3f57ffd,altosui: flush serial output before waiting for reply,"altosui: flush serial output before waiting for reply
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282626071,1282626071,8857ac5e43eac6db8d5594b8864df497a712242b
8857ac5e43eac6db8d5594b8864df497a712242b,8857ac5e,altosui: remove debug printf from AltosHexfile,"altosui: remove debug printf from AltosHexfile
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282626016,1282626016,b1758be01397fd49c441f40852f3558fe9343a2d
b1758be01397fd49c441f40852f3558fe9343a2d,b1758be0,altosui: Add lots more cc1111 debug interface functions,"altosui: Add lots more cc1111 debug interface functions

These are sufficient to program the flash.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282625930,1282625930,f9e80f39bc39e5882bfe75f959b6501cb3277cd2
f9e80f39bc39e5882bfe75f959b6501cb3277cd2,f9e80f39,libaltos: use pipe to wake up getchar on close. use mutexes,"libaltos: use pipe to wake up getchar on close. use mutexes
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282625749,1282625749,86f7b9314b042f2e512fdf35067817e68532867b
86f7b9314b042f2e512fdf35067817e68532867b,86f7b931,altosui: pad TM config dialog values to avoid clipping descenders,"altosui: pad TM config dialog values to avoid clipping descenders
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282625687,1282625687,b8519b8669ff54741dd738ac343fbd2424451247
b8519b8669ff54741dd738ac343fbd2424451247,b8519b86,ao-dumplog: Fix --remote and --channel options to actually work,"ao-dumplog: Fix --remote and --channel options to actually work
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282625617,1282625617,ebeb13688a9a5442c838641ede6ba0dc92c9a1a4
ebeb13688a9a5442c838641ede6ba0dc92c9a1a4,ebeb1368,"altosui: Add debug dongle API, split flash UI out","altosui: Add debug dongle API, split flash UI out

Create an API to talk through the debug port on another AltOS
device. Split the flash UI out from the flash implementation so that a
command line flash utility can be written.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282599178,1282599178,7f8d7978606abe544b1b9b6065c5480ed813b8ec
7f8d7978606abe544b1b9b6065c5480ed813b8ec,7f8d7978,altosui: Add .ihx file reading code and stub out flashing UI,"altosui: Add .ihx file reading code and stub out flashing UI

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282589599,1282589599,0e17853c08f77debef3e8cf82e9cdb6a5079fc9b
2007288da8a83e3aa925e11cc196f1c65aab2e5c,2007288d,working on java packaging details,"working on java packaging details
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281034815,1282546997,44b26dd550eef789e70082ccaa46d7d430c67bce
44b26dd550eef789e70082ccaa46d7d430c67bce,44b26dd5,add freetts as a build dep,"add freetts as a build dep
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281035704,1282546829,0e17853c08f77debef3e8cf82e9cdb6a5079fc9b
0e17853c08f77debef3e8cf82e9cdb6a5079fc9b,0e17853c,altosui: Set callsign when fetching eeprom data over the air,"altosui: Set callsign when fetching eeprom data over the air

The updated firmware places the callsign in each packet to comply with
regulations, this ensures that TeleDongle has the current callsign
configured.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282543575,1282543575,953bc3438b10b21f3d65d292356c4ab2de23cddd
953bc3438b10b21f3d65d292356c4ab2de23cddd,953bc343,altosui: Add TeleMetrum configuration,"altosui: Add TeleMetrum configuration

This presents a dialog with all of the user-settable options in the
TeleMetrum set for editing. Combo boxes are used for everything except
the callsign.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282543520,1282543520,e1463d8e265dfd42c824d90088cd2a51b4cf8131
e1463d8e265dfd42c824d90088cd2a51b4cf8131,e1463d8e,altosui: Make teledongle callsign configurable,"altosui: Make teledongle callsign configurable

Teledongle uses the callsign in packet mode; this provides a way to
set that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282438651,1282438651,09252ec22d58e946494e4ca2cf367bf3bbe1cc50
09252ec22d58e946494e4ca2cf367bf3bbe1cc50,09252ec2,altos: Define USB product ID in per-product Makefile.defs file,"altos: Define USB product ID in per-product Makefile.defs file

This allows Win7 to tell which kind of device is connected purely by
USB id as it doesn't expose the USB product ID string to user space.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282435781,1282435781,22800dc094797e1e0ad99124198809d0360f7556
22800dc094797e1e0ad99124198809d0360f7556,22800dc0,altosui: Select devices by USB vendor/product ID.,"altosui: Select devices by USB vendor/product ID.

Because Win7 doesn't expose the product name, we're swtiching to using
the USB idProduct/idVendor values. This patch adds support for
selecting devices by those new IDs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282094548,1282094548,d14c96663a1027164fa30ed89b53f5a9d3fdb82b
d14c96663a1027164fa30ed89b53f5a9d3fdb82b,d14c9666,libaltos: integrate Windows support.,"libaltos: integrate Windows support.

This adds Windows support for discovery and I/O.

The API to the library is mostly unchanged, except that it now exports
product and vendor USB IDs as Win7 doesn't expose the product name
anywhere that we've been able to find, so we'll be updating the
firmware to use unique idProduct values for each product.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1282094383,1282094383,294d9c7db21eaf1e71504dbcca5040371abcce55
9d1b27fa147fc8b765d5be165ebef7ee0f85bd37,9d1b27fa,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281579110,1281579110,b6da90b4627dde1fe88240c38c51559d8f781dd0
b6da90b4627dde1fe88240c38c51559d8f781dd0,b6da90b4,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281561339,1281561339,4918f73fd0a0f3f5d52907f95a0ec385e901d447
4918f73fd0a0f3f5d52907f95a0ec385e901d447,4918f73f,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281531027,1281531027,f63f16a70e4d0535667a6364cafcbff026ee6a8c
f63f16a70e4d0535667a6364cafcbff026ee6a8c,f63f16a7,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281530219,1281530219,a0a9b445a4d379730b67720f8d7b682d5206a582
294d9c7db21eaf1e71504dbcca5040371abcce55,294d9c7d,ao-dumplog: add --channel option (for use with -R option),"ao-dumplog: add --channel option (for use with -R option)

Sets the channel when downloading data with the -R option.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1281234655,1281234655,f317f1324b69b4241f4bb192e164b33d712d5a43
f317f1324b69b4241f4bb192e164b33d712d5a43,f317f132,altosui: Start adding code to write csv files from eeprom/telem files,"altosui: Start adding code to write csv files from eeprom/telem files

This is a start to code which can write out a csv file full of flight
data from either an eeprom or telem input file. It's not hooked up,
but the restructuring necessary is finished and the output is started.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1281156145,1281156145,4738cb2fc639adb1d9237e6c903479f0690dd81a
4738cb2fc639adb1d9237e6c903479f0690dd81a,4738cb2f,"altos: add callsign to packet mode, increase payload to 64 bytes","altos: add callsign to packet mode, increase payload to 64 bytes

Untested, but it 'should' work. Need to add callsign setting to packet
mode users.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1281156059,1281156059,b7699a5907e64bc7547fcc27e73f4a35bbaabfff
b7699a5907e64bc7547fcc27e73f4a35bbaabfff,b7699a59,altosui: Add comments to Eeprom reader,"altosui: Add comments to Eeprom reader
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1281114561,1281114561,0e917f3ff822616adb147517ac961422e5fedbfd
0e917f3ff822616adb147517ac961422e5fedbfd,0e917f3f,altosui: Compute flight state from eeprom data,"altosui: Compute flight state from eeprom data

This lets eeprom files be used to replay flights.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1281062993,1281062993,d8bf05f7ad55964c9bce0551e58f4ef6c9f721ad
a0a9b445a4d379730b67720f8d7b682d5206a582,a0a9b445,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281035808,1281035808,e075b8623533965b1b77b77d38c2df32f5f77fce
e075b8623533965b1b77b77d38c2df32f5f77fce,e075b862,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281035784,1281035784,410de62715a0830f03b0a65d6c7730dff51e6ef4
410de62715a0830f03b0a65d6c7730dff51e6ef4,410de627,add freetts as a build dep,"add freetts as a build dep
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281035704,1281035704,0b85160c44d934f3d1352c1c07c296d01ceffc32
0b85160c44d934f3d1352c1c07c296d01ceffc32,0b85160c,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281034937,1281034937,d091099753d9cae01c4805812425ebea19ec09cf
d091099753d9cae01c4805812425ebea19ec09cf,d0910997,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281034846,1281034846,aed55ef1ce45b0f6e6fefeebf50be97607b31d65
aed55ef1ce45b0f6e6fefeebf50be97607b31d65,aed55ef1,working on java packaging details,"working on java packaging details
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1281034815,1281034815,02f17f2cd26189e2676a9dc0d86bd959ed0bc3f4
d8bf05f7ad55964c9bce0551e58f4ef6c9f721ad,d8bf05f7,altosui: Split flight record out of telemetry class,"altosui: Split flight record out of telemetry class

This will permit either telemetry or eeprom data to be used to
construct the sequence of flight events for reply or data generation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1281030618,1281030618,85a670b5a904d6750d0f179ae307baeb8fc7cbd2
85a670b5a904d6750d0f179ae307baeb8fc7cbd2,85a670b5,altosui: Explicitly initialize Altos class,"altosui: Explicitly initialize Altos class

Because the Altos class is never instantiated, the static initializers
are never called, leaving the string to state mapping empty. Hand-code
the call to the initialer instead.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1281030017,1281030017,9e8f7f75442303f9bfa99a0435984f5d36863ae6
02f17f2cd26189e2676a9dc0d86bd959ed0bc3f4,02f17f2c,move to science menu,"move to science menu
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280984045,1280984045,e3a9e3815db3f290e28b40ae02aa654f515cfc37
9e8f7f75442303f9bfa99a0435984f5d36863ae6,9e8f7f75,altosui: Split status and info panels into separate files,"altosui: Split status and info panels into separate files

This moves some code out of AltosUI.java into separate files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280597661,1280673074,9c9b35254c693b3ade42b24d1e29eaf31e6ba2aa
9c9b35254c693b3ade42b24d1e29eaf31e6ba2aa,9c9b3525,altosui: Clear displayed data rows as needed.,"altosui: Clear displayed data rows as needed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280597096,1280597096,88e0137a60d7a13ddb7781befa76650e13ad44ae
88e0137a60d7a13ddb7781befa76650e13ad44ae,88e0137a,altosui: Merge gps date and time classes into gps class,"altosui: Merge gps date and time classes into gps class

No reason to split out the date and time information from the other gps info.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280596058,1280596218,1c3b2fe357d6acf28f48aeddd91693f10381be51
1c3b2fe357d6acf28f48aeddd91693f10381be51,1c3b2fe3,altosui: Capture config and version info in .eeprom files,"altosui: Capture config and version info in .eeprom files

Instead of only writing the serial number to the .eeprom file, write
all of the config values and all of the version reply to the .eeprom
file. The config values, in particular, contain the accelerometer
calibration data which is needed to correctly compute acceleration
from the captured accelerometer data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280595915,1280595915,e286eb61ad2a90746c1c31f95d26d5edb48738d3
e286eb61ad2a90746c1c31f95d26d5edb48738d3,e286eb61,"altosui: rename AltosEeprom -> AltosEepromDownload, split out Altos constants","altosui: rename AltosEeprom -> AltosEepromDownload, split out Altos constants

Renames the eeprom downloading code and adds a new file to share the
flight data constants across the various UI modules.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280595469,1280595469,7877496d47ce6d25210c0e1c6500666dbfc0876c
e3a9e3815db3f290e28b40ae02aa654f515cfc37,e3a9e381,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280595327,1280595327,8fc261c2b77bb8aab201a0649a84b5ffa236ce26
8fc261c2b77bb8aab201a0649a84b5ffa236ce26,8fc261c2,see if my new freetts package works,"see if my new freetts package works
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280595307,1280595307,2f114c7ff6b0deddb790d34139bb11ac37f8c0da
2f114c7ff6b0deddb790d34139bb11ac37f8c0da,2f114c7f,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280431836,1280431836,7877496d47ce6d25210c0e1c6500666dbfc0876c
7877496d47ce6d25210c0e1c6500666dbfc0876c,7877496d,Merge remote branch 'origin/master',"Merge remote branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280430469,1280430469,"c71061a37d3d3be2855b61cde33d2371989d7681,4cf39b13a574cb656999cf329f5b08e7f910604b"
c71061a37d3d3be2855b61cde33d2371989d7681,c71061a3,Make altosui test script executable,"Make altosui test script executable
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280430366,1280430366,9ad4984124b6c05114feac4c4ac078dc248ce16a
4cf39b13a574cb656999cf329f5b08e7f910604b,4cf39b13,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280429851,1280429851,d1848193d8208388e4ccdfbed4e5663a9ba04dd3
d1848193d8208388e4ccdfbed4e5663a9ba04dd3,d1848193,add a jdk to the build deps,"add a jdk to the build deps
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280429819,1280429819,2e797b18f0724caf7aaf96f45997998c7416f34e
9ad4984124b6c05114feac4c4ac078dc248ce16a,9ad49841,altosui: remove option to install to alternate volume,"altosui: remove option to install to alternate volume
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280429784,1280429784,6fb8546575f6d99676dbb1dce190b0b7cf24b657
2e797b18f0724caf7aaf96f45997998c7416f34e,2e797b18,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280429457,1280429457,89109f9dff3ce855d80da166e3362375282f745d
89109f9dff3ce855d80da166e3362375282f745d,89109f9d,"ugh, fixing failure due to aborted build","ugh, fixing failure due to aborted build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280429257,1280429257,865d5cdf8931ffc796f608e3e12d7c5a70832825
6fb8546575f6d99676dbb1dce190b0b7cf24b657,6fb85465,Moved Mac OS packaging to altosui dir,"Moved Mac OS packaging to altosui dir
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280429156,1280429156,91d75fb3919f606a1956bf8c6423a8012d99a56a
865d5cdf8931ffc796f608e3e12d7c5a70832825,865d5cdf,add swig as a build dep,"add swig as a build dep
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280429118,1280429118,33ffd89d5a64c991d28bd7369b61e1faa18f605b
91d75fb3919f606a1956bf8c6423a8012d99a56a,91d75fb3,altosui: Switch eeprom extension back to .eeprom,"altosui: Switch eeprom extension back to .eeprom
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280429112,1280429112,6f86db5e0360bef26b21336769b7635e3a11e160
33ffd89d5a64c991d28bd7369b61e1faa18f605b,33ffd89d,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280428852,1280428852,62b4cc51a0f54ef363cbff46caef80a0afecdea2
62b4cc51a0f54ef363cbff46caef80a0afecdea2,62b4cc51,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280428825,1280428825,27a2d0c00acf78628428c20ab68e2bfba06340da
6f86db5e0360bef26b21336769b7635e3a11e160,6f86db5e,Add Mac OS X packaging bits,"Add Mac OS X packaging bits

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280427887,1280427887,950f0a8c54e5835ee5d8b0aea360bd8362c21bc5
950f0a8c54e5835ee5d8b0aea360bd8362c21bc5,950f0a8c,altosui: construct Darwin application directory,"altosui: construct Darwin application directory

This adds the necessary files and build steps to construct
AltosUI.app on a Darwin system.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280426959,1280426959,669c5f52abb972a82ed6efbee7a8c7d20afb5cd0
669c5f52abb972a82ed6efbee7a8c7d20afb5cd0,669c5f52,libaltos: build with java src encoding UTF8,"libaltos: build with java src encoding UTF8

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280425732,1280425732,efa0e034a161f4852947cbac06537d6ba4422a0e
efa0e034a161f4852947cbac06537d6ba4422a0e,efa0e034,altosui: remove debug printf,"altosui: remove debug printf

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280425705,1280425705,53c279b9e96da8b69837ae84038a78ca5707f2a5
53c279b9e96da8b69837ae84038a78ca5707f2a5,53c279b9,"altosui: Close serial, join reader thread, free altos_file","altosui: Close serial, join reader thread, free altos_file

Separating out the close and free actions ensures that the reader thread will not
access freed memory or dereference a null pointer while shutting down the
connection to the serial device. Otherwise, a race condition exists between the
serial close and the thread join.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280425502,1280425502,b8bc9994d8bfde6116c8a509e70ddf45fc4decce
b8bc9994d8bfde6116c8a509e70ddf45fc4decce,b8bc9994,altosui: Remove unnecessary freetts .jar files,"altosui: Remove unnecessary freetts .jar files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280424299,1280424299,e33dbbba94ce42295e9fed9f4ba7e46f9eff1517
e33dbbba94ce42295e9fed9f4ba7e46f9eff1517,e33dbbba,altosui: check for closed serial device before reading,"altosui: check for closed serial device before reading

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280424249,1280424249,d0fd53bdab2f480cd43b6d7010c2094f4fccda91
27a2d0c00acf78628428c20ab68e2bfba06340da,27a2d0c0,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280422958,1280422958,537492dc961ee6a1945b1041ee3cc0d3f519a42c
537492dc961ee6a1945b1041ee3cc0d3f519a42c,537492dc,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280422881,1280422881,adf6cbcba23e24a3824f7e242ec37baa2750ab94
adf6cbcba23e24a3824f7e242ec37baa2750ab94,adf6cbcb,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1280422758,1280422758,d0fd53bdab2f480cd43b6d7010c2094f4fccda91
d0fd53bdab2f480cd43b6d7010c2094f4fccda91,d0fd53bd,Reset GPS ready status when GPS comes unlocked on the pad,"Reset GPS ready status when GPS comes unlocked on the pad

If GPS becomes unlocked, then report that in the UI and via
voice.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280378963,1280378963,5fd225c3a52445ecdc7c04fac5e3d9a0db177c66
5fd225c3a52445ecdc7c04fac5e3d9a0db177c66,5fd225c3,altosui: report rocket ground bearing at landing only if known,"altosui: report rocket ground bearing at landing only if known

if state.from_pad is null, then there isn't any data to report.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280376101,1280376101,d2d772164af95a35ea0f5d2413a5be67de9a210f
d2d772164af95a35ea0f5d2413a5be67de9a210f,d2d77216,altosui: Replace device dialog. Center eeprom monitor.,"altosui: Replace device dialog. Center eeprom monitor.

This adds a custom dialog for selecting device, which makes it look
much nicer on the screen and allows the user to double-click on an
entry to select it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280373516,1280373516,ea32290704a8ca468f01172166b561833b20c954
ea32290704a8ca468f01172166b561833b20c954,ea322907,"altosui: Fix Save flight data monitor layout, add cancel","altosui: Fix Save flight data monitor layout, add cancel

Use GridBagLayout to improve the appearance of the flight data monitor
widget, add a cancel button to stop loading data (useful if the
connection is wedged).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280371022,1280371022,ce90f3fe2aa6e23695ccccb36a8e6e614a08ba31
ce90f3fe2aa6e23695ccccb36a8e6e614a08ba31,ce90f3fe,altosui: Add progress bar for eeprom downloading status,"altosui: Add progress bar for eeprom downloading status

This has a progress bar tracking the state and block count while
downloading stuff from telemetrum.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280362122,1280362122,6599e9576c3da9325a1731144c1b8bc4943184c0
6599e9576c3da9325a1731144c1b8bc4943184c0,6599e957,altosui: Add eeprom data capture function. No UI yet.,"altosui: Add eeprom data capture function. No UI yet.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280356894,1280356894,8a6040e143ecc7830cc1c0114de85f3b72c067eb
8a6040e143ecc7830cc1c0114de85f3b72c067eb,8a6040e1,Merge remote branch 'keithp/macos',"Merge remote branch 'keithp/macos'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280348991,1280348991,"024d077302f91bdb17abe70d3211ab0949dab8b9,554a97ef455c801dcab825815f44520f96f4c3f3"
024d077302f91bdb17abe70d3211ab0949dab8b9,024d0773,Remove debug printf,"Remove debug printf

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280348961,1280348961,826061eaca88c0dd75051a6006ef6703c91af595
826061eaca88c0dd75051a6006ef6703c91af595,826061ea,Add voice test command for help in adjusting volume.,"Add voice test command for help in adjusting volume.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280347811,1280347811,71da54a5ce255395376a44586782ab8b6f3b289f
71da54a5ce255395376a44586782ab8b6f3b289f,71da54a5,Make voice and channel menus work.,"Make voice and channel menus work.

Stores voice and channel data to preferences.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280347312,1280347312,e76b9cc32bbcc5176d9bdd6f8d79778024627382
e76b9cc32bbcc5176d9bdd6f8d79778024627382,e76b9cc3,altosui: Catch errors opening USB devices. Limit list to relevant devices,"altosui: Catch errors opening USB devices. Limit list to relevant devices

Avoids a segfault when failing to open a device. Limit listed telemetry
devices to just TeleDongle units.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280345093,1280345093,172a2817dde6718724f2b5fad5a7761801446fa0
172a2817dde6718724f2b5fad5a7761801446fa0,172a2817,Merge branch 'macos',"Merge branch 'macos'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280341222,1280341222,"f2a006fd98045066bdf429cc142d033e9feb0a8f,81bf2042ca39eb106b789e5a08647c3114669358"
f2a006fd98045066bdf429cc142d033e9feb0a8f,f2a006fd,Make ao_log_data re-entrant as it is used for both sensor and GPS logs,"Make ao_log_data re-entrant as it is used for both sensor and GPS logs

Because ao_log_data is called from two different threads, failing to
make it re-entrant would cause the 'log' pointer parameter to get
overwritten if another thread asked to log data while the eeprom was
busy writing out a block.

This would cause the second thread to re-writing data from the first
thread's address, but without re-checksumming the data as the checksum
is computed before the log mutex is taken.

The bug can be seen by log blocks with invalid checksums.

Here's what happens with the ao_gps_tracking_report and ao_log threads:

  ao_gps_tracking_report		ao_log

   Writes a bunch of records
   *blocks* in the eeprom flush
					sets ao_log_data 'log' to global 'log'
					computes checksum for 'log' block
					*blocks* on ao_log_mutex
   Wakes up
   sets ao_log_data 'log' to 'gps_log'
   writes remaining records
   'gps_log' is left with svid = 0
   *blocks* on ao_gps_tracking_data
					writes data, reading from
					the current ao_log_data 'log'
					pointer which points at 'gps_log'

Making ao_log_data re-entrant fixes this by ensuring that the 'ao_log'
thread has its own copy of the ao_log_data 'log' parameter.

I made this function take an __xdata restricted pointer so that it
could be passed in the dptr register instead of needing to go on the stack.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280334669,1280341185,05111d5be4d37bedaaee6415d6ee27347e6a112c
554a97ef455c801dcab825815f44520f96f4c3f3,554a97ef,Force java source encoding to UTF-8,"Force java source encoding to UTF-8
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280284178,1280284178,3784578a40dcc61f447435cfdf22e13c409cb9c0
81bf2042ca39eb106b789e5a08647c3114669358,81bf2042,Java voice reporting cleanups.,"Java voice reporting cleanups.

Make sure it says something at the end of a log file replay.
Make sure it reports max speed after motor burn out, and max height
after apogee.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280269768,1280269768,8f2f38f2a9fb0c106e2c6b60cdc205292ce329ea
8f2f38f2a9fb0c106e2c6b60cdc205292ce329ea,8f2f38f2,"Java clean ups -- use varargs where possible, remove AltosSerialReader","Java clean ups -- use varargs where possible, remove AltosSerialReader

Add methods that format stuff using String.format for voice and serial
link, remove AltosSerialReader class and just embed that in the
AltosSerial class directly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280251100,1280251100,734cd15ccff691f851359518ce6118f29dc9f88d
734cd15ccff691f851359518ce6118f29dc9f88d,734cd15c,Remove directories as .class file dependencies; it makes them get rebuilt all the time,"Remove directories as .class file dependencies; it makes them get rebuilt all the time
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280251089,1280251089,809feb75e2155e84aebfcc431867edcfd9054670
809feb75e2155e84aebfcc431867edcfd9054670,809feb75,Clean up altosui build a bit,"Clean up altosui build a bit
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280218976,1280218976,3784578a40dcc61f447435cfdf22e13c409cb9c0
3784578a40dcc61f447435cfdf22e13c409cb9c0,3784578a,Add application icons for Mac OS X,"Add application icons for Mac OS X
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280214975,1280214975,2c273710ea9b76ebee4101893f9fe84be8a02354
2c273710ea9b76ebee4101893f9fe84be8a02354,2c273710,Add Mac OS X packaging files for altosui,"Add Mac OS X packaging files for altosui
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280214718,1280214718,a58c44cd904e5429b807e5c23913051ed6484edc
a58c44cd904e5429b807e5c23913051ed6484edc,a58c44cd,libaltos: build fat 10.5-compatible library,"libaltos: build fat 10.5-compatible library

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280214581,1280214581,4e3285575e0c7d029e799258587e965779990099
4e3285575e0c7d029e799258587e965779990099,4e328557,libaltos: make clean remove all built files,"libaltos: make clean remove all built files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280214558,1280214558,fb8507975c6e081de2e909eca6faaa8f868b609e
fb8507975c6e081de2e909eca6faaa8f868b609e,fb850797,libaltos needs -I. on all systems,"libaltos needs -I. on all systems

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280214518,1280214518,0a782026f6b19e84ffd44f1ae1b466363474bd30
0a782026f6b19e84ffd44f1ae1b466363474bd30,0a782026,Darwin doesn't have strndup.,"Darwin doesn't have strndup.

This provides a private version of this GNU extension.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280193007,1280193007,b51497597868a40df039dd3ca11b35a6258bbbb3
b51497597868a40df039dd3ca11b35a6258bbbb3,b5149759,Re-enable Linux support for altosui.,"Re-enable Linux support for altosui.

This steals code from cc-usbdev for scanning the USB tree and uses the
same tty code as on Darwin

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280192650,1280192650,e9153c4f2c71ed965822fcfe5112d2bc38506baf
e9153c4f2c71ed965822fcfe5112d2bc38506baf,e9153c4f,Re-enable freetts,"Re-enable freetts
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280189044,1280189044,17188f36fe18c23bc2eb877ac9a01b7693f4b863
17188f36fe18c23bc2eb877ac9a01b7693f4b863,17188f36,Present list of altos devices in nice format,"Present list of altos devices in nice format
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280189027,1280189027,005e2d6a7bb3b0546b0c1273296875621632ec6d
005e2d6a7bb3b0546b0c1273296875621632ec6d,005e2d6a,Switch AltosUI to libaltos for device access,"Switch AltosUI to libaltos for device access

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280184168,1280184168,c726d8f6eb861801d7543552beab6ee2c920c96f
c726d8f6eb861801d7543552beab6ee2c920c96f,c726d8f6,Add libaltos which talks to USB connected altos devices,"Add libaltos which talks to USB connected altos devices
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280184099,1280184125,05111d5be4d37bedaaee6415d6ee27347e6a112c
05111d5be4d37bedaaee6415d6ee27347e6a112c,05111d5b,"When the EP0 IN buffer is full, don't panic, just skip sending another","When the EP0 IN buffer is full, don't panic, just skip sending another

If the host doesn't pull the IN packet out of EP0 before sending
another SETUP command along, the IN buffer will still be busy when we
try to reply to the SETUP command. While I don't quite understand why
this would ever happen, there's no need to panic about it, just drop
the reply packet on the floor.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1280173937,1280174081,d0647950b76bfa9942e4f8cf87353f2b724099f4
d0647950b76bfa9942e4f8cf87353f2b724099f4,d0647950,fix text since TM only has one led to blink,"fix text since TM only has one led to blink
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279743996,1279743996,8eda9fe94a7fd40cb84f50e17e64956f1584ebdc
8eda9fe94a7fd40cb84f50e17e64956f1584ebdc,8eda9fe9,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279686272,1279686272,cd8aa79de72b8b6b3a26d0c2522e94c621b70f13
cd8aa79de72b8b6b3a26d0c2522e94c621b70f13,cd8aa79d,update to latest Debian standards version,"update to latest Debian standards version
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279686241,1279686241,3284c7516e302e6db403d18866924ad926ffb2a7
3284c7516e302e6db403d18866924ad926ffb2a7,3284c751,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279686008,1279686008,8f1933717e3acfbcb09191da6e79a7944f91f9d9
8f1933717e3acfbcb09191da6e79a7944f91f9d9,8f193371,reflect documentation file name change,"reflect documentation file name change
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279685967,1279685967,2cf1ef555a7feceeb1c333b273c19dd848e8d03f
2cf1ef555a7feceeb1c333b273c19dd848e8d03f,2cf1ef55,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279685747,1279685747,74c67fc466118b86b4eb5173f7a6886ae220a985
74c67fc466118b86b4eb5173f7a6886ae220a985,74c67fc4,add build dep for sndfile,"add build dep for sndfile
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279685667,1279685667,0794ab1e13313fa49b7caf01aef20b052ad78a88
0794ab1e13313fa49b7caf01aef20b052ad78a88,0794ab1e,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279685401,1279685401,15a6791ba8f8313b6b55752c3fa7dc254d56dd5c
15a6791ba8f8313b6b55752c3fa7dc254d56dd5c,15a6791b,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279685336,1279685336,e747954b6a9e71705f619684df8a118a909b1039
e747954b6a9e71705f619684df8a118a909b1039,e747954b,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279685242,1279685242,"bd40a5b431847c071f5c486d754eca5627e5e3b9,695879dbccfc5ec6b79698653c58814158f91686"
bd40a5b431847c071f5c486d754eca5627e5e3b9,bd40a5b4,significant update,"significant update
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1279613523,1279613523,62294ea3830d3ea261a8761edc9fa6f98201d321
695879dbccfc5ec6b79698653c58814158f91686,695879db,Switch DBG pins to GPIO when using any debug commands. Reboot to restore.,"Switch DBG pins to GPIO when using any debug commands. Reboot to restore.

If you want to use TeleMetrum as a debug dongle, you need to flip the
three pins used to talk to the remote debug port from SPI mode to GPIO
mode.

This patch doesn't provide any way to get back to SPI mode, so you'll
have to reboot the TeleMetrum to write out config parameters or log
flight data after using any debug commands.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1279159622,1279159804,a9ec6be0e92dee01f7aac006ef6f7779c1da1b36
a9ec6be0e92dee01f7aac006ef6f7779c1da1b36,a9ec6be0,Telemetry code was mis-computing RSSI,"Telemetry code was mis-computing RSSI

The RSSI data from the hardware reports in 1/2 dBm increments, and so
must be divided to report plain RSSI numbers.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1278193356,1279159804,62294ea3830d3ea261a8761edc9fa6f98201d321
62294ea3830d3ea261a8761edc9fa6f98201d321,62294ea3,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1277408303,1277408303,4766b13d1241fa585907c6f77707d2d4b3ccff75
4766b13d1241fa585907c6f77707d2d4b3ccff75,4766b13d,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1277408275,1277408275,52834517c0706b1f16fb81643a42dc1c1997e00a
52834517c0706b1f16fb81643a42dc1c1997e00a,52834517,Abort any in-progress radio operation when changing radio channel,"Abort any in-progress radio operation when changing radio channel

In monitor mode, the current receive operation must be aborted so that
the radio channel change can take effect without receiving a
telemetry packet on the old channel. Aborting any in-progress radio
operation will make sure that happens.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1277160813,1277160813,5933eaa44fe45027b856f1303dd657b974eb53e7
5933eaa44fe45027b856f1303dd657b974eb53e7,5933eaa4,ao-postflight: was walking off state.data array,"ao-postflight: was walking off state.data array
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1277145872,1277145872,11d155d558d0b121b66f089adee0a47d71f65a78
11d155d558d0b121b66f089adee0a47d71f65a78,11d155d5,Merge remote branch 'mjb/master',"Merge remote branch 'mjb/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1276750446,1276750446,"544003a8da0248fd6f3c62ded86af74ab7cdadf6,24393eab0ea085f2d0224b59fdc3c00693e5d3a9"
544003a8da0248fd6f3c62ded86af74ab7cdadf6,544003a8,Merge remote branch 'origin/master',"Merge remote branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1276750343,1276750343,"267923e56e22b3635a21f42ef77a3a36158bc273,93c1e29b07c331a5ca6e0f647b9d2e9266ed3014"
267923e56e22b3635a21f42ef77a3a36158bc273,267923e5,Add special code for USB panic's.,"Add special code for USB panic's.

The USB system may panic if the hardware isn't ready for IN data when
the driver thinks it should be. This adds a special panic code to make
figuring this out easier.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1276750183,1276750183,50ae347bf9de49ccfc92d26888f36e155fb406a3
50ae347bf9de49ccfc92d26888f36e155fb406a3,50ae347b,ao-view: disable radio telemetry monitoring during channel change,"ao-view: disable radio telemetry monitoring during channel change

This makes ao-view disable the radio so that the channel change has an
immediate effect rather than waiting for a packet on the old channel.

Note that this should also be fixed in the TM code itself so that this
change wouldn't be required.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1276750084,1276750084,563a9dcdfef42718370c49f16cc2271642b3e055
24393eab0ea085f2d0224b59fdc3c00693e5d3a9,24393eab,"Extension to KML output format, and minor bug fix","Extension to KML output format, and minor bug fix

Extended KML output by breaking flight into coloured segments representing
flight state. Add extra statistical information to description bubbles
visible in Google Earth when clicking on links in My Places.

Fix Bugs:
* output kml to file provided as argument.
* move kml coordinate output code to take advantage of nsat calculation
* remove superfluous %9.2f format specifier from raw_file output.

Signed-off-by: Mike Beattie <mike@ethernal.org>
",,,,Mike Beattie,mike@ethernal.org,Mike Beattie,mike@ethernal.org,1276740241,1276740241,93c1e29b07c331a5ca6e0f647b9d2e9266ed3014
93c1e29b07c331a5ca6e0f647b9d2e9266ed3014,93c1e29b,updates from Bob,"updates from Bob
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1274245965,1274245965,bb46c9a1da5788a082e4483e576a5a6d3963507b
bb46c9a1da5788a082e4483e576a5a6d3963507b,bb46c9a1,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1274163988,1274163988,16c4cae7ebed7bd3ee0f12b8872bf950574f17e8
16c4cae7ebed7bd3ee0f12b8872bf950574f17e8,16c4cae7,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1274163960,1274163960,bc89d962c87b50e5487628f8ca25e4443ac4823d
bc89d962c87b50e5487628f8ca25e4443ac4823d,bc89d962,merge the altusmetrum-themes package,"merge the altusmetrum-themes package
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1274163843,1274163843,0c6cf621dfd8339b8bc3915750a3147235f1331b
0c6cf621dfd8339b8bc3915750a3147235f1331b,0c6cf621,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1274162383,1274162383,"32e430b8a5f93b312f6359b4d553bad92ed37b19,563a9dcdfef42718370c49f16cc2271642b3e055"
32e430b8a5f93b312f6359b4d553bad92ed37b19,32e430b8,merge in a derivative of Bob Finch's mere mortals guide as a getting started,"merge in a derivative of Bob Finch's mere mortals guide as a getting started
chapter
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1274157799,1274157799,69092ffd23ac1928d5c84413fd00c2423f313fc2
563a9dcdfef42718370c49f16cc2271642b3e055,563a9dcd,Finish basic flight monitoring UI with voice using FreeTTS,"Finish basic flight monitoring UI with voice using FreeTTS

This captures telemetry data to log files and presents flight status
information in audio form using FreeTTS.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1274157057,1274157057,cc002c0a43a02845ba67d1a61828be382f307b2e
69092ffd23ac1928d5c84413fd00c2423f313fc2,69092ffd,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1274148646,1274148646,"3c2211ad7877d622435bc9e8c9c0b01d62be6ff0,cc002c0a43a02845ba67d1a61828be382f307b2e"
cc002c0a43a02845ba67d1a61828be382f307b2e,cc002c0a,"Fix telemetrum.inf, tested by Adrian and Keithp","Fix telemetrum.inf, tested by Adrian and Keithp
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1274074283,1274074283,f0433c83d76e90d78fb86a1f4a2f145f3c57fb25
3c2211ad7877d622435bc9e8c9c0b01d62be6ff0,3c2211ad,typo fix from Bob,"typo fix from Bob
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273786657,1273786657,f0433c83d76e90d78fb86a1f4a2f145f3c57fb25
f0433c83d76e90d78fb86a1f4a2f145f3c57fb25,f0433c83,updates from Bob,"updates from Bob
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273735659,1273735659,0f05cf06e3f1ec510b11d993d9038211ac66c97b
0f05cf06e3f1ec510b11d993d9038211ac66c97b,0f05cf06,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273715644,1273715644,6bd85138c1bfbc1d8b78dce1501870a65a64db36
6bd85138c1bfbc1d8b78dce1501870a65a64db36,6bd85138,lose the quotes since they apparently aren't necessary,"lose the quotes since they apparently aren't necessary
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273715620,1273715620,d639144b9bb840fbbced199738787ec054eddf12
d639144b9bb840fbbced199738787ec054eddf12,d639144b,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273705481,1273705481,ae6854df00579ea1c3486f1bf8f19443d5ac9498
ae6854df00579ea1c3486f1bf8f19443d5ac9498,ae6854df,update desktop file for conformance with current standards,"update desktop file for conformance with current standards
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273705453,1273705453,7191d74e680a63728f5eb139069a674fef969e6c
7191d74e680a63728f5eb139069a674fef969e6c,7191d74e,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273704300,1273704300,68eaaa694bb7bf20642ad11eac8a13c1c8e21b7d
68eaaa694bb7bf20642ad11eac8a13c1c8e21b7d,68eaaa69,add desktop file,"add desktop file
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273704254,1273704254,9d3d09578381bb6e6f88c39b0e945371bbc22c5a
9d3d09578381bb6e6f88c39b0e945371bbc22c5a,9d3d0957,add desktop file provided by Bob Finch,"add desktop file provided by Bob Finch
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273703689,1273703689,3cc1dad3b497524ffef61190dd68908cb19e8c35
3cc1dad3b497524ffef61190dd68908cb19e8c35,3cc1dad3,add initial package build scripts for Arch Linux from Bob Finch,"add initial package build scripts for Arch Linux from Bob Finch
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273703315,1273703315,1b8671bd0a00cec6ae4ccf442cd007b18af82fb0
1b8671bd0a00cec6ae4ccf442cd007b18af82fb0,1b8671bd,lots of updates,"lots of updates
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273390860,1273390860,53b9a9bc28a9278249ff37f92110c21380e93cda
53b9a9bc28a9278249ff37f92110c21380e93cda,53b9a9bc,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273175963,1273175963,cde60f16f6ab2cdd5010a0e106ae312d144947cf
cde60f16f6ab2cdd5010a0e106ae312d144947cf,cde60f16,"Revert ""Merge remote branch 'remotes/origin/fix-reset'""","Revert ""Merge remote branch 'remotes/origin/fix-reset'""

This reverts commit 314d27a73c903fef2968dabac3d5313573713460, reversing
changes made to fa77db2ffd8a749c93767db5a6311131e00473ae.

For whatever reason, this is utterly not doing the right things today!
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273175911,1273175911,8be04df7e1e0a369ffb1137c6e2ec63585e3c935
8be04df7e1e0a369ffb1137c6e2ec63585e3c935,8be04df7,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273171680,1273171680,314d27a73c903fef2968dabac3d5313573713460
314d27a73c903fef2968dabac3d5313573713460,314d27a7,Merge remote branch 'remotes/origin/fix-reset',"Merge remote branch 'remotes/origin/fix-reset'
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273171650,1273171650,"fa77db2ffd8a749c93767db5a6311131e00473ae,823fc0ac27b8df9b4ba1ca0f229b431baf5b46dd"
823fc0ac27b8df9b4ba1ca0f229b431baf5b46dd,823fc0ac,Don't change dbg clock while changing reset_n. Use 20ms everywhere,"Don't change dbg clock while changing reset_n. Use 20ms everywhere

This changes the reset code to be more conservative about changing
things at the same time, and also sets all timings to 20ms to make
debugging with the scope easier.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1273089039,1273089039,8b6767e24a88482dbd3d4c4c969a0be08917d22b
fa77db2ffd8a749c93767db5a6311131e00473ae,fa77db2f,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273048481,1273048481,8b6767e24a88482dbd3d4c4c969a0be08917d22b
8b6767e24a88482dbd3d4c4c969a0be08917d22b,8b6767e2,Use ao_delay to sleep for 2 seconds instead of trying ao_sleep,"Use ao_delay to sleep for 2 seconds instead of trying ao_sleep

ao_sleep doesn't delay for a specified time interval as much as one
might want it to.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1273048366,1273048405,e6bb80975fde20928a830170f0821d59a8c72690
e6bb80975fde20928a830170f0821d59a8c72690,e6bb8097,Fix all stdio reading functions to be __critical,"Fix all stdio reading functions to be __critical

Oh, right SDCC has '__critical' to mark sections of code that need to
run with interrupts disabled; no need to use EA = 0 and EA = 1.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1273048317,1273048405,ff03cdf746b83542ebcca00d32e6cc69ccfc122d
ff03cdf746b83542ebcca00d32e6cc69ccfc122d,ff03cdf7,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273046274,1273046274,8702f497c4278648303eced1aed5bd76d559521a
8702f497c4278648303eced1aed5bd76d559521a,8702f497,initial attempt at a telemetrum turn on script .. needs work,"initial attempt at a telemetrum turn on script .. needs work
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273046231,1273046231,01cefa181b04e53c20109ef8f3ffff633744da73
01cefa181b04e53c20109ef8f3ffff633744da73,01cefa18,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273046211,1273046211,45a1c2d2dfb69e5269ef2756fcd0f734b48d41cb
45a1c2d2dfb69e5269ef2756fcd0f734b48d41cb,45a1c2d2,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1273046073,1273046073,f7ff3278bb670df59d7425a014cfe8e3718fea3f
f7ff3278bb670df59d7425a014cfe8e3718fea3f,f7ff3278,Disable interrupts while reading from stdin,"Disable interrupts while reading from stdin

With multiple input source support, there is a lag between asking a
device if it has data and then waiting for more data to appear. If an
interrupt signalling additional input arrives in this interval, we'll
go to sleep with input available.

This patch uses a big hammer by just disabling interrupts for the
whole process.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1273045482,1273045482,aa9ff021d683764a43800eaa18ea0c9be5134939
aa9ff021d683764a43800eaa18ea0c9be5134939,aa9ff021,"Revert ""Add optional 's' command to packet slave to enable/disable slave mode""","Revert ""Add optional 's' command to packet slave to enable/disable slave mode""

This reverts commit e7dc7fab787df63a4de72c8450e94092eb04d7db.

This patch didn't work, and magically appears to break flashing TM
from TD.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1273034574,1273034574,8c95f33686f69da717013ec2c25dbcd99c03aa45
8c95f33686f69da717013ec2c25dbcd99c03aa45,8c95f336,more text created during SFO->DEN flight,"more text created during SFO->DEN flight
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1272584924,1272584924,af0613ffc178b9b1f011c315923f92f2581fe53e
af0613ffc178b9b1f011c315923f92f2581fe53e,af0613ff,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1272349123,1272349123,99094f02bf4849ba1f6b9842ded6c39d894320f7
99094f02bf4849ba1f6b9842ded6c39d894320f7,99094f02,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1272349057,1272349057,"641e76c5d419dab057298541b3a7546877643198,75d8ffd4eadf31d50b2f58c021530c17ff1bdc66"
641e76c5d419dab057298541b3a7546877643198,641e76c5,"add some RF usage information from an email reply sent today, and re-indent","add some RF usage information from an email reply sent today, and re-indent
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1272349035,1272349035,97f4874d19ec05c81a04a3ecd06abffcf7fbfafc
75d8ffd4eadf31d50b2f58c021530c17ff1bdc66,75d8ffd4,Autodetect flite voice registration function,"Autodetect flite voice registration function

Old versions of flite exported the function 'register_cmu_us_kal'
while new ones export 'register_cmu_us_kal16'. This patch just checks
which one is available and uses that.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1272056005,1272056005,97f4874d19ec05c81a04a3ecd06abffcf7fbfafc
97f4874d19ec05c81a04a3ecd06abffcf7fbfafc,97f4874d,More ALtosUI changes,"More ALtosUI changes
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1271978735,1271978738,e7dc7fab787df63a4de72c8450e94092eb04d7db
e7dc7fab787df63a4de72c8450e94092eb04d7db,e7dc7fab,Add optional 's' command to packet slave to enable/disable slave mode,"Add optional 's' command to packet slave to enable/disable slave mode

This option has been selected for teledongle so that you can use slave
mode and hook two teledongles together over the RF link.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1271973224,1271978738,f4383394b5d2b275b21e3ce8040d8cb9e48bb375
f4383394b5d2b275b21e3ce8040d8cb9e48bb375,f4383394,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1271601367,1271601367,"5f93cf8c73555f43c14b1b0757f264bde69e9b8a,c879b178d83c9a9a521f42a960b10e19b11cee92"
5f93cf8c73555f43c14b1b0757f264bde69e9b8a,5f93cf8c,capture work done on SFO->DEN flight,"capture work done on SFO->DEN flight
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1271601343,1271601343,b3a2e1221735d54dc3f2b97b4e75ed6f33ab8227
c879b178d83c9a9a521f42a960b10e19b11cee92,c879b178,Increase reset switch time to 100ms,"Increase reset switch time to 100ms

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270962597,1270962601,b3a2e1221735d54dc3f2b97b4e75ed6f33ab8227
b3a2e1221735d54dc3f2b97b4e75ed6f33ab8227,b3a2e122,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270933274,1270933274,9394393c24c0a96b94319f2d0aa78fb498a121c9
9394393c24c0a96b94319f2d0aa78fb498a121c9,9394393c,Only have the slave return a packet if it received one.,"Only have the slave return a packet if it received one.

When the receive is aborted to switch modes, it's important to not
immediately re-acquire the radio and try to send a packet as the
aborting thread won't know to kick the receiver again.

This prevents the 'C' command from locking up as it tries to stop the
packet slave before turning on the transmitter.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270860661,1270860661,ce39372a3aeffff1a08d609e63164a00cf974663
ce39372a3aeffff1a08d609e63164a00cf974663,ce39372a,wrong Yaesu model,"wrong Yaesu model
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270842649,1270842649,a832c7e9d9e9e420e1281136188bd53b34c56464
a832c7e9d9e9e420e1281136188bd53b34c56464,a832c7e9,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270793403,1270793403,c0ee1ae25e1d18138d8372f47085de48ffada344
c0ee1ae25e1d18138d8372f47085de48ffada344,c0ee1ae2,file changed by auto tools,"file changed by auto tools
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270793361,1270793361,25e69ebfec94560e0714cf2cc623dc9697b4ea99
25e69ebfec94560e0714cf2cc623dc9697b4ea99,25e69ebf,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270793312,1270793312,ea5d4f01d18d93d032f05933041b7b6881289780
ea5d4f01d18d93d032f05933041b7b6881289780,ea5d4f01,libflite may forget to reference libasound,"libflite may forget to reference libasound
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270791904,1270791960,4b02f293e9c32a568fad89558274f21157e7d473
4b02f293e9c32a568fad89558274f21157e7d473,4b02f293,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270778887,1270778887,5c3b6e2d1989bcaa19ae3e294f297ec3e5648a53
5c3b6e2d1989bcaa19ae3e294f297ec3e5648a53,5c3b6e2d,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270778200,1270778200,01e524f11a67390a8ea1f20aa2d611909b4da363
01e524f11a67390a8ea1f20aa2d611909b4da363,01e524f1,choose a better set of docbook xsl files,"choose a better set of docbook xsl files
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270778105,1270778105,f93c9bf3695862db31f2c3b3bc5a7bb24ef3766c
f93c9bf3695862db31f2c3b3bc5a7bb24ef3766c,f93c9bf3,"When changing RESET line, delay 20ms","When changing RESET line, delay 20ms

The GPS data sheet suggests a 1uF cap on the reset line to ensure it
is held low long enough for the power supply to come up to voltage. TM
v1.0 loads a 0.001uF cap there, but in case that isn't large enough,
it could be replaced with the larger one. This change makes sure that
even with that larger value, the debugging link will be able to reset
the target.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270772897,1270772897,baaaac499cfbc1286ae55374cfdc796d32983b92
baaaac499cfbc1286ae55374cfdc796d32983b92,baaaac49,Merge remote branch 'origin/master',"Merge remote branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270758683,1270758683,"a4356b9bcf679c4d7b88fbbad77a98ecb0f80098,dec9971d70f17067ba0051206851b49c7604ac85"
a4356b9bcf679c4d7b88fbbad77a98ecb0f80098,a4356b9b,Use 16-bit flite voice (which appears to have changed symbols recently),"Use 16-bit flite voice (which appears to have changed symbols recently)
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270758616,1270758616,447c121fc1ceb878e45718ad1364a5349965a59a
447c121fc1ceb878e45718ad1364a5349965a59a,447c121f,Merge remote branch 'origin/master' into altosui,"Merge remote branch 'origin/master' into altosui
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270752416,1270752416,"10330d23518c94a8b791193a97a6cc07b1c9a97c,53ca3f98aeb70cb780031fee788de950e4388cf6"
dec9971d70f17067ba0051206851b49c7604ac85,dec9971d,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270752183,1270752183,6629ec52def8917ad033847812a1adc4c3e9c947
6629ec52def8917ad033847812a1adc4c3e9c947,6629ec52,lose the url entirely for now,"lose the url entirely for now
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270752167,1270752167,a1539a075a0cc79c9122fea878d9a20ee722a18c
a1539a075a0cc79c9122fea878d9a20ee722a18c,a1539a07,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270752102,1270752102,934434ffb3514fe9ff95692784750d7c5217a5d3
934434ffb3514fe9ff95692784750d7c5217a5d3,934434ff,fix typo in url,"fix typo in url
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270752088,1270752088,8a067cd0eebbec313fc39086747ef618f2d1cf37
8a067cd0eebbec313fc39086747ef618f2d1cf37,8a067cd0,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270751778,1270751778,05ad58389fa3814ecb56344bf4ec3a3e025920a2
05ad58389fa3814ecb56344bf4ec3a3e025920a2,05ad5838,need another build dep,"need another build dep
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270751694,1270751694,6fbdc7037db185f03bd5ff96b9d9320646572df7
6fbdc7037db185f03bd5ff96b9d9320646572df7,6fbdc703,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270751329,1270751329,8f1d47e9cd61738e516d15fc97d5730d80611e87
8f1d47e9cd61738e516d15fc97d5730d80611e87,8f1d47e9,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270751300,1270751300,c66eebad323e4572bb7cc23bc476ee144f03e9b8
10330d23518c94a8b791193a97a6cc07b1c9a97c,10330d23,Enable telemetry monitoring,"Enable telemetry monitoring

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270540680,1270540680,9e10e43eff9de3f034da49c4f88728fb933f5035
9e10e43eff9de3f034da49c4f88728fb933f5035,9e10e43e,Tasks may move in task structure as a result of ao_exit,"Tasks may move in task structure as a result of ao_exit

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270540617,1270540617,a7fc7901cd591c93d9d0cffeec2977ebb17554d4
a7fc7901cd591c93d9d0cffeec2977ebb17554d4,a7fc7901,"TD reports ""not-connected"" when GPS has 0 sats","TD reports ""not-connected"" when GPS has 0 sats
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270540519,1270540519,e064d05da87926c19fb665b40fb280fb59328183
e064d05da87926c19fb665b40fb280fb59328183,e064d05d,serial port read function cannot be interrupted. poll every 1 second,"serial port read function cannot be interrupted. poll every 1 second
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270540492,1270540492,c099a67d9ea37e731e0eca318102560281ac240f
c099a67d9ea37e731e0eca318102560281ac240f,c099a67d,Interrupt running replay thread when starting another replay,"Interrupt running replay thread when starting another replay

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270532525,1270532525,cc600a0389720bc7e435dbda8bec080ef19e0c58
cc600a0389720bc7e435dbda8bec080ef19e0c58,cc600a03,Add Linux device discovery,"Add Linux device discovery

AltosDeviceLinux.java scans /proc to locate suitable devices. This
will be hooked up to the UI shortly.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270531306,1270531306,c28646d72005daeadb70b95fd3b0050bd752cc55
c28646d72005daeadb70b95fd3b0050bd752cc55,c28646d7,Switch TeleMetrum from v0.2 to v1.0,"Switch TeleMetrum from v0.2 to v1.0

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270439730,1270439730,d22ba55ae0e056530a727df50f14ad853d79a2c8
d22ba55ae0e056530a727df50f14ad853d79a2c8,d22ba55a,Clean up some altosui comments,"Clean up some altosui comments
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270439718,1270439718,6251e89c6eea655769f77bc18e98e79c99cf3cad
6251e89c6eea655769f77bc18e98e79c99cf3cad,6251e89c,Don't abort the radio when enabling telemetry monitoring,"Don't abort the radio when enabling telemetry monitoring

If telemetry monitoring is already on, then there isn't any point, and
if it's not on, then presumably there isn't any radio work to abort.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270436086,1270436086,b0b99f30c4e00689e9faceb363a5c7284541c6be
b0b99f30c4e00689e9faceb363a5c7284541c6be,b0b99f30,Make ao_radio_idle keep trying to get the radio to idle.,"Make ao_radio_idle keep trying to get the radio to idle.

Attempting to abort a radio operation could lead to a hang if the user
of the radio jumped in and started using it again before the task
attempting to abort woke up. This change just keeps smacking the radio
until the radio goes idle long enough to detect it.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270435730,1270435730,0e7abc9fedec568b431c983d3df1b0b29f4f10e3
0e7abc9fedec568b431c983d3df1b0b29f4f10e3,0e7abc9f,Use RXTX for serial comm. Add logdir preference saving,"Use RXTX for serial comm. Add logdir preference saving
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270423924,1270423924,3d34c488c5b71020d86f83156fd821fd860bf214
c66eebad323e4572bb7cc23bc476ee144f03e9b8,c66eebad,rewrite urls in docbook format,"rewrite urls in docbook format
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270303364,1270303364,8c600abf87c95f8f214b5e56ff6eab955795dff5
3d34c488c5b71020d86f83156fd821fd860bf214,3d34c488,Make .jar file,"Make .jar file
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270278164,1270278164,4bea4c327e002ce8f88218f0d840af7c1521bc35
4bea4c327e002ce8f88218f0d840af7c1521bc35,4bea4c32,Remove unused cell renderer class,"Remove unused cell renderer class
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270275902,1270275902,4ad062969ae8a608b8428620579bbe114e580a11
4ad062969ae8a608b8428620579bbe114e580a11,4ad06296,Remove GPS data missing from skytraq. Save max height/accel/speed,"Remove GPS data missing from skytraq. Save max height/accel/speed
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270275638,1270275638,ebd49d4ec6b0b60c85b2de45cfe2e36add8fe9bf
ebd49d4ec6b0b60c85b2de45cfe2e36add8fe9bf,ebd49d4e,"Report current gps nsat, not last locked nsat","Report current gps nsat, not last locked nsat
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270274740,1270274740,3f9b66b307ee88172151e3bee58e50f5acbde109
3f9b66b307ee88172151e3bee58e50f5acbde109,3f9b66b3,Clean up GPS data formatting,"Clean up GPS data formatting
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270274430,1270274430,9cc48698ec14c34d437baad7b6540edc31e9741c
9cc48698ec14c34d437baad7b6540edc31e9741c,9cc48698,Fix state updates,"Fix state updates
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270273660,1270273660,6d523ee4dad3b9890d3cf05852459101fe7e26ea
6d523ee4dad3b9890d3cf05852459101fe7e26ea,6d523ee4,Fix status update,"Fix status update
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270270121,1270270121,caa0bf49668344937483190d1c258bfa32971d19
caa0bf49668344937483190d1c258bfa32971d19,caa0bf49,Fix up table formatting,"Fix up table formatting
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270269840,1270269840,a579402f428dd6a0529505069d1846f70b83ab5d
a579402f428dd6a0529505069d1846f70b83ab5d,a579402f,Display table of flight info. gps is not working yet though,"Display table of flight info. gps is not working yet though
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270257059,1270257059,65079f84ea64220fa928c3ad96652fed159bf74b
65079f84ea64220fa928c3ad96652fed159bf74b,65079f84,Steal C code from ao-view,"Steal C code from ao-view
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270249660,1270249660,02f2be90879b682b6e648cf2debc83223d127b9d
02f2be90879b682b6e648cf2debc83223d127b9d,02f2be90,Add telem parsing code,"Add telem parsing code
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270240672,1270240672,6454e309858aeef7912e862de8632618d89b4205
8c600abf87c95f8f214b5e56ff6eab955795dff5,8c600abf,"crudely incorporate ""day in the life"" info from web page","crudely incorporate ""day in the life"" info from web page
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270187807,1270187807,53ca3f98aeb70cb780031fee788de950e4388cf6
53ca3f98aeb70cb780031fee788de950e4388cf6,53ca3f98,tweak copyright assertion,"tweak copyright assertion
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270186782,1270186782,76768804e68ed09421d7a48cb0b390f102ce2d76
6454e309858aeef7912e862de8632618d89b4205,6454e309,Fix windows install file,"Fix windows install file
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270171874,1270171874,584ab100640a07dec6e06829e73b7260d17d2232
584ab100640a07dec6e06829e73b7260d17d2232,584ab100,Add Windows install .inf file,"Add Windows install .inf file
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270171856,1270171856,a06bee96e648d9ded8776f3d6cba9505e7be1a60
a06bee96e648d9ded8776f3d6cba9505e7be1a60,a06bee96,Add telemetry data parsing code,"Add telemetry data parsing code
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270101903,1270101903,7f233369e32c3254165ee251df0a3dbc21ea5a29
7f233369e32c3254165ee251df0a3dbc21ea5a29,7f233369,Start adding java-based UI,"Start adding java-based UI
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1270068594,1270068594,df7bda1f32b0049c3878c325ea0b55999f3980e3
76768804e68ed09421d7a48cb0b390f102ce2d76,76768804,make lintian happy,"make lintian happy
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270013195,1270013195,eb3cc3e9b60ec23acbb7d797affa743d671801ab
eb3cc3e9b60ec23acbb7d797affa743d671801ab,eb3cc3e9,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270012788,1270012788,00f49c8fb0aa38331360bdb85c32bcebe60dcdc3
00f49c8fb0aa38331360bdb85c32bcebe60dcdc3,00f49c8f,fix typo,"fix typo
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270012747,1270012747,f03ed0876c67b58624abf0c14bf73444b0322d3c
f03ed0876c67b58624abf0c14bf73444b0322d3c,f03ed087,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270012717,1270012717,b41e617080fe825f7810ee5eee52ea37f7618ec6
b41e617080fe825f7810ee5eee52ea37f7618ec6,b41e6170,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

Conflicts:
	ChangeLog
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270012532,1270012532,"28e40ccfcd80ab8764d4aa235257cea4d193a0c1,df7bda1f32b0049c3878c325ea0b55999f3980e3"
28e40ccfcd80ab8764d4aa235257cea4d193a0c1,28e40ccf,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270012487,1270012487,20d4d410e0fc04fe192e309811eed6c0194fa5a8
20d4d410e0fc04fe192e309811eed6c0194fa5a8,20d4d410,initial harness for documentation,"initial harness for documentation
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1270012300,1270012300,9801ff7de21027935f52ccabaa3ff157e22d21ce
9801ff7de21027935f52ccabaa3ff157e22d21ce,9801ff7d,move gbp.conf into debian/,"move gbp.conf into debian/
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1268676258,1268676258,eda5e1166a97766aa22561beaa1086ba4e19ee16
df7bda1f32b0049c3878c325ea0b55999f3980e3,df7bda1f,Merge remote branch 'origin/master',"Merge remote branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1268419106,1268419106,"23da4f3bcdd1d780c9e1f6b68ad2fb309fcae6ba,a7042fe7d065d1da1252be5ad43e3c9856214dc8"
23da4f3bcdd1d780c9e1f6b68ad2fb309fcae6ba,23da4f3b,Document the ao-dumplog '--remote' flag for radio-link downloads,"Document the ao-dumplog '--remote' flag for radio-link downloads

The --remote (or -R) flag uses TeleDongle to fetch data over the radio
command link from TeleMetrum. It's been there for a while, but the man
page failed to mention it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1268419052,1268419052,93df98898f8cd199ae13158bc4f65e3494c954ad
93df98898f8cd199ae13158bc4f65e3494c954ad,93df9889,Round radio calibration value instead of truncating,"Round radio calibration value instead of truncating

The radio calibration function in the bring-up code was truncating the
radio calibration value which caused the resulting frequency to
always measure above the target frequency, instead of trying to get as
close as possible. This change will result in a closer frequency
match, but may sometimes be below the target frequency.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1268418912,1268418912,6e61170d42936c18cd6efba6f4c14af616a30745
a7042fe7d065d1da1252be5ad43e3c9856214dc8,a7042fe7,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@Deborah.(none),Bdale Garbee,bdale@Deborah.(none),1267845071,1267845071,eda5e1166a97766aa22561beaa1086ba4e19ee16
eda5e1166a97766aa22561beaa1086ba4e19ee16,eda5e116,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267749219,1267749219,6e61170d42936c18cd6efba6f4c14af616a30745
6e61170d42936c18cd6efba6f4c14af616a30745,6e61170d,Need to duplicate new altitude conversion code in aoview.,"Need to duplicate new altitude conversion code in aoview.

Altitude conversion is now done with a smaller table and interpolation
instead of a giant table.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1267410286,1267410343,e4e17e6d3844ae682a0e7a9469a522359bac77b6
e4e17e6d3844ae682a0e7a9469a522359bac77b6,e4e17e6d,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267317373,1267317373,a1478f65538fdaac7b58ffbd958a035b74956099
a1478f65538fdaac7b58ffbd958a035b74956099,a1478f65,Merge remote branch 'origin/master',"Merge remote branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1267312773,1267312773,"901fce5fe3e2762406079ecaa787612b5ed4b34a,bbf8c9f1748af3f1fac08ddf80ae98da2e9b5727"
901fce5fe3e2762406079ecaa787612b5ed4b34a,901fce5f,Add .gitignore for ao-bringup,"Add .gitignore for ao-bringup

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1267312727,1267312727,7aab73a265841aac817ea34235dd1eb819debf76
7aab73a265841aac817ea34235dd1eb819debf76,7aab73a2,Fix up LED colors for each product.,"Fix up LED colors for each product.

Different products assign different color LEDs to the two available
LED drivers (P1_0, P1_1). Make the LED color pin assignments
per-product (in ao_pins.h), then deal with not always having a green LED.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1267312444,1267312444,1d6d8d76ec65373ffee70add75d183f5c4168f61
1d6d8d76ec65373ffee70add75d183f5c4168f61,1d6d8d76,Eliminate deadlock when writing config from radio link,"Eliminate deadlock when writing config from radio link

Writing the 'Saved\r\n' string would fill the packet buffer and cause
a flush to occur, which would need to wait for the radio link to
receive and transmit a packet. The radio link always re-fetches the
radio channel number when lighting up the radio, so it need to look in
the config space. If the config mutex was held by the config writing
process while the radio was trying to get the channel number, then
we'd get a deadlock.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1267312304,1267312304,f1956ebadd7bf46b84a05a0c383b6404ca26b344
f1956ebadd7bf46b84a05a0c383b6404ca26b344,f1956eba,Leave .ihx files in the build directory too - easier to debug that way,"Leave .ihx files in the build directory too - easier to debug that way

sdcdb wants the .ihx and .cdb files in the same directory, so humor it
by copying the .ihx files to the src directory instead of moving them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1267312216,1267312216,461d4a1948e112ec7353caf88967391d876469dd
bbf8c9f1748af3f1fac08ddf80ae98da2e9b5727,bbf8c9f1,create a turn on script for lighting up TeleDongle v0.2 boards,"create a turn on script for lighting up TeleDongle v0.2 boards
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267222872,1267222872,461d4a1948e112ec7353caf88967391d876469dd
461d4a1948e112ec7353caf88967391d876469dd,461d4a19,Add LED test,"Add LED test
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1267209193,1267209193,5d7a3a5fbc0af4621c67a6fd51a9c9d5ae688fa5
5d7a3a5fbc0af4621c67a6fd51a9c9d5ae688fa5,5d7a3a5f,Fix and document the ao-rawload --run flag,"Fix and document the ao-rawload --run flag

This allows ram-based programs to be loaded and executed easily.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1267144813,1267144813,1e60deca147c85a064719dfad14ccabd1049bbbd
1e60deca147c85a064719dfad14ccabd1049bbbd,1e60deca,Allow product names to have suffixes (like board revisions),"Allow product names to have suffixes (like board revisions)

When looking for a board by product name, just look at the prefix of
the name instead of requiring an exact match. This will allow products
to have board version suffixes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1267144414,1267144484,f4d5790a284e2d02dd7568fbca90402fa5ed1aea
f4d5790a284e2d02dd7568fbca90402fa5ed1aea,f4d5790a,Add ao_radio_xmit to help test boards without flashing them.,"Add ao_radio_xmit to help test boards without flashing them.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1267144377,1267144484,d7d551b0078acb1596a9b9023c3df6dbfa46213c
d7d551b0078acb1596a9b9023c3df6dbfa46213c,d7d551b0,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267057823,1267057823,2f45953ee54034209a23c254e65da36e44cf075f
2f45953ee54034209a23c254e65da36e44cf075f,2f45953e,un-muck changelog,"un-muck changelog
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267057787,1267057787,540f86678853e7ea80ae91f3f2ec0ec88c5b1ca7
540f86678853e7ea80ae91f3f2ec0ec88c5b1ca7,540f8667,debugging,"debugging
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267057671,1267057671,cdccd92f6ed97be7385e84de5694064cb8f43946
cdccd92f6ed97be7385e84de5694064cb8f43946,cdccd92f,conditionalize use of git on executability of /usr/bin/git binary,"conditionalize use of git on executability of /usr/bin/git binary
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267057528,1267057528,54dd7a200e6956aace5a580d4c4d6a10a13c654b
54dd7a200e6956aace5a580d4c4d6a10a13c654b,54dd7a20,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267057365,1267057365,4b6b28530206c6fdbe46699b81746fbbcab5b148
4b6b28530206c6fdbe46699b81746fbbcab5b148,4b6b2853,see if this works,"see if this works
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267057340,1267057340,c74958d3e8c5ce8006a9f9f6853238fce0c77432
c74958d3e8c5ce8006a9f9f6853238fce0c77432,c74958d3,move git-using variable declaration into the prebuild target,"move git-using variable declaration into the prebuild target
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267056809,1267056809,cf091a7252eba09902a42a3cfe7b4d6a343907ce
cf091a7252eba09902a42a3cfe7b4d6a343907ce,cf091a72,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267055084,1267055084,deccc10f0305c0cd02bf6317d6dc9d2ae38c3dac
deccc10f0305c0cd02bf6317d6dc9d2ae38c3dac,deccc10f,add gawk as a build dependency since strtonum is a gawk extension,"add gawk as a build dependency since strtonum is a gawk extension
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267055012,1267055012,ac45da6e61597dcdb119b976f7301b2cc7fdced4
ac45da6e61597dcdb119b976f7301b2cc7fdced4,ac45da6e,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267048646,1267048646,24912821b3230b8357b9e0094cd69fa0bccc5513
24912821b3230b8357b9e0094cd69fa0bccc5513,24912821,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1267048407,1267048407,82fdbfe1229d1ea5e6906ea240d54b3da73d9a69
82fdbfe1229d1ea5e6906ea240d54b3da73d9a69,82fdbfe1,Must install .map files for ao-load to work,"Must install .map files for ao-load to work

ao-load uses the .map files to rewrite the serial number and other
config parameters into the program flash.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1266730543,1266730543,a5215c2bd9249a285fc834db0c453fb3e7daed87
a5215c2bd9249a285fc834db0c453fb3e7daed87,a5215c2b,Add back stack size checking to altos linking phase,"Add back stack size checking to altos linking phase

This verifies that the stack start specified during the compile
will work with the resulting program

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1266729605,1266729605,18eeb79026f7e5c54bf99435537c024427011a36
18eeb79026f7e5c54bf99435537c024427011a36,18eeb790,Quiet make output.,"Quiet make output.

This borrows ideas from the notmuch project to reduce the command line
clutter seen when compiling or linking stuff.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1266728745,1266728745,004c2a9b7a4b44ef71ca60482573e8e9d8c6ce93
004c2a9b7a4b44ef71ca60482573e8e9d8c6ce93,004c2a9b,Update .gitignore files,"Update .gitignore files
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1266726968,1266727355,84c93bb2fc4558a5e4654794ba90e730a84eaf67
84c93bb2fc4558a5e4654794ba90e730a84eaf67,84c93bb2,Change altos build process to support per-product compile-time changes,"Change altos build process to support per-product compile-time changes

This creates per-product subdirectories and recompiles everything for
each product, allowing per-product compile-time changes for things
like peripheral pin assignments and attached serial devices.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1266726136,1266726627,fd0a42e0e96dcb8ecc9e999f70bcf70692692af9
fd0a42e0e96dcb8ecc9e999f70bcf70692692af9,fd0a42e0,Change barometer conversion code to shrink conversion table,"Change barometer conversion code to shrink conversion table
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1266726067,1266726067,876e9a10b9096ead85fbe08ec9a6a0329cf7cbd4
876e9a10b9096ead85fbe08ec9a6a0329cf7cbd4,876e9a10,Log GPS data on pad after boost detect.,"Log GPS data on pad after boost detect.

This wakes up the two GPS reporting tasks and gets them to report out
any existing GPS data to the log file. To make sure the timestamps in
that GPS data are accurate, this also records GPS time on receipt of
the GPS data instead of when that is logged.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1266108147,1266108147,c83615567b4567f3dc45a7f7b894943b45fbb65c
c83615567b4567f3dc45a7f7b894943b45fbb65c,c8361556,Pull in a bit more data for filtering the start of the boost,"Pull in a bit more data for filtering the start of the boost
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1265531122,1265952215,f8967607b3dda0c0ce7afe8bb077da2da5ed3dcd
f8967607b3dda0c0ce7afe8bb077da2da5ed3dcd,f8967607,Compute daytime using GPS as time base,"Compute daytime using GPS as time base
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1265531096,1265952215,2a6350149407c7d2e7d143906c40c5e331248aeb
2a6350149407c7d2e7d143906c40c5e331248aeb,2a635014,Missing ao_mutex_put in gps_dump,"Missing ao_mutex_put in gps_dump
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1265942936,1265952215,9856b7c4397afcecc8f541af9a83824e817b3612
9856b7c4397afcecc8f541af9a83824e817b3612,9856b7c4,Switch to using internal cc1111 temperature sensor,"Switch to using internal cc1111 temperature sensor

v0.2 has no temperature sensor, and several of the v0.1 boards didn't
get a temperature sensor loaded. Use the internal temperature sensor
on the cc1111 in all cases instead.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263169910,1263170158,0c2533be15858774ef9381aa8c8344356fd5b971
0c2533be15858774ef9381aa8c8344356fd5b971,0c2533be,Force idle mode by shorting the SPI clock to ground at boot time.,"Force idle mode by shorting the SPI clock to ground at boot time.

This allows you to override the flight mode detection code in case the
accelerometer calibration is broken somehow. Hold the SPI clock shoted
to ground until the LED comes on, then remove it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263103579,1263103579,28346736a7799c0767e54511d9949cd61d35e471
28346736a7799c0767e54511d9949cd61d35e471,28346736,Add simple gps dump command 'g',"Add simple gps dump command 'g'

This just dumps out the data in a very simple format to verify the GPS
receiver.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263099468,1263099468,a6082a8b4501ac4cb18584ace1f0c40e088e5484
a6082a8b4501ac4cb18584ace1f0c40e088e5484,a6082a8b,Remove flash debugging printfs,"Remove flash debugging printfs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263099449,1263099449,05bb953830604721c9a49dd56256b86f3666b5ff
05bb953830604721c9a49dd56256b86f3666b5ff,05bb9538,Don't set ao_flash_setup_done until we're actually done.,"Don't set ao_flash_setup_done until we're actually done.

Because we're accessing this variable outside of the mutex, we need to
make sure it isn't set until the data it covers has been initialized.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263098577,1263098577,327e5e782958e516a7b7a786ab6c176b0decb8b8
327e5e782958e516a7b7a786ab6c176b0decb8b8,327e5e78,Dump config block from read/write config and flash_status commands,"Dump config block from read/write config and flash_status commands
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263096282,1263096282,05e5bb2d330b755967d06fb859585c81f5f5fbb5
05e5bb2d330b755967d06fb859585c81f5f5fbb5,05e5bb2d,Dump more flash parameters for the flash_status command,"Dump more flash parameters for the flash_status command
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263095206,1263095206,d4c8895b349998e02e03ed83466a0ca7afb3d99b
d4c8895b349998e02e03ed83466a0ca7afb3d99b,d4c8895b,Add 'f' command to display flash status register contents,"Add 'f' command to display flash status register contents

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263088672,1263088672,c1334f712f01543adb10809bc1a3ca120e27290b
c1334f712f01543adb10809bc1a3ca120e27290b,c1334f71,Add at45db161d.h header file for new flash part.,"Add at45db161d.h header file for new flash part.

Forgot to add this when I added the driver.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263059704,1263059704,a0d4c1b06d27e850d233f8ddf8fe32912bf0ec8f
a0d4c1b06d27e850d233f8ddf8fe32912bf0ec8f,a0d4c1b0,Remove green LED and temp sensor from v0.2 code,"Remove green LED and temp sensor from v0.2 code

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263029381,1263029381,dc8d18736239b14c2ec48a40a01515912c5c25e6
dc8d18736239b14c2ec48a40a01515912c5c25e6,dc8d1873,Add AT45DBxx1D driver,"Add AT45DBxx1D driver

This driver supports the AT45DB011D through AT45DB321D DataFlash
parts as found in TeleMetrum v0.2

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1263028926,1263028926,3bab7e66d25988f5d63ec139c8814a85b983f8f3
3bab7e66d25988f5d63ec139c8814a85b983f8f3,3bab7e66,Remove dbg driver code from telemetrum/teledongle,"Remove dbg driver code from telemetrum/teledongle

The only board with debug outputs is the TI dongle at this point, so
the debug modules were disabled in TM and TD some time
ago. Unfortunately, the code was not removed then.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1261283538,1261283538,eddb82390a0ecb07ef83c04861993842906b03ab
eddb82390a0ecb07ef83c04861993842906b03ab,eddb8239,Ensure that ao_alarm waits at least the specified time,"Ensure that ao_alarm waits at least the specified time

Because the timer tick may happen soon, it's important to delay by
another tick to ensure that we don't wake up early.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1261265496,1261265496,598d168bd6552c3756e4b0267de44147eadab9f6
598d168bd6552c3756e4b0267de44147eadab9f6,598d168b,Disable monitor mode before attempting radio test.,"Disable monitor mode before attempting radio test.

If monitor mode is left active, then the radio lock will not be able
to be acquired for the radio test.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1261260191,1261260880,d4cf1446680d8b47396bcda338e8df7af395d102
d4cf1446680d8b47396bcda338e8df7af395d102,d4cf1446,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1261256018,1261256018,10d1bbcd9709a5eee8d50989215242b16feb7232
10d1bbcd9709a5eee8d50989215242b16feb7232,10d1bbcd,Use ao_radio_get/ao_radio_put in packet code.,"Use ao_radio_get/ao_radio_put in packet code.

The ao_radio_get function both acquires the mutex *and* configures the
radio channel and frequency. Failing to use this in the packet code
would leave the radio frequency unconfigured.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1261251256,1261251335,a15abc1882a3bdd2c980eed169f3b80337528390
a15abc1882a3bdd2c980eed169f3b80337528390,a15abc18,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1261250129,1261250129,bbb152c712801653374a8f82869e2e8bf41f7279
bbb152c712801653374a8f82869e2e8bf41f7279,bbb152c7,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1261249540,1261249540,7ac8efea5d60b81adccdc1e38ac4c13facfae7c9
7ac8efea5d60b81adccdc1e38ac4c13facfae7c9,7ac8efea,Add --cal to man page,"Add --cal to man page
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1260950309,1260950309,5481082b18226a0de6b377215b3b330bdbc4a6c6
5481082b18226a0de6b377215b3b330bdbc4a6c6,5481082b,Allow radio calibration to be set from ao-load,"Allow radio calibration to be set from ao-load

This moves the initial radio calibration value into const memory where
it will be used if no eeprom configuration value is available, either
on an unprogrammed board with eeprom or a device without an eeprom.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1260071438,1260071438,46f03ab3145a61139c8ca6fc99e8f2798728b5a9
46f03ab3145a61139c8ca6fc99e8f2798728b5a9,46f03ab3,Re-order config values. Change frequency to cal,"Re-order config values. Change frequency to cal

Place more often used values at top, and consistently call the radio
value 'calibration' instead of 'frequency'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1260056172,1260056253,bf29a62532fec12e6af2d2f3a6624882c863e933
bf29a62532fec12e6af2d2f3a6624882c863e933,bf29a625,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1260036222,1260036222,cd49847f3125df1733f298b56a43e8027ab5ce05
cd49847f3125df1733f298b56a43e8027ab5ce05,cd49847f,Add radio calibration configuration.,"Add radio calibration configuration.

The crystal we use is only good for 20ppm, which generates a fairly
significant error bounds at our RF frequency. This commit adds a
configuration variable that sets the RF frequency control variable so
that the output frequency can be adjusted.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1259998706,1259998879,c671a3f31f54715284beef5baa4a72ca922e4018
c671a3f31f54715284beef5baa4a72ca922e4018,c671a3f3,Make ao_cmd_decimal produce both 32 and 16 bit values.,"Make ao_cmd_decimal produce both 32 and 16 bit values.

ao_cmd_lex_u32 is produced in addition to ao_cmd_lex_i so that
functions can easily read 32-bit values from the command line.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1259998614,1259998879,e6d6ad66ce177eb6e49eaa04b1ecc6426f4bbdbf
e6d6ad66ce177eb6e49eaa04b1ecc6426f4bbdbf,e6d6ad66,Remove send_serial and serial_baud commands.,"Remove send_serial and serial_baud commands.

No longer useful, and they take up space.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1259998540,1259998879,ce7325cefbbe91054c1e8174cf40a6c687f6694b
ce7325cefbbe91054c1e8174cf40a6c687f6694b,ce7325ce,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1259985727,1259985727,9a1d7dd78c07d18954ef620b6ed25d6701df21e2
9a1d7dd78c07d18954ef620b6ed25d6701df21e2,9a1d7dd7,"Change default callsign to ""N0CALL""","Change default callsign to ""N0CALL""
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1259966139,1259966175,291e2004e77debdc1543912cf11043c849305de8
291e2004e77debdc1543912cf11043c849305de8,291e2004,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1259259517,1259259517,40533095a96b6c6364eebdc4b7d53c4eabe72e9a
40533095a96b6c6364eebdc4b7d53c4eabe72e9a,40533095,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1259259364,1259259364,ab1075e7219b02258c1613d93379582be4168947
ab1075e7219b02258c1613d93379582be4168947,ab1075e7,change home URL in control file to be the AltOS page,"change home URL in control file to be the AltOS page
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1259259313,1259259313,d34dcc5f3616e59ee90ed172770fe2a3eb1e0cac
d34dcc5f3616e59ee90ed172770fe2a3eb1e0cac,d34dcc5f,"fix absolute path in debian/dirs, add Suggests for slim-altusmetrum","fix absolute path in debian/dirs, add Suggests for slim-altusmetrum
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1259257207,1259257207,ea40561b36519a5dcabedabe18672b79ea5e9993
ea40561b36519a5dcabedabe18672b79ea5e9993,ea40561b,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1258910324,1258910324,d6ba07e885bdc62ba64719c9d8cc42fcecbcb09d
d6ba07e885bdc62ba64719c9d8cc42fcecbcb09d,d6ba07e8,Automatically extract flight number for eeprom and telem filenames.,"Automatically extract flight number for eeprom and telem filenames.

Extract flight number from either telemetry or eeprom files and use
that in the resulting filenames. To ensure that files remain unique,
add a new field, -seq-%03d. This is appended only when the sequence
number is non-zero as it shouldn't occur in normal usage.

This also eliminates some duplicate filename creation code in the
library and aoview sources.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258881044,1258881044,06cebd1026dc1bd6ee51526fa2d02905df3b3b37
06cebd1026dc1bd6ee51526fa2d02905df3b3b37,06cebd10,ao-postflight: don't try to use missing gps sat data,"ao-postflight: don't try to use missing gps sat data

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258879978,1258879978,a9ada1b538af3308e1b22bd024d9204521184173
a9ada1b538af3308e1b22bd024d9204521184173,a9ada1b5,ao-postflight: compute barometric alt for each GPS position,"ao-postflight: compute barometric alt for each GPS position

Print that to the --gps file, and use that in the --kml file for the
altitude. Gives a very different picture of our flight tracks,
presumably far more accurate (at least in altitude).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258870341,1258870341,b84b634d9ae8ce6ab1c02833a3ed8514404e1ca3
b84b634d9ae8ce6ab1c02833a3ed8514404e1ca3,b84b634d,Don't crash if --plot isn't passed on ao-postflight command line,"Don't crash if --plot isn't passed on ao-postflight command line

Crashing is not nice.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258870305,1258870305,2d77c18b15834046b7b79d49d87211828f2409e9
2d77c18b15834046b7b79d49d87211828f2409e9,2d77c18b,Convert telemetry file GPS satellite information in cc_log_read,"Convert telemetry file GPS satellite information in cc_log_read

The satellite info wasn't being correctly converted from telemetry
files to the data log structure, so ao-postflight was not seeing it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258866609,1258866609,1e7fb61700f1f6f2ed5fdbc4380d7187b0cd187b
1e7fb61700f1f6f2ed5fdbc4380d7187b0cd187b,1e7fb617,Fix --plot arg handling. Add -all option.,"Fix --plot arg handling. Add -all option.

The --plot file name handing is special as the library wants a
filename instead of a stdio file pointer.

Add a --all option that just creates all of the possible outputs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258866543,1258866543,199f0cecae22645140185238682b9e1aba0e5715
199f0cecae22645140185238682b9e1aba0e5715,199f0cec,Make TD print 0000-00-00 for invalid dates.,"Make TD print 0000-00-00 for invalid dates.

This 'shouldn't' happen, but in case it does, I want to know about it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258864580,1258864673,238d03462a56dc1b7c871608cb00f961a88c1b97
238d03462a56dc1b7c871608cb00f961a88c1b97,238d0346,Make ao-postflight create filenames using input filenames.,"Make ao-postflight create filenames using input filenames.

Instead of requiring the user to provide names for the various output
options, just create them from the input name by replacing the extension.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258864522,1258864673,1a3b4c02a01187f8b7b9a9c97712476d0007ab35
1a3b4c02a01187f8b7b9a9c97712476d0007ab35,1a3b4c02,Document ao-postflight --gps and --kml options.,"Document ao-postflight --gps and --kml options.

These were missing from the man page, but included in the --help output.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258861946,1258864673,80b23f3044a654d61212891a61fadb8a3a4e5572
80b23f3044a654d61212891a61fadb8a3a4e5572,80b23f30,Decode HDOP data from skytraq GPS,"Decode HDOP data from skytraq GPS

The hdop data was getting dropped on the floor, but is rather useful
when deciding if the GPS position is crazy or not. This reports HDOP *
5 (giving a useful range of .2-50).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258858665,1258864673,8f036ee7cd30ce3ed2e5cc8501914a4c19b73875
8f036ee7cd30ce3ed2e5cc8501914a4c19b73875,8f036ee7,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1258748342,1258748342,87e6f3e5c1688503ab8595912d8d6eb7139830b7
87e6f3e5c1688503ab8595912d8d6eb7139830b7,87e6f3e5,Eliminate SiRF state values from ao-view.,"Eliminate SiRF state values from ao-view.

With Skytraq not having any visible GPS state information, just
remove this from the display.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258748197,1258748197,8065b8146a31438e66f83c13b99281ec47439a73
8065b8146a31438e66f83c13b99281ec47439a73,8065b814,Add GPS date/time output to ao-postflight.,"Add GPS date/time output to ao-postflight.

GPS date/time information was already being stored in the log, it just
wasn't getting displayed by ao-postflight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258747008,1258747819,6894541e0ee144bfc689cc02d4ed333711d3b500
6894541e0ee144bfc689cc02d4ed333711d3b500,6894541e,Reduce igniter firing time from 500ms to 50ms.,"Reduce igniter firing time from 500ms to 50ms.

Given that the system will brown-out with the longer pulse, it doesn't
make sense to even try; failure at 50ms probably indicates a short.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258746928,1258747819,b75aa1c825b84bd7fa1578320fbc7e904c373a7d
b75aa1c825b84bd7fa1578320fbc7e904c373a7d,b75aa1c8,fix typo in comment,"fix typo in comment
",,,,Bdale Garbee,bdale@gag.com,Keith Packard,keithp@keithp.com,1258692193,1258747819,c2f661b75ec035f6a3f700962290ef297f9ab0af
c2f661b75ec035f6a3f700962290ef297f9ab0af,c2f661b7,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1258742646,1258742646,b0d7e3f9c9322542e9b649bb6ad7f7e5bb99dffa
b0d7e3f9c9322542e9b649bb6ad7f7e5bb99dffa,b0d7e3f9,Stop using SiRF state info.,"Stop using SiRF state info.

With the switch to the skytraq GPS unit, we don't have the same level
of detail in the GPS stream, so stop reporting that in the telemetry
stream, in the UI and writing it to eeprom.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258330818,1258330818,524665fc221b0d483453c67b7211e282cebc8980
524665fc221b0d483453c67b7211e282cebc8980,524665fc,"Add date to GPS data, captured from GPRMC packet.","Add date to GPS data, captured from GPRMC packet.

Pull the date out of the GPS stream and send it over the telemetry
link and write it to the eeprom.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258329881,1258330792,3ee279ba76c2a79d142c466f19ef758cf4c01d70
3ee279ba76c2a79d142c466f19ef758cf4c01d70,3ee279ba,Add flight number to telemetry stream.,"Add flight number to telemetry stream.

This makes it easier to tie the telemetry and eeprom files together as
they're now both labeled with serial and flight numbers, which should
be unique.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258329541,1258329541,6391c89bd5b89f5f46255b8365c658a873e5959a
6391c89bd5b89f5f46255b8365c658a873e5959a,6391c89b,Switch order of serial/flight in ao-postflight summary,"Switch order of serial/flight in ao-postflight summary
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258329181,1258329181,9b06e294e2777f69bcf5e98789c3f5477097d53b
9b06e294e2777f69bcf5e98789c3f5477097d53b,9b06e294,Enable telemetry receive in ao_view,"Enable telemetry receive in ao_view
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258329118,1258329118,4cffc9c4b079e39c8196ddbaf91129cda6df7f8b
4cffc9c4b079e39c8196ddbaf91129cda6df7f8b,4cffc9c4,Share telemetry parsing code in cc library.,"Share telemetry parsing code in cc library.

ao-view had a private copy of the telemetry parsing code which
included the ability to parse the newer version of that file. Those
changes have been moved to the library version and the private copy removed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258266277,1258266277,0e0db8ca3af4c07bae909938486766c646bf580b
0e0db8ca3af4c07bae909938486766c646bf580b,0e0db8ca,Provide a dummy 'uninstall' target in the src directory.,"Provide a dummy 'uninstall' target in the src directory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258266249,1258266249,1c654a9369294c9b8066c33f91161d8005b96680
1c654a9369294c9b8066c33f91161d8005b96680,1c654a93,Loosen tolerances for main->landed transition,"Loosen tolerances for main->landed transition

Detecting that the rocket has landed is required for the system to
flush the eeprom log and re-enable the RDF beacon. This patch changes
the landed state entry requirements for the accelerometer to require
only that the accelerometer stay within a quarter of a g (down from
1/10g) and changes the testing interval from 20 seconds to 5
seconds.

The requirement that the barometric altitude be within 1000m of the
launch altitude and that the barometer change by no more than 0.05kPa
are unchanged.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258265844,1258265844,03092d1a72a9651711e22c58dca6d6aba5705c5e
03092d1a72a9651711e22c58dca6d6aba5705c5e,03092d1a,ao-postflight: fix sloppy gps sat data realloc code (was crashing).,"ao-postflight: fix sloppy gps sat data realloc code (was crashing).

Realloc'ing the wrong data, and failing to set the realloc'ed size was
causing ao-postflight to crash while reading long logs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1258245312,1258245312,adf656192441eb7f44792955c86e469145477e29
adf656192441eb7f44792955c86e469145477e29,adf65619,Return radio to telemetry settings when packet system closed.,"Return radio to telemetry settings when packet system closed.

To receive telemetry after disabling the packet system, the radio must
be reconfigured for telemetry mode.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257487919,1257487919,83afdbdc154fe013bfe35ce5ecf1d61570b04ed6
83afdbdc154fe013bfe35ce5ecf1d61570b04ed6,83afdbdc,Add reboot command.,"Add reboot command.

This resets the processor using the watchdog timer.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257486300,1257486300,0358988ac0ee25a564d48af79b1c3fb0c0fe0a88
0358988ac0ee25a564d48af79b1c3fb0c0fe0a88,0358988a,Add Watchdog Timer Control register definitions,"Add Watchdog Timer Control register definitions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257486271,1257486287,4114210e0b813f4af99d0cb7755ad2ac2c4b120e
4114210e0b813f4af99d0cb7755ad2ac2c4b120e,4114210e,Move ao_match_word from ao_ignite.c to ao_cmd.c,"Move ao_match_word from ao_ignite.c to ao_cmd.c

This is a generally useful command line utility.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257486201,1257486201,5a79a04ddb0b3ee64de34e366f71a0f6db509c01
5a79a04ddb0b3ee64de34e366f71a0f6db509c01,5a79a04d,Stop recording in ao-dumplog after receiving an invalid block,"Stop recording in ao-dumplog after receiving an invalid block

If no samples in a block are valid, assume the flight log is over.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257400791,1257400791,843ee489aac34ad6d81f55f1c85fb9eecc42d86b
843ee489aac34ad6d81f55f1c85fb9eecc42d86b,843ee489,Flush pending input when switching to remote packet mode,"Flush pending input when switching to remote packet mode

Any pending input would just confuse the application, so pull it off
the link and dump it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257400752,1257400752,036400a2db303f3db3be7cc0426f88359c6bd2b1
036400a2db303f3db3be7cc0426f88359c6bd2b1,036400a2,Explicitly use USB I/O routines in packet code,"Explicitly use USB I/O routines in packet code

Using the implicit stdio functions (putchar/getchar/flush) would
result in essentially random redirection of each, depending on whether
the packet code had characters available when getchar was called. This
would cause lockups in putchar.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257399771,1257399771,3ece984f4d72b4f720a5efdfaad7cff77a93d676
3ece984f4d72b4f720a5efdfaad7cff77a93d676,3ece984f,"In USB pollchar, wait for packet before re-checking USB out len","In USB pollchar, wait for packet before re-checking USB out len

This probably wouldn't actually cause a problem, but it seems more
reliable to wait for a packet interrupt before re-reading the packet
OUT len register. This could avoid spinning while waiting for a USB
packet, which seems like a good thing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257399127,1257399127,bc62bb254085cc705203b57260c04ac5e14c6611
bc62bb254085cc705203b57260c04ac5e14c6611,bc62bb25,"In packet master, move USB flush from packet thread to echo thread","In packet master, move USB flush from packet thread to echo thread

This keeps the packet thread from blocking on USB and also makes the
flush happen after every packet (slightly more USB traffic, but
packets are slow anyway).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257398977,1257398977,27ebaf8e13aed06bb1ea6e770f767495a02be6c5
27ebaf8e13aed06bb1ea6e770f767495a02be6c5,27ebaf8e,Add ability to dump eeprom data over radio link.,"Add ability to dump eeprom data over radio link.

This adds a '-R' option to ao-dumplog to redirect the connection
through a USB attached TeleDongle over the radio link to a remote
TeleMetrum device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257240457,1257240457,1de322b960005c9a16051afa1881fadb00f4bcd6
1de322b960005c9a16051afa1881fadb00f4bcd6,1de322b9,Pass accel calibration over telemetry stream. Telemetry data format change.,"Pass accel calibration over telemetry stream. Telemetry data format change.

This allows the ground station to convert the accelerometer sensor
values into acceleration and speed data. This requires a new telemetry
data structure, and so TeleMetrum and TeleDongle units must be updated
synchronously. ao-view will parse either telemetry stream, and the
serial format from TeleDongle now has a version number to allow for
future changes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257237638,1257237638,b529e5e8998702986909111a457f3ce9932e1ccf
b529e5e8998702986909111a457f3ce9932e1ccf,b529e5e8,ao_flight_test was using accel value for pressure too,"ao_flight_test was using accel value for pressure too
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257234509,1257234701,f57bea012d4fbca097df0d98fcd30eb4abd9701a
f57bea012d4fbca097df0d98fcd30eb4abd9701a,f57bea01,Reformat ADC values to show all 16 bits,"Reformat ADC values to show all 16 bits
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257227261,1257234701,79718e798e96567f0ba11c61f187e432fdcf95ee
79718e798e96567f0ba11c61f187e432fdcf95ee,79718e79,"Remove ""f"" command","Remove ""f"" command
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257227296,1257234701,a4137263b69864c524d39c6ff88a0225fd06e79b
a4137263b69864c524d39c6ff88a0225fd06e79b,a4137263,"Remove ""d"" command","Remove ""d"" command
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257227235,1257234701,47f510464907d2b9488109c96ade87a41d878842
47f510464907d2b9488109c96ade87a41d878842,47f51046,"Remove ""l"" command as ao-dumplong no longer uses it","Remove ""l"" command as ao-dumplong no longer uses it
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257227199,1257234701,144db05f6b286a0450d486f69ce192632a2c0656
144db05f6b286a0450d486f69ce192632a2c0656,144db05f,Add two-point accelerometer calibration.,"Add two-point accelerometer calibration.

Calibration now uses two values, one upside right and the other upside
down instead of a single horizontal value. This allows the use of
other accelerometers and compensates for variations in the divider
circuit to provide more accurate data.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257226698,1257234701,17611788aadc9460287145a340a7c18bf63766aa
17611788aadc9460287145a340a7c18bf63766aa,17611788,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1257206046,1257206046,7db9d86178ecfd58cc1c17ac9fcbdcfd2f13aaec
7db9d86178ecfd58cc1c17ac9fcbdcfd2f13aaec,7db9d861,Merge remote branch 'origin/master',"Merge remote branch 'origin/master'
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257205660,1257205660,"b219801fb0e5eaff7778d21701da977104522da3,f9de20000794c97a04d5bc2476191864bd2af371"
b219801fb0e5eaff7778d21701da977104522da3,b219801f,Add ao_usb_pollchar to ao.h,"Add ao_usb_pollchar to ao.h
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257205558,1257205558,b92333ff5e75bf96804359e9fbf464d3b518bd95
b92333ff5e75bf96804359e9fbf464d3b518bd95,b92333ff,Disable interrupts while removing tasks from task list,"Disable interrupts while removing tasks from task list
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257205542,1257205542,d519564fd08d2defe1211de83ccbdfa3c7cfe702
d519564fd08d2defe1211de83ccbdfa3c7cfe702,d519564f,Add more docs to the README file,"Add more docs to the README file
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257205507,1257205507,0b483233118673cbc2cda1be6acd379df82bc95a
f9de20000794c97a04d5bc2476191864bd2af371,f9de2000,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1257202811,1257202811,127c3125e5a4b86b8f304bc2889e313688c3d83e
127c3125e5a4b86b8f304bc2889e313688c3d83e,127c3125,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1257202752,1257202752,6b1e77569e2fed3c44606ed268421df5d3ed4020
6b1e77569e2fed3c44606ed268421df5d3ed4020,6b1e7756,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1257202661,1257202661,8203bfa58af32a1d07a44c1c151b200df0b65f15
8203bfa58af32a1d07a44c1c151b200df0b65f15,8203bfa5,de-version the libreadline-dev build dependency,"de-version the libreadline-dev build dependency
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1257202602,1257202602,550482d953c491a5ede9f2d243493afb13289898
0b483233118673cbc2cda1be6acd379df82bc95a,0b483233,Merge remote branch 'origin/master' into skytraq,"Merge remote branch 'origin/master' into skytraq
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257137942,1257137942,"ca5d323a3d206050d95f52a61e92c69e1f54e7b5,550482d953c491a5ede9f2d243493afb13289898"
ca5d323a3d206050d95f52a61e92c69e1f54e7b5,ca5d323a,Enable packet-based communcation to command processor,"Enable packet-based communcation to command processor

This splits the packet code into master/slave halves and hooks the
slave side up to the getchar/putchar/flush logic in ao_stdio.c

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1257137823,1257137823,6c1a9ce16b966a21c885bf3be31cbcb85368b3fa
6c1a9ce16b966a21c885bf3be31cbcb85368b3fa,6c1a9ce1,No need to wakeup &ao_tick_count now,"No need to wakeup &ao_tick_count now
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256977822,1256977822,cd0d495d7ef276956e730196476daa70a4359918
cd0d495d7ef276956e730196476daa70a4359918,cd0d495d,Poke master to speed up packet rate when things are busy,"Poke master to speed up packet rate when things are busy
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256977226,1256977226,442b1ef18c8320d4e5329dc92bb5268a36058fc5
442b1ef18c8320d4e5329dc92bb5268a36058fc5,442b1ef1,Use ao_alarm for ao_delay so it can be easily interrupted,"Use ao_alarm for ao_delay so it can be easily interrupted
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256977181,1256977181,4f7ed9ff484778381db647c27d2a34d0cadec41e
4f7ed9ff484778381db647c27d2a34d0cadec41e,4f7ed9ff,Do more flushing in packet test code,"Do more flushing in packet test code
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256971983,1256971983,6a7aa1810a90a9216160aec55ec4bd02b3240e1b
6a7aa1810a90a9216160aec55ec4bd02b3240e1b,6a7aa181,Add RFIM register,"Add RFIM register
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256971964,1256971964,bf65e0b2a1299b49adc2d339ab9d9c7599aded9e
bf65e0b2a1299b49adc2d339ab9d9c7599aded9e,bf65e0b2,Send SYN packet to set sequence numbers,"Send SYN packet to set sequence numbers
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256971942,1256971942,d46797e5c08d4955d516458185e2cfb51ee2d567
d46797e5c08d4955d516458185e2cfb51ee2d567,d46797e5,Use ao_radio_done to wait for TX to completely finish with packet,"Use ao_radio_done to wait for TX to completely finish with packet
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256971898,1256971898,c5ec6fcfa1bd17aad0f85d2fbe603f1d125836e6
c5ec6fcfa1bd17aad0f85d2fbe603f1d125836e6,c5ec6fcf,Switch packet code from timer thread to ao_alarm,"Switch packet code from timer thread to ao_alarm
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256971854,1256971854,b428faf74ae145126ec1da972028fcfe0b4b2b18
b428faf74ae145126ec1da972028fcfe0b4b2b18,b428faf7,Remove reason from ao_dma_abort,"Remove reason from ao_dma_abort
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256971716,1256971716,73db30b2f9128c37dc7fa075793a8862814ce044
73db30b2f9128c37dc7fa075793a8862814ce044,73db30b2,Add ao_alarm,"Add ao_alarm
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256971581,1256971581,251b0971f049cbf2f8db79a32729d47441ce65f3
251b0971f049cbf2f8db79a32729d47441ce65f3,251b0971,Wait for TX to finish sending data,"Wait for TX to finish sending data
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256971543,1256971543,9b31f07fe3556896b3e997bba156e30ef5777a80
9b31f07fe3556896b3e997bba156e30ef5777a80,9b31f07f,Add radio carrier command,"Add radio carrier command
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256971432,1256971432,7b14c3e609749f4fc00dbd660541375048535218
7b14c3e609749f4fc00dbd660541375048535218,7b14c3e6,Initial packet bits. Just testing transmission,"Initial packet bits. Just testing transmission
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256945955,1256945955,690fc263516d8beb6b24e86fbcd6588f42ce4e5c
690fc263516d8beb6b24e86fbcd6588f42ce4e5c,690fc263,Add keyhole-markup generation for ao-postflight.,"Add keyhole-markup generation for ao-postflight.

This lets you see the flight path in googleearth.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1256113129,1256113129,b657aa209b9ea3b3efd33a940283b3ba60a169af
b657aa209b9ea3b3efd33a940283b3ba60a169af,b657aa20,Add ao_wake_task and ao_exit,"Add ao_wake_task and ao_exit

ao_wake_task signals a specific task to wake up.
ao_exit terminates the current task.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255665593,1255665593,d709a0688eff84e25e24d755850ef045d6b0c3de
d709a0688eff84e25e24d755850ef045d6b0c3de,d709a068,Save some DSEG space by marking cmd functions __reentrant,"Save some DSEG space by marking cmd functions __reentrant

__reentrant causes the compiler to place args and locals on the stack
instead of in the data segment.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255665405,1255665405,69b6f6bb465163cf767bb68e0e4a716d8ad2b39c
550482d953c491a5ede9f2d243493afb13289898,550482d9,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255388326,1255388326,2de548f45d0f50b558acc83f57e1e2fc1223ab92
2de548f45d0f50b558acc83f57e1e2fc1223ab92,2de548f4,"oops, forgot to specify the repo to push to","oops, forgot to specify the repo to push to
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255388299,1255388299,68008ac11c2735ca53a1b474324df43f2f1d5cdd
68008ac11c2735ca53a1b474324df43f2f1d5cdd,68008ac1,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255388253,1255388253,513328ac5f7c25f9ee144ab6befbea60d69eed1a
513328ac5f7c25f9ee144ab6befbea60d69eed1a,513328ac,automate push of updated and tagged master branch during debian/rules prebuild,"automate push of updated and tagged master branch during debian/rules prebuild
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255388210,1255388210,67bf7d388a6dd2dbf65575bf4f0423ad355b4f2f
67bf7d388a6dd2dbf65575bf4f0423ad355b4f2f,67bf7d38,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255388084,1255388084,23bc21a93ccb9f35917f283ac5df6ce0870df71a
23bc21a93ccb9f35917f283ac5df6ce0870df71a,23bc21a9,undue damage from partial build,"undue damage from partial build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255388056,1255388056,7da56ad8576ef212ffb6cb573bdaf578453e3fe0
7da56ad8576ef212ffb6cb573bdaf578453e3fe0,7da56ad8,add support for tagging git repository on each Debian package build,"add support for tagging git repository on each Debian package build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255387972,1255387972,8d4aa4ee54f85f4951cdd7293d58aaa405cfcdc5
8d4aa4ee54f85f4951cdd7293d58aaa405cfcdc5,8d4aa4ee,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255387774,1255387774,241a860fe856b1dfad6e792736313648300d5c24
241a860fe856b1dfad6e792736313648300d5c24,241a860f,"flush repetitive junk out of debian/changelog, and update the prebuild target","flush repetitive junk out of debian/changelog, and update the prebuild target
in debian/rules to put git commit details into the Debian changelog
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255387723,1255387723,6c4cdc927b43736b39be29d23ac3dc723f69e4d6
6c4cdc927b43736b39be29d23ac3dc723f69e4d6,6c4cdc92,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255384639,1255384639,c57bd7fd2f80e50b0b4c87fccb024ab07c93773d
c57bd7fd2f80e50b0b4c87fccb024ab07c93773d,c57bd7fd,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255384628,1255384628,"adf8764bc4591795ba4e618ccbd6393fc6ce6450,2b765728ce177e26899f6feef00bfdf6aeaf2678"
69b6f6bb465163cf767bb68e0e4a716d8ad2b39c,69b6f6bb,Merge branch 'master' into skytraq,"Merge branch 'master' into skytraq
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255220181,1255220181,"bc77da68c9cb7d4cca483eadbbb7e9ccf71c0060,2b765728ce177e26899f6feef00bfdf6aeaf2678"
2b765728ce177e26899f6feef00bfdf6aeaf2678,2b765728,Add apogee igniter delay.,"Add apogee igniter delay.

Provide for a delay after apogee before the drogue charge is
fired. This allows TM to be used as a back-up altimeter.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255220138,1255220138,8f7ea3de7037f40b0ff462b60d503c19431ae62b
bc77da68c9cb7d4cca483eadbbb7e9ccf71c0060,bc77da68,Merge branch 'master' into skytraq,"Merge branch 'master' into skytraq
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255212588,1255212588,"46cccf62fb40514b5930fcb2ffdaf2735415c764,8f7ea3de7037f40b0ff462b60d503c19431ae62b"
8f7ea3de7037f40b0ff462b60d503c19431ae62b,8f7ea3de,Report igniter continuity in pad/idle mode via beeper,"Report igniter continuity in pad/idle mode via beeper

one short beep = drogue
two short beeps = main
three short beeps = both
one long warble = neither

In idle mode, it does this just once. In pad mode, it keeps testing
and reporting.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255212494,1255212494,5f26ad663b3f60dddc9d967206e365f45dc4acd1
adf8764bc4591795ba4e618ccbd6393fc6ce6450,adf8764b,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255209083,1255209083,541da6f3bbf81be93dfe3c01f7c8cfd757b28a2b
541da6f3bbf81be93dfe3c01f7c8cfd757b28a2b,541da6f3,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1255208750,1255208750,"dfc73cba1bee8b121e00e8cba45e7dfaaf79e9d8,5f26ad663b3f60dddc9d967206e365f45dc4acd1"
46cccf62fb40514b5930fcb2ffdaf2735415c764,46cccf62,Merge branch 'master' into skytraq,"Merge branch 'master' into skytraq
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255208403,1255208403,"fb8f3fee6a1bab1e46d782e84405845cee2dadb4,5f26ad663b3f60dddc9d967206e365f45dc4acd1"
5f26ad663b3f60dddc9d967206e365f45dc4acd1,5f26ad66,"ao-dumplog: switch to 'e' command, display progress","ao-dumplog: switch to 'e' command, display progress

Using the 'e' command allows additional checking of the data,
including end-to-end checksums and detection of missing data.

Progress is displayed by showing the recorded flight state along with
a '.' for each eeprom block read.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255208296,1255208296,b8fc3975bd92037a0cf53b0ff2b0e05ce0ba668f
fb8f3fee6a1bab1e46d782e84405845cee2dadb4,fb8f3fee,Merge branch 'master' into skytraq,"Merge branch 'master' into skytraq
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255207260,1255207260,"22856cf8bb0f5e1f37c9b774132d9ef6934526ed,b8fc3975bd92037a0cf53b0ff2b0e05ce0ba668f"
b8fc3975bd92037a0cf53b0ff2b0e05ce0ba668f,b8fc3975,Send 0-length IN packet to flush USB after full packet,"Send 0-length IN packet to flush USB after full packet

USB bulk transfers are a sequence of maximum-sized packets followed by
a short packet, which signals the end of the transfer. When the last
packet of the transfer would be a full-sized packet, an additional
packet of zero length is sent to signal the transfer end.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255207141,1255207141,e29961fdb2a48874c895829880eadbf13e094c0c
22856cf8bb0f5e1f37c9b774132d9ef6934526ed,22856cf8,Merge branch 'master' into skytraq,"Merge branch 'master' into skytraq
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255200260,1255200260,"2f7603490a169df8f18b565db4fa967832ffc9bd,e29961fdb2a48874c895829880eadbf13e094c0c"
e29961fdb2a48874c895829880eadbf13e094c0c,e29961fd,Add channel menu to ao-view.,"Add channel menu to ao-view.

Sets radio channel when TD is connected, saves selected channel in
gconf database.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255200211,1255200211,a3771bfc5ce740f9d89193e9f8b1d7987aa57264
2f7603490a169df8f18b565db4fa967832ffc9bd,2f760349,"Build two versions of TM, one for SiRF, one for SkyTraq","Build two versions of TM, one for SiRF, one for SkyTraq

This creates two separate images, depending on which GPS unit is
connected.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255153709,1255153709,33b0b6f2f2e07de105619a7b463226d2813152ab
33b0b6f2f2e07de105619a7b463226d2813152ab,33b0b6f2,Add support for the SkyTraq GPS unit,"Add support for the SkyTraq GPS unit

This is a build-time option selected by hacking the Makefile at present.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1255150960,1255150960,a3771bfc5ce740f9d89193e9f8b1d7987aa57264
a3771bfc5ce740f9d89193e9f8b1d7987aa57264,a3771bfc,ao-view: fix snd_pcm_open return checking,"ao-view: fix snd_pcm_open return checking

I don't know how this code was supposed to work before...

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1254884760,1254884760,ac4b8a73848f434999a532eab4665253c267c597
ac4b8a73848f434999a532eab4665253c267c597,ac4b8a73,ao-postflight: dump out GPS signal data,"ao-postflight: dump out GPS signal data

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1254884736,1254884736,74f0fb4dd189abc1d5027c64fa5a648a6003285a
dfc73cba1bee8b121e00e8cba45e7dfaaf79e9d8,dfc73cba,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1253598419,1253598419,459ff3d377297f80ee2fba0df0a29ff6603467a1
459ff3d377297f80ee2fba0df0a29ff6603467a1,459ff3d3,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1253556032,1253556032,327c64305a59f48ababf19875874a550af6b9cef
327c64305a59f48ababf19875874a550af6b9cef,327c6430,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1253556022,1253556022,"c8a81a419f7f2331624f90bd6c107a86f6b04451,74f0fb4dd189abc1d5027c64fa5a648a6003285a"
74f0fb4dd189abc1d5027c64fa5a648a6003285a,74f0fb4d,make bit-banging reset script actually reset,"make bit-banging reset script actually reset
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1253478839,1253478839,7ea371a09385e2a93199f78685e8cb86793ed104
7ea371a09385e2a93199f78685e8cb86793ed104,7ea371a0,Add --gps option to ao-postflight,"Add --gps option to ao-postflight
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1253478806,1253478806,bc7ccb339e538a0e6120db0e5c0d9130c565e0dd
bc7ccb339e538a0e6120db0e5c0d9130c565e0dd,bc7ccb33,ao_rawload: Don't reset after we finish loading,"ao_rawload: Don't reset after we finish loading
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1253478779,1253478779,078e9cdbdb388b22c6151f76ff0660fc14b8ef55
c8a81a419f7f2331624f90bd6c107a86f6b04451,c8a81a41,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1253460060,1253460060,df42ccaaf468cdc5d93cbd1c001f58df58419722
df42ccaaf468cdc5d93cbd1c001f58df58419722,df42ccaa,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1253459968,1253459968,"0b24e4034f93010372a3d084668d10f0e4a2c2e1,078e9cdbdb388b22c6151f76ff0660fc14b8ef55"
078e9cdbdb388b22c6151f76ff0660fc14b8ef55,078e9cdb,Plot raw accel data for the motor accel section.,"Plot raw accel data for the motor accel section.

This shows a short sequence of accelerometer data without any filtering.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252608786,1252608786,8b485d937ff148848ebda7f9ca6be29bb1de1f16
8b485d937ff148848ebda7f9ca6be29bb1de1f16,8b485d93,Show acceleration only during boost phase.,"Show acceleration only during boost phase.

We're interested in motor performance; the rest of the flight is
boring, after all.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252296168,1252296168,9e660315e1bd2bf71ab1c0574e895e1f7608a58f
9e660315e1bd2bf71ab1c0574e895e1f7608a58f,9e660315,Fix cc_period_make to not get stuck on samples with matching time,"Fix cc_period_make to not get stuck on samples with matching time

When two samples have matching times, step to the second one;
otherwise, we'll get stuck forever.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252296104,1252296104,932f1539b38567e565fd484171c13539b1467308
932f1539b38567e565fd484171c13539b1467308,932f1539,"Color plots, integrate only flight portion of data.","Color plots, integrate only flight portion of data.

Telemetry files have piles of pad data which shouldn't be integrated
into the velocity data as it tends to generate huge values from the
noise of the sensor.

Also make the data lines colored to keep them visually distinct from
the rest of the plot image.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252293977,1252293977,9177f5f4e9d832558ddd9ab227c4511f6201e7e5
9177f5f4e9d832558ddd9ab227c4511f6201e7e5,9177f5f4,Update usage and man page for ao-postflight,"Update usage and man page for ao-postflight
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252285884,1252285884,2e6686b1e183c66188ea447b8a54e4c29402443b
0b24e4034f93010372a3d084668d10f0e4a2c2e1,0b24e403,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252281680,1252281680,a5e94aa0677070a051714443cf7fd7e2b5e90269
a5e94aa0677070a051714443cf7fd7e2b5e90269,a5e94aa0,need a run-time dependency to pull in the cairo module,"need a run-time dependency to pull in the cairo module
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252281587,1252281587,97acef95cc9843998963921459fdd71dd7eaa6b4
97acef95cc9843998963921459fdd71dd7eaa6b4,97acef95,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252280903,1252280903,3f95a5abbf8ada70328ced45fbb2781ed1cb3d29
3f95a5abbf8ada70328ced45fbb2781ed1cb3d29,3f95a5ab,more build deps for plotting lib,"more build deps for plotting lib
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252280890,1252280890,9d7e96e323d652de08b2f2a73e0eb3c321080185
9d7e96e323d652de08b2f2a73e0eb3c321080185,9d7e96e3,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252280876,1252280876,ae4e131b61244e06020b82919e31e05dd7dba88f
ae4e131b61244e06020b82919e31e05dd7dba88f,ae4e131b,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252280799,1252280799,37e6c9a492a1d51373bf9333fb3172e0c377720f
37e6c9a492a1d51373bf9333fb3172e0c377720f,37e6c9a4,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252280770,1252280770,"d256f8204e9fce53ae4309562bb4c0cde1fae43e,2e6686b1e183c66188ea447b8a54e4c29402443b"
2e6686b1e183c66188ea447b8a54e4c29402443b,2e6686b1,Use plplotd instead of plplotd-gnome2,"Use plplotd instead of plplotd-gnome2
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252280747,1252280747,32d3536706324808df6cd02248a236302b831571
d256f8204e9fce53ae4309562bb4c0cde1fae43e,d256f820,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252280048,1252280048,"0fc344dfc031a8b1eef7cc40efb1d5ba7782269d,32d3536706324808df6cd02248a236302b831571"
32d3536706324808df6cd02248a236302b831571,32d35367,Add plots to ao-postflight using the plplot library,"Add plots to ao-postflight using the plplot library

It's not perfect, but it generates .svg plot output.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252279475,1252279475,d0eac989b1ffc8ae30ba12da403eb4bf1ad42d6b
0fc344dfc031a8b1eef7cc40efb1d5ba7782269d,0fc344df,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252268157,1252268157,4b0de757874c0ecaf38e3dfd3beefc398150e3d5
4b0de757874c0ecaf38e3dfd3beefc398150e3d5,4b0de757,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252268153,1252268153,"773c4ffbc1d2e02eb02cfa543a077a408986da30,d0eac989b1ffc8ae30ba12da403eb4bf1ad42d6b"
d0eac989b1ffc8ae30ba12da403eb4bf1ad42d6b,d0eac989,Don't look at NULL strings (summary_name),"Don't look at NULL strings (summary_name)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252268110,1252268110,73f4a57239f770aff603b961169c0e2cfe2c276b
73f4a57239f770aff603b961169c0e2cfe2c276b,73f4a572,Use pressure speed for drogue and beyond states. Fix differentiation time.,"Use pressure speed for drogue and beyond states. Fix differentiation time.

Drogue state should always use pressure speeds.

Differentiation code was using centi-seconds instead of seconds.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252267734,1252267734,e35e485ffe6b26034788ab295121bc2693b7eec1
773c4ffbc1d2e02eb02cfa543a077a408986da30,773c4ffb,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252267555,1252267555,45ede4a4b203ef9da5bf05c49cb9c5a2e6382ec5
45ede4a4b203ef9da5bf05c49cb9c5a2e6382ec5,45ede4a4,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252267551,1252267551,"45e2938121411d1fc9b3aec3fdeaaeb3c90db5ed,e35e485ffe6b26034788ab295121bc2693b7eec1"
e35e485ffe6b26034788ab295121bc2693b7eec1,e35e485f,Initialize summary_name and detail_name so stuff appears on stdout.,"Initialize summary_name and detail_name so stuff appears on stdout.

Uninitialized variables lead to mysterious results.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252267471,1252267471,7a19aac5e881e635962a64fff73027ca2143b96f
45e2938121411d1fc9b3aec3fdeaaeb3c90db5ed,45e29381,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252267334,1252267334,d42ebf0661ecf15455e5051de1e16ae66f8dd857
d42ebf0661ecf15455e5051de1e16ae66f8dd857,d42ebf06,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252267329,1252267329,"384dbe9fc7fa8e4e5dceec5e150f0f1d3383bbdc,7a19aac5e881e635962a64fff73027ca2143b96f"
7a19aac5e881e635962a64fff73027ca2143b96f,7a19aac5,"Add DSP code to filter data, allowing for integration/differentiation","Add DSP code to filter data, allowing for integration/differentiation

This adds the computation of speed from both accelerometer and
barometer measurements and then presents a periodic flight profile
using filtered data as a detailed flight record.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252266708,1252266708,6d018ab933832e2d80bb1564c339d9fb18b57be2
384dbe9fc7fa8e4e5dceec5e150f0f1d3383bbdc,384dbe9f,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252255206,1252255206,35c54b3a278fa9bc2bc7f4b5ee04866697c93ba0
35c54b3a278fa9bc2bc7f4b5ee04866697c93ba0,35c54b3a,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252255163,1252255163,"4f8eff7401ee2d8092ab36fa33411f9b23dda880,6d018ab933832e2d80bb1564c339d9fb18b57be2"
6d018ab933832e2d80bb1564c339d9fb18b57be2,6d018ab9,Handle vageries of .telem files in ao-postflight,"Handle vageries of .telem files in ao-postflight

Telem files have multiple entries of the same state, and sometimes
long gaps between recordings. Deal with this as best as possible.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252215949,1252215949,c46e832b28820d7c5be4efaacbbd7c0607927fe5
c46e832b28820d7c5be4efaacbbd7c0607927fe5,c46e832b,Add simple post-flight analysis tool (ao-postflight),"Add simple post-flight analysis tool (ao-postflight)

This tool reads either an eeprom or telem log file and displays some
rudimentary data (max accel/alt for each flight stage).

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252213411,1252213411,26f56b51bd11aa91f1d77b81827b49c28cb6ec5f
26f56b51bd11aa91f1d77b81827b49c28cb6ec5f,26f56b51,Add ao-dumplog to capture flight log from command line,"Add ao-dumplog to capture flight log from command line

This duplicates the functionality of the flight log stuf in ao-view,
except from the command line where it belongs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252135766,1252135766,73adae3661160d410dcc802873b530d255c210e5
73adae3661160d410dcc802873b530d255c210e5,73adae36,Add --device/-D support to the command line tools and manuals,"Add --device/-D support to the command line tools and manuals

Use the new cc_usbdevs_find_by_arg function to locate suitable target
devices connected via USB.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252103422,1252103422,332b056459b1352e233a8bf5f08498df12d32160
4f8eff7401ee2d8092ab36fa33411f9b23dda880,4f8eff74,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1252101835,1252101835,332b056459b1352e233a8bf5f08498df12d32160
332b056459b1352e233a8bf5f08498df12d32160,332b0564,'fix' ao-eeprom to read two blocks at once. Work around kernel bugs.,"'fix' ao-eeprom to read two blocks at once. Work around kernel bugs.

The kernel appears to leave serial data undelivered at times. Reading
two blocks at once appears to make it relinquish the queued data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252101692,1252101692,df88ae4c5f229efcc0ea5cb0a81fc2bb8f96fea2
df88ae4c5f229efcc0ea5cb0a81fc2bb8f96fea2,df88ae4c,Add 'ao-list' utility to show attached AltOS devices,"Add 'ao-list' utility to show attached AltOS devices

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252099382,1252099382,0935d6a7e907e20381a42882ae728051f9bece02
0935d6a7e907e20381a42882ae728051f9bece02,0935d6a7,Parse the USB serial number as an integer.,"Parse the USB serial number as an integer.

AltOS devices use simple integer serial numbers, so parse the USB
value as such to make matching values more forgiving.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252099279,1252099279,0c771d999914f9d17c723900f2987acc45fd0fbb
0c771d999914f9d17c723900f2987acc45fd0fbb,0c771d99,Move usb scanning code to ao-tools library,"Move usb scanning code to ao-tools library

This will allow the scanning code to be used by the command line tools
as well as the ao-view GUI.

Now that ao-view depends on the ao-tools library, it has been moved to
the ao-tools directory as well.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252094402,1252094402,15341b6e6dcf52df083d6aa37ef881ea6ad48ee5
15341b6e6dcf52df083d6aa37ef881ea6ad48ee5,15341b6e,Set all of the values to reset the radio for telemetry,"Set all of the values to reset the radio for telemetry

Was sizeof(rdf_setup) instead of sizeof(telemetry_setup) when
resetting the radio back to telemetry data mode from rdf mode. With
the length value removed from the rdf config, these two arrays are no
longer the same length, and so the last config value was not set
leaving the radio sending garbage.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252092337,1252092337,fee46389b70a624ab5b1128a8b4c3083c7747bcb
fee46389b70a624ab5b1128a8b4c3083c7747bcb,fee46389,Make RDF beacon only run on pad and after landing.,"Make RDF beacon only run on pad and after landing.

It's pretty much impossible to RDF the rocket during flight, and it
interferes with the telemetry data stream. Leave it enabled on the pad
so that radios can be tested, and then re-enable it once the rocket
has landed.

This patch also turns the rdf 'on' time into a parameter so it can be
changed, and then sets that parameter to 500ms, once every 5 seconds.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252090015,1252090015,54545640b0db7747137655f84bc67fd290ecb904
54545640b0db7747137655f84bc67fd290ecb904,54545640,Add back the RDF tone generator,"Add back the RDF tone generator

Tracking the rocket on the ground may be easier using tones than using
the digital data stream, so we'll try that and see what we think.

This reverts commit 3a3bfd471a868d546d83cdc431b53c8f5208edb9.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1252089952,1252089952,9fafee109e96435c96639b21211cac0500673a63
9fafee109e96435c96639b21211cac0500673a63,9fafee10,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1251955095,1251955095,cb4a73f3b65ba72f645fd37ab8712829c9537bf8
cb4a73f3b65ba72f645fd37ab8712829c9537bf8,cb4a73f3,Merge commit 'origin/master',"Merge commit 'origin/master'
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1251955057,1251955057,"9ddd8696b4004ccc03238d95a8c2a1d07075e0fb,e2e449d5c23356e913f312de1fb2611a9dd5a352"
e2e449d5c23356e913f312de1fb2611a9dd5a352,e2e449d5,Remove bit-banging debug support from TM board builds,"Remove bit-banging debug support from TM board builds

Our current TM boards don't have the wires to do bit-banging to
another cc1111 board, so it doesn't make sense to fill up their flash
with useless code (and the 'help' text with useless commands). Leave
this to the TI board until we have boards that can serve as debug dongles.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1251954112,1251954112,acea083d80e1ecc4287083519ea666964016b257
acea083d80e1ecc4287083519ea666964016b257,acea083d,Make the ao_log_record structures 8 bytes again.,"Make the ao_log_record structures 8 bytes again.

When the GPS signal strength data was added, the structure was
accidentally extended to 9 bytes, making all log records 9 bytes
long. While not a serious problem, this left log records spanning
across eeprom block boundaries, which seems like a bad plan.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1251954037,1251954037,7d39f17684feb49ac8a0017902158f298696e37c
7d39f17684feb49ac8a0017902158f298696e37c,7d39f176,Make eeprom reads and writes across block boundary work,"Make eeprom reads and writes across block boundary work

Reading and writing across the block boundary was not stepping the
eeprom position after the partial i/o operation at the end of the
first block. This meant that the operation would re-use the end of the
previous block, either re-reading or re-writing it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1251953874,1251953874,6358041f846ba9a20fa650c367d907dc4336e54c
9ddd8696b4004ccc03238d95a8c2a1d07075e0fb,9ddd8696,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1251758883,1251758883,6926c4ab5d87a8f2eb4fcde2c673fb3a4639e115
6926c4ab5d87a8f2eb4fcde2c673fb3a4639e115,6926c4ab,pixmap file should not be executable,"pixmap file should not be executable
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1251758864,1251758864,1495e2f27acde3743c3764a0c31ee082224d6c64
1495e2f27acde3743c3764a0c31ee082224d6c64,1495e2f2,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1251758575,1251758575,c8c5b7963babe8eb16e2651fba9cd2c8d1cba74e
c8c5b7963babe8eb16e2651fba9cd2c8d1cba74e,c8c5b796,deliver an icon for the Debian menu system,"deliver an icon for the Debian menu system
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1251758557,1251758557,591b99c232e780246fc07841c09c8c4e7835facb
591b99c232e780246fc07841c09c8c4e7835facb,591b99c2,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1251757560,1251757560,b34474c1f3083e73b7184d519f54d4c8031836fd
b34474c1f3083e73b7184d519f54d4c8031836fd,b34474c1,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1251757532,1251757532,"8df169791835510d96c11a3b0aa3cc5b79fa7fde,0d65bff443c17d4d98c18b620ec075ab66b30efd"
6358041f846ba9a20fa650c367d907dc4336e54c,6358041f,"Enable GPS degraded mode, set 10 sec degraded timeout.","Enable GPS degraded mode, set 10 sec degraded timeout.

No reason not to let the GPS report solutions whenever it likes, let's
see how this works.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250973536,1250973536,0d65bff443c17d4d98c18b620ec075ab66b30efd
0d65bff443c17d4d98c18b620ec075ab66b30efd,0d65bff4,Turn off GPS tracking data when not present in data stream,"Turn off GPS tracking data when not present in data stream

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250876866,1250876866,4486d9156e19e4280b42bcd422d81d04f2d04a92
8df169791835510d96c11a3b0aa3cc5b79fa7fde,8df16979,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250670083,1250670083,42ab6d52540d0326ef89e9d57954b08248558468
42ab6d52540d0326ef89e9d57954b08248558468,42ab6d52,fix location for delivery of sources.list fragment,"fix location for delivery of sources.list fragment
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250670066,1250670066,977f5dc0bc7c666dcc1f21db77416efca0d696aa
977f5dc0bc7c666dcc1f21db77416efca0d696aa,977f5dc0,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250669471,1250669471,8d4d6655f1b4c2fbc522fd255bfb75406e5ddaef
8d4d6655f1b4c2fbc522fd255bfb75406e5ddaef,8d4d6655,"oops, aoview is now ao-view!","oops, aoview is now ao-view!
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250669460,1250669460,b9a97aea65f871fd287bc0bb566d8664766f4afd
b9a97aea65f871fd287bc0bb566d8664766f4afd,b9a97aea,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250669236,1250669236,21e3dd0affac89919e5d0e29c6e9eb1eacb51801
21e3dd0affac89919e5d0e29c6e9eb1eacb51801,21e3dd0a,enable support for Debian menus,"enable support for Debian menus
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250669209,1250669209,0087c1776e0253fc2bd3b86f15bf9d1b32bdc45a
0087c1776e0253fc2bd3b86f15bf9d1b32bdc45a,0087c177,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250664777,1250664777,4486d9156e19e4280b42bcd422d81d04f2d04a92
4486d9156e19e4280b42bcd422d81d04f2d04a92,4486d915,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250664564,1250664564,"dd09f0bc2b950c00f3b489878cd69ad8a003f46c,33edd62992a32b0ec8ca66d879fa300871db5937"
33edd62992a32b0ec8ca66d879fa300871db5937,33edd629,Update ao-view to add GPS satellite tracking data,"Update ao-view to add GPS satellite tracking data

This adds another column to the display to hold per-satellite GPS
tracking data and a count of the visible and locked sats.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250663896,1250663908,29687cbd462a332d9a36ed87500c5b737dcae3f4
29687cbd462a332d9a36ed87500c5b737dcae3f4,29687cbd,Handle GPS satellite tracking data,"Handle GPS satellite tracking data

SiRF message #4 includes signal strength and GPS engine state for each
of the satellites being tracked. This data is now parsed and sent to
eeprom and the radio.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250660115,1250660115,7d4ceb75a454e6c9b3fe0bd934fadcb5104dea36
dd09f0bc2b950c00f3b489878cd69ad8a003f46c,dd09f0bc,update changelogs for Debian build,"update changelogs for Debian build
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250654221,1250654221,cd5ce661e2a8f9694933358ccb5b916fbed089c2
cd5ce661e2a8f9694933358ccb5b916fbed089c2,cd5ce661,add support for building Debian package,"add support for building Debian package
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250653779,1250653779,d996aa9b32fb0eb385bd3d158256c29788a42fe3
d996aa9b32fb0eb385bd3d158256c29788a42fe3,d996aa9b,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250643369,1250643369,"b3b2d3c475a135084b5628c730fc6fca1ba0817b,7d4ceb75a454e6c9b3fe0bd934fadcb5104dea36"
7d4ceb75a454e6c9b3fe0bd934fadcb5104dea36,7d4ceb75,Add ao-ejection.1 man page,"Add ao-ejection.1 man page

Document the input requirements and output format

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250643322,1250643322,da12b89fb056a68e65ba363fef91d266727cb685
b3b2d3c475a135084b5628c730fc6fca1ba0817b,b3b2d3c4,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250642163,1250642163,"4685fc541466afbeefc151bcb64cd054739c048b,da12b89fb056a68e65ba363fef91d266727cb685"
da12b89fb056a68e65ba363fef91d266727cb685,da12b89f,Create ChangeLog from git log,"Create ChangeLog from git log
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250641843,1250641866,7d69e2b3715faed10ce21ad562fc4d25dfc5f9c1
7d69e2b3715faed10ce21ad562fc4d25dfc5f9c1,7d69e2b3,Fix ao-bitbang examples to not have . in the first column,"Fix ao-bitbang examples to not have . in the first column
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250641769,1250641769,c29275b72438637d46d7a50742882d2736eb176a
4685fc541466afbeefc151bcb64cd054739c048b,4685fc54,Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos,"Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

Conflicts:
	ao-tools/ao-bitbang/Makefile.am
	ao-tools/ao-eeprom/Makefile.am
	ao-tools/ao-load/Makefile.am
	ao-tools/ao-load/ao-load.c
	ao-tools/ao-rawload/Makefile.am
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1250640578,1250640578,"1c2a0b6653623b689d68d7349a6b2dce3e20a4a6,c29275b72438637d46d7a50742882d2736eb176a"
c29275b72438637d46d7a50742882d2736eb176a,c29275b7,Add manual pages for remaining commands.,"Add manual pages for remaining commands.

Manuals written for ao-bitbang, ao-eeprom, ao-load, ao-rawload and
ao-view.

Manual for ao-dbg updated to reflect program name change.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250634117,1250634271,9b03d620722dc54630539afba40720c30de69b2d
9b03d620722dc54630539afba40720c30de69b2d,9b03d620,Use --tty/-T on command line to specify target device,"Use --tty/-T on command line to specify target device

Also, use the ALTOS_TTY environment variable in all tools. Note that
the magic value of ""BITBANG"" switches the library to connecting
through a CP2103 instead.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250623171,1250631555,7c790fe859dff062692964338091ffbbcdf63257
7c790fe859dff062692964338091ffbbcdf63257,7c790fe8,Rename tools to ao-<foo>,"Rename tools to ao-<foo>

Use a consistent prefix to make it easier to remember which programs
belong to this package

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250624424,1250628370,a5782398d968e7cb11f7203afada7c216f233b3b
1c2a0b6653623b689d68d7349a6b2dce3e20a4a6,1c2a0b66,re-add debugger sources,"re-add debugger sources
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250627814,1250627814,9a9cce5510b87252f863239ac807b9fb4395b288
9a9cce5510b87252f863239ac807b9fb4395b288,9a9cce55,Start working on using getopt for the tty name,"Start working on using getopt for the tty name
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250623171,1250624701,9789ca5e8caa9a013e804f307b9da380e147bd75
9789ca5e8caa9a013e804f307b9da380e147bd75,9789ca5e,Rename tools to ao-<foo>,"Rename tools to ao-<foo>

Use a consistent prefix to make it easier to remember which programs
belong to this package

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250624424,1250624424,a5782398d968e7cb11f7203afada7c216f233b3b
a5782398d968e7cb11f7203afada7c216f233b3b,a5782398,Remove unused cctools code paths for old libusb and cp2103 ioctls.,"Remove unused cctools code paths for old libusb and cp2103 ioctls.

Communication with the CP2103 board has gone through three revisions,
first using ioctls supported by the CP2103 kernel driver, then using
the old synchronous usb library and now using the newer libusb
asynchronous interface. There's no reason to keep shipping the old
stale code now that the new stuff works reliably.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250620468,1250620468,7cba411de0780c65e3490ab67186a514f0ea42ec
7cba411de0780c65e3490ab67186a514f0ea42ec,7cba411d,"test for sdcc, nickle and readline","test for sdcc, nickle and readline

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1250567251,1250567251,f48dcffae761700355a17b59345d55a60703f0c4
f48dcffae761700355a17b59345d55a60703f0c4,f48dcffa,Sync USB data after each memory write command,"Sync USB data after each memory write command

This makes sure we flush the USB link often enough for the other end to keep
up.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1249875790,1249875790,cd5456f18e4b39ad76d5549df91a0e0cfb18a2e9
cd5456f18e4b39ad76d5549df91a0e0cfb18a2e9,cd5456f1,Handle partial ALSA PCM writes,"Handle partial ALSA PCM writes

The ALSA spec says that snd_pcm_writei will not return a partial write, but
at least on the OLPC, that's not true. Deal with this.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1249859287,1249859287,3056cb8eef5aee0dcd342488386355d8b8f574c8
3056cb8eef5aee0dcd342488386355d8b8f574c8,3056cb8e,Check more alsa return statuses,"Check more alsa return statuses
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1249858519,1249858519,8ddf3345afd8cbf638e81993633f7861d8dbca63
8ddf3345afd8cbf638e81993633f7861d8dbca63,8ddf3345,Don't report distance to rocket without valid GPS,"Don't report distance to rocket without valid GPS

When there's no valid GPS data, don't try to report the distance and bearing
to the rocket after landing.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247906854,1247906854,fbcb7b20fa701a6e534d38e307839466545668e3
fbcb7b20fa701a6e534d38e307839466545668e3,fbcb7b20,Add B command to set serial baud rate,"Add B command to set serial baud rate

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247904333,1247904333,91b023e7e4eeed838e0320d2ddac0f6aac39e565
91b023e7e4eeed838e0320d2ddac0f6aac39e565,91b023e7,Get rid of spaces after minus sign in climb value,"Get rid of spaces after minus sign in climb value
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247904313,1247904313,28be20cf914fb34dc3c776519708d0f02091764e
28be20cf914fb34dc3c776519708d0f02091764e,28be20cf,Switch to 57600 baud for GPS data,"Switch to 57600 baud for GPS data
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247904279,1247904279,d3f76ce58b9c0ed2e5a9fe3bbc7fb9cb38247714
d3f76ce58b9c0ed2e5a9fe3bbc7fb9cb38247714,d3f76ce5,Drain serial port before changing speed,"Drain serial port before changing speed

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247904257,1247904257,d7c2d358ed8a1afc9f0ba2bd830b10f6b56dc7b1
d7c2d358ed8a1afc9f0ba2bd830b10f6b56dc7b1,d7c2d358,Display last known GPS coord while unlocked,"Display last known GPS coord while unlocked

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247903082,1247903082,5195fcfe239e430e1f9f11774c9a245c7b29dae9
5195fcfe239e430e1f9f11774c9a245c7b29dae9,5195fcfe,use g_source_destroy instead of free on serial object,"use g_source_destroy instead of free on serial object
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247903041,1247903041,1e5e98bd8f5ea0bc15592de454e3629383462371
1e5e98bd8f5ea0bc15592de454e3629383462371,1e5e98bd,Trim aoview_serial_set_callback args down to just port and callback,"Trim aoview_serial_set_callback args down to just port and callback
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247903002,1247903002,08f37056deec25d77062bc411a04033401b033a5
08f37056deec25d77062bc411a04033401b033a5,08f37056,Reset GPS at boot time,"Reset GPS at boot time
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247893863,1247893863,1150aa850f5a025b849556e32c4dddb27937d9af
1150aa850f5a025b849556e32c4dddb27937d9af,1150aa85,Fix up serial debug output,"Fix up serial debug output
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247893843,1247893843,2a7956a64935246475f92d44c08369e0230b676a
2a7956a64935246475f92d44c08369e0230b676a,2a7956a6,Allow the GPS port to run at 4800 baud if desired,"Allow the GPS port to run at 4800 baud if desired
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247891653,1247891653,8d650769c319261c97f5e68eff9138207b95c0f8
8d650769c319261c97f5e68eff9138207b95c0f8,8d650769,Initialize the GPS serial protocol state,"Initialize the GPS serial protocol state

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247891633,1247891633,ab40d224b39ba6d29c4056e2d2c365e1eb3d3793
ab40d224b39ba6d29c4056e2d2c365e1eb3d3793,ab40d224,Use uint8_t for comparisons to avoid int conversions,"Use uint8_t for comparisons to avoid int conversions

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247891598,1247891598,d6749bf24792bb41ca700cf4b8e5e1ac1a63cbf0
d6749bf24792bb41ca700cf4b8e5e1ac1a63cbf0,d6749bf2,Add AO_GPS_RUNNING state.,"Add AO_GPS_RUNNING state.

This tracks whether the GPS receiver has ever sent a valid report to the
flight computer, allowing the user to tell whether the GPS receiver is
working at all.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247891453,1247891537,a1da7e871aee75308bc05ce1b7a0dc402e4c9509
a1da7e871aee75308bc05ce1b7a0dc402e4c9509,a1da7e87,Add M command to monitor serial bytes,"Add M command to monitor serial bytes
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247891135,1247891135,ddfa2308c0be4c002f982ae9da6032ee7854117d
ddfa2308c0be4c002f982ae9da6032ee7854117d,ddfa2308,Support the not-connected GPS state,"Support the not-connected GPS state
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247891085,1247891085,34f148500df427c148188c0ada20bf914a7c74ba
34f148500df427c148188c0ada20bf914a7c74ba,34f14850,Use 57600 baud for GPS. Clean up gps init.,"Use 57600 baud for GPS. Clean up gps init.

Assume GPS is either in 4800 NMEA or 57600 SiRF mode, send just the sequence
to get from 4800 NMEA to 5760 SiRF.

Also, eliminate threads from the gps test program.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247883790,1247883790,2deca0c52cd6cfb4baceb59c8a5458344bada338
2deca0c52cd6cfb4baceb59c8a5458344bada338,2deca0c5,Try harder to get the GPS receiver serial link sync'd up.,"Try harder to get the GPS receiver serial link sync'd up.

We cannot assume that the GPS receiver is in any particular state when it
boots, so we try to send the serial configuration at several rates and hope
that it eventually sees something that it likes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247875760,1247875760,31d5670a9144b943ce9c8cb00deb5fb659af0b1c
31d5670a9144b943ce9c8cb00deb5fb659af0b1c,31d5670a,Rolling average for pad location. Say 'GPS ready'.,"Rolling average for pad location. Say 'GPS ready'.

Use a rolling average for the pad location, instead of just averaging all
positions. This filters out old (presumably less accurate) values eventually.

When enough GPS samples have been acquired, say 'GPS ready'.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247875578,1247875578,bfe1e76c82738baaf65abbc58c3244a07ea8fefe
bfe1e76c82738baaf65abbc58c3244a07ea8fefe,bfe1e76c,Split GPS data into a separate column,"Split GPS data into a separate column

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247872971,1247872971,5f0179652e8bb85add9067e5253e981c60f2c51e
5f0179652e8bb85add9067e5253e981c60f2c51e,5f017965,Fix up SiRF parsing and test code so that it actually works,"Fix up SiRF parsing and test code so that it actually works

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247871815,1247871815,0b35447d05a0c7eaf4fefcbcf0065fe3320bba82
0b35447d05a0c7eaf4fefcbcf0065fe3320bba82,0b35447d,Add host-side gps protocol testing program,"Add host-side gps protocol testing program
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247864294,1247864294,fef7334bddb9fccfbd6deab7d5d466ab3e76323a
fef7334bddb9fccfbd6deab7d5d466ab3e76323a,fef7334b,Hook aoview directly to alsa,"Hook aoview directly to alsa

This skips the flite internal audio stuff which opened and closed the audio
device for each phrase. This caused the first part of some phrases to be
missed when using an external audio device.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247298973,1247298973,80cadf44f5f1accd6ddfca25c2af8d4d424f26d9
80cadf44f5f1accd6ddfca25c2af8d4d424f26d9,80cadf44,Show speed. Format numbers. Timeout and report final status.,"Show speed. Format numbers. Timeout and report final status.

The speed value is now shown in the top label bar. Ascent shows
accelerometer-derived data, otherwise it's baro derived.

All of the numbers displayed are now given sensible printf formats so they
don't contain way too many digits.

Instead of doing periodic reporting based on flight tick count, data is
reported every 10 seconds based on wall time. After landing, or when no data
have been received for a while, final flight information is spoken.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1247198110,1247198110,19630ef084866f4230e68ccf11284b30c68128b1
19630ef084866f4230e68ccf11284b30c68128b1,19630ef0,Dont smash aoview_monitor_parse input buffer,"Dont smash aoview_monitor_parse input buffer
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1246808128,1246808128,e506ed4b6efb86eab50204658fcd433b987e3831
e506ed4b6efb86eab50204658fcd433b987e3831,e506ed4b,Integrate flite into aoview directly. Fix great circle computation.,"Integrate flite into aoview directly. Fix great circle computation.

Use a separate thread for flite rather than a separate program.
Save voice state to gconf.
Add filters for replay file selection

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1246400752,1246400752,5b988e0146075d57434f8484e1ec9fcf3e183df2
5b988e0146075d57434f8484e1ec9fcf3e183df2,5b988e01,Make window taller,"Make window taller
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1246400693,1246400693,696233b088645bba1aaa6aa6c5358c3ecfa5cd3f
696233b088645bba1aaa6aa6c5358c3ecfa5cd3f,696233b0,Use 16kHz voice,"Use 16kHz voice
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1246400671,1246400671,2e06772c8b6fd74f86e640ed97f0d5bc8c095c2f
2e06772c8b6fd74f86e640ed97f0d5bc8c095c2f,2e06772c,Add telem replay and larger labels,"Add telem replay and larger labels

Replays telemetry files in real time
Shows height/state/rssi in big values at the top.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1246388310,1246388310,566dde161385263700eaae51095eecfa9b5972ee
566dde161385263700eaae51095eecfa9b5972ee,566dde16,Update aoview/.gitignore,"Update aoview/.gitignore

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1246342007,1246342007,4ca2d910f3be689fd3c78a4f1be0555d6b1a30c1
4ca2d910f3be689fd3c78a4f1be0555d6b1a30c1,4ca2d910,Use flite to announce flight state,"Use flite to announce flight state

This uses the flite voice synthesis library from festival to announce
altitude and speed information during the rocket flight.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1246341927,1246341927,527d7c803ed9597b210634018cb2eb9d048d9846
527d7c803ed9597b210634018cb2eb9d048d9846,527d7c80,Add GPS speed and error data to telemetry and aoview,"Add GPS speed and error data to telemetry and aoview

Having switched to the SiRF binary GPS format, the velocity and error data
can now be displayed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1246341838,1246341838,ee4919dd771b00e2a2dd1083c9528efa7baab50f
ee4919dd771b00e2a2dd1083c9528efa7baab50f,ee4919dd,Convert GPS to SiRF binary protocol.,"Convert GPS to SiRF binary protocol.

This switches the GPS unit from NMEA to SiRF protocol at startup and then
parses the binary data. The binary data uses a different encoding of lat/lon
than the NMEA strings, and so the telemetry and eeprom data formats change
with this switch.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1246308840,1246308840,49bf37767d2453869f2ca2c0832d1124322c66e0
49bf37767d2453869f2ca2c0832d1124322c66e0,49bf3776,Add ejection computation utility,"Add ejection computation utility

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1245306145,1245306145,e59520e343c2573b1b92c0b3c4aaa93e51bc55d3
e59520e343c2573b1b92c0b3c4aaa93e51bc55d3,e59520e3,Fix clock initialization to not try to use 32kHz xtal on P2_3/P2_4,"Fix clock initialization to not try to use 32kHz xtal on P2_3/P2_4

None of our boards have a 32kHz xtal oscillator, instead we use those pins
(on Telemetrum) for the deployment firing circuits. The old clock
initialization code was switching from the 32kHz RC oscillator to the 32kHz
crystal and overriding our use of those pins.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1245272123,1245272123,1c3cc12c08ddefbd6456a55c54ef87dd94d4ae9a
1c3cc12c08ddefbd6456a55c54ef87dd94d4ae9a,1c3cc12c,Some kernels reference USB ttys as tty/tty* instead of tty:tty*,"Some kernels reference USB ttys as tty/tty* instead of tty:tty*

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1245025534,1245025534,0f2cbd41332b1b63865c5f1a4e749419b469853a
0f2cbd41332b1b63865c5f1a4e749419b469853a,0f2cbd41,Rename state apogee -> coast,"Rename state apogee -> coast
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1245023119,1245023119,5834a12c1d3d71105c9e3d1ceaf9f3ffac9ff1eb
5834a12c1d3d71105c9e3d1ceaf9f3ffac9ff1eb,5834a12c,"rename states. launchpad -> pad, coast -> fast","rename states. launchpad -> pad, coast -> fast
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1245022768,1245022768,8c40f19acd09fe93d492c9355da8a1198c34b1c3
8c40f19acd09fe93d492c9355da8a1198c34b1c3,8c40f19a,Disable monitor mode when communicating via usb,"Disable monitor mode when communicating via usb
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1245022589,1245022589,7adea9c59c73acd52743446c74fb675e0a1d6d05
7adea9c59c73acd52743446c74fb675e0a1d6d05,7adea9c5,Format GPS seconds as %02d.%04d to avoid spaces in the value,"Format GPS seconds as %02d.%04d to avoid spaces in the value

The aoview GPS parsing code doesn't deal well with spaces in the middle of
the value, so pad the seconds field with a zero as needed.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1244151525,1244151525,a0e6bfee635b64092262936c858542318f6fc6dc
a0e6bfee635b64092262936c858542318f6fc6dc,a0e6bfee,newer INSTALL file pulled in by autogen.sh,"newer INSTALL file pulled in by autogen.sh
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1244142708,1244142708,cf1e258d52b878df10b51a047709b10ecd51a68e
cf1e258d52b878df10b51a047709b10ecd51a68e,cf1e258d,add a distclean target to src/Makefile,"add a distclean target to src/Makefile
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1244142569,1244142569,176052b7c14fcad067835ecb550778faf67cf4da
176052b7c14fcad067835ecb550778faf67cf4da,176052b7,add lib to the front of the subdir list,"add lib to the front of the subdir list
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1244142430,1244142430,208bc15714c7b4020c017eef19011c4eb9ab51e2
208bc15714c7b4020c017eef19011c4eb9ab51e2,208bc157,Move build and debug tools to 'cctools' directory.,"Move build and debug tools to 'cctools' directory.

These tools were merged in from the ccdbg package.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1244139610,1244139610,17d2432a8b9c15963cd3b821f025ad33972ef477
17d2432a8b9c15963cd3b821f025ad33972ef477,17d2432a,Merge ccdbg and altos sources into one giant repository,"Merge ccdbg and altos sources into one giant repository

Keeping these separate isn't making things any easier.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1244139195,1244139195,"210dbaa23cdacf3a6f2d6e23493e96ee2ac9bca7,8a9a3f02b951382573ff74dd6ce5a1c0f335fa86"
210dbaa23cdacf3a6f2d6e23493e96ee2ac9bca7,210dbaa2,"Use autotools, move altos to src subdir","Use autotools, move altos to src subdir

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1244137294,1244137294,8cce307bb3156584ba17ae5a787f645dfee5fb94
8cce307bb3156584ba17ae5a787f645dfee5fb94,8cce307b,Make menu seperator insensitive,"Make menu seperator insensitive
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1244136330,1244136330,778cae8fc5a4b30e5045e4703316fc61ae18562a
778cae8fc5a4b30e5045e4703316fc61ae18562a,778cae8f,aoview: Add eeprom data fetching,"aoview: Add eeprom data fetching

Fetches the last flight data from a TM device connected via USB and writes
it to the flight log directory.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1244074054,1244074054,bf140966e9649e75b884c8aa5f25ffbf9eed10ea
bf140966e9649e75b884c8aa5f25ffbf9eed10ea,bf140966,Stop log dumping at flight end. Print 'end' at end of log.,"Stop log dumping at flight end. Print 'end' at end of log.

No reason to continue dumping data past the end of the flight now that the
logging stuff has been demonstrated to work reliably. Also, to make
automated log dumping easier, this prints out 'end' after the log data so
that aoview knows when to stop reading.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1244051866,1244051866,35ac66969abe24ca23776618306a59fc17770e06
35ac66969abe24ca23776618306a59fc17770e06,35ac6696,Start adding bi-directional packet link,"Start adding bi-directional packet link
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1243786921,1243786921,3a3bfd471a868d546d83cdc431b53c8f5208edb9
3a3bfd471a868d546d83cdc431b53c8f5208edb9,3a3bfd47,Eliminate RDF tone generation.,"Eliminate RDF tone generation.

Now that we have a viable telemetry-signal based RDF device via TeleDongle,
there's no reason to continue to waste power and bandwidth with a NFM tone.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1243577853,1243577853,4d83eef0fe1d24a845ab29a535dfc56e13e7ee20
4d83eef0fe1d24a845ab29a535dfc56e13e7ee20,4d83eef0,Change .gitignore to match new aoload procedure,"Change .gitignore to match new aoload procedure
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1243577845,1243577845,dcfcf3bec6788460b6fe8c239c80bad4526bd15b
dcfcf3bec6788460b6fe8c239c80bad4526bd15b,dcfcf3be,Leave serial number writing to aoload,"Leave serial number writing to aoload

Instead of building per-serial hex files, leave that
process to the new aoload program

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1243486897,1243486897,5a7a63c34b778e40a61ddabd16ec1af9a2be50c3
8a9a3f02b951382573ff74dd6ce5a1c0f335fa86,8a9a3f02,Add aoload to load serial-numbered altos binaries.,"Add aoload to load serial-numbered altos binaries.

aoload is a custom version of ccload which edits the data before sending it
to the target machine, writing the target serial number into the data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1243486395,1243486395,837c620f07b63efc171be3ac14c78bc99adf7592
5a7a63c34b778e40a61ddabd16ec1af9a2be50c3,5a7a63c3,Fix aoview telemetry GPS parsing code to use correct columns,"Fix aoview telemetry GPS parsing code to use correct columns

This code was trying to pull the GPS data from the wrong columns, causing
aoview to fail to display GPS information.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1243138812,1243138812,26988c3e7acb2fa832810475e43e08fd2867459c
26988c3e7acb2fa832810475e43e08fd2867459c,26988c3e,Parse both telemetry or log data ao_flight_test,"Parse both telemetry or log data ao_flight_test

Change the way data is fed from files to the flight test rig to handle
either kind of input file.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1243138737,1243138737,d6f5a0689023546464a71561f53fa2c943077c88
d6f5a0689023546464a71561f53fa2c943077c88,d6f5a068,Avoid 16-bit overflow in velocity computation.,"Avoid 16-bit overflow in velocity computation.

Adding two 16 bit integers together can wrap around to negative numbers,
this resulted in velocity values which never decreased, making the switch
from coast to apogee state not occur.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1243138582,1243138582,aa6d87aeb616dd62f0debaded297232022b4f8bd
aa6d87aeb616dd62f0debaded297232022b4f8bd,aa6d87ae,Make file handling more general so it can be reused.,"Make file handling more general so it can be reused.

The log file handling stuff will be useful for saving eeprom data, so pull
it out of the real-time log handling code and make a general interface.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242837895,1242837895,b730c8bcbce649cdddba935e1112aaae538bc526
b730c8bcbce649cdddba935e1112aaae538bc526,b730c8bc,Ignore aoview_glade.h,"Ignore aoview_glade.h
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242629684,1242629684,91b07410122d0eaaf292cdb31c200925d45eaf2c
91b07410122d0eaaf292cdb31c200925d45eaf2c,91b07410,Transmit computed ground pressure and acceleration values,"Transmit computed ground pressure and acceleration values

These are the last two values relevant to figuring out the state of the
flight computer, and as they are computed by averaging 10 seconds of 100Hz
sample data, they're a lot more accurate than anything the receiver could do
on its own.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242628581,1242628581,71d1689759829f1bc8550f1a4d8c9f2dc90b2ab4
71d1689759829f1bc8550f1a4d8c9f2dc90b2ab4,71d16897,Provide install target,"Provide install target
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242627489,1242627489,f301b95e87c8ec1e3b58d595a05d486bede5e0c2
f301b95e87c8ec1e3b58d595a05d486bede5e0c2,f301b95e,Embed glade file in executable,"Embed glade file in executable

This eliminates install issues nicely.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242627200,1242627200,26361686d6fc63dc22d22285f0543c5c2c756fb4
26361686d6fc63dc22d22285f0543c5c2c756fb4,26361686,Add About dialog to aoview.,"Add About dialog to aoview.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242626723,1242626723,0f3233c49f43cd4e372e613303919ce4d50255b2
0f3233c49f43cd4e372e613303919ce4d50255b2,0f3233c4,USB device names can contain '.' too,"USB device names can contain '.' too

Depending on the hierarchy of devices, names can contain '.', so allow those
too.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242625459,1242625459,33221277690e6ee30387c506c3f2b8237ed48efd
33221277690e6ee30387c506c3f2b8237ed48efd,33221277,scandir returns -1 on error,"scandir returns -1 on error

In which case, the namelist is invalid, so don't look at it, and don't free
it.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242625414,1242625414,7cb9fb675f56bf30ab6bf0bcdc5cb679709ffe3e
7cb9fb675f56bf30ab6bf0bcdc5cb679709ffe3e,7cb9fb67,Send computed accel/vel/pres values over the radio,"Send computed accel/vel/pres values over the radio

These computed values reflect what the flight computer is actually refering
to for state changes, and will be useful in debugging the flight software as
well as provide a filtered view of the data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242624594,1242624594,2c780d67b8a22d75a2da4b2af21fd35f0c6f5236
2c780d67b8a22d75a2da4b2af21fd35f0c6f5236,2c780d67,Handle disappearing serial devices,"Handle disappearing serial devices

Put up a dialog when the serial open fails, and shut down monitoring when
the serial device disappears while running.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242624546,1242624546,69616104813fc5ba89fb3128d04fb9328961c59c
69616104813fc5ba89fb3128d04fb9328961c59c,69616104,"While on the pad, zero out velocity every second","While on the pad, zero out velocity every second

We integrate acceleration to get velocity, but that means sitting on the pad
for a long time can add substantial error to the velocity value. Each
second, take the velocity value from a full second ago and subtract that out
of the current velocity. Once we detect boost, this will stop, which means
that as long as we detect boost within a second, we won't have subtracted
out any ""real"" velocity.

This keeps the pad velocity hovering around zero, which is pretty useful.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242624293,1242624293,1234694eb903b204488ddc7cb30bcfe34bf1e677
1234694eb903b204488ddc7cb30bcfe34bf1e677,1234694e,"Clear table, reset log on disconnect","Clear table, reset log on disconnect
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242548946,1242548946,4316b6af86b37522038e642235c163fcaad52e96
4316b6af86b37522038e642235c163fcaad52e96,4316b6af,"Add pad lat/lon, max accel, max height","Add pad lat/lon, max accel, max height

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242548896,1242548924,4348281bd788a13ea700413537f12da3c00356e4
4348281bd788a13ea700413537f12da3c00356e4,4348281b,Clean up GPS display,"Clean up GPS display

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242546369,1242546369,ff68e38770351ddac3285ce275cd85adab01fd3d
ff68e38770351ddac3285ce275cd85adab01fd3d,ff68e387,Make aoview window taller,"Make aoview window taller

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242546338,1242546338,be3f4fed7b863c8cdaabe32b61b65a8b3cd11355
be3f4fed7b863c8cdaabe32b61b65a8b3cd11355,be3f4fed,Add lots more aoview UI bits,"Add lots more aoview UI bits

Logs data to files, displays current state in window.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242544425,1242544425,93d7ce8e054515ed7b166eb042ae7f47e564d21d
93d7ce8e054515ed7b166eb042ae7f47e564d21d,93d7ce8e,"When logging starts up, right the whole ring to the log.","When logging starts up, right the whole ring to the log.

This preserves the data pre boost-detect for later analysis.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242531926,1242531926,fec4212a59a7b3321536b25707dcabc43c797c33
fec4212a59a7b3321536b25707dcabc43c797c33,fec4212a,Abandon use of accelerometer for apogee detect.,"Abandon use of accelerometer for apogee detect.

Integrating the accelerometer data to compute velocity worked for one rocket
flight, but additional testing shows that it doesn't work in other
airframes. Until we figure out how this should work, we'll rely on the
altimeter to detect apogee.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242529471,1242529471,09771c644de54ae354e8f98af7ba74289b3c0fcc
09771c644de54ae354e8f98af7ba74289b3c0fcc,09771c64,Add preliminary aoview code,"Add preliminary aoview code

AoView connects with TeleDongle to present telemetry information in a
reasonable form. Right now, it just displays information to stdout, but it
does have fancy dialogs for finding the USB devices.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242465904,1242465904,37250b00f6286aee4b3b28604f5d463db3079a89
37250b00f6286aee4b3b28604f5d463db3079a89,37250b00,Discard usb output before connection. Handle USB reset.,"Discard usb output before connection. Handle USB reset.

Discarding output before USB is plugged in allows threads that send output
and do other things to work without a USB connection. Unfortuantely, there
doesn't appear to be any way to detect when the USB link is disconnected,
which means that once USB is enabled, future writes will continue to block.

USB reset causes the USB interrupts to all be reconfigured back to power-on
state.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242272514,1242272514,9b974217958b1017e62d6c4f4568f547ccc30c58
9b974217958b1017e62d6c4f4568f547ccc30c58,9b974217,"Enable radio monitor by default in teleterra, teledongle and tidongle","Enable radio monitor by default in teleterra, teledongle and tidongle

These ground loads want to monitor the radio constantly, and not require use
of the 'm' command before listening.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242272442,1242272442,25fc03a333b2cfad0a93ebc385fbcf74b63c229e
25fc03a333b2cfad0a93ebc385fbcf74b63c229e,25fc03a3,Remove monitor/rssi functions from telemetrum load,"Remove monitor/rssi functions from telemetrum load

Telemetrum is now a flight-only load, use teleterra or teledongle for ground
boards.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242272368,1242272368,05493b98eb1ae4d30cb0b600849d70b03fa33594
05493b98eb1ae4d30cb0b600849d70b03fa33594,05493b98,Split out ao_state_names to separate file,"Split out ao_state_names to separate file

Allows state names to be used in programs without monitoring enabled.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242272291,1242272291,d085d43701e3cdd2119e947a9ae45baa78c80318
d085d43701e3cdd2119e947a9ae45baa78c80318,d085d437,Indicate RSSI with a blinking LED,"Indicate RSSI with a blinking LED

Blink the red LED at a rate proportional to the RSSI value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242250170,1242250170,055331d5f7d5adc40c348c3efd331a562dcda82a
055331d5f7d5adc40c348c3efd331a562dcda82a,055331d5,Make ao_flight_test show AGL altitude and positive acceleration under boost,"Make ao_flight_test show AGL altitude and positive acceleration under boost

This makes the output more readable

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242238753,1242238753,d91208fbf5fc7797b93087ef8619454c4bed0130
d91208fbf5fc7797b93087ef8619454c4bed0130,d91208fb,Make ao_flight_test able to read raw logging data,"Make ao_flight_test able to read raw logging data

Protect ao_flight_test reading functions so that a simple
'script' output can be fed to the program and have it work correctly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242238704,1242238704,d3dbd8949e1102220ad5fd0863f493c819b96e46
d3dbd8949e1102220ad5fd0863f493c819b96e46,d3dbd894,Print only RSSI when packet CRC is invalid,"Print only RSSI when packet CRC is invalid

Packets with invalid CRC usually contain bogus data, so don't print that,
just print out the RSSI which may contain useful data.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242238613,1242238613,8168820b667cc1deffab64dd81cb4e6e2e6eabe4
8168820b667cc1deffab64dd81cb4e6e2e6eabe4,8168820b,Accelerometer-based velocity values are invalid after apogee,"Accelerometer-based velocity values are invalid after apogee

Because the orientation of the flight computer relative to the ground is
unknown after apogee, the accelerometer data cannot be integrated to compute
velocity. Main deploy is now based purely on barometric altitude and landing
detection no longer checks for a low velocity value.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242237643,1242237643,24fdda44ff8604e40510b196ead17564d8f8cd3d
24fdda44ff8604e40510b196ead17564d8f8cd3d,24fdda44,Add velocity check for boost detect via accelerometer,"Add velocity check for boost detect via accelerometer

Bumping the rocket can cause a brief period of high acceleration, which may
cause a mistaken boost detection. Require both a high acceleration and
reasonable velocity to trigger boost phase.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242237544,1242237544,7a1aa3fdbc0d1fae5e7ee027bf8904598c6ebe41
7a1aa3fdbc0d1fae5e7ee027bf8904598c6ebe41,7a1aa3fd,Typo in callsign,"Typo in callsign
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242237510,1242237510,497c89a7d08920630894b2605c3b6a0bdc4c229b
497c89a7d08920630894b2605c3b6a0bdc4c229b,497c89a7,Use recorded accelerometer baseline data in ao_flight_test,"Use recorded accelerometer baseline data in ao_flight_test

With the flight computer recording a long-term average value for the
accelerometer in the flight record, use that to prime the flight test code
when running a log file through the simulator.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242022266,1242022328,ba3c53636e485450f48093d0a88a6629775f7c3a
ba3c53636e485450f48093d0a88a6629775f7c3a,ba3c5363,Don't re-initialize the landing range data at each apogee detect sample,"Don't re-initialize the landing range data at each apogee detect sample

The landing range values are used only after apogee detect, so we need only
initialize them on the transition from apogee to drogue.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242021676,1242021676,b623b1098bc7a10d471730259438fb82804221d0
b623b1098bc7a10d471730259438fb82804221d0,b623b109,Initialize ao_min_vel with |ao_flight_vel|,"Initialize ao_min_vel with |ao_flight_vel|

As ao_min_vel is stored as an absolute value, it's important to preserve
that invariant, even though we don't expect ao_flight_vel to be negative at
coast.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242021606,1242021606,e9584e846b9bd7926d61451d32ba5d7a30416f7b
e9584e846b9bd7926d61451d32ba5d7a30416f7b,e9584e84,Decrease telemetry rate on the pad to 1/sec instead of 20/sec,"Decrease telemetry rate on the pad to 1/sec instead of 20/sec

Transmitting telemetry through the radio consumes a significant amount of
battery; reducing the rate to 1/sec will reduce power usage while waiting
for launch.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242021511,1242021511,97cecb517cd7bf75e1219c76a93bfe6964c07052
97cecb517cd7bf75e1219c76a93bfe6964c07052,97cecb51,Increase the initial accel/baro average to 1000 samples,"Increase the initial accel/baro average to 1000 samples

To get an accurate baseline of the launchpad state, take a longer average of
the two sensors as the unit boots up.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242021439,1242021439,98806b1ff3f41484663d61ff430e9e2764c7b5e6
98806b1ff3f41484663d61ff430e9e2764c7b5e6,98806b1f,Record average accelerometer value in flight start log record,"Record average accelerometer value in flight start log record

The average accelerometer value cannot be extracted from the log as the
record starts after that is computed. As that drives much of the
accelerometer-based state transition logic, it is an important value to
have, so we log it as part of the flight start record now.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1242021254,1242021254,a12edbfe21fe27a9efbf87bacda9ab4806256e2b
a12edbfe21fe27a9efbf87bacda9ab4806256e2b,a12edbfe,Add version command to show product information,"Add version command to show product information
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1241889850,1241889850,e80b87f5e3ccf152d67a2e87bdefda161c455599
e80b87f5e3ccf152d67a2e87bdefda161c455599,e80b87f5,Pad callsign with nuls,"Pad callsign with nuls
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1241889829,1241889829,beae3360828da21eb1a3c4f88e930f242d4e36b7
beae3360828da21eb1a3c4f88e930f242d4e36b7,beae3360,USB spec limits bulk endpoints to 64 byte payload max.,"USB spec limits bulk endpoints to 64 byte payload max.

For full-speed devices, bulk endpoints may use 8, 16, 32 or 64 bytes, but no
more.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1241190897,1241190897,de7814c738488c2c16c6216c93fa78128895e5d5
de7814c738488c2c16c6216c93fa78128895e5d5,de7814c7,Use 'char' instead of 'uint8_t' for character data,"Use 'char' instead of 'uint8_t' for character data

String and character constants are of char type, so using uint8_t causes
promotion to 16-bit types when comparing the two.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1241052416,1241052416,4ae74fffb939d67424efa3e7f433637f1f920ebc
4ae74fffb939d67424efa3e7f433637f1f920ebc,4ae74fff,Eliminate incorrect cast in printf string argument,"Eliminate incorrect cast in printf string argument

char * is a pointer to a string in the default address space, not a generic pointer
to a string. As such, the compiler (at least 2.9.0) mis-compiles this if the
cast is included.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1241052396,1241052396,39f2a3c6bd501d12a92bfd38434ce67bb5beb70d
39f2a3c6bd501d12a92bfd38434ce67bb5beb70d,39f2a3c6,Correct radio frequency shown in config display.,"Correct radio frequency shown in config display.

Radio frequency base is 434.550, not 435.550
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1241052281,1241052281,75ca1751b7cac2f8074d0713ee96d6ab45b54f19
75ca1751b7cac2f8074d0713ee96d6ab45b54f19,75ca1751,Reset landing interval tests at apogee,"Reset landing interval tests at apogee

This moves all of the interval management into the landing test code and
out of the main loop. The interval is reset at apogee to make sure the
sensors produce a stable reading for at least 20 seconds
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1241052146,1241052146,7a1b77c2d7253a681389f32b70e2460aac188807
7a1b77c2d7253a681389f32b70e2460aac188807,7a1b77c2,"clean up host programs, too","clean up host programs, too
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1240789993,1240789993,5df80c346d65a9d56a8699b056dc44924acb31fe
5df80c346d65a9d56a8699b056dc44924acb31fe,5df80c34,Was missing v_batt in adc dump command,"Was missing v_batt in adc dump command
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240787047,1240787047,c3fec2c4c65db71e88ef0c05c69463438a7cfc6c
c3fec2c4c65db71e88ef0c05c69463438a7cfc6c,c3fec2c4,Add manual ignition and igniter test commands,"Add manual ignition and igniter test commands
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240785508,1240785508,819f1de8dd6010fae050bcef930943c7923929f9
819f1de8dd6010fae050bcef930943c7923929f9,819f1de8,Clean up commands a bit,"Clean up commands a bit
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240785483,1240785483,178abb5c8439509926a5507911d7148b84f051b8
178abb5c8439509926a5507911d7148b84f051b8,178abb5c,Clear more files on make clean,"Clear more files on make clean
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240783738,1240783738,70a69f3acdca27b80cdb2069de59bbc6dba83dbd
70a69f3acdca27b80cdb2069de59bbc6dba83dbd,70a69f3a,Label binaries with product and serial info,"Label binaries with product and serial info
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240783529,1240783529,5ed3b1cb52b573db1fee9655a29a0e6dd72f53fe
5ed3b1cb52b573db1fee9655a29a0e6dd72f53fe,5ed3b1cb,Make sure full log is written and flushed on landing.,"Make sure full log is written and flushed on landing.

The final state change to landing is recorded in the logging thread, so have
that turn off logging once it has recorded that state. Then make it go to
sleep.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240735022,1240735022,2e737ad00cad5d893b252d8aa9dbff3d9b800731
2e737ad00cad5d893b252d8aa9dbff3d9b800731,2e737ad0,Clean up monitor output a bit,"Clean up monitor output a bit
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240735013,1240735013,38a0b61b0a0b3c00f064c8d562950a17a6ddff4a
38a0b61b0a0b3c00f064c8d562950a17a6ddff4a,38a0b61b,Add configuration support,"Add configuration support

Current config variables:
Main deploy altitude above launch (in meters)
Acceleration zero g calibration (manual or automatic)
Radio channel (freq = 435.550MHz + channel * 100kHz)
Callsign (max 8 characters)

Supporting this involved shuffling code around so that the
non-telemetrum builds could include only the stuff they needed.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240729892,1240729892,c65f1a1acd2ca00758833cec5d3f8056d303d3e2
c65f1a1acd2ca00758833cec5d3f8056d303d3e2,c65f1a1a,Allow for slower ADC operation. Add power saving code.,"Allow for slower ADC operation. Add power saving code.

This tries to make the flight computer use less power by disabling USB in
flight mode, lowering the telemetry rate after ascent. It also disables the
RDF beacon during ascent and re-enables it once descent has started.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240695873,1240695873,8e7b48b5f090be81980ab00fbce814ae1cc253e4
8e7b48b5f090be81980ab00fbce814ae1cc253e4,8e7b48b5,Allow ADC to be disabled,"Allow ADC to be disabled
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240695844,1240695844,7bc3d9962872850e7b420221cf689db16b4305cc
7bc3d9962872850e7b420221cf689db16b4305cc,7bc3d996,Place CPU in P0 state while idle,"Place CPU in P0 state while idle
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240695803,1240695803,e45fce7f82d704d677f84c69b0e07588d109d780
e45fce7f82d704d677f84c69b0e07588d109d780,e45fce7f,Add RDF beacon and callsign to telemetry,"Add RDF beacon and callsign to telemetry
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240695740,1240695740,61510f98404bca6861b2da98f6cd9ba9deb76968
61510f98404bca6861b2da98f6cd9ba9deb76968,61510f98,Add radio code to emit a 1kHz tone,"Add radio code to emit a 1kHz tone
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240695651,1240695651,0f07803d84b5ac89500ee33a6818c50583e3ff7f
0f07803d84b5ac89500ee33a6818c50583e3ff7f,0f07803d,Allow the USB system to be disabled/enabled at run-time,"Allow the USB system to be disabled/enabled at run-time
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240690717,1240690717,45976af820fc41099928df71ea8304c56eb9fc7c
45976af820fc41099928df71ea8304c56eb9fc7c,45976af8,Make LED usage depend on target device,"Make LED usage depend on target device
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240690587,1240690587,4a050704ad2c497e9f1b0988334228b0bbc4c170
4a050704ad2c497e9f1b0988334228b0bbc4c170,4a050704,Make some functions reentrant to save DSEG space,"Make some functions reentrant to save DSEG space
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240690404,1240690404,6b3d25a6d6d7847765eb03b836913dd5ecef2993
6b3d25a6d6d7847765eb03b836913dd5ecef2993,6b3d25a6,Add monitor task to flight software,"Add monitor task to flight software

Allows the use of telemetrum in teledongle mode.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240625857,1240625872,ad0d2d88a91cbd02c56ea5ff6dab23e16aec6510
ad0d2d88a91cbd02c56ea5ff6dab23e16aec6510,ad0d2d88,Report difference from ground to max altitude at landing,"Report difference from ground to max altitude at landing
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240625839,1240625839,f94ab879ff6f97708827c74facd11003a2d8b590
f94ab879ff6f97708827c74facd11003a2d8b590,f94ab879,Display data with units while running simulation,"Display data with units while running simulation
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240625789,1240625789,6fb26340b150e831a8a9e25e3b68074c29e48dbe
6fb26340b150e831a8a9e25e3b68074c29e48dbe,6fb26340,Enabling apogee detect via speed: < 200m/s && < max_speed - 50m/s,"Enabling apogee detect via speed: < 200m/s && < max_speed - 50m/s

This change ensures that we actually got going fairly fast, and then slowed
down a bunch before enabling apogee detect. Otherwise, we'll detect apogee
right off the pad as we're not going very fast at that point...

This also adds the 'f' command to show the current flight status on the USB
port.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240625611,1240625611,20b9f304ecbddd73a0ee2461b4c5e80f08157f98
20b9f304ecbddd73a0ee2461b4c5e80f08157f98,20b9f304,"configure igniter ports, set values to measured ones","configure igniter ports, set values to measured ones
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240625548,1240625548,6bf1d91ce0b723abe2bcec89668c13135ec044cf
6bf1d91ce0b723abe2bcec89668c13135ec044cf,6bf1d91c,Move ao_led_init to end of file to be consistent with other files,"Move ao_led_init to end of file to be consistent with other files
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240625500,1240625500,b4de7d550ec9a09ccf5f6a72debc6646706e3516
b4de7d550ec9a09ccf5f6a72debc6646706e3516,b4de7d55,Define ao_state_names in ao.h so other people can share,"Define ao_state_names in ao.h so other people can share
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240625420,1240625420,8e62747b3692d0ac75b08eaf5c3e4b5d766be6ad
8e62747b3692d0ac75b08eaf5c3e4b5d766be6ad,8e62747b,Bump NUM_CMDS to 10,"Bump NUM_CMDS to 10
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240625371,1240625371,2f781beb73ef24ab5fbe2688a83d07ad26c15972
2f781beb73ef24ab5fbe2688a83d07ad26c15972,2f781beb,Move beep_init to end of file to be consistent with other files,"Move beep_init to end of file to be consistent with other files
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240625349,1240625349,b99315cee4ab796376458a2442cf36806fa4aed3
b99315cee4ab796376458a2442cf36806fa4aed3,b99315ce,Update flight algorithm based on data collected from SN-1 Flight 1,"Update flight algorithm based on data collected from SN-1 Flight 1

This now correctly sequences through the flight data collected from the
first TeleMetrum test flight.

This also completes up the flight algorithm test harness (ao_flight_test),
which runs the flight algorithm on the Linux host from a captured data log.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240593571,1240593571,b32f2f0090ff967edac07ae4d7a9895ed0b96d31
b32f2f0090ff967edac07ae4d7a9895ed0b96d31,b32f2f00,Add igniters and update flight control algorithm,"Add igniters and update flight control algorithm
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240550264,1240587540,f155333ae18a25068644792e8940269d9fb28033
f155333ae18a25068644792e8940269d9fb28033,f155333a,"Avoid ram from 0xfda2 through feff, its funky","Avoid ram from 0xfda2 through feff, its funky
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240557309,1240557309,f9c1c545c9dc11c3190a6cf7504883131fffce2f
f9c1c545c9dc11c3190a6cf7504883131fffce2f,f9c1c545,remove ao_flight_test until its ready,"remove ao_flight_test until its ready
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240550313,1240550313,86e73c009f78dc4664883353124fc891fbb01dce
86e73c009f78dc4664883353124fc891fbb01dce,86e73c00,Add teledongle module,"Add teledongle module
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240545007,1240545007,204daac71ad56926730f5d6860bd70c645302e19
204daac71ad56926730f5d6860bd70c645302e19,204daac7,Set telemetry rate to 100ms,"Set telemetry rate to 100ms
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240521961,1240521961,306b28f632e21b42ab165e7944283cf9764b590e
306b28f632e21b42ab165e7944283cf9764b590e,306b28f6,Wrong license on ao_monitor.c,"Wrong license on ao_monitor.c
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240521806,1240521806,dca3a6de26d26c0020f3fb2cf5d8ac1552c195b1
dca3a6de26d26c0020f3fb2cf5d8ac1552c195b1,dca3a6de,Crank up radio to 10dBm,"Crank up radio to 10dBm
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240521780,1240521780,fbe3096f7e9a8112dbc79f376eccdaa6872ae520
fbe3096f7e9a8112dbc79f376eccdaa6872ae520,fbe3096f,Add COPYING file,"Add COPYING file
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240441408,1240441408,9b7788f18bbaf3c4e5ebbf6c5ebd926468b0e045
9b7788f18bbaf3c4e5ebbf6c5ebd926468b0e045,9b7788f1,Clean up TeleTerra files,"Clean up TeleTerra files
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240440901,1240440901,61cee50c86e275f9fde875bd317c3e74255394ec
61cee50c86e275f9fde875bd317c3e74255394ec,61cee50c,simplify ao_time function,"simplify ao_time function
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240440835,1240440835,3703ecdc9e190f2e0b7ead0e71b78be881c1f3b7
3703ecdc9e190f2e0b7ead0e71b78be881c1f3b7,3703ecdc,One line radio status,"One line radio status
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240440826,1240440826,1fbb3c17672a03ea6318fee07f9c2dcd7a8d0b16
1fbb3c17672a03ea6318fee07f9c2dcd7a8d0b16,1fbb3c17,Add new binaries to .gitignore,"Add new binaries to .gitignore
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240440556,1240440556,00d5610caff61559eb24c24beaa56629d6bb03be
00d5610caff61559eb24c24beaa56629d6bb03be,00d5610c,Speed up dbg port bit frobbing,"Speed up dbg port bit frobbing
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240440540,1240440540,c7555eb16876aa8ff9fe7f648d325a1b8fb54d23
c7555eb16876aa8ff9fe7f648d325a1b8fb54d23,c7555eb1,Use sdcc from path,"Use sdcc from path
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240440508,1240440508,ada6dea04b94be016598566c4c13e6105aaec353
ada6dea04b94be016598566c4c13e6105aaec353,ada6dea0,Clean up task list formatting,"Clean up task list formatting
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240440494,1240440494,0a1b2297ee9f5bbb918bd72f26088a3e0b84839a
0a1b2297ee9f5bbb918bd72f26088a3e0b84839a,0a1b2297,Control radio monitoring with the M command,"Control radio monitoring with the M command
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240440477,1240440477,d87e9c25947d7cc2eba8894a524977f2c55a089a
837c620f07b63efc171be3ac14c78bc99adf7592,837c620f,"Shrink USB output buffers, work around USB packet errors","Shrink USB output buffers, work around USB packet errors
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240435543,1240435543,31fce622b1bab7e3f421069d7f6d4d9bdcd825de
d87e9c25947d7cc2eba8894a524977f2c55a089a,d87e9c25,Clean up telemetry now that all packets are the same,"Clean up telemetry now that all packets are the same
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240304844,1240304844,1b333def5052d2ed47fdeaef23a897fe326f6340
1b333def5052d2ed47fdeaef23a897fe326f6340,1b333def,Add longer debug delays to reset/debug_mode entry,"Add longer debug delays to reset/debug_mode entry
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240304828,1240304828,d1887ded41a5bfec8e10e9fd736fa9444b9b6222
d1887ded41a5bfec8e10e9fd736fa9444b9b6222,d1887ded,Fix up fancy dbg stuff. Add teleterra initial bits.,"Fix up fancy dbg stuff. Add teleterra initial bits.

The dbg stuff needed a bit of help to actually walk the tables; it appears
that complex expressions confuse sdcc.

This also adds primitive teleterra bits, but no UI, etc.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240301823,1240301823,43c8f7012102cdb591ace899420c10e4a78385ad
43c8f7012102cdb591ace899420c10e4a78385ad,43c8f701,Add radio support. Build separate executables for TeleMetrum and the TI dongle,"Add radio support. Build separate executables for TeleMetrum and the TI dongle

Ok, way too big a patch, but things were in rough shape.
This patch adds support for the radio, both transmit and receive.
Then, because I could no longer run the TeleMetrum code on the TI
dongle, I ended up building a separate image for the TI board, which
involved creating a mechanism for having multiple command sets and splitting
code for different functions into different files.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240295621,1240295621,5be13b76a2e29b84cd6d1eec065e3354b0dafce5
5be13b76a2e29b84cd6d1eec065e3354b0dafce5,5be13b76,Start using pdata area for less-frequently used data,"Start using pdata area for less-frequently used data
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240121964,1240121964,3e18b5a0d4c7d84df98b6ed0b7783de1d42d45bf
3e18b5a0d4c7d84df98b6ed0b7783de1d42d45bf,3e18b5a0,Slow down panic presentation,"Slow down panic presentation
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240121945,1240121945,c4e983daa4579896b227fdcb2be43fad75e94307
c4e983daa4579896b227fdcb2be43fad75e94307,c4e983da,Parse GPS data locally. Add 'g' command to display recent GPS results.,"Parse GPS data locally. Add 'g' command to display recent GPS results.

This parses the GPS GGA message and stores it in a global variable,
protected by a mutex.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240121865,1240121865,ed6f67dc47d750d5ff8bea63ae7cbb560689b9b6
ed6f67dc47d750d5ff8bea63ae7cbb560689b9b6,ed6f67dc,Add task names and 'T' command to show task status.,"Add task names and 'T' command to show task status.

The T command shows the current wchan and PC for each task in the system.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240121761,1240121761,3d5a5fc4db5f681e848202c4ee4099d2879677d6
3d5a5fc4db5f681e848202c4ee4099d2879677d6,3d5a5fc4,Fix GPL version at 2,"Fix GPL version at 2

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240108338,1240108338,022f83ca6fd589005d8eb3e25e633950fef69fa7
022f83ca6fd589005d8eb3e25e633950fef69fa7,022f83ca,"Add gps, debug dongle support and pressure alt tables","Add gps, debug dongle support and pressure alt tables

GPS also pulled in serial support. The altitude tables take raw 11-bit
pressure sample numbers and convert them to standard pressure altitude
values.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1240036694,1240036694,5e2393eb6b1a6d7b180bd63d5165ee7b7ff5f9e0
31fce622b1bab7e3f421069d7f6d4d9bdcd825de,31fce622,Enable FEC in radio packets,"Enable FEC in radio packets
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239989565,1239989565,293a357911090a2f37bdd6f7ea96942079ffdf2e
293a357911090a2f37bdd6f7ea96942079ffdf2e,293a3579,Add CRC to radio packets,"Add CRC to radio packets
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239989382,1239989382,20834caf01ddf481e8362b0d2627ef383a82e09d
20834caf01ddf481e8362b0d2627ef383a82e09d,20834caf,Add data whitening,"Add data whitening
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239988990,1239988990,94e5343a72121a81ab19bf5025e6b6fc9847eb4f
94e5343a72121a81ab19bf5025e6b6fc9847eb4f,94e5343a,Add packet status byte defines,"Add packet status byte defines
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239988765,1239988765,04bc51c170c6f22bb5cc16867ce9a307818a7a00
04bc51c170c6f22bb5cc16867ce9a307818a7a00,04bc51c1,Add separate xmit/recv programs to radio demo,"Add separate xmit/recv programs to radio demo
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239988291,1239988291,fafe55c3405964e0defdf25b6c00236f9aaefbc5
fafe55c3405964e0defdf25b6c00236f9aaefbc5,fafe55c3,Get env var for debug method selection,"Get env var for debug method selection
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239988271,1239988271,26095fc0511ee0d5213f038986032f7c59964cf0
26095fc0511ee0d5213f038986032f7c59964cf0,26095fc0,Run-time selection between cp2103 and cc1111,"Run-time selection between cp2103 and cc1111
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239988247,1239988247,543bedde83cbce5145668e72965e02d892187b59
543bedde83cbce5145668e72965e02d892187b59,543bedde,Send data,"Send data
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239939494,1239939494,11c526bdcbf4012e18fbfdc29ca8832870ca38f0
5e2393eb6b1a6d7b180bd63d5165ee7b7ff5f9e0,5e2393eb,Move a bunch of variables from __data to __xdata,"Move a bunch of variables from __data to __xdata
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239830726,1239830726,4d1091d9bd121f05f5fe0a9c9d2bc0da8c562b9a
4d1091d9bd121f05f5fe0a9c9d2bc0da8c562b9a,4d1091d9,"Slow down panic code, disable interrupts","Slow down panic code, disable interrupts
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239769515,1239769515,545478dd02eaeff6a65d318e722b1e4fce5e01b4
545478dd02eaeff6a65d318e722b1e4fce5e01b4,545478dd,Keep reporting flight state while it changes,"Keep reporting flight state while it changes
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239769465,1239769465,9605045164882b4ca3d1317ac860b02513a51f30
9605045164882b4ca3d1317ac860b02513a51f30,96050451,use red LED to indicate system startup,"use red LED to indicate system startup
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239769435,1239769435,dc844ee7e49a3b6145b3165252a592ed070d600f
dc844ee7e49a3b6145b3165252a592ed070d600f,dc844ee7,Use ao_ee_flush_internal while holding mutex,"Use ao_ee_flush_internal while holding mutex
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239769393,1239769393,5e45d1c89b00e74d5b2730345843f43aab516af2
5e45d1c89b00e74d5b2730345843f43aab516af2,5e45d1c8,Leave beeping and lights to the flight code,"Leave beeping and lights to the flight code
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239769376,1239769376,902c342289c1d13a4d55b9224acb6d67578b7a60
902c342289c1d13a4d55b9224acb6d67578b7a60,902c3422,Make mutex functions reentrant,"Make mutex functions reentrant
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239769351,1239769351,acc4fc635edb70ec1ba2dff9f7ac0c8542c72c47
acc4fc635edb70ec1ba2dff9f7ac0c8542c72c47,acc4fc63,Add in existing flight pieces: flight/report/log,"Add in existing flight pieces: flight/report/log

These pieces come from the old telemetrum firmware.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239761281,1239761281,ac99982b10fd5772218660137ee21db9b90cd885
ac99982b10fd5772218660137ee21db9b90cd885,ac99982b,Add eeprom driver and command loop,"Add eeprom driver and command loop

This involved adding dma control and a mutex implementation.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239744116,1239744116,fbd8f4aff5058f4d371596b04715b7cb6d38e729
fbd8f4aff5058f4d371596b04715b7cb6d38e729,fbd8f4af,Switch from --model-large to --model-small,"Switch from --model-large to --model-small

This shrinks the application quite a bit, and should make it faster as well.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239732249,1239732249,fb63262699d3a6fbf347d24efda8b01f75b7d0d3
fb63262699d3a6fbf347d24efda8b01f75b7d0d3,fb632626,"Add comments, clean up white space, etc.","Add comments, clean up white space, etc.

Various clean ups now that the basic code appears to work.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239728539,1239728539,7e4abf3a40c39d0ce4f466281bef9a464df85dd4
7e4abf3a40c39d0ce4f466281bef9a464df85dd4,7e4abf3a,Switch USB to double-buffered,"Switch USB to double-buffered
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239685087,1239685087,b56a44e48552bc32dbba9ff21770c370219a684a
b56a44e48552bc32dbba9ff21770c370219a684a,b56a44e4,Fix USB input/output by reloading packet limits.,"Fix USB input/output by reloading packet limits.

The USB controller is reset during the connection process, which clears the
packet limits set in the controller at initialization time. Reload those
values when the configuration is set.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239684719,1239684719,cdaf3fc5802acf2ddc7972a15649ab0e1b31b873
cdaf3fc5802acf2ddc7972a15649ab0e1b31b873,cdaf3fc5,USB working up through reading strings,"USB working up through reading strings
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239680386,1239680386,c5c1e3fb1c253d387be02c127253ac2a55d577b4
c5c1e3fb1c253d387be02c127253ac2a55d577b4,c5c1e3fb,Add USB support.,"Add USB support.

This offers a single CDC ACM device over USB.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239655868,1239655868,f3f25a1cec7d2a034aa544569cfd23bea1a996c5
f3f25a1cec7d2a034aa544569cfd23bea1a996c5,f3f25a1c,Add beep/led support.,"Add beep/led support.

Support our P2_0 connected buzzer, and formalize LED output support.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239605635,1239605635,e14f07bfdb8824fc7ed6df1129c66ee39ffd6d54
e14f07bfdb8824fc7ed6df1129c66ee39ffd6d54,e14f07bf,Add A/D sampler,"Add A/D sampler

Sample A/D at the timer tick, placing data in a ring
of samples.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239603436,1239603436,823f4f92de0c1f8dd7a644a8e56ffe9822bee6e2
823f4f92de0c1f8dd7a644a8e56ffe9822bee6e2,823f4f92,Add 100Hz timer,"Add 100Hz timer

Use Timer 1 to generate a 100Hz timer interrupt
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239601967,1239601967,650a77e209dbb54c8d8fd9824cee430985564973
650a77e209dbb54c8d8fd9824cee430985564973,650a77e2,Update README,"Update README
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239598729,1239598729,870e98334018a66de8a6e4a659d2dc5dee1cbecf
870e98334018a66de8a6e4a659d2dc5dee1cbecf,870e9833,GPL Version 2 only,"GPL Version 2 only
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239598376,1239598376,55402ba3e87fd699c51079843309f1f0d1534724
11c526bdcbf4012e18fbfdc29ca8832870ca38f0,11c526bd,Add load command to s51,"Add load command to s51
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239598052,1239598052,5221dc63cf3a059a32aca2bfa7828c215be814a1
55402ba3e87fd699c51079843309f1f0d1534724,55402ba3,Make test more complicated,"Make test more complicated
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239597235,1239597235,3d3f849c9af9028f667cef4afedc0798d39a9efc
3d3f849c9af9028f667cef4afedc0798d39a9efc,3d3f849c,SP points at last pushed byte,"SP points at last pushed byte
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239597226,1239597226,f72c4cbc8fd9412dd1cce0fc446e7bbd2edc2d34
f72c4cbc8fd9412dd1cce0fc446e7bbd2edc2d34,f72c4cbc,Add .gitignore,"Add .gitignore
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239593223,1239593223,1903a86bf2cc6b685ccc475e62eabe49a4ec5b43
1903a86bf2cc6b685ccc475e62eabe49a4ec5b43,1903a86b,Initial AltOS import,"Initial AltOS import
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239593139,1239593139,
5221dc63cf3a059a32aca2bfa7828c215be814a1,5221dc63,Add ccdump,"Add ccdump
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239565138,1239565138,ee110425fb814780476d1d3d8a257af126f41763
ee110425fb814780476d1d3d8a257af126f41763,ee110425,Bump buffer pointer as data is written to cc-usb,"Bump buffer pointer as data is written to cc-usb
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239062963,1239062963,2d9b8a83a2d9f495199033e43f519d26f27938fe
2d9b8a83a2d9f495199033e43f519d26f27938fe,2d9b8a83,Add support for a serial-connected custom debug dongle,"Add support for a serial-connected custom debug dongle

This uses the cc1111 board as a custom debug dongle with faster
methods for communicating with the debug target.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1239042709,1239042741,24edd56155ed0fa02fdd8f66fdc7aa5a1021bf7d
24edd56155ed0fa02fdd8f66fdc7aa5a1021bf7d,24edd561,Reset cc1111 on s51 exit,"Reset cc1111 on s51 exit
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238633447,1238633447,5fcfe854d29e1862d9a6adcbef3ef5119eb52fa3
5fcfe854d29e1862d9a6adcbef3ef5119eb52fa3,5fcfe854,Add timer-based beep test,"Add timer-based beep test
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238569605,1238569605,91607bebdd167ac632aca4b66e22cb0cabdf0d20
91607bebdd167ac632aca4b66e22cb0cabdf0d20,91607beb,Add readline support to s51,"Add readline support to s51
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238132507,1238132507,66ee94ed10e3d79b24f45a5c63e58456d4d30343
66ee94ed10e3d79b24f45a5c63e58456d4d30343,66ee94ed,Deal with MSB-outputing DMA engine,"Deal with MSB-outputing DMA engine
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238006268,1238006268,d3732fd405af03c3752a84c4b78da7ef5ebd3744
d3732fd405af03c3752a84c4b78da7ef5ebd3744,d3732fd4,Flip ADC bytes around,"Flip ADC bytes around
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238004843,1238004843,50cc8e97e76d9b60c622962e1c74cf422dfb2c0f
50cc8e97e76d9b60c622962e1c74cf422dfb2c0f,50cc8e97,Add spacing for serial adc data,"Add spacing for serial adc data
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238004090,1238004090,5577ca3762bfc000b0bc3782c73a8f95996a28a6
5577ca3762bfc000b0bc3782c73a8f95996a28a6,5577ca37,Inc only one on dest addr,"Inc only one on dest addr
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238003937,1238003937,378227d869a3e8787c532c8c4e1563b44002c4b5
378227d869a3e8787c532c8c4e1563b44002c4b5,378227d8,Dump remaining inputs,"Dump remaining inputs
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238003717,1238003717,f54a41e37d6897db2e24fbc82880076b78a0ae41
f54a41e37d6897db2e24fbc82880076b78a0ae41,f54a41e3,Remove poll for ti demo button,"Remove poll for ti demo button
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238003436,1238003436,2b93a70fdd9e47e8195855451aa19ecad5d8b068
2b93a70fdd9e47e8195855451aa19ecad5d8b068,2b93a70f,Add adc to serial conversion,"Add adc to serial conversion
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238003414,1238003414,d9fd548db15232e3a8823815962b252c7a5e7cba
d9fd548db15232e3a8823815962b252c7a5e7cba,d9fd548d,Add ADC via DMA example,"Add ADC via DMA example
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1238000690,1238000690,61faf2b773300988fe27cfde5bc045be9950a1b0
61faf2b773300988fe27cfde5bc045be9950a1b0,61faf2b7,Add DMA example,"Add DMA example
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237999514,1237999514,7b3fdf5b42c9be9bebc1ceb7a52ff0f5a2a28fcd
7b3fdf5b42c9be9bebc1ceb7a52ff0f5a2a28fcd,7b3fdf5b,Back to 0dBm,"Back to 0dBm
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237968336,1237968336,31d59b88baa2cd96dc6263d1c5877283f2cd8c36
31d59b88baa2cd96dc6263d1c5877283f2cd8c36,31d59b88,Make radio test compile again,"Make radio test compile again
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237968188,1237968188,9ce713fdd19bf1a51370dacba3670504356c5c11
9ce713fdd19bf1a51370dacba3670504356c5c11,9ce713fd,Wait for xtal to stabilize,"Wait for xtal to stabilize
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237968127,1237968127,ffd43886dc902f3bb7407294018e3d62cac39480
ffd43886dc902f3bb7407294018e3d62cac39480,ffd43886,Check serial input,"Check serial input
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237967711,1237967711,029963cc94fbb47560118b5de73c537e2c14ed7c
029963cc94fbb47560118b5de73c537e2c14ed7c,029963cc,Eliminate array walking,"Eliminate array walking
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237967402,1237967402,019456a17d36f8f9f9b72cfbc980492175086d32
019456a17d36f8f9f9b72cfbc980492175086d32,019456a1,Add a per-char delay,"Add a per-char delay
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237966909,1237966909,cfaf187e96ba98eb8dd934409a10bc70273fe68a
cfaf187e96ba98eb8dd934409a10bc70273fe68a,cfaf187e,Use UTX1IF to wait for serial TX complete,"Use UTX1IF to wait for serial TX complete
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237966595,1237966595,006124529b243c7657a94312d2c868a82878d8bb
006124529b243c7657a94312d2c868a82878d8bb,00612452,Send more interesting text,"Send more interesting text
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237966169,1237966169,5049acd3d1ae42304513f667f55a2ddffa4c685a
5049acd3d1ae42304513f667f55a2ddffa4c685a,5049acd3,More random serial bit frobbing,"More random serial bit frobbing
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237965896,1237965896,50bdc2407c674a4770912d3a626f36820a7f1527
50bdc2407c674a4770912d3a626f36820a7f1527,50bdc240,Flip serial TX code around a bit,"Flip serial TX code around a bit
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237965195,1237965195,7b7617e376afe0df1d505375b76198358330370c
7b7617e376afe0df1d505375b76198358330370c,7b7617e3,Try serial polarity high/high,"Try serial polarity high/high
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237964987,1237964987,18edacdb1e6e429cc29a164e22ef2a566096b9d9
18edacdb1e6e429cc29a164e22ef2a566096b9d9,18edacdb,Make serial test simpler,"Make serial test simpler
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237964792,1237964792,62744c186792739c3bf5798c80ff87c69fbe2b65
62744c186792739c3bf5798c80ff87c69fbe2b65,62744c18,Flip start/stop bits around,"Flip start/stop bits around
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237964625,1237964625,9e96107d5d1a9681b07c36bb5860c748bfe10ec0
9e96107d5d1a9681b07c36bb5860c748bfe10ec0,9e96107d,Stop high,"Stop high
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237964232,1237964232,c41ceb9a488b2209d1d3c09967d1473ce608030f
c41ceb9a488b2209d1d3c09967d1473ce608030f,c41ceb9a,Change radio to -30dBm,"Change radio to -30dBm
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237962241,1237962241,c35de083ca3d4f362063b056a0fd74ffe629d168
c35de083ca3d4f362063b056a0fd74ffe629d168,c35de083,Add serial test program,"Add serial test program
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237961508,1237961508,8ecbd8734f0fb5588b2a8eb20720cfc6f43dfb47
8ecbd8734f0fb5588b2a8eb20720cfc6f43dfb47,8ecbd873,Wait for xtal to stabilize after changing to 24MHz,"Wait for xtal to stabilize after changing to 24MHz
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237959458,1237959458,e120269fc0f8e14ddf1755337b1d092173e16da2
e120269fc0f8e14ddf1755337b1d092173e16da2,e120269f,Actually return byte read from SPI,"Actually return byte read from SPI
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237958491,1237958491,de1ac6f99a1526fa840a52cfc10fa3edc0589bed
de1ac6f99a1526fa840a52cfc10fa3edc0589bed,de1ac6f9,Clear UxCSR_TX_BYTE after transmitting a byte,"Clear UxCSR_TX_BYTE after transmitting a byte
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237957971,1237957971,3ed3ff63e46767a256d30c5da5c52ae20089a91d
3ed3ff63e46767a256d30c5da5c52ae20089a91d,3ed3ff63,Led the LED turn on,"Led the LED turn on
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237950298,1237950298,91b3a6ae74184692f45702587c4d678b2799ad8c
91b3a6ae74184692f45702587c4d678b2799ad8c,91b3a6ae,actually write and compare SPI test bits,"actually write and compare SPI test bits
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237949704,1237949704,7de3a43887485c3c6cf52960376ccde33fb33985
7de3a43887485c3c6cf52960376ccde33fb33985,7de3a438,Add USART-based SPI test code,"Add USART-based SPI test code
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237949642,1237949642,ef0eef68280e9b6ca5e3bb71062e23054340e1ed
ef0eef68280e9b6ca5e3bb71062e23054340e1ed,ef0eef68,Change spi test string,"Change spi test string
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237940556,1237940556,8131389ee5018c05b721146a98367150cf500fdf
8131389ee5018c05b721146a98367150cf500fdf,8131389e,"Oops, not merging in the bit read for SPI test","Oops, not merging in the bit read for SPI test
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237940109,1237940109,3429016d1359ec650993d2fb0596184e3f717871
3429016d1359ec650993d2fb0596184e3f717871,3429016d,Adjust clock/data phase for spi test,"Adjust clock/data phase for spi test
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237939485,1237939485,fedd18b28ea54e1dabcd2f9e8cab3ae4ee0fd070
fedd18b28ea54e1dabcd2f9e8cab3ae4ee0fd070,fedd18b2,MISO needs to be an input,"MISO needs to be an input
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237937713,1237937713,f0c233f25a208a636833312b1766825815735304
f0c233f25a208a636833312b1766825815735304,f0c233f2,Add bit-banging spi eeprom test program,"Add bit-banging spi eeprom test program
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237934515,1237934607,6eeee64cf16ccc9218dbdde5426f25bda5e3407f
6eeee64cf16ccc9218dbdde5426f25bda5e3407f,6eeee64c,working beep at around 4khz,"working beep at around 4khz
",,,,Bdale Garbee,bdale@gag.com,Bdale Garbee,bdale@gag.com,1237366713,1237401623,4726317de811c20e8d6754762437b5c9cbb3a48c
4726317de811c20e8d6754762437b5c9cbb3a48c,4726317d,Add simple test program to light up the transmitter at 434.550MHz,"Add simple test program to light up the transmitter at 434.550MHz

This starts a transmit sequence, but doesn't send any data so the
transmitter just locks on.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237366474,1237366474,a0a27600ee2bf237e74eb83767a8d2e7c91df24f
a0a27600ee2bf237e74eb83767a8d2e7c91df24f,a0a27600,Correctly comment which bit the beep program uses,"Correctly comment which bit the beep program uses
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237166061,1237166061,25b77d236c01258abfc03114c2fc9ea2d69ca6e7
25b77d236c01258abfc03114c2fc9ea2d69ca6e7,25b77d23,Add telemetrum beeper example,"Add telemetrum beeper example
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237165913,1237165913,164b4e4749ad64ebbe26e84fd7b4fa1aa733dbe4
164b4e4749ad64ebbe26e84fd7b4fa1aa733dbe4,164b4e47,sdcc gets the lib path correct based on the model,"sdcc gets the lib path correct based on the model
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237165880,1237165880,04a316133af93b79bfbebb91f05eec1015ec2abc
04a316133af93b79bfbebb91f05eec1015ec2abc,04a31613,Bump debug speed back up,"Bump debug speed back up
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1237165843,1237165843,9fd63972758d6d5572f7bcaadec9b1c0e974a2e8
9fd63972758d6d5572f7bcaadec9b1c0e974a2e8,9fd63972,Only flip changing bits in async mode,"Only flip changing bits in async mode
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1236488740,1236488740,c8fd04e154bcfd65ae1200980bd8163caabd7fe4
c8fd04e154bcfd65ae1200980bd8163caabd7fe4,c8fd04e1,The debug port only works if reset is higher than clock. weird,"The debug port only works if reset is higher than clock. weird
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1236488706,1236488706,ade11f88754b4ab0386ebf86afc5257e59238f62
ade11f88754b4ab0386ebf86afc5257e59238f62,ade11f88,Make manual bit flipping sync after every transaction,"Make manual bit flipping sync after every transaction
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1236488678,1236488678,e63b5271bb54afc36e4b9891e51e053ff6011092
e63b5271bb54afc36e4b9891e51e053ff6011092,e63b5271,Add ccmanual,"Add ccmanual
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1236466162,1236466162,77d754afc2d14aaa4413c13ebe3777ef385f62a9
77d754afc2d14aaa4413c13ebe3777ef385f62a9,77d754af,Sync after manual bit reading,"Sync after manual bit reading
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1236466129,1236466129,5a338c8a7394d003355f96a8777b6fe83bb8493c
5a338c8a7394d003355f96a8777b6fe83bb8493c,5a338c8a,Flip debug pins around to match telemetrum,"Flip debug pins around to match telemetrum
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1236466115,1236466115,cc0495b7028f4b1189a00707d828a68534d1dea2
cc0495b7028f4b1189a00707d828a68534d1dea2,cc0495b7,Wait for a while when switching the RESET_N line,"Wait for a while when switching the RESET_N line

The cc1111 manual suggests placing a 2.7kΩ resister and 1nF capacitor on the
RESET_N line to filter out noise. This increases the time necessary to reset
the chip to several microseconds which is longer than the interval between
two USB packets. Flush the USB packet queue and sleep for a while after
changing the value on the RESET_N line to make sure the chip sees the state
change.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1236408755,1236409007,41289e6d8f1767547a33fea349866e928e44910f
41289e6d8f1767547a33fea349866e928e44910f,41289e6d,minor s51.1 formatting fixes,"minor s51.1 formatting fixes

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Bdale Garbee,bdale@gag.com,Keith Packard,keithp@keithp.com,1236005180,1236006774,fdee231ed097a4348aee78fbd4aa92826b80de03
fdee231ed097a4348aee78fbd4aa92826b80de03,fdee231e,Add s51 manual.,"Add s51 manual.

This documents (briefly) the s51 hex debugging interface program, including
some simple commands to test the operation of the system interactively.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1235977951,1235977951,f7d91bd23b8214e09deae0aafb516331e934c49b
f7d91bd23b8214e09deae0aafb516331e934c49b,f7d91bd2,Sometimes the link breaks and the GET_PC command returns garbage,"Sometimes the link breaks and the GET_PC command returns garbage
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1235961783,1235961783,3cc8d11eb8d5d0b42141dd84a58d461287f59e3a
3cc8d11eb8d5d0b42141dd84a58d461287f59e3a,3cc8d11e,Support 'set' command,"Support 'set' command

The 'set' command modifies target memory and registers

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1232901528,1232901528,60940b4be23962db79b8e914ec943d0636dd68ad
60940b4be23962db79b8e914ec943d0636dd68ad,60940b4b,Expose ccdbg_set_clock API,"Expose ccdbg_set_clock API

This allows applications to change the debug port clock
rate on the fly.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1231220721,1231220721,eb09e61b0682eb2aeac8e1a34d58b897ba6db8e7
eb09e61b0682eb2aeac8e1a34d58b897ba6db8e7,eb09e61b,Use custom sdcc libraries (this needs to be configured...),"Use custom sdcc libraries (this needs to be configured...)

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1231220684,1231220684,1ccfe0887c794397131ab1c986c25f66eea86a6c
1ccfe0887c794397131ab1c986c25f66eea86a6c,1ccfe088,Have S51 ignore SIGINT while running under sdcdb.,"Have S51 ignore SIGINT while running under sdcdb.

This prevents keyboard interrupts from accidentally stopping
s51.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1231220624,1231220624,7c03937b36aac82b08f4ea0c6da33a994fe15ec7
7c03937b36aac82b08f4ea0c6da33a994fe15ec7,7c03937b,Add simple and timer sample programs,"Add simple and timer sample programs

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1230705613,1230705613,6c2a65c743a4ffae96ed27dbc38c1bf9242ed1df
6c2a65c743a4ffae96ed27dbc38c1bf9242ed1df,6c2a65c7,Save/restore registers to host during memory operations. Cache ROM data.,"Save/restore registers to host during memory operations. Cache ROM data.

Because the debug port uses instructions for most operations, the debug code
will clobber registers used by the running program. Save and restore these
to avoid corrupting application data.

If the ROM file is known, use that to return data instead of fetching it
from the target to improve performance.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1230705353,1230705515,ea366058aa467a8a7caf17e7014758f3741ea7f7
ea366058aa467a8a7caf17e7014758f3741ea7f7,ea366058,Fix flashing less than a full page of data. Verify page at a time.,"Fix flashing less than a full page of data. Verify page at a time.

The 8051 flashing code requires special help with counts with non-zero low
byte. Also, instead of verifying the entire flash contents at the end,
verify each page as it goes.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1230582911,1230582911,e0697186a2f9b6139636ff5d5c162879c85caf9c
e0697186a2f9b6139636ff5d5c162879c85caf9c,e0697186,Use SFR access funcs. Support 'dump' command. Add -m (monitor) flag.,"Use SFR access funcs. Support 'dump' command. Add -m (monitor) flag.

Not all SFRs are visible in the unified address space, so the SFR-specific
accessors are required.

The dump command is the same as the various 'd*'
commands, but also supports dumping program memory.

The new -m (monitor) flag watches the command stream between s51 and sdcdb.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1230451873,1230451873,23aca1fcbc169184e32d4ec19f28dd4fd4cfda36
23aca1fcbc169184e32d4ec19f28dd4fd4cfda36,23aca1fc,Save/restore regs when reading/writing memory. Add SFR access.,"Save/restore regs when reading/writing memory. Add SFR access.

The DPL and ACC registers are used by the memory access code,
so they need to be saved and restored. Stuff them up high in ram for now;
this should probably be fixed to pull them back to the host instead.

Special SFR access is required as not all SFRs are visible in the unified
address space.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1230451770,1230451770,1405838160b69e2cda456e21502a1d03b3aa7548
1405838160b69e2cda456e21502a1d03b3aa7548,14058381,s51: get start address from ihx file. re-enable breakpoints after reset.,"s51: get start address from ihx file. re-enable breakpoints after reset.

Use the start of the ihx file when asked to run from 0x0, this lets
sdcdb run programs from ram.

The reset command clears all hw breakpoints, so reset them afterwards.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1230405958,1230405958,1264c3676e95427bba5d01e05c303d036a7f9eca
1264c3676e95427bba5d01e05c303d036a7f9eca,1264c367,Switch to libusb-1.0 and use async interface.,"Switch to libusb-1.0 and use async interface.

The async libusb interface offers substantial performance benefits by not
making each command wait for the reply. This makes talking over this
interface almost reasonable.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1230361504,1230361504,d2d9cfd74fd66836c913c02276e09136d83b35dc
d2d9cfd74fd66836c913c02276e09136d83b35dc,d2d9cfd7,s51: add breakpoints and the ability to block awaiting a breakpoint.,"s51: add breakpoints and the ability to block awaiting a breakpoint.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1230343128,1230343128,4c4093c3fdd309123fdd068c0e1ff4947104492d
4c4093c3fdd309123fdd068c0e1ff4947104492d,4c4093c3,Add more commands to s51 assembly-language debugger,"Add more commands to s51 assembly-language debugger

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1230001916,1230001916,55eba4fa08b022197106245d36a70f575a070b0a
55eba4fa08b022197106245d36a70f575a070b0a,55eba4fa,Make read_memory debug output use ccdbg_debug.,"Make read_memory debug output use ccdbg_debug.

This makes it default to not being presented, which makes s51 much happier

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1230001827,1230001827,e75918f3667a5c8ad294bec4acef6fe81682edf6
e75918f3667a5c8ad294bec4acef6fe81682edf6,e75918f3,"Add preliminary version of s51, a UI clone of the 8051 emulator.","Add preliminary version of s51, a UI clone of the 8051 emulator.

sdcdb provides source-level debugging using the 8051 emulator, s51. By
emulating that emulator a the UI level, we should be able to get source
debugging right on our target platform.

This is just the preliminary structure for the program with most commands
not yet implemented.
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229931215,1229931222,f7d49868aeae80d515b12a7e339628f1296754a6
f7d49868aeae80d515b12a7e339628f1296754a6,f7d49868,Cleanup work; separating out the cp interface to be more abstract.,"Cleanup work; separating out the cp interface to be more abstract.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229844606,1229844606,30f23f23a6db3d12fdc9c088cf6ab47c5e5077fb
30f23f23a6db3d12fdc9c088cf6ab47c5e5077fb,30f23f23,Clean up autotools stuff.,"Clean up autotools stuff.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229749984,1229750150,9025eb792861930e6af918d2727c4f5d97a69936
9025eb792861930e6af918d2727c4f5d97a69936,9025eb79,Autotools.,"Autotools.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229749905,1229749905,ab909db28307cfbf7ee8d692506bb79d7ffd627a
ab909db28307cfbf7ee8d692506bb79d7ffd627a,ab909db2,Ignore .ihx files,"Ignore .ihx files
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229742493,1229742493,cc8db276bc4f2fd7eb00168a5c0689a8457a5c6f
cc8db276bc4f2fd7eb00168a5c0689a8457a5c6f,cc8db276,Move blink example to subdir,"Move blink example to subdir

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229742457,1229742457,82e2d7ebed6682062dc400478c736bd6c91195c9
82e2d7ebed6682062dc400478c736bd6c91195c9,82e2d7eb,"Clean up makefiles, move ihx files to .ihx","Clean up makefiles, move ihx files to .ihx
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229742266,1229742266,52fb5f795adfd7f62e5b6dbe65877d14361cfdae
52fb5f795adfd7f62e5b6dbe65877d14361cfdae,52fb5f79,ignore more stuff,"ignore more stuff
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229726397,1229726397,4ecfc33f16aa36b315519e6f279da65374b67aba
4ecfc33f16aa36b315519e6f279da65374b67aba,4ecfc33f,Add cc1111 isr stub example,"Add cc1111 isr stub example
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229726273,1229726273,d32e6658c3e489b62ba3cf6d22e3ab177b9b8a3a
d32e6658c3e489b62ba3cf6d22e3ab177b9b8a3a,d32e6658,Add blink-tiny flash and ram versions,"Add blink-tiny flash and ram versions
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229726249,1229726249,b4d1127ef007843c643b778b3b2f6b915b1d5d9a
b4d1127ef007843c643b778b3b2f6b915b1d5d9a,b4d1127e,Flash multiple pages. Eliminate off-by-one error in hex_image length.,"Flash multiple pages. Eliminate off-by-one error in hex_image length.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229725169,1229725169,55995515b9d4fc1e193039eab697c5d03db417c2
55995515b9d4fc1e193039eab697c5d03db417c2,55995515,Add flash writing code.,"Add flash writing code.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229713456,1229713456,0bc52385b8f86f9ca1c450ad106e6d8afe3bc153
0bc52385b8f86f9ca1c450ad106e6d8afe3bc153,0bc52385,faster,"faster

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229632652,1229632652,3779cc8b32cac3640f42bd0400d4199ddae965a1
3779cc8b32cac3640f42bd0400d4199ddae965a1,3779cc8b,cq,"cq

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229631461,1229631461,dc03adc179669d41e3551d74b3c5a60db41ff217
dc03adc179669d41e3551d74b3c5a60db41ff217,dc03adc1,Add ability to load Intel HEX files. Add sample sdcc LED blinker.,"Add ability to load Intel HEX files. Add sample sdcc LED blinker.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229630826,1229630826,807e2adacb025af77bb53c03209e9c8e0d7a5f95
807e2adacb025af77bb53c03209e9c8e0d7a5f95,807e2ada,Add ability to read/write arbitrary memory. Write LED blinker program.,"Add ability to read/write arbitrary memory. Write LED blinker program.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229588330,1229588330,8c879bf51c14a5928135d59211facd72f6a32808
8c879bf51c14a5928135d59211facd72f6a32808,8c879bf5,Move manual bit-banging debug code to separate file,"Move manual bit-banging debug code to separate file

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229584547,1229584547,aec3bbce84a5ceb92060a4b3889379f2af2404ac
aec3bbce84a5ceb92060a4b3889379f2af2404ac,aec3bbce,reduce clock to 50us,"reduce clock to 50us

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229584519,1229584519,fa168f963f8b00144d12aa2770e9c0917cfae123
fa168f963f8b00144d12aa2770e9c0917cfae123,fa168f96,Fill out ccdbg-command to support all debug commands.,"Fill out ccdbg-command to support all debug commands.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229584379,1229584379,5df84df7cd6a31527dcfd11030f00ef9d8abf170
5df84df7cd6a31527dcfd11030f00ef9d8abf170,5df84df7,Clean up bitbanging layer. Add debug printfs.,"Clean up bitbanging layer. Add debug printfs.

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229581499,1229581499,584e28bac8af38de433767e017977ed1adddeb36
584e28bac8af38de433767e017977ed1adddeb36,584e28ba,Clean up sample debug files,"Clean up sample debug files

Signed-off-by: Keith Packard <keithp@keithp.com>
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1229545935,1229545935,e64b4dbf15e9ee1cb0de002985de7575e83d46e9
e64b4dbf15e9ee1cb0de002985de7575e83d46e9,e64b4dbf,Add support for input-only lines (-),"Add support for input-only lines (-)
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1228785928,1228785928,4f38974a9941cddaba27c17c5a46f923db386c94
4f38974a9941cddaba27c17c5a46f923db386c94,4f38974a,Add another example,"Add another example
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1228609947,1228609947,3709ec3205cfb152b6568f3ea505c67fe7504c2a
3709ec3205cfb152b6568f3ea505c67fe7504c2a,3709ec32,Add libusb support and lots more examples,"Add libusb support and lots more examples
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1228609932,1228609932,39801e6e9fb9388072ee414a447f74095a6ac960
39801e6e9fb9388072ee414a447f74095a6ac960,39801e6e,Random hacking,"Random hacking
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1227941827,1227941827,01cb2799875e086ee6096627c058ee235bbc33d5
01cb2799875e086ee6096627c058ee235bbc33d5,01cb2799,"Add prototypes, add stub mainline, add .gitignore","Add prototypes, add stub mainline, add .gitignore
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1227834435,1227834435,0ffe4ef870b0e564789a1990aeab5b6651868e5b
0ffe4ef870b0e564789a1990aeab5b6651868e5b,0ffe4ef8,cc1111 debug port access through cp2103 serial chip,"cc1111 debug port access through cp2103 serial chip
",,,,Keith Packard,keithp@keithp.com,Keith Packard,keithp@keithp.com,1227818020,1227818020,
